var uj=Object.defineProperty;var nF=r=>{throw TypeError(r)};var dj=(r,e,t)=>e in r?uj(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var _n=(r,e,t)=>dj(r,typeof e!="symbol"?e+"":e,t),Py=(r,e,t)=>e.has(r)||nF("Cannot "+t);var Ha=(r,e,t)=>(Py(r,e,"read from private field"),t?t.call(r):e.get(r)),Oy=(r,e,t)=>e.has(r)?nF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Ff=(r,e,t,n)=>(Py(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),Ly=(r,e,t)=>(Py(r,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vc(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function uQ(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var Ny={exports:{}},Qu={},Dy={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rF;function hj(){if(rF)return Pt;rF=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),u=Symbol.iterator;function h(X){return X===null||typeof X!="object"?null:(X=u&&X[u]||X["@@iterator"],typeof X=="function"?X:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,v={};function m(X,ne,Ie){this.props=X,this.context=ne,this.refs=v,this.updater=Ie||g}m.prototype.isReactComponent={},m.prototype.setState=function(X,ne){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ne,"setState")},m.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function w(){}w.prototype=m.prototype;function b(X,ne,Ie){this.props=X,this.context=ne,this.refs=v,this.updater=Ie||g}var _=b.prototype=new w;_.constructor=b,p(_,m.prototype),_.isPureReactComponent=!0;var C=Array.isArray,M=Object.prototype.hasOwnProperty,F={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function P(X,ne,Ie){var te,$={},ue=null,me=null;if(ne!=null)for(te in ne.ref!==void 0&&(me=ne.ref),ne.key!==void 0&&(ue=""+ne.key),ne)M.call(ne,te)&&!k.hasOwnProperty(te)&&($[te]=ne[te]);var Te=arguments.length-2;if(Te===1)$.children=Ie;else if(1<Te){for(var He=Array(Te),Je=0;Je<Te;Je++)He[Je]=arguments[Je+2];$.children=He}if(X&&X.defaultProps)for(te in Te=X.defaultProps,Te)$[te]===void 0&&($[te]=Te[te]);return{$$typeof:r,type:X,key:ue,ref:me,props:$,_owner:F.current}}function N(X,ne){return{$$typeof:r,type:X.type,key:ne,ref:X.ref,props:X.props,_owner:X._owner}}function D(X){return typeof X=="object"&&X!==null&&X.$$typeof===r}function Q(X){var ne={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Ie){return ne[Ie]})}var H=/\/+/g;function j(X,ne){return typeof X=="object"&&X!==null&&X.key!=null?Q(""+X.key):ne.toString(36)}function q(X,ne,Ie,te,$){var ue=typeof X;(ue==="undefined"||ue==="boolean")&&(X=null);var me=!1;if(X===null)me=!0;else switch(ue){case"string":case"number":me=!0;break;case"object":switch(X.$$typeof){case r:case e:me=!0}}if(me)return me=X,$=$(me),X=te===""?"."+j(me,0):te,C($)?(Ie="",X!=null&&(Ie=X.replace(H,"$&/")+"/"),q($,ne,Ie,"",function(Je){return Je})):$!=null&&(D($)&&($=N($,Ie+(!$.key||me&&me.key===$.key?"":(""+$.key).replace(H,"$&/")+"/")+X)),ne.push($)),1;if(me=0,te=te===""?".":te+":",C(X))for(var Te=0;Te<X.length;Te++){ue=X[Te];var He=te+j(ue,Te);me+=q(ue,ne,Ie,He,$)}else if(He=h(X),typeof He=="function")for(X=He.call(X),Te=0;!(ue=X.next()).done;)ue=ue.value,He=te+j(ue,Te++),me+=q(ue,ne,Ie,He,$);else if(ue==="object")throw ne=String(X),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return me}function J(X,ne,Ie){if(X==null)return X;var te=[],$=0;return q(X,te,"","",function(ue){return ne.call(Ie,ue,$++)}),te}function ce(X){if(X._status===-1){var ne=X._result;ne=ne(),ne.then(function(Ie){(X._status===0||X._status===-1)&&(X._status=1,X._result=Ie)},function(Ie){(X._status===0||X._status===-1)&&(X._status=2,X._result=Ie)}),X._status===-1&&(X._status=0,X._result=ne)}if(X._status===1)return X._result.default;throw X._result}var se={current:null},W={transition:null},le={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:W,ReactCurrentOwner:F};function fe(){throw Error("act(...) is not supported in production builds of React.")}return Pt.Children={map:J,forEach:function(X,ne,Ie){J(X,function(){ne.apply(this,arguments)},Ie)},count:function(X){var ne=0;return J(X,function(){ne++}),ne},toArray:function(X){return J(X,function(ne){return ne})||[]},only:function(X){if(!D(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Pt.Component=m,Pt.Fragment=t,Pt.Profiler=i,Pt.PureComponent=b,Pt.StrictMode=n,Pt.Suspense=A,Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,Pt.act=fe,Pt.cloneElement=function(X,ne,Ie){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var te=p({},X.props),$=X.key,ue=X.ref,me=X._owner;if(ne!=null){if(ne.ref!==void 0&&(ue=ne.ref,me=F.current),ne.key!==void 0&&($=""+ne.key),X.type&&X.type.defaultProps)var Te=X.type.defaultProps;for(He in ne)M.call(ne,He)&&!k.hasOwnProperty(He)&&(te[He]=ne[He]===void 0&&Te!==void 0?Te[He]:ne[He])}var He=arguments.length-2;if(He===1)te.children=Ie;else if(1<He){Te=Array(He);for(var Je=0;Je<He;Je++)Te[Je]=arguments[Je+2];te.children=Te}return{$$typeof:r,type:X.type,key:$,ref:ue,props:te,_owner:me}},Pt.createContext=function(X){return X={$$typeof:s,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:a,_context:X},X.Consumer=X},Pt.createElement=P,Pt.createFactory=function(X){var ne=P.bind(null,X);return ne.type=X,ne},Pt.createRef=function(){return{current:null}},Pt.forwardRef=function(X){return{$$typeof:o,render:X}},Pt.isValidElement=D,Pt.lazy=function(X){return{$$typeof:c,_payload:{_status:-1,_result:X},_init:ce}},Pt.memo=function(X,ne){return{$$typeof:l,type:X,compare:ne===void 0?null:ne}},Pt.startTransition=function(X){var ne=W.transition;W.transition={};try{X()}finally{W.transition=ne}},Pt.unstable_act=fe,Pt.useCallback=function(X,ne){return se.current.useCallback(X,ne)},Pt.useContext=function(X){return se.current.useContext(X)},Pt.useDebugValue=function(){},Pt.useDeferredValue=function(X){return se.current.useDeferredValue(X)},Pt.useEffect=function(X,ne){return se.current.useEffect(X,ne)},Pt.useId=function(){return se.current.useId()},Pt.useImperativeHandle=function(X,ne,Ie){return se.current.useImperativeHandle(X,ne,Ie)},Pt.useInsertionEffect=function(X,ne){return se.current.useInsertionEffect(X,ne)},Pt.useLayoutEffect=function(X,ne){return se.current.useLayoutEffect(X,ne)},Pt.useMemo=function(X,ne){return se.current.useMemo(X,ne)},Pt.useReducer=function(X,ne,Ie){return se.current.useReducer(X,ne,Ie)},Pt.useRef=function(X){return se.current.useRef(X)},Pt.useState=function(X){return se.current.useState(X)},Pt.useSyncExternalStore=function(X,ne,Ie){return se.current.useSyncExternalStore(X,ne,Ie)},Pt.useTransition=function(){return se.current.useTransition()},Pt.version="18.3.1",Pt}var iF;function n2(){return iF||(iF=1,Dy.exports=hj()),Dy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aF;function fj(){if(aF)return Qu;aF=1;var r=n2(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function s(o,A,l){var c,u={},h=null,g=null;l!==void 0&&(h=""+l),A.key!==void 0&&(h=""+A.key),A.ref!==void 0&&(g=A.ref);for(c in A)n.call(A,c)&&!a.hasOwnProperty(c)&&(u[c]=A[c]);if(o&&o.defaultProps)for(c in A=o.defaultProps,A)u[c]===void 0&&(u[c]=A[c]);return{$$typeof:e,type:o,key:h,ref:g,props:u,_owner:i.current}}return Qu.Fragment=t,Qu.jsx=s,Qu.jsxs=s,Qu}var sF;function gj(){return sF||(sF=1,Ny.exports=fj()),Ny.exports}var ie=gj(),If={},Ry={exports:{}},ki={},Qy={exports:{}},Uy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oF;function pj(){return oF||(oF=1,(function(r){function e(W,le){var fe=W.length;W.push(le);e:for(;0<fe;){var X=fe-1>>>1,ne=W[X];if(0<i(ne,le))W[X]=le,W[fe]=ne,fe=X;else break e}}function t(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var le=W[0],fe=W.pop();if(fe!==le){W[0]=fe;e:for(var X=0,ne=W.length,Ie=ne>>>1;X<Ie;){var te=2*(X+1)-1,$=W[te],ue=te+1,me=W[ue];if(0>i($,fe))ue<ne&&0>i(me,$)?(W[X]=me,W[ue]=fe,X=ue):(W[X]=$,W[te]=fe,X=te);else if(ue<ne&&0>i(me,fe))W[X]=me,W[ue]=fe,X=ue;else break e}}return le}function i(W,le){var fe=W.sortIndex-le.sortIndex;return fe!==0?fe:W.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();r.unstable_now=function(){return s.now()-o}}var A=[],l=[],c=1,u=null,h=3,g=!1,p=!1,v=!1,m=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(W){for(var le=t(l);le!==null;){if(le.callback===null)n(l);else if(le.startTime<=W)n(l),le.sortIndex=le.expirationTime,e(A,le);else break;le=t(l)}}function C(W){if(v=!1,_(W),!p)if(t(A)!==null)p=!0,ce(M);else{var le=t(l);le!==null&&se(C,le.startTime-W)}}function M(W,le){p=!1,v&&(v=!1,w(P),P=-1),g=!0;var fe=h;try{for(_(le),u=t(A);u!==null&&(!(u.expirationTime>le)||W&&!Q());){var X=u.callback;if(typeof X=="function"){u.callback=null,h=u.priorityLevel;var ne=X(u.expirationTime<=le);le=r.unstable_now(),typeof ne=="function"?u.callback=ne:u===t(A)&&n(A),_(le)}else n(A);u=t(A)}if(u!==null)var Ie=!0;else{var te=t(l);te!==null&&se(C,te.startTime-le),Ie=!1}return Ie}finally{u=null,h=fe,g=!1}}var F=!1,k=null,P=-1,N=5,D=-1;function Q(){return!(r.unstable_now()-D<N)}function H(){if(k!==null){var W=r.unstable_now();D=W;var le=!0;try{le=k(!0,W)}finally{le?j():(F=!1,k=null)}}else F=!1}var j;if(typeof b=="function")j=function(){b(H)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,J=q.port2;q.port1.onmessage=H,j=function(){J.postMessage(null)}}else j=function(){m(H,0)};function ce(W){k=W,F||(F=!0,j())}function se(W,le){P=m(function(){W(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_continueExecution=function(){p||g||(p=!0,ce(M))},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return h},r.unstable_getFirstCallbackNode=function(){return t(A)},r.unstable_next=function(W){switch(h){case 1:case 2:case 3:var le=3;break;default:le=h}var fe=h;h=le;try{return W()}finally{h=fe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(W,le){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var fe=h;h=W;try{return le()}finally{h=fe}},r.unstable_scheduleCallback=function(W,le,fe){var X=r.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?X+fe:X):fe=X,W){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=fe+ne,W={id:c++,callback:le,priorityLevel:W,startTime:fe,expirationTime:ne,sortIndex:-1},fe>X?(W.sortIndex=fe,e(l,W),t(A)===null&&W===t(l)&&(v?(w(P),P=-1):v=!0,se(C,fe-X))):(W.sortIndex=ne,e(A,W),p||g||(p=!0,ce(M))),W},r.unstable_shouldYield=Q,r.unstable_wrapCallback=function(W){var le=h;return function(){var fe=h;h=le;try{return W.apply(this,arguments)}finally{h=fe}}}})(Uy)),Uy}var AF;function vj(){return AF||(AF=1,Qy.exports=pj()),Qy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lF;function mj(){if(lF)return ki;lF=1;var r=n2(),e=vj();function t(d){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+d,y=1;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function a(d,f){s(d,f),s(d+"Capture",f)}function s(d,f){for(i[d]=f,d=0;d<f.length;d++)n.add(f[d])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),A=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},u={};function h(d){return A.call(u,d)?!0:A.call(c,d)?!1:l.test(d)?u[d]=!0:(c[d]=!0,!1)}function g(d,f,y,B){if(y!==null&&y.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return B?!1:y!==null?!y.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function p(d,f,y,B){if(f===null||typeof f>"u"||g(d,f,y,B))return!0;if(B)return!1;if(y!==null)switch(y.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function v(d,f,y,B,I,L,U){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=B,this.attributeNamespace=I,this.mustUseProperty=y,this.propertyName=d,this.type=f,this.sanitizeURL=L,this.removeEmptyString=U}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){m[d]=new v(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var f=d[0];m[f]=new v(f,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){m[d]=new v(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){m[d]=new v(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){m[d]=new v(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){m[d]=new v(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){m[d]=new v(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){m[d]=new v(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){m[d]=new v(d,5,!1,d.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function b(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var f=d.replace(w,b);m[f]=new v(f,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var f=d.replace(w,b);m[f]=new v(f,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var f=d.replace(w,b);m[f]=new v(f,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){m[d]=new v(d,1,!1,d.toLowerCase(),null,!1,!1)}),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){m[d]=new v(d,1,!1,d.toLowerCase(),null,!0,!0)});function _(d,f,y,B){var I=m.hasOwnProperty(f)?m[f]:null;(I!==null?I.type!==0:B||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(p(f,y,I,B)&&(y=null),B||I===null?h(f)&&(y===null?d.removeAttribute(f):d.setAttribute(f,""+y)):I.mustUseProperty?d[I.propertyName]=y===null?I.type===3?!1:"":y:(f=I.attributeName,B=I.attributeNamespace,y===null?d.removeAttribute(f):(I=I.type,y=I===3||I===4&&y===!0?"":""+y,B?d.setAttributeNS(B,f,y):d.setAttribute(f,y))))}var C=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),F=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),Q=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),W=Symbol.iterator;function le(d){return d===null||typeof d!="object"?null:(d=W&&d[W]||d["@@iterator"],typeof d=="function"?d:null)}var fe=Object.assign,X;function ne(d){if(X===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);X=f&&f[1]||""}return`
`+X+d}var Ie=!1;function te(d,f){if(!d||Ie)return"";Ie=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(ye){var B=ye}Reflect.construct(d,[],f)}else{try{f.call()}catch(ye){B=ye}d.call(f.prototype)}else{try{throw Error()}catch(ye){B=ye}d()}}catch(ye){if(ye&&B&&typeof ye.stack=="string"){for(var I=ye.stack.split(`
`),L=B.stack.split(`
`),U=I.length-1,Z=L.length-1;1<=U&&0<=Z&&I[U]!==L[Z];)Z--;for(;1<=U&&0<=Z;U--,Z--)if(I[U]!==L[Z]){if(U!==1||Z!==1)do if(U--,Z--,0>Z||I[U]!==L[Z]){var ae=`
`+I[U].replace(" at new "," at ");return d.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",d.displayName)),ae}while(1<=U&&0<=Z);break}}}finally{Ie=!1,Error.prepareStackTrace=y}return(d=d?d.displayName||d.name:"")?ne(d):""}function $(d){switch(d.tag){case 5:return ne(d.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return d=te(d.type,!1),d;case 11:return d=te(d.type.render,!1),d;case 1:return d=te(d.type,!0),d;default:return""}}function ue(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case k:return"Fragment";case F:return"Portal";case N:return"Profiler";case P:return"StrictMode";case j:return"Suspense";case q:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case Q:return(d.displayName||"Context")+".Consumer";case D:return(d._context.displayName||"Context")+".Provider";case H:var f=d.render;return d=d.displayName,d||(d=f.displayName||f.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case J:return f=d.displayName||null,f!==null?f:ue(d.type)||"Memo";case ce:f=d._payload,d=d._init;try{return ue(d(f))}catch{}}return null}function me(d){var f=d.type;switch(d.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=f.render,d=d.displayName||d.name||"",f.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(f);case 8:return f===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function Te(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function He(d){var f=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Je(d){var f=He(d)?"checked":"value",y=Object.getOwnPropertyDescriptor(d.constructor.prototype,f),B=""+d[f];if(!d.hasOwnProperty(f)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var I=y.get,L=y.set;return Object.defineProperty(d,f,{configurable:!0,get:function(){return I.call(this)},set:function(U){B=""+U,L.call(this,U)}}),Object.defineProperty(d,f,{enumerable:y.enumerable}),{getValue:function(){return B},setValue:function(U){B=""+U},stopTracking:function(){d._valueTracker=null,delete d[f]}}}}function Bt(d){d._valueTracker||(d._valueTracker=Je(d))}function Lt(d){if(!d)return!1;var f=d._valueTracker;if(!f)return!0;var y=f.getValue(),B="";return d&&(B=He(d)?d.checked?"true":"false":d.value),d=B,d!==y?(f.setValue(d),!0):!1}function kt(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function zt(d,f){var y=f.checked;return fe({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:y??d._wrapperState.initialChecked})}function ot(d,f){var y=f.defaultValue==null?"":f.defaultValue,B=f.checked!=null?f.checked:f.defaultChecked;y=Te(f.value!=null?f.value:y),d._wrapperState={initialChecked:B,initialValue:y,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function Qt(d,f){f=f.checked,f!=null&&_(d,"checked",f,!1)}function Ct(d,f){Qt(d,f);var y=Te(f.value),B=f.type;if(y!=null)B==="number"?(y===0&&d.value===""||d.value!=y)&&(d.value=""+y):d.value!==""+y&&(d.value=""+y);else if(B==="submit"||B==="reset"){d.removeAttribute("value");return}f.hasOwnProperty("value")?Gt(d,f.type,y):f.hasOwnProperty("defaultValue")&&Gt(d,f.type,Te(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(d.defaultChecked=!!f.defaultChecked)}function Rr(d,f,y){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var B=f.type;if(!(B!=="submit"&&B!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+d._wrapperState.initialValue,y||f===d.value||(d.value=f),d.defaultValue=f}y=d.name,y!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,y!==""&&(d.name=y)}function Gt(d,f,y){(f!=="number"||kt(d.ownerDocument)!==d)&&(y==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+y&&(d.defaultValue=""+y))}var ui=Array.isArray;function Hn(d,f,y,B){if(d=d.options,f){f={};for(var I=0;I<y.length;I++)f["$"+y[I]]=!0;for(y=0;y<d.length;y++)I=f.hasOwnProperty("$"+d[y].value),d[y].selected!==I&&(d[y].selected=I),I&&B&&(d[y].defaultSelected=!0)}else{for(y=""+Te(y),f=null,I=0;I<d.length;I++){if(d[I].value===y){d[I].selected=!0,B&&(d[I].defaultSelected=!0);return}f!==null||d[I].disabled||(f=d[I])}f!==null&&(f.selected=!0)}}function An(d,f){if(f.dangerouslySetInnerHTML!=null)throw Error(t(91));return fe({},f,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function Xt(d,f){var y=f.value;if(y==null){if(y=f.children,f=f.defaultValue,y!=null){if(f!=null)throw Error(t(92));if(ui(y)){if(1<y.length)throw Error(t(93));y=y[0]}f=y}f==null&&(f=""),y=f}d._wrapperState={initialValue:Te(y)}}function ir(d,f){var y=Te(f.value),B=Te(f.defaultValue);y!=null&&(y=""+y,y!==d.value&&(d.value=y),f.defaultValue==null&&d.defaultValue!==y&&(d.defaultValue=y)),B!=null&&(d.defaultValue=""+B)}function pr(d){var f=d.textContent;f===d._wrapperState.initialValue&&f!==""&&f!==null&&(d.value=f)}function Qr(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vr(d,f){return d==null||d==="http://www.w3.org/1999/xhtml"?Qr(f):d==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var qn,Tn=(function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,y,B,I){MSApp.execUnsafeLocalFunction(function(){return d(f,y,B,I)})}:d})(function(d,f){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=f;else{for(qn=qn||document.createElement("div"),qn.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=qn.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;f.firstChild;)d.appendChild(f.firstChild)}});function ln(d,f){if(f){var y=d.firstChild;if(y&&y===d.lastChild&&y.nodeType===3){y.nodeValue=f;return}}d.textContent=f}var Pa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ls=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(d){Ls.forEach(function(f){f=f+d.charAt(0).toUpperCase()+d.substring(1),Pa[f]=Pa[d]})});function Xr(d,f,y){return f==null||typeof f=="boolean"||f===""?"":y||typeof f!="number"||f===0||Pa.hasOwnProperty(d)&&Pa[d]?(""+f).trim():f+"px"}function di(d,f){d=d.style;for(var y in f)if(f.hasOwnProperty(y)){var B=y.indexOf("--")===0,I=Xr(y,f[y],B);y==="float"&&(y="cssFloat"),B?d.setProperty(y,I):d[y]=I}}var kl=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function co(d,f){if(f){if(kl[d]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(t(137,d));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(t(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(t(61))}if(f.style!=null&&typeof f.style!="object")throw Error(t(62))}}function wA(d,f){if(d.indexOf("-")===-1)return typeof f.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uo=null;function Gi(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var ho=null,Oa=null,la=null;function LS(d){if(d=Cu(d)){if(typeof ho!="function")throw Error(t(280));var f=d.stateNode;f&&(f=Kh(f),ho(d.stateNode,d.type,f))}}function bA(d){Oa?la?la.push(d):la=[d]:Oa=d}function mr(){if(Oa){var d=Oa,f=la;if(la=Oa=null,LS(d),f)for(d=0;d<f.length;d++)LS(f[d])}}function _A(d,f){return d(f)}function R(){}var T=!1;function x(d,f,y){if(T)return d(f,y);T=!0;try{return _A(d,f,y)}finally{T=!1,(Oa!==null||la!==null)&&(R(),mr())}}function E(d,f){var y=d.stateNode;if(y===null)return null;var B=Kh(y);if(B===null)return null;y=B[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(B=!B.disabled)||(d=d.type,B=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!B;break e;default:d=!1}if(d)return null;if(y&&typeof y!="function")throw Error(t(231,f,typeof y));return y}var S=!1;if(o)try{var O={};Object.defineProperty(O,"passive",{get:function(){S=!0}}),window.addEventListener("test",O,O),window.removeEventListener("test",O,O)}catch{S=!1}function z(d,f,y,B,I,L,U,Z,ae){var ye=Array.prototype.slice.call(arguments,3);try{f.apply(y,ye)}catch(ke){this.onError(ke)}}var K=!1,G=null,V=!1,de=null,ee={onError:function(d){K=!0,G=d}};function be(d,f,y,B,I,L,U,Z,ae){K=!1,G=null,z.apply(ee,arguments)}function Re(d,f,y,B,I,L,U,Z,ae){if(be.apply(this,arguments),K){if(K){var ye=G;K=!1,G=null}else throw Error(t(198));V||(V=!0,de=ye)}}function ve(d){var f=d,y=d;if(d.alternate)for(;f.return;)f=f.return;else{d=f;do f=d,(f.flags&4098)!==0&&(y=f.return),d=f.return;while(d)}return f.tag===3?y:null}function Ce(d){if(d.tag===13){var f=d.memoizedState;if(f===null&&(d=d.alternate,d!==null&&(f=d.memoizedState)),f!==null)return f.dehydrated}return null}function Ge(d){if(ve(d)!==d)throw Error(t(188))}function re(d){var f=d.alternate;if(!f){if(f=ve(d),f===null)throw Error(t(188));return f!==d?null:d}for(var y=d,B=f;;){var I=y.return;if(I===null)break;var L=I.alternate;if(L===null){if(B=I.return,B!==null){y=B;continue}break}if(I.child===L.child){for(L=I.child;L;){if(L===y)return Ge(I),d;if(L===B)return Ge(I),f;L=L.sibling}throw Error(t(188))}if(y.return!==B.return)y=I,B=L;else{for(var U=!1,Z=I.child;Z;){if(Z===y){U=!0,y=I,B=L;break}if(Z===B){U=!0,B=I,y=L;break}Z=Z.sibling}if(!U){for(Z=L.child;Z;){if(Z===y){U=!0,y=L,B=I;break}if(Z===B){U=!0,B=L,y=I;break}Z=Z.sibling}if(!U)throw Error(t(189))}}if(y.alternate!==B)throw Error(t(190))}if(y.tag!==3)throw Error(t(188));return y.stateNode.current===y?d:f}function Ne(d){return d=re(d),d!==null?qe(d):null}function qe(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var f=qe(d);if(f!==null)return f;d=d.sibling}return null}var ct=e.unstable_scheduleCallback,ht=e.unstable_cancelCallback,fn=e.unstable_shouldYield,st=e.unstable_requestPaint,Ve=e.unstable_now,Zt=e.unstable_getCurrentPriorityLevel,oe=e.unstable_ImmediatePriority,Me=e.unstable_UserBlockingPriority,ze=e.unstable_NormalPriority,Oe=e.unstable_LowPriority,cn=e.unstable_IdlePriority,Ut=null,Nt=null;function gn(d){if(Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(Ut,d,void 0,(d.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:ca,Vi=Math.log,Wn=Math.LN2;function ca(d){return d>>>=0,d===0?32:31-(Vi(d)/Wn|0)|0}var Bi=64,Tt=4194304;function Pn(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Tr(d,f){var y=d.pendingLanes;if(y===0)return 0;var B=0,I=d.suspendedLanes,L=d.pingedLanes,U=y&268435455;if(U!==0){var Z=U&~I;Z!==0?B=Pn(Z):(L&=U,L!==0&&(B=Pn(L)))}else U=y&~I,U!==0?B=Pn(U):L!==0&&(B=Pn(L));if(B===0)return 0;if(f!==0&&f!==B&&(f&I)===0&&(I=B&-B,L=f&-f,I>=L||I===16&&(L&4194240)!==0))return f;if((B&4)!==0&&(B|=y&16),f=d.entangledLanes,f!==0)for(d=d.entanglements,f&=B;0<f;)y=31-Jt(f),I=1<<y,B|=d[y],f&=~I;return B}function hi(d,f){switch(d){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $n(d,f){for(var y=d.suspendedLanes,B=d.pingedLanes,I=d.expirationTimes,L=d.pendingLanes;0<L;){var U=31-Jt(L),Z=1<<U,ae=I[U];ae===-1?((Z&y)===0||(Z&B)!==0)&&(I[U]=hi(Z,f)):ae<=f&&(d.expiredLanes|=Z),L&=~Z}}function au(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function xh(){var d=Bi;return Bi<<=1,(Bi&4194240)===0&&(Bi=64),d}function su(d){for(var f=[],y=0;31>y;y++)f.push(d);return f}function EA(d,f,y){d.pendingLanes|=f,f!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,f=31-Jt(f),d[f]=y}function n0(d,f){var y=d.pendingLanes&~f;d.pendingLanes=f,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=f,d.mutableReadLanes&=f,d.entangledLanes&=f,f=d.entanglements;var B=d.eventTimes;for(d=d.expirationTimes;0<y;){var I=31-Jt(y),L=1<<I;f[I]=0,B[I]=-1,d[I]=-1,y&=~L}}function ou(d,f){var y=d.entangledLanes|=f;for(d=d.entanglements;y;){var B=31-Jt(y),I=1<<B;I&f|d[B]&f&&(d[B]|=f),y&=~I}}var Vt=0;function Sh(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var Th,r0,NS,DS,RS,i0=!1,Mh=[],fo=null,go=null,po=null,Au=new Map,lu=new Map,vo=[],P8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function QS(d,f){switch(d){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":go=null;break;case"mouseover":case"mouseout":po=null;break;case"pointerover":case"pointerout":Au.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":lu.delete(f.pointerId)}}function cu(d,f,y,B,I,L){return d===null||d.nativeEvent!==L?(d={blockedOn:f,domEventName:y,eventSystemFlags:B,nativeEvent:L,targetContainers:[I]},f!==null&&(f=Cu(f),f!==null&&r0(f)),d):(d.eventSystemFlags|=B,f=d.targetContainers,I!==null&&f.indexOf(I)===-1&&f.push(I),d)}function O8(d,f,y,B,I){switch(f){case"focusin":return fo=cu(fo,d,f,y,B,I),!0;case"dragenter":return go=cu(go,d,f,y,B,I),!0;case"mouseover":return po=cu(po,d,f,y,B,I),!0;case"pointerover":var L=I.pointerId;return Au.set(L,cu(Au.get(L)||null,d,f,y,B,I)),!0;case"gotpointercapture":return L=I.pointerId,lu.set(L,cu(lu.get(L)||null,d,f,y,B,I)),!0}return!1}function US(d){var f=CA(d.target);if(f!==null){var y=ve(f);if(y!==null){if(f=y.tag,f===13){if(f=Ce(y),f!==null){d.blockedOn=f,RS(d.priority,function(){NS(y)});return}}else if(f===3&&y.stateNode.current.memoizedState.isDehydrated){d.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}d.blockedOn=null}function Fh(d){if(d.blockedOn!==null)return!1;for(var f=d.targetContainers;0<f.length;){var y=s0(d.domEventName,d.eventSystemFlags,f[0],d.nativeEvent);if(y===null){y=d.nativeEvent;var B=new y.constructor(y.type,y);uo=B,y.target.dispatchEvent(B),uo=null}else return f=Cu(y),f!==null&&r0(f),d.blockedOn=y,!1;f.shift()}return!0}function HS(d,f,y){Fh(d)&&y.delete(f)}function L8(){i0=!1,fo!==null&&Fh(fo)&&(fo=null),go!==null&&Fh(go)&&(go=null),po!==null&&Fh(po)&&(po=null),Au.forEach(HS),lu.forEach(HS)}function uu(d,f){d.blockedOn===f&&(d.blockedOn=null,i0||(i0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,L8)))}function du(d){function f(I){return uu(I,d)}if(0<Mh.length){uu(Mh[0],d);for(var y=1;y<Mh.length;y++){var B=Mh[y];B.blockedOn===d&&(B.blockedOn=null)}}for(fo!==null&&uu(fo,d),go!==null&&uu(go,d),po!==null&&uu(po,d),Au.forEach(f),lu.forEach(f),y=0;y<vo.length;y++)B=vo[y],B.blockedOn===d&&(B.blockedOn=null);for(;0<vo.length&&(y=vo[0],y.blockedOn===null);)US(y),y.blockedOn===null&&vo.shift()}var Il=C.ReactCurrentBatchConfig,kh=!0;function N8(d,f,y,B){var I=Vt,L=Il.transition;Il.transition=null;try{Vt=1,a0(d,f,y,B)}finally{Vt=I,Il.transition=L}}function D8(d,f,y,B){var I=Vt,L=Il.transition;Il.transition=null;try{Vt=4,a0(d,f,y,B)}finally{Vt=I,Il.transition=L}}function a0(d,f,y,B){if(kh){var I=s0(d,f,y,B);if(I===null)E0(d,f,B,Ih,y),QS(d,B);else if(O8(I,d,f,y,B))B.stopPropagation();else if(QS(d,B),f&4&&-1<P8.indexOf(d)){for(;I!==null;){var L=Cu(I);if(L!==null&&Th(L),L=s0(d,f,y,B),L===null&&E0(d,f,B,Ih,y),L===I)break;I=L}I!==null&&B.stopPropagation()}else E0(d,f,B,null,y)}}var Ih=null;function s0(d,f,y,B){if(Ih=null,d=Gi(B),d=CA(d),d!==null)if(f=ve(d),f===null)d=null;else if(y=f.tag,y===13){if(d=Ce(f),d!==null)return d;d=null}else if(y===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;d=null}else f!==d&&(d=null);return Ih=d,null}function zS(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zt()){case oe:return 1;case Me:return 4;case ze:case Oe:return 16;case cn:return 536870912;default:return 16}default:return 16}}var mo=null,o0=null,Ph=null;function jS(){if(Ph)return Ph;var d,f=o0,y=f.length,B,I="value"in mo?mo.value:mo.textContent,L=I.length;for(d=0;d<y&&f[d]===I[d];d++);var U=y-d;for(B=1;B<=U&&f[y-B]===I[L-B];B++);return Ph=I.slice(d,1<B?1-B:void 0)}function Oh(d){var f=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&f===13&&(d=13)):d=f,d===10&&(d=13),32<=d||d===13?d:0}function Lh(){return!0}function KS(){return!1}function qi(d){function f(y,B,I,L,U){this._reactName=y,this._targetInst=I,this.type=B,this.nativeEvent=L,this.target=U,this.currentTarget=null;for(var Z in d)d.hasOwnProperty(Z)&&(y=d[Z],this[Z]=y?y(L):L[Z]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?Lh:KS,this.isPropagationStopped=KS,this}return fe(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Lh)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Lh)},persist:function(){},isPersistent:Lh}),f}var Pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},A0=qi(Pl),hu=fe({},Pl,{view:0,detail:0}),R8=qi(hu),l0,c0,fu,Nh=fe({},hu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:d0,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==fu&&(fu&&d.type==="mousemove"?(l0=d.screenX-fu.screenX,c0=d.screenY-fu.screenY):c0=l0=0,fu=d),l0)},movementY:function(d){return"movementY"in d?d.movementY:c0}}),GS=qi(Nh),Q8=fe({},Nh,{dataTransfer:0}),U8=qi(Q8),H8=fe({},hu,{relatedTarget:0}),u0=qi(H8),z8=fe({},Pl,{animationName:0,elapsedTime:0,pseudoElement:0}),j8=qi(z8),K8=fe({},Pl,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),G8=qi(K8),V8=fe({},Pl,{data:0}),VS=qi(V8),q8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y8(d){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(d):(d=$8[d])?!!f[d]:!1}function d0(){return Y8}var X8=fe({},hu,{key:function(d){if(d.key){var f=q8[d.key]||d.key;if(f!=="Unidentified")return f}return d.type==="keypress"?(d=Oh(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?W8[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:d0,charCode:function(d){return d.type==="keypress"?Oh(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Oh(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Z8=qi(X8),J8=fe({},Nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qS=qi(J8),ez=fe({},hu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:d0}),tz=qi(ez),nz=fe({},Pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),rz=qi(nz),iz=fe({},Nh,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),az=qi(iz),sz=[9,13,27,32],h0=o&&"CompositionEvent"in window,gu=null;o&&"documentMode"in document&&(gu=document.documentMode);var oz=o&&"TextEvent"in window&&!gu,WS=o&&(!h0||gu&&8<gu&&11>=gu),$S=" ",YS=!1;function XS(d,f){switch(d){case"keyup":return sz.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZS(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Ol=!1;function Az(d,f){switch(d){case"compositionend":return ZS(f);case"keypress":return f.which!==32?null:(YS=!0,$S);case"textInput":return d=f.data,d===$S&&YS?null:d;default:return null}}function lz(d,f){if(Ol)return d==="compositionend"||!h0&&XS(d,f)?(d=jS(),Ph=o0=mo=null,Ol=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return WS&&f.locale!=="ko"?null:f.data;default:return null}}var cz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function JS(d){var f=d&&d.nodeName&&d.nodeName.toLowerCase();return f==="input"?!!cz[d.type]:f==="textarea"}function eT(d,f,y,B){bA(B),f=Hh(f,"onChange"),0<f.length&&(y=new A0("onChange","change",null,y,B),d.push({event:y,listeners:f}))}var pu=null,vu=null;function uz(d){mT(d,0)}function Dh(d){var f=Ql(d);if(Lt(f))return d}function dz(d,f){if(d==="change")return f}var tT=!1;if(o){var f0;if(o){var g0="oninput"in document;if(!g0){var nT=document.createElement("div");nT.setAttribute("oninput","return;"),g0=typeof nT.oninput=="function"}f0=g0}else f0=!1;tT=f0&&(!document.documentMode||9<document.documentMode)}function rT(){pu&&(pu.detachEvent("onpropertychange",iT),vu=pu=null)}function iT(d){if(d.propertyName==="value"&&Dh(vu)){var f=[];eT(f,vu,d,Gi(d)),x(uz,f)}}function hz(d,f,y){d==="focusin"?(rT(),pu=f,vu=y,pu.attachEvent("onpropertychange",iT)):d==="focusout"&&rT()}function fz(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Dh(vu)}function gz(d,f){if(d==="click")return Dh(f)}function pz(d,f){if(d==="input"||d==="change")return Dh(f)}function vz(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var La=typeof Object.is=="function"?Object.is:vz;function mu(d,f){if(La(d,f))return!0;if(typeof d!="object"||d===null||typeof f!="object"||f===null)return!1;var y=Object.keys(d),B=Object.keys(f);if(y.length!==B.length)return!1;for(B=0;B<y.length;B++){var I=y[B];if(!A.call(f,I)||!La(d[I],f[I]))return!1}return!0}function aT(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function sT(d,f){var y=aT(d);d=0;for(var B;y;){if(y.nodeType===3){if(B=d+y.textContent.length,d<=f&&B>=f)return{node:y,offset:f-d};d=B}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=aT(y)}}function oT(d,f){return d&&f?d===f?!0:d&&d.nodeType===3?!1:f&&f.nodeType===3?oT(d,f.parentNode):"contains"in d?d.contains(f):d.compareDocumentPosition?!!(d.compareDocumentPosition(f)&16):!1:!1}function AT(){for(var d=window,f=kt();f instanceof d.HTMLIFrameElement;){try{var y=typeof f.contentWindow.location.href=="string"}catch{y=!1}if(y)d=f.contentWindow;else break;f=kt(d.document)}return f}function p0(d){var f=d&&d.nodeName&&d.nodeName.toLowerCase();return f&&(f==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||f==="textarea"||d.contentEditable==="true")}function mz(d){var f=AT(),y=d.focusedElem,B=d.selectionRange;if(f!==y&&y&&y.ownerDocument&&oT(y.ownerDocument.documentElement,y)){if(B!==null&&p0(y)){if(f=B.start,d=B.end,d===void 0&&(d=f),"selectionStart"in y)y.selectionStart=f,y.selectionEnd=Math.min(d,y.value.length);else if(d=(f=y.ownerDocument||document)&&f.defaultView||window,d.getSelection){d=d.getSelection();var I=y.textContent.length,L=Math.min(B.start,I);B=B.end===void 0?L:Math.min(B.end,I),!d.extend&&L>B&&(I=B,B=L,L=I),I=sT(y,L);var U=sT(y,B);I&&U&&(d.rangeCount!==1||d.anchorNode!==I.node||d.anchorOffset!==I.offset||d.focusNode!==U.node||d.focusOffset!==U.offset)&&(f=f.createRange(),f.setStart(I.node,I.offset),d.removeAllRanges(),L>B?(d.addRange(f),d.extend(U.node,U.offset)):(f.setEnd(U.node,U.offset),d.addRange(f)))}}for(f=[],d=y;d=d.parentNode;)d.nodeType===1&&f.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<f.length;y++)d=f[y],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var yz=o&&"documentMode"in document&&11>=document.documentMode,Ll=null,v0=null,yu=null,m0=!1;function lT(d,f,y){var B=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;m0||Ll==null||Ll!==kt(B)||(B=Ll,"selectionStart"in B&&p0(B)?B={start:B.selectionStart,end:B.selectionEnd}:(B=(B.ownerDocument&&B.ownerDocument.defaultView||window).getSelection(),B={anchorNode:B.anchorNode,anchorOffset:B.anchorOffset,focusNode:B.focusNode,focusOffset:B.focusOffset}),yu&&mu(yu,B)||(yu=B,B=Hh(v0,"onSelect"),0<B.length&&(f=new A0("onSelect","select",null,f,y),d.push({event:f,listeners:B}),f.target=Ll)))}function Rh(d,f){var y={};return y[d.toLowerCase()]=f.toLowerCase(),y["Webkit"+d]="webkit"+f,y["Moz"+d]="moz"+f,y}var Nl={animationend:Rh("Animation","AnimationEnd"),animationiteration:Rh("Animation","AnimationIteration"),animationstart:Rh("Animation","AnimationStart"),transitionend:Rh("Transition","TransitionEnd")},y0={},cT={};o&&(cT=document.createElement("div").style,"AnimationEvent"in window||(delete Nl.animationend.animation,delete Nl.animationiteration.animation,delete Nl.animationstart.animation),"TransitionEvent"in window||delete Nl.transitionend.transition);function Qh(d){if(y0[d])return y0[d];if(!Nl[d])return d;var f=Nl[d],y;for(y in f)if(f.hasOwnProperty(y)&&y in cT)return y0[d]=f[y];return d}var uT=Qh("animationend"),dT=Qh("animationiteration"),hT=Qh("animationstart"),fT=Qh("transitionend"),gT=new Map,pT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yo(d,f){gT.set(d,f),a(f,[d])}for(var w0=0;w0<pT.length;w0++){var b0=pT[w0],wz=b0.toLowerCase(),bz=b0[0].toUpperCase()+b0.slice(1);yo(wz,"on"+bz)}yo(uT,"onAnimationEnd"),yo(dT,"onAnimationIteration"),yo(hT,"onAnimationStart"),yo("dblclick","onDoubleClick"),yo("focusin","onFocus"),yo("focusout","onBlur"),yo(fT,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_z=new Set("cancel close invalid load scroll toggle".split(" ").concat(wu));function vT(d,f,y){var B=d.type||"unknown-event";d.currentTarget=y,Re(B,f,void 0,d),d.currentTarget=null}function mT(d,f){f=(f&4)!==0;for(var y=0;y<d.length;y++){var B=d[y],I=B.event;B=B.listeners;e:{var L=void 0;if(f)for(var U=B.length-1;0<=U;U--){var Z=B[U],ae=Z.instance,ye=Z.currentTarget;if(Z=Z.listener,ae!==L&&I.isPropagationStopped())break e;vT(I,Z,ye),L=ae}else for(U=0;U<B.length;U++){if(Z=B[U],ae=Z.instance,ye=Z.currentTarget,Z=Z.listener,ae!==L&&I.isPropagationStopped())break e;vT(I,Z,ye),L=ae}}}if(V)throw d=de,V=!1,de=null,d}function wn(d,f){var y=f[M0];y===void 0&&(y=f[M0]=new Set);var B=d+"__bubble";y.has(B)||(yT(f,d,2,!1),y.add(B))}function _0(d,f,y){var B=0;f&&(B|=4),yT(y,d,B,f)}var Uh="_reactListening"+Math.random().toString(36).slice(2);function bu(d){if(!d[Uh]){d[Uh]=!0,n.forEach(function(y){y!=="selectionchange"&&(_z.has(y)||_0(y,!1,d),_0(y,!0,d))});var f=d.nodeType===9?d:d.ownerDocument;f===null||f[Uh]||(f[Uh]=!0,_0("selectionchange",!1,f))}}function yT(d,f,y,B){switch(zS(f)){case 1:var I=N8;break;case 4:I=D8;break;default:I=a0}y=I.bind(null,f,y,d),I=void 0,!S||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(I=!0),B?I!==void 0?d.addEventListener(f,y,{capture:!0,passive:I}):d.addEventListener(f,y,!0):I!==void 0?d.addEventListener(f,y,{passive:I}):d.addEventListener(f,y,!1)}function E0(d,f,y,B,I){var L=B;if((f&1)===0&&(f&2)===0&&B!==null)e:for(;;){if(B===null)return;var U=B.tag;if(U===3||U===4){var Z=B.stateNode.containerInfo;if(Z===I||Z.nodeType===8&&Z.parentNode===I)break;if(U===4)for(U=B.return;U!==null;){var ae=U.tag;if((ae===3||ae===4)&&(ae=U.stateNode.containerInfo,ae===I||ae.nodeType===8&&ae.parentNode===I))return;U=U.return}for(;Z!==null;){if(U=CA(Z),U===null)return;if(ae=U.tag,ae===5||ae===6){B=L=U;continue e}Z=Z.parentNode}}B=B.return}x(function(){var ye=L,ke=Gi(y),Le=[];e:{var Fe=gT.get(d);if(Fe!==void 0){var Xe=A0,nt=d;switch(d){case"keypress":if(Oh(y)===0)break e;case"keydown":case"keyup":Xe=Z8;break;case"focusin":nt="focus",Xe=u0;break;case"focusout":nt="blur",Xe=u0;break;case"beforeblur":case"afterblur":Xe=u0;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xe=GS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xe=U8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xe=tz;break;case uT:case dT:case hT:Xe=j8;break;case fT:Xe=rz;break;case"scroll":Xe=R8;break;case"wheel":Xe=az;break;case"copy":case"cut":case"paste":Xe=G8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xe=qS}var rt=(f&4)!==0,Yn=!rt&&d==="scroll",ge=rt?Fe!==null?Fe+"Capture":null:Fe;rt=[];for(var Ae=ye,pe;Ae!==null;){pe=Ae;var Qe=pe.stateNode;if(pe.tag===5&&Qe!==null&&(pe=Qe,ge!==null&&(Qe=E(Ae,ge),Qe!=null&&rt.push(_u(Ae,Qe,pe)))),Yn)break;Ae=Ae.return}0<rt.length&&(Fe=new Xe(Fe,nt,null,y,ke),Le.push({event:Fe,listeners:rt}))}}if((f&7)===0){e:{if(Fe=d==="mouseover"||d==="pointerover",Xe=d==="mouseout"||d==="pointerout",Fe&&y!==uo&&(nt=y.relatedTarget||y.fromElement)&&(CA(nt)||nt[Ns]))break e;if((Xe||Fe)&&(Fe=ke.window===ke?ke:(Fe=ke.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,Xe?(nt=y.relatedTarget||y.toElement,Xe=ye,nt=nt?CA(nt):null,nt!==null&&(Yn=ve(nt),nt!==Yn||nt.tag!==5&&nt.tag!==6)&&(nt=null)):(Xe=null,nt=ye),Xe!==nt)){if(rt=GS,Qe="onMouseLeave",ge="onMouseEnter",Ae="mouse",(d==="pointerout"||d==="pointerover")&&(rt=qS,Qe="onPointerLeave",ge="onPointerEnter",Ae="pointer"),Yn=Xe==null?Fe:Ql(Xe),pe=nt==null?Fe:Ql(nt),Fe=new rt(Qe,Ae+"leave",Xe,y,ke),Fe.target=Yn,Fe.relatedTarget=pe,Qe=null,CA(ke)===ye&&(rt=new rt(ge,Ae+"enter",nt,y,ke),rt.target=pe,rt.relatedTarget=Yn,Qe=rt),Yn=Qe,Xe&&nt)t:{for(rt=Xe,ge=nt,Ae=0,pe=rt;pe;pe=Dl(pe))Ae++;for(pe=0,Qe=ge;Qe;Qe=Dl(Qe))pe++;for(;0<Ae-pe;)rt=Dl(rt),Ae--;for(;0<pe-Ae;)ge=Dl(ge),pe--;for(;Ae--;){if(rt===ge||ge!==null&&rt===ge.alternate)break t;rt=Dl(rt),ge=Dl(ge)}rt=null}else rt=null;Xe!==null&&wT(Le,Fe,Xe,rt,!1),nt!==null&&Yn!==null&&wT(Le,Yn,nt,rt,!0)}}e:{if(Fe=ye?Ql(ye):window,Xe=Fe.nodeName&&Fe.nodeName.toLowerCase(),Xe==="select"||Xe==="input"&&Fe.type==="file")var at=dz;else if(JS(Fe))if(tT)at=pz;else{at=fz;var At=hz}else(Xe=Fe.nodeName)&&Xe.toLowerCase()==="input"&&(Fe.type==="checkbox"||Fe.type==="radio")&&(at=gz);if(at&&(at=at(d,ye))){eT(Le,at,y,ke);break e}At&&At(d,Fe,ye),d==="focusout"&&(At=Fe._wrapperState)&&At.controlled&&Fe.type==="number"&&Gt(Fe,"number",Fe.value)}switch(At=ye?Ql(ye):window,d){case"focusin":(JS(At)||At.contentEditable==="true")&&(Ll=At,v0=ye,yu=null);break;case"focusout":yu=v0=Ll=null;break;case"mousedown":m0=!0;break;case"contextmenu":case"mouseup":case"dragend":m0=!1,lT(Le,y,ke);break;case"selectionchange":if(yz)break;case"keydown":case"keyup":lT(Le,y,ke)}var lt;if(h0)e:{switch(d){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else Ol?XS(d,y)&&(pt="onCompositionEnd"):d==="keydown"&&y.keyCode===229&&(pt="onCompositionStart");pt&&(WS&&y.locale!=="ko"&&(Ol||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Ol&&(lt=jS()):(mo=ke,o0="value"in mo?mo.value:mo.textContent,Ol=!0)),At=Hh(ye,pt),0<At.length&&(pt=new VS(pt,d,null,y,ke),Le.push({event:pt,listeners:At}),lt?pt.data=lt:(lt=ZS(y),lt!==null&&(pt.data=lt)))),(lt=oz?Az(d,y):lz(d,y))&&(ye=Hh(ye,"onBeforeInput"),0<ye.length&&(ke=new VS("onBeforeInput","beforeinput",null,y,ke),Le.push({event:ke,listeners:ye}),ke.data=lt))}mT(Le,f)})}function _u(d,f,y){return{instance:d,listener:f,currentTarget:y}}function Hh(d,f){for(var y=f+"Capture",B=[];d!==null;){var I=d,L=I.stateNode;I.tag===5&&L!==null&&(I=L,L=E(d,y),L!=null&&B.unshift(_u(d,L,I)),L=E(d,f),L!=null&&B.push(_u(d,L,I))),d=d.return}return B}function Dl(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function wT(d,f,y,B,I){for(var L=f._reactName,U=[];y!==null&&y!==B;){var Z=y,ae=Z.alternate,ye=Z.stateNode;if(ae!==null&&ae===B)break;Z.tag===5&&ye!==null&&(Z=ye,I?(ae=E(y,L),ae!=null&&U.unshift(_u(y,ae,Z))):I||(ae=E(y,L),ae!=null&&U.push(_u(y,ae,Z)))),y=y.return}U.length!==0&&d.push({event:f,listeners:U})}var Ez=/\r\n?/g,Cz=/\u0000|\uFFFD/g;function bT(d){return(typeof d=="string"?d:""+d).replace(Ez,`
`).replace(Cz,"")}function zh(d,f,y){if(f=bT(f),bT(d)!==f&&y)throw Error(t(425))}function jh(){}var C0=null,B0=null;function x0(d,f){return d==="textarea"||d==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var S0=typeof setTimeout=="function"?setTimeout:void 0,Bz=typeof clearTimeout=="function"?clearTimeout:void 0,_T=typeof Promise=="function"?Promise:void 0,xz=typeof queueMicrotask=="function"?queueMicrotask:typeof _T<"u"?function(d){return _T.resolve(null).then(d).catch(Sz)}:S0;function Sz(d){setTimeout(function(){throw d})}function T0(d,f){var y=f,B=0;do{var I=y.nextSibling;if(d.removeChild(y),I&&I.nodeType===8)if(y=I.data,y==="/$"){if(B===0){d.removeChild(I),du(f);return}B--}else y!=="$"&&y!=="$?"&&y!=="$!"||B++;y=I}while(y);du(f)}function wo(d){for(;d!=null;d=d.nextSibling){var f=d.nodeType;if(f===1||f===3)break;if(f===8){if(f=d.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return d}function ET(d){d=d.previousSibling;for(var f=0;d;){if(d.nodeType===8){var y=d.data;if(y==="$"||y==="$!"||y==="$?"){if(f===0)return d;f--}else y==="/$"&&f++}d=d.previousSibling}return null}var Rl=Math.random().toString(36).slice(2),os="__reactFiber$"+Rl,Eu="__reactProps$"+Rl,Ns="__reactContainer$"+Rl,M0="__reactEvents$"+Rl,Tz="__reactListeners$"+Rl,Mz="__reactHandles$"+Rl;function CA(d){var f=d[os];if(f)return f;for(var y=d.parentNode;y;){if(f=y[Ns]||y[os]){if(y=f.alternate,f.child!==null||y!==null&&y.child!==null)for(d=ET(d);d!==null;){if(y=d[os])return y;d=ET(d)}return f}d=y,y=d.parentNode}return null}function Cu(d){return d=d[os]||d[Ns],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Ql(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(t(33))}function Kh(d){return d[Eu]||null}var F0=[],Ul=-1;function bo(d){return{current:d}}function bn(d){0>Ul||(d.current=F0[Ul],F0[Ul]=null,Ul--)}function pn(d,f){Ul++,F0[Ul]=d.current,d.current=f}var _o={},Zr=bo(_o),xi=bo(!1),BA=_o;function Hl(d,f){var y=d.type.contextTypes;if(!y)return _o;var B=d.stateNode;if(B&&B.__reactInternalMemoizedUnmaskedChildContext===f)return B.__reactInternalMemoizedMaskedChildContext;var I={},L;for(L in y)I[L]=f[L];return B&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=f,d.__reactInternalMemoizedMaskedChildContext=I),I}function Si(d){return d=d.childContextTypes,d!=null}function Gh(){bn(xi),bn(Zr)}function CT(d,f,y){if(Zr.current!==_o)throw Error(t(168));pn(Zr,f),pn(xi,y)}function BT(d,f,y){var B=d.stateNode;if(f=f.childContextTypes,typeof B.getChildContext!="function")return y;B=B.getChildContext();for(var I in B)if(!(I in f))throw Error(t(108,me(d)||"Unknown",I));return fe({},y,B)}function Vh(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||_o,BA=Zr.current,pn(Zr,d),pn(xi,xi.current),!0}function xT(d,f,y){var B=d.stateNode;if(!B)throw Error(t(169));y?(d=BT(d,f,BA),B.__reactInternalMemoizedMergedChildContext=d,bn(xi),bn(Zr),pn(Zr,d)):bn(xi),pn(xi,y)}var Ds=null,qh=!1,k0=!1;function ST(d){Ds===null?Ds=[d]:Ds.push(d)}function Fz(d){qh=!0,ST(d)}function Eo(){if(!k0&&Ds!==null){k0=!0;var d=0,f=Vt;try{var y=Ds;for(Vt=1;d<y.length;d++){var B=y[d];do B=B(!0);while(B!==null)}Ds=null,qh=!1}catch(I){throw Ds!==null&&(Ds=Ds.slice(d+1)),ct(oe,Eo),I}finally{Vt=f,k0=!1}}return null}var zl=[],jl=0,Wh=null,$h=0,ua=[],da=0,xA=null,Rs=1,Qs="";function SA(d,f){zl[jl++]=$h,zl[jl++]=Wh,Wh=d,$h=f}function TT(d,f,y){ua[da++]=Rs,ua[da++]=Qs,ua[da++]=xA,xA=d;var B=Rs;d=Qs;var I=32-Jt(B)-1;B&=~(1<<I),y+=1;var L=32-Jt(f)+I;if(30<L){var U=I-I%5;L=(B&(1<<U)-1).toString(32),B>>=U,I-=U,Rs=1<<32-Jt(f)+I|y<<I|B,Qs=L+d}else Rs=1<<L|y<<I|B,Qs=d}function I0(d){d.return!==null&&(SA(d,1),TT(d,1,0))}function P0(d){for(;d===Wh;)Wh=zl[--jl],zl[jl]=null,$h=zl[--jl],zl[jl]=null;for(;d===xA;)xA=ua[--da],ua[da]=null,Qs=ua[--da],ua[da]=null,Rs=ua[--da],ua[da]=null}var Wi=null,$i=null,Mn=!1,Na=null;function MT(d,f){var y=pa(5,null,null,0);y.elementType="DELETED",y.stateNode=f,y.return=d,f=d.deletions,f===null?(d.deletions=[y],d.flags|=16):f.push(y)}function FT(d,f){switch(d.tag){case 5:var y=d.type;return f=f.nodeType!==1||y.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(d.stateNode=f,Wi=d,$i=wo(f.firstChild),!0):!1;case 6:return f=d.pendingProps===""||f.nodeType!==3?null:f,f!==null?(d.stateNode=f,Wi=d,$i=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(y=xA!==null?{id:Rs,overflow:Qs}:null,d.memoizedState={dehydrated:f,treeContext:y,retryLane:1073741824},y=pa(18,null,null,0),y.stateNode=f,y.return=d,d.child=y,Wi=d,$i=null,!0):!1;default:return!1}}function O0(d){return(d.mode&1)!==0&&(d.flags&128)===0}function L0(d){if(Mn){var f=$i;if(f){var y=f;if(!FT(d,f)){if(O0(d))throw Error(t(418));f=wo(y.nextSibling);var B=Wi;f&&FT(d,f)?MT(B,y):(d.flags=d.flags&-4097|2,Mn=!1,Wi=d)}}else{if(O0(d))throw Error(t(418));d.flags=d.flags&-4097|2,Mn=!1,Wi=d}}}function kT(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Wi=d}function Yh(d){if(d!==Wi)return!1;if(!Mn)return kT(d),Mn=!0,!1;var f;if((f=d.tag!==3)&&!(f=d.tag!==5)&&(f=d.type,f=f!=="head"&&f!=="body"&&!x0(d.type,d.memoizedProps)),f&&(f=$i)){if(O0(d))throw IT(),Error(t(418));for(;f;)MT(d,f),f=wo(f.nextSibling)}if(kT(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(t(317));e:{for(d=d.nextSibling,f=0;d;){if(d.nodeType===8){var y=d.data;if(y==="/$"){if(f===0){$i=wo(d.nextSibling);break e}f--}else y!=="$"&&y!=="$!"&&y!=="$?"||f++}d=d.nextSibling}$i=null}}else $i=Wi?wo(d.stateNode.nextSibling):null;return!0}function IT(){for(var d=$i;d;)d=wo(d.nextSibling)}function Kl(){$i=Wi=null,Mn=!1}function N0(d){Na===null?Na=[d]:Na.push(d)}var kz=C.ReactCurrentBatchConfig;function Bu(d,f,y){if(d=y.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(t(309));var B=y.stateNode}if(!B)throw Error(t(147,d));var I=B,L=""+d;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===L?f.ref:(f=function(U){var Z=I.refs;U===null?delete Z[L]:Z[L]=U},f._stringRef=L,f)}if(typeof d!="string")throw Error(t(284));if(!y._owner)throw Error(t(290,d))}return d}function Xh(d,f){throw d=Object.prototype.toString.call(f),Error(t(31,d==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":d))}function PT(d){var f=d._init;return f(d._payload)}function OT(d){function f(ge,Ae){if(d){var pe=ge.deletions;pe===null?(ge.deletions=[Ae],ge.flags|=16):pe.push(Ae)}}function y(ge,Ae){if(!d)return null;for(;Ae!==null;)f(ge,Ae),Ae=Ae.sibling;return null}function B(ge,Ae){for(ge=new Map;Ae!==null;)Ae.key!==null?ge.set(Ae.key,Ae):ge.set(Ae.index,Ae),Ae=Ae.sibling;return ge}function I(ge,Ae){return ge=ko(ge,Ae),ge.index=0,ge.sibling=null,ge}function L(ge,Ae,pe){return ge.index=pe,d?(pe=ge.alternate,pe!==null?(pe=pe.index,pe<Ae?(ge.flags|=2,Ae):pe):(ge.flags|=2,Ae)):(ge.flags|=1048576,Ae)}function U(ge){return d&&ge.alternate===null&&(ge.flags|=2),ge}function Z(ge,Ae,pe,Qe){return Ae===null||Ae.tag!==6?(Ae=Sy(pe,ge.mode,Qe),Ae.return=ge,Ae):(Ae=I(Ae,pe),Ae.return=ge,Ae)}function ae(ge,Ae,pe,Qe){var at=pe.type;return at===k?ke(ge,Ae,pe.props.children,Qe,pe.key):Ae!==null&&(Ae.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===ce&&PT(at)===Ae.type)?(Qe=I(Ae,pe.props),Qe.ref=Bu(ge,Ae,pe),Qe.return=ge,Qe):(Qe=_f(pe.type,pe.key,pe.props,null,ge.mode,Qe),Qe.ref=Bu(ge,Ae,pe),Qe.return=ge,Qe)}function ye(ge,Ae,pe,Qe){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==pe.containerInfo||Ae.stateNode.implementation!==pe.implementation?(Ae=Ty(pe,ge.mode,Qe),Ae.return=ge,Ae):(Ae=I(Ae,pe.children||[]),Ae.return=ge,Ae)}function ke(ge,Ae,pe,Qe,at){return Ae===null||Ae.tag!==7?(Ae=LA(pe,ge.mode,Qe,at),Ae.return=ge,Ae):(Ae=I(Ae,pe),Ae.return=ge,Ae)}function Le(ge,Ae,pe){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Ae=Sy(""+Ae,ge.mode,pe),Ae.return=ge,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case M:return pe=_f(Ae.type,Ae.key,Ae.props,null,ge.mode,pe),pe.ref=Bu(ge,null,Ae),pe.return=ge,pe;case F:return Ae=Ty(Ae,ge.mode,pe),Ae.return=ge,Ae;case ce:var Qe=Ae._init;return Le(ge,Qe(Ae._payload),pe)}if(ui(Ae)||le(Ae))return Ae=LA(Ae,ge.mode,pe,null),Ae.return=ge,Ae;Xh(ge,Ae)}return null}function Fe(ge,Ae,pe,Qe){var at=Ae!==null?Ae.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return at!==null?null:Z(ge,Ae,""+pe,Qe);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case M:return pe.key===at?ae(ge,Ae,pe,Qe):null;case F:return pe.key===at?ye(ge,Ae,pe,Qe):null;case ce:return at=pe._init,Fe(ge,Ae,at(pe._payload),Qe)}if(ui(pe)||le(pe))return at!==null?null:ke(ge,Ae,pe,Qe,null);Xh(ge,pe)}return null}function Xe(ge,Ae,pe,Qe,at){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return ge=ge.get(pe)||null,Z(Ae,ge,""+Qe,at);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case M:return ge=ge.get(Qe.key===null?pe:Qe.key)||null,ae(Ae,ge,Qe,at);case F:return ge=ge.get(Qe.key===null?pe:Qe.key)||null,ye(Ae,ge,Qe,at);case ce:var At=Qe._init;return Xe(ge,Ae,pe,At(Qe._payload),at)}if(ui(Qe)||le(Qe))return ge=ge.get(pe)||null,ke(Ae,ge,Qe,at,null);Xh(Ae,Qe)}return null}function nt(ge,Ae,pe,Qe){for(var at=null,At=null,lt=Ae,pt=Ae=0,kr=null;lt!==null&&pt<pe.length;pt++){lt.index>pt?(kr=lt,lt=null):kr=lt.sibling;var Kt=Fe(ge,lt,pe[pt],Qe);if(Kt===null){lt===null&&(lt=kr);break}d&&lt&&Kt.alternate===null&&f(ge,lt),Ae=L(Kt,Ae,pt),At===null?at=Kt:At.sibling=Kt,At=Kt,lt=kr}if(pt===pe.length)return y(ge,lt),Mn&&SA(ge,pt),at;if(lt===null){for(;pt<pe.length;pt++)lt=Le(ge,pe[pt],Qe),lt!==null&&(Ae=L(lt,Ae,pt),At===null?at=lt:At.sibling=lt,At=lt);return Mn&&SA(ge,pt),at}for(lt=B(ge,lt);pt<pe.length;pt++)kr=Xe(lt,ge,pt,pe[pt],Qe),kr!==null&&(d&&kr.alternate!==null&&lt.delete(kr.key===null?pt:kr.key),Ae=L(kr,Ae,pt),At===null?at=kr:At.sibling=kr,At=kr);return d&&lt.forEach(function(Io){return f(ge,Io)}),Mn&&SA(ge,pt),at}function rt(ge,Ae,pe,Qe){var at=le(pe);if(typeof at!="function")throw Error(t(150));if(pe=at.call(pe),pe==null)throw Error(t(151));for(var At=at=null,lt=Ae,pt=Ae=0,kr=null,Kt=pe.next();lt!==null&&!Kt.done;pt++,Kt=pe.next()){lt.index>pt?(kr=lt,lt=null):kr=lt.sibling;var Io=Fe(ge,lt,Kt.value,Qe);if(Io===null){lt===null&&(lt=kr);break}d&&lt&&Io.alternate===null&&f(ge,lt),Ae=L(Io,Ae,pt),At===null?at=Io:At.sibling=Io,At=Io,lt=kr}if(Kt.done)return y(ge,lt),Mn&&SA(ge,pt),at;if(lt===null){for(;!Kt.done;pt++,Kt=pe.next())Kt=Le(ge,Kt.value,Qe),Kt!==null&&(Ae=L(Kt,Ae,pt),At===null?at=Kt:At.sibling=Kt,At=Kt);return Mn&&SA(ge,pt),at}for(lt=B(ge,lt);!Kt.done;pt++,Kt=pe.next())Kt=Xe(lt,ge,pt,Kt.value,Qe),Kt!==null&&(d&&Kt.alternate!==null&&lt.delete(Kt.key===null?pt:Kt.key),Ae=L(Kt,Ae,pt),At===null?at=Kt:At.sibling=Kt,At=Kt);return d&&lt.forEach(function(cj){return f(ge,cj)}),Mn&&SA(ge,pt),at}function Yn(ge,Ae,pe,Qe){if(typeof pe=="object"&&pe!==null&&pe.type===k&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case M:e:{for(var at=pe.key,At=Ae;At!==null;){if(At.key===at){if(at=pe.type,at===k){if(At.tag===7){y(ge,At.sibling),Ae=I(At,pe.props.children),Ae.return=ge,ge=Ae;break e}}else if(At.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===ce&&PT(at)===At.type){y(ge,At.sibling),Ae=I(At,pe.props),Ae.ref=Bu(ge,At,pe),Ae.return=ge,ge=Ae;break e}y(ge,At);break}else f(ge,At);At=At.sibling}pe.type===k?(Ae=LA(pe.props.children,ge.mode,Qe,pe.key),Ae.return=ge,ge=Ae):(Qe=_f(pe.type,pe.key,pe.props,null,ge.mode,Qe),Qe.ref=Bu(ge,Ae,pe),Qe.return=ge,ge=Qe)}return U(ge);case F:e:{for(At=pe.key;Ae!==null;){if(Ae.key===At)if(Ae.tag===4&&Ae.stateNode.containerInfo===pe.containerInfo&&Ae.stateNode.implementation===pe.implementation){y(ge,Ae.sibling),Ae=I(Ae,pe.children||[]),Ae.return=ge,ge=Ae;break e}else{y(ge,Ae);break}else f(ge,Ae);Ae=Ae.sibling}Ae=Ty(pe,ge.mode,Qe),Ae.return=ge,ge=Ae}return U(ge);case ce:return At=pe._init,Yn(ge,Ae,At(pe._payload),Qe)}if(ui(pe))return nt(ge,Ae,pe,Qe);if(le(pe))return rt(ge,Ae,pe,Qe);Xh(ge,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,Ae!==null&&Ae.tag===6?(y(ge,Ae.sibling),Ae=I(Ae,pe),Ae.return=ge,ge=Ae):(y(ge,Ae),Ae=Sy(pe,ge.mode,Qe),Ae.return=ge,ge=Ae),U(ge)):y(ge,Ae)}return Yn}var Gl=OT(!0),LT=OT(!1),Zh=bo(null),Jh=null,Vl=null,D0=null;function R0(){D0=Vl=Jh=null}function Q0(d){var f=Zh.current;bn(Zh),d._currentValue=f}function U0(d,f,y){for(;d!==null;){var B=d.alternate;if((d.childLanes&f)!==f?(d.childLanes|=f,B!==null&&(B.childLanes|=f)):B!==null&&(B.childLanes&f)!==f&&(B.childLanes|=f),d===y)break;d=d.return}}function ql(d,f){Jh=d,D0=Vl=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&f)!==0&&(Ti=!0),d.firstContext=null)}function ha(d){var f=d._currentValue;if(D0!==d)if(d={context:d,memoizedValue:f,next:null},Vl===null){if(Jh===null)throw Error(t(308));Vl=d,Jh.dependencies={lanes:0,firstContext:d}}else Vl=Vl.next=d;return f}var TA=null;function H0(d){TA===null?TA=[d]:TA.push(d)}function NT(d,f,y,B){var I=f.interleaved;return I===null?(y.next=y,H0(f)):(y.next=I.next,I.next=y),f.interleaved=y,Us(d,B)}function Us(d,f){d.lanes|=f;var y=d.alternate;for(y!==null&&(y.lanes|=f),y=d,d=d.return;d!==null;)d.childLanes|=f,y=d.alternate,y!==null&&(y.childLanes|=f),y=d,d=d.return;return y.tag===3?y.stateNode:null}var Co=!1;function z0(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DT(d,f){d=d.updateQueue,f.updateQueue===d&&(f.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Hs(d,f){return{eventTime:d,lane:f,tag:0,payload:null,callback:null,next:null}}function Bo(d,f,y){var B=d.updateQueue;if(B===null)return null;if(B=B.shared,(jt&2)!==0){var I=B.pending;return I===null?f.next=f:(f.next=I.next,I.next=f),B.pending=f,Us(d,y)}return I=B.interleaved,I===null?(f.next=f,H0(B)):(f.next=I.next,I.next=f),B.interleaved=f,Us(d,y)}function ef(d,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194240)!==0)){var B=f.lanes;B&=d.pendingLanes,y|=B,f.lanes=y,ou(d,y)}}function RT(d,f){var y=d.updateQueue,B=d.alternate;if(B!==null&&(B=B.updateQueue,y===B)){var I=null,L=null;if(y=y.firstBaseUpdate,y!==null){do{var U={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};L===null?I=L=U:L=L.next=U,y=y.next}while(y!==null);L===null?I=L=f:L=L.next=f}else I=L=f;y={baseState:B.baseState,firstBaseUpdate:I,lastBaseUpdate:L,shared:B.shared,effects:B.effects},d.updateQueue=y;return}d=y.lastBaseUpdate,d===null?y.firstBaseUpdate=f:d.next=f,y.lastBaseUpdate=f}function tf(d,f,y,B){var I=d.updateQueue;Co=!1;var L=I.firstBaseUpdate,U=I.lastBaseUpdate,Z=I.shared.pending;if(Z!==null){I.shared.pending=null;var ae=Z,ye=ae.next;ae.next=null,U===null?L=ye:U.next=ye,U=ae;var ke=d.alternate;ke!==null&&(ke=ke.updateQueue,Z=ke.lastBaseUpdate,Z!==U&&(Z===null?ke.firstBaseUpdate=ye:Z.next=ye,ke.lastBaseUpdate=ae))}if(L!==null){var Le=I.baseState;U=0,ke=ye=ae=null,Z=L;do{var Fe=Z.lane,Xe=Z.eventTime;if((B&Fe)===Fe){ke!==null&&(ke=ke.next={eventTime:Xe,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var nt=d,rt=Z;switch(Fe=f,Xe=y,rt.tag){case 1:if(nt=rt.payload,typeof nt=="function"){Le=nt.call(Xe,Le,Fe);break e}Le=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=rt.payload,Fe=typeof nt=="function"?nt.call(Xe,Le,Fe):nt,Fe==null)break e;Le=fe({},Le,Fe);break e;case 2:Co=!0}}Z.callback!==null&&Z.lane!==0&&(d.flags|=64,Fe=I.effects,Fe===null?I.effects=[Z]:Fe.push(Z))}else Xe={eventTime:Xe,lane:Fe,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},ke===null?(ye=ke=Xe,ae=Le):ke=ke.next=Xe,U|=Fe;if(Z=Z.next,Z===null){if(Z=I.shared.pending,Z===null)break;Fe=Z,Z=Fe.next,Fe.next=null,I.lastBaseUpdate=Fe,I.shared.pending=null}}while(!0);if(ke===null&&(ae=Le),I.baseState=ae,I.firstBaseUpdate=ye,I.lastBaseUpdate=ke,f=I.shared.interleaved,f!==null){I=f;do U|=I.lane,I=I.next;while(I!==f)}else L===null&&(I.shared.lanes=0);kA|=U,d.lanes=U,d.memoizedState=Le}}function QT(d,f,y){if(d=f.effects,f.effects=null,d!==null)for(f=0;f<d.length;f++){var B=d[f],I=B.callback;if(I!==null){if(B.callback=null,B=y,typeof I!="function")throw Error(t(191,I));I.call(B)}}}var xu={},As=bo(xu),Su=bo(xu),Tu=bo(xu);function MA(d){if(d===xu)throw Error(t(174));return d}function j0(d,f){switch(pn(Tu,f),pn(Su,d),pn(As,xu),d=f.nodeType,d){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:vr(null,"");break;default:d=d===8?f.parentNode:f,f=d.namespaceURI||null,d=d.tagName,f=vr(f,d)}bn(As),pn(As,f)}function Wl(){bn(As),bn(Su),bn(Tu)}function UT(d){MA(Tu.current);var f=MA(As.current),y=vr(f,d.type);f!==y&&(pn(Su,d),pn(As,y))}function K0(d){Su.current===d&&(bn(As),bn(Su))}var On=bo(0);function nf(d){for(var f=d;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||y.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var G0=[];function V0(){for(var d=0;d<G0.length;d++)G0[d]._workInProgressVersionPrimary=null;G0.length=0}var rf=C.ReactCurrentDispatcher,q0=C.ReactCurrentBatchConfig,FA=0,Ln=null,yr=null,Mr=null,af=!1,Mu=!1,Fu=0,Iz=0;function Jr(){throw Error(t(321))}function W0(d,f){if(f===null)return!1;for(var y=0;y<f.length&&y<d.length;y++)if(!La(d[y],f[y]))return!1;return!0}function $0(d,f,y,B,I,L){if(FA=L,Ln=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,rf.current=d===null||d.memoizedState===null?Nz:Dz,d=y(B,I),Mu){L=0;do{if(Mu=!1,Fu=0,25<=L)throw Error(t(301));L+=1,Mr=yr=null,f.updateQueue=null,rf.current=Rz,d=y(B,I)}while(Mu)}if(rf.current=Af,f=yr!==null&&yr.next!==null,FA=0,Mr=yr=Ln=null,af=!1,f)throw Error(t(300));return d}function Y0(){var d=Fu!==0;return Fu=0,d}function ls(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mr===null?Ln.memoizedState=Mr=d:Mr=Mr.next=d,Mr}function fa(){if(yr===null){var d=Ln.alternate;d=d!==null?d.memoizedState:null}else d=yr.next;var f=Mr===null?Ln.memoizedState:Mr.next;if(f!==null)Mr=f,yr=d;else{if(d===null)throw Error(t(310));yr=d,d={memoizedState:yr.memoizedState,baseState:yr.baseState,baseQueue:yr.baseQueue,queue:yr.queue,next:null},Mr===null?Ln.memoizedState=Mr=d:Mr=Mr.next=d}return Mr}function ku(d,f){return typeof f=="function"?f(d):f}function X0(d){var f=fa(),y=f.queue;if(y===null)throw Error(t(311));y.lastRenderedReducer=d;var B=yr,I=B.baseQueue,L=y.pending;if(L!==null){if(I!==null){var U=I.next;I.next=L.next,L.next=U}B.baseQueue=I=L,y.pending=null}if(I!==null){L=I.next,B=B.baseState;var Z=U=null,ae=null,ye=L;do{var ke=ye.lane;if((FA&ke)===ke)ae!==null&&(ae=ae.next={lane:0,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),B=ye.hasEagerState?ye.eagerState:d(B,ye.action);else{var Le={lane:ke,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null};ae===null?(Z=ae=Le,U=B):ae=ae.next=Le,Ln.lanes|=ke,kA|=ke}ye=ye.next}while(ye!==null&&ye!==L);ae===null?U=B:ae.next=Z,La(B,f.memoizedState)||(Ti=!0),f.memoizedState=B,f.baseState=U,f.baseQueue=ae,y.lastRenderedState=B}if(d=y.interleaved,d!==null){I=d;do L=I.lane,Ln.lanes|=L,kA|=L,I=I.next;while(I!==d)}else I===null&&(y.lanes=0);return[f.memoizedState,y.dispatch]}function Z0(d){var f=fa(),y=f.queue;if(y===null)throw Error(t(311));y.lastRenderedReducer=d;var B=y.dispatch,I=y.pending,L=f.memoizedState;if(I!==null){y.pending=null;var U=I=I.next;do L=d(L,U.action),U=U.next;while(U!==I);La(L,f.memoizedState)||(Ti=!0),f.memoizedState=L,f.baseQueue===null&&(f.baseState=L),y.lastRenderedState=L}return[L,B]}function HT(){}function zT(d,f){var y=Ln,B=fa(),I=f(),L=!La(B.memoizedState,I);if(L&&(B.memoizedState=I,Ti=!0),B=B.queue,J0(GT.bind(null,y,B,d),[d]),B.getSnapshot!==f||L||Mr!==null&&Mr.memoizedState.tag&1){if(y.flags|=2048,Iu(9,KT.bind(null,y,B,I,f),void 0,null),Fr===null)throw Error(t(349));(FA&30)!==0||jT(y,f,I)}return I}function jT(d,f,y){d.flags|=16384,d={getSnapshot:f,value:y},f=Ln.updateQueue,f===null?(f={lastEffect:null,stores:null},Ln.updateQueue=f,f.stores=[d]):(y=f.stores,y===null?f.stores=[d]:y.push(d))}function KT(d,f,y,B){f.value=y,f.getSnapshot=B,VT(f)&&qT(d)}function GT(d,f,y){return y(function(){VT(f)&&qT(d)})}function VT(d){var f=d.getSnapshot;d=d.value;try{var y=f();return!La(d,y)}catch{return!0}}function qT(d){var f=Us(d,1);f!==null&&Ua(f,d,1,-1)}function WT(d){var f=ls();return typeof d=="function"&&(d=d()),f.memoizedState=f.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ku,lastRenderedState:d},f.queue=d,d=d.dispatch=Lz.bind(null,Ln,d),[f.memoizedState,d]}function Iu(d,f,y,B){return d={tag:d,create:f,destroy:y,deps:B,next:null},f=Ln.updateQueue,f===null?(f={lastEffect:null,stores:null},Ln.updateQueue=f,f.lastEffect=d.next=d):(y=f.lastEffect,y===null?f.lastEffect=d.next=d:(B=y.next,y.next=d,d.next=B,f.lastEffect=d)),d}function $T(){return fa().memoizedState}function sf(d,f,y,B){var I=ls();Ln.flags|=d,I.memoizedState=Iu(1|f,y,void 0,B===void 0?null:B)}function of(d,f,y,B){var I=fa();B=B===void 0?null:B;var L=void 0;if(yr!==null){var U=yr.memoizedState;if(L=U.destroy,B!==null&&W0(B,U.deps)){I.memoizedState=Iu(f,y,L,B);return}}Ln.flags|=d,I.memoizedState=Iu(1|f,y,L,B)}function YT(d,f){return sf(8390656,8,d,f)}function J0(d,f){return of(2048,8,d,f)}function XT(d,f){return of(4,2,d,f)}function ZT(d,f){return of(4,4,d,f)}function JT(d,f){if(typeof f=="function")return d=d(),f(d),function(){f(null)};if(f!=null)return d=d(),f.current=d,function(){f.current=null}}function eM(d,f,y){return y=y!=null?y.concat([d]):null,of(4,4,JT.bind(null,f,d),y)}function ey(){}function tM(d,f){var y=fa();f=f===void 0?null:f;var B=y.memoizedState;return B!==null&&f!==null&&W0(f,B[1])?B[0]:(y.memoizedState=[d,f],d)}function nM(d,f){var y=fa();f=f===void 0?null:f;var B=y.memoizedState;return B!==null&&f!==null&&W0(f,B[1])?B[0]:(d=d(),y.memoizedState=[d,f],d)}function rM(d,f,y){return(FA&21)===0?(d.baseState&&(d.baseState=!1,Ti=!0),d.memoizedState=y):(La(y,f)||(y=xh(),Ln.lanes|=y,kA|=y,d.baseState=!0),f)}function Pz(d,f){var y=Vt;Vt=y!==0&&4>y?y:4,d(!0);var B=q0.transition;q0.transition={};try{d(!1),f()}finally{Vt=y,q0.transition=B}}function iM(){return fa().memoizedState}function Oz(d,f,y){var B=Mo(d);if(y={lane:B,action:y,hasEagerState:!1,eagerState:null,next:null},aM(d))sM(f,y);else if(y=NT(d,f,y,B),y!==null){var I=gi();Ua(y,d,B,I),oM(y,f,B)}}function Lz(d,f,y){var B=Mo(d),I={lane:B,action:y,hasEagerState:!1,eagerState:null,next:null};if(aM(d))sM(f,I);else{var L=d.alternate;if(d.lanes===0&&(L===null||L.lanes===0)&&(L=f.lastRenderedReducer,L!==null))try{var U=f.lastRenderedState,Z=L(U,y);if(I.hasEagerState=!0,I.eagerState=Z,La(Z,U)){var ae=f.interleaved;ae===null?(I.next=I,H0(f)):(I.next=ae.next,ae.next=I),f.interleaved=I;return}}catch{}finally{}y=NT(d,f,I,B),y!==null&&(I=gi(),Ua(y,d,B,I),oM(y,f,B))}}function aM(d){var f=d.alternate;return d===Ln||f!==null&&f===Ln}function sM(d,f){Mu=af=!0;var y=d.pending;y===null?f.next=f:(f.next=y.next,y.next=f),d.pending=f}function oM(d,f,y){if((y&4194240)!==0){var B=f.lanes;B&=d.pendingLanes,y|=B,f.lanes=y,ou(d,y)}}var Af={readContext:ha,useCallback:Jr,useContext:Jr,useEffect:Jr,useImperativeHandle:Jr,useInsertionEffect:Jr,useLayoutEffect:Jr,useMemo:Jr,useReducer:Jr,useRef:Jr,useState:Jr,useDebugValue:Jr,useDeferredValue:Jr,useTransition:Jr,useMutableSource:Jr,useSyncExternalStore:Jr,useId:Jr,unstable_isNewReconciler:!1},Nz={readContext:ha,useCallback:function(d,f){return ls().memoizedState=[d,f===void 0?null:f],d},useContext:ha,useEffect:YT,useImperativeHandle:function(d,f,y){return y=y!=null?y.concat([d]):null,sf(4194308,4,JT.bind(null,f,d),y)},useLayoutEffect:function(d,f){return sf(4194308,4,d,f)},useInsertionEffect:function(d,f){return sf(4,2,d,f)},useMemo:function(d,f){var y=ls();return f=f===void 0?null:f,d=d(),y.memoizedState=[d,f],d},useReducer:function(d,f,y){var B=ls();return f=y!==void 0?y(f):f,B.memoizedState=B.baseState=f,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:f},B.queue=d,d=d.dispatch=Oz.bind(null,Ln,d),[B.memoizedState,d]},useRef:function(d){var f=ls();return d={current:d},f.memoizedState=d},useState:WT,useDebugValue:ey,useDeferredValue:function(d){return ls().memoizedState=d},useTransition:function(){var d=WT(!1),f=d[0];return d=Pz.bind(null,d[1]),ls().memoizedState=d,[f,d]},useMutableSource:function(){},useSyncExternalStore:function(d,f,y){var B=Ln,I=ls();if(Mn){if(y===void 0)throw Error(t(407));y=y()}else{if(y=f(),Fr===null)throw Error(t(349));(FA&30)!==0||jT(B,f,y)}I.memoizedState=y;var L={value:y,getSnapshot:f};return I.queue=L,YT(GT.bind(null,B,L,d),[d]),B.flags|=2048,Iu(9,KT.bind(null,B,L,y,f),void 0,null),y},useId:function(){var d=ls(),f=Fr.identifierPrefix;if(Mn){var y=Qs,B=Rs;y=(B&~(1<<32-Jt(B)-1)).toString(32)+y,f=":"+f+"R"+y,y=Fu++,0<y&&(f+="H"+y.toString(32)),f+=":"}else y=Iz++,f=":"+f+"r"+y.toString(32)+":";return d.memoizedState=f},unstable_isNewReconciler:!1},Dz={readContext:ha,useCallback:tM,useContext:ha,useEffect:J0,useImperativeHandle:eM,useInsertionEffect:XT,useLayoutEffect:ZT,useMemo:nM,useReducer:X0,useRef:$T,useState:function(){return X0(ku)},useDebugValue:ey,useDeferredValue:function(d){var f=fa();return rM(f,yr.memoizedState,d)},useTransition:function(){var d=X0(ku)[0],f=fa().memoizedState;return[d,f]},useMutableSource:HT,useSyncExternalStore:zT,useId:iM,unstable_isNewReconciler:!1},Rz={readContext:ha,useCallback:tM,useContext:ha,useEffect:J0,useImperativeHandle:eM,useInsertionEffect:XT,useLayoutEffect:ZT,useMemo:nM,useReducer:Z0,useRef:$T,useState:function(){return Z0(ku)},useDebugValue:ey,useDeferredValue:function(d){var f=fa();return yr===null?f.memoizedState=d:rM(f,yr.memoizedState,d)},useTransition:function(){var d=Z0(ku)[0],f=fa().memoizedState;return[d,f]},useMutableSource:HT,useSyncExternalStore:zT,useId:iM,unstable_isNewReconciler:!1};function Da(d,f){if(d&&d.defaultProps){f=fe({},f),d=d.defaultProps;for(var y in d)f[y]===void 0&&(f[y]=d[y]);return f}return f}function ty(d,f,y,B){f=d.memoizedState,y=y(B,f),y=y==null?f:fe({},f,y),d.memoizedState=y,d.lanes===0&&(d.updateQueue.baseState=y)}var lf={isMounted:function(d){return(d=d._reactInternals)?ve(d)===d:!1},enqueueSetState:function(d,f,y){d=d._reactInternals;var B=gi(),I=Mo(d),L=Hs(B,I);L.payload=f,y!=null&&(L.callback=y),f=Bo(d,L,I),f!==null&&(Ua(f,d,I,B),ef(f,d,I))},enqueueReplaceState:function(d,f,y){d=d._reactInternals;var B=gi(),I=Mo(d),L=Hs(B,I);L.tag=1,L.payload=f,y!=null&&(L.callback=y),f=Bo(d,L,I),f!==null&&(Ua(f,d,I,B),ef(f,d,I))},enqueueForceUpdate:function(d,f){d=d._reactInternals;var y=gi(),B=Mo(d),I=Hs(y,B);I.tag=2,f!=null&&(I.callback=f),f=Bo(d,I,B),f!==null&&(Ua(f,d,B,y),ef(f,d,B))}};function AM(d,f,y,B,I,L,U){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(B,L,U):f.prototype&&f.prototype.isPureReactComponent?!mu(y,B)||!mu(I,L):!0}function lM(d,f,y){var B=!1,I=_o,L=f.contextType;return typeof L=="object"&&L!==null?L=ha(L):(I=Si(f)?BA:Zr.current,B=f.contextTypes,L=(B=B!=null)?Hl(d,I):_o),f=new f(y,L),d.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=lf,d.stateNode=f,f._reactInternals=d,B&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=I,d.__reactInternalMemoizedMaskedChildContext=L),f}function cM(d,f,y,B){d=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,B),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,B),f.state!==d&&lf.enqueueReplaceState(f,f.state,null)}function ny(d,f,y,B){var I=d.stateNode;I.props=y,I.state=d.memoizedState,I.refs={},z0(d);var L=f.contextType;typeof L=="object"&&L!==null?I.context=ha(L):(L=Si(f)?BA:Zr.current,I.context=Hl(d,L)),I.state=d.memoizedState,L=f.getDerivedStateFromProps,typeof L=="function"&&(ty(d,f,L,y),I.state=d.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(f=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),f!==I.state&&lf.enqueueReplaceState(I,I.state,null),tf(d,y,I,B),I.state=d.memoizedState),typeof I.componentDidMount=="function"&&(d.flags|=4194308)}function $l(d,f){try{var y="",B=f;do y+=$(B),B=B.return;while(B);var I=y}catch(L){I=`
Error generating stack: `+L.message+`
`+L.stack}return{value:d,source:f,stack:I,digest:null}}function ry(d,f,y){return{value:d,source:null,stack:y??null,digest:f??null}}function iy(d,f){try{console.error(f.value)}catch(y){setTimeout(function(){throw y})}}var Qz=typeof WeakMap=="function"?WeakMap:Map;function uM(d,f,y){y=Hs(-1,y),y.tag=3,y.payload={element:null};var B=f.value;return y.callback=function(){pf||(pf=!0,yy=B),iy(d,f)},y}function dM(d,f,y){y=Hs(-1,y),y.tag=3;var B=d.type.getDerivedStateFromError;if(typeof B=="function"){var I=f.value;y.payload=function(){return B(I)},y.callback=function(){iy(d,f)}}var L=d.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(y.callback=function(){iy(d,f),typeof B!="function"&&(So===null?So=new Set([this]):So.add(this));var U=f.stack;this.componentDidCatch(f.value,{componentStack:U!==null?U:""})}),y}function hM(d,f,y){var B=d.pingCache;if(B===null){B=d.pingCache=new Qz;var I=new Set;B.set(f,I)}else I=B.get(f),I===void 0&&(I=new Set,B.set(f,I));I.has(y)||(I.add(y),d=Jz.bind(null,d,f,y),f.then(d,d))}function fM(d){do{var f;if((f=d.tag===13)&&(f=d.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return d;d=d.return}while(d!==null);return null}function gM(d,f,y,B,I){return(d.mode&1)===0?(d===f?d.flags|=65536:(d.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(f=Hs(-1,1),f.tag=2,Bo(y,f,1))),y.lanes|=1),d):(d.flags|=65536,d.lanes=I,d)}var Uz=C.ReactCurrentOwner,Ti=!1;function fi(d,f,y,B){f.child=d===null?LT(f,null,y,B):Gl(f,d.child,y,B)}function pM(d,f,y,B,I){y=y.render;var L=f.ref;return ql(f,I),B=$0(d,f,y,B,L,I),y=Y0(),d!==null&&!Ti?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~I,zs(d,f,I)):(Mn&&y&&I0(f),f.flags|=1,fi(d,f,B,I),f.child)}function vM(d,f,y,B,I){if(d===null){var L=y.type;return typeof L=="function"&&!xy(L)&&L.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(f.tag=15,f.type=L,mM(d,f,L,B,I)):(d=_f(y.type,null,B,f,f.mode,I),d.ref=f.ref,d.return=f,f.child=d)}if(L=d.child,(d.lanes&I)===0){var U=L.memoizedProps;if(y=y.compare,y=y!==null?y:mu,y(U,B)&&d.ref===f.ref)return zs(d,f,I)}return f.flags|=1,d=ko(L,B),d.ref=f.ref,d.return=f,f.child=d}function mM(d,f,y,B,I){if(d!==null){var L=d.memoizedProps;if(mu(L,B)&&d.ref===f.ref)if(Ti=!1,f.pendingProps=B=L,(d.lanes&I)!==0)(d.flags&131072)!==0&&(Ti=!0);else return f.lanes=d.lanes,zs(d,f,I)}return ay(d,f,y,B,I)}function yM(d,f,y){var B=f.pendingProps,I=B.children,L=d!==null?d.memoizedState:null;if(B.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null,transitions:null},pn(Xl,Yi),Yi|=y;else{if((y&1073741824)===0)return d=L!==null?L.baseLanes|y:y,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:d,cachePool:null,transitions:null},f.updateQueue=null,pn(Xl,Yi),Yi|=d,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},B=L!==null?L.baseLanes:y,pn(Xl,Yi),Yi|=B}else L!==null?(B=L.baseLanes|y,f.memoizedState=null):B=y,pn(Xl,Yi),Yi|=B;return fi(d,f,I,y),f.child}function wM(d,f){var y=f.ref;(d===null&&y!==null||d!==null&&d.ref!==y)&&(f.flags|=512,f.flags|=2097152)}function ay(d,f,y,B,I){var L=Si(y)?BA:Zr.current;return L=Hl(f,L),ql(f,I),y=$0(d,f,y,B,L,I),B=Y0(),d!==null&&!Ti?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~I,zs(d,f,I)):(Mn&&B&&I0(f),f.flags|=1,fi(d,f,y,I),f.child)}function bM(d,f,y,B,I){if(Si(y)){var L=!0;Vh(f)}else L=!1;if(ql(f,I),f.stateNode===null)uf(d,f),lM(f,y,B),ny(f,y,B,I),B=!0;else if(d===null){var U=f.stateNode,Z=f.memoizedProps;U.props=Z;var ae=U.context,ye=y.contextType;typeof ye=="object"&&ye!==null?ye=ha(ye):(ye=Si(y)?BA:Zr.current,ye=Hl(f,ye));var ke=y.getDerivedStateFromProps,Le=typeof ke=="function"||typeof U.getSnapshotBeforeUpdate=="function";Le||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(Z!==B||ae!==ye)&&cM(f,U,B,ye),Co=!1;var Fe=f.memoizedState;U.state=Fe,tf(f,B,U,I),ae=f.memoizedState,Z!==B||Fe!==ae||xi.current||Co?(typeof ke=="function"&&(ty(f,y,ke,B),ae=f.memoizedState),(Z=Co||AM(f,y,Z,B,Fe,ae,ye))?(Le||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(f.flags|=4194308)):(typeof U.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=B,f.memoizedState=ae),U.props=B,U.state=ae,U.context=ye,B=Z):(typeof U.componentDidMount=="function"&&(f.flags|=4194308),B=!1)}else{U=f.stateNode,DT(d,f),Z=f.memoizedProps,ye=f.type===f.elementType?Z:Da(f.type,Z),U.props=ye,Le=f.pendingProps,Fe=U.context,ae=y.contextType,typeof ae=="object"&&ae!==null?ae=ha(ae):(ae=Si(y)?BA:Zr.current,ae=Hl(f,ae));var Xe=y.getDerivedStateFromProps;(ke=typeof Xe=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(Z!==Le||Fe!==ae)&&cM(f,U,B,ae),Co=!1,Fe=f.memoizedState,U.state=Fe,tf(f,B,U,I);var nt=f.memoizedState;Z!==Le||Fe!==nt||xi.current||Co?(typeof Xe=="function"&&(ty(f,y,Xe,B),nt=f.memoizedState),(ye=Co||AM(f,y,ye,B,Fe,nt,ae)||!1)?(ke||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(B,nt,ae),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(B,nt,ae)),typeof U.componentDidUpdate=="function"&&(f.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof U.componentDidUpdate!="function"||Z===d.memoizedProps&&Fe===d.memoizedState||(f.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Z===d.memoizedProps&&Fe===d.memoizedState||(f.flags|=1024),f.memoizedProps=B,f.memoizedState=nt),U.props=B,U.state=nt,U.context=ae,B=ye):(typeof U.componentDidUpdate!="function"||Z===d.memoizedProps&&Fe===d.memoizedState||(f.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Z===d.memoizedProps&&Fe===d.memoizedState||(f.flags|=1024),B=!1)}return sy(d,f,y,B,L,I)}function sy(d,f,y,B,I,L){wM(d,f);var U=(f.flags&128)!==0;if(!B&&!U)return I&&xT(f,y,!1),zs(d,f,L);B=f.stateNode,Uz.current=f;var Z=U&&typeof y.getDerivedStateFromError!="function"?null:B.render();return f.flags|=1,d!==null&&U?(f.child=Gl(f,d.child,null,L),f.child=Gl(f,null,Z,L)):fi(d,f,Z,L),f.memoizedState=B.state,I&&xT(f,y,!0),f.child}function _M(d){var f=d.stateNode;f.pendingContext?CT(d,f.pendingContext,f.pendingContext!==f.context):f.context&&CT(d,f.context,!1),j0(d,f.containerInfo)}function EM(d,f,y,B,I){return Kl(),N0(I),f.flags|=256,fi(d,f,y,B),f.child}var oy={dehydrated:null,treeContext:null,retryLane:0};function Ay(d){return{baseLanes:d,cachePool:null,transitions:null}}function CM(d,f,y){var B=f.pendingProps,I=On.current,L=!1,U=(f.flags&128)!==0,Z;if((Z=U)||(Z=d!==null&&d.memoizedState===null?!1:(I&2)!==0),Z?(L=!0,f.flags&=-129):(d===null||d.memoizedState!==null)&&(I|=1),pn(On,I&1),d===null)return L0(f),d=f.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((f.mode&1)===0?f.lanes=1:d.data==="$!"?f.lanes=8:f.lanes=1073741824,null):(U=B.children,d=B.fallback,L?(B=f.mode,L=f.child,U={mode:"hidden",children:U},(B&1)===0&&L!==null?(L.childLanes=0,L.pendingProps=U):L=Ef(U,B,0,null),d=LA(d,B,y,null),L.return=f,d.return=f,L.sibling=d,f.child=L,f.child.memoizedState=Ay(y),f.memoizedState=oy,d):ly(f,U));if(I=d.memoizedState,I!==null&&(Z=I.dehydrated,Z!==null))return Hz(d,f,U,B,Z,I,y);if(L){L=B.fallback,U=f.mode,I=d.child,Z=I.sibling;var ae={mode:"hidden",children:B.children};return(U&1)===0&&f.child!==I?(B=f.child,B.childLanes=0,B.pendingProps=ae,f.deletions=null):(B=ko(I,ae),B.subtreeFlags=I.subtreeFlags&14680064),Z!==null?L=ko(Z,L):(L=LA(L,U,y,null),L.flags|=2),L.return=f,B.return=f,B.sibling=L,f.child=B,B=L,L=f.child,U=d.child.memoizedState,U=U===null?Ay(y):{baseLanes:U.baseLanes|y,cachePool:null,transitions:U.transitions},L.memoizedState=U,L.childLanes=d.childLanes&~y,f.memoizedState=oy,B}return L=d.child,d=L.sibling,B=ko(L,{mode:"visible",children:B.children}),(f.mode&1)===0&&(B.lanes=y),B.return=f,B.sibling=null,d!==null&&(y=f.deletions,y===null?(f.deletions=[d],f.flags|=16):y.push(d)),f.child=B,f.memoizedState=null,B}function ly(d,f){return f=Ef({mode:"visible",children:f},d.mode,0,null),f.return=d,d.child=f}function cf(d,f,y,B){return B!==null&&N0(B),Gl(f,d.child,null,y),d=ly(f,f.pendingProps.children),d.flags|=2,f.memoizedState=null,d}function Hz(d,f,y,B,I,L,U){if(y)return f.flags&256?(f.flags&=-257,B=ry(Error(t(422))),cf(d,f,U,B)):f.memoizedState!==null?(f.child=d.child,f.flags|=128,null):(L=B.fallback,I=f.mode,B=Ef({mode:"visible",children:B.children},I,0,null),L=LA(L,I,U,null),L.flags|=2,B.return=f,L.return=f,B.sibling=L,f.child=B,(f.mode&1)!==0&&Gl(f,d.child,null,U),f.child.memoizedState=Ay(U),f.memoizedState=oy,L);if((f.mode&1)===0)return cf(d,f,U,null);if(I.data==="$!"){if(B=I.nextSibling&&I.nextSibling.dataset,B)var Z=B.dgst;return B=Z,L=Error(t(419)),B=ry(L,B,void 0),cf(d,f,U,B)}if(Z=(U&d.childLanes)!==0,Ti||Z){if(B=Fr,B!==null){switch(U&-U){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}I=(I&(B.suspendedLanes|U))!==0?0:I,I!==0&&I!==L.retryLane&&(L.retryLane=I,Us(d,I),Ua(B,d,I,-1))}return By(),B=ry(Error(t(421))),cf(d,f,U,B)}return I.data==="$?"?(f.flags|=128,f.child=d.child,f=ej.bind(null,d),I._reactRetry=f,null):(d=L.treeContext,$i=wo(I.nextSibling),Wi=f,Mn=!0,Na=null,d!==null&&(ua[da++]=Rs,ua[da++]=Qs,ua[da++]=xA,Rs=d.id,Qs=d.overflow,xA=f),f=ly(f,B.children),f.flags|=4096,f)}function BM(d,f,y){d.lanes|=f;var B=d.alternate;B!==null&&(B.lanes|=f),U0(d.return,f,y)}function cy(d,f,y,B,I){var L=d.memoizedState;L===null?d.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:B,tail:y,tailMode:I}:(L.isBackwards=f,L.rendering=null,L.renderingStartTime=0,L.last=B,L.tail=y,L.tailMode=I)}function xM(d,f,y){var B=f.pendingProps,I=B.revealOrder,L=B.tail;if(fi(d,f,B.children,y),B=On.current,(B&2)!==0)B=B&1|2,f.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=f.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&BM(d,y,f);else if(d.tag===19)BM(d,y,f);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}B&=1}if(pn(On,B),(f.mode&1)===0)f.memoizedState=null;else switch(I){case"forwards":for(y=f.child,I=null;y!==null;)d=y.alternate,d!==null&&nf(d)===null&&(I=y),y=y.sibling;y=I,y===null?(I=f.child,f.child=null):(I=y.sibling,y.sibling=null),cy(f,!1,I,y,L);break;case"backwards":for(y=null,I=f.child,f.child=null;I!==null;){if(d=I.alternate,d!==null&&nf(d)===null){f.child=I;break}d=I.sibling,I.sibling=y,y=I,I=d}cy(f,!0,y,null,L);break;case"together":cy(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function uf(d,f){(f.mode&1)===0&&d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2)}function zs(d,f,y){if(d!==null&&(f.dependencies=d.dependencies),kA|=f.lanes,(y&f.childLanes)===0)return null;if(d!==null&&f.child!==d.child)throw Error(t(153));if(f.child!==null){for(d=f.child,y=ko(d,d.pendingProps),f.child=y,y.return=f;d.sibling!==null;)d=d.sibling,y=y.sibling=ko(d,d.pendingProps),y.return=f;y.sibling=null}return f.child}function zz(d,f,y){switch(f.tag){case 3:_M(f),Kl();break;case 5:UT(f);break;case 1:Si(f.type)&&Vh(f);break;case 4:j0(f,f.stateNode.containerInfo);break;case 10:var B=f.type._context,I=f.memoizedProps.value;pn(Zh,B._currentValue),B._currentValue=I;break;case 13:if(B=f.memoizedState,B!==null)return B.dehydrated!==null?(pn(On,On.current&1),f.flags|=128,null):(y&f.child.childLanes)!==0?CM(d,f,y):(pn(On,On.current&1),d=zs(d,f,y),d!==null?d.sibling:null);pn(On,On.current&1);break;case 19:if(B=(y&f.childLanes)!==0,(d.flags&128)!==0){if(B)return xM(d,f,y);f.flags|=128}if(I=f.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),pn(On,On.current),B)break;return null;case 22:case 23:return f.lanes=0,yM(d,f,y)}return zs(d,f,y)}var SM,uy,TM,MM;SM=function(d,f){for(var y=f.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===f)break;for(;y.sibling===null;){if(y.return===null||y.return===f)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},uy=function(){},TM=function(d,f,y,B){var I=d.memoizedProps;if(I!==B){d=f.stateNode,MA(As.current);var L=null;switch(y){case"input":I=zt(d,I),B=zt(d,B),L=[];break;case"select":I=fe({},I,{value:void 0}),B=fe({},B,{value:void 0}),L=[];break;case"textarea":I=An(d,I),B=An(d,B),L=[];break;default:typeof I.onClick!="function"&&typeof B.onClick=="function"&&(d.onclick=jh)}co(y,B);var U;y=null;for(ye in I)if(!B.hasOwnProperty(ye)&&I.hasOwnProperty(ye)&&I[ye]!=null)if(ye==="style"){var Z=I[ye];for(U in Z)Z.hasOwnProperty(U)&&(y||(y={}),y[U]="")}else ye!=="dangerouslySetInnerHTML"&&ye!=="children"&&ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&ye!=="autoFocus"&&(i.hasOwnProperty(ye)?L||(L=[]):(L=L||[]).push(ye,null));for(ye in B){var ae=B[ye];if(Z=I!=null?I[ye]:void 0,B.hasOwnProperty(ye)&&ae!==Z&&(ae!=null||Z!=null))if(ye==="style")if(Z){for(U in Z)!Z.hasOwnProperty(U)||ae&&ae.hasOwnProperty(U)||(y||(y={}),y[U]="");for(U in ae)ae.hasOwnProperty(U)&&Z[U]!==ae[U]&&(y||(y={}),y[U]=ae[U])}else y||(L||(L=[]),L.push(ye,y)),y=ae;else ye==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,Z=Z?Z.__html:void 0,ae!=null&&Z!==ae&&(L=L||[]).push(ye,ae)):ye==="children"?typeof ae!="string"&&typeof ae!="number"||(L=L||[]).push(ye,""+ae):ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&(i.hasOwnProperty(ye)?(ae!=null&&ye==="onScroll"&&wn("scroll",d),L||Z===ae||(L=[])):(L=L||[]).push(ye,ae))}y&&(L=L||[]).push("style",y);var ye=L;(f.updateQueue=ye)&&(f.flags|=4)}},MM=function(d,f,y,B){y!==B&&(f.flags|=4)};function Pu(d,f){if(!Mn)switch(d.tailMode){case"hidden":f=d.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?d.tail=null:y.sibling=null;break;case"collapsed":y=d.tail;for(var B=null;y!==null;)y.alternate!==null&&(B=y),y=y.sibling;B===null?f||d.tail===null?d.tail=null:d.tail.sibling=null:B.sibling=null}}function ei(d){var f=d.alternate!==null&&d.alternate.child===d.child,y=0,B=0;if(f)for(var I=d.child;I!==null;)y|=I.lanes|I.childLanes,B|=I.subtreeFlags&14680064,B|=I.flags&14680064,I.return=d,I=I.sibling;else for(I=d.child;I!==null;)y|=I.lanes|I.childLanes,B|=I.subtreeFlags,B|=I.flags,I.return=d,I=I.sibling;return d.subtreeFlags|=B,d.childLanes=y,f}function jz(d,f,y){var B=f.pendingProps;switch(P0(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ei(f),null;case 1:return Si(f.type)&&Gh(),ei(f),null;case 3:return B=f.stateNode,Wl(),bn(xi),bn(Zr),V0(),B.pendingContext&&(B.context=B.pendingContext,B.pendingContext=null),(d===null||d.child===null)&&(Yh(f)?f.flags|=4:d===null||d.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Na!==null&&(_y(Na),Na=null))),uy(d,f),ei(f),null;case 5:K0(f);var I=MA(Tu.current);if(y=f.type,d!==null&&f.stateNode!=null)TM(d,f,y,B,I),d.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!B){if(f.stateNode===null)throw Error(t(166));return ei(f),null}if(d=MA(As.current),Yh(f)){B=f.stateNode,y=f.type;var L=f.memoizedProps;switch(B[os]=f,B[Eu]=L,d=(f.mode&1)!==0,y){case"dialog":wn("cancel",B),wn("close",B);break;case"iframe":case"object":case"embed":wn("load",B);break;case"video":case"audio":for(I=0;I<wu.length;I++)wn(wu[I],B);break;case"source":wn("error",B);break;case"img":case"image":case"link":wn("error",B),wn("load",B);break;case"details":wn("toggle",B);break;case"input":ot(B,L),wn("invalid",B);break;case"select":B._wrapperState={wasMultiple:!!L.multiple},wn("invalid",B);break;case"textarea":Xt(B,L),wn("invalid",B)}co(y,L),I=null;for(var U in L)if(L.hasOwnProperty(U)){var Z=L[U];U==="children"?typeof Z=="string"?B.textContent!==Z&&(L.suppressHydrationWarning!==!0&&zh(B.textContent,Z,d),I=["children",Z]):typeof Z=="number"&&B.textContent!==""+Z&&(L.suppressHydrationWarning!==!0&&zh(B.textContent,Z,d),I=["children",""+Z]):i.hasOwnProperty(U)&&Z!=null&&U==="onScroll"&&wn("scroll",B)}switch(y){case"input":Bt(B),Rr(B,L,!0);break;case"textarea":Bt(B),pr(B);break;case"select":case"option":break;default:typeof L.onClick=="function"&&(B.onclick=jh)}B=I,f.updateQueue=B,B!==null&&(f.flags|=4)}else{U=I.nodeType===9?I:I.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=Qr(y)),d==="http://www.w3.org/1999/xhtml"?y==="script"?(d=U.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof B.is=="string"?d=U.createElement(y,{is:B.is}):(d=U.createElement(y),y==="select"&&(U=d,B.multiple?U.multiple=!0:B.size&&(U.size=B.size))):d=U.createElementNS(d,y),d[os]=f,d[Eu]=B,SM(d,f,!1,!1),f.stateNode=d;e:{switch(U=wA(y,B),y){case"dialog":wn("cancel",d),wn("close",d),I=B;break;case"iframe":case"object":case"embed":wn("load",d),I=B;break;case"video":case"audio":for(I=0;I<wu.length;I++)wn(wu[I],d);I=B;break;case"source":wn("error",d),I=B;break;case"img":case"image":case"link":wn("error",d),wn("load",d),I=B;break;case"details":wn("toggle",d),I=B;break;case"input":ot(d,B),I=zt(d,B),wn("invalid",d);break;case"option":I=B;break;case"select":d._wrapperState={wasMultiple:!!B.multiple},I=fe({},B,{value:void 0}),wn("invalid",d);break;case"textarea":Xt(d,B),I=An(d,B),wn("invalid",d);break;default:I=B}co(y,I),Z=I;for(L in Z)if(Z.hasOwnProperty(L)){var ae=Z[L];L==="style"?di(d,ae):L==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ae!=null&&Tn(d,ae)):L==="children"?typeof ae=="string"?(y!=="textarea"||ae!=="")&&ln(d,ae):typeof ae=="number"&&ln(d,""+ae):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(i.hasOwnProperty(L)?ae!=null&&L==="onScroll"&&wn("scroll",d):ae!=null&&_(d,L,ae,U))}switch(y){case"input":Bt(d),Rr(d,B,!1);break;case"textarea":Bt(d),pr(d);break;case"option":B.value!=null&&d.setAttribute("value",""+Te(B.value));break;case"select":d.multiple=!!B.multiple,L=B.value,L!=null?Hn(d,!!B.multiple,L,!1):B.defaultValue!=null&&Hn(d,!!B.multiple,B.defaultValue,!0);break;default:typeof I.onClick=="function"&&(d.onclick=jh)}switch(y){case"button":case"input":case"select":case"textarea":B=!!B.autoFocus;break e;case"img":B=!0;break e;default:B=!1}}B&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return ei(f),null;case 6:if(d&&f.stateNode!=null)MM(d,f,d.memoizedProps,B);else{if(typeof B!="string"&&f.stateNode===null)throw Error(t(166));if(y=MA(Tu.current),MA(As.current),Yh(f)){if(B=f.stateNode,y=f.memoizedProps,B[os]=f,(L=B.nodeValue!==y)&&(d=Wi,d!==null))switch(d.tag){case 3:zh(B.nodeValue,y,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&zh(B.nodeValue,y,(d.mode&1)!==0)}L&&(f.flags|=4)}else B=(y.nodeType===9?y:y.ownerDocument).createTextNode(B),B[os]=f,f.stateNode=B}return ei(f),null;case 13:if(bn(On),B=f.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(Mn&&$i!==null&&(f.mode&1)!==0&&(f.flags&128)===0)IT(),Kl(),f.flags|=98560,L=!1;else if(L=Yh(f),B!==null&&B.dehydrated!==null){if(d===null){if(!L)throw Error(t(318));if(L=f.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(t(317));L[os]=f}else Kl(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;ei(f),L=!1}else Na!==null&&(_y(Na),Na=null),L=!0;if(!L)return f.flags&65536?f:null}return(f.flags&128)!==0?(f.lanes=y,f):(B=B!==null,B!==(d!==null&&d.memoizedState!==null)&&B&&(f.child.flags|=8192,(f.mode&1)!==0&&(d===null||(On.current&1)!==0?wr===0&&(wr=3):By())),f.updateQueue!==null&&(f.flags|=4),ei(f),null);case 4:return Wl(),uy(d,f),d===null&&bu(f.stateNode.containerInfo),ei(f),null;case 10:return Q0(f.type._context),ei(f),null;case 17:return Si(f.type)&&Gh(),ei(f),null;case 19:if(bn(On),L=f.memoizedState,L===null)return ei(f),null;if(B=(f.flags&128)!==0,U=L.rendering,U===null)if(B)Pu(L,!1);else{if(wr!==0||d!==null&&(d.flags&128)!==0)for(d=f.child;d!==null;){if(U=nf(d),U!==null){for(f.flags|=128,Pu(L,!1),B=U.updateQueue,B!==null&&(f.updateQueue=B,f.flags|=4),f.subtreeFlags=0,B=y,y=f.child;y!==null;)L=y,d=B,L.flags&=14680066,U=L.alternate,U===null?(L.childLanes=0,L.lanes=d,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=U.childLanes,L.lanes=U.lanes,L.child=U.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=U.memoizedProps,L.memoizedState=U.memoizedState,L.updateQueue=U.updateQueue,L.type=U.type,d=U.dependencies,L.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),y=y.sibling;return pn(On,On.current&1|2),f.child}d=d.sibling}L.tail!==null&&Ve()>Zl&&(f.flags|=128,B=!0,Pu(L,!1),f.lanes=4194304)}else{if(!B)if(d=nf(U),d!==null){if(f.flags|=128,B=!0,y=d.updateQueue,y!==null&&(f.updateQueue=y,f.flags|=4),Pu(L,!0),L.tail===null&&L.tailMode==="hidden"&&!U.alternate&&!Mn)return ei(f),null}else 2*Ve()-L.renderingStartTime>Zl&&y!==1073741824&&(f.flags|=128,B=!0,Pu(L,!1),f.lanes=4194304);L.isBackwards?(U.sibling=f.child,f.child=U):(y=L.last,y!==null?y.sibling=U:f.child=U,L.last=U)}return L.tail!==null?(f=L.tail,L.rendering=f,L.tail=f.sibling,L.renderingStartTime=Ve(),f.sibling=null,y=On.current,pn(On,B?y&1|2:y&1),f):(ei(f),null);case 22:case 23:return Cy(),B=f.memoizedState!==null,d!==null&&d.memoizedState!==null!==B&&(f.flags|=8192),B&&(f.mode&1)!==0?(Yi&1073741824)!==0&&(ei(f),f.subtreeFlags&6&&(f.flags|=8192)):ei(f),null;case 24:return null;case 25:return null}throw Error(t(156,f.tag))}function Kz(d,f){switch(P0(f),f.tag){case 1:return Si(f.type)&&Gh(),d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 3:return Wl(),bn(xi),bn(Zr),V0(),d=f.flags,(d&65536)!==0&&(d&128)===0?(f.flags=d&-65537|128,f):null;case 5:return K0(f),null;case 13:if(bn(On),d=f.memoizedState,d!==null&&d.dehydrated!==null){if(f.alternate===null)throw Error(t(340));Kl()}return d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 19:return bn(On),null;case 4:return Wl(),null;case 10:return Q0(f.type._context),null;case 22:case 23:return Cy(),null;case 24:return null;default:return null}}var df=!1,ti=!1,Gz=typeof WeakSet=="function"?WeakSet:Set,et=null;function Yl(d,f){var y=d.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(B){zn(d,f,B)}else y.current=null}function dy(d,f,y){try{y()}catch(B){zn(d,f,B)}}var FM=!1;function Vz(d,f){if(C0=kh,d=AT(),p0(d)){if("selectionStart"in d)var y={start:d.selectionStart,end:d.selectionEnd};else e:{y=(y=d.ownerDocument)&&y.defaultView||window;var B=y.getSelection&&y.getSelection();if(B&&B.rangeCount!==0){y=B.anchorNode;var I=B.anchorOffset,L=B.focusNode;B=B.focusOffset;try{y.nodeType,L.nodeType}catch{y=null;break e}var U=0,Z=-1,ae=-1,ye=0,ke=0,Le=d,Fe=null;t:for(;;){for(var Xe;Le!==y||I!==0&&Le.nodeType!==3||(Z=U+I),Le!==L||B!==0&&Le.nodeType!==3||(ae=U+B),Le.nodeType===3&&(U+=Le.nodeValue.length),(Xe=Le.firstChild)!==null;)Fe=Le,Le=Xe;for(;;){if(Le===d)break t;if(Fe===y&&++ye===I&&(Z=U),Fe===L&&++ke===B&&(ae=U),(Xe=Le.nextSibling)!==null)break;Le=Fe,Fe=Le.parentNode}Le=Xe}y=Z===-1||ae===-1?null:{start:Z,end:ae}}else y=null}y=y||{start:0,end:0}}else y=null;for(B0={focusedElem:d,selectionRange:y},kh=!1,et=f;et!==null;)if(f=et,d=f.child,(f.subtreeFlags&1028)!==0&&d!==null)d.return=f,et=d;else for(;et!==null;){f=et;try{var nt=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(nt!==null){var rt=nt.memoizedProps,Yn=nt.memoizedState,ge=f.stateNode,Ae=ge.getSnapshotBeforeUpdate(f.elementType===f.type?rt:Da(f.type,rt),Yn);ge.__reactInternalSnapshotBeforeUpdate=Ae}break;case 3:var pe=f.stateNode.containerInfo;pe.nodeType===1?pe.textContent="":pe.nodeType===9&&pe.documentElement&&pe.removeChild(pe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Qe){zn(f,f.return,Qe)}if(d=f.sibling,d!==null){d.return=f.return,et=d;break}et=f.return}return nt=FM,FM=!1,nt}function Ou(d,f,y){var B=f.updateQueue;if(B=B!==null?B.lastEffect:null,B!==null){var I=B=B.next;do{if((I.tag&d)===d){var L=I.destroy;I.destroy=void 0,L!==void 0&&dy(f,y,L)}I=I.next}while(I!==B)}}function hf(d,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&d)===d){var B=y.create;y.destroy=B()}y=y.next}while(y!==f)}}function hy(d){var f=d.ref;if(f!==null){var y=d.stateNode;switch(d.tag){case 5:d=y;break;default:d=y}typeof f=="function"?f(d):f.current=d}}function kM(d){var f=d.alternate;f!==null&&(d.alternate=null,kM(f)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(f=d.stateNode,f!==null&&(delete f[os],delete f[Eu],delete f[M0],delete f[Tz],delete f[Mz])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function IM(d){return d.tag===5||d.tag===3||d.tag===4}function PM(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||IM(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function fy(d,f,y){var B=d.tag;if(B===5||B===6)d=d.stateNode,f?y.nodeType===8?y.parentNode.insertBefore(d,f):y.insertBefore(d,f):(y.nodeType===8?(f=y.parentNode,f.insertBefore(d,y)):(f=y,f.appendChild(d)),y=y._reactRootContainer,y!=null||f.onclick!==null||(f.onclick=jh));else if(B!==4&&(d=d.child,d!==null))for(fy(d,f,y),d=d.sibling;d!==null;)fy(d,f,y),d=d.sibling}function gy(d,f,y){var B=d.tag;if(B===5||B===6)d=d.stateNode,f?y.insertBefore(d,f):y.appendChild(d);else if(B!==4&&(d=d.child,d!==null))for(gy(d,f,y),d=d.sibling;d!==null;)gy(d,f,y),d=d.sibling}var Ur=null,Ra=!1;function xo(d,f,y){for(y=y.child;y!==null;)OM(d,f,y),y=y.sibling}function OM(d,f,y){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(Ut,y)}catch{}switch(y.tag){case 5:ti||Yl(y,f);case 6:var B=Ur,I=Ra;Ur=null,xo(d,f,y),Ur=B,Ra=I,Ur!==null&&(Ra?(d=Ur,y=y.stateNode,d.nodeType===8?d.parentNode.removeChild(y):d.removeChild(y)):Ur.removeChild(y.stateNode));break;case 18:Ur!==null&&(Ra?(d=Ur,y=y.stateNode,d.nodeType===8?T0(d.parentNode,y):d.nodeType===1&&T0(d,y),du(d)):T0(Ur,y.stateNode));break;case 4:B=Ur,I=Ra,Ur=y.stateNode.containerInfo,Ra=!0,xo(d,f,y),Ur=B,Ra=I;break;case 0:case 11:case 14:case 15:if(!ti&&(B=y.updateQueue,B!==null&&(B=B.lastEffect,B!==null))){I=B=B.next;do{var L=I,U=L.destroy;L=L.tag,U!==void 0&&((L&2)!==0||(L&4)!==0)&&dy(y,f,U),I=I.next}while(I!==B)}xo(d,f,y);break;case 1:if(!ti&&(Yl(y,f),B=y.stateNode,typeof B.componentWillUnmount=="function"))try{B.props=y.memoizedProps,B.state=y.memoizedState,B.componentWillUnmount()}catch(Z){zn(y,f,Z)}xo(d,f,y);break;case 21:xo(d,f,y);break;case 22:y.mode&1?(ti=(B=ti)||y.memoizedState!==null,xo(d,f,y),ti=B):xo(d,f,y);break;default:xo(d,f,y)}}function LM(d){var f=d.updateQueue;if(f!==null){d.updateQueue=null;var y=d.stateNode;y===null&&(y=d.stateNode=new Gz),f.forEach(function(B){var I=tj.bind(null,d,B);y.has(B)||(y.add(B),B.then(I,I))})}}function Qa(d,f){var y=f.deletions;if(y!==null)for(var B=0;B<y.length;B++){var I=y[B];try{var L=d,U=f,Z=U;e:for(;Z!==null;){switch(Z.tag){case 5:Ur=Z.stateNode,Ra=!1;break e;case 3:Ur=Z.stateNode.containerInfo,Ra=!0;break e;case 4:Ur=Z.stateNode.containerInfo,Ra=!0;break e}Z=Z.return}if(Ur===null)throw Error(t(160));OM(L,U,I),Ur=null,Ra=!1;var ae=I.alternate;ae!==null&&(ae.return=null),I.return=null}catch(ye){zn(I,f,ye)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)NM(f,d),f=f.sibling}function NM(d,f){var y=d.alternate,B=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(Qa(f,d),cs(d),B&4){try{Ou(3,d,d.return),hf(3,d)}catch(rt){zn(d,d.return,rt)}try{Ou(5,d,d.return)}catch(rt){zn(d,d.return,rt)}}break;case 1:Qa(f,d),cs(d),B&512&&y!==null&&Yl(y,y.return);break;case 5:if(Qa(f,d),cs(d),B&512&&y!==null&&Yl(y,y.return),d.flags&32){var I=d.stateNode;try{ln(I,"")}catch(rt){zn(d,d.return,rt)}}if(B&4&&(I=d.stateNode,I!=null)){var L=d.memoizedProps,U=y!==null?y.memoizedProps:L,Z=d.type,ae=d.updateQueue;if(d.updateQueue=null,ae!==null)try{Z==="input"&&L.type==="radio"&&L.name!=null&&Qt(I,L),wA(Z,U);var ye=wA(Z,L);for(U=0;U<ae.length;U+=2){var ke=ae[U],Le=ae[U+1];ke==="style"?di(I,Le):ke==="dangerouslySetInnerHTML"?Tn(I,Le):ke==="children"?ln(I,Le):_(I,ke,Le,ye)}switch(Z){case"input":Ct(I,L);break;case"textarea":ir(I,L);break;case"select":var Fe=I._wrapperState.wasMultiple;I._wrapperState.wasMultiple=!!L.multiple;var Xe=L.value;Xe!=null?Hn(I,!!L.multiple,Xe,!1):Fe!==!!L.multiple&&(L.defaultValue!=null?Hn(I,!!L.multiple,L.defaultValue,!0):Hn(I,!!L.multiple,L.multiple?[]:"",!1))}I[Eu]=L}catch(rt){zn(d,d.return,rt)}}break;case 6:if(Qa(f,d),cs(d),B&4){if(d.stateNode===null)throw Error(t(162));I=d.stateNode,L=d.memoizedProps;try{I.nodeValue=L}catch(rt){zn(d,d.return,rt)}}break;case 3:if(Qa(f,d),cs(d),B&4&&y!==null&&y.memoizedState.isDehydrated)try{du(f.containerInfo)}catch(rt){zn(d,d.return,rt)}break;case 4:Qa(f,d),cs(d);break;case 13:Qa(f,d),cs(d),I=d.child,I.flags&8192&&(L=I.memoizedState!==null,I.stateNode.isHidden=L,!L||I.alternate!==null&&I.alternate.memoizedState!==null||(my=Ve())),B&4&&LM(d);break;case 22:if(ke=y!==null&&y.memoizedState!==null,d.mode&1?(ti=(ye=ti)||ke,Qa(f,d),ti=ye):Qa(f,d),cs(d),B&8192){if(ye=d.memoizedState!==null,(d.stateNode.isHidden=ye)&&!ke&&(d.mode&1)!==0)for(et=d,ke=d.child;ke!==null;){for(Le=et=ke;et!==null;){switch(Fe=et,Xe=Fe.child,Fe.tag){case 0:case 11:case 14:case 15:Ou(4,Fe,Fe.return);break;case 1:Yl(Fe,Fe.return);var nt=Fe.stateNode;if(typeof nt.componentWillUnmount=="function"){B=Fe,y=Fe.return;try{f=B,nt.props=f.memoizedProps,nt.state=f.memoizedState,nt.componentWillUnmount()}catch(rt){zn(B,y,rt)}}break;case 5:Yl(Fe,Fe.return);break;case 22:if(Fe.memoizedState!==null){QM(Le);continue}}Xe!==null?(Xe.return=Fe,et=Xe):QM(Le)}ke=ke.sibling}e:for(ke=null,Le=d;;){if(Le.tag===5){if(ke===null){ke=Le;try{I=Le.stateNode,ye?(L=I.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none"):(Z=Le.stateNode,ae=Le.memoizedProps.style,U=ae!=null&&ae.hasOwnProperty("display")?ae.display:null,Z.style.display=Xr("display",U))}catch(rt){zn(d,d.return,rt)}}}else if(Le.tag===6){if(ke===null)try{Le.stateNode.nodeValue=ye?"":Le.memoizedProps}catch(rt){zn(d,d.return,rt)}}else if((Le.tag!==22&&Le.tag!==23||Le.memoizedState===null||Le===d)&&Le.child!==null){Le.child.return=Le,Le=Le.child;continue}if(Le===d)break e;for(;Le.sibling===null;){if(Le.return===null||Le.return===d)break e;ke===Le&&(ke=null),Le=Le.return}ke===Le&&(ke=null),Le.sibling.return=Le.return,Le=Le.sibling}}break;case 19:Qa(f,d),cs(d),B&4&&LM(d);break;case 21:break;default:Qa(f,d),cs(d)}}function cs(d){var f=d.flags;if(f&2){try{e:{for(var y=d.return;y!==null;){if(IM(y)){var B=y;break e}y=y.return}throw Error(t(160))}switch(B.tag){case 5:var I=B.stateNode;B.flags&32&&(ln(I,""),B.flags&=-33);var L=PM(d);gy(d,L,I);break;case 3:case 4:var U=B.stateNode.containerInfo,Z=PM(d);fy(d,Z,U);break;default:throw Error(t(161))}}catch(ae){zn(d,d.return,ae)}d.flags&=-3}f&4096&&(d.flags&=-4097)}function qz(d,f,y){et=d,DM(d)}function DM(d,f,y){for(var B=(d.mode&1)!==0;et!==null;){var I=et,L=I.child;if(I.tag===22&&B){var U=I.memoizedState!==null||df;if(!U){var Z=I.alternate,ae=Z!==null&&Z.memoizedState!==null||ti;Z=df;var ye=ti;if(df=U,(ti=ae)&&!ye)for(et=I;et!==null;)U=et,ae=U.child,U.tag===22&&U.memoizedState!==null?UM(I):ae!==null?(ae.return=U,et=ae):UM(I);for(;L!==null;)et=L,DM(L),L=L.sibling;et=I,df=Z,ti=ye}RM(d)}else(I.subtreeFlags&8772)!==0&&L!==null?(L.return=I,et=L):RM(d)}}function RM(d){for(;et!==null;){var f=et;if((f.flags&8772)!==0){var y=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:ti||hf(5,f);break;case 1:var B=f.stateNode;if(f.flags&4&&!ti)if(y===null)B.componentDidMount();else{var I=f.elementType===f.type?y.memoizedProps:Da(f.type,y.memoizedProps);B.componentDidUpdate(I,y.memoizedState,B.__reactInternalSnapshotBeforeUpdate)}var L=f.updateQueue;L!==null&&QT(f,L,B);break;case 3:var U=f.updateQueue;if(U!==null){if(y=null,f.child!==null)switch(f.child.tag){case 5:y=f.child.stateNode;break;case 1:y=f.child.stateNode}QT(f,U,y)}break;case 5:var Z=f.stateNode;if(y===null&&f.flags&4){y=Z;var ae=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":ae.autoFocus&&y.focus();break;case"img":ae.src&&(y.src=ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var ye=f.alternate;if(ye!==null){var ke=ye.memoizedState;if(ke!==null){var Le=ke.dehydrated;Le!==null&&du(Le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ti||f.flags&512&&hy(f)}catch(Fe){zn(f,f.return,Fe)}}if(f===d){et=null;break}if(y=f.sibling,y!==null){y.return=f.return,et=y;break}et=f.return}}function QM(d){for(;et!==null;){var f=et;if(f===d){et=null;break}var y=f.sibling;if(y!==null){y.return=f.return,et=y;break}et=f.return}}function UM(d){for(;et!==null;){var f=et;try{switch(f.tag){case 0:case 11:case 15:var y=f.return;try{hf(4,f)}catch(ae){zn(f,y,ae)}break;case 1:var B=f.stateNode;if(typeof B.componentDidMount=="function"){var I=f.return;try{B.componentDidMount()}catch(ae){zn(f,I,ae)}}var L=f.return;try{hy(f)}catch(ae){zn(f,L,ae)}break;case 5:var U=f.return;try{hy(f)}catch(ae){zn(f,U,ae)}}}catch(ae){zn(f,f.return,ae)}if(f===d){et=null;break}var Z=f.sibling;if(Z!==null){Z.return=f.return,et=Z;break}et=f.return}}var Wz=Math.ceil,ff=C.ReactCurrentDispatcher,py=C.ReactCurrentOwner,ga=C.ReactCurrentBatchConfig,jt=0,Fr=null,ar=null,Hr=0,Yi=0,Xl=bo(0),wr=0,Lu=null,kA=0,gf=0,vy=0,Nu=null,Mi=null,my=0,Zl=1/0,js=null,pf=!1,yy=null,So=null,vf=!1,To=null,mf=0,Du=0,wy=null,yf=-1,wf=0;function gi(){return(jt&6)!==0?Ve():yf!==-1?yf:yf=Ve()}function Mo(d){return(d.mode&1)===0?1:(jt&2)!==0&&Hr!==0?Hr&-Hr:kz.transition!==null?(wf===0&&(wf=xh()),wf):(d=Vt,d!==0||(d=window.event,d=d===void 0?16:zS(d.type)),d)}function Ua(d,f,y,B){if(50<Du)throw Du=0,wy=null,Error(t(185));EA(d,y,B),((jt&2)===0||d!==Fr)&&(d===Fr&&((jt&2)===0&&(gf|=y),wr===4&&Fo(d,Hr)),Fi(d,B),y===1&&jt===0&&(f.mode&1)===0&&(Zl=Ve()+500,qh&&Eo()))}function Fi(d,f){var y=d.callbackNode;$n(d,f);var B=Tr(d,d===Fr?Hr:0);if(B===0)y!==null&&ht(y),d.callbackNode=null,d.callbackPriority=0;else if(f=B&-B,d.callbackPriority!==f){if(y!=null&&ht(y),f===1)d.tag===0?Fz(zM.bind(null,d)):ST(zM.bind(null,d)),xz(function(){(jt&6)===0&&Eo()}),y=null;else{switch(Sh(B)){case 1:y=oe;break;case 4:y=Me;break;case 16:y=ze;break;case 536870912:y=cn;break;default:y=ze}y=YM(y,HM.bind(null,d))}d.callbackPriority=f,d.callbackNode=y}}function HM(d,f){if(yf=-1,wf=0,(jt&6)!==0)throw Error(t(327));var y=d.callbackNode;if(Jl()&&d.callbackNode!==y)return null;var B=Tr(d,d===Fr?Hr:0);if(B===0)return null;if((B&30)!==0||(B&d.expiredLanes)!==0||f)f=bf(d,B);else{f=B;var I=jt;jt|=2;var L=KM();(Fr!==d||Hr!==f)&&(js=null,Zl=Ve()+500,PA(d,f));do try{Xz();break}catch(Z){jM(d,Z)}while(!0);R0(),ff.current=L,jt=I,ar!==null?f=0:(Fr=null,Hr=0,f=wr)}if(f!==0){if(f===2&&(I=au(d),I!==0&&(B=I,f=by(d,I))),f===1)throw y=Lu,PA(d,0),Fo(d,B),Fi(d,Ve()),y;if(f===6)Fo(d,B);else{if(I=d.current.alternate,(B&30)===0&&!$z(I)&&(f=bf(d,B),f===2&&(L=au(d),L!==0&&(B=L,f=by(d,L))),f===1))throw y=Lu,PA(d,0),Fo(d,B),Fi(d,Ve()),y;switch(d.finishedWork=I,d.finishedLanes=B,f){case 0:case 1:throw Error(t(345));case 2:OA(d,Mi,js);break;case 3:if(Fo(d,B),(B&130023424)===B&&(f=my+500-Ve(),10<f)){if(Tr(d,0)!==0)break;if(I=d.suspendedLanes,(I&B)!==B){gi(),d.pingedLanes|=d.suspendedLanes&I;break}d.timeoutHandle=S0(OA.bind(null,d,Mi,js),f);break}OA(d,Mi,js);break;case 4:if(Fo(d,B),(B&4194240)===B)break;for(f=d.eventTimes,I=-1;0<B;){var U=31-Jt(B);L=1<<U,U=f[U],U>I&&(I=U),B&=~L}if(B=I,B=Ve()-B,B=(120>B?120:480>B?480:1080>B?1080:1920>B?1920:3e3>B?3e3:4320>B?4320:1960*Wz(B/1960))-B,10<B){d.timeoutHandle=S0(OA.bind(null,d,Mi,js),B);break}OA(d,Mi,js);break;case 5:OA(d,Mi,js);break;default:throw Error(t(329))}}}return Fi(d,Ve()),d.callbackNode===y?HM.bind(null,d):null}function by(d,f){var y=Nu;return d.current.memoizedState.isDehydrated&&(PA(d,f).flags|=256),d=bf(d,f),d!==2&&(f=Mi,Mi=y,f!==null&&_y(f)),d}function _y(d){Mi===null?Mi=d:Mi.push.apply(Mi,d)}function $z(d){for(var f=d;;){if(f.flags&16384){var y=f.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var B=0;B<y.length;B++){var I=y[B],L=I.getSnapshot;I=I.value;try{if(!La(L(),I))return!1}catch{return!1}}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Fo(d,f){for(f&=~vy,f&=~gf,d.suspendedLanes|=f,d.pingedLanes&=~f,d=d.expirationTimes;0<f;){var y=31-Jt(f),B=1<<y;d[y]=-1,f&=~B}}function zM(d){if((jt&6)!==0)throw Error(t(327));Jl();var f=Tr(d,0);if((f&1)===0)return Fi(d,Ve()),null;var y=bf(d,f);if(d.tag!==0&&y===2){var B=au(d);B!==0&&(f=B,y=by(d,B))}if(y===1)throw y=Lu,PA(d,0),Fo(d,f),Fi(d,Ve()),y;if(y===6)throw Error(t(345));return d.finishedWork=d.current.alternate,d.finishedLanes=f,OA(d,Mi,js),Fi(d,Ve()),null}function Ey(d,f){var y=jt;jt|=1;try{return d(f)}finally{jt=y,jt===0&&(Zl=Ve()+500,qh&&Eo())}}function IA(d){To!==null&&To.tag===0&&(jt&6)===0&&Jl();var f=jt;jt|=1;var y=ga.transition,B=Vt;try{if(ga.transition=null,Vt=1,d)return d()}finally{Vt=B,ga.transition=y,jt=f,(jt&6)===0&&Eo()}}function Cy(){Yi=Xl.current,bn(Xl)}function PA(d,f){d.finishedWork=null,d.finishedLanes=0;var y=d.timeoutHandle;if(y!==-1&&(d.timeoutHandle=-1,Bz(y)),ar!==null)for(y=ar.return;y!==null;){var B=y;switch(P0(B),B.tag){case 1:B=B.type.childContextTypes,B!=null&&Gh();break;case 3:Wl(),bn(xi),bn(Zr),V0();break;case 5:K0(B);break;case 4:Wl();break;case 13:bn(On);break;case 19:bn(On);break;case 10:Q0(B.type._context);break;case 22:case 23:Cy()}y=y.return}if(Fr=d,ar=d=ko(d.current,null),Hr=Yi=f,wr=0,Lu=null,vy=gf=kA=0,Mi=Nu=null,TA!==null){for(f=0;f<TA.length;f++)if(y=TA[f],B=y.interleaved,B!==null){y.interleaved=null;var I=B.next,L=y.pending;if(L!==null){var U=L.next;L.next=I,B.next=U}y.pending=B}TA=null}return d}function jM(d,f){do{var y=ar;try{if(R0(),rf.current=Af,af){for(var B=Ln.memoizedState;B!==null;){var I=B.queue;I!==null&&(I.pending=null),B=B.next}af=!1}if(FA=0,Mr=yr=Ln=null,Mu=!1,Fu=0,py.current=null,y===null||y.return===null){wr=1,Lu=f,ar=null;break}e:{var L=d,U=y.return,Z=y,ae=f;if(f=Hr,Z.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var ye=ae,ke=Z,Le=ke.tag;if((ke.mode&1)===0&&(Le===0||Le===11||Le===15)){var Fe=ke.alternate;Fe?(ke.updateQueue=Fe.updateQueue,ke.memoizedState=Fe.memoizedState,ke.lanes=Fe.lanes):(ke.updateQueue=null,ke.memoizedState=null)}var Xe=fM(U);if(Xe!==null){Xe.flags&=-257,gM(Xe,U,Z,L,f),Xe.mode&1&&hM(L,ye,f),f=Xe,ae=ye;var nt=f.updateQueue;if(nt===null){var rt=new Set;rt.add(ae),f.updateQueue=rt}else nt.add(ae);break e}else{if((f&1)===0){hM(L,ye,f),By();break e}ae=Error(t(426))}}else if(Mn&&Z.mode&1){var Yn=fM(U);if(Yn!==null){(Yn.flags&65536)===0&&(Yn.flags|=256),gM(Yn,U,Z,L,f),N0($l(ae,Z));break e}}L=ae=$l(ae,Z),wr!==4&&(wr=2),Nu===null?Nu=[L]:Nu.push(L),L=U;do{switch(L.tag){case 3:L.flags|=65536,f&=-f,L.lanes|=f;var ge=uM(L,ae,f);RT(L,ge);break e;case 1:Z=ae;var Ae=L.type,pe=L.stateNode;if((L.flags&128)===0&&(typeof Ae.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(So===null||!So.has(pe)))){L.flags|=65536,f&=-f,L.lanes|=f;var Qe=dM(L,Z,f);RT(L,Qe);break e}}L=L.return}while(L!==null)}VM(y)}catch(at){f=at,ar===y&&y!==null&&(ar=y=y.return);continue}break}while(!0)}function KM(){var d=ff.current;return ff.current=Af,d===null?Af:d}function By(){(wr===0||wr===3||wr===2)&&(wr=4),Fr===null||(kA&268435455)===0&&(gf&268435455)===0||Fo(Fr,Hr)}function bf(d,f){var y=jt;jt|=2;var B=KM();(Fr!==d||Hr!==f)&&(js=null,PA(d,f));do try{Yz();break}catch(I){jM(d,I)}while(!0);if(R0(),jt=y,ff.current=B,ar!==null)throw Error(t(261));return Fr=null,Hr=0,wr}function Yz(){for(;ar!==null;)GM(ar)}function Xz(){for(;ar!==null&&!fn();)GM(ar)}function GM(d){var f=$M(d.alternate,d,Yi);d.memoizedProps=d.pendingProps,f===null?VM(d):ar=f,py.current=null}function VM(d){var f=d;do{var y=f.alternate;if(d=f.return,(f.flags&32768)===0){if(y=jz(y,f,Yi),y!==null){ar=y;return}}else{if(y=Kz(y,f),y!==null){y.flags&=32767,ar=y;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{wr=6,ar=null;return}}if(f=f.sibling,f!==null){ar=f;return}ar=f=d}while(f!==null);wr===0&&(wr=5)}function OA(d,f,y){var B=Vt,I=ga.transition;try{ga.transition=null,Vt=1,Zz(d,f,y,B)}finally{ga.transition=I,Vt=B}return null}function Zz(d,f,y,B){do Jl();while(To!==null);if((jt&6)!==0)throw Error(t(327));y=d.finishedWork;var I=d.finishedLanes;if(y===null)return null;if(d.finishedWork=null,d.finishedLanes=0,y===d.current)throw Error(t(177));d.callbackNode=null,d.callbackPriority=0;var L=y.lanes|y.childLanes;if(n0(d,L),d===Fr&&(ar=Fr=null,Hr=0),(y.subtreeFlags&2064)===0&&(y.flags&2064)===0||vf||(vf=!0,YM(ze,function(){return Jl(),null})),L=(y.flags&15990)!==0,(y.subtreeFlags&15990)!==0||L){L=ga.transition,ga.transition=null;var U=Vt;Vt=1;var Z=jt;jt|=4,py.current=null,Vz(d,y),NM(y,d),mz(B0),kh=!!C0,B0=C0=null,d.current=y,qz(y),st(),jt=Z,Vt=U,ga.transition=L}else d.current=y;if(vf&&(vf=!1,To=d,mf=I),L=d.pendingLanes,L===0&&(So=null),gn(y.stateNode),Fi(d,Ve()),f!==null)for(B=d.onRecoverableError,y=0;y<f.length;y++)I=f[y],B(I.value,{componentStack:I.stack,digest:I.digest});if(pf)throw pf=!1,d=yy,yy=null,d;return(mf&1)!==0&&d.tag!==0&&Jl(),L=d.pendingLanes,(L&1)!==0?d===wy?Du++:(Du=0,wy=d):Du=0,Eo(),null}function Jl(){if(To!==null){var d=Sh(mf),f=ga.transition,y=Vt;try{if(ga.transition=null,Vt=16>d?16:d,To===null)var B=!1;else{if(d=To,To=null,mf=0,(jt&6)!==0)throw Error(t(331));var I=jt;for(jt|=4,et=d.current;et!==null;){var L=et,U=L.child;if((et.flags&16)!==0){var Z=L.deletions;if(Z!==null){for(var ae=0;ae<Z.length;ae++){var ye=Z[ae];for(et=ye;et!==null;){var ke=et;switch(ke.tag){case 0:case 11:case 15:Ou(8,ke,L)}var Le=ke.child;if(Le!==null)Le.return=ke,et=Le;else for(;et!==null;){ke=et;var Fe=ke.sibling,Xe=ke.return;if(kM(ke),ke===ye){et=null;break}if(Fe!==null){Fe.return=Xe,et=Fe;break}et=Xe}}}var nt=L.alternate;if(nt!==null){var rt=nt.child;if(rt!==null){nt.child=null;do{var Yn=rt.sibling;rt.sibling=null,rt=Yn}while(rt!==null)}}et=L}}if((L.subtreeFlags&2064)!==0&&U!==null)U.return=L,et=U;else e:for(;et!==null;){if(L=et,(L.flags&2048)!==0)switch(L.tag){case 0:case 11:case 15:Ou(9,L,L.return)}var ge=L.sibling;if(ge!==null){ge.return=L.return,et=ge;break e}et=L.return}}var Ae=d.current;for(et=Ae;et!==null;){U=et;var pe=U.child;if((U.subtreeFlags&2064)!==0&&pe!==null)pe.return=U,et=pe;else e:for(U=Ae;et!==null;){if(Z=et,(Z.flags&2048)!==0)try{switch(Z.tag){case 0:case 11:case 15:hf(9,Z)}}catch(at){zn(Z,Z.return,at)}if(Z===U){et=null;break e}var Qe=Z.sibling;if(Qe!==null){Qe.return=Z.return,et=Qe;break e}et=Z.return}}if(jt=I,Eo(),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(Ut,d)}catch{}B=!0}return B}finally{Vt=y,ga.transition=f}}return!1}function qM(d,f,y){f=$l(y,f),f=uM(d,f,1),d=Bo(d,f,1),f=gi(),d!==null&&(EA(d,1,f),Fi(d,f))}function zn(d,f,y){if(d.tag===3)qM(d,d,y);else for(;f!==null;){if(f.tag===3){qM(f,d,y);break}else if(f.tag===1){var B=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof B.componentDidCatch=="function"&&(So===null||!So.has(B))){d=$l(y,d),d=dM(f,d,1),f=Bo(f,d,1),d=gi(),f!==null&&(EA(f,1,d),Fi(f,d));break}}f=f.return}}function Jz(d,f,y){var B=d.pingCache;B!==null&&B.delete(f),f=gi(),d.pingedLanes|=d.suspendedLanes&y,Fr===d&&(Hr&y)===y&&(wr===4||wr===3&&(Hr&130023424)===Hr&&500>Ve()-my?PA(d,0):vy|=y),Fi(d,f)}function WM(d,f){f===0&&((d.mode&1)===0?f=1:(f=Tt,Tt<<=1,(Tt&130023424)===0&&(Tt=4194304)));var y=gi();d=Us(d,f),d!==null&&(EA(d,f,y),Fi(d,y))}function ej(d){var f=d.memoizedState,y=0;f!==null&&(y=f.retryLane),WM(d,y)}function tj(d,f){var y=0;switch(d.tag){case 13:var B=d.stateNode,I=d.memoizedState;I!==null&&(y=I.retryLane);break;case 19:B=d.stateNode;break;default:throw Error(t(314))}B!==null&&B.delete(f),WM(d,y)}var $M;$M=function(d,f,y){if(d!==null)if(d.memoizedProps!==f.pendingProps||xi.current)Ti=!0;else{if((d.lanes&y)===0&&(f.flags&128)===0)return Ti=!1,zz(d,f,y);Ti=(d.flags&131072)!==0}else Ti=!1,Mn&&(f.flags&1048576)!==0&&TT(f,$h,f.index);switch(f.lanes=0,f.tag){case 2:var B=f.type;uf(d,f),d=f.pendingProps;var I=Hl(f,Zr.current);ql(f,y),I=$0(null,f,B,d,I,y);var L=Y0();return f.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Si(B)?(L=!0,Vh(f)):L=!1,f.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,z0(f),I.updater=lf,f.stateNode=I,I._reactInternals=f,ny(f,B,d,y),f=sy(null,f,B,!0,L,y)):(f.tag=0,Mn&&L&&I0(f),fi(null,f,I,y),f=f.child),f;case 16:B=f.elementType;e:{switch(uf(d,f),d=f.pendingProps,I=B._init,B=I(B._payload),f.type=B,I=f.tag=rj(B),d=Da(B,d),I){case 0:f=ay(null,f,B,d,y);break e;case 1:f=bM(null,f,B,d,y);break e;case 11:f=pM(null,f,B,d,y);break e;case 14:f=vM(null,f,B,Da(B.type,d),y);break e}throw Error(t(306,B,""))}return f;case 0:return B=f.type,I=f.pendingProps,I=f.elementType===B?I:Da(B,I),ay(d,f,B,I,y);case 1:return B=f.type,I=f.pendingProps,I=f.elementType===B?I:Da(B,I),bM(d,f,B,I,y);case 3:e:{if(_M(f),d===null)throw Error(t(387));B=f.pendingProps,L=f.memoizedState,I=L.element,DT(d,f),tf(f,B,null,y);var U=f.memoizedState;if(B=U.element,L.isDehydrated)if(L={element:B,isDehydrated:!1,cache:U.cache,pendingSuspenseBoundaries:U.pendingSuspenseBoundaries,transitions:U.transitions},f.updateQueue.baseState=L,f.memoizedState=L,f.flags&256){I=$l(Error(t(423)),f),f=EM(d,f,B,y,I);break e}else if(B!==I){I=$l(Error(t(424)),f),f=EM(d,f,B,y,I);break e}else for($i=wo(f.stateNode.containerInfo.firstChild),Wi=f,Mn=!0,Na=null,y=LT(f,null,B,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Kl(),B===I){f=zs(d,f,y);break e}fi(d,f,B,y)}f=f.child}return f;case 5:return UT(f),d===null&&L0(f),B=f.type,I=f.pendingProps,L=d!==null?d.memoizedProps:null,U=I.children,x0(B,I)?U=null:L!==null&&x0(B,L)&&(f.flags|=32),wM(d,f),fi(d,f,U,y),f.child;case 6:return d===null&&L0(f),null;case 13:return CM(d,f,y);case 4:return j0(f,f.stateNode.containerInfo),B=f.pendingProps,d===null?f.child=Gl(f,null,B,y):fi(d,f,B,y),f.child;case 11:return B=f.type,I=f.pendingProps,I=f.elementType===B?I:Da(B,I),pM(d,f,B,I,y);case 7:return fi(d,f,f.pendingProps,y),f.child;case 8:return fi(d,f,f.pendingProps.children,y),f.child;case 12:return fi(d,f,f.pendingProps.children,y),f.child;case 10:e:{if(B=f.type._context,I=f.pendingProps,L=f.memoizedProps,U=I.value,pn(Zh,B._currentValue),B._currentValue=U,L!==null)if(La(L.value,U)){if(L.children===I.children&&!xi.current){f=zs(d,f,y);break e}}else for(L=f.child,L!==null&&(L.return=f);L!==null;){var Z=L.dependencies;if(Z!==null){U=L.child;for(var ae=Z.firstContext;ae!==null;){if(ae.context===B){if(L.tag===1){ae=Hs(-1,y&-y),ae.tag=2;var ye=L.updateQueue;if(ye!==null){ye=ye.shared;var ke=ye.pending;ke===null?ae.next=ae:(ae.next=ke.next,ke.next=ae),ye.pending=ae}}L.lanes|=y,ae=L.alternate,ae!==null&&(ae.lanes|=y),U0(L.return,y,f),Z.lanes|=y;break}ae=ae.next}}else if(L.tag===10)U=L.type===f.type?null:L.child;else if(L.tag===18){if(U=L.return,U===null)throw Error(t(341));U.lanes|=y,Z=U.alternate,Z!==null&&(Z.lanes|=y),U0(U,y,f),U=L.sibling}else U=L.child;if(U!==null)U.return=L;else for(U=L;U!==null;){if(U===f){U=null;break}if(L=U.sibling,L!==null){L.return=U.return,U=L;break}U=U.return}L=U}fi(d,f,I.children,y),f=f.child}return f;case 9:return I=f.type,B=f.pendingProps.children,ql(f,y),I=ha(I),B=B(I),f.flags|=1,fi(d,f,B,y),f.child;case 14:return B=f.type,I=Da(B,f.pendingProps),I=Da(B.type,I),vM(d,f,B,I,y);case 15:return mM(d,f,f.type,f.pendingProps,y);case 17:return B=f.type,I=f.pendingProps,I=f.elementType===B?I:Da(B,I),uf(d,f),f.tag=1,Si(B)?(d=!0,Vh(f)):d=!1,ql(f,y),lM(f,B,I),ny(f,B,I,y),sy(null,f,B,!0,d,y);case 19:return xM(d,f,y);case 22:return yM(d,f,y)}throw Error(t(156,f.tag))};function YM(d,f){return ct(d,f)}function nj(d,f,y,B){this.tag=d,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pa(d,f,y,B){return new nj(d,f,y,B)}function xy(d){return d=d.prototype,!(!d||!d.isReactComponent)}function rj(d){if(typeof d=="function")return xy(d)?1:0;if(d!=null){if(d=d.$$typeof,d===H)return 11;if(d===J)return 14}return 2}function ko(d,f){var y=d.alternate;return y===null?(y=pa(d.tag,f,d.key,d.mode),y.elementType=d.elementType,y.type=d.type,y.stateNode=d.stateNode,y.alternate=d,d.alternate=y):(y.pendingProps=f,y.type=d.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=d.flags&14680064,y.childLanes=d.childLanes,y.lanes=d.lanes,y.child=d.child,y.memoizedProps=d.memoizedProps,y.memoizedState=d.memoizedState,y.updateQueue=d.updateQueue,f=d.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=d.sibling,y.index=d.index,y.ref=d.ref,y}function _f(d,f,y,B,I,L){var U=2;if(B=d,typeof d=="function")xy(d)&&(U=1);else if(typeof d=="string")U=5;else e:switch(d){case k:return LA(y.children,I,L,f);case P:U=8,I|=8;break;case N:return d=pa(12,y,f,I|2),d.elementType=N,d.lanes=L,d;case j:return d=pa(13,y,f,I),d.elementType=j,d.lanes=L,d;case q:return d=pa(19,y,f,I),d.elementType=q,d.lanes=L,d;case se:return Ef(y,I,L,f);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case D:U=10;break e;case Q:U=9;break e;case H:U=11;break e;case J:U=14;break e;case ce:U=16,B=null;break e}throw Error(t(130,d==null?d:typeof d,""))}return f=pa(U,y,f,I),f.elementType=d,f.type=B,f.lanes=L,f}function LA(d,f,y,B){return d=pa(7,d,B,f),d.lanes=y,d}function Ef(d,f,y,B){return d=pa(22,d,B,f),d.elementType=se,d.lanes=y,d.stateNode={isHidden:!1},d}function Sy(d,f,y){return d=pa(6,d,null,f),d.lanes=y,d}function Ty(d,f,y){return f=pa(4,d.children!==null?d.children:[],d.key,f),f.lanes=y,f.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},f}function ij(d,f,y,B,I){this.tag=f,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=su(0),this.expirationTimes=su(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=su(0),this.identifierPrefix=B,this.onRecoverableError=I,this.mutableSourceEagerHydrationData=null}function My(d,f,y,B,I,L,U,Z,ae){return d=new ij(d,f,y,Z,ae),f===1?(f=1,L===!0&&(f|=8)):f=0,L=pa(3,null,null,f),d.current=L,L.stateNode=d,L.memoizedState={element:B,isDehydrated:y,cache:null,transitions:null,pendingSuspenseBoundaries:null},z0(L),d}function aj(d,f,y){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:B==null?null:""+B,children:d,containerInfo:f,implementation:y}}function XM(d){if(!d)return _o;d=d._reactInternals;e:{if(ve(d)!==d||d.tag!==1)throw Error(t(170));var f=d;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Si(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(t(171))}if(d.tag===1){var y=d.type;if(Si(y))return BT(d,y,f)}return f}function ZM(d,f,y,B,I,L,U,Z,ae){return d=My(y,B,!0,d,I,L,U,Z,ae),d.context=XM(null),y=d.current,B=gi(),I=Mo(y),L=Hs(B,I),L.callback=f??null,Bo(y,L,I),d.current.lanes=I,EA(d,I,B),Fi(d,B),d}function Cf(d,f,y,B){var I=f.current,L=gi(),U=Mo(I);return y=XM(y),f.context===null?f.context=y:f.pendingContext=y,f=Hs(L,U),f.payload={element:d},B=B===void 0?null:B,B!==null&&(f.callback=B),d=Bo(I,f,U),d!==null&&(Ua(d,I,U,L),ef(d,I,U)),U}function Bf(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function JM(d,f){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var y=d.retryLane;d.retryLane=y!==0&&y<f?y:f}}function Fy(d,f){JM(d,f),(d=d.alternate)&&JM(d,f)}function sj(){return null}var eF=typeof reportError=="function"?reportError:function(d){console.error(d)};function ky(d){this._internalRoot=d}xf.prototype.render=ky.prototype.render=function(d){var f=this._internalRoot;if(f===null)throw Error(t(409));Cf(d,f,null,null)},xf.prototype.unmount=ky.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var f=d.containerInfo;IA(function(){Cf(null,d,null,null)}),f[Ns]=null}};function xf(d){this._internalRoot=d}xf.prototype.unstable_scheduleHydration=function(d){if(d){var f=DS();d={blockedOn:null,target:d,priority:f};for(var y=0;y<vo.length&&f!==0&&f<vo[y].priority;y++);vo.splice(y,0,d),y===0&&US(d)}};function Iy(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function Sf(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function tF(){}function oj(d,f,y,B,I){if(I){if(typeof B=="function"){var L=B;B=function(){var ye=Bf(U);L.call(ye)}}var U=ZM(f,B,d,0,null,!1,!1,"",tF);return d._reactRootContainer=U,d[Ns]=U.current,bu(d.nodeType===8?d.parentNode:d),IA(),U}for(;I=d.lastChild;)d.removeChild(I);if(typeof B=="function"){var Z=B;B=function(){var ye=Bf(ae);Z.call(ye)}}var ae=My(d,0,!1,null,null,!1,!1,"",tF);return d._reactRootContainer=ae,d[Ns]=ae.current,bu(d.nodeType===8?d.parentNode:d),IA(function(){Cf(f,ae,y,B)}),ae}function Tf(d,f,y,B,I){var L=y._reactRootContainer;if(L){var U=L;if(typeof I=="function"){var Z=I;I=function(){var ae=Bf(U);Z.call(ae)}}Cf(f,U,d,I)}else U=oj(y,f,d,I,B);return Bf(U)}Th=function(d){switch(d.tag){case 3:var f=d.stateNode;if(f.current.memoizedState.isDehydrated){var y=Pn(f.pendingLanes);y!==0&&(ou(f,y|1),Fi(f,Ve()),(jt&6)===0&&(Zl=Ve()+500,Eo()))}break;case 13:IA(function(){var B=Us(d,1);if(B!==null){var I=gi();Ua(B,d,1,I)}}),Fy(d,1)}},r0=function(d){if(d.tag===13){var f=Us(d,134217728);if(f!==null){var y=gi();Ua(f,d,134217728,y)}Fy(d,134217728)}},NS=function(d){if(d.tag===13){var f=Mo(d),y=Us(d,f);if(y!==null){var B=gi();Ua(y,d,f,B)}Fy(d,f)}},DS=function(){return Vt},RS=function(d,f){var y=Vt;try{return Vt=d,f()}finally{Vt=y}},ho=function(d,f,y){switch(f){case"input":if(Ct(d,y),f=y.name,y.type==="radio"&&f!=null){for(y=d;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<y.length;f++){var B=y[f];if(B!==d&&B.form===d.form){var I=Kh(B);if(!I)throw Error(t(90));Lt(B),Ct(B,I)}}}break;case"textarea":ir(d,y);break;case"select":f=y.value,f!=null&&Hn(d,!!y.multiple,f,!1)}},_A=Ey,R=IA;var Aj={usingClientEntryPoint:!1,Events:[Cu,Ql,Kh,bA,mr,Ey]},Ru={findFiberByHostInstance:CA,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lj={bundleType:Ru.bundleType,version:Ru.version,rendererPackageName:Ru.rendererPackageName,rendererConfig:Ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=Ne(d),d===null?null:d.stateNode},findFiberByHostInstance:Ru.findFiberByHostInstance||sj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mf.isDisabled&&Mf.supportsFiber)try{Ut=Mf.inject(lj),Nt=Mf}catch{}}return ki.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Aj,ki.createPortal=function(d,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Iy(f))throw Error(t(200));return aj(d,f,null,y)},ki.createRoot=function(d,f){if(!Iy(d))throw Error(t(299));var y=!1,B="",I=eF;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(B=f.identifierPrefix),f.onRecoverableError!==void 0&&(I=f.onRecoverableError)),f=My(d,1,!1,null,null,y,!1,B,I),d[Ns]=f.current,bu(d.nodeType===8?d.parentNode:d),new ky(f)},ki.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var f=d._reactInternals;if(f===void 0)throw typeof d.render=="function"?Error(t(188)):(d=Object.keys(d).join(","),Error(t(268,d)));return d=Ne(f),d=d===null?null:d.stateNode,d},ki.flushSync=function(d){return IA(d)},ki.hydrate=function(d,f,y){if(!Sf(f))throw Error(t(200));return Tf(null,d,f,!0,y)},ki.hydrateRoot=function(d,f,y){if(!Iy(d))throw Error(t(405));var B=y!=null&&y.hydratedSources||null,I=!1,L="",U=eF;if(y!=null&&(y.unstable_strictMode===!0&&(I=!0),y.identifierPrefix!==void 0&&(L=y.identifierPrefix),y.onRecoverableError!==void 0&&(U=y.onRecoverableError)),f=ZM(f,null,d,1,y??null,I,!1,L,U),d[Ns]=f.current,bu(d),B)for(d=0;d<B.length;d++)y=B[d],I=y._getVersion,I=I(y._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[y,I]:f.mutableSourceEagerHydrationData.push(y,I);return new xf(f)},ki.render=function(d,f,y){if(!Sf(f))throw Error(t(200));return Tf(null,d,f,!1,y)},ki.unmountComponentAtNode=function(d){if(!Sf(d))throw Error(t(40));return d._reactRootContainer?(IA(function(){Tf(null,null,d,!1,function(){d._reactRootContainer=null,d[Ns]=null})}),!0):!1},ki.unstable_batchedUpdates=Ey,ki.unstable_renderSubtreeIntoContainer=function(d,f,y,B){if(!Sf(y))throw Error(t(200));if(d==null||d._reactInternals===void 0)throw Error(t(38));return Tf(d,f,y,!1,B)},ki.version="18.3.1-next-f1338f8080-20240426",ki}var cF;function yj(){if(cF)return Ry.exports;cF=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ry.exports=mj(),Ry.exports}var uF;function wj(){if(uF)return If;uF=1;var r=yj();return If.createRoot=r.createRoot,If.hydrateRoot=r.hydrateRoot,If}var bj=wj();const _j=Vc(bj);var Ar=n2();const Pf=Vc(Ar);function ll(r){"@babel/helpers - typeof";return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ll(r)}function Ej(r,e){if(ll(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(ll(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function dQ(r){var e=Ej(r,"string");return ll(e)=="symbol"?e:e+""}function Ke(r,e,t){return(e=dQ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function dF(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function dt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dF(Object(t),!0).forEach(function(n){Ke(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):dF(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Be(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function hF(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,dQ(n.key),n)}}function xe(r,e,t){return e&&hF(r.prototype,e),t&&hF(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function yp(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Cj(r){if(Array.isArray(r))return yp(r)}function Bj(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function r2(r,e){if(r){if(typeof r=="string")return yp(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?yp(r,e):void 0}}function xj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ft(r){return Cj(r)||Bj(r)||r2(r)||xj()}function Nc(r){return Nc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nc(r)}function hQ(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hQ=function(){return!!r})()}function Sj(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Tj(r,e){if(e&&(ll(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sj(r)}function wt(r,e,t){return e=Nc(e),Tj(r,hQ()?Reflect.construct(e,t||[],Nc(r).constructor):e.apply(r,t))}function xB(r,e){return xB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},xB(r,e)}function bt(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&xB(r,e)}function Mj(r){if(Array.isArray(r))return r}function Fj(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,s,o=[],A=!0,l=!1;try{if(a=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;A=!1}else for(;!(A=(n=a.call(t)).done)&&(o.push(n.value),o.length!==e);A=!0);}catch(c){l=!0,i=c}finally{try{if(!A&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function kj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yt(r,e){return Mj(r)||Fj(r,e)||r2(r,e)||kj()}var Hy={exports:{}},fF;function Ij(){return fF||(fF=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(A,l,c){this.fn=A,this.context=l,this.once=c||!1}function a(A,l,c,u,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var g=new i(c,u||A,h),p=t?t+l:l;return A._events[p]?A._events[p].fn?A._events[p]=[A._events[p],g]:A._events[p].push(g):(A._events[p]=g,A._eventsCount++),A}function s(A,l){--A._eventsCount===0?A._events=new n:delete A._events[l]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],c,u;if(this._eventsCount===0)return l;for(u in c=this._events)e.call(c,u)&&l.push(t?u.slice(1):u);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},o.prototype.listeners=function(l){var c=t?t+l:l,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,g=u.length,p=new Array(g);h<g;h++)p[h]=u[h].fn;return p},o.prototype.listenerCount=function(l){var c=t?t+l:l,u=this._events[c];return u?u.fn?1:u.length:0},o.prototype.emit=function(l,c,u,h,g,p){var v=t?t+l:l;if(!this._events[v])return!1;var m=this._events[v],w=arguments.length,b,_;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),w){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,u),!0;case 4:return m.fn.call(m.context,c,u,h),!0;case 5:return m.fn.call(m.context,c,u,h,g),!0;case 6:return m.fn.call(m.context,c,u,h,g,p),!0}for(_=1,b=new Array(w-1);_<w;_++)b[_-1]=arguments[_];m.fn.apply(m.context,b)}else{var C=m.length,M;for(_=0;_<C;_++)switch(m[_].once&&this.removeListener(l,m[_].fn,void 0,!0),w){case 1:m[_].fn.call(m[_].context);break;case 2:m[_].fn.call(m[_].context,c);break;case 3:m[_].fn.call(m[_].context,c,u);break;case 4:m[_].fn.call(m[_].context,c,u,h);break;default:if(!b)for(M=1,b=new Array(w-1);M<w;M++)b[M-1]=arguments[M];m[_].fn.apply(m[_].context,b)}}return!0},o.prototype.on=function(l,c,u){return a(this,l,c,u,!1)},o.prototype.once=function(l,c,u){return a(this,l,c,u,!0)},o.prototype.removeListener=function(l,c,u,h){var g=t?t+l:l;if(!this._events[g])return this;if(!c)return s(this,g),this;var p=this._events[g];if(p.fn)p.fn===c&&(!h||p.once)&&(!u||p.context===u)&&s(this,g);else{for(var v=0,m=[],w=p.length;v<w;v++)(p[v].fn!==c||h&&!p[v].once||u&&p[v].context!==u)&&m.push(p[v]);m.length?this._events[g]=m.length===1?m[0]:m:s(this,g)}return this},o.prototype.removeAllListeners=function(l){var c;return l?(c=t?t+l:l,this._events[c]&&s(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(Hy)),Hy.exports}var Pj=Ij();const fQ=Vc(Pj);var Bn=1e-6,hr=typeof Float32Array<"u"?Float32Array:Array,Oj="zyx";function gQ(){var r=new hr(9);return hr!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function Lj(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r}function Nj(r,e,t,n,i,a,s,o,A){var l=new hr(9);return l[0]=r,l[1]=e,l[2]=t,l[3]=n,l[4]=i,l[5]=a,l[6]=s,l[7]=o,l[8]=A,l}function sn(){var r=new hr(16);return hr!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function pQ(r){var e=new hr(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function Dc(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function vQ(r,e,t,n,i,a,s,o,A,l,c,u,h,g,p,v){var m=new hr(16);return m[0]=r,m[1]=e,m[2]=t,m[3]=n,m[4]=i,m[5]=a,m[6]=s,m[7]=o,m[8]=A,m[9]=l,m[10]=c,m[11]=u,m[12]=h,m[13]=g,m[14]=p,m[15]=v,m}function SB(r,e,t,n,i,a,s,o,A,l,c,u,h,g,p,v,m){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=a,r[5]=s,r[6]=o,r[7]=A,r[8]=l,r[9]=c,r[10]=u,r[11]=h,r[12]=g,r[13]=p,r[14]=v,r[15]=m,r}function oA(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function mQ(r,e){if(r===e){var t=e[1],n=e[2],i=e[3],a=e[6],s=e[7],o=e[11];r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=t,r[6]=e[9],r[7]=e[13],r[8]=n,r[9]=a,r[11]=e[14],r[12]=i,r[13]=s,r[14]=o}else r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15];return r}function ms(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],A=e[6],l=e[7],c=e[8],u=e[9],h=e[10],g=e[11],p=e[12],v=e[13],m=e[14],w=e[15],b=t*o-n*s,_=t*A-i*s,C=t*l-a*s,M=n*A-i*o,F=n*l-a*o,k=i*l-a*A,P=c*v-u*p,N=c*m-h*p,D=c*w-g*p,Q=u*m-h*v,H=u*w-g*v,j=h*w-g*m,q=b*j-_*H+C*Q+M*D-F*N+k*P;return q?(q=1/q,r[0]=(o*j-A*H+l*Q)*q,r[1]=(i*H-n*j-a*Q)*q,r[2]=(v*k-m*F+w*M)*q,r[3]=(h*F-u*k-g*M)*q,r[4]=(A*D-s*j-l*N)*q,r[5]=(t*j-i*D+a*N)*q,r[6]=(m*C-p*k-w*_)*q,r[7]=(c*k-h*C+g*_)*q,r[8]=(s*H-o*D+l*P)*q,r[9]=(n*D-t*H-a*P)*q,r[10]=(p*F-v*C+w*b)*q,r[11]=(u*C-c*F-g*b)*q,r[12]=(o*N-s*Q-A*P)*q,r[13]=(t*Q-n*N+i*P)*q,r[14]=(v*_-p*M-m*b)*q,r[15]=(c*M-u*_+h*b)*q,r):null}function Dj(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],A=e[6],l=e[7],c=e[8],u=e[9],h=e[10],g=e[11],p=e[12],v=e[13],m=e[14],w=e[15],b=t*o-n*s,_=t*A-i*s,C=t*l-a*s,M=n*A-i*o,F=n*l-a*o,k=i*l-a*A,P=c*v-u*p,N=c*m-h*p,D=c*w-g*p,Q=u*m-h*v,H=u*w-g*v,j=h*w-g*m;return r[0]=o*j-A*H+l*Q,r[1]=i*H-n*j-a*Q,r[2]=v*k-m*F+w*M,r[3]=h*F-u*k-g*M,r[4]=A*D-s*j-l*N,r[5]=t*j-i*D+a*N,r[6]=m*C-p*k-w*_,r[7]=c*k-h*C+g*_,r[8]=s*H-o*D+l*P,r[9]=n*D-t*H-a*P,r[10]=p*F-v*C+w*b,r[11]=u*C-c*F-g*b,r[12]=o*N-s*Q-A*P,r[13]=t*Q-n*N+i*P,r[14]=v*_-p*M-m*b,r[15]=c*M-u*_+h*b,r}function yQ(r){var e=r[0],t=r[1],n=r[2],i=r[3],a=r[4],s=r[5],o=r[6],A=r[7],l=r[8],c=r[9],u=r[10],h=r[11],g=r[12],p=r[13],v=r[14],m=r[15],w=e*s-t*a,b=e*o-n*a,_=t*o-n*s,C=l*p-c*g,M=l*v-u*g,F=c*v-u*p,k=e*F-t*M+n*C,P=a*F-s*M+o*C,N=l*_-c*b+u*w,D=g*_-p*b+v*w;return A*k-i*P+m*N-h*D}function Ai(r,e,t){var n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],A=e[5],l=e[6],c=e[7],u=e[8],h=e[9],g=e[10],p=e[11],v=e[12],m=e[13],w=e[14],b=e[15],_=t[0],C=t[1],M=t[2],F=t[3];return r[0]=_*n+C*o+M*u+F*v,r[1]=_*i+C*A+M*h+F*m,r[2]=_*a+C*l+M*g+F*w,r[3]=_*s+C*c+M*p+F*b,_=t[4],C=t[5],M=t[6],F=t[7],r[4]=_*n+C*o+M*u+F*v,r[5]=_*i+C*A+M*h+F*m,r[6]=_*a+C*l+M*g+F*w,r[7]=_*s+C*c+M*p+F*b,_=t[8],C=t[9],M=t[10],F=t[11],r[8]=_*n+C*o+M*u+F*v,r[9]=_*i+C*A+M*h+F*m,r[10]=_*a+C*l+M*g+F*w,r[11]=_*s+C*c+M*p+F*b,_=t[12],C=t[13],M=t[14],F=t[15],r[12]=_*n+C*o+M*u+F*v,r[13]=_*i+C*A+M*h+F*m,r[14]=_*a+C*l+M*g+F*w,r[15]=_*s+C*c+M*p+F*b,r}function xc(r,e,t){var n=t[0],i=t[1],a=t[2],s,o,A,l,c,u,h,g,p,v,m,w;return e===r?(r[12]=e[0]*n+e[4]*i+e[8]*a+e[12],r[13]=e[1]*n+e[5]*i+e[9]*a+e[13],r[14]=e[2]*n+e[6]*i+e[10]*a+e[14],r[15]=e[3]*n+e[7]*i+e[11]*a+e[15]):(s=e[0],o=e[1],A=e[2],l=e[3],c=e[4],u=e[5],h=e[6],g=e[7],p=e[8],v=e[9],m=e[10],w=e[11],r[0]=s,r[1]=o,r[2]=A,r[3]=l,r[4]=c,r[5]=u,r[6]=h,r[7]=g,r[8]=p,r[9]=v,r[10]=m,r[11]=w,r[12]=s*n+c*i+p*a+e[12],r[13]=o*n+u*i+v*a+e[13],r[14]=A*n+h*i+m*a+e[14],r[15]=l*n+g*i+w*a+e[15]),r}function wQ(r,e,t){var n=t[0],i=t[1],a=t[2];return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*a,r[9]=e[9]*a,r[10]=e[10]*a,r[11]=e[11]*a,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function Rj(r,e,t,n){var i=n[0],a=n[1],s=n[2],o=Math.sqrt(i*i+a*a+s*s),A,l,c,u,h,g,p,v,m,w,b,_,C,M,F,k,P,N,D,Q,H,j,q,J;return o<Bn?null:(o=1/o,i*=o,a*=o,s*=o,A=Math.sin(t),l=Math.cos(t),c=1-l,u=e[0],h=e[1],g=e[2],p=e[3],v=e[4],m=e[5],w=e[6],b=e[7],_=e[8],C=e[9],M=e[10],F=e[11],k=i*i*c+l,P=a*i*c+s*A,N=s*i*c-a*A,D=i*a*c-s*A,Q=a*a*c+l,H=s*a*c+i*A,j=i*s*c+a*A,q=a*s*c-i*A,J=s*s*c+l,r[0]=u*k+v*P+_*N,r[1]=h*k+m*P+C*N,r[2]=g*k+w*P+M*N,r[3]=p*k+b*P+F*N,r[4]=u*D+v*Q+_*H,r[5]=h*D+m*Q+C*H,r[6]=g*D+w*Q+M*H,r[7]=p*D+b*Q+F*H,r[8]=u*j+v*q+_*J,r[9]=h*j+m*q+C*J,r[10]=g*j+w*q+M*J,r[11]=p*j+b*q+F*J,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function bQ(r,e,t){var n=Math.sin(t),i=Math.cos(t),a=e[4],s=e[5],o=e[6],A=e[7],l=e[8],c=e[9],u=e[10],h=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=a*i+l*n,r[5]=s*i+c*n,r[6]=o*i+u*n,r[7]=A*i+h*n,r[8]=l*i-a*n,r[9]=c*i-s*n,r[10]=u*i-o*n,r[11]=h*i-A*n,r}function _Q(r,e,t){var n=Math.sin(t),i=Math.cos(t),a=e[0],s=e[1],o=e[2],A=e[3],l=e[8],c=e[9],u=e[10],h=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=a*i-l*n,r[1]=s*i-c*n,r[2]=o*i-u*n,r[3]=A*i-h*n,r[8]=a*n+l*i,r[9]=s*n+c*i,r[10]=o*n+u*i,r[11]=A*n+h*i,r}function Qj(r,e,t){var n=Math.sin(t),i=Math.cos(t),a=e[0],s=e[1],o=e[2],A=e[3],l=e[4],c=e[5],u=e[6],h=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=a*i+l*n,r[1]=s*i+c*n,r[2]=o*i+u*n,r[3]=A*i+h*n,r[4]=l*i-a*n,r[5]=c*i-s*n,r[6]=u*i-o*n,r[7]=h*i-A*n,r}function jo(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function qA(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function EQ(r,e,t){var n=t[0],i=t[1],a=t[2],s=Math.sqrt(n*n+i*i+a*a),o,A,l;return s<Bn?null:(s=1/s,n*=s,i*=s,a*=s,o=Math.sin(e),A=Math.cos(e),l=1-A,r[0]=n*n*l+A,r[1]=i*n*l+a*o,r[2]=a*n*l-i*o,r[3]=0,r[4]=n*i*l-a*o,r[5]=i*i*l+A,r[6]=a*i*l+n*o,r[7]=0,r[8]=n*a*l+i*o,r[9]=i*a*l-n*o,r[10]=a*a*l+A,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}function CQ(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=t,r[7]=0,r[8]=0,r[9]=-t,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function BQ(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=0,r[2]=-t,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=t,r[9]=0,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function TB(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=t,r[2]=0,r[3]=0,r[4]=-t,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function xQ(r,e,t){var n=e[0],i=e[1],a=e[2],s=e[3],o=n+n,A=i+i,l=a+a,c=n*o,u=n*A,h=n*l,g=i*A,p=i*l,v=a*l,m=s*o,w=s*A,b=s*l;return r[0]=1-(g+v),r[1]=u+b,r[2]=h-w,r[3]=0,r[4]=u-b,r[5]=1-(c+v),r[6]=p+m,r[7]=0,r[8]=h+w,r[9]=p-m,r[10]=1-(c+g),r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r}function Uj(r,e){var t=new hr(3),n=-e[0],i=-e[1],a=-e[2],s=e[3],o=e[4],A=e[5],l=e[6],c=e[7],u=n*n+i*i+a*a+s*s;return u>0?(t[0]=(o*s+c*n+A*a-l*i)*2/u,t[1]=(A*s+c*i+l*n-o*a)*2/u,t[2]=(l*s+c*a+o*i-A*n)*2/u):(t[0]=(o*s+c*n+A*a-l*i)*2,t[1]=(A*s+c*i+l*n-o*a)*2,t[2]=(l*s+c*a+o*i-A*n)*2),xQ(r,e,t),r}function wp(r,e){return r[0]=e[12],r[1]=e[13],r[2]=e[14],r}function Rc(r,e){var t=e[0],n=e[1],i=e[2],a=e[4],s=e[5],o=e[6],A=e[8],l=e[9],c=e[10];return r[0]=Math.sqrt(t*t+n*n+i*i),r[1]=Math.sqrt(a*a+s*s+o*o),r[2]=Math.sqrt(A*A+l*l+c*c),r}function bp(r,e){var t=new hr(3);Rc(t,e);var n=1/t[0],i=1/t[1],a=1/t[2],s=e[0]*n,o=e[1]*i,A=e[2]*a,l=e[4]*n,c=e[5]*i,u=e[6]*a,h=e[8]*n,g=e[9]*i,p=e[10]*a,v=s+c+p,m=0;return v>0?(m=Math.sqrt(v+1)*2,r[3]=.25*m,r[0]=(u-g)/m,r[1]=(h-A)/m,r[2]=(o-l)/m):s>c&&s>p?(m=Math.sqrt(1+s-c-p)*2,r[3]=(u-g)/m,r[0]=.25*m,r[1]=(o+l)/m,r[2]=(h+A)/m):c>p?(m=Math.sqrt(1+c-s-p)*2,r[3]=(h-A)/m,r[0]=(o+l)/m,r[1]=.25*m,r[2]=(u+g)/m):(m=Math.sqrt(1+p-s-c)*2,r[3]=(o-l)/m,r[0]=(h+A)/m,r[1]=(u+g)/m,r[2]=.25*m),r}function Hj(r,e,t,n){e[0]=n[12],e[1]=n[13],e[2]=n[14];var i=n[0],a=n[1],s=n[2],o=n[4],A=n[5],l=n[6],c=n[8],u=n[9],h=n[10];t[0]=Math.sqrt(i*i+a*a+s*s),t[1]=Math.sqrt(o*o+A*A+l*l),t[2]=Math.sqrt(c*c+u*u+h*h);var g=1/t[0],p=1/t[1],v=1/t[2],m=i*g,w=a*p,b=s*v,_=o*g,C=A*p,M=l*v,F=c*g,k=u*p,P=h*v,N=m+C+P,D=0;return N>0?(D=Math.sqrt(N+1)*2,r[3]=.25*D,r[0]=(M-k)/D,r[1]=(F-b)/D,r[2]=(w-_)/D):m>C&&m>P?(D=Math.sqrt(1+m-C-P)*2,r[3]=(M-k)/D,r[0]=.25*D,r[1]=(w+_)/D,r[2]=(F+b)/D):C>P?(D=Math.sqrt(1+C-m-P)*2,r[3]=(F-b)/D,r[0]=(w+_)/D,r[1]=.25*D,r[2]=(M+k)/D):(D=Math.sqrt(1+P-m-C)*2,r[3]=(w-_)/D,r[0]=(F+b)/D,r[1]=(M+k)/D,r[2]=.25*D),r}function zj(r,e,t,n){var i=e[0],a=e[1],s=e[2],o=e[3],A=i+i,l=a+a,c=s+s,u=i*A,h=i*l,g=i*c,p=a*l,v=a*c,m=s*c,w=o*A,b=o*l,_=o*c,C=n[0],M=n[1],F=n[2];return r[0]=(1-(p+m))*C,r[1]=(h+_)*C,r[2]=(g-b)*C,r[3]=0,r[4]=(h-_)*M,r[5]=(1-(u+m))*M,r[6]=(v+w)*M,r[7]=0,r[8]=(g+b)*F,r[9]=(v-w)*F,r[10]=(1-(u+p))*F,r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r}function _d(r,e,t,n,i){var a=e[0],s=e[1],o=e[2],A=e[3],l=a+a,c=s+s,u=o+o,h=a*l,g=a*c,p=a*u,v=s*c,m=s*u,w=o*u,b=A*l,_=A*c,C=A*u,M=n[0],F=n[1],k=n[2],P=i[0],N=i[1],D=i[2],Q=(1-(v+w))*M,H=(g+C)*M,j=(p-_)*M,q=(g-C)*F,J=(1-(h+w))*F,ce=(m+b)*F,se=(p+_)*k,W=(m-b)*k,le=(1-(h+v))*k;return r[0]=Q,r[1]=H,r[2]=j,r[3]=0,r[4]=q,r[5]=J,r[6]=ce,r[7]=0,r[8]=se,r[9]=W,r[10]=le,r[11]=0,r[12]=t[0]+P-(Q*P+q*N+se*D),r[13]=t[1]+N-(H*P+J*N+W*D),r[14]=t[2]+D-(j*P+ce*N+le*D),r[15]=1,r}function i2(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],s=t+t,o=n+n,A=i+i,l=t*s,c=n*s,u=n*o,h=i*s,g=i*o,p=i*A,v=a*s,m=a*o,w=a*A;return r[0]=1-u-p,r[1]=c+w,r[2]=h-m,r[3]=0,r[4]=c-w,r[5]=1-l-p,r[6]=g+v,r[7]=0,r[8]=h+m,r[9]=g-v,r[10]=1-l-u,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function jj(r,e,t,n,i,a,s){var o=1/(t-e),A=1/(i-n),l=1/(a-s);return r[0]=a*2*o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a*2*A,r[6]=0,r[7]=0,r[8]=(t+e)*o,r[9]=(i+n)*A,r[10]=(s+a)*l,r[11]=-1,r[12]=0,r[13]=0,r[14]=s*a*2*l,r[15]=0,r}function SQ(r,e,t,n,i){var a=1/Math.tan(e/2);if(r[0]=a/t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0){var s=1/(n-i);r[10]=(i+n)*s,r[14]=2*i*n*s}else r[10]=-1,r[14]=-2*n;return r}var Kj=SQ;function Gj(r,e,t,n,i){var a=1/Math.tan(e/2);if(r[0]=a/t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0){var s=1/(n-i);r[10]=i*s,r[14]=i*n*s}else r[10]=-1,r[14]=-n;return r}function Vj(r,e,t,n){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),A=2/(s+o),l=2/(i+a);return r[0]=A,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=l,r[6]=0,r[7]=0,r[8]=-((s-o)*A*.5),r[9]=(i-a)*l*.5,r[10]=n/(t-n),r[11]=-1,r[12]=0,r[13]=0,r[14]=n*t/(t-n),r[15]=0,r}function TQ(r,e,t,n,i,a,s){var o=1/(e-t),A=1/(n-i),l=1/(a-s);return r[0]=-2*o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*A,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*l,r[11]=0,r[12]=(e+t)*o,r[13]=(i+n)*A,r[14]=(s+a)*l,r[15]=1,r}var MQ=TQ;function FQ(r,e,t,n,i,a,s){var o=1/(e-t),A=1/(n-i),l=1/(a-s);return r[0]=-2*o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*A,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=l,r[11]=0,r[12]=(e+t)*o,r[13]=(i+n)*A,r[14]=a*l,r[15]=1,r}function kQ(r,e,t,n){var i,a,s,o,A,l,c,u,h,g,p=e[0],v=e[1],m=e[2],w=n[0],b=n[1],_=n[2],C=t[0],M=t[1],F=t[2];return Math.abs(p-C)<Bn&&Math.abs(v-M)<Bn&&Math.abs(m-F)<Bn?oA(r):(c=p-C,u=v-M,h=m-F,g=1/Math.sqrt(c*c+u*u+h*h),c*=g,u*=g,h*=g,i=b*h-_*u,a=_*c-w*h,s=w*u-b*c,g=Math.sqrt(i*i+a*a+s*s),g?(g=1/g,i*=g,a*=g,s*=g):(i=0,a=0,s=0),o=u*s-h*a,A=h*i-c*s,l=c*a-u*i,g=Math.sqrt(o*o+A*A+l*l),g?(g=1/g,o*=g,A*=g,l*=g):(o=0,A=0,l=0),r[0]=i,r[1]=o,r[2]=c,r[3]=0,r[4]=a,r[5]=A,r[6]=u,r[7]=0,r[8]=s,r[9]=l,r[10]=h,r[11]=0,r[12]=-(i*p+a*v+s*m),r[13]=-(o*p+A*v+l*m),r[14]=-(c*p+u*v+h*m),r[15]=1,r)}function qj(r,e,t,n){var i=e[0],a=e[1],s=e[2],o=n[0],A=n[1],l=n[2],c=i-t[0],u=a-t[1],h=s-t[2],g=c*c+u*u+h*h;g>0&&(g=1/Math.sqrt(g),c*=g,u*=g,h*=g);var p=A*h-l*u,v=l*c-o*h,m=o*u-A*c;return g=p*p+v*v+m*m,g>0&&(g=1/Math.sqrt(g),p*=g,v*=g,m*=g),r[0]=p,r[1]=v,r[2]=m,r[3]=0,r[4]=u*m-h*v,r[5]=h*p-c*m,r[6]=c*v-u*p,r[7]=0,r[8]=c,r[9]=u,r[10]=h,r[11]=0,r[12]=i,r[13]=a,r[14]=s,r[15]=1,r}function Wj(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}function $j(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]+r[3]*r[3]+r[4]*r[4]+r[5]*r[5]+r[6]*r[6]+r[7]*r[7]+r[8]*r[8]+r[9]*r[9]+r[10]*r[10]+r[11]*r[11]+r[12]*r[12]+r[13]*r[13]+r[14]*r[14]+r[15]*r[15])}function Yj(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r}function IQ(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r}function Xj(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r}function Zj(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r[4]=e[4]+t[4]*n,r[5]=e[5]+t[5]*n,r[6]=e[6]+t[6]*n,r[7]=e[7]+t[7]*n,r[8]=e[8]+t[8]*n,r[9]=e[9]+t[9]*n,r[10]=e[10]+t[10]*n,r[11]=e[11]+t[11]*n,r[12]=e[12]+t[12]*n,r[13]=e[13]+t[13]*n,r[14]=e[14]+t[14]*n,r[15]=e[15]+t[15]*n,r}function MB(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]}function Jj(r,e){var t=r[0],n=r[1],i=r[2],a=r[3],s=r[4],o=r[5],A=r[6],l=r[7],c=r[8],u=r[9],h=r[10],g=r[11],p=r[12],v=r[13],m=r[14],w=r[15],b=e[0],_=e[1],C=e[2],M=e[3],F=e[4],k=e[5],P=e[6],N=e[7],D=e[8],Q=e[9],H=e[10],j=e[11],q=e[12],J=e[13],ce=e[14],se=e[15];return Math.abs(t-b)<=Bn*Math.max(1,Math.abs(t),Math.abs(b))&&Math.abs(n-_)<=Bn*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(i-C)<=Bn*Math.max(1,Math.abs(i),Math.abs(C))&&Math.abs(a-M)<=Bn*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(s-F)<=Bn*Math.max(1,Math.abs(s),Math.abs(F))&&Math.abs(o-k)<=Bn*Math.max(1,Math.abs(o),Math.abs(k))&&Math.abs(A-P)<=Bn*Math.max(1,Math.abs(A),Math.abs(P))&&Math.abs(l-N)<=Bn*Math.max(1,Math.abs(l),Math.abs(N))&&Math.abs(c-D)<=Bn*Math.max(1,Math.abs(c),Math.abs(D))&&Math.abs(u-Q)<=Bn*Math.max(1,Math.abs(u),Math.abs(Q))&&Math.abs(h-H)<=Bn*Math.max(1,Math.abs(h),Math.abs(H))&&Math.abs(g-j)<=Bn*Math.max(1,Math.abs(g),Math.abs(j))&&Math.abs(p-q)<=Bn*Math.max(1,Math.abs(p),Math.abs(q))&&Math.abs(v-J)<=Bn*Math.max(1,Math.abs(v),Math.abs(J))&&Math.abs(m-ce)<=Bn*Math.max(1,Math.abs(m),Math.abs(ce))&&Math.abs(w-se)<=Bn*Math.max(1,Math.abs(w),Math.abs(se))}var PQ=Ai,eK=IQ;const tK=Object.freeze(Object.defineProperty({__proto__:null,add:Yj,adjoint:Dj,clone:pQ,copy:Dc,create:sn,decompose:Hj,determinant:yQ,equals:Jj,exactEquals:MB,frob:$j,fromQuat:i2,fromQuat2:Uj,fromRotation:EQ,fromRotationTranslation:xQ,fromRotationTranslationScale:zj,fromRotationTranslationScaleOrigin:_d,fromScaling:qA,fromTranslation:jo,fromValues:vQ,fromXRotation:CQ,fromYRotation:BQ,fromZRotation:TB,frustum:jj,getRotation:bp,getScaling:Rc,getTranslation:wp,identity:oA,invert:ms,lookAt:kQ,mul:PQ,multiply:Ai,multiplyScalar:Xj,multiplyScalarAndAdd:Zj,ortho:MQ,orthoNO:TQ,orthoZO:FQ,perspective:Kj,perspectiveFromFieldOfView:Vj,perspectiveNO:SQ,perspectiveZO:Gj,rotate:Rj,rotateX:bQ,rotateY:_Q,rotateZ:Qj,scale:wQ,set:SB,str:Wj,sub:eK,subtract:IQ,targetTo:qj,translate:xc,transpose:mQ},Symbol.toStringTag,{value:"Module"}));function xt(){var r=new hr(3);return hr!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function qs(r){var e=new hr(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function $s(r){var e=r[0],t=r[1],n=r[2];return Math.sqrt(e*e+t*t+n*n)}function on(r,e,t){var n=new hr(3);return n[0]=r,n[1]=e,n[2]=t,n}function ys(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function oi(r,e,t,n){return r[0]=e,r[1]=t,r[2]=n,r}function nA(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function FB(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function nK(r,e,t){return r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}function rK(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r}function iK(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r}function _p(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function aK(r,e){var t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2];return Math.sqrt(t*t+n*n+i*i)}function nl(r,e){var t=e[0],n=e[1],i=e[2],a=t*t+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r}function ws(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function rp(r,e,t){var n=e[0],i=e[1],a=e[2],s=t[0],o=t[1],A=t[2];return r[0]=i*A-a*o,r[1]=a*s-n*A,r[2]=n*o-i*s,r}function kB(r,e,t,n){var i=e[0],a=e[1],s=e[2];return r[0]=i+n*(t[0]-i),r[1]=a+n*(t[1]-a),r[2]=s+n*(t[2]-s),r}function li(r,e,t){var n=e[0],i=e[1],a=e[2],s=t[3]*n+t[7]*i+t[11]*a+t[15];return s=s||1,r[0]=(t[0]*n+t[4]*i+t[8]*a+t[12])/s,r[1]=(t[1]*n+t[5]*i+t[9]*a+t[13])/s,r[2]=(t[2]*n+t[6]*i+t[10]*a+t[14])/s,r}function sK(r,e,t){var n=e[0],i=e[1],a=e[2];return r[0]=n*t[0]+i*t[3]+a*t[6],r[1]=n*t[1]+i*t[4]+a*t[7],r[2]=n*t[2]+i*t[5]+a*t[8],r}function oK(r,e,t){var n=t[0],i=t[1],a=t[2],s=t[3],o=e[0],A=e[1],l=e[2],c=i*l-a*A,u=a*o-n*l,h=n*A-i*o;return c=c+c,u=u+u,h=h+h,r[0]=o+s*c+i*h-a*u,r[1]=A+s*u+a*c-n*h,r[2]=l+s*h+n*u-i*c,r}function Uu(r,e){var t=r[0],n=r[1],i=r[2],a=e[0],s=e[1],o=e[2];return Math.abs(t-a)<=Bn*Math.max(1,Math.abs(t),Math.abs(a))&&Math.abs(n-s)<=Bn*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-o)<=Bn*Math.max(1,Math.abs(i),Math.abs(o))}var OQ=FB,gF=aK,LQ=$s;(function(){var r=xt();return function(e,t,n,i,a,s){var o,A;for(t||(t=3),n||(n=0),i?A=Math.min(i*t+n,e.length):A=e.length,o=n;o<A;o+=t)r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],a(r,r,s),e[o]=r[0],e[o+1]=r[1],e[o+2]=r[2];return e}})();function bs(){var r=new hr(4);return hr!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function nd(r,e,t,n){var i=new hr(4);return i[0]=r,i[1]=e,i[2]=t,i[3]=n,i}function AK(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function lK(r,e,t,n,i){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r}function cK(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],s=t*t+n*n+i*i+a*a;return s>0&&(s=1/Math.sqrt(s)),r[0]=t*s,r[1]=n*s,r[2]=i*s,r[3]=a*s,r}function Js(r,e,t){var n=e[0],i=e[1],a=e[2],s=e[3];return r[0]=t[0]*n+t[4]*i+t[8]*a+t[12]*s,r[1]=t[1]*n+t[5]*i+t[9]*a+t[13]*s,r[2]=t[2]*n+t[6]*i+t[10]*a+t[14]*s,r[3]=t[3]*n+t[7]*i+t[11]*a+t[15]*s,r}(function(){var r=bs();return function(e,t,n,i,a,s){var o,A;for(t||(t=4),n||(n=0),i?A=Math.min(i*t+n,e.length):A=e.length,o=n;o<A;o+=t)r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],r[3]=e[o+3],a(r,r,s),e[o]=r[0],e[o+1]=r[1],e[o+2]=r[2],e[o+3]=r[3];return e}})();function lr(){var r=new hr(4);return hr!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function Go(r,e,t){t=t*.5;var n=Math.sin(t);return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=Math.cos(t),r}function rA(r,e,t){var n=e[0],i=e[1],a=e[2],s=e[3],o=t[0],A=t[1],l=t[2],c=t[3];return r[0]=n*c+s*o+i*l-a*A,r[1]=i*c+s*A+a*o-n*l,r[2]=a*c+s*l+n*A-i*o,r[3]=s*c-n*o-i*A-a*l,r}function zy(r,e,t,n){var i=e[0],a=e[1],s=e[2],o=e[3],A=t[0],l=t[1],c=t[2],u=t[3],h,g,p,v,m;return g=i*A+a*l+s*c+o*u,g<0&&(g=-g,A=-A,l=-l,c=-c,u=-u),1-g>Bn?(h=Math.acos(g),p=Math.sin(h),v=Math.sin((1-n)*h)/p,m=Math.sin(n*h)/p):(v=1-n,m=n),r[0]=v*i+m*A,r[1]=v*a+m*l,r[2]=v*s+m*c,r[3]=v*o+m*u,r}function jy(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],s=t*t+n*n+i*i+a*a,o=s?1/s:0;return r[0]=-t*o,r[1]=-n*o,r[2]=-i*o,r[3]=a*o,r}function uK(r,e){var t=e[0]+e[4]+e[8],n;if(t>0)n=Math.sqrt(t+1),r[3]=.5*n,n=.5/n,r[0]=(e[5]-e[7])*n,r[1]=(e[6]-e[2])*n,r[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var a=(i+1)%3,s=(i+2)%3;n=Math.sqrt(e[i*3+i]-e[a*3+a]-e[s*3+s]+1),r[i]=.5*n,n=.5/n,r[3]=(e[a*3+s]-e[s*3+a])*n,r[a]=(e[a*3+i]+e[i*3+a])*n,r[s]=(e[s*3+i]+e[i*3+s])*n}return r}function Of(r,e,t,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:Oj,a=Math.PI/360;e*=a,n*=a,t*=a;var s=Math.sin(e),o=Math.cos(e),A=Math.sin(t),l=Math.cos(t),c=Math.sin(n),u=Math.cos(n);switch(i){case"xyz":r[0]=s*l*u+o*A*c,r[1]=o*A*u-s*l*c,r[2]=o*l*c+s*A*u,r[3]=o*l*u-s*A*c;break;case"xzy":r[0]=s*l*u-o*A*c,r[1]=o*A*u-s*l*c,r[2]=o*l*c+s*A*u,r[3]=o*l*u+s*A*c;break;case"yxz":r[0]=s*l*u+o*A*c,r[1]=o*A*u-s*l*c,r[2]=o*l*c-s*A*u,r[3]=o*l*u+s*A*c;break;case"yzx":r[0]=s*l*u+o*A*c,r[1]=o*A*u+s*l*c,r[2]=o*l*c-s*A*u,r[3]=o*l*u-s*A*c;break;case"zxy":r[0]=s*l*u-o*A*c,r[1]=o*A*u+s*l*c,r[2]=o*l*c+s*A*u,r[3]=o*l*u-s*A*c;break;case"zyx":r[0]=s*l*u-o*A*c,r[1]=o*A*u+s*l*c,r[2]=o*l*c-s*A*u,r[3]=o*l*u+s*A*c;break;default:throw new Error("Unknown angle order "+i)}return r}var dK=nd,Lf=AK,NQ=lK,pF=rA,Ep=cK;(function(){var r=xt(),e=on(1,0,0),t=on(0,1,0);return function(n,i,a){var s=ws(i,a);return s<-.999999?(rp(r,e,i),LQ(r)<1e-6&&rp(r,t,i),nl(r,r),Go(n,r,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(rp(r,i,a),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=1+s,Ep(n,n))}})();(function(){var r=lr(),e=lr();return function(t,n,i,a,s,o){return zy(r,n,s,o),zy(e,i,a,o),zy(t,r,e,2*o*(1-o)),t}})();(function(){var r=gQ();return function(e,t,n,i){return r[0]=n[0],r[3]=n[1],r[6]=n[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-t[0],r[5]=-t[1],r[8]=-t[2],Ep(e,uK(e,r))}})();function a2(){var r=new hr(2);return hr!=Float32Array&&(r[0]=0,r[1]=0),r}function hK(r,e){return r[0]=e[0],r[1]=e[1],r}function fK(r,e,t){return r[0]=e,r[1]=t,r}function gK(r,e){var t=e[0],n=e[1],i=t*t+n*n;return i>0&&(i=1/Math.sqrt(i)),r[0]=e[0]*i,r[1]=e[1]*i,r}function pK(r,e){return r[0]*e[0]+r[1]*e[1]}function vK(r,e){return r[0]===e[0]&&r[1]===e[1]}(function(){var r=a2();return function(e,t,n,i,a,s){var o,A;for(t||(t=2),n||(n=0),i?A=Math.min(i*t+n,e.length):A=e.length,o=n;o<A;o+=t)r[0]=e[o],r[1]=e[o+1],a(r,r,s),e[o]=r[0],e[o+1]=r[1];return e}})();var Od=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)},mK=function(r,e){return Od(r)?r.indexOf(e)>-1:!1},yK=function(r,e){if(!Od(r))return r;for(var t=[],n=0;n<r.length;n++){var i=r[n];e(i,n)&&t.push(i)}return t},wK=function(r,e){return e===void 0&&(e=[]),yK(r,function(t){return!mK(e,t)})};function $e(r){return typeof r=="function"}function it(r){return r==null}function Ki(r){return Array.isArray(r)}const nr=(function(r){var e=typeof r;return r!==null&&e==="object"||e==="function"});function DQ(r,e){if(r){var t;if(Ki(r))for(var n=0,i=r.length;n<i&&(t=e(r[n],n),t!==!1);n++);else if(nr(r)){for(var a in r)if(r.hasOwnProperty(a)&&(t=e(r[a],a),t===!1))break}}}var IB=function(r){return typeof r=="object"&&r!==null},bK={}.toString,RQ=function(r,e){return bK.call(r)==="[object "+e+"]"},Qc=function(r){if(!IB(r)||!RQ(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e},_K=function(r){if(!Ki(r))return[];for(var e=[],t=0;t<r.length;t++)e=e.concat(r[t]);return e};function Cp(r){if(!Array.isArray(r))return-1/0;var e=r.length;if(!e)return-1/0;for(var t=r[0],n=1;n<e;n++)t=Math.max(t,r[n]);return t}const Bp=(function(r){if(Ki(r))return r.reduce(function(e,t){return Math.min(e,t)},r[0])});var EK=function(r,e,t){if(!Ki(r)&&!Qc(r))return r;var n=t;return DQ(r,function(i,a){n=e(n,i,a)}),n};function Rt(r){return typeof r=="string"}function CK(r,e){e===void 0&&(e=new Map);var t=[];if(Array.isArray(r))for(var n=0,i=r.length;n<i;n++){var a=r[n];e.has(a)||(t.push(a),e.set(a,!0))}return t}var BK=Object.prototype.hasOwnProperty;function fv(r,e){if(!e||!Ki(r))return{};for(var t={},n=$e(e)?e:function(o){return o[e]},i,a=0;a<r.length;a++){var s=r[a];i=n(s),BK.call(t,i)?t[i].push(s):t[i]=[s]}return t}var Rn=function(r,e,t){return r<e?e:r>t?t:r};function je(r){return typeof r=="number"}var xK=1e-5;function Sc(r,e,t){return t===void 0&&(t=xK),r===e||Math.abs(r-e)<t}const SK=(function(r,e){if(Ki(r)){for(var t,n=-1/0,i=0;i<r.length;i++){var a=r[i],s=$e(e)?e(a):a[e];s>n&&(t=a,n=s)}return t}}),TK=(function(r,e){if(Ki(r)){for(var t,n=1/0,i=0;i<r.length;i++){var a=r[i],s=$e(e)?e(a):a[e];s<n&&(t=a,n=s)}return t}});var QQ=function(r,e){return(r%e+e)%e};const UQ=(function(r){return it(r)?"":r.toString()});var MK=function(r){var e=UQ(r);return e.charAt(0).toLowerCase()+e.substring(1)};function FK(r,e){return!r||!e?r:r.replace(/\\?\{([^{}]+)\}/g,function(t,n){return t.charAt(0)==="\\"?t.slice(1):e[n]===void 0?"":e[n]})}var xp=function(r){var e=UQ(r);return e.charAt(0).toUpperCase()+e.substring(1)},kK={}.toString,IK=function(r){return kK.call(r).replace(/^\[object /,"").replace(/]$/,"")},Ld=function(r){return RQ(r,"Boolean")};function PK(r){return r instanceof Date}function OK(r){return r===null}var LK=Object.prototype,NK=function(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||LK;return r===t},ft=function(r){return r===void 0};function DK(r){return r instanceof Element||r instanceof Document}function vF(r,e){for(var t in e)e.hasOwnProperty(t)&&t!=="constructor"&&e[t]!==void 0&&(r[t]=e[t])}function RK(r,e,t,n){return e&&vF(r,e),t&&vF(r,t),r}var AA=function(r){if(typeof r!="object"||r===null)return r;var e;if(Ki(r)){e=[];for(var t=0,n=r.length;t<n;t++)typeof r[t]=="object"&&r[t]!=null?e[t]=AA(r[t]):e[t]=r[t]}else{e={};for(var i in r)typeof r[i]=="object"&&r[i]!=null?e[i]=AA(r[i]):e[i]=r[i]}return e};function nh(r,e,t){var n;return function(){var i=this,a=arguments,s=function(){n=null,r.apply(i,a)};clearTimeout(n),n=setTimeout(s,e)}}function QK(r){var e,t,n,i=r||1;function a(o,A){++e>i&&(n=t,s(1),++e),t[o]=A}function s(o){e=0,t=Object.create(null),o||(n=Object.create(null))}return s(),{clear:s,has:function(o){return t[o]!==void 0||n[o]!==void 0},get:function(o){var A=t[o];if(A!==void 0)return A;if((A=n[o])!==void 0)return a(o,A),A},set:function(o,A){t[o]!==void 0?t[o]=A:a(o,A)}}}var Ky=new Map;function PB(r,e,t){t===void 0&&(t=128);var n=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=e?e.apply(this,i):i[0];Ky.has(r)||Ky.set(r,QK(t));var o=Ky.get(r);if(o.has(s))return o.get(s);var A=r.apply(this,i);return o.set(s,A),A};return n}var UK=5;function HK(r,e){if(Object.hasOwn)return Object.hasOwn(r,e);if(r==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(r),e)}function HQ(r,e,t,n){t=t||0,n=n||UK;for(var i in e)if(HK(e,i)){var a=e[i];a!==null&&Qc(a)?(Qc(r[i])||(r[i]={}),t<n?HQ(r[i],a,t+1,n):r[i]=e[i]):Ki(a)?(r[i]=[],r[i]=r[i].concat(a)):a!==void 0&&(r[i]=a)}}var qr=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n+=1)HQ(r,e[n]);return r},zK=Object.prototype.hasOwnProperty;function vs(r){if(it(r))return!0;if(Od(r))return!r.length;var e=IK(r);if(e==="Map"||e==="Set")return!r.size;if(NK(r))return!Object.keys(r).length;for(var t in r)if(zK.call(r,t))return!1;return!0}var Qn=function(r,e){if(r===e)return!0;if(!r||!e||Rt(r)||Rt(e))return!1;if(Od(r)||Od(e)){if(r.length!==e.length)return!1;for(var t=!0,n=0;n<r.length&&(t=Qn(r[n],e[n]),!!t);n++);return t}if(IB(r)||IB(e)){var i=Object.keys(r),a=Object.keys(e);if(i.length!==a.length)return!1;for(var t=!0,n=0;n<i.length&&(t=Qn(r[i[n]],e[i[n]]),!!t);n++);return t}return!1};const jr=(function(r,e,t){for(var n=0,i=Rt(e)?e.split("."):e;r&&n<i.length;)r=r[i[n++]];return r===void 0||n<i.length?t:r}),Nd=(function(r,e,t){var n=r,i=Rt(e)?e.split("."):e;return i.forEach(function(a,s){s<i.length-1?(nr(n[a])||(n[a]=je(i[s+1])?[]:{}),n=n[a]):n[a]=t}),r});var jK=Object.prototype.hasOwnProperty;const cl=(function(r,e){if(r===null||!Qc(r))return{};var t={};return DQ(e,function(n){jK.call(r,n)&&(t[n]=r[n])}),t}),s2=(function(r,e){return EK(r,function(t,n,i){return e.includes(i)||(t[i]=n),t},{})}),zQ=(function(r,e,t){var n,i,a,s,o=0;t||(t={});var A=function(){o=t.leading===!1?0:Date.now(),n=null,s=r.apply(i,a),n||(i=a=null)},l=function(){var c=Date.now();!o&&t.leading===!1&&(o=c);var u=e-(c-o);return i=this,a=arguments,u<=0||u>e?(n&&(clearTimeout(n),n=null),o=c,s=r.apply(i,a),n||(i=a=null)):!n&&t.trailing!==!1&&(n=setTimeout(A,u)),s};return l.cancel=function(){clearTimeout(n),o=0,n=i=a=null},l});var Nf={};const KK=(function(r){return r=r||"g",Nf[r]?Nf[r]+=1:Nf[r]=1,r+Nf[r]}),Gy=(function(){}),OB=(function(r){return r});var LB=function(r,e){return LB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},LB(r,e)};function Et(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");LB(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ee=function(){return Ee=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ee.apply(this,arguments)};function Sn(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function St(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})}function rh(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return a}function GK(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)n[i]=a[s];return n}function Ze(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))}function Vy(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}var jQ={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function VK(r,e,t){if(r[t].length>7){r[t].shift();for(var n=r[t],i=t;n.length;)e[t]="A",r.splice(i+=1,0,["C"].concat(n.splice(0,6)));r.splice(t,1)}}var Ed={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function KQ(r){return Array.isArray(r)&&r.every(function(e){var t=e[0].toLowerCase();return Ed[t]===e.length-1&&"achlmqstvz".includes(t)})}function GQ(r){return KQ(r)&&r.every(function(e){var t=e[0];return t===t.toUpperCase()})}function VQ(r){return GQ(r)&&r.every(function(e){var t=e[0];return"ACLMQZ".includes(t)})}function mF(r){for(var e=r.pathValue[r.segmentStart],t=e.toLowerCase(),n=r.data;n.length>=Ed[t]&&(t==="m"&&n.length>2?(r.segments.push([e].concat(n.splice(0,2))),t="l",e=e==="m"?"l":"L"):r.segments.push([e].concat(n.splice(0,Ed[t]))),!!Ed[t]););}function qK(r){var e=r.index,t=r.pathValue,n=t.charCodeAt(e);if(n===48){r.param=0,r.index+=1;return}if(n===49){r.param=1,r.index+=1;return}r.err='[path-util]: invalid Arc flag "'.concat(t[e],'", expecting 0 or 1 at index ').concat(e)}function WK(r){return r>=48&&r<=57||r===43||r===45||r===46}function ec(r){return r>=48&&r<=57}function $K(r){var e=r.max,t=r.pathValue,n=r.index,i=n,a=!1,s=!1,o=!1,A=!1,l;if(i>=e){r.err="[path-util]: Invalid path value at index ".concat(i,', "pathValue" is missing param');return}if(l=t.charCodeAt(i),(l===43||l===45)&&(i+=1,l=t.charCodeAt(i)),!ec(l)&&l!==46){r.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(t[i],'" is not a number');return}if(l!==46){if(a=l===48,i+=1,l=t.charCodeAt(i),a&&i<e&&l&&ec(l)){r.err="[path-util]: Invalid path value at index ".concat(n,', "').concat(t[n],'" illegal number');return}for(;i<e&&ec(t.charCodeAt(i));)i+=1,s=!0;l=t.charCodeAt(i)}if(l===46){for(A=!0,i+=1;ec(t.charCodeAt(i));)i+=1,o=!0;l=t.charCodeAt(i)}if(l===101||l===69){if(A&&!s&&!o){r.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(t[i],'" invalid float exponent');return}if(i+=1,l=t.charCodeAt(i),(l===43||l===45)&&(i+=1),i<e&&ec(t.charCodeAt(i)))for(;i<e&&ec(t.charCodeAt(i));)i+=1;else{r.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(t[i],'" invalid integer exponent');return}}r.index=i,r.param=+r.pathValue.slice(n,i)}function YK(r){var e=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return r===10||r===13||r===8232||r===8233||r===32||r===9||r===11||r===12||r===160||r>=5760&&e.includes(r)}function ip(r){for(var e=r.pathValue,t=r.max;r.index<t&&YK(e.charCodeAt(r.index));)r.index+=1}function XK(r){switch(r|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function ZK(r){return(r|32)===97}function JK(r){var e=r.max,t=r.pathValue,n=r.index,i=t.charCodeAt(n),a=Ed[t[n].toLowerCase()];if(r.segmentStart=n,!XK(i)){r.err='[path-util]: Invalid path value "'.concat(t[n],'" is not a path command');return}if(r.index+=1,ip(r),r.data=[],!a){mF(r);return}for(;;){for(var s=a;s>0;s-=1){if(ZK(i)&&(s===3||s===4)?qK(r):$K(r),r.err.length)return;r.data.push(r.param),ip(r),r.index<e&&t.charCodeAt(r.index)===44&&(r.index+=1,ip(r))}if(r.index>=r.max||!WK(t.charCodeAt(r.index)))break}mF(r)}var eG=(function(){function r(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return r})();function tG(r){if(KQ(r))return[].concat(r);var e=new eG(r);for(ip(e);e.index<e.max&&!e.err.length;)JK(e);return e.err?e.err:e.segments}function nG(r){if(GQ(r))return[].concat(r);var e=tG(r),t=0,n=0,i=0,a=0;return e.map(function(s){var o=s.slice(1).map(Number),A=s[0],l=A.toUpperCase();if(A==="M")return t=o[0],n=o[1],i=t,a=n,["M",t,n];var c;if(A!==l)switch(l){case"A":c=[l,o[0],o[1],o[2],o[3],o[4],o[5]+t,o[6]+n];break;case"V":c=[l,o[0]+n];break;case"H":c=[l,o[0]+t];break;default:{var u=o.map(function(g,p){return g+(p%2?n:t)});c=[l].concat(u)}}else c=[l].concat(o);var h=c.length;switch(l){case"Z":t=i,n=a;break;case"H":t=c[1];break;case"V":n=c[1];break;default:t=c[h-2],n=c[h-1],l==="M"&&(i=t,a=n)}return c})}function rG(r,e){var t=r[0],n=e.x1,i=e.y1,a=e.x2,s=e.y2,o=r.slice(1).map(Number),A=r;if("TQ".includes(t)||(e.qx=null,e.qy=null),t==="H")A=["L",r[1],i];else if(t==="V")A=["L",n,r[1]];else if(t==="S"){var l=n*2-a,c=i*2-s;e.x1=l,e.y1=c,A=["C",l,c].concat(o)}else if(t==="T"){var u=n*2-e.qx,h=i*2-e.qy;e.qx=u,e.qy=h,A=["Q",u,h].concat(o)}else if(t==="Q"){var g=o[0],p=o[1];e.qx=g,e.qy=p}return A}function Sp(r){if(VQ(r))return[].concat(r);for(var e=nG(r),t=Ee({},jQ),n=0;n<e.length;n+=1){e[n]=rG(e[n],t);var i=e[n],a=i.length;t.x1=+i[a-2],t.y1=+i[a-1],t.x2=+i[a-4]||t.x1,t.y2=+i[a-3]||t.y1}return e}function iG(r){return VQ(r)&&r.every(function(e){var t=e[0];return"MC".includes(t)})}function Df(r,e,t){var n=r*Math.cos(t)-e*Math.sin(t),i=r*Math.sin(t)+e*Math.cos(t);return{x:n,y:i}}function o2(r,e,t,n,i,a,s,o,A,l){var c=r,u=e,h=t,g=n,p=o,v=A,m=Math.PI*120/180,w=Math.PI/180*(+i||0),b=[],_,C,M,F,k;if(l)C=l[0],M=l[1],F=l[2],k=l[3];else{_=Df(c,u,-w),c=_.x,u=_.y,_=Df(p,v,-w),p=_.x,v=_.y;var P=(c-p)/2,N=(u-v)/2,D=P*P/(h*h)+N*N/(g*g);D>1&&(D=Math.sqrt(D),h*=D,g*=D);var Q=h*h,H=g*g,j=(a===s?-1:1)*Math.sqrt(Math.abs((Q*H-Q*N*N-H*P*P)/(Q*N*N+H*P*P)));F=j*h*N/g+(c+p)/2,k=j*-g*P/h+(u+v)/2,C=Math.asin(((u-k)/g*Math.pow(10,9)>>0)/Math.pow(10,9)),M=Math.asin(((v-k)/g*Math.pow(10,9)>>0)/Math.pow(10,9)),C=c<F?Math.PI-C:C,M=p<F?Math.PI-M:M,C<0&&(C=Math.PI*2+C),M<0&&(M=Math.PI*2+M),s&&C>M&&(C-=Math.PI*2),!s&&M>C&&(M-=Math.PI*2)}var q=M-C;if(Math.abs(q)>m){var J=M,ce=p,se=v;M=C+m*(s&&M>C?1:-1),p=F+h*Math.cos(M),v=k+g*Math.sin(M),b=o2(p,v,h,g,i,0,s,ce,se,[M,J,F,k])}q=M-C;var W=Math.cos(C),le=Math.sin(C),fe=Math.cos(M),X=Math.sin(M),ne=Math.tan(q/4),Ie=4/3*h*ne,te=4/3*g*ne,$=[c,u],ue=[c+Ie*le,u-te*W],me=[p+Ie*X,v-te*fe],Te=[p,v];if(ue[0]=2*$[0]-ue[0],ue[1]=2*$[1]-ue[1],l)return ue.concat(me,Te,b);b=ue.concat(me,Te,b);for(var He=[],Je=0,Bt=b.length;Je<Bt;Je+=1)He[Je]=Je%2?Df(b[Je-1],b[Je],w).y:Df(b[Je],b[Je+1],w).x;return He}function aG(r,e,t,n,i,a){var s=.3333333333333333,o=2/3;return[s*r+o*t,s*e+o*n,s*i+o*t,s*a+o*n,i,a]}function Uo(r,e,t){var n=r[0],i=r[1],a=e[0],s=e[1];return[n+(a-n)*t,i+(s-i)*t]}var yF=function(r,e,t,n){var i=.5,a=Uo([r,e],[t,n],i);return Ze(Ze([],a,!0),[t,n,t,n],!1)};function sG(r,e){var t=r[0],n=r.slice(1).map(Number),i=n[0],a=n[1],s,o=e.x1,A=e.y1,l=e.x,c=e.y;switch("TQ".includes(t)||(e.qx=null,e.qy=null),t){case"M":return e.x=i,e.y=a,r;case"A":return s=[o,A].concat(n),["C"].concat(o2(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9]));case"Q":return e.qx=i,e.qy=a,s=[o,A].concat(n),["C"].concat(aG(s[0],s[1],s[2],s[3],s[4],s[5]));case"L":return["C"].concat(yF(o,A,i,a));case"Z":return o===l&&A===c?["C",o,A,l,c,l,c]:["C"].concat(yF(o,A,l,c))}return r}function NB(r,e){if(e===void 0&&(e=!1),iG(r)){var t=[].concat(r);return e?[t,[]]:t}for(var n=Sp(r),i=Ee({},jQ),a=[],s="",o=n.length,A,l,c=[],u=0;u<o;u+=1){n[u]&&(s=n[u][0]),a[u]=s;var h=sG(n[u],i);n[u]=h,VK(n,a,u),o=n.length,s==="Z"&&c.push(u),A=n[u],l=A.length,i.x1=+A[l-2],i.y1=+A[l-1],i.x2=+A[l-4]||i.x1,i.y2=+A[l-3]||i.y1}return e?[n,c]:n}function oG(r){return r.map(function(e){return Array.isArray(e)?[].concat(e):e})}function AG(r){var e=r.slice(1).map(function(t,n,i){return n?i[n-1].slice(-2).concat(t.slice(1)):r[0].slice(1).concat(t.slice(1))}).map(function(t){return t.map(function(n,i){return t[t.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(function(t){return["C"].concat(t.slice(2))}))}function Li(r,e){return Math.sqrt((r[0]-e[0])*(r[0]-e[0])+(r[1]-e[1])*(r[1]-e[1]))}function DB(r,e,t,n,i){var a=Li([r,e],[t,n]),s={x:0,y:0};if(typeof i=="number")if(i<=0)s={x:r,y:e};else if(i>=a)s={x:t,y:n};else{var o=Uo([r,e],[t,n],i/a),A=o[0],l=o[1];s={x:A,y:l}}return{length:a,point:s,min:{x:Math.min(r,t),y:Math.min(e,n)},max:{x:Math.max(r,t),y:Math.max(e,n)}}}function wF(r,e){var t=r.x,n=r.y,i=e.x,a=e.y,s=t*i+n*a,o=Math.sqrt((Math.pow(t,2)+Math.pow(n,2))*(Math.pow(i,2)+Math.pow(a,2))),A=t*a-n*i<0?-1:1,l=A*Math.acos(s/o);return l}function lG(r,e,t,n,i,a,s,o,A,l){var c=Math.abs,u=Math.sin,h=Math.cos,g=Math.sqrt,p=Math.PI,v=c(t),m=c(n),w=(i%360+360)%360,b=w*(p/180);if(r===o&&e===A)return{x:r,y:e};if(v===0||m===0)return DB(r,e,o,A,l).point;var _=(r-o)/2,C=(e-A)/2,M={x:h(b)*_+u(b)*C,y:-u(b)*_+h(b)*C},F=Math.pow(M.x,2)/Math.pow(v,2)+Math.pow(M.y,2)/Math.pow(m,2);F>1&&(v*=g(F),m*=g(F));var k=Math.pow(v,2)*Math.pow(m,2)-Math.pow(v,2)*Math.pow(M.y,2)-Math.pow(m,2)*Math.pow(M.x,2),P=Math.pow(v,2)*Math.pow(M.y,2)+Math.pow(m,2)*Math.pow(M.x,2),N=k/P;N=N<0?0:N;var D=(a!==s?1:-1)*g(N),Q={x:D*(v*M.y/m),y:D*(-(m*M.x)/v)},H={x:h(b)*Q.x-u(b)*Q.y+(r+o)/2,y:u(b)*Q.x+h(b)*Q.y+(e+A)/2},j={x:(M.x-Q.x)/v,y:(M.y-Q.y)/m},q=wF({x:1,y:0},j),J={x:(-M.x-Q.x)/v,y:(-M.y-Q.y)/m},ce=wF(j,J);!s&&ce>0?ce-=2*p:s&&ce<0&&(ce+=2*p),ce%=2*p;var se=q+ce*l,W=v*h(se),le=m*u(se),fe={x:h(b)*W-u(b)*le+H.x,y:u(b)*W+h(b)*le+H.y};return fe}function cG(r,e,t,n,i,a,s,o,A,l,c){var u,h=c.bbox,g=h===void 0?!0:h,p=c.length,v=p===void 0?!0:p,m=c.sampleSize,w=m===void 0?30:m,b=typeof l=="number",_=r,C=e,M=0,F=[_,C,M],k=[_,C],P=0,N={x:0,y:0},D=[{x:_,y:C}];b&&l<=0&&(N={x:_,y:C});for(var Q=0;Q<=w;Q+=1){if(P=Q/w,u=lG(r,e,t,n,i,a,s,o,A,P),_=u.x,C=u.y,g&&D.push({x:_,y:C}),v&&(M+=Li(k,[_,C])),k=[_,C],b&&M>=l&&l>F[2]){var H=(M-l)/(M-F[2]);N={x:k[0]*(1-H)+F[0]*H,y:k[1]*(1-H)+F[1]*H}}F=[_,C,M]}return b&&l>=M&&(N={x:o,y:A}),{length:M,point:N,min:{x:Math.min.apply(null,D.map(function(j){return j.x})),y:Math.min.apply(null,D.map(function(j){return j.y}))},max:{x:Math.max.apply(null,D.map(function(j){return j.x})),y:Math.max.apply(null,D.map(function(j){return j.y}))}}}function uG(r,e,t,n,i,a,s,o,A){var l=1-A;return{x:Math.pow(l,3)*r+3*Math.pow(l,2)*A*t+3*l*Math.pow(A,2)*i+Math.pow(A,3)*s,y:Math.pow(l,3)*e+3*Math.pow(l,2)*A*n+3*l*Math.pow(A,2)*a+Math.pow(A,3)*o}}function qQ(r,e,t,n,i,a,s,o,A,l){var c,u=l.bbox,h=u===void 0?!0:u,g=l.length,p=g===void 0?!0:g,v=l.sampleSize,m=v===void 0?10:v,w=typeof A=="number",b=r,_=e,C=0,M=[b,_,C],F=[b,_],k=0,P={x:0,y:0},N=[{x:b,y:_}];w&&A<=0&&(P={x:b,y:_});for(var D=0;D<=m;D+=1){if(k=D/m,c=uG(r,e,t,n,i,a,s,o,k),b=c.x,_=c.y,h&&N.push({x:b,y:_}),p&&(C+=Li(F,[b,_])),F=[b,_],w&&C>=A&&A>M[2]){var Q=(C-A)/(C-M[2]);P={x:F[0]*(1-Q)+M[0]*Q,y:F[1]*(1-Q)+M[1]*Q}}M=[b,_,C]}return w&&A>=C&&(P={x:s,y:o}),{length:C,point:P,min:{x:Math.min.apply(null,N.map(function(H){return H.x})),y:Math.min.apply(null,N.map(function(H){return H.y}))},max:{x:Math.max.apply(null,N.map(function(H){return H.x})),y:Math.max.apply(null,N.map(function(H){return H.y}))}}}function dG(r,e,t,n,i,a,s){var o=1-s;return{x:Math.pow(o,2)*r+2*o*s*t+Math.pow(s,2)*i,y:Math.pow(o,2)*e+2*o*s*n+Math.pow(s,2)*a}}function hG(r,e,t,n,i,a,s,o){var A,l=o.bbox,c=l===void 0?!0:l,u=o.length,h=u===void 0?!0:u,g=o.sampleSize,p=g===void 0?10:g,v=typeof s=="number",m=r,w=e,b=0,_=[m,w,b],C=[m,w],M=0,F={x:0,y:0},k=[{x:m,y:w}];v&&s<=0&&(F={x:m,y:w});for(var P=0;P<=p;P+=1){if(M=P/p,A=dG(r,e,t,n,i,a,M),m=A.x,w=A.y,c&&k.push({x:m,y:w}),h&&(b+=Li(C,[m,w])),C=[m,w],v&&b>=s&&s>_[2]){var N=(b-s)/(b-_[2]);F={x:C[0]*(1-N)+_[0]*N,y:C[1]*(1-N)+_[1]*N}}_=[m,w,b]}return v&&s>=b&&(F={x:i,y:a}),{length:b,point:F,min:{x:Math.min.apply(null,k.map(function(D){return D.x})),y:Math.min.apply(null,k.map(function(D){return D.y}))},max:{x:Math.max.apply(null,k.map(function(D){return D.x})),y:Math.max.apply(null,k.map(function(D){return D.y}))}}}function WQ(r,e,t){for(var n,i,a,s,o,A,l=Sp(r),c=typeof e=="number",u,h=[],g,p=0,v=0,m=0,w=0,b,_=[],C=[],M=0,F={x:0,y:0},k=F,P=F,N=F,D=0,Q=0,H=l.length;Q<H;Q+=1)b=l[Q],g=b[0],u=g==="M",h=u?h:[p,v].concat(b.slice(1)),u?(m=b[1],w=b[2],F={x:m,y:w},k=F,M=0,c&&e<.001&&(N=F)):g==="L"?(n=DB(h[0],h[1],h[2],h[3],(e||0)-D),M=n.length,F=n.min,k=n.max,P=n.point):g==="A"?(i=cG(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],(e||0)-D,t||{}),M=i.length,F=i.min,k=i.max,P=i.point):g==="C"?(a=qQ(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],(e||0)-D,t||{}),M=a.length,F=a.min,k=a.max,P=a.point):g==="Q"?(s=hG(h[0],h[1],h[2],h[3],h[4],h[5],(e||0)-D,t||{}),M=s.length,F=s.min,k=s.max,P=s.point):g==="Z"&&(h=[p,v,m,w],o=DB(h[0],h[1],h[2],h[3],(e||0)-D),M=o.length,F=o.min,k=o.max,P=o.point),c&&D<e&&D+M>=e&&(N=P),C.push(k),_.push(F),D+=M,A=g!=="Z"?b.slice(-2):[m,w],p=A[0],v=A[1];return c&&e>=D&&(N={x:p,y:v}),{length:D,point:N,min:{x:Math.min.apply(null,_.map(function(j){return j.x})),y:Math.min.apply(null,_.map(function(j){return j.y}))},max:{x:Math.max.apply(null,C.map(function(j){return j.x})),y:Math.max.apply(null,C.map(function(j){return j.y}))}}}function fG(r,e){return WQ(r,void 0,Ee(Ee({},e),{bbox:!1,length:!0})).length}function gG(r){var e=r.length,t=e-1;return r.map(function(n,i){return r.map(function(a,s){var o=i+s,A;return s===0||r[o]&&r[o][0]==="M"?(A=r[o],["M"].concat(A.slice(-2))):(o>=e&&(o-=t),r[o])})})}function pG(r,e){var t=r.length-1,n=[],i=0,a=0,s=gG(r);return s.forEach(function(o,A){r.slice(1).forEach(function(l,c){a+=Li(r[(A+c)%t].slice(-2),e[c%t].slice(-2))}),n[A]=a,a=0}),i=n.indexOf(Math.min.apply(null,n)),s[i]}function vG(r,e,t,n,i,a,s,o){return 3*((o-e)*(t+i)-(s-r)*(n+a)+n*(r-i)-t*(e-a)+o*(i+r/3)-s*(a+e/3))/20}function mG(r){var e=0,t=0,n=0;return NB(r).map(function(i){var a;switch(i[0]){case"M":return e=i[1],t=i[2],0;default:var s=i.slice(1),o=s[0],A=s[1],l=s[2],c=s[3],u=s[4],h=s[5];return n=vG(e,t,o,A,l,c,u,h),a=i.slice(-2),e=a[0],t=a[1],n}}).reduce(function(i,a){return i+a},0)}function bF(r){return mG(r)>=0}function yG(r,e,t){return WQ(r,e,Ee(Ee({},t),{bbox:!1,length:!0})).point}var wG=50;function bG(r,e){e===void 0&&(e=.5);var t=r.slice(0,2),n=r.slice(2,4),i=r.slice(4,6),a=r.slice(6,8),s=Uo(t,n,e),o=Uo(n,i,e),A=Uo(i,a,e),l=Uo(s,o,e),c=Uo(o,A,e),u=Uo(l,c,e);return[["C"].concat(s,l,u),["C"].concat(c,A,a)]}function _F(r){return r.map(function(e,t,n){var i=t&&n[t-1].slice(-2).concat(e.slice(1)),a=t?qQ(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,s;return t?s=a?bG(i):[e,e]:s=[e],{s:e,ss:s,l:a}})}function $Q(r,e,t,n){if(n===void 0&&(n=0),n>wG)return console.warn("Maximum recursion depth reached in equalizeSegments"),[r,e];var i=_F(r),a=_F(e),s=i.length,o=a.length,A=i.filter(function(w){return w.l}).length,l=a.filter(function(w){return w.l}).length,c=i.filter(function(w){return w.l}).reduce(function(w,b){var _=b.l;return w+_},0)/A||0,u=a.filter(function(w){return w.l}).reduce(function(w,b){var _=b.l;return w+_},0)/l||0,h=t||Math.max(s,o),g=[c,u],p=[h-s,h-o],v=0,m=[i,a].map(function(w,b){return w.l===h?w.map(function(_){return _.s}):w.map(function(_,C){return v=C&&p[b]&&_.l>=g[b],p[b]-=v?1:0,v?_.ss:[_.s]}).flat()});return m[0].length===m[1].length?m:$Q(m[0],m[1],h,n+1)}function RB(r){var e=document.createElement("div");e.innerHTML=r;var t=e.childNodes[0];return t&&e.contains(t)&&e.removeChild(t),t}function _G(r,e){for(;!{}.hasOwnProperty.call(r,e)&&(r=Nc(r))!==null;);return r}function QB(){return QB=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,e,t){var n=_G(r,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?r:t):i.value}},QB.apply(null,arguments)}function Tp(r,e,t,n){var i=QB(Nc(r.prototype),e,t);return typeof i=="function"?function(a){return i.apply(t,a)}:i}/*!
 * @antv/g-math
 * @description Geometry util
 * @version 3.1.0
 * @date 12/22/2025, 3:02:36 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */function to(r,e,t,n){var i=r-t,a=e-n;return Math.sqrt(i*i+a*a)}function YQ(r,e){var t=Math.min.apply(Math,Ft(r)),n=Math.min.apply(Math,Ft(e)),i=Math.max.apply(Math,Ft(r)),a=Math.max.apply(Math,Ft(e));return{x:t,y:n,width:i-t,height:a-n}}function EG(r,e,t){return Math.atan(-e/r*Math.tan(t))}function CG(r,e,t){return Math.atan(e/(r*Math.tan(t)))}function BG(r,e,t,n,i,a){return t*Math.cos(i)*Math.cos(a)-n*Math.sin(i)*Math.sin(a)+r}function xG(r,e,t,n,i,a){return t*Math.sin(i)*Math.cos(a)+n*Math.cos(i)*Math.sin(a)+e}function SG(r,e,t,n,i,a,s){for(var o=EG(t,n,i),A=1/0,l=-1/0,c=[a,s],u=-Math.PI*2;u<=Math.PI*2;u+=Math.PI){var h=o+u;a<s?a<h&&h<s&&c.push(h):s<h&&h<a&&c.push(h)}for(var g=0;g<c.length;g++){var p=BG(r,e,t,n,i,c[g]);p<A&&(A=p),p>l&&(l=p)}for(var v=CG(t,n,i),m=1/0,w=-1/0,b=[a,s],_=-Math.PI*2;_<=Math.PI*2;_+=Math.PI){var C=v+_;a<s?a<C&&C<s&&b.push(C):s<C&&C<a&&b.push(C)}for(var M=0;M<b.length;M++){var F=xG(r,e,t,n,i,b[M]);F<m&&(m=F),F>w&&(w=F)}return{x:A,y:m,width:l-A,height:w-m}}var TG=1e-4;function XQ(r,e,t,n,i,a){var s=-1,o=1/0,A=[t,n],l=20;a&&a>200&&(l=a/10);for(var c=1/l,u=c/10,h=0;h<=l;h++){var g=h*c,p=[i.apply(void 0,Ft(r.concat([g]))),i.apply(void 0,Ft(e.concat([g])))],v=to(A[0],A[1],p[0],p[1]);v<o&&(s=g,o=v)}if(s===0)return{x:r[0],y:e[0]};if(s===1){var m=r.length;return{x:r[m-1],y:e[m-1]}}o=1/0;for(var w=0;w<32&&!(u<TG);w++){var b=s-u,_=s+u,C=[i.apply(void 0,Ft(r.concat([b]))),i.apply(void 0,Ft(e.concat([b])))],M=to(A[0],A[1],C[0],C[1]);if(b>=0&&M<o)s=b,o=M;else{var F=[i.apply(void 0,Ft(r.concat([_]))),i.apply(void 0,Ft(e.concat([_])))],k=to(A[0],A[1],F[0],F[1]);_<=1&&k<o?(s=_,o=k):u*=.5}}return{x:i.apply(void 0,Ft(r.concat([s]))),y:i.apply(void 0,Ft(e.concat([s])))}}function ZQ(r,e,t,n){return to(r,e,t,n)}function JQ(r,e,t,n,i){return{x:(1-i)*r+i*t,y:(1-i)*e+i*n}}function MG(r,e,t,n,i,a){var s=[t-r,n-e];if(vK(s,[0,0]))return Math.sqrt((i-r)*(i-r)+(a-e)*(a-e));var o=[-s[1],s[0]];gK(o,o);var A=[i-r,a-e];return Math.abs(pK(A,o))}function UB(r,e,t,n,i){var a=1-i;return a*a*a*r+3*e*i*a*a+3*t*i*i*a+n*i*i*i}function EF(r,e,t,n){var i=-3*r+9*e-9*t+3*n,a=6*r-12*e+6*t,s=3*e-3*r,o=[],A,l,c;if(Sc(i,0))Sc(a,0)||(A=-s/a,A>=0&&A<=1&&o.push(A));else{var u=a*a-4*i*s;Sc(u,0)?o.push(-a/(2*i)):u>0&&(c=Math.sqrt(u),A=(-a+c)/(2*i),l=(-a-c)/(2*i),A>=0&&A<=1&&o.push(A),l>=0&&l<=1&&o.push(l))}return o}function FG(r,e,t,n,i,a,s,o){for(var A=[r,s],l=[e,o],c=EF(r,t,i,s),u=EF(e,n,a,o),h=0;h<c.length;h++)A.push(UB(r,t,i,s,c[h]));for(var g=0;g<u.length;g++)l.push(UB(e,n,a,o,u[g]));return YQ(A,l)}function kG(r,e,t,n,i,a,s,o,A,l,c){return XQ([r,t,i,s],[e,n,a,o],A,l,UB,c)}function CF(r,e,t,n,i,a,s,o,A,l,c){var u=kG(r,e,t,n,i,a,s,o,A,l,c);return to(u.x,u.y,A,l)}function IG(r){if(r.length<2)return 0;for(var e=0,t=0;t<r.length-1;t++){var n=r[t],i=r[t+1];e+=to(n[0],n[1],i[0],i[1])}return e}function PG(r){return IG(r)}function HB(r,e,t,n){var i=1-n;return i*i*r+2*n*i*e+n*n*t}function BF(r,e,t){var n=r+t-2*e;if(Sc(n,0))return[.5];var i=(r-e)/n;return i<=1&&i>=0?[i]:[]}function OG(r,e,t,n,i,a){var s=BF(r,t,i)[0],o=BF(e,n,a)[0],A=[r,i],l=[e,a];return s!==void 0&&A.push(HB(r,t,i,s)),o!==void 0&&l.push(HB(e,n,a,o)),YQ(A,l)}function LG(r,e,t,n,i,a,s,o){return XQ([r,t,i],[e,n,a],s,o,HB)}function NG(r,e,t,n,i,a,s,o){var A=LG(r,e,t,n,i,a,s,o);return to(A.x,A.y,s,o)}function eU(r,e){this.v=r,this.k=e}function ii(r,e,t,n){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}ii=function(s,o,A,l){function c(u,h){ii(s,u,function(g){return this._invoke(u,h,g)})}o?i?i(s,o,{value:A,enumerable:!l,configurable:!l,writable:!l}):s[o]=A:(c("next",0),c("throw",1),c("return",2))},ii(r,e,t,n)}function A2(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,e,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function a(g,p,v,m){var w=p&&p.prototype instanceof o?p:o,b=Object.create(w.prototype);return ii(b,"_invoke",(function(_,C,M){var F,k,P,N=0,D=M||[],Q=!1,H={p:0,n:0,v:r,a:j,f:j.bind(r,4),d:function(J,ce){return F=J,k=0,P=r,H.n=ce,s}};function j(q,J){for(k=q,P=J,e=0;!Q&&N&&!ce&&e<D.length;e++){var ce,se=D[e],W=H.p,le=se[2];q>3?(ce=le===J)&&(P=se[(k=se[4])?5:(k=3,3)],se[4]=se[5]=r):se[0]<=W&&((ce=q<2&&W<se[1])?(k=0,H.v=J,H.n=se[1]):W<le&&(ce=q<3||se[0]>J||J>le)&&(se[4]=q,se[5]=J,H.n=le,k=0))}if(ce||q>1)return s;throw Q=!0,J}return function(q,J,ce){if(N>1)throw TypeError("Generator is already running");for(Q&&J===1&&j(J,ce),k=J,P=ce;(e=k<2?r:P)||!Q;){F||(k?k<3?(k>1&&(H.n=-1),j(k,P)):H.n=P:H.v=P);try{if(N=2,F){if(k||(q="next"),e=F[q]){if(!(e=e.call(F,P)))throw TypeError("iterator result is not an object");if(!e.done)return e;P=e.value,k<2&&(k=0)}else k===1&&(e=F.return)&&e.call(F),k<2&&(P=TypeError("The iterator does not provide a '"+q+"' method"),k=1);F=r}else if((e=(Q=H.n<0)?P:_.call(C,H))!==s)break}catch(se){F=r,k=1,P=se}finally{N=1}}return{value:e,done:Q}}})(g,v,m),!0),b}var s={};function o(){}function A(){}function l(){}e=Object.getPrototypeOf;var c=[][n]?e(e([][n]())):(ii(e={},n,function(){return this}),e),u=l.prototype=o.prototype=Object.create(c);function h(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,l):(g.__proto__=l,ii(g,i,"GeneratorFunction")),g.prototype=Object.create(u),g}return A.prototype=l,ii(u,"constructor",l),ii(l,"constructor",A),A.displayName="GeneratorFunction",ii(l,i,"GeneratorFunction"),ii(u),ii(u,i,"Generator"),ii(u,n,function(){return this}),ii(u,"toString",function(){return"[object Generator]"}),(A2=function(){return{w:a,m:h}})()}function Mp(r,e){function t(i,a,s,o){try{var A=r[i](a),l=A.value;return l instanceof eU?e.resolve(l.v).then(function(c){t("next",c,s,o)},function(c){t("throw",c,s,o)}):e.resolve(l).then(function(c){A.value=c,s(A)},function(c){return t("throw",c,s,o)})}catch(c){o(c)}}var n;this.next||(ii(Mp.prototype),ii(Mp.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),ii(this,"_invoke",function(i,a,s){function o(){return new e(function(A,l){t(i,s,A,l)})}return n=n?n.then(o,o):o()},!0)}function tU(r,e,t,n,i){return new Mp(A2().w(r,e,t,n),i||Promise)}function DG(r,e,t,n,i){var a=tU(r,e,t,n,i);return a.next().then(function(s){return s.done?s.value:a.next()})}function RG(r){var e=Object(r),t=[];for(var n in e)t.unshift(n);return function i(){for(;t.length;)if((n=t.pop())in e)return i.value=n,i.done=!1,i;return i.done=!0,i}}function xF(r){if(r!=null){var e=r[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],t=0;if(e)return e.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length))return{next:function(){return r&&t>=r.length&&(r=void 0),{value:r&&r[t++],done:!r}}}}throw new TypeError(ll(r)+" is not iterable")}function Or(){var r=A2(),e=r.m(Or),t=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function n(s){var o=typeof s=="function"&&s.constructor;return!!o&&(o===t||(o.displayName||o.name)==="GeneratorFunction")}var i={throw:1,return:2,break:3,continue:3};function a(s){var o,A;return function(l){o||(o={stop:function(){return A(l.a,2)},catch:function(){return l.v},abrupt:function(u,h){return A(l.a,i[u],h)},delegateYield:function(u,h,g){return o.resultName=h,A(l.d,xF(u),g)},finish:function(u){return A(l.f,u)}},A=function(u,h,g){l.p=o.prev,l.n=o.next;try{return u(h,g)}finally{o.next=l.n}}),o.resultName&&(o[o.resultName]=l.v,o.resultName=void 0),o.sent=l.v,o.next=l.n;try{return s.call(this,o)}finally{l.p=o.prev,l.n=o.next}}}return(Or=function(){return{wrap:function(A,l,c,u){return r.w(a(A),l,c,u&&u.reverse())},isGeneratorFunction:n,mark:r.m,awrap:function(A,l){return new eU(A,l)},AsyncIterator:Mp,async:function(A,l,c,u,h){return(n(l)?tU:DG)(a(A),l,c,u,h)},keys:RG,values:xF}})()}function SF(r,e,t,n,i,a,s){try{var o=r[a](s),A=o.value}catch(l){return void t(l)}o.done?e(A):Promise.resolve(A).then(n,i)}function lA(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var a=r.apply(e,t);function s(A){SF(a,n,i,s,o,"next",A)}function o(A){SF(a,n,i,s,o,"throw",A)}s(void 0)})}}function Ko(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=r2(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,s=!0,o=!1;return{s:function(){t=t.call(r)},n:function(){var l=t.next();return s=l.done,l},e:function(l){o=!0,a=l},f:function(){try{s||t.return==null||t.return()}finally{if(o)throw a}}}}function QG(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function _s(r,e){if(r==null)return{};var t,n,i=QG(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}/*!
 * @antv/g-lite
 * @description A core module for rendering engine implements DOM API.
 * @version 2.7.0
 * @date 12/24/2025, 11:55:20 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var we=(function(r){return r.GROUP="g",r.FRAGMENT="fragment",r.CIRCLE="circle",r.ELLIPSE="ellipse",r.IMAGE="image",r.RECT="rect",r.LINE="line",r.POLYLINE="polyline",r.POLYGON="polygon",r.TEXT="text",r.PATH="path",r.HTML="html",r.MESH="mesh",r})({}),ap=(function(r){return r[r.ZERO=0]="ZERO",r[r.NEGATIVE_ONE=1]="NEGATIVE_ONE",r})({}),hA=(function(){function r(){Be(this,r),this.plugins=[]}return xe(r,[{key:"addRenderingPlugin",value:function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)}},{key:"removeAllRenderingPlugins",value:function(){var t=this;this.plugins.forEach(function(n){var i=t.context.renderingPlugins.indexOf(n);i>=0&&t.context.renderingPlugins.splice(i,1)})}}])})(),UG=(function(){function r(e){Be(this,r),this.clipSpaceNearZ=ap.NEGATIVE_ONE,this.plugins=[],this.config=dt({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},e)}return xe(r,[{key:"registerPlugin",value:function(t){var n=this.plugins.findIndex(function(i){return i===t});n===-1&&this.plugins.push(t)}},{key:"unregisterPlugin",value:function(t){var n=this.plugins.findIndex(function(i){return i===t});n>-1&&this.plugins.splice(n,1)}},{key:"getPlugins",value:function(){return this.plugins}},{key:"getPlugin",value:function(t){return this.plugins.find(function(n){return n.name===t})}},{key:"getConfig",value:function(){return this.config}},{key:"setConfig",value:function(t){Object.assign(this.config,t)}}])})(),qy=nA,tc=ys,HG=iK,zG=rK,TF=_p,Wy=OQ,vn=(function(){function r(){Be(this,r),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return xe(r,[{key:"update",value:function(t,n){tc(this.center,t),tc(this.halfExtents,n),Wy(this.min,this.center,this.halfExtents),qy(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,n){qy(this.center,n,t),TF(this.center,this.center,.5),Wy(this.halfExtents,n,t),TF(this.halfExtents,this.halfExtents,.5),tc(this.min,t),tc(this.max,n)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(t){if(!r.isEmpty(t)){if(r.isEmpty(this)){this.setMinMax(t.getMin(),t.getMax());return}var n=this.center,i=n[0],a=n[1],s=n[2],o=this.halfExtents,A=o[0],l=o[1],c=o[2],u=i-A,h=i+A,g=a-l,p=a+l,v=s-c,m=s+c,w=t.center,b=w[0],_=w[1],C=w[2],M=t.halfExtents,F=M[0],k=M[1],P=M[2],N=b-F,D=b+F,Q=_-k,H=_+k,j=C-P,q=C+P;N<u&&(u=N),D>h&&(h=D),Q<g&&(g=Q),H>p&&(p=H),j<v&&(v=j),q>m&&(m=q),n[0]=(u+h)*.5,n[1]=(g+p)*.5,n[2]=(v+m)*.5,o[0]=(h-u)*.5,o[1]=(p-g)*.5,o[2]=(m-v)*.5,this.min[0]=u,this.min[1]=g,this.min[2]=v,this.max[0]=h,this.max[1]=p,this.max[2]=m}}},{key:"setFromTransformedAABB",value:function(t,n){var i=this.center,a=this.halfExtents,s=t.center,o=t.halfExtents,A=n[0],l=n[4],c=n[8],u=n[1],h=n[5],g=n[9],p=n[2],v=n[6],m=n[10],w=Math.abs(A),b=Math.abs(l),_=Math.abs(c),C=Math.abs(u),M=Math.abs(h),F=Math.abs(g),k=Math.abs(p),P=Math.abs(v),N=Math.abs(m);i[0]=n[12]+A*s[0]+l*s[1]+c*s[2],i[1]=n[13]+u*s[0]+h*s[1]+g*s[2],i[2]=n[14]+p*s[0]+v*s[1]+m*s[2],a[0]=w*o[0]+b*o[1]+_*o[2],a[1]=C*o[0]+M*o[1]+F*o[2],a[2]=k*o[0]+P*o[1]+N*o[2],Wy(this.min,i,a),qy(this.max,i,a)}},{key:"intersects",value:function(t){var n=this.getMax(),i=this.getMin(),a=t.getMax(),s=t.getMin();return i[0]<=a[0]&&n[0]>=s[0]&&i[1]<=a[1]&&n[1]>=s[1]&&i[2]<=a[2]&&n[2]>=s[2]}},{key:"intersection",value:function(t){if(!this.intersects(t))return null;var n=new r,i=HG([0,0,0],this.getMin(),t.getMin()),a=zG([0,0,0],this.getMax(),t.getMax());return n.setMinMax(i,a),n}},{key:"getNegativeFarPoint",value:function(t){return t.pnVertexFlag===273?tc([0,0,0],this.min):t.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:t.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(t){return t.pnVertexFlag===273?tc([0,0,0],this.max):t.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:t.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(t){return!t||t.halfExtents[0]===0&&t.halfExtents[1]===0&&t.halfExtents[2]===0}}])})(),jG=(function(){function r(e,t){Be(this,r),this.distance=e||0,this.normal=t||on(0,1,0),this.updatePNVertexFlag()}return xe(r,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(t){return ws(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/LQ(this.normal);_p(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,n,i){var a=this.distanceToPoint(t),s=this.distanceToPoint(n),o=a/(a-s),A=o>=0&&o<=1;return A&&i&&kB(i,t,n,o),A}}])})(),nc=(function(r){return r[r.OUTSIDE=4294967295]="OUTSIDE",r[r.INSIDE=0]="INSIDE",r[r.INDETERMINATE=2147483647]="INDETERMINATE",r})({}),KG=(function(){function r(e){if(Be(this,r),this.planes=[],e)this.planes=e;else for(var t=0;t<6;t++)this.planes.push(new jG)}return xe(r,[{key:"extractFromVPMatrix",value:function(t){var n=yt(t,16),i=n[0],a=n[1],s=n[2],o=n[3],A=n[4],l=n[5],c=n[6],u=n[7],h=n[8],g=n[9],p=n[10],v=n[11],m=n[12],w=n[13],b=n[14],_=n[15];oi(this.planes[0].normal,o-i,u-A,v-h),this.planes[0].distance=_-m,oi(this.planes[1].normal,o+i,u+A,v+h),this.planes[1].distance=_+m,oi(this.planes[2].normal,o+a,u+l,v+g),this.planes[2].distance=_+w,oi(this.planes[3].normal,o-a,u-l,v-g),this.planes[3].distance=_-w,oi(this.planes[4].normal,o-s,u-c,v-p),this.planes[4].distance=_-b,oi(this.planes[5].normal,o+s,u+c,v+p),this.planes[5].distance=_+b,this.planes.forEach(function(C){C.normalize(),C.updatePNVertexFlag()})}}])})(),Kr=(function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Be(this,r),this.x=0,this.y=0,this.x=e,this.y=t}return xe(r,[{key:"clone",value:function(){return new r(this.x,this.y)}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y}}])})(),Uc=(function(){function r(e,t,n,i){Be(this,r),this.x=e,this.y=t,this.width=n,this.height=i,this.left=e,this.right=e+n,this.top=t,this.bottom=t+i}return xe(r,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(t){return new r(t.x,t.y,t.width,t.height)}},{key:"applyTransform",value:function(t,n){var i=nd(t.x,t.y,0,1),a=nd(t.x+t.width,t.y,0,1),s=nd(t.x,t.y+t.height,0,1),o=nd(t.x+t.width,t.y+t.height,0,1),A=bs(),l=bs(),c=bs(),u=bs();Js(A,i,n),Js(l,a,n),Js(c,s,n),Js(u,o,n);var h=Math.min(A[0],l[0],c[0],u[0]),g=Math.min(A[1],l[1],c[1],u[1]),p=Math.max(A[0],l[0],c[0],u[0]),v=Math.max(A[1],l[1],c[1],u[1]);return r.fromRect({x:h,y:g,width:p-h,height:v-g})}}])})(),tn="Method not implemented.",rc="Use document.documentElement instead.",GG="Cannot append a destroyed element.";function Tc(r){return r===void 0?0:r>360||r<-360?r%360:r}var $y=xt();function mi(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return Array.isArray(r)&&r.length===3?n?qs(r):ys($y,r):je(r)?n?on(r,e,t):oi($y,r,e,t):n?on(r[0],r[1]||e,r[2]||t):oi($y,r[0],r[1]||e,r[2]||t)}var VG=Math.PI/180;function Wt(r){return r*VG}var qG=180/Math.PI;function Ni(r){return r*qG}function WG(r){return 360*r}var Fp=Math.PI/2;function $G(r,e){var t=e[0],n=e[1],i=e[2],a=e[3],s=t*t,o=n*n,A=i*i,l=a*a,c=s+o+A+l,u=t*a-n*i;return u>.499995*c?(r[0]=Fp,r[1]=2*Math.atan2(n,t),r[2]=0):u<-.499995*c?(r[0]=-Fp,r[1]=2*Math.atan2(n,t),r[2]=0):(r[0]=Math.asin(2*(t*i-a*n)),r[1]=Math.atan2(2*(t*a+n*i),1-2*(A+l)),r[2]=Math.atan2(2*(t*n+i*a),1-2*(o+A))),r}function YG(r,e){var t,n,i=Rc(xt(),e),a=yt(i,3),s=a[0],o=a[1],A=a[2],l=Math.asin(-e[2]/s);return l<Fp?l>-Fp?(t=Math.atan2(e[6]/o,e[10]/A),n=Math.atan2(e[1]/s,e[0]/s)):(n=0,t=-Math.atan2(e[4]/o,e[5]/o)):(n=0,t=Math.atan2(e[4]/o,e[5]/o)),r[0]=t,r[1]=l,r[2]=n,r}function Yy(r,e){return e.length===16?YG(r,e):$G(r,e)}function XG(r,e,t,n,i){var a=Math.cos(r),s=Math.sin(r);return Nj(n*a,i*s,0,-n*s,i*a,0,e,t,1)}function ZG(r,e,t,n,i,a,s){var o=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,A=2*a,l=t-e,c=n-i,u=A/l,h=A/c,g=(t+e)/l,p=(n+i)/c,v,m,w=s-a,b=s*a;return o?(v=-s/w,m=-b/w):(v=-(s+a)/w,m=-2*b/w),r[0]=u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=h,r[6]=0,r[7]=0,r[8]=g,r[9]=p,r[10]=v,r[11]=-1,r[12]=0,r[13]=0,r[14]=m,r[15]=0,r}function MF(r){var e=r[0],t=r[1],n=r[3],i=r[4],a=Math.sqrt(e*e+t*t),s=Math.sqrt(n*n+i*i),o=e*i-t*n;if(o<0&&(e<i?a=-a:s=-s),a){var A=1/a;e*=A,t*=A}if(s){var l=1/s;n*=l,i*=l}var c=Math.atan2(t,e),u=Ni(c);return[r[6],r[7],a,s,u]}var us=sn(),za=sn(),Hu=bs(),ut=[xt(),xt(),xt()],FF=xt();function JG(r,e,t,n,i,a){if(!e9(us,r)||(Dc(za,us),za[3]=0,za[7]=0,za[11]=0,za[15]=1,Math.abs(yQ(za))<1e-8))return!1;var s=us[3],o=us[7],A=us[11],l=us[12],c=us[13],u=us[14],h=us[15];if(s!==0||o!==0||A!==0){Hu[0]=s,Hu[1]=o,Hu[2]=A,Hu[3]=h;var g=ms(za,za);if(!g)return!1;mQ(za,za),Js(i,Hu,za)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=l,e[1]=c,e[2]=u,t9(ut,us),t[0]=$s(ut[0]),nl(ut[0],ut[0]),n[0]=ws(ut[0],ut[1]),Xy(ut[1],ut[1],ut[0],1,-n[0]),t[1]=$s(ut[1]),nl(ut[1],ut[1]),n[0]/=t[1],n[1]=ws(ut[0],ut[2]),Xy(ut[2],ut[2],ut[0],1,-n[1]),n[2]=ws(ut[1],ut[2]),Xy(ut[2],ut[2],ut[1],1,-n[2]),t[2]=$s(ut[2]),nl(ut[2],ut[2]),n[1]/=t[2],n[2]/=t[2],rp(FF,ut[1],ut[2]),ws(ut[0],FF)<0)for(var p=0;p<3;p++)t[p]*=-1,ut[p][0]*=-1,ut[p][1]*=-1,ut[p][2]*=-1;return a[0]=.5*Math.sqrt(Math.max(1+ut[0][0]-ut[1][1]-ut[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-ut[0][0]+ut[1][1]-ut[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-ut[0][0]-ut[1][1]+ut[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+ut[0][0]+ut[1][1]+ut[2][2],0)),ut[2][1]>ut[1][2]&&(a[0]=-a[0]),ut[0][2]>ut[2][0]&&(a[1]=-a[1]),ut[1][0]>ut[0][1]&&(a[2]=-a[2]),!0}function e9(r,e){var t=e[15];if(t===0)return!1;for(var n=1/t,i=0;i<16;i++)r[i]=e[i]*n;return!0}function t9(r,e){r[0][0]=e[0],r[0][1]=e[1],r[0][2]=e[2],r[1][0]=e[4],r[1][1]=e[5],r[1][2]=e[6],r[2][0]=e[8],r[2][1]=e[9],r[2][2]=e[10]}function Xy(r,e,t,n,i){r[0]=e[0]*n+t[0]*i,r[1]=e[1]*n+t[1]*i,r[2]=e[2]*n+t[2]*i}var en=(function(r){return r[r.ORBITING=0]="ORBITING",r[r.EXPLORING=1]="EXPLORING",r[r.TRACKING=2]="TRACKING",r})({}),zB=(function(r){return r[r.DEFAULT=0]="DEFAULT",r[r.ROTATIONAL=1]="ROTATIONAL",r[r.TRANSLATIONAL=2]="TRANSLATIONAL",r[r.CINEMATIC=3]="CINEMATIC",r})({}),wa=(function(r){return r[r.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",r[r.PERSPECTIVE=1]="PERSPECTIVE",r})({}),nU={UPDATED:"updated"},kF=2e-4,rU=(function(){function r(){Be(this,r),this.clipSpaceNearZ=ap.NEGATIVE_ONE,this.eventEmitter=new fQ,this.matrix=sn(),this.right=on(1,0,0),this.up=on(0,1,0),this.forward=on(0,0,1),this.position=on(0,0,1),this.focalPoint=on(0,0,0),this.distanceVector=on(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=sn(),this.projectionMatrixInverse=sn(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=en.EXPLORING,this.trackingMode=zB.DEFAULT,this.projectionMode=wa.PERSPECTIVE,this.frustum=new KG,this.orthoMatrix=sn()}return xe(r,[{key:"isOrtho",value:function(){return this.projectionMode===wa.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(t){this.enableUpdate=t}},{key:"setType",value:function(t,n){return this.type=t,this.type===en.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===en.TRACKING&&n!==void 0&&this.setTrackingMode(n),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==en.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){return this.rotateWorld=t,this._getAngles(),this}},{key:"getViewTransform",value:function(){return ms(sn(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(t,n){var i=jo(sn(),[t,n,0]);this.jitteredProjectionMatrix=Ai(sn(),i,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setProjectionMatrix",value:function(t){this.projectionMatrix=t}},{key:"setFov",value:function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setNear",value:function(t){return this.projectionMode===wa.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this}},{key:"setFar",value:function(t){return this.projectionMode===wa.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this}},{key:"setViewOffset",value:function(t,n,i,a,s,o){return this.aspect=t/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=a,this.view.width=s,this.view.height=o,this.projectionMode===wa.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===wa.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(t){return this.zoom=t,this.projectionMode===wa.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===wa.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(t,n){var i=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),a=i.x,s=i.y,o=this.roll;this.rotate(0,0,-o),this.setPosition(a,s),this.setFocalPoint(a,s),this.setZoom(t),this.rotate(0,0,o);var A=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),l=A.x,c=A.y,u=on(l-a,c-s,0),h=ws(u,this.right)/$s(this.right),g=ws(u,this.up)/$s(this.up),p=this.getPosition(),v=yt(p,2),m=v[0],w=v[1],b=this.getFocalPoint(),_=yt(b,2),C=_[0],M=_[1];return this.setPosition(m-h,w-g),this.setFocalPoint(C-h,M-g),this}},{key:"setPerspective",value:function(t,n,i,a){var s;this.projectionMode=wa.PERSPECTIVE,this.fov=i,this.near=t,this.far=n,this.aspect=a;var o=this.near*Math.tan(Wt(.5*this.fov))/this.zoom,A=2*o,l=this.aspect*A,c=-.5*l;if((s=this.view)!==null&&s!==void 0&&s.enabled){var u=this.view.fullWidth,h=this.view.fullHeight;c+=this.view.offsetX*l/u,o-=this.view.offsetY*A/h,l*=this.view.width/u,A*=this.view.height/h}return ZG(this.projectionMatrix,c,c+l,o-A,o,t,this.far,this.clipSpaceNearZ===ap.ZERO),ms(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(t,n,i,a,s,o){var A;this.projectionMode=wa.ORTHOGRAPHIC,this.rright=n,this.left=t,this.top=i,this.bottom=a,this.near=s,this.far=o;var l=(this.rright-this.left)/(2*this.zoom),c=(this.top-this.bottom)/(2*this.zoom),u=(this.rright+this.left)/2,h=(this.top+this.bottom)/2,g=u-l,p=u+l,v=h+c,m=h-c;if((A=this.view)!==null&&A!==void 0&&A.enabled){var w=(this.rright-this.left)/this.view.fullWidth/this.zoom,b=(this.top-this.bottom)/this.view.fullHeight/this.zoom;g+=w*this.view.offsetX,p=g+w*this.view.width,v-=b*this.view.offsetY,m=v-b*this.view.height}return this.clipSpaceNearZ===ap.NEGATIVE_ONE?MQ(this.projectionMatrix,g,p,v,m,s,o):FQ(this.projectionMatrix,g,p,v,m,s,o),ms(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.position[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.position[2],a=mi(t,n,i);return this._setPosition(a),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.focalPoint[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.focalPoint[2],a=on(0,1,0);if(this.focalPoint=mi(t,n,i),this.trackingMode===zB.CINEMATIC){var s=FB(xt(),this.focalPoint,this.position);t=s[0],n=s[1],i=s[2];var o=$s(s),A=Ni(Math.asin(n/o)),l=90+Ni(Math.atan2(i,t)),c=sn();_Q(c,c,Wt(l)),bQ(c,c,Wt(A)),a=li(xt(),[0,1,0],c)}return ms(this.matrix,kQ(sn(),this.position,this.focalPoint,a)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<kF&&(this.distance=kF),this.dollyingStep=this.distance/100;var n=xt();t=this.distance;var i=this.forward,a=this.focalPoint;return n[0]=t*i[0]+a[0],n[1]=t*i[1]+a[1],n[2]=t*i[2]+a[2],this._setPosition(n),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(t){return this.maxDistance=t,this}},{key:"setMinDistance",value:function(t){return this.minDistance=t,this}},{key:"setAzimuth",value:function(t){return this.azimuth=Tc(t),this.computeMatrix(),this._getAxes(),this.type===en.ORBITING||this.type===en.EXPLORING?this._getPosition():this.type===en.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=Tc(t),this.computeMatrix(),this._getAxes(),this.type===en.ORBITING||this.type===en.EXPLORING?this._getPosition():this.type===en.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(t){return this.roll=Tc(t),this.computeMatrix(),this._getAxes(),this.type===en.ORBITING||this.type===en.EXPLORING?this._getPosition():this.type===en.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var t=Go(lr(),[0,0,1],Wt(this.roll));oA(this.matrix);var n=Go(lr(),[1,0,0],Wt((this.rotateWorld&&this.type!==en.TRACKING||this.type===en.TRACKING?1:-1)*this.elevation)),i=Go(lr(),[0,1,0],Wt((this.rotateWorld&&this.type!==en.TRACKING||this.type===en.TRACKING?1:-1)*this.azimuth)),a=rA(lr(),i,n);a=rA(lr(),a,t);var s=i2(sn(),a);this.type===en.ORBITING||this.type===en.EXPLORING?(xc(this.matrix,this.matrix,this.focalPoint),Ai(this.matrix,this.matrix,s),xc(this.matrix,this.matrix,[0,0,this.distance])):this.type===en.TRACKING&&(xc(this.matrix,this.matrix,this.position),Ai(this.matrix,this.matrix,s))}},{key:"_setPosition",value:function(t,n,i){this.position=mi(t,n,i);var a=this.matrix;a[12]=this.position[0],a[13]=this.position[1],a[14]=this.position[2],a[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){ys(this.right,mi(Js(bs(),[1,0,0,0],this.matrix))),ys(this.up,mi(Js(bs(),[0,1,0,0],this.matrix))),ys(this.forward,mi(Js(bs(),[0,0,1,0],this.matrix))),nl(this.right,this.right),nl(this.up,this.up),nl(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],n=this.distanceVector[1],i=this.distanceVector[2],a=$s(this.distanceVector);if(a===0){this.elevation=0,this.azimuth=0;return}this.type===en.TRACKING?(this.elevation=Ni(Math.asin(n/a)),this.azimuth=Ni(Math.atan2(-t,-i))):this.rotateWorld?(this.elevation=Ni(Math.asin(n/a)),this.azimuth=Ni(Math.atan2(-t,-i))):(this.elevation=-Ni(Math.asin(n/a)),this.azimuth=-Ni(Math.atan2(-t,-i)))}},{key:"_getPosition",value:function(){ys(this.position,mi(Js(bs(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){sK(this.distanceVector,[0,0,-this.distance],Lj(gQ(),this.matrix)),nA(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=FB(xt(),this.focalPoint,this.position),this.distance=$s(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===wa.ORTHOGRAPHIC){var t=this.position,n=Go(lr(),[0,0,1],-this.roll*Math.PI/180);_d(this.orthoMatrix,n,on((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),on(this.zoom,this.zoom,1),t)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var t=this.getViewTransform(),n=Ai(sn(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(n),this.eventEmitter.emit(nU.UPDATED)}}},{key:"rotate",value:function(t,n,i){throw new Error(tn)}},{key:"pan",value:function(t,n){throw new Error(tn)}},{key:"dolly",value:function(t){throw new Error(tn)}},{key:"createLandmark",value:function(t,n){throw new Error(tn)}},{key:"gotoLandmark",value:function(t,n){throw new Error(tn)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error(tn)}}])})(),n9=(function(r){return r[r.Standard=0]="Standard",r})({}),kp=(function(r){return r[r.ADDED=0]="ADDED",r[r.REMOVED=1]="REMOVED",r[r.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",r})({}),r9=xt(),zu=sn(),i9=lr();function IF(r){if(r.localDirtyFlag){var e=r.localSkew[0]!==0||r.localSkew[1]!==0;if(e){_d(r.localTransform,r.localRotation,r.localPosition,on(1,1,1),r.origin),(r.localSkew[0]!==0||r.localSkew[1]!==0)&&(oA(zu),zu[4]=Math.tan(r.localSkew[0]),zu[1]=Math.tan(r.localSkew[1]),Ai(r.localTransform,r.localTransform,zu));var t=_d(zu,NQ(i9,0,0,0,1),oi(r9,1,1,1),r.localScale,r.origin);Ai(r.localTransform,r.localTransform,t)}else{var n=r.localTransform,i=r.localPosition,a=r.localRotation,s=r.localScale,o=r.origin,A=i[0]!==0||i[1]!==0||i[2]!==0,l=a[3]!==1||a[0]!==0||a[1]!==0||a[2]!==0,c=s[0]!==1||s[1]!==1||s[2]!==1,u=o[0]!==0||o[1]!==0||o[2]!==0;!l&&!c&&!u?A?jo(n,i):oA(n):_d(n,a,i,s,o)}r.localDirtyFlag=!1}}function a9(r,e){r.dirtyFlag&&(e?Ai(r.worldTransform,e.worldTransform,r.localTransform):Dc(r.worldTransform,r.localTransform),r.dirtyFlag=!1)}var iU={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Uc(0,0,0,0)},De=(function(r){return r.COORDINATE="<coordinate>",r.COLOR="<color>",r.PAINT="<paint>",r.NUMBER="<number>",r.ANGLE="<angle>",r.OPACITY_VALUE="<opacity-value>",r.SHADOW_BLUR="<shadow-blur>",r.LENGTH="<length>",r.PERCENTAGE="<percentage>",r.LENGTH_PERCENTAGE="<length> | <percentage>",r.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",r.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",r.LIST_OF_POINTS="<list-of-points>",r.PATH="<path>",r.FILTER="<filter>",r.Z_INDEX="<z-index>",r.OFFSET_DISTANCE="<offset-distance>",r.DEFINED_PATH="<defined-path>",r.MARKER="<marker>",r.TRANSFORM="<transform>",r.TRANSFORM_ORIGIN="<transform-origin>",r.TEXT="<text>",r.TEXT_TRANSFORM="<text-transform>",r})({});function l2(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function aU(r,e){var t=Object.create(r.prototype);for(var n in e)t[n]=e[n];return t}function ih(){}var Dd=.7,Ip=1/Dd,Mc="\\s*([+-]?\\d+)\\s*",Rd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Es="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",s9=/^#([0-9a-f]{3,8})$/,o9=new RegExp(`^rgb\\(${Mc},${Mc},${Mc}\\)$`),A9=new RegExp(`^rgb\\(${Es},${Es},${Es}\\)$`),l9=new RegExp(`^rgba\\(${Mc},${Mc},${Mc},${Rd}\\)$`),c9=new RegExp(`^rgba\\(${Es},${Es},${Es},${Rd}\\)$`),u9=new RegExp(`^hsl\\(${Rd},${Es},${Es}\\)$`),d9=new RegExp(`^hsla\\(${Rd},${Es},${Es},${Rd}\\)$`),PF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};l2(ih,gv,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:OF,formatHex:OF,formatHex8:h9,formatHsl:f9,formatRgb:LF,toString:LF});function OF(){return this.rgb().formatHex()}function h9(){return this.rgb().formatHex8()}function f9(){return sU(this).formatHsl()}function LF(){return this.rgb().formatRgb()}function gv(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=s9.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?NF(e):t===3?new Ui(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Rf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Rf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=o9.exec(r))?new Ui(e[1],e[2],e[3],1):(e=A9.exec(r))?new Ui(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=l9.exec(r))?Rf(e[1],e[2],e[3],e[4]):(e=c9.exec(r))?Rf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=u9.exec(r))?QF(e[1],e[2]/100,e[3]/100,1):(e=d9.exec(r))?QF(e[1],e[2]/100,e[3]/100,e[4]):PF.hasOwnProperty(r)?NF(PF[r]):r==="transparent"?new Ui(NaN,NaN,NaN,0):null}function NF(r){return new Ui(r>>16&255,r>>8&255,r&255,1)}function Rf(r,e,t,n){return n<=0&&(r=e=t=NaN),new Ui(r,e,t,n)}function g9(r){return r instanceof ih||(r=gv(r)),r?(r=r.rgb(),new Ui(r.r,r.g,r.b,r.opacity)):new Ui}function p9(r,e,t,n){return arguments.length===1?g9(r):new Ui(r,e,t,n??1)}function Ui(r,e,t,n){this.r=+r,this.g=+e,this.b=+t,this.opacity=+n}l2(Ui,p9,aU(ih,{brighter(r){return r=r==null?Ip:Math.pow(Ip,r),new Ui(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?Dd:Math.pow(Dd,r),new Ui(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Ui(rl(this.r),rl(this.g),rl(this.b),Pp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:DF,formatHex:DF,formatHex8:v9,formatRgb:RF,toString:RF}));function DF(){return`#${XA(this.r)}${XA(this.g)}${XA(this.b)}`}function v9(){return`#${XA(this.r)}${XA(this.g)}${XA(this.b)}${XA((isNaN(this.opacity)?1:this.opacity)*255)}`}function RF(){const r=Pp(this.opacity);return`${r===1?"rgb(":"rgba("}${rl(this.r)}, ${rl(this.g)}, ${rl(this.b)}${r===1?")":`, ${r})`}`}function Pp(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function rl(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function XA(r){return r=rl(r),(r<16?"0":"")+r.toString(16)}function QF(r,e,t,n){return n<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new Wa(r,e,t,n)}function sU(r){if(r instanceof Wa)return new Wa(r.h,r.s,r.l,r.opacity);if(r instanceof ih||(r=gv(r)),!r)return new Wa;if(r instanceof Wa)return r;r=r.rgb();var e=r.r/255,t=r.g/255,n=r.b/255,i=Math.min(e,t,n),a=Math.max(e,t,n),s=NaN,o=a-i,A=(a+i)/2;return o?(e===a?s=(t-n)/o+(t<n)*6:t===a?s=(n-e)/o+2:s=(e-t)/o+4,o/=A<.5?a+i:2-a-i,s*=60):o=A>0&&A<1?0:s,new Wa(s,o,A,r.opacity)}function m9(r,e,t,n){return arguments.length===1?sU(r):new Wa(r,e,t,n??1)}function Wa(r,e,t,n){this.h=+r,this.s=+e,this.l=+t,this.opacity=+n}l2(Wa,m9,aU(ih,{brighter(r){return r=r==null?Ip:Math.pow(Ip,r),new Wa(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?Dd:Math.pow(Dd,r),new Wa(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,i=2*t-n;return new Ui(Zy(r>=240?r-240:r+120,i,n),Zy(r,i,n),Zy(r<120?r+240:r-120,i,n),this.opacity)},clamp(){return new Wa(UF(this.h),Qf(this.s),Qf(this.l),Pp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=Pp(this.opacity);return`${r===1?"hsl(":"hsla("}${UF(this.h)}, ${Qf(this.s)*100}%, ${Qf(this.l)*100}%${r===1?")":`, ${r})`}`}}));function UF(r){return r=(r||0)%360,r<0?r+360:r}function Qf(r){return Math.max(0,Math.min(1,r||0))}function Zy(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}function rr(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var t=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var o=e?e.apply(this,a):a[0],A=t.cache;if(A.has(o))return A.get(o);var l=r.apply(this,a);return t.cache=A.set(o,l)||A,l};return t.cache=new(rr.Cache||Map),rr.cacheList.push(t.cache),t}rr.Cache=Map;rr.cacheList=[];rr.clearCache=function(){rr.cacheList.forEach(function(r){return r.clear()})};var Ue=(function(r){return r[r.kUnknown=0]="kUnknown",r[r.kNumber=1]="kNumber",r[r.kPercentage=2]="kPercentage",r[r.kEms=3]="kEms",r[r.kPixels=4]="kPixels",r[r.kRems=5]="kRems",r[r.kDegrees=6]="kDegrees",r[r.kRadians=7]="kRadians",r[r.kGradians=8]="kGradians",r[r.kTurns=9]="kTurns",r[r.kMilliseconds=10]="kMilliseconds",r[r.kSeconds=11]="kSeconds",r[r.kInteger=12]="kInteger",r})({}),qa=(function(r){return r[r.kUNumber=0]="kUNumber",r[r.kUPercent=1]="kUPercent",r[r.kULength=2]="kULength",r[r.kUAngle=3]="kUAngle",r[r.kUTime=4]="kUTime",r[r.kUOther=5]="kUOther",r})({}),y9=(function(r){return r[r.kYes=0]="kYes",r[r.kNo=1]="kNo",r})({}),w9=(function(r){return r[r.kYes=0]="kYes",r[r.kNo=1]="kNo",r})({}),b9=[{name:"em",unit_type:Ue.kEms},{name:"px",unit_type:Ue.kPixels},{name:"deg",unit_type:Ue.kDegrees},{name:"rad",unit_type:Ue.kRadians},{name:"grad",unit_type:Ue.kGradians},{name:"ms",unit_type:Ue.kMilliseconds},{name:"s",unit_type:Ue.kSeconds},{name:"rem",unit_type:Ue.kRems},{name:"turn",unit_type:Ue.kTurns}],Hc=(function(r){return r[r.kUnknownType=0]="kUnknownType",r[r.kUnparsedType=1]="kUnparsedType",r[r.kKeywordType=2]="kKeywordType",r[r.kUnitType=3]="kUnitType",r[r.kSumType=4]="kSumType",r[r.kProductType=5]="kProductType",r[r.kNegateType=6]="kNegateType",r[r.kInvertType=7]="kInvertType",r[r.kMinType=8]="kMinType",r[r.kMaxType=9]="kMaxType",r[r.kClampType=10]="kClampType",r[r.kTransformType=11]="kTransformType",r[r.kPositionType=12]="kPositionType",r[r.kURLImageType=13]="kURLImageType",r[r.kColorType=14]="kColorType",r[r.kUnsupportedColorType=15]="kUnsupportedColorType",r})({}),_9=function(e){return b9.find(function(t){return t.name===e}).unit_type},E9=function(e){return e?e==="number"?Ue.kNumber:e==="percent"||e==="%"?Ue.kPercentage:_9(e):Ue.kUnknown},C9=function(e){switch(e){case Ue.kNumber:case Ue.kInteger:return qa.kUNumber;case Ue.kPercentage:return qa.kUPercent;case Ue.kPixels:return qa.kULength;case Ue.kMilliseconds:case Ue.kSeconds:return qa.kUTime;case Ue.kDegrees:case Ue.kRadians:case Ue.kGradians:case Ue.kTurns:return qa.kUAngle;default:return qa.kUOther}},B9=function(e){switch(e){case qa.kUNumber:return Ue.kNumber;case qa.kULength:return Ue.kPixels;case qa.kUPercent:return Ue.kPercentage;case qa.kUTime:return Ue.kSeconds;case qa.kUAngle:return Ue.kDegrees;default:return Ue.kUnknown}},HF=function(e){var t=1;switch(e){case Ue.kPixels:case Ue.kDegrees:case Ue.kSeconds:break;case Ue.kMilliseconds:t=.001;break;case Ue.kRadians:t=180/Math.PI;break;case Ue.kGradians:t=.9;break;case Ue.kTurns:t=360;break}return t},jB=function(e){switch(e){case Ue.kNumber:case Ue.kInteger:return"";case Ue.kPercentage:return"%";case Ue.kEms:return"em";case Ue.kRems:return"rem";case Ue.kPixels:return"px";case Ue.kDegrees:return"deg";case Ue.kRadians:return"rad";case Ue.kGradians:return"grad";case Ue.kMilliseconds:return"ms";case Ue.kSeconds:return"s";case Ue.kTurns:return"turn"}return""},pv=(function(){function r(){Be(this,r)}return xe(r,[{key:"toString",value:function(){return this.buildCSSText(y9.kNo,w9.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=Hc.kUnitType&&this.getType()<=Hc.kClampType}}],[{key:"isAngle",value:function(t){return t===Ue.kDegrees||t===Ue.kRadians||t===Ue.kGradians||t===Ue.kTurns}},{key:"isLength",value:function(t){return t>=Ue.kEms&&t<Ue.kDegrees}},{key:"isRelativeUnit",value:function(t){return t===Ue.kPercentage||t===Ue.kEms||t===Ue.kRems}},{key:"isTime",value:function(t){return t===Ue.kSeconds||t===Ue.kMilliseconds}}])})(),x9=(function(r){function e(t){var n;return Be(this,e),n=wt(this,e),n.colorSpace=t,n}return bt(e,r),xe(e,[{key:"getType",value:function(){return Hc.kColorType}},{key:"to",value:function(n){return this}}])})(pv),Vo=(function(r){return r[r.Constant=0]="Constant",r[r.LinearGradient=1]="LinearGradient",r[r.RadialGradient=2]="RadialGradient",r})({}),Uf=(function(r){function e(t,n){var i;return Be(this,e),i=wt(this,e),i.type=t,i.value=n,i}return bt(e,r),xe(e,[{key:"clone",value:function(){return new e(this.type,this.value)}},{key:"buildCSSText",value:function(n,i,a){return a}},{key:"getType",value:function(){return Hc.kColorType}}])})(pv),Ma=(function(r){function e(t){var n;return Be(this,e),n=wt(this,e),n.value=t,n}return bt(e,r),xe(e,[{key:"clone",value:function(){return new e(this.value)}},{key:"getType",value:function(){return Hc.kKeywordType}},{key:"buildCSSText",value:function(n,i,a){return a+this.value}}])})(pv),S9=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n="";return Number.isFinite(e)?n="NaN":e>0?n="infinity":n="-infinity",n+=t},KB=function(e){return B9(C9(e))},nn=(function(r){function e(t){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ue.kNumber;Be(this,e),n=wt(this,e);var a;return typeof i=="string"?a=E9(i):a=i,n.unit=a,n.value=t,n}return bt(e,r),xe(e,[{key:"clone",value:function(){return new e(this.value,this.unit)}},{key:"equals",value:function(n){var i=n;return this.value===i.value&&this.unit===i.unit}},{key:"getType",value:function(){return Hc.kUnitType}},{key:"convertTo",value:function(n){if(this.unit===n)return new e(this.value,this.unit);var i=KB(this.unit);if(i!==KB(n)||i===Ue.kUnknown)return null;var a=HF(this.unit)/HF(n);return new e(this.value*a,n)}},{key:"buildCSSText",value:function(n,i,a){var s;switch(this.unit){case Ue.kUnknown:break;case Ue.kInteger:s=Number(this.value).toFixed(0);break;case Ue.kNumber:case Ue.kPercentage:case Ue.kEms:case Ue.kRems:case Ue.kPixels:case Ue.kDegrees:case Ue.kRadians:case Ue.kGradians:case Ue.kMilliseconds:case Ue.kSeconds:case Ue.kTurns:{var o=-999999,A=999999,l=this.value,c=jB(this.unit);if(l<o||l>A){var u=jB(this.unit);!Number.isFinite(l)||Number.isNaN(l)?s=S9(l,u):s=l+(u||"")}else s="".concat(l).concat(c)}}return a+=s,a}}])})(pv),Ga=new nn(0,"px");new nn(1,"px");var ul=new nn(0,"deg"),c2=(function(r){function e(t,n,i){var a,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return Be(this,e),a=wt(this,e,["rgb"]),a.r=t,a.g=n,a.b=i,a.alpha=s,a.isNone=o,a}return bt(e,r),xe(e,[{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(n,i,a){return"".concat(a,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])})(x9),zF=new Ma("unset"),T9=new Ma("initial"),M9=new Ma("inherit"),Jy={"":zF,unset:zF,initial:T9,inherit:M9},F9=function(e){return Jy[e]||(Jy[e]=new Ma(e)),Jy[e]},oU=new c2(0,0,0,0,!0),AU=new c2(0,0,0,0),k9=rr(function(r,e,t,n){return new c2(r,e,t,n)},function(r,e,t,n){return"rgba(".concat(r,",").concat(e,",").concat(t,",").concat(n,")")}),xn=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ue.kNumber;return new nn(e,t)};new nn(50,"%");function I9(r){var e=r.type,t=r.value;return e==="hex"?"#".concat(t):e==="literal"?t:e==="rgb"?"rgb(".concat(t.join(","),")"):"rgba(".concat(t.join(","),")")}var P9=(function(){var r={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},e="";function t(se){throw new Error("".concat(e,": ").concat(se))}function n(){var se=i();return e.length>0&&t("Invalid input not EOF"),se}function i(){return _(a)}function a(){return s("linear-gradient",r.linearGradient,A)||s("repeating-linear-gradient",r.repeatingLinearGradient,A)||s("radial-gradient",r.radialGradient,u)||s("repeating-radial-gradient",r.repeatingRadialGradient,u)||s("conic-gradient",r.conicGradient,u)}function s(se,W,le){return o(W,function(fe){var X=le();return X&&(J(r.comma)||t("Missing comma before color stops")),{type:se,orientation:X,colorStops:_(C)}})}function o(se,W){var le=J(se);if(le){J(r.startCall)||t("Missing (");var fe=W(le);return J(r.endCall)||t("Missing )"),fe}}function A(){return l()||c()}function l(){return q("directional",r.sideOrCorner,1)}function c(){return q("angular",r.angleValue,1)}function u(){var se,W=h(),le;return W&&(se=[],se.push(W),le=e,J(r.comma)&&(W=h(),W?se.push(W):e=le)),se}function h(){var se=g()||p();if(se)se.at=m();else{var W=v();if(W){se=W;var le=m();le&&(se.at=le)}else{var fe=w();fe&&(se={type:"default-radial",at:fe})}}return se}function g(){var se=q("shape",/^(circle)/i,0);return se&&(se.style=j()||v()),se}function p(){var se=q("shape",/^(ellipse)/i,0);return se&&(se.style=Q()||v()),se}function v(){return q("extent-keyword",r.extentKeywords,1)}function m(){if(q("position",/^at/,0)){var se=w();return se||t("Missing positioning value"),se}}function w(){var se=b();if(se.x||se.y)return{type:"position",value:se}}function b(){return{x:Q(),y:Q()}}function _(se){var W=se(),le=[];if(W)for(le.push(W);J(r.comma);)W=se(),W?le.push(W):t("One extra comma");return le}function C(){var se=M();return se||t("Expected color definition"),se.length=Q(),se}function M(){return k()||N()||P()||F()}function F(){return q("literal",r.literalColor,0)}function k(){return q("hex",r.hexColor,1)}function P(){return o(r.rgbColor,function(){return{type:"rgb",value:_(D)}})}function N(){return o(r.rgbaColor,function(){return{type:"rgba",value:_(D)}})}function D(){return J(r.number)[1]}function Q(){return q("%",r.percentageValue,1)||H()||j()}function H(){return q("position-keyword",r.positionKeywords,1)}function j(){return q("px",r.pixelValue,1)||q("em",r.emValue,1)}function q(se,W,le){var fe=J(W);if(fe)return{type:se,value:fe[le]}}function J(se){var W=/^[\n\r\t\s]+/.exec(e);W&&ce(W[0].length);var le=se.exec(e);return le&&ce(le[0].length),le}function ce(se){e=e.substring(se)}return function(se){return e=se,n()}})();function O9(r,e,t,n){var i=Wt(n.value),a=0,s=0,o=a+e/2,A=s+t/2,l=Math.abs(e*Math.cos(i))+Math.abs(t*Math.sin(i)),c=r[0]+o-Math.cos(i)*l/2,u=r[1]+A-Math.sin(i)*l/2,h=r[0]+o+Math.cos(i)*l/2,g=r[1]+A+Math.sin(i)*l/2;return{x1:c,y1:u,x2:h,y2:g}}function L9(r,e,t,n,i,a){var s=n.value,o=i.value;n.unit===Ue.kPercentage&&(s=n.value/100*e),i.unit===Ue.kPercentage&&(o=i.value/100*t);var A=Math.max(Li([0,0],[s,o]),Li([0,t],[s,o]),Li([e,t],[s,o]),Li([e,0],[s,o]));return a&&(a instanceof nn?A=a.value:a instanceof Ma&&(a.value==="closest-side"?A=Math.min(s,e-s,o,t-o):a.value==="farthest-side"?A=Math.max(s,e-s,o,t-o):a.value==="closest-corner"&&(A=Math.min(Li([0,0],[s,o]),Li([0,t],[s,o]),Li([e,t],[s,o]),Li([e,0],[s,o]))))),{x:s+r[0],y:o+r[1],r:A}}var N9=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,D9=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,R9=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,lU=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Q9(r){var e,t=r.length;if(r[t-1].length=(e=r[t-1].length)!==null&&e!==void 0?e:{type:"%",value:"100"},t>1){var n;r[0].length=(n=r[0].length)!==null&&n!==void 0?n:{type:"%",value:"0"}}for(var i=0,a=Number(r[0].length.value),s=1;s<t;s++){var o,A=(o=r[s].length)===null||o===void 0?void 0:o.value;if(!it(A)&&!it(a)){for(var l=1;l<s-i;l++)r[i+l].length={type:"%",value:"".concat(a+(Number(A)-a)*l/(s-i))};i=s,a=Number(A)}}}var U9={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},H9=rr(function(r){var e;return r.type==="angular"?e=Number(r.value):e=U9[r.value]||0,xn(e,"deg")}),z9=rr(function(r){var e=50,t=50,n="%",i="%";if((r==null?void 0:r.type)==="position"){var a=r.value,s=a.x,o=a.y;(s==null?void 0:s.type)==="position-keyword"&&(s.value==="left"?e=0:s.value==="center"?e=50:s.value==="right"?e=100:s.value==="top"?t=0:s.value==="bottom"&&(t=100)),(o==null?void 0:o.type)==="position-keyword"&&(o.value==="left"?e=0:o.value==="center"?t=50:o.value==="right"?e=100:o.value==="top"?t=0:o.value==="bottom"&&(t=100)),((s==null?void 0:s.type)==="px"||(s==null?void 0:s.type)==="%"||(s==null?void 0:s.type)==="em")&&(n=s==null?void 0:s.type,e=Number(s.value)),((o==null?void 0:o.type)==="px"||(o==null?void 0:o.type)==="%"||(o==null?void 0:o.type)==="em")&&(i=o==null?void 0:o.type,t=Number(o.value))}return{cx:xn(e,n),cy:xn(t,i)}}),j9=rr(function(r){if(r.indexOf("linear")>-1||r.indexOf("radial")>-1){var e=P9(r);return e.map(function(o){var A=o.type,l=o.orientation,c=o.colorStops;Q9(c);var u=c.map(function(_){return{offset:xn(Number(_.length.value),"%"),color:I9(_)}});if(A==="linear-gradient")return new Uf(Vo.LinearGradient,{angle:l?H9(l):ul,steps:u});if(A==="radial-gradient"&&(l||(l=[{type:"shape",value:"circle"}]),l[0].type==="shape"&&l[0].value==="circle")){var h=z9(l[0].at),g=h.cx,p=h.cy,v;if(l[0].style){var m=l[0].style,w=m.type,b=m.value;w==="extent-keyword"?v=F9(b):v=xn(b,w)}return new Uf(Vo.RadialGradient,{cx:g,cy:p,size:v,steps:u})}})}var t=r[0];if(r[1]==="("||r[2]==="("){if(t==="l"){var n=N9.exec(r);if(n){var i,a=((i=n[2].match(lU))===null||i===void 0?void 0:i.map(function(o){return o.split(":")}))||[];return[new Uf(Vo.LinearGradient,{angle:xn(parseFloat(n[1]),"deg"),steps:a.map(function(o){var A=yt(o,2),l=A[0],c=A[1];return{offset:xn(Number(l)*100,"%"),color:c}})})]}}else if(t==="r"){var s=K9(r);if(s)if(Rt(s))r=s;else return[new Uf(Vo.RadialGradient,s)]}else if(t==="p")return G9(r)}});function K9(r){var e=D9.exec(r);if(e){var t,n=((t=e[4].match(lU))===null||t===void 0?void 0:t.map(function(i){return i.split(":")}))||[];return{cx:xn(50,"%"),cy:xn(50,"%"),steps:n.map(function(i){var a=yt(i,2),s=a[0],o=a[1];return{offset:xn(Number(s)*100,"%"),color:o}})}}return null}function G9(r){var e=R9.exec(r);if(e){var t=e[1],n=e[2];switch(t){case"a":t="repeat";break;case"x":t="repeat-x";break;case"y":t="repeat-y";break;case"n":t="no-repeat";break;default:t="no-repeat"}return{image:n,repetition:t}}return null}function dl(r){return r&&!!r.image}function Op(r){return r&&!it(r.r)&&!it(r.g)&&!it(r.b)}var Cd=rr(function(r){if(dl(r))return dt({repetition:"repeat"},r);if(it(r)&&(r=""),r==="transparent")return AU;if(r==="currentColor")r="black";else if(r==="none")return oU;var e=j9(r);if(e)return e;var t=gv(r),n=[0,0,0,0];return t!==null&&(n[0]=t.r||0,n[1]=t.g||0,n[2]=t.b||0,n[3]=t.opacity),k9.apply(void 0,n)});function V9(r,e){if(!(!Op(r)||!Op(e)))return[[Number(r.r),Number(r.g),Number(r.b),Number(r.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(t){var n=t.slice();if(n[3])for(var i=0;i<3;i++)n[i]=Math.round(Rn(n[i],0,255));return n[3]=Rn(n[3],0,1),"rgba(".concat(n.join(","),")")}]}function ah(r,e){if(it(e))return xn(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(r)>=0)return xn(Number(e),"px");if("deg".search(r)>=0)return xn(Number(e),"deg")}var t=[];e=e.replace(r,function(i){return t.push(i),"U".concat(i)});var n="U(".concat(r.source,")");return t.map(function(i){return xn(Number(e.replace(new RegExp("U".concat(i),"g"),"").replace(new RegExp(n,"g"),"*0")),i)})[0]}var cU=function(e){return ah(new RegExp("px","g"),e)},q9=rr(cU),W9=function(e){return ah(new RegExp("%","g"),e)};rr(W9);var uU=function(e){return je(e)||isFinite(Number(e))?xn(Number(e)||0,"px"):ah(new RegExp("px|%|em|rem","g"),e)},GB=rr(uU),dU=function(e){return ah(new RegExp("deg|rad|grad|turn","g"),e)},$9=rr(dU);function Y9(r,e,t,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a="",s=r.value||0,o=e.value||0,A=KB(r.unit),l=r.convertTo(A),c=e.convertTo(A);return l&&c?(s=l.value,o=c.value,a=jB(r.unit)):(nn.isLength(r.unit)||nn.isLength(e.unit))&&(s=ea(r,i,t),o=ea(e,i,t),a="px"),[s,o,function(u){return u+a}]}function Di(r){var e=0;return r.unit===Ue.kDegrees?e=r.value:r.unit===Ue.kRadians?e=Ni(Number(r.value)):r.unit===Ue.kTurns?e=WG(Number(r.value)):r.value&&(e=r.value),e}function jF(r,e){var t;return Array.isArray(r)?t=r.map(function(n){return Number(n)}):Rt(r)?t=r.split(" ").map(function(n){return Number(n)}):je(r)&&(t=[r]),e===2?t.length===1?[t[0],t[0]]:[t[0],t[1]]:e===4?t.length===1?[t[0],t[0],t[0],t[0]]:t.length===2?[t[0],t[1],t[0],t[1]]:t.length===3?[t[0],t[1],t[2],t[1]]:[t[0],t[1],t[2],t[3]]:e==="even"&&t.length%2===1?[].concat(Ft(t),Ft(t)):t}function ea(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(r.unit===Ue.kPixels)return Number(r.value);if(r.unit===Ue.kPercentage&&t){var i=t.nodeName===we.GROUP?t.getLocalBounds():t.getGeometryBounds();return(n?i.min[e]:0)+r.value/100*i.halfExtents[e]*2}return 0}var X9=function(e){return ah(/deg|rad|grad|turn|px|%/g,e)},Z9=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function J9(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(r=r.toLowerCase().trim(),r==="none")return[];for(var e=/\s*([\w-]+)\(([^)]*)\)/g,t=[],n,i=0;n=e.exec(r);){if(n.index!==i)return[];if(i=n.index+n[0].length,Z9.indexOf(n[1])>-1&&t.push({name:n[1],params:n[2].split(" ").map(function(a){return X9(a)||Cd(a)})}),e.lastIndex===r.length)return t}return[]}function hU(r){return r.toString()}var fU=function(e){return typeof e=="number"?xn(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?xn(Number(e)):xn(0)},VB=rr(fU);rr(function(r){return Rt(r)?r.split(" ").map(VB):r.map(VB)});function u2(r,e){return[r,e,hU]}function d2(r,e){return function(t,n){return[t,n,function(i){return hU(Rn(i,r,e))}]}}function gU(r,e){if(r.length===e.length)return[r,e,function(t){return t}]}function qB(r){return r.parsedStyle.d.totalLength===0&&(r.parsedStyle.d.totalLength=fG(r.parsedStyle.d.absolutePath)),r.parsedStyle.d.totalLength}function eV(r){return r.parsedStyle.points.totalLength===0&&(r.parsedStyle.points.totalLength=PG(r.parsedStyle.points.points)),r.parsedStyle.points.totalLength}function tV(r){for(var e=0;e<r.length;e++){var t=r[e-1],n=r[e],i=n[0];if(i==="M"&&t){var a=t[0],s=[n[1],n[2]],o=void 0;a==="L"||a==="M"?o=[t[1],t[2]]:(a==="C"||a==="A"||a==="Q")&&(o=[t[t.length-2],t[t.length-1]]),o&&Lp(s,o)&&(r.splice(e,1),e--)}}}function nV(r){for(var e=!1,t=r.length,n=0;n<t;n++){var i=r[n],a=i[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function rV(r){for(var e=[],t=[],n=[],i=0;i<r.length;i++){var a=r[i],s=a[0];s==="M"?(n.length&&(t.push(n),n=[]),n.push([a[1],a[2]])):s==="Z"?n.length&&(e.push(n),n=[]):n.push([a[1],a[2]])}return n.length>0&&t.push(n),{polygons:e,polylines:t}}function Lp(r,e){return r[0]===e[0]&&r[1]===e[1]}function iV(r,e){for(var t=[],n=[],i=[],a=0;a<r.length;a++){var s=r[a],o=s.currentPoint,A=s.params,l=s.prePoint,c=void 0;switch(s.command){case"Q":c=OG(l[0],l[1],A[1],A[2],A[3],A[4]);break;case"C":c=FG(l[0],l[1],A[1],A[2],A[3],A[4],A[5],A[6]);break;case"A":var u=s.arcParams;c=SG(u.cx,u.cy,u.rx,u.ry,u.xRotation,u.startAngle,u.endAngle);break;default:t.push(o[0]),n.push(o[1]);break}c&&(s.box=c,t.push(c.x,c.x+c.width),n.push(c.y,c.y+c.height))}t=t.filter(function(C){return!Number.isNaN(C)&&C!==1/0&&C!==-1/0}),n=n.filter(function(C){return!Number.isNaN(C)&&C!==1/0&&C!==-1/0});var h=Bp(t),g=Bp(n),p=Cp(t),v=Cp(n);if(i.length===0)return{x:h,y:g,width:p-h,height:v-g};for(var m=0;m<i.length;m++){var w=i[m],b=w.currentPoint,_=void 0;b[0]===h?(_=Hf(w,e),h-=_.xExtra):b[0]===p&&(_=Hf(w,e),p+=_.xExtra),b[1]===g?(_=Hf(w,e),g-=_.yExtra):b[1]===v&&(_=Hf(w,e),v+=_.yExtra)}return{x:h,y:g,width:p-h,height:v-g}}function Hf(r,e){var t=r.prePoint,n=r.currentPoint,i=r.nextPoint,a=Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),o=Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2),A=Math.acos((a+s-o)/(2*Math.sqrt(a)*Math.sqrt(s)));if(!A||Math.sin(A)===0||Sc(A,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),c=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));l=l>Math.PI/2?Math.PI-l:l,c=c>Math.PI/2?Math.PI-c:c;var u={xExtra:Math.cos(A/2-l)*(e/2*(1/Math.sin(A/2)))-e/2||0,yExtra:Math.cos(c-A/2)*(e/2*(1/Math.sin(A/2)))-e/2||0};return u}function KF(r,e){return[e[0]+(e[0]-r[0]),e[1]+(e[1]-r[1])]}var GF=function(e,t){var n=e.x*t.x+e.y*t.y,i=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2))),a=e.x*t.y-e.y*t.x<0?-1:1,s=a*Math.acos(n/i);return s},VF=function(e,t,n,i,a,s,o,A){t=Math.abs(t),n=Math.abs(n),i=QQ(i,360);var l=Wt(i);if(e.x===o.x&&e.y===o.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(t===0||n===0)return{x:0,y:0,ellipticalArcAngle:0};var c=(e.x-o.x)/2,u=(e.y-o.y)/2,h={x:Math.cos(l)*c+Math.sin(l)*u,y:-Math.sin(l)*c+Math.cos(l)*u},g=Math.pow(h.x,2)/Math.pow(t,2)+Math.pow(h.y,2)/Math.pow(n,2);g>1&&(t*=Math.sqrt(g),n*=Math.sqrt(g));var p=Math.pow(t,2)*Math.pow(n,2)-Math.pow(t,2)*Math.pow(h.y,2)-Math.pow(n,2)*Math.pow(h.x,2),v=Math.pow(t,2)*Math.pow(h.y,2)+Math.pow(n,2)*Math.pow(h.x,2),m=p/v;m=m<0?0:m;var w=(a!==s?1:-1)*Math.sqrt(m),b={x:w*(t*h.y/n),y:w*(-(n*h.x)/t)},_={x:Math.cos(l)*b.x-Math.sin(l)*b.y+(e.x+o.x)/2,y:Math.sin(l)*b.x+Math.cos(l)*b.y+(e.y+o.y)/2},C={x:(h.x-b.x)/t,y:(h.y-b.y)/n},M=GF({x:1,y:0},C),F={x:(-h.x-b.x)/t,y:(-h.y-b.y)/n},k=GF(C,F);!s&&k>0?k-=2*Math.PI:s&&k<0&&(k+=2*Math.PI),k%=2*Math.PI;var P=M+k*A,N=t*Math.cos(P),D=n*Math.sin(P),Q={x:Math.cos(l)*N-Math.sin(l)*D+_.x,y:Math.sin(l)*N+Math.cos(l)*D+_.y,ellipticalArcStartAngle:M,ellipticalArcEndAngle:M+k,ellipticalArcAngle:P,ellipticalArcCenter:_,resultantRx:t,resultantRy:n};return Q};function aV(r){for(var e=[],t=null,n=null,i=null,a=0,s=r.length,o=0;o<s;o++){var A=r[o];n=r[o+1];var l=A[0],c={command:l,prePoint:t,params:A,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(l){case"M":i=[A[1],A[2]],a=o;break;case"A":var u=sV(t,A);c.arcParams=u;break}if(l==="Z")t=i,n=r[a+1];else{var h=A.length;t=[A[h-2],A[h-1]]}n&&n[0]==="Z"&&(n=r[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&Lp(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var g=n?[n[n.length-2],n[n.length-1]]:null;c.nextPoint=g;var p=c.prePoint;if(["L","H","V"].includes(l))c.startTangent=[p[0]-t[0],p[1]-t[1]],c.endTangent=[t[0]-p[0],t[1]-p[1]];else if(l==="Q"){var v=[A[1],A[2]];c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[t[0]-v[0],t[1]-v[1]]}else if(l==="T"){var m=e[o-1],w=KF(m.currentPoint,p);m.command==="Q"?(c.command="Q",c.startTangent=[p[0]-w[0],p[1]-w[1]],c.endTangent=[t[0]-w[0],t[1]-w[1]]):(c.command="TL",c.startTangent=[p[0]-t[0],p[1]-t[1]],c.endTangent=[t[0]-p[0],t[1]-p[1]])}else if(l==="C"){var b=[A[1],A[2]],_=[A[3],A[4]];c.startTangent=[p[0]-b[0],p[1]-b[1]],c.endTangent=[t[0]-_[0],t[1]-_[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[b[0]-_[0],b[1]-_[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[_[0]-b[0],_[1]-b[1]])}else if(l==="S"){var C=e[o-1],M=KF(C.currentPoint,p),F=[A[1],A[2]];C.command==="C"?(c.command="C",c.startTangent=[p[0]-M[0],p[1]-M[1]],c.endTangent=[t[0]-F[0],t[1]-F[1]]):(c.command="SQ",c.startTangent=[p[0]-F[0],p[1]-F[1]],c.endTangent=[t[0]-F[0],t[1]-F[1]])}else if(l==="A"){var k=qF(c,0),P=k.x,N=k.y,D=qF(c,1,!1),Q=D.x,H=D.y;c.startTangent=[P,N],c.endTangent=[Q,H]}e.push(c)}return e}function qF(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=r.arcParams,i=n.rx,a=i===void 0?0:i,s=n.ry,o=s===void 0?0:s,A=n.xRotation,l=n.arcFlag,c=n.sweepFlag,u=VF({x:r.prePoint[0],y:r.prePoint[1]},a,o,A,!!l,!!c,{x:r.currentPoint[0],y:r.currentPoint[1]},e),h=VF({x:r.prePoint[0],y:r.prePoint[1]},a,o,A,!!l,!!c,{x:r.currentPoint[0],y:r.currentPoint[1]},t?e+.005:e-.005),g=h.x-u.x,p=h.y-u.y,v=Math.sqrt(g*g+p*p);return{x:-g/v,y:-p/v}}function zf(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function WB(r,e){return zf(r)*zf(e)?(r[0]*e[0]+r[1]*e[1])/(zf(r)*zf(e)):1}function WF(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(WB(r,e))}function sV(r,e){var t=e[1],n=e[2],i=QQ(Wt(e[3]),Math.PI*2),a=e[4],s=e[5],o=r[0],A=r[1],l=e[6],c=e[7],u=Math.cos(i)*(o-l)/2+Math.sin(i)*(A-c)/2,h=-1*Math.sin(i)*(o-l)/2+Math.cos(i)*(A-c)/2,g=u*u/(t*t)+h*h/(n*n);g>1&&(t*=Math.sqrt(g),n*=Math.sqrt(g));var p=t*t*(h*h)+n*n*(u*u),v=p?Math.sqrt((t*t*(n*n)-p)/p):1;a===s&&(v*=-1),isNaN(v)&&(v=0);var m=n?v*t*h/n:0,w=t?v*-n*u/t:0,b=(o+l)/2+Math.cos(i)*m-Math.sin(i)*w,_=(A+c)/2+Math.sin(i)*m+Math.cos(i)*w,C=[(u-m)/t,(h-w)/n],M=[(-1*u-m)/t,(-1*h-w)/n],F=WF([1,0],C),k=WF(C,M);return WB(C,M)<=-1&&(k=Math.PI),WB(C,M)>=1&&(k=0),s===0&&k>0&&(k-=2*Math.PI),s===1&&k<0&&(k+=2*Math.PI),{cx:b,cy:_,rx:Lp(r,[l,c])?0:t,ry:Lp(r,[l,c])?0:n,startAngle:F,endAngle:F+k,xRotation:i,arcFlag:a,sweepFlag:s}}var pU=function(e){if(e===""||Array.isArray(e)&&e.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var t;try{t=Sp(e)}catch{t=Sp(""),console.error("[g]: Invalid SVG Path definition: ".concat(e))}tV(t);var n=nV(t),i=rV(t),a=i.polygons,s=i.polylines,o=aV(t),A=iV(o,0),l=A.x,c=A.y,u=A.width,h=A.height;return{absolutePath:t,hasArc:n,segments:o,polygons:a,polylines:s,totalLength:0,rect:{x:Number.isFinite(l)?l:0,y:Number.isFinite(c)?c:0,width:Number.isFinite(u)?u:0,height:Number.isFinite(h)?h:0}}},oV=rr(pU);function vU(r){return Rt(r)?oV(r):pU(r)}function AV(r,e,t){var n=r.curve,i=e.curve;(!n||n.length===0)&&(n=NB(r.absolutePath,!1),r.curve=n),(!i||i.length===0)&&(i=NB(e.absolutePath,!1),e.curve=i);var a=[n,i];n.length!==i.length&&(a=$Q(n,i));var s=bF(a[0])!==bF(a[1])?AG(a[0]):oG(a[0]);return[s,pG(a[1],s),function(o){return o}]}function lV(r,e){var t;return Rt(r)?t=r.split(" ").map(function(n){var i=n.split(","),a=yt(i,2),s=a[0],o=a[1];return[Number(s),Number(o)]}):t=r,{points:t,totalLength:0,segments:[]}}function cV(r,e){return[r.points,e.points,function(t){return t}]}var Dn=null,Fc=/\s*(\w+)\(([^)]*)\)/g;function Ii(r){return function(e){var t=0;return r.map(function(n){return n===Dn?e[t++]:n})}}function NA(r){return r}var Qd={matrix:["NNNNNN",[Dn,Dn,0,0,Dn,Dn,0,0,0,0,1,0,Dn,Dn,0,1],NA],matrix3d:["NNNNNNNNNNNNNNNN",NA],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Ii([Dn,Dn,new nn(1)]),NA],scaleX:["N",Ii([Dn,new nn(1),new nn(1)]),Ii([Dn,new nn(1)])],scaleY:["N",Ii([new nn(1),Dn,new nn(1)]),Ii([new nn(1),Dn])],scaleZ:["N",Ii([new nn(1),new nn(1),Dn])],scale3d:["NNN",NA],skew:["Aa",null,NA],skewX:["A",null,Ii([Dn,ul])],skewY:["A",null,Ii([ul,Dn])],translate:["Tt",Ii([Dn,Dn,Ga]),NA],translateX:["T",Ii([Dn,Ga,Ga]),Ii([Dn,Ga])],translateY:["T",Ii([Ga,Dn,Ga]),Ii([Ga,Dn])],translateZ:["L",Ii([Ga,Ga,Dn])],translate3d:["TTL",NA]};function mU(r){for(var e=[],t=r.length,n=0;n<t;n++){var i=r[n],a=i[0],s=i.slice(1);a==="translate"||a==="skew"?s.length===1&&s.push(0):a==="scale"&&s.length===1&&s.push(s[0]);var o=Qd[a];if(!o)return[];var A=s.map(function(l){return xn(l)});e.push({t:a,d:A})}return e}function yU(r){if(Array.isArray(r))return mU(r);if(r=(r||"none").trim(),r==="none")return[];var e=[],t,n=0;for(Fc.lastIndex=0;t=Fc.exec(r);){if(t.index!==n)return[];n=t.index+t[0].length;var i=t[1],a=Qd[i];if(!a)return[];var s=t[2].split(","),o=a[0];if(o.length<s.length)return[];for(var A=[],l=0;l<o.length;l++){var c=s[l],u=o[l],h=void 0;if(c?h={A:function(p){return p.trim()==="0"?ul:$9(p)},N:VB,T:GB,L:q9}[u.toUpperCase()](c):h={a:ul,n:A[0],t:Ga}[u],h===void 0)return[];A.push(h)}if(e.push({t:i,d:A}),Fc.lastIndex===r.length)return e}return[]}function uV(r){if(Array.isArray(r))return mU(r);if(r=(r||"none").trim(),r==="none")return[];var e=[],t,n=0;for(Fc.lastIndex=0;t=Fc.exec(r);){if(t.index!==n)return[];n=t.index+t[0].length;var i=t[1],a=Qd[i];if(!a)return[];var s=t[2].split(","),o=a[0];if(o.length<s.length)return[];for(var A=[],l=0;l<o.length;l++){var c=s[l],u=o[l],h=void 0;if(c?h={A:function(p){return p.trim()==="0"?ul:dU(p)},N:fU,T:uU,L:cU}[u.toUpperCase()](c):h={a:ul,n:A[0],t:Ga}[u],h===void 0)return[];A.push(h)}if(e.push({t:i,d:A}),Fc.lastIndex===r.length)return e}return[]}function dV(r){var e,t,n,i;switch(r.t){case"rotateX":return i=Wt(Di(r.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return i=Wt(Di(r.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return i=Wt(Di(r.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=r.d[0].value,t=r.d[1].value,n=r.d[2].value,i=Wt(Di(r.d[3]));var a=e*e+t*t+n*n;if(a===0)e=1,t=0,n=0;else if(a!==1){var s=Math.sqrt(a);e/=s,t/=s,n/=s}var o=Math.sin(i/2),A=o*Math.cos(i/2),l=o*o;return[1-2*(t*t+n*n)*l,2*(e*t*l+n*A),2*(e*n*l-t*A),0,2*(e*t*l-n*A),1-2*(e*e+n*n)*l,2*(t*n*l+e*A),0,2*(e*n*l+t*A),2*(t*n*l-e*A),1-2*(e*e+t*t)*l,0,0,0,0,1];case"scale":return[r.d[0].value,0,0,0,0,r.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[r.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,r.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,r.d[0].value,0,0,0,0,1];case"scale3d":return[r.d[0].value,0,0,0,0,r.d[1].value,0,0,0,0,r.d[2].value,0,0,0,0,1];case"skew":var c=Wt(Di(r.d[0])),u=Wt(Di(r.d[1]));return[1,Math.tan(u),0,0,Math.tan(c),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return i=Wt(Di(r.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return i=Wt(Di(r.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return e=ea(r.d[0],0,null)||0,t=ea(r.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1];case"translateX":return e=ea(r.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,0,0,1];case"translateY":return t=ea(r.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,t,0,1];case"translateZ":return n=ea(r.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,n,1];case"translate3d":return e=ea(r.d[0],0,null)||0,t=ea(r.d[1],0,null)||0,n=ea(r.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,t,n,1];case"perspective":var h=ea(r.d[0],0,null)||0,g=h?-1/h:0;return[1,0,0,0,0,1,0,0,0,0,1,g,0,0,0,1];case"matrix":return[r.d[0].value,r.d[1].value,0,0,r.d[2].value,r.d[3].value,0,0,0,0,1,0,r.d[4].value,r.d[5].value,0,1];case"matrix3d":return r.d.map(function(p){return p.value})}}function hV(r,e){return[r[0]*e[0]+r[4]*e[1]+r[8]*e[2]+r[12]*e[3],r[1]*e[0]+r[5]*e[1]+r[9]*e[2]+r[13]*e[3],r[2]*e[0]+r[6]*e[1]+r[10]*e[2]+r[14]*e[3],r[3]*e[0]+r[7]*e[1]+r[11]*e[2]+r[15]*e[3],r[0]*e[4]+r[4]*e[5]+r[8]*e[6]+r[12]*e[7],r[1]*e[4]+r[5]*e[5]+r[9]*e[6]+r[13]*e[7],r[2]*e[4]+r[6]*e[5]+r[10]*e[6]+r[14]*e[7],r[3]*e[4]+r[7]*e[5]+r[11]*e[6]+r[15]*e[7],r[0]*e[8]+r[4]*e[9]+r[8]*e[10]+r[12]*e[11],r[1]*e[8]+r[5]*e[9]+r[9]*e[10]+r[13]*e[11],r[2]*e[8]+r[6]*e[9]+r[10]*e[10]+r[14]*e[11],r[3]*e[8]+r[7]*e[9]+r[11]*e[10]+r[15]*e[11],r[0]*e[12]+r[4]*e[13]+r[8]*e[14]+r[12]*e[15],r[1]*e[12]+r[5]*e[13]+r[9]*e[14]+r[13]*e[15],r[2]*e[12]+r[6]*e[13]+r[10]*e[14]+r[14]*e[15],r[3]*e[12]+r[7]*e[13]+r[11]*e[14]+r[15]*e[15]]}function fV(r){return r.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:r.map(dV).reduce(hV)}function $F(r){var e=[0,0,0],t=[1,1,1],n=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return JG(fV(r),e,t,n,i,a),[[e,t,n,a,i]]}var gV=(function(){function r(n,i){for(var a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],s=0;s<4;s++)for(var o=0;o<4;o++)for(var A=0;A<4;A++)a[s][o]+=i[s][A]*n[A][o];return a}function e(n){return n[0][2]===0&&n[0][3]===0&&n[1][2]===0&&n[1][3]===0&&n[2][0]===0&&n[2][1]===0&&n[2][2]===1&&n[2][3]===0&&n[3][2]===0&&n[3][3]===1}function t(n,i,a,s,o){for(var A=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],l=0;l<4;l++)A[l][3]=o[l];for(var c=0;c<3;c++)for(var u=0;u<3;u++)A[3][c]+=n[u]*A[u][c];var h=s[0],g=s[1],p=s[2],v=s[3],m=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];m[0][0]=1-2*(g*g+p*p),m[0][1]=2*(h*g-p*v),m[0][2]=2*(h*p+g*v),m[1][0]=2*(h*g+p*v),m[1][1]=1-2*(h*h+p*p),m[1][2]=2*(g*p-h*v),m[2][0]=2*(h*p-g*v),m[2][1]=2*(g*p+h*v),m[2][2]=1-2*(h*h+g*g),A=r(A,m);var w=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];a[2]&&(w[2][1]=a[2],A=r(A,w)),a[1]&&(w[2][1]=0,w[2][0]=a[0],A=r(A,w)),a[0]&&(w[2][0]=0,w[1][0]=a[0],A=r(A,w));for(var b=0;b<3;b++)for(var _=0;_<3;_++)A[b][_]*=i[b];return e(A)?[A[0][0],A[0][1],A[1][0],A[1][1],A[3][0],A[3][1]]:A[0].concat(A[1],A[2],A[3])}return t})();function pV(r){return r.toFixed(6).replace(".000000","")}function e1(r,e){var t,n;return r.decompositionPair!==e&&(r.decompositionPair=e,t=$F(r)),e.decompositionPair!==r&&(e.decompositionPair=r,n=$F(e)),t[0]===null||n[0]===null?[[!1],[!0],function(i){return i?e[0].d:r[0].d}]:(t[0].push(0),n[0].push(1),[t,n,function(i){var a=mV(t[0][3],n[0][3],i[5]),s=gV(i[0],i[1],i[2],a,i[4]),o=s.map(pV).join(",");return o}])}function vV(r,e){for(var t=0,n=0;n<r.length;n++)t+=r[n]*e[n];return t}function mV(r,e,t){var n=vV(r,e);n=Rn(n,-1,1);var i=[];if(n===1)i=r;else for(var a=Math.acos(n),s=Math.sin(t*a)*1/Math.sqrt(1-n*n),o=0;o<4;o++)i.push(r[o]*(Math.cos(t*a)-n*s)+e[o]*s);return i}function t1(r){return r.replace(/[XY]/,"")}function n1(r){return r.replace(/(X|Y|Z|3d)?$/,"3d")}var yV=function(e,t){return e==="perspective"&&t==="perspective"||(e==="matrix"||e==="matrix3d")&&(t==="matrix"||t==="matrix3d")};function wV(r,e,t){var n=!1;if(!r.length||!e.length){r.length||(n=!0,r=e,e=[]);for(var i=function(){var Q=r[a],H=Q.t,j=Q.d,q=H.substring(0,5)==="scale"?1:0;e.push({t:H,d:j.map(function(J){return typeof J=="number"?xn(q):xn(q,J.unit)})})},a=0;a<r.length;a++)i()}var s=[],o=[],A=[];if(r.length!==e.length){var l=e1(r,e);s=[l[0]],o=[l[1]],A=[["matrix",[l[2]]]]}else for(var c=0;c<r.length;c++){var u=r[c].t,h=e[c].t,g=r[c].d,p=e[c].d,v=Qd[u],m=Qd[h],w=void 0;if(yV(u,h)){var b=e1([r[c]],[e[c]]);s.push(b[0]),o.push(b[1]),A.push(["matrix",[b[2]]]);continue}else if(u===h)w=u;else if(v[2]&&m[2]&&t1(u)===t1(h))w=t1(u),g=v[2](g),p=m[2](p);else if(v[1]&&m[1]&&n1(u)===n1(h))w=n1(u),g=v[1](g),p=m[1](p);else{var _=e1(r,e);s=[_[0]],o=[_[1]],A=[["matrix",[_[2]]]];break}for(var C=[],M=[],F=[],k=0;k<g.length;k++){var P=Y9(g[k],p[k],t,!1,k);C[k]=P[0],M[k]=P[1],F.push(P[2])}s.push(C),o.push(M),A.push([w,F])}if(n){var N=s;s=o,o=N}return[s,o,function(D){return D.map(function(Q,H){var j=Q.map(function(q,J){return A[H][1][J](q)}).join(",");return A[H][0]==="matrix"&&j.split(",").length===16&&(A[H][0]="matrix3d"),A[H][0]==="matrix3d"&&j.split(",").length===6&&(A[H][0]="matrix"),"".concat(A[H][0],"(").concat(j,")")}).join(" ")}]}var bV=rr(function(r){if(Rt(r)){if(r==="text-anchor")return[xn(0,"px"),xn(0,"px")];var e=r.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[GB(YF(e[0])),GB(YF(e[1]))]}return[xn(r[0]||0,"px"),xn(r[1]||0,"px")]});function YF(r){return r==="center"?"50%":r==="left"||r==="top"?"0%":r==="right"||r==="bottom"?"100%":r}var h2=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:De.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:De.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:De.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:De.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:De.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:De.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:De.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:De.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:De.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:De.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:De.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:De.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:De.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:De.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:De.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:De.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:De.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:De.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:De.FILTER},{n:"clipPath",syntax:De.DEFINED_PATH},{n:"textPath",syntax:De.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:De.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:De.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:De.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:De.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:De.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:De.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:De.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:De.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:De.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:De.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:De.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:De.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:De.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:De.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:De.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:De.COORDINATE},{n:"y1",int:!0,l:!0,syntax:De.COORDINATE},{n:"z1",int:!0,l:!0,syntax:De.COORDINATE},{n:"x2",int:!0,l:!0,syntax:De.COORDINATE},{n:"y2",int:!0,l:!0,syntax:De.COORDINATE},{n:"z2",int:!0,l:!0,syntax:De.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:De.PATH,p:50},{n:"points",int:!0,l:!0,syntax:De.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:De.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:De.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:De.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:De.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:De.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:De.NUMBER,d:function(e){return e===we.PATH||e===we.POLYGON||e===we.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:De.MARKER},{n:"markerEnd",syntax:De.MARKER},{n:"markerMid",syntax:De.MARKER},{n:"markerStartOffset",syntax:De.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:De.LENGTH,l:!0,int:!0,d:"0"}],_V=new Set(h2.filter(function(r){return!!r.l}).map(function(r){return r.n})),wU={},EV=(function(){function r(e){var t=this;Be(this,r),this.runtime=e,h2.forEach(function(n){t.registerMetadata(n)})}return xe(r,[{key:"registerMetadata",value:function(t){[t.n].concat(Ft(t.a||[])).forEach(function(n){wU[n]=t})}},{key:"getPropertySyntax",value:function(t){return this.runtime.CSSPropertySyntaxFactory[t]}},{key:"processProperties",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{forceUpdateGeometry:!1};Object.assign(t.attributes,n);var a=t.parsedStyle.clipPath,s=t.parsedStyle.offsetPath;CV(t,n);var o=!!i.forceUpdateGeometry;if(!o){for(var A in n)if(_V.has(A)){o=!0;break}}var l=bU(t);l.has("fill")&&n.fill&&(t.parsedStyle.fill=Cd(n.fill)),l.has("stroke")&&n.stroke&&(t.parsedStyle.stroke=Cd(n.stroke)),l.has("shadowColor")&&n.shadowColor&&(t.parsedStyle.shadowColor=Cd(n.shadowColor)),l.has("filter")&&n.filter&&(t.parsedStyle.filter=J9(n.filter)),l.has("radius")&&!it(n.radius)&&(t.parsedStyle.radius=jF(n.radius,4)),l.has("lineDash")&&!it(n.lineDash)&&(t.parsedStyle.lineDash=jF(n.lineDash,"even")),l.has("points")&&n.points&&(t.parsedStyle.points=lV(n.points)),l.has("d")&&n.d===""&&(t.parsedStyle.d=dt({},iU)),l.has("d")&&n.d&&(t.parsedStyle.d=vU(n.d)),l.has("textTransform")&&n.textTransform&&this.runtime.CSSPropertySyntaxFactory[De.TEXT_TRANSFORM].calculator(null,null,{value:n.textTransform},t,null),l.has("clipPath")&&!ft(n.clipPath)&&this.runtime.CSSPropertySyntaxFactory[De.DEFINED_PATH].calculator("clipPath",a,n.clipPath,t,this.runtime),l.has("offsetPath")&&n.offsetPath&&this.runtime.CSSPropertySyntaxFactory[De.DEFINED_PATH].calculator("offsetPath",s,n.offsetPath,t,this.runtime),l.has("transform")&&n.transform&&(t.parsedStyle.transform=yU(n.transform)),l.has("transformOrigin")&&n.transformOrigin&&(t.parsedStyle.transformOrigin=bV(n.transformOrigin)),l.has("markerStart")&&n.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[De.MARKER].calculator(null,n.markerStart,n.markerStart,null,null)),l.has("markerEnd")&&n.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[De.MARKER].calculator(null,n.markerEnd,n.markerEnd,null,null)),l.has("markerMid")&&n.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[De.MARKER].calculator("",n.markerMid,n.markerMid,null,null)),l.has("zIndex")&&!it(n.zIndex)&&this.runtime.CSSPropertySyntaxFactory[De.Z_INDEX].postProcessor(t),l.has("offsetDistance")&&!it(n.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[De.OFFSET_DISTANCE].postProcessor(t),l.has("transform")&&n.transform&&this.runtime.CSSPropertySyntaxFactory[De.TRANSFORM].postProcessor(t),l.has("transformOrigin")&&n.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[De.TRANSFORM_ORIGIN].postProcessor(t),o&&(t.dirty(!0,!0),i.forceUpdateGeometry||this.runtime.sceneGraphService.dirtyToRoot(t))}},{key:"updateGeometry",value:function(t){var n=t.nodeName,i=this.runtime.geometryUpdaterFactory[n];if(i){var a=t.geometry;a.contentBounds||(a.contentBounds=new vn),a.renderBounds||(a.renderBounds=new vn);var s=t.parsedStyle,o=i.update(s,t),A=o.cx,l=A===void 0?0:A,c=o.cy,u=c===void 0?0:c,h=o.cz,g=h===void 0?0:h,p=o.hwidth,v=p===void 0?0:p,m=o.hheight,w=m===void 0?0:m,b=o.hdepth,_=b===void 0?0:b,C=[Math.abs(v),Math.abs(w),_],M=s.stroke,F=s.lineWidth,k=F===void 0?1:F,P=s.increasedLineWidthForHitTesting,N=P===void 0?0:P,D=s.shadowType,Q=D===void 0?"outer":D,H=s.shadowColor,j=s.filter,q=j===void 0?[]:j,J=s.transformOrigin,ce=[l,u,g];a.contentBounds.update(ce,C);var se=n===we.POLYLINE||n===we.POLYGON||n===we.PATH?Math.SQRT2:.5,W=M&&!M.isNone;if(W){var le=((k||0)+(N||0))*se;C[0]+=le,C[1]+=le}if(a.renderBounds.update(ce,C),H&&Q&&Q!=="inner"){var fe=a.renderBounds,X=fe.min,ne=fe.max,Ie=s.shadowBlur,te=s.shadowOffsetX,$=s.shadowOffsetY,ue=Ie||0,me=te||0,Te=$||0,He=X[0]-ue+me,Je=ne[0]+ue+me,Bt=X[1]-ue+Te,Lt=ne[1]+ue+Te;X[0]=Math.min(X[0],He),ne[0]=Math.max(ne[0],Je),X[1]=Math.min(X[1],Bt),ne[1]=Math.max(ne[1],Lt),a.renderBounds.setMinMax(X,ne)}q.forEach(function(Ct){var Rr=Ct.name,Gt=Ct.params;if(Rr==="blur"){var ui=Gt[0].value;a.renderBounds.update(a.renderBounds.center,nA(a.renderBounds.halfExtents,a.renderBounds.halfExtents,[ui,ui,0]))}else if(Rr==="drop-shadow"){var Hn=Gt[0].value,An=Gt[1].value,Xt=Gt[2].value,ir=a.renderBounds,pr=ir.min,Qr=ir.max,vr=pr[0]-Xt+Hn,qn=Qr[0]+Xt+Hn,Tn=pr[1]-Xt+An,ln=Qr[1]+Xt+An;pr[0]=Math.min(pr[0],vr),Qr[0]=Math.max(Qr[0],qn),pr[1]=Math.min(pr[1],Tn),Qr[1]=Math.max(Qr[1],ln),a.renderBounds.setMinMax(pr,Qr)}}),t.geometry.dirty=!1;var kt=v<0,zt=w<0,ot=(kt?-1:1)*(J?ea(J[0],0,t,!0):0),Qt=(zt?-1:1)*(J?ea(J[1],1,t,!0):0);(ot||Qt)&&t.setOrigin(ot,Qt)}}},{key:"updateSizeAttenuation",value:function(t,n){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=(t.style.rawLineWidth||1)/n,t.nodeName===we.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=(t.style.rawR||1)/n)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===we.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))}}])})();function CV(r,e){var t=bU(r);for(var n in e)t.has(n)&&(r.parsedStyle[n]=e[n])}function bU(r){return r.constructor.PARSED_STYLE_LIST}var BV=(function(){function r(){Be(this,r),this.mixer=u2}return xe(r,[{key:"calculator",value:function(t,n,i,a){return Di(i)}}])})(),xV=(function(){function r(){Be(this,r)}return xe(r,[{key:"calculator",value:function(t,n,i,a,s){return i instanceof Ma&&(i=null),s.sceneGraphService.updateDisplayObjectDependency(t,n,i,a),t==="clipPath"&&a.forEach(function(o){o.childNodes.length===0&&s.sceneGraphService.dirtyToRoot(o)}),i}}])})(),SV=(function(){function r(){Be(this,r),this.parser=Cd,this.mixer=V9}return xe(r,[{key:"calculator",value:function(t,n,i,a){return i instanceof Ma?i.value==="none"?oU:AU:i}}])})(),TV=(function(){function r(){Be(this,r)}return xe(r,[{key:"calculator",value:function(t,n,i){return i instanceof Ma?[]:i}}])})();function XF(r){var e=r.parsedStyle,t=e.fontSize;return it(t)?null:t}var $B=(function(){function r(){Be(this,r),this.mixer=u2}return xe(r,[{key:"calculator",value:function(t,n,i,a,s){if(je(i))return i;if(nn.isRelativeUnit(i.unit)){if(i.unit===Ue.kPercentage)return 0;if(i.unit===Ue.kEms){if(a.parentNode){var o=XF(a.parentNode);if(o)return o*=i.value,o}return 0}if(i.unit===Ue.kRems){var A;if(a!=null&&(A=a.ownerDocument)!==null&&A!==void 0&&A.documentElement){var l=XF(a.ownerDocument.documentElement);if(l)return l*=i.value,l}return 0}}else return i.value}}])})(),MV=(function(){function r(){Be(this,r),this.mixer=gU}return xe(r,[{key:"calculator",value:function(t,n,i){return i.map(function(a){return a.value})}}])})(),FV=(function(){function r(){Be(this,r),this.mixer=gU}return xe(r,[{key:"calculator",value:function(t,n,i){return i.map(function(a){return a.value})}}])})(),kV=(function(){function r(){Be(this,r)}return xe(r,[{key:"calculator",value:function(t,n,i,a){var s;i instanceof Ma&&(i=null);var o=(s=i)===null||s===void 0?void 0:s.cloneNode(!0);return o&&(o.style.isMarker=!0),o}}])})(),IV=(function(){function r(){Be(this,r),this.mixer=u2}return xe(r,[{key:"calculator",value:function(t,n,i){return i.value}}])})(),PV=(function(){function r(){Be(this,r),this.mixer=d2(0,1)}return xe(r,[{key:"calculator",value:function(t,n,i){return i.value}},{key:"postProcessor",value:function(t){var n=t.parsedStyle,i=n.offsetPath,a=n.offsetDistance;if(i){var s=i.nodeName;if(s===we.LINE||s===we.PATH||s===we.POLYLINE){var o=i.getPoint(a);o&&t.setLocalPosition(o.x,o.y)}}}}])})(),OV=(function(){function r(){Be(this,r),this.mixer=d2(0,1)}return xe(r,[{key:"calculator",value:function(t,n,i){return i.value}}])})(),LV=(function(){function r(){Be(this,r),this.parser=vU,this.mixer=AV}return xe(r,[{key:"calculator",value:function(t,n,i){return i instanceof Ma&&i.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Uc(0,0,0,0)}:i}}])})(),NV=xe(function r(){Be(this,r),this.mixer=cV}),DV=(function(r){function e(){var t;Be(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=wt(this,e,[].concat(i)),t.mixer=d2(0,1/0),t}return bt(e,r),xe(e)})($B),RV=(function(){function r(){Be(this,r)}return xe(r,[{key:"calculator",value:function(t,n,i,a){return i instanceof Ma?i.value==="unset"?"":i.value:"".concat(i)}},{key:"postProcessor",value:function(t){t.nodeValue="".concat(t.parsedStyle.text)||""}}])})(),QV=(function(){function r(){Be(this,r)}return xe(r,[{key:"calculator",value:function(t,n,i,a){var s=a.getAttribute("text");if(s){var o=s;i.value==="capitalize"?o=s.charAt(0).toUpperCase()+s.slice(1):i.value==="lowercase"?o=s.toLowerCase():i.value==="uppercase"&&(o=s.toUpperCase()),a.parsedStyle.text=o}return i.value}}])})(),r1=new WeakMap;function UV(r,e,t){if(r){var n=typeof r=="string"?document.getElementById(r):r;r1.has(n)&&r1.get(n).destroy(t),r1.set(n,e)}}var f2=typeof window<"u"&&typeof window.document<"u";function HV(r){return!!r.getAttribute}function zV(r,e){for(var t=0,n=r.length;t<n;){var i=t+n>>>1;_U(r[i],e)<0?t=i+1:n=i}return t}function _U(r,e){var t=Number(r.parsedStyle.zIndex||0),n=Number(e.parsedStyle.zIndex||0);if(t===n){var i=r.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(r)-a.indexOf(e)}}return t-n}function EU(r){var e=r;do{var t,n=(t=e.parsedStyle)===null||t===void 0?void 0:t.clipPath;if(n)return e;e=e.parentElement}while(e!==null);return null}var ZF="px";function jV(r,e,t){f2&&r.style&&(r.style.width=e+ZF,r.style.height=t+ZF)}function CU(r,e){if(f2)return document.defaultView.getComputedStyle(r,null).getPropertyValue(e)}function KV(r){var e=CU(r,"width");return e==="auto"?r.offsetWidth:parseFloat(e)}function GV(r){var e=CU(r,"height");return e==="auto"?r.offsetHeight:parseFloat(e)}var VV=1,qV={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},YB=typeof performance=="object"&&performance.now?performance:Date;function Np(r){return r.nodeName===we.FRAGMENT?!0:r.getRootNode().nodeName===we.FRAGMENT}function yl(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"auto",e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,n=!1,i=!1,a=!!e&&!e.isNone,s=!!t&&!t.isNone;return r==="visiblepainted"||r==="painted"||r==="auto"?(n=a,i=s):r==="visiblefill"||r==="fill"?n=!0:r==="visiblestroke"||r==="stroke"?i=!0:(r==="visible"||r==="all")&&(n=!0,i=!0),[n,i]}var WV=1,$V=function(){return WV++},Cs=typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:{},YV=Date.now(),XV=function(){return Cs.performance&&typeof Cs.performance.now=="function"?Cs.performance.now():Date.now()-YV},rd={},JF=Date.now(),ZV=function(e){if(typeof e!="function")throw new TypeError("".concat(e," is not a function"));var t=Date.now(),n=t-JF,i=n>16?0:16-n,a=$V();return rd[a]=e,Object.keys(rd).length>1||setTimeout(function(){JF=t;var s=rd;rd={},Object.keys(s).forEach(function(o){return s[o](XV())})},i),a},JV=function(e){delete rd[e]},eq=["","webkit","moz","ms","o"],BU=function(e){return typeof e!="string"?ZV:e===""?Cs.requestAnimationFrame:Cs["".concat(e,"RequestAnimationFrame")]},tq=function(e){return typeof e!="string"?JV:e===""?Cs.cancelAnimationFrame:Cs["".concat(e,"CancelAnimationFrame")]||Cs["".concat(e,"CancelRequestAnimationFrame")]},nq=function(e,t){for(var n=0;e[n]!==void 0;){if(t(e[n]))return e[n];n+=1}},xU=nq(eq,function(r){return!!BU(r)}),g2=BU(xU),SU=tq(xU);Cs.requestAnimationFrame=g2;Cs.cancelAnimationFrame=SU;var rq=(function(){function r(){Be(this,r),this.callbacks=[]}return xe(r,[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(t,n){this.callbacks.push(n)}},{key:"promise",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Promise.all(this.callbacks.map(function(a){return a.apply(void 0,n)}))}}])})(),iq=(function(){function r(){Be(this,r),this.callbacks=[]}return xe(r,[{key:"tapPromise",value:function(t,n){this.callbacks.push(n)}},{key:"promise",value:(function(){var e=lA(Or().mark(function n(){var i,a,s,o,A=arguments;return Or().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this.callbacks.length){l.next=6;break}return l.next=1,(i=this.callbacks)[0].apply(i,A);case 1:a=l.sent,s=1;case 2:if(!(s<this.callbacks.length)){l.next=5;break}return o=this.callbacks[s],l.next=3,o(a);case 3:a=l.sent;case 4:s++,l.next=2;break;case 5:return l.abrupt("return",a);case 6:return l.abrupt("return",null);case 7:case"end":return l.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t})()}])})(),pi=(function(){function r(){Be(this,r),this.callbacks=[]}return xe(r,[{key:"tap",value:function(t,n){this.callbacks.push(n)}},{key:"call",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=arguments;this.callbacks.forEach(function(s){s.apply(void 0,a)})}}])})(),i1=(function(){function r(){Be(this,r),this.callbacks=[]}return xe(r,[{key:"tap",value:function(t,n){this.callbacks.push(n)}},{key:"call",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(this.callbacks.length){for(var a=arguments,s=this.callbacks[0].apply(void 0,a),o=1;o<this.callbacks.length;o++){var A=this.callbacks[o];s=A(s)}return s}return null}}])})(),aq=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],sq=/([\"\'])[^\'\"]+\1/;function ek(r){var e=r.fontSize,t=e===void 0?16:e,n=r.fontFamily,i=n===void 0?"sans-serif":n,a=r.fontStyle,s=a===void 0?"normal":a,o=r.fontVariant,A=o===void 0?"normal":o,l=r.fontWeight,c=l===void 0?"normal":l;return{fontSize:t,fontFamily:i,fontStyle:s,fontVariant:A,fontWeight:c}}var tk=rr(function(e){for(var t=ek(e),n=t.fontSize,i=t.fontFamily,a=t.fontStyle,s=t.fontVariant,o=t.fontWeight,A=je(n)&&"".concat(n,"px")||"16px",l=i.split(","),c=l.length-1;c>=0;c--){var u=l[c].trim();!sq.test(u)&&aq.indexOf(u)<0&&(u='"'.concat(u,'"')),l[c]=u}return"".concat(a," ").concat(s," ").concat(o," ").concat(A," ").concat(l.join(","))},function(r){var e=ek(r),t=e.fontSize,n=e.fontFamily,i=e.fontStyle,a=e.fontVariant,s=e.fontWeight;return"".concat(i,"_").concat(a,"_").concat(s,"_").concat(t,"_").concat(n)}),oq=1e-6,ju=function(e){return Math.max(e,oq)};function a1(r,e,t){return oA(r),r[4]=Math.tan(e),r[1]=Math.tan(t),r}var Jn=sn(),Aq=sn(),lq={scale:function(e){qA(Jn,[e[0].value,e[1].value,1].map(function(t){return ju(t)}))},scaleX:function(e){qA(Jn,[e[0].value,1,1].map(function(t){return ju(t)}))},scaleY:function(e){qA(Jn,[1,e[0].value,1].map(function(t){return ju(t)}))},scaleZ:function(e){qA(Jn,[1,1,e[0].value].map(function(t){return ju(t)}))},scale3d:function(e){qA(Jn,[e[0].value,e[1].value,e[2].value].map(function(t){return ju(t)}))},translate:function(e){jo(Jn,[e[0].value,e[1].value,0])},translateX:function(e){jo(Jn,[e[0].value,0,0])},translateY:function(e){jo(Jn,[0,e[0].value,0])},translateZ:function(e){jo(Jn,[0,0,e[0].value])},translate3d:function(e){jo(Jn,[e[0].value,e[1].value,e[2].value])},rotate:function(e){TB(Jn,Wt(Di(e[0])))},rotateX:function(e){CQ(Jn,Wt(Di(e[0])))},rotateY:function(e){BQ(Jn,Wt(Di(e[0])))},rotateZ:function(e){TB(Jn,Wt(Di(e[0])))},rotate3d:function(e){EQ(Jn,Wt(Di(e[3])),[e[0].value,e[1].value,e[2].value])},skew:function(e){a1(Jn,Wt(e[0].value),Wt(e[1].value))},skewX:function(e){a1(Jn,Wt(e[0].value),0)},skewY:function(e){a1(Jn,0,Wt(e[0].value))},matrix:function(e){SB(Jn,e[0].value,e[1].value,0,0,e[2].value,e[3].value,0,0,0,0,1,0,e[4].value,e[5].value,0,1)},matrix3d:function(e){SB.apply(tK,[Jn].concat(Ft(e.map(function(t){return t.value}))))}},cq=on(1,1,1),uq=xt(),nk={translate:function(e,t){Se.sceneGraphService.setLocalScale(e,cq,!1),Se.sceneGraphService.setLocalEulerAngles(e,uq,void 0,void 0,!1),Se.sceneGraphService.setLocalPosition(e,[t[0].value,t[1].value,0],!1),Se.sceneGraphService.dirtyLocalTransform(e,e.transformable)}};function TU(r,e){if(r.length){if(r.length===1&&nk[r[0].t]){nk[r[0].t](e,r[0].d);return}for(var t=oA(Aq),n=0;n<r.length;n++){var i=r[n],a=i.t,s=i.d,o=lq[a];o&&(o(s),PQ(t,t,Jn))}e.setLocalTransform(t)}else e.resetLocalTransform();return e.getLocalTransform()}var dq=(function(){function r(){Be(this,r),this.parser=uV,this.mixer=wV}return xe(r,[{key:"calculator",value:function(t,n,i,a){return i instanceof Ma?[]:i}},{key:"postProcessor",value:function(t){TU(t.parsedStyle.transform,t)}}])})(),hq=(function(){function r(){Be(this,r)}return xe(r,[{key:"postProcessor",value:function(t){var n=t.parsedStyle.transformOrigin;n[0].unit===Ue.kPixels&&n[1].unit===Ue.kPixels?t.setOrigin(n[0].value,n[1].value):t.getGeometryBounds()}}])})(),fq=(function(){function r(){Be(this,r)}return xe(r,[{key:"calculator",value:function(t,n,i,a){return i.value}},{key:"postProcessor",value:function(t){if(t.parentNode){var n=t.parentNode,i=n.renderable,a=n.sortable;i&&n.dirty(),a&&(a.dirty=!0,a.dirtyReason=kp.Z_INDEX_CHANGED)}}}])})(),gq=(function(){function r(){Be(this,r)}return xe(r,[{key:"update",value:function(t,n){var i=t.cx,a=i===void 0?0:i,s=t.cy,o=s===void 0?0:s,A=t.r,l=A===void 0?0:A;return{cx:a,cy:o,hwidth:l,hheight:l}}}])})(),pq=(function(){function r(){Be(this,r)}return xe(r,[{key:"update",value:function(t,n){var i=t.cx,a=i===void 0?0:i,s=t.cy,o=s===void 0?0:s,A=t.rx,l=A===void 0?0:A,c=t.ry,u=c===void 0?0:c;return{cx:a,cy:o,hwidth:l,hheight:u}}}])})(),vq=(function(){function r(){Be(this,r)}return xe(r,[{key:"update",value:function(t){var n=t.x1,i=t.y1,a=t.x2,s=t.y2,o=Math.min(n,a),A=Math.max(n,a),l=Math.min(i,s),c=Math.max(i,s),u=A-o,h=c-l,g=u/2,p=h/2;return{cx:o+g,cy:l+p,hwidth:g,hheight:p}}}])})(),mq=(function(){function r(){Be(this,r)}return xe(r,[{key:"update",value:function(t){var n=t.d,i=n.rect,a=i.x,s=i.y,o=i.width,A=i.height,l=o/2,c=A/2;return{cx:a+l,cy:s+c,hwidth:l,hheight:c}}}])})(),yq=(function(){function r(){Be(this,r)}return xe(r,[{key:"update",value:function(t){if(t.points&&Ki(t.points.points)){var n=t.points.points,i=Math.min.apply(Math,Ft(n.map(function(h){return h[0]}))),a=Math.max.apply(Math,Ft(n.map(function(h){return h[0]}))),s=Math.min.apply(Math,Ft(n.map(function(h){return h[1]}))),o=Math.max.apply(Math,Ft(n.map(function(h){return h[1]}))),A=a-i,l=o-s,c=A/2,u=l/2;return{cx:i+c,cy:s+u,hwidth:c,hheight:u}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])})(),wq=(function(){function r(){Be(this,r)}return xe(r,[{key:"update",value:function(t,n){var i=t.x,a=i===void 0?0:i,s=t.y,o=s===void 0?0:s,A=t.src,l=t.width,c=l===void 0?0:l,u=t.height,h=u===void 0?0:u,g=c,p=h;return A&&!Rt(A)&&(g||(g=A.width,t.width=g),p||(p=A.height,t.height=p)),{cx:a+g/2,cy:o+p/2,hwidth:g/2,hheight:p/2}}}])})(),bq=(function(){function r(e){Be(this,r),this.globalRuntime=e}return xe(r,[{key:"isReadyToMeasure",value:function(t,n){var i=t.text;return i}},{key:"update",value:function(t,n){var i,a=t.text,s=t.textAlign,o=s===void 0?"start":s,A=t.lineWidth,l=A===void 0?1:A,c=t.textBaseline,u=c===void 0?"alphabetic":c,h=t.dx,g=h===void 0?0:h,p=t.dy,v=p===void 0?0:p,m=t.x,w=m===void 0?0:m,b=t.y,_=b===void 0?0:b;if(!this.isReadyToMeasure(t,n))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var C=(n==null||(i=n.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0?void 0:i.getConfig())||{},M=C.offscreenCanvas,F=this.globalRuntime.textService.measureText(a,t,M);t.metrics=F;var k=F.width,P=F.height,N=k/2,D=P/2,Q=w+N;o==="center"||o==="middle"?Q+=l/2-N:(o==="right"||o==="end")&&(Q+=l-N*2);var H=_-D;return u==="middle"?H+=D:u==="top"||u==="hanging"?H+=D*2:u==="alphabetic"||(u==="bottom"||u==="ideographic")&&(H+=0),g&&(Q+=g),v&&(H+=v),{cx:Q,cy:H,hwidth:N,hheight:D}}}])})(),_q=(function(){function r(){Be(this,r)}return xe(r,[{key:"update",value:function(t,n){return{cx:0,cy:0,hwidth:0,hheight:0}}}])})(),Eq=(function(){function r(){Be(this,r)}return xe(r,[{key:"update",value:function(t,n){var i=t.x,a=i===void 0?0:i,s=t.y,o=s===void 0?0:s,A=t.width,l=A===void 0?0:A,c=t.height,u=c===void 0?0:c;return{cx:a+l/2,cy:o+u/2,hwidth:l/2,hheight:u/2}}}])})(),vv=(function(){function r(e){Be(this,r),this.eventPhase=r.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Kr,this.page=new Kr,this.canvas=new Kr,this.viewport=new Kr,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}return xe(r,[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error(tn)}}])})(),MU=(function(r){function e(){var t;Be(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=wt(this,e,[].concat(i)),t.client=new Kr,t.movement=new Kr,t.offset=new Kr,t.global=new Kr,t.screen=new Kr,t}return bt(e,r),xe(e,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(n){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(n)}},{key:"initMouseEvent",value:function(){throw new Error(tn)}}])})(vv),Dp=(function(r){function e(){var t;Be(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=wt(this,e,[].concat(i)),t.width=0,t.height=0,t.isPrimary=!1,t}return bt(e,r),xe(e,[{key:"getCoalescedEvents",value:function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])})(MU),XB=(function(r){function e(){return Be(this,e),wt(this,e,arguments)}return bt(e,r),xe(e,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])})(MU),cr=(function(r){function e(t,n){var i;return Be(this,e),i=wt(this,e,[null]),i.type=t,i.detail=n==null?void 0:n.detail,n&&!("detail"in n)&&(i.detail=n),Object.assign(i,n),i}return bt(e,r),xe(e)})(vv),FU=(function(){function r(){Be(this,r),this.emitter=new fQ}return xe(r,[{key:"on",value:function(t,n,i){return this.addEventListener(t,n,i),this}},{key:"addEventListener",value:function(t,n,i){var a=!1,s=!1;if(Ld(i))a=i;else if(i){var o=i.capture;a=o===void 0?!1:o;var A=i.once;s=A===void 0?!1:A}a&&(t+="capture"),n=$e(n)?n:n.handleEvent;var l=$e(n)?void 0:n;return s?this.emitter.once(t,n,l):this.emitter.on(t,n,l),this}},{key:"off",value:function(t,n,i){return t?this.removeEventListener(t,n,i):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var t;(t=this.emitter)===null||t===void 0||t.removeAllListeners()}},{key:"removeEventListener",value:function(t,n,i){var a;if(!this.emitter)return this;var s=Ld(i)?i:i==null?void 0:i.capture;s&&(t+="capture"),n=$e(n)?n:(a=n)===null||a===void 0?void 0:a.handleEvent;var o=$e(n)?void 0:n;return this.emitter.off(t,n,o),this}},{key:"emit",value:function(t,n){this.dispatchEvent(new cr(t,n))}},{key:"dispatchEventToSelf",value:function(t){t.target||(t.target=this),t.currentTarget=this,this.emitter.emit(t.type,t)}},{key:"dispatchEvent",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0;if(i)return this.dispatchEventToSelf(t),!0;var a;if(this.document)a=this;else if(this.defaultView)a=this.defaultView;else{var s;a=(s=this.ownerDocument)===null||s===void 0?void 0:s.defaultView}if(a){if(t.manager=a.getEventService(),!t.manager)return!1;t.defaultPrevented=!1,t.path?t.path.length=0:t.page=[],n||(t.target=this),t.manager.dispatchEvent(t,t.type,n)}else this.dispatchEventToSelf(t);return!t.defaultPrevented}}])})(),kn=(function(r){function e(){var t;Be(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=wt(this,e,[].concat(i)),t.shadow=!1,t.ownerDocument=null,t.isConnected=!1,t.baseURI="",t.childNodes=[],t.nodeType=0,t.nodeName="",t.nodeValue=null,t.mutations=void 0,t.parentNode=null,t.destroyed=!1,t}return bt(e,r),xe(e,[{key:"textContent",get:function(){var n="";this.nodeName===we.TEXT&&(n+=this.style.text);var i=Ko(this.childNodes),a;try{for(i.s();!(a=i.n()).done;){var s=a.value;s.nodeName===we.TEXT?n+=s.nodeValue:n+=s.textContent}}catch(o){i.e(o)}finally{i.f()}return n},set:function(n){var i=this;this.childNodes.slice().forEach(function(a){i.removeChild(a)}),this.nodeName===we.TEXT&&(this.style.text="".concat(n))}},{key:"getRootNode",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(n):n.composed&&this.host?this.host.getRootNode(n):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(n){throw new Error(tn)}},{key:"lookupNamespaceURI",value:function(n){throw new Error(tn)}},{key:"lookupPrefix",value:function(n){throw new Error(tn)}},{key:"normalize",value:function(){throw new Error(tn)}},{key:"isEqualNode",value:function(n){return this===n}},{key:"isSameNode",value:function(n){return this.isEqualNode(n)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(n){if(n===this)return 0;for(var i=n,a=this,s=[i],o=[a];(A=i.parentNode)!==null&&A!==void 0?A:a.parentNode;){var A;i=i.parentNode?(s.push(i.parentNode),i.parentNode):i,a=a.parentNode?(o.push(a.parentNode),a.parentNode):a}if(i!==a)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var l=s.length>o.length?s:o,c=l===s?o:s;if(l[l.length-c.length]===c[0])return l===s?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var u=l.length-c.length,h=c.length-1;h>=0;h--){var g=c[h],p=l[u+h];if(p!==g){var v=g.parentNode.childNodes;return v.indexOf(g)<v.indexOf(p)?c===s?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:l===s?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(n){return this.contains(n)}},{key:"contains",value:function(n){for(var i=n;i&&this!==i;)i=i.parentNode;return!!i}},{key:"getAncestor",value:function(n){for(var i=this;n>0&&i;)i=i.parentNode,n--;return i}},{key:"forEach",value:function(n){for(var i=[this];i.length>0;){var a=i.pop(),s=n(a);if(s===!1)break;for(var o=a.childNodes.length-1;o>=0;o--)i.push(a.childNodes[o])}}}],[{key:"isNode",value:function(n){return!!n.childNodes}}])})(FU);kn.DOCUMENT_POSITION_DISCONNECTED=1;kn.DOCUMENT_POSITION_PRECEDING=2;kn.DOCUMENT_POSITION_FOLLOWING=4;kn.DOCUMENT_POSITION_CONTAINS=8;kn.DOCUMENT_POSITION_CONTAINED_BY=16;kn.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var Cq=2048,Bq=(function(){function r(e,t){var n=this;Be(this,r),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=sn(),this.tmpVec3=xt(),this.onPointerDown=function(i){var a=n.createPointerEvent(i);if(n.dispatchEvent(a,"pointerdown"),a.pointerType==="touch")n.dispatchEvent(a,"touchstart");else if(a.pointerType==="mouse"||a.pointerType==="pen"){var s=a.button===2;n.dispatchEvent(a,s?"rightdown":"mousedown")}var o=n.trackingData(i.pointerId);o.pressTargetsByButton[i.button]=a.composedPath(),n.freeEvent(a)},this.onPointerUp=function(i){var a=YB.now(),s=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0);if(n.dispatchEvent(s,"pointerup"),s.pointerType==="touch")n.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var o=s.button===2;n.dispatchEvent(s,o?"rightup":"mouseup")}var A=n.trackingData(i.pointerId),l=n.findMountedTarget(A.pressTargetsByButton[i.button]),c=l;if(l&&!s.composedPath().includes(l)){for(var u=l;u&&!s.composedPath().includes(u);){if(s.currentTarget=u,n.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")n.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var h=s.button===2;n.notifyTarget(s,h?"rightupoutside":"mouseupoutside")}kn.isNode(u)&&(u=u.parentNode)}delete A.pressTargetsByButton[i.button],c=u}if(c){var g,p=n.clonePointerEvent(s,"click");p.target=c,p.path=[],A.clicksByButton[i.button]||(A.clicksByButton[i.button]={clickCount:0,target:p.target,timeStamp:a});var v=n.context.renderingContext.root.ownerDocument.defaultView,m=A.clicksByButton[i.button];m.target===p.target&&a-m.timeStamp<v.getConfig().dblClickSpeed?++m.clickCount:m.clickCount=1,m.target=p.target,m.timeStamp=a,p.detail=m.clickCount,(g=s.detail)!==null&&g!==void 0&&g.preventClick||(!n.context.config.useNativeClickEvent&&(p.pointerType==="mouse"||p.pointerType==="touch")&&n.dispatchEvent(p,"click"),n.dispatchEvent(p,"pointertap")),n.freeEvent(p)}n.freeEvent(s)},this.onPointerMove=function(i){var a=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0),s=a.pointerType==="mouse"||a.pointerType==="pen",o=n.trackingData(i.pointerId),A=n.findMountedTarget(o.overTargets);if(o.overTargets&&A!==a.target){var l=i.type==="mousemove"?"mouseout":"pointerout",c=n.createPointerEvent(i,l,A||void 0);if(n.dispatchEvent(c,"pointerout"),s&&n.dispatchEvent(c,"mouseout"),!a.composedPath().includes(A)){var u=n.createPointerEvent(i,"pointerleave",A||void 0);for(u.eventPhase=u.AT_TARGET;u.target&&!a.composedPath().includes(u.target);)u.currentTarget=u.target,n.notifyTarget(u),s&&n.notifyTarget(u,"mouseleave"),kn.isNode(u.target)&&(u.target=u.target.parentNode);n.freeEvent(u)}n.freeEvent(c)}if(A!==a.target){var h=i.type==="mousemove"?"mouseover":"pointerover",g=n.clonePointerEvent(a,h);n.dispatchEvent(g,"pointerover"),s&&n.dispatchEvent(g,"mouseover");for(var p=A&&kn.isNode(A)&&A.parentNode;p&&p!==(kn.isNode(n.rootTarget)&&n.rootTarget.parentNode)&&p!==a.target;)p=p.parentNode;var v=!p||p===(kn.isNode(n.rootTarget)&&n.rootTarget.parentNode);if(v){var m=n.clonePointerEvent(a,"pointerenter");for(m.eventPhase=m.AT_TARGET;m.target&&m.target!==A&&m.target!==(kn.isNode(n.rootTarget)&&n.rootTarget.parentNode);)m.currentTarget=m.target,n.notifyTarget(m),s&&n.notifyTarget(m,"mouseenter"),kn.isNode(m.target)&&(m.target=m.target.parentNode);n.freeEvent(m)}n.freeEvent(g)}n.dispatchEvent(a,"pointermove"),a.pointerType==="touch"&&n.dispatchEvent(a,"touchmove"),s&&(n.dispatchEvent(a,"mousemove"),n.cursor=n.getCursor(a.target)),o.overTargets=a.composedPath(),n.freeEvent(a)},this.onPointerOut=function(i){var a=n.trackingData(i.pointerId);if(a.overTargets){var s=i.pointerType==="mouse"||i.pointerType==="pen",o=n.findMountedTarget(a.overTargets),A=n.createPointerEvent(i,"pointerout",o||void 0);n.dispatchEvent(A),s&&n.dispatchEvent(A,"mouseout");var l=n.createPointerEvent(i,"pointerleave",o||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(kn.isNode(n.rootTarget)&&n.rootTarget.parentNode);)l.currentTarget=l.target,n.notifyTarget(l),s&&n.notifyTarget(l,"mouseleave"),kn.isNode(l.target)&&(l.target=l.target.parentNode);a.overTargets=null,n.freeEvent(A),n.freeEvent(l)}n.cursor=null},this.onPointerOver=function(i){var a=n.trackingData(i.pointerId),s=n.createPointerEvent(i),o=s.pointerType==="mouse"||s.pointerType==="pen";n.dispatchEvent(s,"pointerover"),o&&n.dispatchEvent(s,"mouseover"),s.pointerType==="mouse"&&(n.cursor=n.getCursor(s.target));var A=n.clonePointerEvent(s,"pointerenter");for(A.eventPhase=A.AT_TARGET;A.target&&A.target!==(kn.isNode(n.rootTarget)&&n.rootTarget.parentNode);)A.currentTarget=A.target,n.notifyTarget(A),o&&n.notifyTarget(A,"mouseenter"),kn.isNode(A.target)&&(A.target=A.target.parentNode);a.overTargets=s.composedPath(),n.freeEvent(s),n.freeEvent(A)},this.onPointerUpOutside=function(i){var a=n.trackingData(i.pointerId),s=n.findMountedTarget(a.pressTargetsByButton[i.button]),o=n.createPointerEvent(i);if(s){for(var A=s;A;)o.currentTarget=A,n.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch"||(o.pointerType==="mouse"||o.pointerType==="pen")&&n.notifyTarget(o,o.button===2?"rightupoutside":"mouseupoutside"),kn.isNode(A)&&(A=A.parentNode);delete a.pressTargetsByButton[i.button]}n.freeEvent(o)},this.onWheel=function(i){var a=n.createWheelEvent(i);n.dispatchEvent(a),n.freeEvent(a)},this.onClick=function(i){if(n.context.config.useNativeClickEvent){var a=n.createPointerEvent(i);n.dispatchEvent(a),n.freeEvent(a)}},this.onPointerCancel=function(i){var a=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0);n.dispatchEvent(a),n.freeEvent(a)},this.globalRuntime=e,this.context=t}return xe(r,[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var t=this.context.contextService.getBoundingClientRect(),n=1,i=1,a=this.context.contextService.getDomElement();if(a&&t){var s=a.offsetWidth,o=a.offsetHeight;s&&o&&(n=t.width/s,i=t.height/o)}return{scaleX:n,scaleY:i,bbox:t}}},{key:"client2Viewport",value:function(t){var n=this.getScale(),i=n.scaleX,a=n.scaleY,s=n.bbox;return new Kr((t.x-((s==null?void 0:s.left)||0))/i,(t.y-((s==null?void 0:s.top)||0))/a)}},{key:"viewport2Client",value:function(t){var n=this.getScale(),i=n.scaleX,a=n.scaleY,s=n.bbox;return new Kr((t.x+((s==null?void 0:s.left)||0))*i,(t.y+((s==null?void 0:s.top)||0))*a)}},{key:"viewport2Canvas",value:function(t){var n=t.x,i=t.y,a=this.rootTarget.defaultView,s=a.getCamera(),o=this.context.config,A=o.width,l=o.height,c=s.getPerspectiveInverse(),u=s.getWorldTransform(),h=Ai(this.tmpMatrix,u,c),g=oi(this.tmpVec3,n/A*2-1,(1-i/l)*2-1,0);return li(g,g,h),new Kr(g[0],g[1])}},{key:"canvas2Viewport",value:function(t){var n=this.rootTarget.defaultView,i=n.getCamera(),a=i.getPerspective(),s=i.getViewTransform(),o=Ai(this.tmpMatrix,a,s),A=oi(this.tmpVec3,t.x,t.y,0);li(this.tmpVec3,this.tmpVec3,o);var l=this.context.config,c=l.width,u=l.height;return new Kr((A[0]+1)/2*c,(1-(A[1]+1)/2)*u)}},{key:"setPickHandler",value:function(t){this.pickHandler=t}},{key:"addEventMapping",value:function(t,n){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:n,priority:0}),this.mappingTable[t].sort(function(i,a){return i.priority-a.priority})}},{key:"mapEvent",value:function(t){if(this.rootTarget){var n=this.mappingTable[t.type];if(n)for(var i=0,a=n.length;i<a;i++)n[i].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}}},{key:"dispatchEvent",value:function(t,n,i){if(!i)t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,n);else{t.eventPhase=t.AT_TARGET;var a=this.rootTarget.defaultView||null;t.currentTarget=a,this.notifyListeners(t,n)}}},{key:"propagate",value:function(t,n){if(t.target){var i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var a=i.length-1;a>=1;a--)if(t.currentTarget=i[a],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,n),!(t.propagationStopped||t.propagationImmediatelyStopped)){var s=i.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var o=s+1;o<i.length;o++)if(t.currentTarget=i[o],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(t){var n=[t],i=this.rootTarget.defaultView||null;if(i&&i===t)return n.unshift(i.document),n;for(var a=0;a<Cq&&t!==this.rootTarget;a++)kn.isNode(t)&&t.parentNode&&(n.push(t.parentNode),t=t.parentNode);return i&&n.push(i),n}},{key:"hitTest",value:function(t){var n=t.viewportX,i=t.viewportY,a=this.context.config,s=a.width,o=a.height,A=a.disableHitTesting;return n<0||i<0||n>s||i>o?null:!A&&this.pickHandler(t)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(t,n){var i,a=n==null?void 0:n.target;if((i=a)!==null&&i!==void 0&&i.shadowRoot&&(a=n.composedPath()[0]),a){if(a===t)return!0;if(t&&t.contains)return t.contains(a)}return n!=null&&n.composedPath?n.composedPath().indexOf(t)>-1:!1}},{key:"getExistedHTML",value:function(t){if(t.nativeEvent.composedPath)for(var n=0,i=t.nativeEvent.composedPath();n<i.length;n++){var a=i[n],s=this.nativeHTMLMap.get(a);if(s)return s}return null}},{key:"pickTarget",value:function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})}},{key:"createPointerEvent",value:function(t,n,i,a){var s=this.allocateEvent(Dp);this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t;var o=this.getExistedHTML(s),A=this.context.contextService.getDomElement();return s.target=i??(o||this.isNativeEventFromCanvas(A,s.nativeEvent)&&this.pickTarget(s)||a),typeof n=="string"&&(s.type=n),s}},{key:"createWheelEvent",value:function(t){var n=this.allocateEvent(XB);this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t;var i=this.getExistedHTML(n),a=this.context.contextService.getDomElement();return n.target=i||this.isNativeEventFromCanvas(a,n.nativeEvent)&&this.pickTarget(n),n}},{key:"trackingData",value:function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}},{key:"cloneWheelEvent",value:function(t){var n=this.allocateEvent(XB);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=t.type,n}},{key:"clonePointerEvent",value:function(t,n){var i=this.allocateEvent(Dp);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=n??i.type,i}},{key:"copyPointerData",value:function(t,n){n.pointerId=t.pointerId,n.width=t.width,n.height=t.height,n.isPrimary=t.isPrimary,n.pointerType=t.pointerType,n.pressure=t.pressure,n.tangentialPressure=t.tangentialPressure,n.tiltX=t.tiltX,n.tiltY=t.tiltY,n.twist=t.twist}},{key:"copyMouseData",value:function(t,n){n.altKey=t.altKey,n.button=t.button,n.buttons=t.buttons,n.ctrlKey=t.ctrlKey,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.client.copyFrom(t.client),n.movement.copyFrom(t.movement),n.canvas.copyFrom(t.canvas),n.screen.copyFrom(t.screen),n.global.copyFrom(t.global),n.offset.copyFrom(t.offset)}},{key:"copyWheelData",value:function(t,n){n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ}},{key:"copyData",value:function(t,n){n.isTrusted=t.isTrusted,n.timeStamp=YB.now(),n.type=t.type,n.detail=t.detail,n.view=t.view,n.page.copyFrom(t.page),n.viewport.copyFrom(t.viewport)}},{key:"allocateEvent",value:function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var n=this.eventPool.get(t).pop()||new t(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.target=null,n}},{key:"freeEvent",value:function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var n=t.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(t)}},{key:"notifyTarget",value:function(t,n){n=n??t.type;var i=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(n,"capture"):n;this.notifyListeners(t,i),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,n)}},{key:"notifyListeners",value:function(t,n){var i=t.currentTarget.emitter,a=i._events[n];if(a)if("fn"in a)a.once&&i.removeListener(n,a.fn,void 0,!0),a.fn.call(t.currentTarget||a.context,t);else for(var s=0;s<a.length&&!t.propagationImmediatelyStopped;s++)a[s].once&&i.removeListener(n,a[s].fn,void 0,!0),a[s].fn.call(t.currentTarget||a[s].context,t)}},{key:"findMountedTarget",value:function(t){if(!t)return null;for(var n=t[t.length-1],i=t.length-2;i>=0;i--){var a=t[i];if(a===this.rootTarget||kn.isNode(a)&&a.parentNode===n)n=t[i];else break}return n}},{key:"getCursor",value:function(t){for(var n=t;n;){var i=HV(n)&&n.getAttribute("cursor");if(i)return i;n=kn.isNode(n)&&n.parentNode}}}])})(),p2=(function(){function r(){Be(this,r)}return xe(r,[{key:"getOrCreateCanvas",value:function(t,n){if(this.canvas)return this.canvas;if(t||Se.offscreenCanvas)this.canvas=t||Se.offscreenCanvas,this.context=this.canvas.getContext("2d",dt({willReadFrequently:!0},n));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",dt({willReadFrequently:!0},n)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch{this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",dt({willReadFrequently:!0},n))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(t,n){return this.context?this.context:(this.getOrCreateCanvas(t,n),this.context)}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch{}try{return document.createElement("canvas")}catch{}return null}}])})(),kc=(function(r){return r[r.CAMERA_CHANGED=0]="CAMERA_CHANGED",r[r.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",r[r.NONE=2]="NONE",r})({}),xq=(function(){function r(e,t){Be(this,r),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new pi,initAsync:new rq,dirtycheck:new i1,cull:new i1,beginFrame:new pi,beforeRender:new pi,render:new pi,afterRender:new pi,endFrame:new pi,destroy:new pi,pick:new iq,pickSync:new i1,pointerDown:new pi,pointerUp:new pi,pointerMove:new pi,pointerOut:new pi,pointerOver:new pi,pointerWheel:new pi,pointerCancel:new pi,click:new pi},this.globalRuntime=e,this.context=t}return xe(r,[{key:"init",value:function(t){var n=this,i=dt(dt({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(a){a.apply(i,n.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,t()):this.hooks.initAsync.promise().then(function(){n.inited=!0,t()}).catch(function(a){})}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){var t=this.context.config.renderer,n=t.getConfig(),i=n.enableDirtyRectangleRendering;return!i||this.context.renderingContext.renderReasons.has(kc.CAMERA_CHANGED)}},{key:"render",value:function(t,n,i){var a=this,s=t.getConfig(),o=this.context.renderingContext;if(this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0,this.globalRuntime.sceneGraphService.syncHierarchy(o.root),this.globalRuntime.sceneGraphService.notifyMutationObservers(t),o.renderReasons.size&&this.inited){o.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var A=o.renderReasons.size===1&&o.renderReasons.has(kc.CAMERA_CHANGED),l=!s.disableRenderHooks||!A;l&&this.renderDisplayObject(o.root,s,o),this.hooks.beginFrame.call(n),l&&o.renderListCurrentFrame.forEach(function(c){a.hooks.beforeRender.call(c),a.hooks.render.call(c),a.hooks.afterRender.call(c)}),this.hooks.endFrame.call(n),o.renderListCurrentFrame=[],o.renderReasons.clear(),i()}}},{key:"renderDisplayObject",value:function(t,n,i){var a=this,s=n.renderer.getConfig(),o=s.enableDirtyCheck,A=s.enableCulling;function l(v){var m=v.renderable,w=v.sortable,b=o?m.dirty||i.dirtyRectangleRenderingDisabled?v:null:v,_=null;b&&(_=A?a.hooks.cull.call(b,a.context.camera):b,_&&(a.stats.rendered+=1,i.renderListCurrentFrame.push(_))),v.dirty(!1),w.renderOrder=a.zIndexCounter,a.zIndexCounter+=1,a.stats.total+=1,w.dirty&&(a.sort(v,w),w.dirty=!1,w.dirtyChildren=[],w.dirtyReason=void 0)}for(var c=[t];c.length>0;){var u,h=c.pop();l(h);for(var g=((u=h.sortable)===null||u===void 0||(u=u.sorted)===null||u===void 0?void 0:u.length)>0?h.sortable.sorted:h.childNodes,p=g.length-1;p>=0;p--)c.push(g[p])}}},{key:"sort",value:function(t,n){var i,a;(n==null||(i=n.sorted)===null||i===void 0?void 0:i.length)>0&&n.dirtyReason!==kp.Z_INDEX_CHANGED?n.dirtyChildren.forEach(function(s){var o=n.sorted.indexOf(s);o>-1&&n.sorted.splice(o,1);var A=t.childNodes.indexOf(s);if(A>-1)if(n.sorted.length===0)n.sorted.push(s);else{var l=zV(n.sorted,s);n.sorted.splice(l,0,s)}}):n.sorted=t.childNodes.slice().sort(_U),((a=n.sorted)===null||a===void 0?void 0:a.length)>0&&t.childNodes.filter(function(s){return s.parsedStyle.zIndex}).length===0&&(n.sorted=[])}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call()}},{key:"dirty",value:function(){this.context.renderingContext.renderReasons.add(kc.DISPLAY_OBJECT_CHANGED)}}])})(),Sq=/\[\s*(.*)=(.*)\s*\]/,Tq=(function(){function r(){Be(this,r)}return xe(r,[{key:"selectOne",value:function(t,n){var i=this;if(t.startsWith("."))return n.find(function(A){return((A==null?void 0:A.classList)||[]).indexOf(i.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.find(function(A){return A.id===i.getIdOrClassname(t)});if(t.startsWith("[")){var a=this.getAttribute(t),s=a.name,o=a.value;return s?n.find(function(A){return n!==A&&(s==="name"?A.name===o:i.attributeToString(A,s)===o)}):null}return n.find(function(A){return n!==A&&A.nodeName===t})}},{key:"selectAll",value:function(t,n){var i=this;if(t.startsWith("."))return n.findAll(function(A){return n!==A&&((A==null?void 0:A.classList)||[]).indexOf(i.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.findAll(function(A){return n!==A&&A.id===i.getIdOrClassname(t)});if(t.startsWith("[")){var a=this.getAttribute(t),s=a.name,o=a.value;return s?n.findAll(function(A){return n!==A&&(s==="name"?A.name===o:i.attributeToString(A,s)===o)}):[]}return n.findAll(function(A){return n!==A&&A.nodeName===t})}},{key:"is",value:function(t,n){if(t.startsWith("."))return n.className===this.getIdOrClassname(t);if(t.startsWith("#"))return n.id===this.getIdOrClassname(t);if(t.startsWith("[")){var i=this.getAttribute(t),a=i.name,s=i.value;return a==="name"?n.name===s:this.attributeToString(n,a)===s}return n.nodeName===t}},{key:"getIdOrClassname",value:function(t){return t.substring(1)}},{key:"getAttribute",value:function(t){var n=t.match(Sq),i="",a="";return n&&n.length>2&&(i=n[1].replace(/"/g,""),a=n[2].replace(/"/g,"")),{name:i,value:a}}},{key:"attributeToString",value:function(t,n){if(!t.getAttribute)return"";var i=t.getAttribute(n);return it(i)?"":i.toString?i.toString():""}}])})(),Ot=(function(r){return r.ATTR_MODIFIED="DOMAttrModified",r.INSERTED="DOMNodeInserted",r.MOUNTED="DOMNodeInsertedIntoDocument",r.REMOVED="removed",r.UNMOUNTED="DOMNodeRemovedFromDocument",r.REPARENT="reparent",r.DESTROY="destroy",r.BOUNDS_CHANGED="bounds-changed",r.CULLED="culled",r})({}),Bs=(function(r){function e(t,n,i,a,s,o,A,l){var c;return Be(this,e),c=wt(this,e,[null]),c.relatedNode=n,c.prevValue=i,c.newValue=a,c.attrName=s,c.attrChange=o,c.prevParsedValue=A,c.newParsedValue=l,c.type=t,c}return bt(e,r),xe(e)})(vv);Bs.ADDITION=2;Bs.MODIFICATION=1;Bs.REMOVAL=3;var Mq=new Bs(Ot.REPARENT,null,"","","",0,"",""),Fq=a2(),jf=xt(),kq=on(1,1,1),Iq=sn(),Pq=a2(),DA=xt(),Oq=sn(),RA=lr(),Lq=xt(),Nq=lr(),Dq=xt(),Ku=xt(),QA=xt(),Kf=sn(),rk=lr(),ik=lr(),Gf=lr(),Rq=(function(){function r(e){Be(this,r),this.displayObjectDependencyMap=new WeakMap,this.runtime=e}return xe(r,[{key:"matches",value:function(t,n){return this.runtime.sceneGraphSelector.is(t,n)}},{key:"querySelector",value:function(t,n){return this.runtime.sceneGraphSelector.selectOne(t,n)}},{key:"querySelectorAll",value:function(t,n){return this.runtime.sceneGraphSelector.selectAll(t,n)}},{key:"attach",value:function(t,n,i){var a,s=!1;t.parentNode&&(s=t.parentNode!==n,this.detach(t));var o=t.nodeName===we.FRAGMENT,A=Np(n);t.parentNode=n;var l=o?t.childNodes:[t];je(i)?l.forEach(function(v){n.childNodes.splice(i,0,v),v.parentNode=n}):l.forEach(function(v){n.childNodes.push(v),v.parentNode=n});var c=n,u=c.sortable;if((u!=null&&(a=u.sorted)!==null&&a!==void 0&&a.length||u.dirty||t.parsedStyle.zIndex)&&(u.dirtyChildren.indexOf(t)===-1&&u.dirtyChildren.push(t),u.dirty=!0,u.dirtyReason=kp.ADDED),!A){if(o)this.dirtyFragment(t);else{var h=t.transformable;h&&this.dirtyWorldTransform(t,h)}if(s){var g,p=((g=n.ownerDocument)===null||g===void 0||(g=g.defaultView)===null||g===void 0||(g=g.getConfig())===null||g===void 0||(g=g.future)===null||g===void 0?void 0:g.experimentalCancelEventPropagation)===!0;t.dispatchEvent(Mq,p,p)}}}},{key:"detach",value:function(t){var n,i;if(t.parentNode){var a=t.transformable,s=t.parentNode,o=s.sortable;(o!=null&&(n=o.sorted)!==null&&n!==void 0&&n.length||(i=t.style)!==null&&i!==void 0&&i.zIndex)&&(o.dirtyChildren.indexOf(t)===-1&&o.dirtyChildren.push(t),o.dirty=!0,o.dirtyReason=kp.REMOVED);var A=t.parentNode.childNodes.indexOf(t);A>-1&&t.parentNode.childNodes.splice(A,1),a&&this.dirtyWorldTransform(t,a),t.parentNode=null}}},{key:"getLocalPosition",value:function(t){return t.transformable.localPosition}},{key:"getLocalRotation",value:function(t){return t.transformable.localRotation}},{key:"getLocalScale",value:function(t){return t.transformable.localScale}},{key:"getLocalSkew",value:function(t){return t.transformable.localSkew}},{key:"getLocalTransform",value:function(t){var n=t.transformable;return IF(n),n.localTransform}},{key:"setLocalPosition",value:function(t,n){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=t.transformable;Ku[0]=n[0],Ku[1]=n[1],Ku[2]=(i=n[2])!==null&&i!==void 0?i:0,!Uu(s.localPosition,Ku)&&(ys(s.localPosition,Ku),a&&this.dirtyLocalTransform(t,s))}},{key:"translateLocal",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=on(n,i,a));var s=t.transformable;Uu(n,jf)||(oK(n,n,s.localRotation),nA(s.localPosition,s.localPosition,n),this.dirtyLocalTransform(t,s))}},{key:"setLocalRotation",value:function(t,n,i,a,s){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;typeof n=="number"&&(n=NQ(RA,n,i,a,s));var A=t.transformable;Lf(A.localRotation,n),o&&this.dirtyLocalTransform(t,A)}},{key:"rotateLocal",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=on(n,i,a));var s=t.transformable;Of(ik,n[0],n[1],n[2]),pF(s.localRotation,s.localRotation,ik),this.dirtyLocalTransform(t,s)}},{key:"setLocalScale",value:function(t,n){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=t.transformable;oi(DA,n[0],n[1],(i=n[2])!==null&&i!==void 0?i:s.localScale[2]),!Uu(DA,s.localScale)&&(ys(s.localScale,DA),a&&this.dirtyLocalTransform(t,s))}},{key:"scaleLocal",value:function(t,n){var i,a=t.transformable;nK(a.localScale,a.localScale,oi(DA,n[0],n[1],(i=n[2])!==null&&i!==void 0?i:1)),this.dirtyLocalTransform(t,a)}},{key:"setLocalSkew",value:function(t,n,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;typeof n=="number"&&(n=fK(Pq,n,i));var s=t.transformable;hK(s.localSkew,n),a&&this.dirtyLocalTransform(t,s)}},{key:"setLocalEulerAngles",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;typeof n=="number"&&(n=on(n,i,a));var o=t.transformable;Of(o.localRotation,n[0],n[1],n[2]),s&&this.dirtyLocalTransform(t,o)}},{key:"setLocalTransform",value:function(t,n){var i=wp(Lq,n),a=bp(Nq,n),s=Rc(Dq,n);this.setLocalScale(t,s,!1),this.setLocalPosition(t,i,!1),this.setLocalRotation(t,a,void 0,void 0,void 0,!1),this.dirtyLocalTransform(t,t.transformable)}},{key:"resetLocalTransform",value:function(t){this.setLocalScale(t,kq,!1),this.setLocalPosition(t,jf,!1),this.setLocalEulerAngles(t,jf,void 0,void 0,!1),this.setLocalSkew(t,Fq,void 0,!1),this.dirtyLocalTransform(t,t.transformable)}},{key:"getPosition",value:function(t){var n=t.transformable;return wp(n.position,this.getWorldTransform(t,n))}},{key:"getRotation",value:function(t){var n=t.transformable;return bp(n.rotation,this.getWorldTransform(t,n))}},{key:"getScale",value:function(t){var n=t.transformable;return Rc(n.scaling,this.getWorldTransform(t,n))}},{key:"getOrigin",value:function(t){return t.getGeometryBounds(),t.transformable.origin}},{key:"getWorldTransform",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.transformable;return!n.localDirtyFlag&&!n.dirtyFlag||(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.internalUpdateTransform(t)),n.worldTransform}},{key:"setPosition",value:function(t,n){var i,a=t.transformable;if(QA[0]=n[0],QA[1]=n[1],QA[2]=(i=n[2])!==null&&i!==void 0?i:0,!Uu(this.getPosition(t),QA)){if(ys(a.position,QA),t.parentNode===null||!t.parentNode.transformable)ys(a.localPosition,QA);else{var s=t.parentNode.transformable;Dc(Kf,s.worldTransform),ms(Kf,Kf),li(a.localPosition,QA,Kf)}this.dirtyLocalTransform(t,a)}}},{key:"translate",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=oi(DA,n,i,a)),!Uu(n,jf)&&(nA(DA,this.getPosition(t),n),this.setPosition(t,DA))}},{key:"setRotation",value:function(t,n,i,a,s){var o=t.transformable;if(typeof n=="number"&&(n=dK(n,i,a,s)),t.parentNode===null||!t.parentNode.transformable)this.setLocalRotation(t,n);else{var A=this.getRotation(t.parentNode);Lf(RA,A),jy(RA,RA),rA(o.localRotation,RA,n),Ep(o.localRotation,o.localRotation),this.dirtyLocalTransform(t,o)}}},{key:"rotate",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=on(n,i,a));var s=t.transformable;if(t.parentNode===null||!t.parentNode.transformable)this.rotateLocal(t,n);else{var o=RA;Of(o,n[0],n[1],n[2]);var A=this.getRotation(t),l=this.getRotation(t.parentNode);Lf(Gf,l),jy(Gf,Gf),rA(o,Gf,o),rA(s.localRotation,o,A),Ep(s.localRotation,s.localRotation),this.dirtyLocalTransform(t,s)}}},{key:"setOrigin",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=[n,i,a]);var s=t.transformable;if(!(n[0]===s.origin[0]&&n[1]===s.origin[1]&&n[2]===s.origin[2])){var o=s.origin;o[0]=n[0],o[1]=n[1],o[2]=n[2]||0,this.dirtyLocalTransform(t,s)}}},{key:"setEulerAngles",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=on(n,i,a));var s=t.transformable;if(t.parentNode===null||!t.parentNode.transformable)this.setLocalEulerAngles(t,n);else{Of(s.localRotation,n[0],n[1],n[2]);var o=this.getRotation(t.parentNode);Lf(rk,jy(RA,o)),pF(s.localRotation,s.localRotation,rk),this.dirtyLocalTransform(t,s)}}},{key:"getGeometryBounds",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=t,a=i.geometry;a.dirty&&Se.styleValueRegistry.updateGeometry(t);var s=n?a.renderBounds:a.contentBounds||null;return s||new vn}},{key:"getTransformedGeometryBounds",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0,a=this.getGeometryBounds(t,n);if(!vn.isEmpty(a)){var s=i||new vn;return s.setFromTransformedAABB(a,this.getWorldTransform(t)),s}return null}},{key:"getBounds",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=t,s=a.renderable;if(!s.boundsDirty&&!i&&s.bounds)return s.bounds;if(!s.renderBoundsDirty&&i&&s.renderBounds)return s.renderBounds;var o=i?s.renderBounds:s.bounds,A=this.getTransformedGeometryBounds(t,i,o),l=t.childNodes;if(l.forEach(function(h){var g=n.getBounds(h,i);g&&(A?A.add(g):(A=o||new vn,A.update(g.center,g.halfExtents)))}),A||(A=new vn),i){var c=EU(t);if(c){var u=c.parsedStyle.clipPath.getBounds(i);A?u&&(A=u.intersection(A)):A.update(u.center,u.halfExtents)}}return i?(s.renderBounds=A,s.renderBoundsDirty=!1):(s.bounds=A,s.boundsDirty=!1),A}},{key:"getLocalBounds",value:function(t){if(t.parentNode){var n=Iq;t.parentNode.transformable&&(n=ms(Oq,this.getWorldTransform(t.parentNode)));var i=this.getBounds(t);if(!vn.isEmpty(i)){var a=new vn;return a.setFromTransformedAABB(i,n),a}}return this.getBounds(t)}},{key:"getBoundingClientRect",value:function(t){var n,i,a=this.getGeometryBounds(t);vn.isEmpty(a)||(i=new vn,i.setFromTransformedAABB(a,this.getWorldTransform(t)));var s=(n=t.ownerDocument)===null||n===void 0||(n=n.defaultView)===null||n===void 0?void 0:n.getContextService().getBoundingClientRect();if(i){var o=i.getMin(),A=yt(o,2),l=A[0],c=A[1],u=i.getMax(),h=yt(u,2),g=h[0],p=h[1];return new Uc(l+((s==null?void 0:s.left)||0),c+((s==null?void 0:s.top)||0),g-l,p-c)}return new Uc((s==null?void 0:s.left)||0,(s==null?void 0:s.top)||0,0,0)}},{key:"internalUpdateTransform",value:function(t){var n,i=(n=t.parentNode)===null||n===void 0?void 0:n.transformable;IF(t.transformable),a9(t.transformable,i)}},{key:"internalUpdateElement",value:function(t,n){var i,a,s,o,A=((i=t.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig())===null||i===void 0||(i=i.future)===null||i===void 0?void 0:i.experimentalAttributeUpdateOptimization)===!0,l=n[n.length-1],c=(l==null?void 0:l.transformDirty)||((a=t.transformable)===null||a===void 0?void 0:a.localDirtyFlag);if(t.transformable){var u;(u=t.transformable).dirtyFlag||(u.dirtyFlag=c)}if(this.internalUpdateTransform(t),c){var h;(h=t.dirty)===null||h===void 0||h.call(t,!0,!0)}var g=((s=t.renderable)===null||s===void 0?void 0:s.boundsDirty)||((o=t.renderable)===null||o===void 0?void 0:o.renderBoundsDirty);if((c||g)&&(l==null?void 0:l.shapeUpdated)===!1&&A)for(var p=n.length-1;p>=0;){var v,m,w=n[p];if(w.shapeUpdated)break;(v=(m=w.node).dirty)===null||v===void 0||v.call(m,!0,!0),w.shapeUpdated=!0,p-=1}return c}},{key:"syncHierarchy",value:function(t){for(var n,i,a=[t],s=t.parentNode?[{node:t.parentNode,transformDirty:((n=t.parentNode.transformable)===null||n===void 0?void 0:n.localDirtyFlag)||((i=t.parentNode.transformable)===null||i===void 0?void 0:i.dirtyFlag),shapeUpdated:!1}]:[];a.length>0;){for(var o=a.pop(),A=s[s.length-1];s.length>0&&o.parentNode!==A.node;)A=s.pop();var l=this.internalUpdateElement(o,s);if(o.childNodes.length>0){for(var c=o.childNodes.length-1;c>=0;c--)a.push(o.childNodes[c]);s.push({node:o,transformDirty:l,shapeUpdated:!1})}}}},{key:"dirtyLocalTransform",value:function(t,n){Np(t)||n.localDirtyFlag||(n.localDirtyFlag=!0,n.dirtyFlag||this.dirtyWorldTransform(t,n))}},{key:"dirtyWorldTransform",value:function(t,n){this.dirtyWorldInternal(t,n),this.dirtyToRoot(t,!0)}},{key:"dirtyWorldInternal",value:function(t,n){var i,a=this,s=((i=t.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig())===null||i===void 0||(i=i.future)===null||i===void 0?void 0:i.experimentalAttributeUpdateOptimization)===!0;n.dirtyFlag||(n.dirtyFlag=!0,t.dirty(!0,!0),s||t.childNodes.forEach(function(o){var A=o.transformable;a.dirtyWorldInternal(o,A)}))}},{key:"dirtyToRoot",value:function(t){for(var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=t,s=((n=t.ownerDocument)===null||n===void 0||(n=n.defaultView)===null||n===void 0||(n=n.getConfig())===null||n===void 0||(n=n.future)===null||n===void 0?void 0:n.experimentalAttributeUpdateOptimization)===!0;a;){var o,A;if((o=(A=a).dirty)===null||o===void 0||o.call(A,!0,!0),s)break;a=a.parentNode}i&&t.forEach(function(u){var h;(h=u.dirty)===null||h===void 0||h.call(u,!0,!0)}),this.informDependentDisplayObjects(t);var l=t.mutations||[],c=l.find(function(u){return u.type==="attributes"&&u._boundsChangeData});c?c._boundsChangeData={affectChildren:c._boundsChangeData.affectChildren||i}:(c={type:"attributes",target:t,_boundsChangeData:{affectChildren:i}},l.push(c)),t.mutations=l}},{key:"dirtyFragment",value:function(t){var n,i,a=t.transformable;a&&(a.dirtyFlag=!0,a.localDirtyFlag=!0),(n=(i=t).dirty)===null||n===void 0||n.call(i,!0,!0);for(var s=t.childNodes.length,o=0;o<s;o++)this.dirtyFragment(t.childNodes[o])}},{key:"notifyMutationObservers",value:function(t){var n=new Set;if(t.getRoot().forEach(function(a){(a.mutations||[]).forEach(function(s){s.type==="attributes"&&s._boundsChangeData&&(s._boundsChangeData.affectChildren?a.forEach(function(o){var A=dt({},s);A.target=o,n.add(A)}):n.add(s))}),a.mutations=void 0}),n.size>0){var i=new cr(Ot.BOUNDS_CHANGED,{detail:Array.from(n)});t.dispatchEvent(i,!0,!0)}}},{key:"updateDisplayObjectDependency",value:function(t,n,i,a){if(n&&n!==i){var s=this.displayObjectDependencyMap.get(n);if(s&&s[t]){var o=s[t].indexOf(a);s[t].splice(o,1)}}if(i){var A=this.displayObjectDependencyMap.get(i);A||(this.displayObjectDependencyMap.set(i,{}),A=this.displayObjectDependencyMap.get(i)),A[t]||(A[t]=[]),A[t].push(a)}}},{key:"informDependentDisplayObjects",value:function(t){var n,i=this,a=this.displayObjectDependencyMap.get(t);if(a){var s=(n=t.ownerDocument)===null||n===void 0||(n=n.defaultView)===null||n===void 0||(n=n.getConfig())===null||n===void 0||(n=n.future)===null||n===void 0?void 0:n.experimentalCancelEventPropagation;Object.keys(a).forEach(function(o){a[o].forEach(function(A){i.dirtyToRoot(A,!0),A.dispatchEvent(new Bs(Ot.ATTR_MODIFIED,A,i,i,o,Bs.MODIFICATION,i,i),s,s),A.isCustomElement&&A.isConnected&&A.attributeChangedCallback&&A.attributeChangedCallback(o,i,i)})})}}}])})(),ak=(function(){function r(e){if(Be(this,r),e<=0)throw new Error("LRU capacity must be a positive number.");this.capacity=e,this.cache=new Map}return xe(r,[{key:"get",value:function(t){if(this.cache.has(t)){var n=this.cache.get(t);return this.cache.delete(t),this.cache.set(t,n),n}}},{key:"put",value:function(t,n){if(this.cache.has(t)&&this.cache.delete(t),this.cache.set(t,n),this.cache.size>this.capacity){var i=this.cache.keys().next().value;this.cache.delete(i)}}},{key:"len",value:function(){return this.cache.size}},{key:"clear",value:function(){this.cache.clear()}}])})(),UA={MetricsString:"|q",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},sk=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,Qq=/[!%),.:;?\]}'""]/,Uq=/[$('"]/,Hq=/[!),.:;?\]}'""]/,zq=/[([{'"]/,jq=/[)\]'"?!:;,.]/,Kq=/[(['"...]/,Gq=/[!%),.:;?\]}'"]/,Vq=/[$([{'"#]/,qq=new RegExp("".concat(Qq.source,"|").concat(Hq.source,"|").concat(jq.source,"|").concat(Gq.source)),Wq=new RegExp("".concat(Uq.source,"|").concat(zq.source,"|").concat(Kq.source,"|").concat(Vq.source)),$q=(function(){function r(e){var t=this;Be(this,r),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(n,i){return t.isBreakingSpace(i)?!1:!!(n&&(Wq.exec(i)||qq.exec(n)))},this.trimByKinsokuShorui=function(n){var i=Ft(n),a=i[i.length-2];if(!a)return n;var s=a[a.length-1];return i[i.length-2]=a.slice(0,-1),i[i.length-1]=s+i[i.length-1],i},this.runtime=e,this.charWidthCache=new ak(100)}return xe(r,[{key:"measureFont",value:function(t,n){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var i={ascent:0,descent:0,fontSize:0},a=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(n),s=this.runtime.offscreenCanvasCreator.getOrCreateContext(n,{willReadFrequently:!0});s.font=t;var o=UA.MetricsString+UA.BaselineSymbol,A=Math.ceil(s.measureText(o).width),l=Math.ceil(s.measureText(UA.BaselineSymbol).width),c=UA.HeightMultiplier*l;l=l*UA.BaselineMultiplier|0,a.width=A,a.height=c,s.fillStyle="#f00",s.fillRect(0,0,A,c),s.font=t,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(o,0,l);var u=s.getImageData(0,0,A||1,c||1).data,h=u.length,g=A*4,p=0,v=0,m=!1;for(p=0;p<l;++p){for(var w=0;w<g;w+=4)if(u[v+w]!==255){m=!0;break}if(!m)v+=g;else break}for(i.ascent=l-p,v=h-g,m=!1,p=c;p>l;--p){for(var b=0;b<g;b+=4)if(u[v+b]!==255){m=!0;break}if(!m)v-=g;else break}return i.descent=p-l,i.fontSize=i.ascent+i.descent,this.fontMetricsCache[t]=i,i}},{key:"measureText",value:function(t,n,i){var a=n.fontSize,s=a===void 0?16:a,o=n.wordWrap,A=o===void 0?!1:o,l=n.lineHeight,c=n.lineWidth,u=c===void 0?1:c,h=n.textBaseline,g=h===void 0?"alphabetic":h,p=n.textAlign,v=p===void 0?"start":p,m=n.letterSpacing,w=m===void 0?0:m,b=n.textPath;n.textPathSide,n.textPathStartOffset;var _=n.leading,C=_===void 0?0:_,M=tk(n),F=this.measureFont(M,i);F.fontSize===0&&(F.fontSize=s,F.ascent=s);var k=this.runtime.offscreenCanvasCreator.getOrCreateContext(i);k.font=M,n.isOverflowing=!1;var P=A?this.wordWrap(t,n,i):t,N=P.split(/(?:\r\n|\r|\n)/),D=new Array(N.length),Q=0;if(b){b.getTotalLength();for(var H=0;H<N.length;H++)k.measureText(N[H]).width+(N[H].length-1)*w}else{for(var j=0;j<N.length;j++){var q=k.measureText(N[j]).width+(N[j].length-1)*w;D[j]=q,Q=Math.max(Q,q)}var J=Q+u,ce=l||F.fontSize+u,se=Math.max(ce,F.fontSize+u)+(N.length-1)*(ce+C);ce+=C;var W=0;return g==="middle"?W=-se/2:g==="bottom"||g==="alphabetic"||g==="ideographic"?W=-se:(g==="top"||g==="hanging")&&(W=0),{font:M,width:J,height:se,lines:N,lineWidths:D,lineHeight:ce,maxLineWidth:Q,fontProperties:F,lineMetrics:D.map(function(le,fe){var X=0;return v==="center"||v==="middle"?X-=le/2:(v==="right"||v==="end")&&(X-=le),new Uc(X-u/2,W+fe*ce,le+u,ce)})}}}},{key:"wordWrap",value:function(t,n,i){var a=this,s=Array.from(t);if(s.length===0)return"";var o=this,A=n.wordWrapWidth,l=A===void 0?0:A,c=n.letterSpacing,u=c===void 0?0:c,h=n.maxLines,g=h===void 0?1/0:h,p=n.textOverflow,v=this.runtime.offscreenCanvasCreator.getOrCreateContext(i),m=l+u,w="";p==="ellipsis"?w="...":p&&p!=="clip"&&(w=p);var b=[""],_=0,C=0,M=-1,F=tk(n),k=this.charWidthCache.get(F);k||(k=new ak(500),this.charWidthCache.put(F,k));var P=function(le){return a.getFromCache(le,u,k,v)},N=P(w);function D(W,le,fe,X){for(;P(W)<X&&le<s.length-1&&!o.isNewline(s[le+1]);)le+=1,W+=s[le];for(;P(W)>X&&le>=fe;)le-=1,W=W.slice(0,-1);return{lineTxt:W,txtLastCharIndex:le}}function Q(W,le){if(!(N<=0||N>m)){if(!b[W]){b[W]=w;return}var fe=D(b[W],le,M+1,m-N);b[W]=fe.lineTxt+w}}for(var H=0;H<s.length;H++){var j=s[H],q=s[H-1],J=s[H+1],ce=P(j);if(this.isNewline(j)){if(_+1>=g){H<s.length-1&&Q(_,H-1),n.isOverflowing=!0;break}M=H-1,_+=1,C=0,b[_]="";continue}if(ce>m){Q(_,H-1),n.isOverflowing=!0;break}if(C>0&&C+ce>m){var se=D(b[_],H-1,M+1,m);if(se.txtLastCharIndex!==H-1){if(b[_]=se.lineTxt,se.txtLastCharIndex===s.length-1)break;H=se.txtLastCharIndex+1,j=s[H],q=s[H-1],J=s[H+1],ce=P(j)}if(_+1>=g){Q(_,H-1),n.isOverflowing=!0;break}if(M=H-1,_+=1,C=0,b[_]="",this.isBreakingSpace(j))continue;this.canBreakInLastChar(j)||(b=this.trimToBreakable(b),C=this.sumTextWidthByCache(b[_]||"",P)),this.shouldBreakByKinsokuShorui(j,J)&&(b=this.trimByKinsokuShorui(b),C+=P(q||""))}C+=ce,b[_]+=j}return b.join(`
`)}},{key:"isBreakingSpace",value:function(t){return typeof t!="string"?!1:UA.BreakingSpaces.indexOf(t.charCodeAt(0))>=0}},{key:"isNewline",value:function(t){return typeof t!="string"?!1:UA.Newlines.indexOf(t.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(t){var n=Ft(t),i=n[n.length-2],a=this.findBreakableIndex(i);if(a===-1||!i)return n;var s=i.slice(a,a+1),o=this.isBreakingSpace(s),A=a+1,l=a+(o?0:1);return n[n.length-1]+=i.slice(A,i.length),n[n.length-2]=i.slice(0,l),n}},{key:"canBreakInLastChar",value:function(t){return!(t&&sk.test(t))}},{key:"sumTextWidthByCache",value:function(t,n){return t.split("").reduce(function(i,a){return i+n(a)},0)}},{key:"findBreakableIndex",value:function(t){for(var n=t.length-1;n>=0;n--)if(!sk.test(t[n]))return n;return-1}},{key:"getFromCache",value:function(t,n,i,a){var s=i.get(t);if(typeof s!="number"){var o=t.length*n,A=a.measureText(t);s=A.width+o,i.put(t,s)}return s}},{key:"clearCache",value:function(){this.fontMetricsCache={},this.charWidthCache.clear()}}])})(),Se={},Yq=(function(r){var e=new wq,t=new yq;return r={},Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(r,we.FRAGMENT,null),we.CIRCLE,new gq),we.ELLIPSE,new pq),we.RECT,e),we.IMAGE,e),we.GROUP,new _q),we.LINE,new vq),we.TEXT,new bq(Se)),we.POLYLINE,t),we.POLYGON,t),Ke(Ke(Ke(r,we.PATH,new mq),we.HTML,new Eq),we.MESH,null)})(),Xq=(function(r){var e=new SV,t=new $B;return r={},Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(r,De.PERCENTAGE,null),De.NUMBER,new IV),De.ANGLE,new BV),De.DEFINED_PATH,new xV),De.PAINT,e),De.COLOR,e),De.FILTER,new TV),De.LENGTH,t),De.LENGTH_PERCENTAGE,t),De.LENGTH_PERCENTAGE_12,new MV),Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(r,De.LENGTH_PERCENTAGE_14,new FV),De.COORDINATE,new $B),De.OFFSET_DISTANCE,new PV),De.OPACITY_VALUE,new OV),De.PATH,new LV),De.LIST_OF_POINTS,new NV),De.SHADOW_BLUR,new DV),De.TEXT,new RV),De.TEXT_TRANSFORM,new QV),De.TRANSFORM,new dq),Ke(Ke(Ke(r,De.TRANSFORM_ORIGIN,new hq),De.Z_INDEX,new fq),De.MARKER,new kV)})(),Zq=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}};Se.CameraContribution=rU;Se.AnimationTimeline=null;Se.EasingFunction=null;Se.offscreenCanvasCreator=new p2;Se.sceneGraphSelector=new Tq;Se.sceneGraphService=new Rq(Se);Se.textService=new $q(Se);Se.geometryUpdaterFactory=Yq;Se.CSSPropertySyntaxFactory=Xq;Se.styleValueRegistry=new EV(Se);Se.layoutRegistry=null;Se.globalThis=Zq();Se.enableStyleSyntax=!0;Se.enableSizeAttenuation=!1;var Jq=0,ZB=new Bs(Ot.INSERTED,null,"","","",0,"",""),JB=new Bs(Ot.REMOVED,null,"","","",0,"",""),kU=new cr(Ot.DESTROY),e7=(function(r){function e(){var t;Be(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=wt(this,e,[].concat(i)),t.entity=Jq++,t.transformable={dirtyFlag:!1,localDirtyFlag:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},t.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},t.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},t.cullable={strategy:n9.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},t.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},t.namespaceURI="g",t.scrollLeft=0,t.scrollTop=0,t.clientTop=0,t.clientLeft=0,t.style={},t.computedStyle={},t.parsedStyle={},t.attributes={},t}return bt(e,r),xe(e,[{key:"dirty",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=arguments.length>1?arguments[1]:void 0;this.renderable.dirty=n,i!==void 0&&(this.renderable.boundsDirty=i,this.renderable.renderBoundsDirty=i,this.geometry.dirty=i)}},{key:"className",get:function(){return this.getAttribute("class")||""},set:function(n){this.setAttribute("class",n)}},{key:"classList",get:function(){return this.className.split(" ").filter(function(n){return n!==""})}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n-1]||null}return null}},{key:"cloneNode",value:function(n){throw new Error(tn)}},{key:"appendChild",value:function(n,i){var a;if(n.destroyed)throw new Error(GG);return Se.sceneGraphService.attach(n,this,i),(a=this.ownerDocument)!==null&&a!==void 0&&a.defaultView&&(!Np(this)&&n.nodeName===we.FRAGMENT?this.ownerDocument.defaultView.mountFragment(n):this.ownerDocument.defaultView.mountChildren(n)),this.isMutationObserved&&(ZB.relatedNode=this,n.dispatchEvent(ZB)),n}},{key:"insertBefore",value:function(n,i){if(!i)this.appendChild(n);else{n.parentElement&&n.parentElement.removeChild(n);var a=this.childNodes.indexOf(i);a===-1?this.appendChild(n):this.appendChild(n,a)}return n}},{key:"replaceChild",value:function(n,i){var a=this.childNodes.indexOf(i);return this.removeChild(i),this.appendChild(n,a),i}},{key:"removeChild",value:function(n){var i,a,s=((i=this.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig().future)===null||i===void 0?void 0:i.experimentalCancelEventPropagation)===!0;return JB.relatedNode=this,n.dispatchEvent(JB,s,s),(a=n.ownerDocument)!==null&&a!==void 0&&a.defaultView&&n.ownerDocument.defaultView.unmountChildren(n),Se.sceneGraphService.detach(n),n}},{key:"removeChildren",value:function(){for(var n=this.childNodes.length-1;n>=0;n--){var i=this.childNodes[n];this.removeChild(i)}}},{key:"destroyChildren",value:function(){for(var n=this.childNodes.length-1;n>=0;n--){var i=this.childNodes[n];i.childNodes.length>0&&i.destroyChildren(),i.destroy()}}},{key:"matches",value:function(n){return Se.sceneGraphService.matches(n,this)}},{key:"getElementById",value:function(n){return Se.sceneGraphService.querySelector("#".concat(n),this)}},{key:"getElementsByName",value:function(n){return Se.sceneGraphService.querySelectorAll('[name="'.concat(n,'"]'),this)}},{key:"getElementsByClassName",value:function(n){return Se.sceneGraphService.querySelectorAll(".".concat(n),this)}},{key:"getElementsByTagName",value:function(n){return Se.sceneGraphService.querySelectorAll(n,this)}},{key:"querySelector",value:function(n){return Se.sceneGraphService.querySelector(n,this)}},{key:"querySelectorAll",value:function(n){return Se.sceneGraphService.querySelectorAll(n,this)}},{key:"closest",value:function(n){var i=this;do{if(Se.sceneGraphService.matches(n,i))return i;i=i.parentElement}while(i!==null);return null}},{key:"find",value:function(n){var i=this,a=null;return this.forEach(function(s){return s!==i&&n(s)?(a=s,!1):!0}),a}},{key:"findAll",value:function(n){var i=this,a=[];return this.forEach(function(s){s!==i&&n(s)&&a.push(s)}),a}},{key:"after",value:function(){var n=this;if(this.parentNode){for(var i=this.parentNode.childNodes.indexOf(this),a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];s.forEach(function(A,l){var c;return(c=n.parentNode)===null||c===void 0?void 0:c.appendChild(A,i+l+1)})}}},{key:"before",value:function(){if(this.parentNode){for(var n,i=this.parentNode.childNodes.indexOf(this),a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];var A=s[0],l=yp(s).slice(1);this.parentNode.appendChild(A,i),(n=A).after.apply(n,Ft(l))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var n=this,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];a.forEach(function(o){return n.appendChild(o)})}},{key:"prepend",value:function(){for(var n=this,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];a.forEach(function(o,A){return n.appendChild(o,A)})}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){var n,i=((n=this.ownerDocument)===null||n===void 0||(n=n.defaultView)===null||n===void 0||(n=n.getConfig().future)===null||n===void 0?void 0:n.experimentalCancelEventPropagation)===!0;this.destroyChildren(),this.dispatchEvent(kU,i,i),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Se.sceneGraphService.getGeometryBounds(this,n)}},{key:"getTransformedGeometryBounds",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Se.sceneGraphService.getTransformedGeometryBounds(this,n)}},{key:"getBounds",value:function(){return Se.sceneGraphService.getBounds(this)}},{key:"getRenderBounds",value:function(){return Se.sceneGraphService.getBounds(this,!0)}},{key:"getLocalBounds",value:function(){return Se.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return Se.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(n){if(typeof n!="symbol"){var i=this.attributes[n];return i}}},{key:"hasAttribute",value:function(n){return this.getAttributeNames().includes(n)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(n){this.setAttribute(n,null),delete this.attributes[n]}},{key:"setAttribute",value:function(n,i){this.attributes[n]=i}},{key:"getAttributeNS",value:function(n,i){throw new Error(tn)}},{key:"getAttributeNode",value:function(n){throw new Error(tn)}},{key:"getAttributeNodeNS",value:function(n,i){throw new Error(tn)}},{key:"hasAttributeNS",value:function(n,i){throw new Error(tn)}},{key:"removeAttributeNS",value:function(n,i){throw new Error(tn)}},{key:"removeAttributeNode",value:function(n){throw new Error(tn)}},{key:"setAttributeNS",value:function(n,i,a){throw new Error(tn)}},{key:"setAttributeNode",value:function(n){throw new Error(tn)}},{key:"setAttributeNodeNS",value:function(n){throw new Error(tn)}},{key:"toggleAttribute",value:function(n,i){throw new Error(tn)}}])})(kn);function Ht(r){return!!(r!=null&&r.nodeName)}var t7=Se.globalThis.Proxy?Se.globalThis.Proxy:function(){},ps=new Bs(Ot.ATTR_MODIFIED,null,null,null,null,Bs.MODIFICATION,null,null),Gu=xt(),n7=lr(),hn=(function(r){function e(t){var n;return Be(this,e),n=wt(this,e),n.isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=t,n.id=t.id||"",n.name=t.name||"",(t.className||t.class)&&(n.className=t.className||t.class),n.nodeName=t.type||we.GROUP,t.initialParsedStyle&&Object.assign(n.parsedStyle,t.initialParsedStyle),n.initAttributes(t.style),Se.enableStyleSyntax&&(n.style=new t7({setProperty:function(a,s){n.setAttribute(a,s)},getPropertyValue:function(a){return n.getAttribute(a)},removeProperty:function(a){n.removeAttribute(a)},item:function(){return""}},{get:function(a,s){return a[s]!==void 0?a[s]:n.getAttribute(s)},set:function(a,s,o){return n.setAttribute(s,o),!0}})),n}return bt(e,r),xe(e,[{key:"destroy",value:function(){Tp(e,"destroy",this)([]),this.getAnimations().forEach(function(n){n.cancel()})}},{key:"cloneNode",value:function(n,i){var a=dt({},this.attributes);for(var s in a){var o=a[s];Ht(o)&&s!=="clipPath"&&s!=="offsetPath"&&s!=="textPath"&&(a[s]=o.cloneNode(n)),i&&(a[s]=i(s,o))}var A=new this.constructor(dt(dt({},this.config),{},{style:a}));return A.setLocalTransform(this.getLocalTransform()),n&&this.children.forEach(function(l){if(!l.style.isMarker){var c=l.cloneNode(n);A.appendChild(c)}}),A}},{key:"initAttributes",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i={forceUpdateGeometry:!0};Se.styleValueRegistry.processProperties(this,n,i),this.dirty()}},{key:"setAttribute",value:function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;ft(i)||(a||i!==this.attributes[n])&&(this.internalSetAttribute(n,i,{memoize:s}),Tp(e,"setAttribute",this)([n,i]))}},{key:"setAttributes",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.skipDispatchAttrModifiedEvent,s=a===void 0?!1:a,o,A;if(s||(o=dt({},this.attributes),A=dt({},this.parsedStyle)),Se.styleValueRegistry.processProperties(this,n,i),this.dirty(),!s)for(var l in n)this.dispatchAttrModifiedEvent(l,o[l],n[l],A[l])}},{key:"internalSetAttribute",value:function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.attributes[n],o=this.parsedStyle[n];Se.styleValueRegistry.processProperties(this,Ke({},n,i),a),this.dirty(),this.dispatchAttrModifiedEvent(n,s,i,o)}},{key:"dispatchAttrModifiedEvent",value:function(n,i,a,s){var o=this.parsedStyle[n];if(this.isConnected)if(ps.relatedNode=this,ps.prevValue=i,ps.newValue=a,ps.attrName=n,ps.prevParsedValue=s,ps.newParsedValue=o,this.isMutationObserved)this.dispatchEvent(ps);else{var A,l=((A=this.ownerDocument.defaultView.getConfig().future)===null||A===void 0?void 0:A.experimentalCancelEventPropagation)===!0;ps.target=this,this.ownerDocument.defaultView.dispatchEvent(ps,!0,l)}if(this.isCustomElement&&this.isConnected||!this.isCustomElement){var c,u;(c=(u=this).attributeChangedCallback)===null||c===void 0||c.call(u,n,i,a,s,o)}}},{key:"getBBox",value:function(){var n=this.getBounds(),i=n.getMin(),a=yt(i,2),s=a[0],o=a[1],A=n.getMax(),l=yt(A,2),c=l[0],u=l[1];return new Uc(s,o,c-s,u-o)}},{key:"setOrigin",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Se.sceneGraphService.setOrigin(this,mi(n,i,a,!1)),this}},{key:"getOrigin",value:function(){return Se.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Se.sceneGraphService.setPosition(this,mi(n,i,a,!1)),this}},{key:"setLocalPosition",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Se.sceneGraphService.setLocalPosition(this,mi(n,i,a,!1)),this}},{key:"translate",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Se.sceneGraphService.translate(this,mi(n,i,a,!1)),this}},{key:"translateLocal",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Se.sceneGraphService.translateLocal(this,mi(n,i,a,!1)),this}},{key:"getPosition",value:function(){return Se.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return Se.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(n,i,a){return this.scaleLocal(n,i,a)}},{key:"scaleLocal",value:function(n,i,a){return typeof n=="number"&&(i=i||n,a=a||n,n=mi(n,i,a,!1)),Se.sceneGraphService.scaleLocal(this,n),this}},{key:"setLocalScale",value:function(n,i,a){return typeof n=="number"&&(i=i||n,a=a||n,n=mi(n,i,a,!1)),Se.sceneGraphService.setLocalScale(this,n),this}},{key:"getLocalScale",value:function(){return Se.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return Se.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){var n=Yy(Gu,Se.sceneGraphService.getWorldTransform(this)),i=yt(n,3),a=i[2];return Ni(a)}},{key:"getLocalEulerAngles",value:function(){var n=Yy(Gu,Se.sceneGraphService.getLocalRotation(this)),i=yt(n,3),a=i[2];return Ni(a)}},{key:"setEulerAngles",value:function(n){return Se.sceneGraphService.setEulerAngles(this,0,0,n),this}},{key:"setLocalEulerAngles",value:function(n){return Se.sceneGraphService.setLocalEulerAngles(this,0,0,n),this}},{key:"rotateLocal",value:function(n,i,a){return it(i)&&it(a)?Se.sceneGraphService.rotateLocal(this,0,0,n):Se.sceneGraphService.rotateLocal(this,n,i,a),this}},{key:"rotate",value:function(n,i,a){return it(i)&&it(a)?Se.sceneGraphService.rotate(this,0,0,n):Se.sceneGraphService.rotate(this,n,i,a),this}},{key:"setRotation",value:function(n,i,a,s){return Se.sceneGraphService.setRotation(this,n,i,a,s),this}},{key:"setLocalRotation",value:function(n,i,a,s){return Se.sceneGraphService.setLocalRotation(this,n,i,a,s),this}},{key:"setLocalSkew",value:function(n,i){return Se.sceneGraphService.setLocalSkew(this,n,i),this}},{key:"getRotation",value:function(){return Se.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return Se.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return Se.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return Se.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return Se.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(n){return Se.sceneGraphService.setLocalTransform(this,n),this}},{key:"resetLocalTransform",value:function(){Se.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(n,i){var a,s=(a=this.ownerDocument)===null||a===void 0?void 0:a.timeline;return s?s.play(this,n,i):null}},{key:"isVisible",value:function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.visibility)!=="hidden"}},{key:"interactive",get:function(){return this.isInteractive()},set:function(n){this.style.pointerEvents=n?"auto":"none"}},{key:"isInteractive",value:function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.pointerEvents)!=="none"}},{key:"isCulled",value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,Ft(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,Ft(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var n=this,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var o=a[0],A=a[1];return o?nr(o)?(Object.keys(o).forEach(function(l){n.setAttribute(l,o[l])}),this):a.length===2?(this.setAttribute(o,A),this):this.attributes[o]:this.attributes}},{key:"getMatrix",value:function(n){var i=n||this.getWorldTransform(),a=wp(Gu,i),s=yt(a,2),o=s[0],A=s[1],l=Rc(Gu,i),c=yt(l,2),u=c[0],h=c[1],g=bp(n7,i),p=Yy(Gu,g),v=yt(p,3),m=v[0],w=v[2];return XG(m||w,o,A,u,h)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(n){var i=MF(n),a=yt(i,5),s=a[0],o=a[1],A=a[2],l=a[3],c=a[4];this.setEulerAngles(c).setPosition(s,o).setLocalScale(A,l)}},{key:"setLocalMatrix",value:function(n){var i=MF(n),a=yt(i,5),s=a[0],o=a[1],A=a[2],l=a[3],c=a[4];this.setLocalEulerAngles(c).setLocalPosition(s,o).setLocalScale(A,l)}},{key:"show",value:function(){this.forEach(function(n){n.style.visibility="visible"})}},{key:"hide",value:function(){this.forEach(function(n){n.style.visibility="hidden"})}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(n){return this.children[n]||null}},{key:"add",value:function(n,i){return this.appendChild(n,i)}},{key:"set",value:function(n,i){this.config[n]=i}},{key:"get",value:function(n){return this.config[n]}},{key:"moveTo",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(n,i,a),this}},{key:"move",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(n,i,a),this}},{key:"setZIndex",value:function(n){return this.style.zIndex=n,this}}])})(e7);hn.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var xs=(function(r){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Be(this,e),wt(this,e,[dt({type:we.CIRCLE},t)])}return bt(e,r),xe(e)})(hn);xs.PARSED_STYLE_LIST=new Set([].concat(Ft(hn.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var r7=["style"],sh=(function(r){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=_s(n,r7);return Be(this,e),t=wt(this,e,[dt({style:i},a)]),t.isCustomElement=!0,t}return bt(e,r),xe(e)})(hn);sh.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var oh=(function(r){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Be(this,e),wt(this,e,[dt({type:we.ELLIPSE},t)])}return bt(e,r),xe(e)})(hn);oh.PARSED_STYLE_LIST=new Set([].concat(Ft(hn.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"]));var i7=(function(r){function e(){return Be(this,e),wt(this,e,[{type:we.FRAGMENT}])}return bt(e,r),xe(e)})(hn);i7.PARSED_STYLE_LIST=new Set(["class","className"]);var xr=(function(r){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Be(this,e),wt(this,e,[dt({type:we.GROUP},t)])}return bt(e,r),xe(e)})(hn);xr.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var a7=["style"],wl=(function(r){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=_s(n,a7);return Be(this,e),t=wt(this,e,[dt({type:we.HTML,style:i},a)]),t.cullable.enable=!1,t}return bt(e,r),xe(e,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var n=ms(sn(),this.parentNode.getWorldTransform()),i=this.getBounds();if(!vn.isEmpty(i)){var a=new vn;return a.setFromTransformedAABB(i,n),a}}return this.getBounds()}}])})(hn);wl.PARSED_STYLE_LIST=new Set([].concat(Ft(hn.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var Ah=(function(r){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Be(this,e),wt(this,e,[dt({type:we.IMAGE},t)])}return bt(e,r),xe(e)})(hn);Ah.PARSED_STYLE_LIST=new Set([].concat(Ft(hn.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var s7=["style"],hl=(function(r){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=_s(n,s7);Be(this,e),t=wt(this,e,[dt({type:we.LINE,style:dt({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},a)]),t.markerStartAngle=0,t.markerEndAngle=0;var s=t.parsedStyle,o=s.markerStart,A=s.markerEnd;return o&&Ht(o)&&(t.markerStartAngle=o.getLocalEulerAngles(),t.appendChild(o)),A&&Ht(A)&&(t.markerEndAngle=A.getLocalEulerAngles(),t.appendChild(A)),t.transformMarker(!0),t.transformMarker(!1),t}return bt(e,r),xe(e,[{key:"attributeChangedCallback",value:function(n,i,a,s,o){n==="x1"||n==="y1"||n==="x2"||n==="y2"||n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&Ht(s)&&(this.markerStartAngle=0,s.remove()),o&&Ht(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):n==="markerEnd"&&(s&&Ht(s)&&(this.markerEndAngle=0,s.remove()),o&&Ht(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1)))}},{key:"transformMarker",value:function(n){var i=this.parsedStyle,a=i.markerStart,s=i.markerEnd,o=i.markerStartOffset,A=i.markerEndOffset,l=i.x1,c=i.x2,u=i.y1,h=i.y2,g=n?a:s;if(!(!g||!Ht(g))){var p=0,v,m,w,b,_,C;n?(w=l,b=u,v=c-l,m=h-u,_=o||0,C=this.markerStartAngle):(w=c,b=h,v=l-c,m=u-h,_=A||0,C=this.markerEndAngle),p=Math.atan2(m,v),g.setLocalEulerAngles(p*180/Math.PI+C),g.setLocalPosition(w+Math.cos(p)*_,b+Math.sin(p)*_)}}},{key:"getPoint",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle,s=a.x1,o=a.y1,A=a.x2,l=a.y2,c=JQ(s,o,A,l,n),u=c.x,h=c.y,g=li(xt(),on(u,h,0),i?this.getWorldTransform():this.getLocalTransform());return new Kr(g[0],g[1])}},{key:"getPointAtLength",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(n/this.getTotalLength(),i)}},{key:"getTotalLength",value:function(){var n=this.parsedStyle,i=n.x1,a=n.y1,s=n.x2,o=n.y2;return ZQ(i,a,s,o)}}])})(hn);hl.PARSED_STYLE_LIST=new Set([].concat(Ft(hn.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var o7=["style"],ci=(function(r){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=_s(n,o7);Be(this,e),t=wt(this,e,[dt({type:we.PATH,style:i,initialParsedStyle:{miterLimit:4,d:dt({},iU)}},a)]),t.markerStartAngle=0,t.markerEndAngle=0,t.markerMidList=[];var s=t.parsedStyle,o=s.markerStart,A=s.markerEnd,l=s.markerMid;return o&&Ht(o)&&(t.markerStartAngle=o.getLocalEulerAngles(),t.appendChild(o)),l&&Ht(l)&&t.placeMarkerMid(l),A&&Ht(A)&&(t.markerEndAngle=A.getLocalEulerAngles(),t.appendChild(A)),t.transformMarker(!0),t.transformMarker(!1),t}return bt(e,r),xe(e,[{key:"attributeChangedCallback",value:function(n,i,a,s,o){n==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&Ht(s)&&(this.markerStartAngle=0,s.remove()),o&&Ht(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):n==="markerEnd"?(s&&Ht(s)&&(this.markerEndAngle=0,s.remove()),o&&Ht(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(o)}},{key:"transformMarker",value:function(n){var i=this.parsedStyle,a=i.markerStart,s=i.markerEnd,o=i.markerStartOffset,A=i.markerEndOffset,l=n?a:s;if(!(!l||!Ht(l))){var c=0,u,h,g,p,v,m;if(n){var w=this.getStartTangent(),b=yt(w,2),_=b[0],C=b[1];g=C[0],p=C[1],u=_[0]-C[0],h=_[1]-C[1],v=o||0,m=this.markerStartAngle}else{var M=this.getEndTangent(),F=yt(M,2),k=F[0],P=F[1];g=P[0],p=P[1],u=k[0]-P[0],h=k[1]-P[1],v=A||0,m=this.markerEndAngle}c=Math.atan2(h,u),l.setLocalEulerAngles(c*180/Math.PI+m),l.setLocalPosition(g+Math.cos(c)*v,p+Math.sin(c)*v)}}},{key:"placeMarkerMid",value:function(n){var i=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(c){c.remove()}),n&&Ht(n))for(var a=1;a<i.length-1;a++){var s=yt(i[a].currentPoint,2),o=s[0],A=s[1],l=a===1?n:n.cloneNode(!0);this.markerMidList.push(l),this.appendChild(l),l.setLocalPosition(o,A)}}},{key:"getTotalLength",value:function(){return qB(this)}},{key:"getPointAtLength",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle.d.absolutePath,s=yG(a,n),o=s.x,A=s.y,l=li(xt(),on(o,A,0),i?this.getWorldTransform():this.getLocalTransform());return new Kr(l[0],l[1])}},{key:"getPoint",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPointAtLength(n*qB(this),i)}},{key:"getStartTangent",value:function(){var n=this.parsedStyle.d.segments,i=[];if(n.length>1){var a=n[0].currentPoint,s=n[1].currentPoint,o=n[1].startTangent;i=[],o?(i.push([a[0]-o[0],a[1]-o[1]]),i.push([a[0],a[1]])):(i.push([s[0],s[1]]),i.push([a[0],a[1]]))}return i}},{key:"getEndTangent",value:function(){var n=this.parsedStyle.d.segments,i=n.length,a=[];if(i>1){var s=n[i-2].currentPoint,o=n[i-1].currentPoint,A=n[i-1].endTangent;a=[],A?(a.push([o[0]-A[0],o[1]-A[1]]),a.push([o[0],o[1]])):(a.push([s[0],s[1]]),a.push([o[0],o[1]]))}return a}}])})(hn);ci.PARSED_STYLE_LIST=new Set([].concat(Ft(hn.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var A7=["style"],bl=(function(r){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=_s(n,A7);Be(this,e),t=wt(this,e,[dt({type:we.POLYGON,style:i,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},a)]),t.markerStartAngle=0,t.markerEndAngle=0,t.markerMidList=[];var s=t.parsedStyle,o=s.markerStart,A=s.markerEnd,l=s.markerMid;return o&&Ht(o)&&(t.markerStartAngle=o.getLocalEulerAngles(),t.appendChild(o)),l&&Ht(l)&&t.placeMarkerMid(l),A&&Ht(A)&&(t.markerEndAngle=A.getLocalEulerAngles(),t.appendChild(A)),t.transformMarker(!0),t.transformMarker(!1),t}return bt(e,r),xe(e,[{key:"attributeChangedCallback",value:function(n,i,a,s,o){n==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&Ht(s)&&(this.markerStartAngle=0,s.remove()),o&&Ht(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):n==="markerEnd"?(s&&Ht(s)&&(this.markerEndAngle=0,s.remove()),o&&Ht(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(o)}},{key:"transformMarker",value:function(n){var i=this.parsedStyle,a=i.markerStart,s=i.markerEnd,o=i.markerStartOffset,A=i.markerEndOffset,l=i.points,c=l||{},u=c.points,h=n?a:s;if(!(!h||!Ht(h)||!u)){var g=0,p,v,m,w,b,_;if(m=u[0][0],w=u[0][1],n)p=u[1][0]-u[0][0],v=u[1][1]-u[0][1],b=o||0,_=this.markerStartAngle;else{var C=u.length;this.parsedStyle.isClosed?(p=u[C-1][0]-u[0][0],v=u[C-1][1]-u[0][1]):(m=u[C-1][0],w=u[C-1][1],p=u[C-2][0]-u[C-1][0],v=u[C-2][1]-u[C-1][1]),b=A||0,_=this.markerEndAngle}g=Math.atan2(v,p),h.setLocalEulerAngles(g*180/Math.PI+_),h.setLocalPosition(m+Math.cos(g)*b,w+Math.sin(g)*b)}}},{key:"placeMarkerMid",value:function(n){var i=this.parsedStyle.points,a=i||{},s=a.points;if(this.markerMidList.forEach(function(u){u.remove()}),this.markerMidList=[],n&&Ht(n)&&s)for(var o=1;o<(this.parsedStyle.isClosed?s.length:s.length-1);o++){var A=s[o][0],l=s[o][1],c=o===1?n:n.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(A,l)}}}])})(hn);bl.PARSED_STYLE_LIST=new Set([].concat(Ft(hn.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var l7=["style"],mv=(function(r){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.style,i=_s(t,l7);return Be(this,e),wt(this,e,[dt({type:we.POLYLINE,style:n,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i)])}return bt(e,r),xe(e,[{key:"getTotalLength",value:function(){return eV(this)}},{key:"getPointAtLength",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(n/this.getTotalLength(),i)}},{key:"getPoint",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var s=[],o=0,A,l,c=this.getTotalLength();a.forEach(function(w,b){a[b+1]&&(A=[0,0],A[0]=o/c,l=ZQ(w[0],w[1],a[b+1][0],a[b+1][1]),o+=l,A[1]=o/c,s.push(A))}),this.parsedStyle.points.segments=s}var u=0,h=0;this.parsedStyle.points.segments.forEach(function(w,b){n>=w[0]&&n<=w[1]&&(u=(n-w[0])/(w[1]-w[0]),h=b)});var g=JQ(a[h][0],a[h][1],a[h+1][0],a[h+1][1],u),p=g.x,v=g.y,m=li(xt(),on(p,v,0),i?this.getWorldTransform():this.getLocalTransform());return new Kr(m[0],m[1])}},{key:"getStartTangent",value:function(){var n=this.parsedStyle.points.points,i=[];return i.push([n[1][0],n[1][1]]),i.push([n[0][0],n[0][1]]),i}},{key:"getEndTangent",value:function(){var n=this.parsedStyle.points.points,i=n.length-1,a=[];return a.push([n[i-1][0],n[i-1][1]]),a.push([n[i][0],n[i][1]]),a}}])})(bl);mv.PARSED_STYLE_LIST=new Set([].concat(Ft(bl.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var Wr=(function(r){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Be(this,e),wt(this,e,[dt({type:we.RECT},t)])}return bt(e,r),xe(e)})(hn);Wr.PARSED_STYLE_LIST=new Set([].concat(Ft(hn.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var c7=["style"],_l=(function(r){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.style,i=_s(t,c7);return Be(this,e),wt(this,e,[dt({type:we.TEXT,style:dt({fill:"black"},n)},i)])}return bt(e,r),xe(e,[{key:"getComputedTextLength",value:function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])})(hn);_l.PARSED_STYLE_LIST=new Set([].concat(Ft(hn.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textDecorationThickness","textPathSide","textPathStartOffset","metrics","dx","dy"]));var u7=(function(){function r(){Be(this,r),this.registry={},this.define(we.CIRCLE,xs),this.define(we.ELLIPSE,oh),this.define(we.RECT,Wr),this.define(we.IMAGE,Ah),this.define(we.LINE,hl),this.define(we.GROUP,xr),this.define(we.PATH,ci),this.define(we.POLYGON,bl),this.define(we.POLYLINE,mv),this.define(we.TEXT,_l),this.define(we.HTML,wl)}return xe(r,[{key:"define",value:function(t,n){this.registry[t]=n}},{key:"get",value:function(t){return this.registry[t]}}])})(),d7={number:function(e){return new nn(e)},percent:function(e){return new nn(e,"%")},px:function(e){return new nn(e,"px")},em:function(e){return new nn(e,"em")},rem:function(e){return new nn(e,"rem")},deg:function(e){return new nn(e,"deg")},grad:function(e){return new nn(e,"grad")},rad:function(e){return new nn(e,"rad")},turn:function(e){return new nn(e,"turn")},s:function(e){return new nn(e,"s")},ms:function(e){return new nn(e,"ms")},registerProperty:function(e){var t=e.name,n=e.inherits,i=e.interpolable,a=e.initialValue,s=e.syntax;Se.styleValueRegistry.registerMetadata({n:t,inh:n,int:i,d:a,syntax:s})},registerLayout:function(e,t){Se.layoutRegistry.registerLayout(e,t)}},IU=(function(r){function e(){var t;Be(this,e),t=wt(this,e),t.defaultView=null,t.ownerDocument=null,t.nodeName="document";try{t.timeline=new Se.AnimationTimeline(t)}catch{}var n={};return h2.forEach(function(i){var a=i.n,s=i.inh,o=i.d;s&&o&&(n[a]=$e(o)?o(we.GROUP):o)}),t.documentElement=new xr({id:"g-root",style:n}),t.documentElement.ownerDocument=t,t.documentElement.parentNode=t,t.childNodes=[t.documentElement],t}return bt(e,r),xe(e,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(n,i){if(n==="svg")return this.documentElement;var a=this.defaultView.customElements.get(n);a||(console.warn("Unsupported tagName: ",n),a=n==="tspan"?_l:xr);var s=new a(i);return s.ownerDocument=this,s}},{key:"createElementNS",value:function(n,i,a){return this.createElement(i,a)}},{key:"cloneNode",value:function(n){throw new Error(tn)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch{}}},{key:"elementsFromBBox",value:function(n,i,a,s){var o=[],A=function(c){if(!(!c.isInteractive()||c.isCulled())){var u=c.parsedStyle.pointerEvents,h=u===void 0?"auto":u,g=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(h);if(!g||c.isVisible()){var p=c.getTransformedGeometryBounds(!0);p&&!vn.isEmpty(p)&&p.max[0]>=n&&p.min[0]<=a&&p.max[1]>=i&&p.min[1]<=s&&o.push(c)}c.childNodes&&c.childNodes.forEach(function(v){v instanceof hn&&A(v)})}};return A(this.documentElement),o.sort(function(l,c){return c.sortable.renderOrder-l.sortable.renderOrder}),o}},{key:"elementFromPointSync",value:function(n,i){var a=this.defaultView.canvas2Viewport({x:n,y:i}),s=a.x,o=a.y,A=this.defaultView.getConfig(),l=A.width,c=A.height;if(s<0||o<0||s>l||o>c)return null;var u=this.defaultView.viewport2Client({x:s,y:o}),h=u.x,g=u.y,p=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:n,y:i,viewportX:s,viewportY:o,clientX:h,clientY:g},picked:[]}),v=p.picked;return v&&v[0]||this.documentElement}},{key:"elementFromPoint",value:(function(){var t=lA(Or().mark(function i(a,s){var o,A,l,c,u,h,g,p,v,m,w;return Or().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(o=this.defaultView.canvas2Viewport({x:a,y:s}),A=o.x,l=o.y,c=this.defaultView.getConfig(),u=c.width,h=c.height,!(A<0||l<0||A>u||l>h)){b.next=1;break}return b.abrupt("return",null);case 1:return g=this.defaultView.viewport2Client({x:A,y:l}),p=g.x,v=g.y,b.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:a,y:s,viewportX:A,viewportY:l,clientX:p,clientY:v},picked:[]});case 2:return m=b.sent,w=m.picked,b.abrupt("return",w&&w[0]||this.documentElement);case 3:case"end":return b.stop()}},i,this)}));function n(i,a){return t.apply(this,arguments)}return n})()},{key:"elementsFromPointSync",value:function(n,i){var a=this.defaultView.canvas2Viewport({x:n,y:i}),s=a.x,o=a.y,A=this.defaultView.getConfig(),l=A.width,c=A.height;if(s<0||o<0||s>l||o>c)return[];var u=this.defaultView.viewport2Client({x:s,y:o}),h=u.x,g=u.y,p=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:n,y:i,viewportX:s,viewportY:o,clientX:h,clientY:g},picked:[]}),v=p.picked;return v[v.length-1]!==this.documentElement&&v.push(this.documentElement),v}},{key:"elementsFromPoint",value:(function(){var t=lA(Or().mark(function i(a,s){var o,A,l,c,u,h,g,p,v,m,w;return Or().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(o=this.defaultView.canvas2Viewport({x:a,y:s}),A=o.x,l=o.y,c=this.defaultView.getConfig(),u=c.width,h=c.height,!(A<0||l<0||A>u||l>h)){b.next=1;break}return b.abrupt("return",[]);case 1:return g=this.defaultView.viewport2Client({x:A,y:l}),p=g.x,v=g.y,b.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:a,y:s,viewportX:A,viewportY:l,clientX:p,clientY:v},picked:[]});case 2:return m=b.sent,w=m.picked,w[w.length-1]!==this.documentElement&&w.push(this.documentElement),b.abrupt("return",w);case 3:case"end":return b.stop()}},i,this)}));function n(i,a){return t.apply(this,arguments)}return n})()},{key:"appendChild",value:function(n,i){throw new Error(rc)}},{key:"insertBefore",value:function(n,i){throw new Error(rc)}},{key:"removeChild",value:function(n,i){throw new Error(rc)}},{key:"replaceChild",value:function(n,i,a){throw new Error(rc)}},{key:"append",value:function(){throw new Error(rc)}},{key:"prepend",value:function(){throw new Error(rc)}},{key:"getElementById",value:function(n){return this.documentElement.getElementById(n)}},{key:"getElementsByName",value:function(n){return this.documentElement.getElementsByName(n)}},{key:"getElementsByTagName",value:function(n){return this.documentElement.getElementsByTagName(n)}},{key:"getElementsByClassName",value:function(n){return this.documentElement.getElementsByClassName(n)}},{key:"querySelector",value:function(n){return this.documentElement.querySelector(n)}},{key:"querySelectorAll",value:function(n){return this.documentElement.querySelectorAll(n)}},{key:"find",value:function(n){return this.documentElement.find(n)}},{key:"findAll",value:function(n){return this.documentElement.findAll(n)}}])})(kn),PU=(function(){function r(e){Be(this,r),this.strategies=e}return xe(r,[{key:"apply",value:function(t){var n=t.config,i=t.camera,a=t.renderingService,s=t.renderingContext,o=this.strategies;a.hooks.cull.tap(r.tag,function(A){if(A){var l,c=A.cullable;if(o.length===0?c.visible=s.unculledEntities.indexOf(A.entity)>-1:c.visible=o.every(function(h){return h.isVisible(i,A)}),!A.isCulled()&&A.isVisible())return A;var u=((l=n.future)===null||l===void 0?void 0:l.experimentalCancelEventPropagation)===!0;return A.dispatchEvent(new cr(Ot.CULLED),u,u),null}return A}),a.hooks.afterRender.tap(r.tag,function(A){A.cullable.visibilityPlaneMask=-1})}}])})();PU.tag="Culling";var OU=(function(){function r(){var e=this;Be(this,r),this.autoPreventDefault=!1,this.rootPointerEvent=new Dp(null),this.rootWheelEvent=new XB(null),this.onPointerMove=function(t){var n,i=(n=e.context.renderingContext.root)===null||n===void 0||(n=n.ownerDocument)===null||n===void 0?void 0:n.defaultView;if(!(i.supportsTouchEvents&&t.pointerType==="touch")){var a=e.normalizeToPointerEvent(t,i),s=Ko(a),o;try{for(s.s();!(o=s.n()).done;){var A=o.value,l=e.bootstrapEvent(e.rootPointerEvent,A,i,t);e.context.eventService.mapEvent(l)}}catch(c){s.e(c)}finally{s.f()}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(t){var n,i=(n=e.context.renderingContext.root)===null||n===void 0||(n=n.ownerDocument)===null||n===void 0?void 0:n.defaultView,a=e.normalizeToPointerEvent(t,i),s=Ko(a),o;try{for(s.s();!(o=s.n()).done;){var A=o.value,l=e.bootstrapEvent(e.rootPointerEvent,A,i,t);e.context.eventService.mapEvent(l)}}catch(c){s.e(c)}finally{s.f()}e.setCursor(e.context.eventService.cursor)}}return xe(r,[{key:"apply",value:function(t){var n=this;this.context=t;var i=t.renderingService,a=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(s){var o=n.context.renderingService.hooks.pickSync.call({position:s,picked:[],topmost:!0}),A=o.picked;return A[0]||null}),i.hooks.pointerWheel.tap(r.tag,function(s){var o=n.normalizeWheelEvent(s);n.context.eventService.mapEvent(o)}),i.hooks.pointerDown.tap(r.tag,function(s){if(!(a.supportsTouchEvents&&s.pointerType==="touch")){var o=n.normalizeToPointerEvent(s,a);if(n.autoPreventDefault&&o[0].isNormalized){var A=s.cancelable||!("cancelable"in s);A&&s.preventDefault()}var l=Ko(o),c;try{for(l.s();!(c=l.n()).done;){var u=c.value,h=n.bootstrapEvent(n.rootPointerEvent,u,a,s);n.context.eventService.mapEvent(h)}}catch(g){l.e(g)}finally{l.f()}n.setCursor(n.context.eventService.cursor)}}),i.hooks.pointerUp.tap(r.tag,function(s){if(!(a.supportsTouchEvents&&s.pointerType==="touch")){var o=n.context.contextService.getDomElement(),A=n.context.eventService.isNativeEventFromCanvas(o,s),l=A?"":"outside",c=n.normalizeToPointerEvent(s,a),u=Ko(c),h;try{for(u.s();!(h=u.n()).done;){var g=h.value,p=n.bootstrapEvent(n.rootPointerEvent,g,a,s);p.type+=l,n.context.eventService.mapEvent(p)}}catch(v){u.e(v)}finally{u.f()}n.setCursor(n.context.eventService.cursor)}}),i.hooks.pointerMove.tap(r.tag,this.onPointerMove),i.hooks.pointerOver.tap(r.tag,this.onPointerMove),i.hooks.pointerOut.tap(r.tag,this.onPointerMove),i.hooks.click.tap(r.tag,this.onClick),i.hooks.pointerCancel.tap(r.tag,function(s){var o=n.normalizeToPointerEvent(s,a),A=Ko(o),l;try{for(A.s();!(l=A.n()).done;){var c=l.value,u=n.bootstrapEvent(n.rootPointerEvent,c,a,s);n.context.eventService.mapEvent(u)}}catch(h){A.e(h)}finally{A.f()}n.setCursor(n.context.eventService.cursor)})}},{key:"bootstrapEvent",value:function(t,n,i,a){t.view=i,t.originalEvent=null,t.nativeEvent=a,t.pointerId=n.pointerId,t.width=n.width,t.height=n.height,t.isPrimary=n.isPrimary,t.pointerType=n.pointerType,t.pressure=n.pressure,t.tangentialPressure=n.tangentialPressure,t.tiltX=n.tiltX,t.tiltY=n.tiltY,t.twist=n.twist,this.transferMouseData(t,n);var s=this.context.eventService.client2Viewport({x:n.clientX,y:n.clientY}),o=s.x,A=s.y;t.viewport.x=o,t.viewport.y=A;var l=this.context.eventService.viewport2Canvas(t.viewport),c=l.x,u=l.y;return t.canvas.x=c,t.canvas.y=u,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=a.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=qV[t.type]||t.type),t}},{key:"normalizeWheelEvent",value:function(t){var n=this.rootWheelEvent;this.transferMouseData(n,t),n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ;var i=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),a=i.x,s=i.y;n.viewport.x=a,n.viewport.y=s;var o=this.context.eventService.viewport2Canvas(n.viewport),A=o.x,l=o.y;return n.canvas.x=A,n.canvas.y=l,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.nativeEvent=t,n.type=t.type,n}},{key:"transferMouseData",value:function(t,n){t.isTrusted=n.isTrusted,t.srcElement=n.srcElement,t.timeStamp=YB.now(),t.type=n.type,t.altKey=n.altKey,t.metaKey=n.metaKey,t.shiftKey=n.shiftKey,t.ctrlKey=n.ctrlKey,t.button=n.button,t.buttons=n.buttons,t.client.x=n.clientX,t.client.y=n.clientY,t.movement.x=n.movementX,t.movement.y=n.movementY,t.page.x=n.pageX,t.page.y=n.pageY,t.screen.x=n.screenX,t.screen.y=n.screenY,t.relatedTarget=null}},{key:"setCursor",value:function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(t,n){var i=[];if(n.isTouchEvent(t))for(var a=0;a<t.changedTouches.length;a++){var s=t.changedTouches[a];ft(s.button)&&(s.button=0),ft(s.buttons)&&(s.buttons=1),ft(s.isPrimary)&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),ft(s.width)&&(s.width=s.radiusX||1),ft(s.height)&&(s.height=s.radiusY||1),ft(s.tiltX)&&(s.tiltX=0),ft(s.tiltY)&&(s.tiltY=0),ft(s.pointerType)&&(s.pointerType="touch"),ft(s.pointerId)&&(s.pointerId=s.identifier||0),ft(s.pressure)&&(s.pressure=s.force||.5),ft(s.twist)&&(s.twist=0),ft(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,s.type=t.type,i.push(s)}else if(n.isMouseEvent(t)){var o=t;ft(o.isPrimary)&&(o.isPrimary=!0),ft(o.width)&&(o.width=1),ft(o.height)&&(o.height=1),ft(o.tiltX)&&(o.tiltX=0),ft(o.tiltY)&&(o.tiltY=0),ft(o.pointerType)&&(o.pointerType="mouse"),ft(o.pointerId)&&(o.pointerId=VV),ft(o.pressure)&&(o.pressure=.5),ft(o.twist)&&(o.twist=0),ft(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,i.push(o)}else i.push(t);return i}}])})();OU.tag="Event";var h7=[we.CIRCLE,we.ELLIPSE,we.IMAGE,we.RECT,we.LINE,we.POLYLINE,we.POLYGON,we.TEXT,we.PATH,we.HTML],f7=(function(){function r(){Be(this,r)}return xe(r,[{key:"isVisible",value:function(t,n){var i,a=n.cullable;if(!a.enable)return!0;var s=n.getRenderBounds();if(vn.isEmpty(s))return!1;var o=t.getFrustum(),A=(i=n.parentNode)===null||i===void 0||(i=i.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return a.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(n,s,A||nc.INDETERMINATE,o.planes),a.visible=a.visibilityPlaneMask!==nc.OUTSIDE,a.visible}},{key:"computeVisibilityWithPlaneMask",value:function(t,n,i,a){if(i===nc.OUTSIDE||i===nc.INSIDE)return i;for(var s=nc.INSIDE,o=h7.indexOf(t.nodeName)>-1,A=0,l=a.length;A<l;++A){var c=1<<A;if((i&c)!==0&&!(o&&(A===4||A===5))){var u=a[A],h=u.normal,g=u.distance;if(ws(h,n.getPositiveFarPoint(a[A]))+g<0)return nc.OUTSIDE;ws(h,n.getNegativeFarPoint(a[A]))+g<0&&(s|=c)}}return s}}])})(),LU=(function(){function r(){Be(this,r),this.mutationRecords=[],this.isFirstTimeRendering=!0,this.isFirstTimeRenderingFinished=!1}return xe(r,[{key:"apply",value:function(t){var n=this,i,a=t.renderingService,s=t.renderingContext,o=s.root.ownerDocument.defaultView,A=function(p){a.dirty()},l=function(p){var v,m=p.detail;(v=n.mutationRecords).push.apply(v,Ft(m)),a.dirty()},c=function(p){var v=p.target;Se.enableSizeAttenuation&&Se.styleValueRegistry.updateSizeAttenuation(v,o.getCamera().getZoom())},u=function(p){var v=p.target;Se.sceneGraphService.dirtyToRoot(v),a.dirty()};a.hooks.init.tap(r.tag,function(){o.addEventListener(Ot.MOUNTED,c),o.addEventListener(Ot.UNMOUNTED,u),o.addEventListener(Ot.ATTR_MODIFIED,A),o.addEventListener(Ot.BOUNDS_CHANGED,l)}),a.hooks.destroy.tap(r.tag,function(){o.removeEventListener(Ot.MOUNTED,c),o.removeEventListener(Ot.UNMOUNTED,u),o.removeEventListener(Ot.ATTR_MODIFIED,A),o.removeEventListener(Ot.BOUNDS_CHANGED,l),n.mutationRecords=[]});var h=(i=Se.globalThis.requestIdleCallback)!==null&&i!==void 0?i:g2.bind(Se.globalThis);a.hooks.endFrame.tap(r.tag,function(){n.isFirstTimeRendering&&(n.isFirstTimeRendering=!1,h(function(){n.isFirstTimeRenderingFinished=!0})),n.mutationRecords=[]})}}])})();LU.tag="Prepare";var na=(function(r){return r.READY="ready",r.BEFORE_RENDER="beforerender",r.RERENDER="rerender",r.AFTER_RENDER="afterrender",r.BEFORE_DESTROY="beforedestroy",r.AFTER_DESTROY="afterdestroy",r.RESIZE="resize",r.DIRTY_RECTANGLE="dirtyrectangle",r.RENDERER_CHANGED="rendererchanged",r})({}),ok=500,g7=.1,p7=1e3,Vf=new cr(Ot.MOUNTED),qf=new cr(Ot.UNMOUNTED),s1=new cr(na.BEFORE_RENDER),Ak=new cr(na.RERENDER),o1=new cr(na.AFTER_RENDER),ex=(function(r){function e(t){var n;Be(this,e),n=wt(this,e),n.Element=hn,n.inited=!1,n.context={};var i=t.container,a=t.canvas,s=t.renderer,o=t.width,A=t.height,l=t.background,c=t.cursor,u=t.supportsMutipleCanvasesInOneContainer,h=t.cleanUpOnDestroy,g=h===void 0?!0:h,p=t.offscreenCanvas,v=t.devicePixelRatio,m=t.requestAnimationFrame,w=t.cancelAnimationFrame,b=t.createImage,_=t.supportsTouchEvents,C=t.supportsPointerEvents,M=t.isTouchEvent,F=t.isMouseEvent,k=t.dblClickSpeed,P=o,N=A,D=v||f2&&window.devicePixelRatio||1;return D=D>=1?Math.ceil(D):1,a&&(P=o||KV(a)||a.width/D,N=A||GV(a)||a.height/D),n.customElements=new u7,n.devicePixelRatio=D,n.requestAnimationFrame=m??g2.bind(Se.globalThis),n.cancelAnimationFrame=w??SU.bind(Se.globalThis),n.createImage=b??function(){return new window.Image},n.supportsTouchEvents=_??"ontouchstart"in Se.globalThis,n.supportsPointerEvents=C??!!Se.globalThis.PointerEvent,n.isTouchEvent=M??function(Q){return n.supportsTouchEvents&&Q instanceof Se.globalThis.TouchEvent},n.isMouseEvent=F??function(Q){return!Se.globalThis.MouseEvent||Q instanceof Se.globalThis.MouseEvent&&(!n.supportsPointerEvents||!(Q instanceof Se.globalThis.PointerEvent))},p&&(Se.offscreenCanvas=p),n.document=new IU,n.document.defaultView=n,u||UV(i,n,g),n.initRenderingContext(dt(dt({},t),{},{width:P,height:N,background:l??"transparent",cursor:c??"default",cleanUpOnDestroy:g,devicePixelRatio:D,requestAnimationFrame:n.requestAnimationFrame,cancelAnimationFrame:n.cancelAnimationFrame,createImage:n.createImage,supportsTouchEvents:n.supportsTouchEvents,supportsPointerEvents:n.supportsPointerEvents,isTouchEvent:n.isTouchEvent,isMouseEvent:n.isMouseEvent,dblClickSpeed:k??200})),n.initDefaultCamera(P,N,s.clipSpaceNearZ),n.initRenderer(s,!0),n}return bt(e,r),xe(e,[{key:"initRenderingContext",value:function(n){this.context.config=n,this.context.renderingContext={root:this.document.documentElement,unculledEntities:[],renderListCurrentFrame:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(n,i,a){var s=this,o=new Se.CameraContribution;o.clipSpaceNearZ=a,o.setType(en.EXPLORING,zB.DEFAULT).setPosition(n/2,i/2,ok).setFocalPoint(n/2,i/2,0).setOrthographic(n/-2,n/2,i/2,i/-2,g7,p7),o.canvas=this,o.eventEmitter.on(nU.UPDATED,function(){s.context.renderingContext.renderReasons.add(kc.CAMERA_CHANGED),Se.enableSizeAttenuation&&s.getConfig().renderer.getConfig().enableSizeAttenuation&&s.updateSizeAttenuation()}),this.context.camera=o}},{key:"updateSizeAttenuation",value:function(){var n=this.getCamera().getZoom();this.document.documentElement.forEach(function(i){Se.styleValueRegistry.updateSizeAttenuation(i,n)})}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var n=this;return this.readyPromise||(this.readyPromise=new Promise(function(i){n.resolveReadyPromise=function(){i(n)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,a=arguments.length>1?arguments[1]:void 0;rr.clearCache();var s=((n=this.getConfig().future)===null||n===void 0?void 0:n.experimentalCancelEventPropagation)===!0;a||this.dispatchEvent(new cr(na.BEFORE_DESTROY),s,s),this.frameId&&this.cancelAnimationFrame(this.frameId);var o=this.getRoot();i&&(this.unmountChildren(o),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),a||this.dispatchEvent(new cr(na.AFTER_DESTROY),s,s);var A=function(c){c.currentTarget=null,c.manager=null,c.target=null,c.relatedNode=null};A(Vf),A(qf),A(s1),A(Ak),A(o1),A(ps),A(ZB),A(JB),A(kU),Se.textService.clearCache()}},{key:"changeSize",value:function(n,i){this.resize(n,i)}},{key:"resize",value:function(n,i){var a,s=this.context.config;s.width=n,s.height=i,this.getContextService().resize(n,i);var o=this.context.camera,A=o.getProjectionMode();o.setPosition(n/2,i/2,ok).setFocalPoint(n/2,i/2,0),A===wa.ORTHOGRAPHIC?o.setOrthographic(n/-2,n/2,i/2,i/-2,o.getNear(),o.getFar()):o.setAspect(n/i);var l=((a=s.future)===null||a===void 0?void 0:a.experimentalCancelEventPropagation)===!0;this.dispatchEvent(new cr(na.RESIZE,{width:n,height:i}),l,l)}},{key:"appendChild",value:function(n,i){return this.document.documentElement.appendChild(n,i)}},{key:"insertBefore",value:function(n,i){return this.document.documentElement.insertBefore(n,i)}},{key:"removeChild",value:function(n){return this.document.documentElement.removeChild(n)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(n){var i,a=this;n&&(s1.detail=n,o1.detail=n);var s=((i=this.getConfig().future)===null||i===void 0?void 0:i.experimentalCancelEventPropagation)===!0;this.dispatchEvent(s1,s,s);var o=this.getRenderingService();o.render(this,n,function(){a.dispatchEvent(Ak,s,s)}),this.dispatchEvent(o1,s,s)}},{key:"run",value:function(){var n=this,i=function(s,o){n.render(o),n.frameId=n.requestAnimationFrame(i)};i()}},{key:"initRenderer",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!n)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new OU,new LU,new PU([new f7])),this.loadRendererContainerModule(n),this.context.contextService=new this.context.ContextService(dt(dt({},Se),this.context)),this.context.renderingService=new xq(Se,this.context),this.context.eventService=new Bq(Se,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(n,a,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(n,a)}).catch(function(s){console.error(s)})}},{key:"initRenderingService",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.context.renderingService.init(function(){var o;i.inited=!0;var A=((o=i.getConfig().future)===null||o===void 0?void 0:o.experimentalCancelEventPropagation)===!0;a?s?i.requestAnimationFrame(function(){i.dispatchEvent(new cr(na.READY),A,A)}):i.dispatchEvent(new cr(na.READY),A,A):i.dispatchEvent(new cr(na.RENDERER_CHANGED),A,A),i.readyPromise&&i.resolveReadyPromise(),a||i.getRoot().forEach(function(l){var c,u;(c=(u=l).dirty)===null||c===void 0||c.call(u,!0,!0)}),i.mountChildren(i.getRoot()),n.getConfig().enableAutoRendering&&i.run()})}},{key:"loadRendererContainerModule",value:function(n){var i=this,a=n.getPlugins();a.forEach(function(s){s.context=i.context,s.init(Se)})}},{key:"setRenderer",value:function(n){var i=this.getConfig();if(i.renderer!==n){var a=i.renderer;i.renderer=n,this.destroy(!1,!0),Ft((a==null?void 0:a.getPlugins())||[]).reverse().forEach(function(s){s.destroy(Se)}),this.initRenderer(n)}}},{key:"setCursor",value:function(n){var i=this.getConfig();i.cursor=n,this.getContextService().applyCursorStyle(n)}},{key:"unmountChildren",value:function(n){var i=this;if(n.childNodes.forEach(function(o){i.unmountChildren(o)}),this.inited){if(n.isMutationObserved)n.dispatchEvent(qf);else{var a,s=((a=this.getConfig().future)===null||a===void 0?void 0:a.experimentalCancelEventPropagation)===!0;qf.target=n,this.dispatchEvent(qf,!0,s)}n!==this.document.documentElement&&(n.ownerDocument=null),n.isConnected=!1}n.isCustomElement&&n.disconnectedCallback&&n.disconnectedCallback()}},{key:"mountChildren",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Np(n);if(this.inited){if(!n.isConnected&&(n.ownerDocument=this.document,n.isConnected=!0,!a))if(n.isMutationObserved)n.dispatchEvent(Vf);else{var s,o=((s=this.getConfig().future)===null||s===void 0?void 0:s.experimentalCancelEventPropagation)===!0;Vf.target=n,this.dispatchEvent(Vf,!0,o)}}else console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",n.nodeName);n.childNodes.forEach(function(A){i.mountChildren(A,a)}),n.isCustomElement&&n.connectedCallback&&n.connectedCallback()}},{key:"mountFragment",value:function(n){this.mountChildren(n,!1)}},{key:"client2Viewport",value:function(n){return this.getEventService().client2Viewport(n)}},{key:"viewport2Client",value:function(n){return this.getEventService().viewport2Client(n)}},{key:"viewport2Canvas",value:function(n){return this.getEventService().viewport2Canvas(n)}},{key:"canvas2Viewport",value:function(n){return this.getEventService().canvas2Viewport(n)}},{key:"getPointByClient",value:function(n,i){return this.client2Viewport({x:n,y:i})}},{key:"getClientByPoint",value:function(n,i){return this.viewport2Client({x:n,y:i})}}])})(FU),v7=(function(){function r(){Be(this,r),this.cacheStore=new Map}return xe(r,[{key:"onRefAdded",value:function(t){}},{key:"has",value:function(t){return this.cacheStore.has(t)}},{key:"put",value:function(t,n,i){return this.cacheStore.has(t)?!1:(this.cacheStore.set(t,{value:n,counter:new Set([i.entity])}),this.onRefAdded(i),!0)}},{key:"get",value:function(t,n){var i=this.cacheStore.get(t);return i?(i.counter.has(n.entity)||(i.counter.add(n.entity),this.onRefAdded(n)),i.value):null}},{key:"update",value:function(t,n,i){var a=this.cacheStore.get(t);return a?(a.value=dt(dt({},a.value),n),a.counter.has(i.entity)||(a.counter.add(i.entity),this.onRefAdded(i)),!0):!1}},{key:"release",value:function(t,n){var i=this.cacheStore.get(t);return i?(i.counter.delete(n.entity),i.counter.size<=0&&this.cacheStore.delete(t),!0):!1}},{key:"releaseRef",value:function(t){var n=this;Array.from(this.cacheStore.keys()).forEach(function(i){n.release(i,t)})}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])})(),A1=[],l1=[],tx=(function(){function r(){Be(this,r)}return xe(r,null,[{key:"stop",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.api;r.rafId&&(t.cancelAnimationFrame(r.rafId),r.rafId=null)}},{key:"executeTask",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.api;A1.length<=0&&l1.length<=0||(l1.forEach(function(n){return n()}),l1=A1.splice(0,r.TASK_NUM_PER_FRAME),r.rafId=t.requestAnimationFrame(function(){r.executeTask(t)}))}},{key:"sliceImage",value:function(t,n,i,a){for(var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:r.api,A=t.naturalWidth||t.width,l=t.naturalHeight||t.height,c=n-s,u=i-s,h=Math.ceil(A/c),g=Math.ceil(l/u),p={tileSize:[n,i],gridSize:[g,h],tiles:Array(g).fill(null).map(function(){return Array(h).fill(null)})},v=function(b){for(var _=function(F){A1.push(function(){var k=F*c,P=b*u,N=[Math.min(n,A-k),Math.min(i,l-P)],D=N[0],Q=N[1],H=o.createCanvas();H.width=n,H.height=i;var j=H.getContext("2d");j.drawImage(t,k,P,D,Q,0,0,D,Q),p.tiles[b][F]={x:k,y:P,tileX:F,tileY:b,data:H},a()})},C=0;C<h;C++)_(C)},m=0;m<g;m++)v(m);return r.stop(),r.executeTask(),p}}])})();tx.TASK_NUM_PER_FRAME=10;var Xi=new v7;Xi.onRefAdded=function(e){var t=this;e.addEventListener(Ot.DESTROY,function(){t.releaseRef(e)},{once:!0})};var v2=(function(){function r(e,t){Be(this,r),this.gradientCache={},this.patternCache={},this.context=e,this.runtime=t}return xe(r,[{key:"getImageSync",value:function(t,n,i){var a=Rt(t)?t:t.src;if(Xi.has(a)){var s=Xi.get(a,n);if(s.img.complete)return i==null||i(s),s}return this.getOrCreateImage(t,n).then(function(o){i==null||i(o)}).catch(function(o){console.error(o)}),null}},{key:"getOrCreateImage",value:function(t,n){var i=this,a=Rt(t)?t:t.src;if(!Rt(t)&&!Xi.has(a)){var s={img:t,size:[t.naturalWidth||t.width,t.naturalHeight||t.height],tileSize:Wf(t)};Xi.put(a,s,n)}if(Xi.has(a)){var o=Xi.get(a,n);return o.img.complete?Promise.resolve(o):new Promise(function(A,l){o.img.addEventListener("load",function(){o.size=[o.img.naturalWidth||o.img.width,o.img.naturalHeight||o.img.height],o.tileSize=Wf(o.img),A(o)}),o.img.addEventListener("error",function(c){l(c)})})}return new Promise(function(A,l){var c=i.context.config.createImage();if(c){var u={img:c,size:[0,0],tileSize:Wf(c)};Xi.put(a,u,n),c.onload=function(){u.size=[c.naturalWidth||c.width,c.naturalHeight||c.height],u.tileSize=Wf(u.img),A(u)},c.onerror=function(h){l(h)},c.crossOrigin="Anonymous",c.src=a}})}},{key:"createDownSampledImage",value:(function(){var e=lA(Or().mark(function n(i,a){var s,o,A,l,c,u,h,g,p,v,m,w,b,_;return Or().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=1,this.getOrCreateImage(i,a);case 1:if(s=C.sent,!(typeof s.downSamplingRate<"u")){C.next=2;break}return C.abrupt("return",s);case 2:if(o=this.context.config.enableLargeImageOptimization,A=typeof o=="boolean"?{}:o,l=A.maxDownSampledImageSize,c=l===void 0?2048:l,u=A.downSamplingRateThreshold,h=u===void 0?.5:u,g=this.runtime.globalThis.createImageBitmap,p=yt(s.size,2),v=p[0],m=p[1],w=s.img,b=Math.min((c+c)/(v+m),Math.max(.01,Math.min(h,.5))),_=dt(dt({},s),{},{downSamplingRate:b}),Xi.update(s.img.src,_,a),!g){C.next=7;break}return C.prev=3,C.next=4,g(s.img,{resizeWidth:v*b,resizeHeight:m*b});case 4:w=C.sent,C.next=6;break;case 5:C.prev=5,C.catch(3),b=1;case 6:C.next=8;break;case 7:b=1;case 8:return _=dt(dt({},this.getImageSync(i,a)),{},{downSampled:w,downSamplingRate:b}),Xi.update(s.img.src,_,a),C.abrupt("return",_);case 9:case"end":return C.stop()}},n,this,[[3,5]])}));function t(n,i){return e.apply(this,arguments)}return t})()},{key:"createImageTiles",value:(function(){var e=lA(Or().mark(function n(i,a,s,o){var A,l,c,u,h;return Or().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=1,this.getOrCreateImage(i,o);case 1:return A=g.sent,l=o.ownerDocument.defaultView,c=l.requestAnimationFrame,u=l.cancelAnimationFrame,tx.api={requestAnimationFrame:c,cancelAnimationFrame:u,createCanvas:function(){return p2.createCanvas()}},h=dt(dt({},A),tx.sliceImage(A.img,A.tileSize[0],A.tileSize[0],s)),Xi.update(A.img.src,h,o),g.abrupt("return",h);case 2:case"end":return g.stop()}},n,this)}));function t(n,i,a,s){return e.apply(this,arguments)}return t})()},{key:"releaseImage",value:function(t,n){Xi.release(Rt(t)?t:t.src,n)}},{key:"releaseImageRef",value:function(t){Xi.releaseRef(t)}},{key:"getOrCreatePatternSync",value:function(t,n,i,a,s,o,A){var l=this.generatePatternKey(n);if(l&&this.patternCache[l])return this.patternCache[l];var c=n.image,u=n.repetition,h=n.transform,g,p=!1;if(Rt(c)){var v=this.getImageSync(c,t,A);g=v==null?void 0:v.img}else a?(g=a,p=!0):g=c;var m=g&&i.createPattern(g,u);if(m){var w;h?w=TU(yU(h),new hn({})):w=oA(sn()),p&&wQ(w,w,[1/s,1/s,1]),m.setTransform({a:w[0],b:w[1],c:w[4],d:w[5],e:w[12]+o[0],f:w[13]+o[1]})}return l&&m&&(this.patternCache[l]=m),m}},{key:"getOrCreateGradient",value:function(t,n){var i=this.generateGradientKey(t),a=t.type,s=t.steps,o=t.min,A=t.width,l=t.height,c=t.angle,u=t.cx,h=t.cy,g=t.size;if(this.gradientCache[i])return this.gradientCache[i];var p=null;if(a===Vo.LinearGradient){var v=O9(o,A,l,c),m=v.x1,w=v.y1,b=v.x2,_=v.y2;p=n.createLinearGradient(m,w,b,_)}else if(a===Vo.RadialGradient){var C=L9(o,A,l,u,h,g),M=C.x,F=C.y,k=C.r;p=n.createRadialGradient(M,F,0,M,F,k)}return p&&(s.forEach(function(P){var N=P.offset,D=P.color;if(N.unit===Ue.kPercentage){var Q;(Q=p)===null||Q===void 0||Q.addColorStop(N.value/100,D.toString())}}),this.gradientCache[i]=p),this.gradientCache[i]}},{key:"generateGradientKey",value:function(t){var n=t.type,i=t.min,a=t.width,s=t.height,o=t.steps,A=t.angle,l=t.cx,c=t.cy,u=t.size;return"gradient-".concat(n,"-").concat((A==null?void 0:A.toString())||0,"-").concat((l==null?void 0:l.toString())||0,"-").concat((c==null?void 0:c.toString())||0,"-").concat((u==null?void 0:u.toString())||0,"-").concat(i[0],"-").concat(i[1],"-").concat(a,"-").concat(s,"-").concat(o.map(function(h){var g=h.offset,p=h.color;return"".concat(g).concat(p)}).join("-"))}},{key:"generatePatternKey",value:function(t){var n=t.image,i=t.repetition;if(Rt(n))return"pattern-".concat(n,"-").concat(i);if(n.nodeName==="rect")return"pattern-".concat(n.entity,"-").concat(i)}}])})();v2.isSupportTile=!!p2.createCanvas();function Wf(r){if(!r.complete)return[0,0];var e=r.naturalWidth||r.width,t=r.naturalHeight||r.height,n=256;return[256,512].forEach(function(i){var a=Math.ceil(t/i),s=Math.ceil(e/i);a*s<1e3&&(n=i)}),[n,n]}var NU=(function(){function r(){Be(this,r)}return xe(r,[{key:"apply",value:function(t){var n=t.renderingService,i=t.renderingContext,a=t.imagePool,s=i.root.ownerDocument.defaultView,o=function(u,h,g){var p=u.parsedStyle,v=p.width,m=p.height;v&&!m?u.setAttribute("height",g/h*v):!v&&m&&u.setAttribute("width",h/g*m)},A=function(u){var h=u.target,g=h.nodeName,p=h.attributes;if(g===we.IMAGE){var v=p.src,m=p.keepAspectRatio;a.getImageSync(v,h,function(w){var b=w.img,_=b.width,C=b.height;m&&o(h,_,C),h.dirty(),n.dirty()})}},l=function(u){var h=u.target,g=u.attrName,p=u.prevValue,v=u.newValue;h.nodeName!==we.IMAGE||g!=="src"||(p!==v&&a.releaseImage(p,h),Rt(v)&&a.getOrCreateImage(v,h).then(function(m){var w=m.img,b=w.width,_=w.height;h.attributes.keepAspectRatio&&o(h,b,_),h.dirty(),n.dirty()}).catch(function(){}))};n.hooks.init.tap(r.tag,function(){s.addEventListener(Ot.MOUNTED,A),s.addEventListener(Ot.ATTR_MODIFIED,l)}),n.hooks.destroy.tap(r.tag,function(){s.removeEventListener(Ot.MOUNTED,A),s.removeEventListener(Ot.ATTR_MODIFIED,l)})}}])})();NU.tag="LoadImage";var m7=(function(r){function e(){var t;Be(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=wt(this,e,[].concat(i)),t.name="image-loader",t}return bt(e,r),xe(e,[{key:"init",value:function(n){this.context.imagePool=new v2(this.context,n),this.addRenderingPlugin(new NU)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])})(hA),y7=Object.freeze({__proto__:null,ImagePool:v2,Plugin:m7}),w7="g-canvas-camera",DU=(function(){function r(){Be(this,r),this.displayObjectHTMLElementMap=new WeakMap}return xe(r,[{key:"joinTransformMatrix",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return"matrix(".concat([t[0],t[1],t[4],t[5],t[12]+n[0],t[13]+n[1]].join(","),")")}},{key:"apply",value:function(t,n){var i=this,a=t.camera,s=t.renderingContext,o=t.renderingService;this.context=t;var A=s.root.ownerDocument.defaultView,l=A.context.eventService.nativeHTMLMap,c=function(w,b){b.style.transform=i.joinTransformMatrix(w.getWorldTransform(),w.getOrigin())},u=function(w){var b=w.target;if(b.nodeName===we.HTML){i.$camera||(i.$camera=i.createCamera(a));var _=i.getOrCreateEl(b);i.$camera.appendChild(_),Object.keys(b.attributes).forEach(function(C){i.updateAttribute(C,b)}),c(b,_),l.set(_,b)}},h=function(w){var b=w.target;if(b.nodeName===we.HTML&&i.$camera){var _=i.getOrCreateEl(b);_&&(_.remove(),l.delete(_))}},g=function(w){var b=w.target;if(b.nodeName===we.HTML){var _=w.attrName;i.updateAttribute(_,b)}},p=function(w){for(var b=w.detail,_=0;_<b.length;_++){var C=b[_],M=C.target,F=M.nodeName===we.FRAGMENT?M.childNodes:[M];F.forEach(function(k){if(k.nodeName===we.HTML){var P=i.getOrCreateEl(k);c(k,P)}})}},v=function(){if(i.$camera){var w=i.context.config,b=w.width,_=w.height;i.$camera.parentElement.style.width="".concat(b||0,"px"),i.$camera.parentElement.style.height="".concat(_||0,"px")}};o.hooks.init.tap(r.tag,function(){A.addEventListener(na.RESIZE,v),A.addEventListener(Ot.MOUNTED,u),A.addEventListener(Ot.UNMOUNTED,h),A.addEventListener(Ot.ATTR_MODIFIED,g),A.addEventListener(Ot.BOUNDS_CHANGED,p)}),o.hooks.endFrame.tap(r.tag,function(){i.$camera&&s.renderReasons.has(kc.CAMERA_CHANGED)&&(i.$camera.style.transform=i.joinTransformMatrix(a.getOrthoMatrix()))}),o.hooks.destroy.tap(r.tag,function(){i.$camera&&i.$camera.remove(),A.removeEventListener(na.RESIZE,v),A.removeEventListener(Ot.MOUNTED,u),A.removeEventListener(Ot.UNMOUNTED,h),A.removeEventListener(Ot.ATTR_MODIFIED,g),A.removeEventListener(Ot.BOUNDS_CHANGED,p)})}},{key:"createCamera",value:function(t){var n=this.context.config,i=n.document,a=n.width,s=n.height,o=this.context.contextService.getDomElement(),A=o.parentNode;if(A){var l=w7,c=A.querySelector("#".concat(l));if(!c){var u=(i||document).createElement("div");u.style.overflow="hidden",u.style.pointerEvents="none",u.style.position="absolute",u.style.left="0px",u.style.top="0px",u.style.width="".concat(a||0,"px"),u.style.height="".concat(s||0,"px");var h=(i||document).createElement("div");c=h,h.id=l,h.style.position="absolute",h.style.left="".concat(o.offsetLeft||0,"px"),h.style.top="".concat(o.offsetTop||0,"px"),h.style.transformOrigin="left top",h.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),h.style.pointerEvents="none",h.style.width="100%",h.style.height="100%",u.appendChild(h),A.appendChild(u)}return c}return null}},{key:"getOrCreateEl",value:function(t){var n=this.context.config.document,i=this.displayObjectHTMLElementMap.get(t);return i||(i=(n||document).createElement("div"),t.parsedStyle.$el=i,this.displayObjectHTMLElementMap.set(t,i),t.id&&(i.id=t.id),t.name&&i.setAttribute("name",t.name),t.className&&(i.className=t.className),i.style.position="absolute",i.style["will-change"]="transform",i.style.transform=this.joinTransformMatrix(t.getWorldTransform(),t.getOrigin())),i}},{key:"updateAttribute",value:function(t,n){var i=this.getOrCreateEl(n);switch(t){case"innerHTML":var a=n.parsedStyle.innerHTML;Rt(a)?i.innerHTML=a:(i.innerHTML="",i.appendChild(a));break;case"x":i.style.left="".concat(n.parsedStyle.x,"px");break;case"y":i.style.top="".concat(n.parsedStyle.y,"px");break;case"transformOrigin":var s=n.parsedStyle.transformOrigin;i.style["transform-origin"]="".concat(s[0].buildCSSText(null,null,"")," ").concat(s[1].buildCSSText(null,null,""));break;case"width":var o=n.parsedStyle.width;i.style.width=je(o)?"".concat(o,"px"):o.toString();break;case"height":var A=n.parsedStyle.height;i.style.height=je(A)?"".concat(A,"px"):A.toString();break;case"zIndex":var l=n.parsedStyle.zIndex;i.style["z-index"]="".concat(l);break;case"visibility":var c=n.parsedStyle.visibility;i.style.visibility=c;break;case"pointerEvents":var u=n.parsedStyle.pointerEvents,h=u===void 0?"auto":u;i.style.pointerEvents=h;break;case"opacity":var g=n.parsedStyle.opacity;i.style.opacity="".concat(g);break;case"fill":var p=n.parsedStyle.fill,v="";Op(p)?p.isNone?v="transparent":v=n.getAttribute("fill"):Array.isArray(p)?v=n.getAttribute("fill"):dl(p),i.style.background=v;break;case"stroke":var m=n.parsedStyle.stroke,w="";Op(m)?m.isNone?w="transparent":w=n.getAttribute("stroke"):Array.isArray(m)?w=n.getAttribute("stroke"):dl(m),i.style["border-color"]=w,i.style["border-style"]="solid";break;case"lineWidth":var b=n.parsedStyle.lineWidth;i.style["border-width"]="".concat(b||0,"px");break;case"lineDash":i.style["border-style"]="dashed";break;case"filter":var _=n.style.filter;i.style.filter=_;break;default:!it(n.style[t])&&n.style[t]!==""&&(i.style[t]=n.style[t])}}}])})();DU.tag="HTMLRendering";var b7=(function(r){function e(){var t;Be(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=wt(this,e,[].concat(i)),t.name="html-renderer",t}return bt(e,r),xe(e,[{key:"init",value:function(){this.addRenderingPlugin(new DU)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])})(hA),_7=Object.freeze({__proto__:null,Plugin:b7}),RU=(function(){function r(){Be(this,r)}return xe(r,[{key:"apply",value:function(t,n){var i=this,a=t.renderingService,s=t.renderingContext,o=t.config;this.context=t;var A=s.root.ownerDocument.defaultView,l=function(P){a.hooks.pointerMove.call(P)},c=function(P){a.hooks.pointerUp.call(P)},u=function(P){a.hooks.pointerDown.call(P)},h=function(P){a.hooks.pointerOver.call(P)},g=function(P){a.hooks.pointerOut.call(P)},p=function(P){a.hooks.pointerCancel.call(P)},v=function(P){a.hooks.pointerWheel.call(P)},m=function(P){a.hooks.click.call(P)},w=function(P){n.globalThis.document.addEventListener("pointermove",l,!0),P.addEventListener("pointerdown",u,!0),P.addEventListener("pointerleave",g,!0),P.addEventListener("pointerover",h,!0),n.globalThis.addEventListener("pointerup",c,!0),n.globalThis.addEventListener("pointercancel",p,!0)},b=function(P){P.addEventListener("touchstart",u,!0),P.addEventListener("touchend",c,!0),P.addEventListener("touchmove",l,!0),P.addEventListener("touchcancel",p,!0)},_=function(P){n.globalThis.document.addEventListener("mousemove",l,!0),P.addEventListener("mousedown",u,!0),P.addEventListener("mouseout",g,!0),P.addEventListener("mouseover",h,!0),n.globalThis.addEventListener("mouseup",c,!0)},C=function(P){n.globalThis.document.removeEventListener("pointermove",l,!0),P.removeEventListener("pointerdown",u,!0),P.removeEventListener("pointerleave",g,!0),P.removeEventListener("pointerover",h,!0),n.globalThis.removeEventListener("pointerup",c,!0),n.globalThis.removeEventListener("pointercancel",p,!0)},M=function(P){P.removeEventListener("touchstart",u,!0),P.removeEventListener("touchend",c,!0),P.removeEventListener("touchmove",l,!0),P.removeEventListener("touchcancel",p,!0)},F=function(P){n.globalThis.document.removeEventListener("mousemove",l,!0),P.removeEventListener("mousedown",u,!0),P.removeEventListener("mouseout",g,!0),P.removeEventListener("mouseover",h,!0),n.globalThis.removeEventListener("mouseup",c,!0)};a.hooks.init.tap(r.tag,function(){var k=i.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(k.style.msContentZooming="none",k.style.msTouchAction="none"):A.supportsPointerEvents&&(k.style.touchAction="none"),A.supportsPointerEvents?w(k):_(k),A.supportsTouchEvents&&b(k),o.useNativeClickEvent&&k.addEventListener("click",m,!0),k.addEventListener("wheel",v,{passive:!0,capture:!0})}),a.hooks.destroy.tap(r.tag,function(){var k=i.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(k.style.msContentZooming="",k.style.msTouchAction=""):A.supportsPointerEvents&&(k.style.touchAction=""),A.supportsPointerEvents?C(k):F(k),A.supportsTouchEvents&&M(k),o.useNativeClickEvent&&k.removeEventListener("click",m,!0),k.removeEventListener("wheel",v,!0)})}}])})();RU.tag="DOMInteraction";var E7=(function(r){function e(){var t;Be(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=wt(this,e,[].concat(i)),t.name="dom-interaction",t}return bt(e,r),xe(e,[{key:"init",value:function(){this.addRenderingPlugin(new RU)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])})(hA),C7=Object.freeze({__proto__:null,Plugin:E7}),B7=(function(){function r(){Be(this,r)}return xe(r,[{key:"apply",value:function(t){var n=t.renderingService,i=t.contextService,a=t.config,s=i.getDomElement(),o=function(v){n.hooks.pointerDown.call(v)},A=function(v){n.hooks.pointerUp.call(v)},l=function(v){n.hooks.pointerMove.call(v)},c=function(v){n.hooks.pointerOver.call(v)},u=function(v){n.hooks.pointerOut.call(v)},h=function(v){n.hooks.click.call(v)},g=function(v){n.hooks.pointerCancel.call(v)};n.hooks.init.tap(r.tag,function(){s.addEventListener("touchstart",o,!0),s.addEventListener("touchend",A,!0),s.addEventListener("touchmove",l,!0),s.addEventListener("touchcancel",g,!0),s.addEventListener("mouseout",u,!0),s.addEventListener("mouseover",c,!0),a.useNativeClickEvent&&s.addEventListener("click",h,!0)}),n.hooks.destroy.tap(r.tag,function(){s.removeEventListener("touchstart",o,!0),s.removeEventListener("touchend",A,!0),s.removeEventListener("touchmove",l,!0),s.removeEventListener("touchcancel",g,!0),s.removeEventListener("mouseout",u,!0),s.removeEventListener("mouseover",c,!0),a.useNativeClickEvent&&s.removeEventListener("click",h,!0)})}}])})();B7.tag="MobileInteraction";/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nx=function(r,e){return nx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},nx(r,e)};function ns(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");nx(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function ba(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,[])).next())})}function Zi(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(c){return A([l,c])}}function A(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){t.label=l[1];break}if(l[0]===6&&t.label<a[1]){t.label=a[1],a=l;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(l);break}a[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var fl=(function(){function r(e,t,n,i){this.left=e,this.top=t,this.width=n,this.height=i}return r.prototype.add=function(e,t,n,i){return new r(this.left+e,this.top+t,this.width+n,this.height+i)},r.fromClientRect=function(e,t){return new r(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},r.fromDOMRectList=function(e,t){var n=Array.from(t).find(function(i){return i.width!==0});return n?new r(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r})(),m2=function(r,e){return fl.fromClientRect(r,e.getBoundingClientRect())},yv=function(r){for(var e=[],t=0,n=r.length;t<n;){var i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){var a=r.charCodeAt(t++);(a&64512)===56320?e.push(((i&1023)<<10)+(a&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},tr=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],i=-1,a="";++i<t;){var s=r[i];s<=65535?n.push(s):(s-=65536,n.push((s>>10)+55296,s%1024+56320)),(i+1===t||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},lk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x7=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $f=0;$f<lk.length;$f++)x7[lk.charCodeAt($f)]=$f;var ck="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",id=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yf=0;Yf<ck.length;Yf++)id[ck.charCodeAt(Yf)]=Yf;var S7=function(r){var e=r.length*.75,t=r.length,n,i=0,a,s,o,A;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(l)?l:new Uint8Array(l);for(n=0;n<t;n+=4)a=id[r.charCodeAt(n)],s=id[r.charCodeAt(n+1)],o=id[r.charCodeAt(n+2)],A=id[r.charCodeAt(n+3)],c[i++]=a<<2|s>>4,c[i++]=(s&15)<<4|o>>2,c[i++]=(o&3)<<6|A&63;return l},T7=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},M7=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},il=5,y2=11,c1=2,F7=y2-il,QU=65536>>il,k7=1<<il,u1=k7-1,I7=1024>>il,P7=QU+I7,O7=P7,L7=32,N7=O7+L7,D7=65536>>y2,R7=1<<F7,Q7=R7-1,uk=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},U7=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},H7=function(r,e){var t=S7(r),n=Array.isArray(t)?M7(t):new Uint32Array(t),i=Array.isArray(t)?T7(t):new Uint16Array(t),a=24,s=uk(i,a/2,n[4]/2),o=n[5]===2?uk(i,(a+n[4])/2):U7(n,Math.ceil((a+n[4])/4));return new z7(n[0],n[1],n[2],n[3],s,o)},z7=(function(){function r(e,t,n,i,a,s){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=a,this.data=s}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>il],t=(t<<c1)+(e&u1),this.data[t];if(e<=65535)return t=this.index[QU+(e-55296>>il)],t=(t<<c1)+(e&u1),this.data[t];if(e<this.highStart)return t=N7-D7+(e>>y2),t=this.index[t],t+=e>>il&Q7,t=this.index[t],t=(t<<c1)+(e&u1),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),dk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j7=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xf=0;Xf<dk.length;Xf++)j7[dk.charCodeAt(Xf)]=Xf;var K7="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",hk=50,G7=1,UU=2,HU=3,V7=4,q7=5,fk=7,zU=8,gk=9,qo=10,rx=11,pk=12,ix=13,W7=14,ad=15,ax=16,Zf=17,Vu=18,$7=19,vk=20,sx=21,qu=22,d1=23,ic=24,Ji=25,sd=26,od=27,ac=28,Y7=29,WA=30,X7=31,Jf=32,eg=33,ox=34,Ax=35,lx=36,Ud=37,cx=38,sp=39,op=40,h1=41,jU=42,Z7=43,J7=[9001,65288],KU="!",Dt="",tg="",ux=H7(K7),Ks=[WA,lx],dx=[G7,UU,HU,q7],GU=[qo,zU],mk=[od,sd],eW=dx.concat(GU),yk=[cx,sp,op,ox,Ax],tW=[ad,ix],nW=function(r,e){e===void 0&&(e="strict");var t=[],n=[],i=[];return r.forEach(function(a,s){var o=ux.get(a);if(o>hk?(i.push(!0),o-=hk):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return n.push(s),t.push(ax);if(o===V7||o===rx){if(s===0)return n.push(s),t.push(WA);var A=t[s-1];return eW.indexOf(A)===-1?(n.push(n[s-1]),t.push(A)):(n.push(s),t.push(WA))}if(n.push(s),o===X7)return t.push(e==="strict"?sx:Ud);if(o===jU||o===Y7)return t.push(WA);if(o===Z7)return a>=131072&&a<=196605||a>=196608&&a<=262141?t.push(Ud):t.push(WA);t.push(o)}),[n,t,i]},f1=function(r,e,t,n){var i=n[t];if(Array.isArray(r)?r.indexOf(i)!==-1:r===i)for(var a=t;a<=n.length;){a++;var s=n[a];if(s===e)return!0;if(s!==qo)break}if(i===qo)for(var a=t;a>0;){a--;var o=n[a];if(Array.isArray(r)?r.indexOf(o)!==-1:r===o)for(var A=t;A<=n.length;){A++;var s=n[A];if(s===e)return!0;if(s!==qo)break}if(o!==qo)break}return!1},wk=function(r,e){for(var t=r;t>=0;){var n=e[t];if(n===qo)t--;else return n}return 0},rW=function(r,e,t,n,i){if(t[n]===0)return Dt;var a=n-1;if(Array.isArray(i)&&i[a]===!0)return Dt;var s=a-1,o=a+1,A=e[a],l=s>=0?e[s]:0,c=e[o];if(A===UU&&c===HU)return Dt;if(dx.indexOf(A)!==-1)return KU;if(dx.indexOf(c)!==-1||GU.indexOf(c)!==-1)return Dt;if(wk(a,e)===zU)return tg;if(ux.get(r[a])===rx||(A===Jf||A===eg)&&ux.get(r[o])===rx||A===fk||c===fk||A===gk||[qo,ix,ad].indexOf(A)===-1&&c===gk||[Zf,Vu,$7,ic,ac].indexOf(c)!==-1||wk(a,e)===qu||f1(d1,qu,a,e)||f1([Zf,Vu],sx,a,e)||f1(pk,pk,a,e))return Dt;if(A===qo)return tg;if(A===d1||c===d1)return Dt;if(c===ax||A===ax)return tg;if([ix,ad,sx].indexOf(c)!==-1||A===W7||l===lx&&tW.indexOf(A)!==-1||A===ac&&c===lx||c===vk||Ks.indexOf(c)!==-1&&A===Ji||Ks.indexOf(A)!==-1&&c===Ji||A===od&&[Ud,Jf,eg].indexOf(c)!==-1||[Ud,Jf,eg].indexOf(A)!==-1&&c===sd||Ks.indexOf(A)!==-1&&mk.indexOf(c)!==-1||mk.indexOf(A)!==-1&&Ks.indexOf(c)!==-1||[od,sd].indexOf(A)!==-1&&(c===Ji||[qu,ad].indexOf(c)!==-1&&e[o+1]===Ji)||[qu,ad].indexOf(A)!==-1&&c===Ji||A===Ji&&[Ji,ac,ic].indexOf(c)!==-1)return Dt;if([Ji,ac,ic,Zf,Vu].indexOf(c)!==-1)for(var u=a;u>=0;){var h=e[u];if(h===Ji)return Dt;if([ac,ic].indexOf(h)!==-1)u--;else break}if([od,sd].indexOf(c)!==-1)for(var u=[Zf,Vu].indexOf(A)!==-1?s:a;u>=0;){var h=e[u];if(h===Ji)return Dt;if([ac,ic].indexOf(h)!==-1)u--;else break}if(cx===A&&[cx,sp,ox,Ax].indexOf(c)!==-1||[sp,ox].indexOf(A)!==-1&&[sp,op].indexOf(c)!==-1||[op,Ax].indexOf(A)!==-1&&c===op||yk.indexOf(A)!==-1&&[vk,sd].indexOf(c)!==-1||yk.indexOf(c)!==-1&&A===od||Ks.indexOf(A)!==-1&&Ks.indexOf(c)!==-1||A===ic&&Ks.indexOf(c)!==-1||Ks.concat(Ji).indexOf(A)!==-1&&c===qu&&J7.indexOf(r[o])===-1||Ks.concat(Ji).indexOf(c)!==-1&&A===Vu)return Dt;if(A===h1&&c===h1){for(var g=t[a],p=1;g>0&&(g--,e[g]===h1);)p++;if(p%2!==0)return Dt}return A===Jf&&c===eg?Dt:tg},iW=function(r,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=nW(r,e.lineBreak),n=t[0],i=t[1],a=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(o){return[Ji,WA,jU].indexOf(o)!==-1?Ud:o}));var s=e.wordBreak==="keep-all"?a.map(function(o,A){return o&&r[A]>=19968&&r[A]<=40959}):void 0;return[n,i,s]},aW=(function(){function r(e,t,n,i){this.codePoints=e,this.required=t===KU,this.start=n,this.end=i}return r.prototype.slice=function(){return tr.apply(void 0,this.codePoints.slice(this.start,this.end))},r})(),sW=function(r,e){var t=yv(r),n=iW(t,e),i=n[0],a=n[1],s=n[2],o=t.length,A=0,l=0;return{next:function(){if(l>=o)return{done:!0,value:null};for(var c=Dt;l<o&&(c=rW(t,a,i,++l,s))===Dt;);if(c!==Dt||l===o){var u=new aW(t,c,A,l);return A=l,{value:u,done:!1}}return{done:!0,value:null}}}},oW=1,AW=2,lh=4,bk=8,Rp=10,_k=47,Bd=92,lW=9,cW=32,ng=34,Wu=61,uW=35,dW=36,hW=37,rg=39,ig=40,$u=41,fW=95,Ri=45,gW=33,pW=60,vW=62,mW=64,yW=91,wW=93,bW=61,_W=123,ag=63,EW=125,Ek=124,CW=126,BW=128,Ck=65533,g1=42,ZA=43,xW=44,SW=58,TW=59,Hd=46,MW=0,FW=8,kW=11,IW=14,PW=31,OW=127,ds=-1,VU=48,qU=97,WU=101,LW=102,NW=117,DW=122,$U=65,YU=69,XU=70,RW=85,QW=90,ai=function(r){return r>=VU&&r<=57},UW=function(r){return r>=55296&&r<=57343},sc=function(r){return ai(r)||r>=$U&&r<=XU||r>=qU&&r<=LW},HW=function(r){return r>=qU&&r<=DW},zW=function(r){return r>=$U&&r<=QW},jW=function(r){return HW(r)||zW(r)},KW=function(r){return r>=BW},sg=function(r){return r===Rp||r===lW||r===cW},Qp=function(r){return jW(r)||KW(r)||r===fW},Bk=function(r){return Qp(r)||ai(r)||r===Ri},GW=function(r){return r>=MW&&r<=FW||r===kW||r>=IW&&r<=PW||r===OW},Ho=function(r,e){return r!==Bd?!1:e!==Rp},og=function(r,e,t){return r===Ri?Qp(e)||Ho(e,t):Qp(r)?!0:!!(r===Bd&&Ho(r,e))},p1=function(r,e,t){return r===ZA||r===Ri?ai(e)?!0:e===Hd&&ai(t):ai(r===Hd?e:r)},VW=function(r){var e=0,t=1;(r[e]===ZA||r[e]===Ri)&&(r[e]===Ri&&(t=-1),e++);for(var n=[];ai(r[e]);)n.push(r[e++]);var i=n.length?parseInt(tr.apply(void 0,n),10):0;r[e]===Hd&&e++;for(var a=[];ai(r[e]);)a.push(r[e++]);var s=a.length,o=s?parseInt(tr.apply(void 0,a),10):0;(r[e]===YU||r[e]===WU)&&e++;var A=1;(r[e]===ZA||r[e]===Ri)&&(r[e]===Ri&&(A=-1),e++);for(var l=[];ai(r[e]);)l.push(r[e++]);var c=l.length?parseInt(tr.apply(void 0,l),10):0;return t*(i+o*Math.pow(10,-s))*Math.pow(10,A*c)},qW={type:2},WW={type:3},$W={type:4},YW={type:13},XW={type:8},ZW={type:21},JW={type:9},e$={type:10},t$={type:11},n$={type:12},r$={type:14},Ag={type:23},i$={type:1},a$={type:25},s$={type:24},o$={type:26},A$={type:27},l$={type:28},c$={type:29},u$={type:31},hx={type:32},ZU=(function(){function r(){this._value=[]}return r.prototype.write=function(e){this._value=this._value.concat(yv(e))},r.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==hx;)e.push(t),t=this.consumeToken();return e},r.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case ng:return this.consumeStringToken(ng);case uW:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Bk(t)||Ho(n,i)){var a=og(t,n,i)?AW:oW,s=this.consumeName();return{type:5,value:s,flags:a}}break;case dW:if(this.peekCodePoint(0)===Wu)return this.consumeCodePoint(),YW;break;case rg:return this.consumeStringToken(rg);case ig:return qW;case $u:return WW;case g1:if(this.peekCodePoint(0)===Wu)return this.consumeCodePoint(),r$;break;case ZA:if(p1(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case xW:return $W;case Ri:var o=e,A=this.peekCodePoint(0),l=this.peekCodePoint(1);if(p1(o,A,l))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(og(o,A,l))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===Ri&&l===vW)return this.consumeCodePoint(),this.consumeCodePoint(),s$;break;case Hd:if(p1(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case _k:if(this.peekCodePoint(0)===g1)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===g1&&(c=this.consumeCodePoint(),c===_k))return this.consumeToken();if(c===ds)return this.consumeToken()}break;case SW:return o$;case TW:return A$;case pW:if(this.peekCodePoint(0)===gW&&this.peekCodePoint(1)===Ri&&this.peekCodePoint(2)===Ri)return this.consumeCodePoint(),this.consumeCodePoint(),a$;break;case mW:var u=this.peekCodePoint(0),h=this.peekCodePoint(1),g=this.peekCodePoint(2);if(og(u,h,g)){var s=this.consumeName();return{type:7,value:s}}break;case yW:return l$;case Bd:if(Ho(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case wW:return c$;case bW:if(this.peekCodePoint(0)===Wu)return this.consumeCodePoint(),XW;break;case _W:return t$;case EW:return n$;case NW:case RW:var p=this.peekCodePoint(0),v=this.peekCodePoint(1);return p===ZA&&(sc(v)||v===ag)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case Ek:if(this.peekCodePoint(0)===Wu)return this.consumeCodePoint(),JW;if(this.peekCodePoint(0)===Ek)return this.consumeCodePoint(),ZW;break;case CW:if(this.peekCodePoint(0)===Wu)return this.consumeCodePoint(),e$;break;case ds:return hx}return sg(e)?(this.consumeWhiteSpace(),u$):ai(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Qp(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:tr(e)}},r.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},r.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},r.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},r.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();sc(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===ag&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n){var i=parseInt(tr.apply(void 0,e.map(function(A){return A===ag?VU:A})),16),a=parseInt(tr.apply(void 0,e.map(function(A){return A===ag?XU:A})),16);return{type:30,start:i,end:a}}var s=parseInt(tr.apply(void 0,e),16);if(this.peekCodePoint(0)===Ri&&sc(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var o=[];sc(t)&&o.length<6;)o.push(t),t=this.consumeCodePoint();var a=parseInt(tr.apply(void 0,o),16);return{type:30,start:s,end:a}}else return{type:30,start:s,end:s}},r.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===ig?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ig?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},r.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ds)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===rg||t===ng){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ds||this.peekCodePoint(0)===$u)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Ag)}for(;;){var i=this.consumeCodePoint();if(i===ds||i===$u)return{type:22,value:tr.apply(void 0,e)};if(sg(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ds||this.peekCodePoint(0)===$u?(this.consumeCodePoint(),{type:22,value:tr.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Ag);if(i===ng||i===rg||i===ig||GW(i))return this.consumeBadUrlRemnants(),Ag;if(i===Bd)if(Ho(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Ag;else e.push(i)}},r.prototype.consumeWhiteSpace=function(){for(;sg(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===$u||e===ds)return;Ho(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var i=Math.min(t,e);n+=tr.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),n},r.prototype.consumeStringToken=function(e){var t="",n=0;do{var i=this._value[n];if(i===ds||i===void 0||i===e)return t+=this.consumeStringSlice(n),{type:0,value:t};if(i===Rp)return this._value.splice(0,n),i$;if(i===Bd){var a=this._value[n+1];a!==ds&&a!==void 0&&(a===Rp?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):Ho(i,a)&&(t+=this.consumeStringSlice(n),t+=tr(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},r.prototype.consumeNumber=function(){var e=[],t=lh,n=this.peekCodePoint(0);for((n===ZA||n===Ri)&&e.push(this.consumeCodePoint());ai(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(n===Hd&&ai(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=bk;ai(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),i=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((n===YU||n===WU)&&((i===ZA||i===Ri)&&ai(a)||ai(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=bk;ai(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[VW(e),t]},r.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],i=this.peekCodePoint(0),a=this.peekCodePoint(1),s=this.peekCodePoint(2);if(og(i,a,s)){var o=this.consumeName();return{type:15,number:t,flags:n,unit:o}}return i===hW?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},r.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(sc(e)){for(var t=tr(e);sc(this.peekCodePoint(0))&&t.length<6;)t+=tr(this.consumeCodePoint());sg(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return n===0||UW(n)||n>1114111?Ck:n}return e===ds?Ck:e},r.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(Bk(t))e+=tr(t);else if(Ho(t,this.peekCodePoint(0)))e+=tr(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},r})(),JU=(function(){function r(e){this._tokens=e}return r.create=function(e){var t=new ZU;return t.write(e),new r(t.read())},r.parseValue=function(e){return r.create(e).parseComponentValue()},r.parseValues=function(e){return r.create(e).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},r.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},r.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||d$(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},r.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?hx:e},r.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},r})(),ch=function(r){return r.type===15},wv=function(r){return r.type===17},Vn=function(r){return r.type===20},fx=function(r,e){return Vn(r)&&r.value===e},bv=function(r){return r.type!==31&&r.type!==4},Ms=function(r){var e=[],t=[];return r.forEach(function(n){if(n.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}n.type!==31&&t.push(n)}),t.length&&e.push(t),e},d$=function(r,e){return e===11&&r.type===12||e===28&&r.type===29?!0:e===2&&r.type===3},cA=function(r){return r.type===17||r.type===15},ur=function(r){return r.type===16||cA(r)},e4=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},Vr={type:17,number:0,flags:lh},w2={type:16,number:50,flags:lh},Wo={type:16,number:100,flags:lh},Ad=function(r,e,t){var n=r[0],i=r[1];return[mn(n,e),mn(typeof i<"u"?i:n,t)]},mn=function(r,e){if(r.type===16)return r.number/100*e;if(ch(r))switch(r.unit){case"rem":case"em":return 16*r.number;case"px":default:return r.number}return r.number},t4="deg",n4="grad",r4="rad",i4="turn",_v={name:"angle",parse:function(r,e){if(e.type===15)switch(e.unit){case t4:return Math.PI*e.number/180;case n4:return Math.PI/200*e.number;case r4:return e.number;case i4:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},a4=function(r){return r.type===15&&(r.unit===t4||r.unit===n4||r.unit===r4||r.unit===i4)},s4=function(r){var e=r.filter(Vn).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Vr,Vr];case"to top":case"bottom":return Sa(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Vr,Wo];case"to right":case"left":return Sa(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Wo,Wo];case"to bottom":case"top":return Sa(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Wo,Vr];case"to left":case"right":return Sa(270)}return 0},Sa=function(r){return Math.PI*r/180},iA={name:"color",parse:function(r,e){if(e.type===18){var t=h$[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(r,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),i=e.value.substring(1,2),a=e.value.substring(2,3);return $o(parseInt(n+n,16),parseInt(i+i,16),parseInt(a+a,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),i=e.value.substring(1,2),a=e.value.substring(2,3),s=e.value.substring(3,4);return $o(parseInt(n+n,16),parseInt(i+i,16),parseInt(a+a,16),parseInt(s+s,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),i=e.value.substring(2,4),a=e.value.substring(4,6);return $o(parseInt(n,16),parseInt(i,16),parseInt(a,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),i=e.value.substring(2,4),a=e.value.substring(4,6),s=e.value.substring(6,8);return $o(parseInt(n,16),parseInt(i,16),parseInt(a,16),parseInt(s,16)/255)}}if(e.type===20){var o=zd[e.value.toUpperCase()];if(typeof o<"u")return o}return zd.TRANSPARENT}},Ic=function(r){return(255&r)===0},Pr=function(r){var e=255&r,t=255&r>>8,n=255&r>>16,i=255&r>>24;return e<255?"rgba("+i+","+n+","+t+","+e/255+")":"rgb("+i+","+n+","+t+")"},$o=function(r,e,t,n){return(r<<24|e<<16|t<<8|Math.round(n*255)<<0)>>>0},xk=function(r,e){if(r.type===17)return r.number;if(r.type===16){var t=e===3?1:255;return e===3?r.number/100*t:Math.round(r.number/100*t)}return 0},Sk=function(r,e){var t=e.filter(bv);if(t.length===3){var n=t.map(xk),i=n[0],a=n[1],s=n[2];return $o(i,a,s,1)}if(t.length===4){var o=t.map(xk),i=o[0],a=o[1],s=o[2],A=o[3];return $o(i,a,s,A)}return 0};function v1(r,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-r)*t*6+r:t<1/2?e:t<2/3?(e-r)*6*(2/3-t)+r:r}var Tk=function(r,e){var t=e.filter(bv),n=t[0],i=t[1],a=t[2],s=t[3],o=(n.type===17?Sa(n.number):_v.parse(r,n))/(Math.PI*2),A=ur(i)?i.number/100:0,l=ur(a)?a.number/100:0,c=typeof s<"u"&&ur(s)?mn(s,1):1;if(A===0)return $o(l*255,l*255,l*255,1);var u=l<=.5?l*(A+1):l+A-l*A,h=l*2-u,g=v1(h,u,o+1/3),p=v1(h,u,o),v=v1(h,u,o-1/3);return $o(g*255,p*255,v*255,c)},h$={hsl:Tk,hsla:Tk,rgb:Sk,rgba:Sk},Mk=function(r,e){return iA.parse(r,JU.create(e).parseComponentValue())},zd={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},f$={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Vn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},g$={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ev=function(r,e){var t=iA.parse(r,e[0]),n=e[1];return n&&ur(n)?{color:t,stop:n}:{color:t,stop:null}},Fk=function(r,e){var t=r[0],n=r[r.length-1];t.stop===null&&(t.stop=Vr),n.stop===null&&(n.stop=Wo);for(var i=[],a=0,s=0;s<r.length;s++){var o=r[s].stop;if(o!==null){var A=mn(o,e);A>a?i.push(A):i.push(a),a=A}else i.push(null)}for(var l=null,s=0;s<i.length;s++){var c=i[s];if(c===null)l===null&&(l=s);else if(l!==null){for(var u=s-l,h=i[l-1],g=(c-h)/(u+1),p=1;p<=u;p++)i[l+p-1]=g*p;l=null}}return r.map(function(v,m){var w=v.color;return{color:w,stop:Math.max(Math.min(1,i[m]/e),0)}})},p$=function(r,e,t){var n=e/2,i=t/2,a=mn(r[0],e)-n,s=i-mn(r[1],t);return(Math.atan2(s,a)+Math.PI*2)%(Math.PI*2)},v$=function(r,e,t){var n=typeof r=="number"?r:p$(r,e,t),i=Math.abs(e*Math.sin(n))+Math.abs(t*Math.cos(n)),a=e/2,s=t/2,o=i/2,A=Math.sin(n-Math.PI/2)*o,l=Math.cos(n-Math.PI/2)*o;return[i,a-l,a+l,s-A,s+A]},Ka=function(r,e){return Math.sqrt(r*r+e*e)},kk=function(r,e,t,n,i){var a=[[0,0],[0,e],[r,0],[r,e]];return a.reduce(function(s,o){var A=o[0],l=o[1],c=Ka(t-A,n-l);return(i?c<s.optimumDistance:c>s.optimumDistance)?{optimumCorner:o,optimumDistance:c}:s},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},m$=function(r,e,t,n,i){var a=0,s=0;switch(r.size){case 0:r.shape===0?a=s=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-i)):r.shape===1&&(a=Math.min(Math.abs(e),Math.abs(e-n)),s=Math.min(Math.abs(t),Math.abs(t-i)));break;case 2:if(r.shape===0)a=s=Math.min(Ka(e,t),Ka(e,t-i),Ka(e-n,t),Ka(e-n,t-i));else if(r.shape===1){var o=Math.min(Math.abs(t),Math.abs(t-i))/Math.min(Math.abs(e),Math.abs(e-n)),A=kk(n,i,e,t,!0),l=A[0],c=A[1];a=Ka(l-e,(c-t)/o),s=o*a}break;case 1:r.shape===0?a=s=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-i)):r.shape===1&&(a=Math.max(Math.abs(e),Math.abs(e-n)),s=Math.max(Math.abs(t),Math.abs(t-i)));break;case 3:if(r.shape===0)a=s=Math.max(Ka(e,t),Ka(e,t-i),Ka(e-n,t),Ka(e-n,t-i));else if(r.shape===1){var o=Math.max(Math.abs(t),Math.abs(t-i))/Math.max(Math.abs(e),Math.abs(e-n)),u=kk(n,i,e,t,!1),l=u[0],c=u[1];a=Ka(l-e,(c-t)/o),s=o*a}break}return Array.isArray(r.size)&&(a=mn(r.size[0],n),s=r.size.length===2?mn(r.size[1],i):a),[a,s]},y$=function(r,e){var t=Sa(180),n=[];return Ms(e).forEach(function(i,a){if(a===0){var s=i[0];if(s.type===20&&s.value==="to"){t=s4(i);return}else if(a4(s)){t=_v.parse(r,s);return}}var o=Ev(r,i);n.push(o)}),{angle:t,stops:n,type:1}},lg=function(r,e){var t=Sa(180),n=[];return Ms(e).forEach(function(i,a){if(a===0){var s=i[0];if(s.type===20&&["top","left","right","bottom"].indexOf(s.value)!==-1){t=s4(i);return}else if(a4(s)){t=(_v.parse(r,s)+Sa(270))%Sa(360);return}}var o=Ev(r,i);n.push(o)}),{angle:t,stops:n,type:1}},w$=function(r,e){var t=Sa(180),n=[],i=1,a=0,s=3,o=[];return Ms(e).forEach(function(A,l){var c=A[0];if(l===0){if(Vn(c)&&c.value==="linear"){i=1;return}else if(Vn(c)&&c.value==="radial"){i=2;return}}if(c.type===18){if(c.name==="from"){var u=iA.parse(r,c.values[0]);n.push({stop:Vr,color:u})}else if(c.name==="to"){var u=iA.parse(r,c.values[0]);n.push({stop:Wo,color:u})}else if(c.name==="color-stop"){var h=c.values.filter(bv);if(h.length===2){var u=iA.parse(r,h[1]),g=h[0];wv(g)&&n.push({stop:{type:16,number:g.number*100,flags:g.flags},color:u})}}}}),i===1?{angle:(t+Sa(180))%Sa(360),stops:n,type:i}:{size:s,shape:a,stops:n,position:o,type:i}},o4="closest-side",A4="farthest-side",l4="closest-corner",c4="farthest-corner",u4="circle",d4="ellipse",h4="cover",f4="contain",b$=function(r,e){var t=0,n=3,i=[],a=[];return Ms(e).forEach(function(s,o){var A=!0;if(o===0){var l=!1;A=s.reduce(function(u,h){if(l)if(Vn(h))switch(h.value){case"center":return a.push(w2),u;case"top":case"left":return a.push(Vr),u;case"right":case"bottom":return a.push(Wo),u}else(ur(h)||cA(h))&&a.push(h);else if(Vn(h))switch(h.value){case u4:return t=0,!1;case d4:return t=1,!1;case"at":return l=!0,!1;case o4:return n=0,!1;case h4:case A4:return n=1,!1;case f4:case l4:return n=2,!1;case c4:return n=3,!1}else if(cA(h)||ur(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return u},A)}if(A){var c=Ev(r,s);i.push(c)}}),{size:n,shape:t,stops:i,position:a,type:2}},cg=function(r,e){var t=0,n=3,i=[],a=[];return Ms(e).forEach(function(s,o){var A=!0;if(o===0?A=s.reduce(function(c,u){if(Vn(u))switch(u.value){case"center":return a.push(w2),!1;case"top":case"left":return a.push(Vr),!1;case"right":case"bottom":return a.push(Wo),!1}else if(ur(u)||cA(u))return a.push(u),!1;return c},A):o===1&&(A=s.reduce(function(c,u){if(Vn(u))switch(u.value){case u4:return t=0,!1;case d4:return t=1,!1;case f4:case o4:return n=0,!1;case A4:return n=1,!1;case l4:return n=2,!1;case h4:case c4:return n=3,!1}else if(cA(u)||ur(u))return Array.isArray(n)||(n=[]),n.push(u),!1;return c},A)),A){var l=Ev(r,s);i.push(l)}}),{size:n,shape:t,stops:i,position:a,type:2}},_$=function(r){return r.type===1},E$=function(r){return r.type===2},b2={name:"image",parse:function(r,e){if(e.type===22){var t={url:e.value,type:0};return r.cache.addImage(e.value),t}if(e.type===18){var n=g4[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(r,e.values)}throw new Error("Unsupported image type "+e.type)}};function C$(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!g4[r.name])}var g4={"linear-gradient":y$,"-moz-linear-gradient":lg,"-ms-linear-gradient":lg,"-o-linear-gradient":lg,"-webkit-linear-gradient":lg,"radial-gradient":b$,"-moz-radial-gradient":cg,"-ms-radial-gradient":cg,"-o-radial-gradient":cg,"-webkit-radial-gradient":cg,"-webkit-gradient":w$},B$={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(n){return bv(n)&&C$(n)}).map(function(n){return b2.parse(r,n)})}},x$={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Vn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},S$={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,e){return Ms(e).map(function(t){return t.filter(ur)}).map(e4)}},T$={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,e){return Ms(e).map(function(t){return t.filter(Vn).map(function(n){return n.value}).join(" ")}).map(M$)}},M$=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Pc;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(Pc||(Pc={}));var F$={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,e){return Ms(e).map(function(t){return t.filter(k$)})}},k$=function(r){return Vn(r)||ur(r)},Cv=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},I$=Cv("top"),P$=Cv("right"),O$=Cv("bottom"),L$=Cv("left"),Bv=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return e4(t.filter(ur))}}},N$=Bv("top-left"),D$=Bv("top-right"),R$=Bv("bottom-right"),Q$=Bv("bottom-left"),xv=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},U$=xv("top"),H$=xv("right"),z$=xv("bottom"),j$=xv("left"),Sv=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return ch(t)?t.number:0}}},K$=Sv("top"),G$=Sv("right"),V$=Sv("bottom"),q$=Sv("left"),W$={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},$$={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Y$={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,e){return e.filter(Vn).reduce(function(t,n){return t|X$(n.value)},0)}},X$=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Z$={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},J$={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Up;(function(r){r.NORMAL="normal",r.STRICT="strict"})(Up||(Up={}));var eY={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"strict":return Up.STRICT;case"normal":default:return Up.NORMAL}}},tY={name:"line-height",initialValue:"normal",prefix:!1,type:4},Ik=function(r,e){return Vn(r)&&r.value==="normal"?1.2*e:r.type===17?e*r.number:ur(r)?mn(r,e):e},nY={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,e){return e.type===20&&e.value==="none"?null:b2.parse(r,e)}},rY={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},iY={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Tv=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},aY=Tv("top"),sY=Tv("right"),oY=Tv("bottom"),AY=Tv("left"),lY={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,e){return e.filter(Vn).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},cY={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Mv=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},uY=Mv("top"),dY=Mv("right"),hY=Mv("bottom"),fY=Mv("left"),gY={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},pY={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},vY={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&fx(e[0],"none")?[]:Ms(e).map(function(t){for(var n={color:zd.TRANSPARENT,offsetX:Vr,offsetY:Vr,blur:Vr},i=0,a=0;a<t.length;a++){var s=t[a];cA(s)?(i===0?n.offsetX=s:i===1?n.offsetY=s:n.blur=s,i++):n.color=iA.parse(r,s)}return n})}},mY={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},yY={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=_Y[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},wY=function(r){var e=r.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},bY=function(r){var e=r.filter(function(A){return A.type===17}).map(function(A){return A.number}),t=e[0],n=e[1];e[2],e[3];var i=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var s=e[12],o=e[13];return e[14],e[15],e.length===16?[t,n,i,a,s,o]:null},_Y={matrix:wY,matrix3d:bY},Pk={type:16,number:50,flags:lh},EY=[Pk,Pk],CY={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,e){var t=e.filter(ur);return t.length!==2?EY:[t[0],t[1]]}},BY={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},xd;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(xd||(xd={}));var xY={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-all":return xd.BREAK_ALL;case"keep-all":return xd.KEEP_ALL;case"normal":default:return xd.NORMAL}}},SY={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,e){if(e.type===20)return{auto:!0,order:0};if(wv(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},p4={name:"time",parse:function(r,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},TY={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,e){return wv(e)?e.number:1}},MY={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},FY={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,e){return e.filter(Vn).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},kY={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,e){var t=[],n=[];return e.forEach(function(i){switch(i.type){case 20:case 0:t.push(i.value);break;case 17:t.push(i.number.toString());break;case 4:n.push(t.join(" ")),t.length=0;break}}),t.length&&n.push(t.join(" ")),n.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},IY={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},PY={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,e){if(wv(e))return e.number;if(Vn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},OY={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.filter(Vn).map(function(t){return t.value})}},LY={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},_r=function(r,e){return(r&e)!==0},NY={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,e){return e.filter(ch).map(function(t){return p4.parse(r,t)})}},DY={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&fx(e[0],"none")?[]:Ms(e).map(function(t){for(var n={color:255,offsetX:Vr,offsetY:Vr,blur:Vr,spread:Vr,inset:!1},i=0,a=0;a<t.length;a++){var s=t[a];fx(s,"inset")?n.inset=!0:cA(s)?(i===0?n.offsetX=s:i===1?n.offsetY=s:i===2?n.blur=s:n.spread=s,i++):n.color=iA.parse(r,s)}return n})}},RY={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,e){var t=[0,1,2],n=[];return e.filter(Vn).forEach(function(i){switch(i.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),t.forEach(function(i){n.indexOf(i)===-1&&n.push(i)}),n}},QY={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},UY={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,e){return ch(e)?e.number:0}},HY=(function(){function r(e,t){var n,i;this.animationDuration=tt(e,NY,t.animationDuration),this.backgroundClip=tt(e,f$,t.backgroundClip),this.backgroundColor=tt(e,g$,t.backgroundColor),this.backgroundImage=tt(e,B$,t.backgroundImage),this.backgroundOrigin=tt(e,x$,t.backgroundOrigin),this.backgroundPosition=tt(e,S$,t.backgroundPosition),this.backgroundRepeat=tt(e,T$,t.backgroundRepeat),this.backgroundSize=tt(e,F$,t.backgroundSize),this.borderTopColor=tt(e,I$,t.borderTopColor),this.borderRightColor=tt(e,P$,t.borderRightColor),this.borderBottomColor=tt(e,O$,t.borderBottomColor),this.borderLeftColor=tt(e,L$,t.borderLeftColor),this.borderTopLeftRadius=tt(e,N$,t.borderTopLeftRadius),this.borderTopRightRadius=tt(e,D$,t.borderTopRightRadius),this.borderBottomRightRadius=tt(e,R$,t.borderBottomRightRadius),this.borderBottomLeftRadius=tt(e,Q$,t.borderBottomLeftRadius),this.borderTopStyle=tt(e,U$,t.borderTopStyle),this.borderRightStyle=tt(e,H$,t.borderRightStyle),this.borderBottomStyle=tt(e,z$,t.borderBottomStyle),this.borderLeftStyle=tt(e,j$,t.borderLeftStyle),this.borderTopWidth=tt(e,K$,t.borderTopWidth),this.borderRightWidth=tt(e,G$,t.borderRightWidth),this.borderBottomWidth=tt(e,V$,t.borderBottomWidth),this.borderLeftWidth=tt(e,q$,t.borderLeftWidth),this.boxShadow=tt(e,DY,t.boxShadow),this.color=tt(e,W$,t.color),this.direction=tt(e,$$,t.direction),this.display=tt(e,Y$,t.display),this.float=tt(e,Z$,t.cssFloat),this.fontFamily=tt(e,kY,t.fontFamily),this.fontSize=tt(e,IY,t.fontSize),this.fontStyle=tt(e,LY,t.fontStyle),this.fontVariant=tt(e,OY,t.fontVariant),this.fontWeight=tt(e,PY,t.fontWeight),this.letterSpacing=tt(e,J$,t.letterSpacing),this.lineBreak=tt(e,eY,t.lineBreak),this.lineHeight=tt(e,tY,t.lineHeight),this.listStyleImage=tt(e,nY,t.listStyleImage),this.listStylePosition=tt(e,rY,t.listStylePosition),this.listStyleType=tt(e,iY,t.listStyleType),this.marginTop=tt(e,aY,t.marginTop),this.marginRight=tt(e,sY,t.marginRight),this.marginBottom=tt(e,oY,t.marginBottom),this.marginLeft=tt(e,AY,t.marginLeft),this.opacity=tt(e,TY,t.opacity);var a=tt(e,lY,t.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=tt(e,cY,t.overflowWrap),this.paddingTop=tt(e,uY,t.paddingTop),this.paddingRight=tt(e,dY,t.paddingRight),this.paddingBottom=tt(e,hY,t.paddingBottom),this.paddingLeft=tt(e,fY,t.paddingLeft),this.paintOrder=tt(e,RY,t.paintOrder),this.position=tt(e,pY,t.position),this.textAlign=tt(e,gY,t.textAlign),this.textDecorationColor=tt(e,MY,(n=t.textDecorationColor)!==null&&n!==void 0?n:t.color),this.textDecorationLine=tt(e,FY,(i=t.textDecorationLine)!==null&&i!==void 0?i:t.textDecoration),this.textShadow=tt(e,vY,t.textShadow),this.textTransform=tt(e,mY,t.textTransform),this.transform=tt(e,yY,t.transform),this.transformOrigin=tt(e,CY,t.transformOrigin),this.visibility=tt(e,BY,t.visibility),this.webkitTextStrokeColor=tt(e,QY,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=tt(e,UY,t.webkitTextStrokeWidth),this.wordBreak=tt(e,xY,t.wordBreak),this.zIndex=tt(e,SY,t.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return Ic(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return _r(this.display,4)||_r(this.display,33554432)||_r(this.display,268435456)||_r(this.display,536870912)||_r(this.display,67108864)||_r(this.display,134217728)},r})(),tt=function(r,e,t){var n=new ZU,i=t!==null&&typeof t<"u"?t.toString():e.initialValue;n.write(i);var a=new JU(n.read());switch(e.type){case 2:var s=a.parseComponentValue();return e.parse(r,Vn(s)?s.value:e.initialValue);case 0:return e.parse(r,a.parseComponentValue());case 1:return e.parse(r,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return _v.parse(r,a.parseComponentValue());case"color":return iA.parse(r,a.parseComponentValue());case"image":return b2.parse(r,a.parseComponentValue());case"length":var o=a.parseComponentValue();return cA(o)?o:Vr;case"length-percentage":var A=a.parseComponentValue();return ur(A)?A:Vr;case"time":return p4.parse(r,a.parseComponentValue())}break}},zY="data-html2canvas-debug",jY=function(r){var e=r.getAttribute(zY);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Ok=function(r,e){var t=jY(r);return t===1||e===t},Fs=(function(){function r(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Ok(t,3))debugger;this.styles=new HY(e,window.getComputedStyle(t,null)),jX(t)&&(this.styles.animationDuration.some(function(n){return n>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=m2(this.context,t),Ok(t,4)&&(this.flags|=16)}return r})(),KY="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Lk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ld=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ug=0;ug<Lk.length;ug++)ld[Lk.charCodeAt(ug)]=ug;var GY=function(r){var e=r.length*.75,t=r.length,n,i=0,a,s,o,A;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(l)?l:new Uint8Array(l);for(n=0;n<t;n+=4)a=ld[r.charCodeAt(n)],s=ld[r.charCodeAt(n+1)],o=ld[r.charCodeAt(n+2)],A=ld[r.charCodeAt(n+3)],c[i++]=a<<2|s>>4,c[i++]=(s&15)<<4|o>>2,c[i++]=(o&3)<<6|A&63;return l},VY=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},qY=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},al=5,_2=11,m1=2,WY=_2-al,v4=65536>>al,$Y=1<<al,y1=$Y-1,YY=1024>>al,XY=v4+YY,ZY=XY,JY=32,eX=ZY+JY,tX=65536>>_2,nX=1<<WY,rX=nX-1,Nk=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},iX=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},aX=function(r,e){var t=GY(r),n=Array.isArray(t)?qY(t):new Uint32Array(t),i=Array.isArray(t)?VY(t):new Uint16Array(t),a=24,s=Nk(i,a/2,n[4]/2),o=n[5]===2?Nk(i,(a+n[4])/2):iX(n,Math.ceil((a+n[4])/4));return new sX(n[0],n[1],n[2],n[3],s,o)},sX=(function(){function r(e,t,n,i,a,s){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=a,this.data=s}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>al],t=(t<<m1)+(e&y1),this.data[t];if(e<=65535)return t=this.index[v4+(e-55296>>al)],t=(t<<m1)+(e&y1),this.data[t];if(e<this.highStart)return t=eX-tX+(e>>_2),t=this.index[t],t+=e>>al&rX,t=this.index[t],t=(t<<m1)+(e&y1),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),Dk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oX=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var dg=0;dg<Dk.length;dg++)oX[Dk.charCodeAt(dg)]=dg;var AX=1,w1=2,b1=3,Rk=4,Qk=5,lX=7,Uk=8,_1=9,E1=10,Hk=11,zk=12,jk=13,Kk=14,C1=15,cX=function(r){for(var e=[],t=0,n=r.length;t<n;){var i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){var a=r.charCodeAt(t++);(a&64512)===56320?e.push(((i&1023)<<10)+(a&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},uX=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],i=-1,a="";++i<t;){var s=r[i];s<=65535?n.push(s):(s-=65536,n.push((s>>10)+55296,s%1024+56320)),(i+1===t||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},dX=aX(KY),Ea="",B1="",hX=function(r){return dX.get(r)},fX=function(r,e,t){var n=t-2,i=e[n],a=e[t-1],s=e[t];if(a===w1&&s===b1)return Ea;if(a===w1||a===b1||a===Rk||s===w1||s===b1||s===Rk)return B1;if(a===Uk&&[Uk,_1,Hk,zk].indexOf(s)!==-1||(a===Hk||a===_1)&&(s===_1||s===E1)||(a===zk||a===E1)&&s===E1||s===jk||s===Qk||s===lX||a===AX)return Ea;if(a===jk&&s===Kk){for(;i===Qk;)i=e[--n];if(i===Kk)return Ea}if(a===C1&&s===C1){for(var o=0;i===C1;)o++,i=e[--n];if(o%2===0)return Ea}return B1},gX=function(r){var e=cX(r),t=e.length,n=0,i=0,a=e.map(hX);return{next:function(){if(n>=t)return{done:!0,value:null};for(var s=Ea;n<t&&(s=fX(e,a,++n))===Ea;);if(s!==Ea||n===t){var o=uX.apply(null,e.slice(i,n));return i=n,{value:o,done:!1}}return{done:!0,value:null}}}},pX=function(r){for(var e=gX(r),t=[],n;!(n=e.next()).done;)n.value&&t.push(n.value.slice());return t},vX=function(r){var e=123;if(r.createRange){var t=r.createRange();if(t.getBoundingClientRect){var n=r.createElement("boundtest");n.style.height=e+"px",n.style.display="block",r.body.appendChild(n),t.selectNode(n);var i=t.getBoundingClientRect(),a=Math.round(i.height);if(r.body.removeChild(n),a===e)return!0}}return!1},mX=function(r){var e=r.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",r.body.appendChild(e);var t=r.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,i=yv(n.data).map(function(A){return tr(A)}),a=0,s={},o=i.every(function(A,l){t.setStart(n,a),t.setEnd(n,a+A.length);var c=t.getBoundingClientRect();a+=A.length;var u=c.x>s.x||c.y>s.y;return s=c,l===0?!0:u});return r.body.removeChild(e),o},yX=function(){return typeof new Image().crossOrigin<"u"},wX=function(){return typeof new XMLHttpRequest().responseType=="string"},bX=function(r){var e=new Image,t=r.createElement("canvas"),n=t.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},Gk=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},_X=function(r){var e=r.createElement("canvas"),t=100;e.width=t,e.height=t;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,t,t);var i=new Image,a=e.toDataURL();i.src=a;var s=gx(t,t,0,0,i);return n.fillStyle="red",n.fillRect(0,0,t,t),Vk(s).then(function(o){n.drawImage(o,0,0);var A=n.getImageData(0,0,t,t).data;n.fillStyle="red",n.fillRect(0,0,t,t);var l=r.createElement("div");return l.style.backgroundImage="url("+a+")",l.style.height=t+"px",Gk(A)?Vk(gx(t,t,0,0,l)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),Gk(n.getImageData(0,0,t,t).data)}).catch(function(){return!1})},gx=function(r,e,t,n,i){var a="http://www.w3.org/2000/svg",s=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return s.setAttributeNS(null,"width",r.toString()),s.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(o),o.appendChild(i),s},Vk=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},ta={get SUPPORT_RANGE_BOUNDS(){var r=vX(document);return Object.defineProperty(ta,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=ta.SUPPORT_RANGE_BOUNDS&&mX(document);return Object.defineProperty(ta,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=bX(document);return Object.defineProperty(ta,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?_X(document):Promise.resolve(!1);return Object.defineProperty(ta,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=yX();return Object.defineProperty(ta,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=wX();return Object.defineProperty(ta,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ta,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ta,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},Sd=(function(){function r(e,t){this.text=e,this.bounds=t}return r})(),EX=function(r,e,t,n){var i=xX(e,t),a=[],s=0;return i.forEach(function(o){if(t.textDecorationLine.length||o.trim().length>0)if(ta.SUPPORT_RANGE_BOUNDS){var A=qk(n,s,o.length).getClientRects();if(A.length>1){var l=E2(o),c=0;l.forEach(function(h){a.push(new Sd(h,fl.fromDOMRectList(r,qk(n,c+s,h.length).getClientRects()))),c+=h.length})}else a.push(new Sd(o,fl.fromDOMRectList(r,A)))}else{var u=n.splitText(o.length);a.push(new Sd(o,CX(r,n))),n=u}else ta.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));s+=o.length}),a},CX=function(r,e){var t=e.ownerDocument;if(t){var n=t.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(n,e);var a=m2(r,n);return n.firstChild&&i.replaceChild(n.firstChild,n),a}}return fl.EMPTY},qk=function(r,e,t){var n=r.ownerDocument;if(!n)throw new Error("Node has no owner document");var i=n.createRange();return i.setStart(r,e),i.setEnd(r,e+t),i},E2=function(r){if(ta.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(r)).map(function(t){return t.segment})}return pX(r)},BX=function(r,e){if(ta.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(r)).map(function(n){return n.segment})}return TX(r,e)},xX=function(r,e){return e.letterSpacing!==0?E2(r):BX(r,e)},SX=[32,160,4961,65792,65793,4153,4241],TX=function(r,e){for(var t=sW(r,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],i,a=function(){if(i.value){var s=i.value.slice(),o=yv(s),A="";o.forEach(function(l){SX.indexOf(l)===-1?A+=tr(l):(A.length&&n.push(A),n.push(tr(l)),A="")}),A.length&&n.push(A)}};!(i=t.next()).done;)a();return n},MX=(function(){function r(e,t,n){this.text=FX(t.data,n.textTransform),this.textBounds=EX(e,this.text,n,t)}return r})(),FX=function(r,e){switch(e){case 1:return r.toLowerCase();case 3:return r.replace(kX,IX);case 2:return r.toUpperCase();default:return r}},kX=/(^|\s|:|-|\(|\))([a-z])/g,IX=function(r,e,t){return r.length>0?e+t.toUpperCase():r},m4=(function(r){ns(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.src=n.currentSrc||n.src,i.intrinsicWidth=n.naturalWidth,i.intrinsicHeight=n.naturalHeight,i.context.cache.addImage(i.src),i}return e})(Fs),y4=(function(r){ns(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.canvas=n,i.intrinsicWidth=n.width,i.intrinsicHeight=n.height,i}return e})(Fs),w4=(function(r){ns(e,r);function e(t,n){var i=r.call(this,t,n)||this,a=new XMLSerializer,s=m2(t,n);return n.setAttribute("width",s.width+"px"),n.setAttribute("height",s.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(n)),i.intrinsicWidth=n.width.baseVal.value,i.intrinsicHeight=n.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e})(Fs),b4=(function(r){ns(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.value=n.value,i}return e})(Fs),px=(function(r){ns(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.start=n.start,i.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,i}return e})(Fs),PX=[{type:15,flags:0,unit:"px",number:3}],OX=[{type:16,flags:0,number:50}],LX=function(r){return r.width>r.height?new fl(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new fl(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},NX=function(r){var e=r.type===DX?new Array(r.value.length+1).join(""):r.value;return e.length===0?r.placeholder||"":e},Hp="checkbox",zp="radio",DX="password",Wk=707406591,C2=(function(r){ns(e,r);function e(t,n){var i=r.call(this,t,n)||this;switch(i.type=n.type.toLowerCase(),i.checked=n.checked,i.value=NX(n),(i.type===Hp||i.type===zp)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=LX(i.bounds)),i.type){case Hp:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=PX;break;case zp:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=OX;break}return i}return e})(Fs),_4=(function(r){ns(e,r);function e(t,n){var i=r.call(this,t,n)||this,a=n.options[n.selectedIndex||0];return i.value=a&&a.text||"",i}return e})(Fs),E4=(function(r){ns(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.value=n.value,i}return e})(Fs),C4=(function(r){ns(e,r);function e(t,n){var i=r.call(this,t,n)||this;i.src=n.src,i.width=parseInt(n.width,10)||0,i.height=parseInt(n.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){i.tree=QX(t,n.contentWindow.document.documentElement);var a=n.contentWindow.document.documentElement?Mk(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):zd.TRANSPARENT,s=n.contentWindow.document.body?Mk(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):zd.TRANSPARENT;i.backgroundColor=Ic(a)?Ic(s)?i.styles.backgroundColor:s:a}}catch{}return i}return e})(Fs),RX=["OL","UL","MENU"],Ap=function(r,e,t,n){for(var i=e.firstChild,a=void 0;i;i=a)if(a=i.nextSibling,zX(i)&&i.data.trim().length>0)t.textNodes.push(new MX(r,i,t.styles));else if(x4(i))if(ZX(i)&&i.assignedNodes)i.assignedNodes().forEach(function(o){return Ap(r,o,t,n)});else{var s=B4(r,i);s.styles.isVisible()&&(UX(i,s,n)?s.flags|=4:HX(s.styles)&&(s.flags|=2),RX.indexOf(i.tagName)!==-1&&(s.flags|=8),t.elements.push(s),i.slot,i.shadowRoot?Ap(r,i.shadowRoot,s,n):!T4(i)&&!S4(i)&&!M4(i)&&Ap(r,i,s,n))}},B4=function(r,e){return YX(e)?new m4(r,e):$X(e)?new y4(r,e):S4(e)?new w4(r,e):GX(e)?new b4(r,e):VX(e)?new px(r,e):qX(e)?new C2(r,e):M4(e)?new _4(r,e):T4(e)?new E4(r,e):XX(e)?new C4(r,e):new Fs(r,e)},QX=function(r,e){var t=B4(r,e);return t.flags|=4,Ap(r,e,t,t),t},UX=function(r,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||WX(r)&&t.styles.isTransparent()},HX=function(r){return r.isPositioned()||r.isFloating()},zX=function(r){return r.nodeType===Node.TEXT_NODE},x4=function(r){return r.nodeType===Node.ELEMENT_NODE},jX=function(r){return x4(r)&&typeof r.style<"u"&&!KX(r)},KX=function(r){return typeof r.className=="object"},GX=function(r){return r.tagName==="LI"},VX=function(r){return r.tagName==="OL"},qX=function(r){return r.tagName==="INPUT"},S4=function(r){return r.tagName==="svg"},WX=function(r){return r.tagName==="BODY"},$X=function(r){return r.tagName==="CANVAS"},YX=function(r){return r.tagName==="IMG"},XX=function(r){return r.tagName==="IFRAME"},T4=function(r){return r.tagName==="TEXTAREA"},M4=function(r){return r.tagName==="SELECT"},ZX=function(r){return r.tagName==="SLOT"},$k={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Yk={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},JX={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},eZ={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},oc=function(r,e,t,n,i,a){return r<e||r>t?B2(r,i,a.length>0):n.integers.reduce(function(s,o,A){for(;r>=o;)r-=o,s+=n.values[A];return s},"")+a},F4=function(r,e,t,n){var i="";do t||r--,i=n(r)+i,r/=e;while(r*e>=e);return i},Xn=function(r,e,t,n,i){var a=t-e+1;return(r<0?"-":"")+(F4(Math.abs(r),a,n,function(s){return tr(Math.floor(s%a)+e)})+i)},HA=function(r,e,t){t===void 0&&(t=". ");var n=e.length;return F4(Math.abs(r),n,!1,function(i){return e[Math.floor(i%n)]})+t},vc=1,Do=2,Ro=4,cd=8,Gs=function(r,e,t,n,i,a){if(r<-9999||r>9999)return B2(r,4,i.length>0);var s=Math.abs(r),o=i;if(s===0)return e[0]+o;for(var A=0;s>0&&A<=4;A++){var l=s%10;l===0&&_r(a,vc)&&o!==""?o=e[l]+o:l>1||l===1&&A===0||l===1&&A===1&&_r(a,Do)||l===1&&A===1&&_r(a,Ro)&&r>100||l===1&&A>1&&_r(a,cd)?o=e[l]+(A>0?t[A-1]:"")+o:l===1&&A>0&&(o=t[A-1]+o),s=Math.floor(s/10)}return(r<0?n:"")+o},Xk="",Zk="",Jk="",x1="",B2=function(r,e,t){var n=t?". ":"",i=t?"":"",a=t?", ":"",s=t?" ":"";switch(e){case 0:return""+s;case 1:return""+s;case 2:return""+s;case 5:var o=Xn(r,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return HA(r,"",i);case 6:return oc(r,1,3999,$k,3,n).toLowerCase();case 7:return oc(r,1,3999,$k,3,n);case 8:return Xn(r,945,969,!1,n);case 9:return Xn(r,97,122,!1,n);case 10:return Xn(r,65,90,!1,n);case 11:return Xn(r,1632,1641,!0,n);case 12:case 49:return oc(r,1,9999,Yk,3,n);case 35:return oc(r,1,9999,Yk,3,n).toLowerCase();case 13:return Xn(r,2534,2543,!0,n);case 14:case 30:return Xn(r,6112,6121,!0,n);case 15:return HA(r,"",i);case 16:return HA(r,"",i);case 17:case 48:return Gs(r,"",Xk,"",i,Do|Ro|cd);case 47:return Gs(r,"",Zk,"",i,vc|Do|Ro|cd);case 42:return Gs(r,"",Xk,"",i,Do|Ro|cd);case 41:return Gs(r,"",Zk,"",i,vc|Do|Ro|cd);case 26:return Gs(r,"","",Jk,i,0);case 25:return Gs(r,"","",Jk,i,vc|Do|Ro);case 31:return Gs(r,"","",x1,a,vc|Do|Ro);case 33:return Gs(r,"","",x1,a,0);case 32:return Gs(r,"","",x1,a,vc|Do|Ro);case 18:return Xn(r,2406,2415,!0,n);case 20:return oc(r,1,19999,eZ,3,n);case 21:return Xn(r,2790,2799,!0,n);case 22:return Xn(r,2662,2671,!0,n);case 22:return oc(r,1,10999,JX,3,n);case 23:return HA(r,"");case 24:return HA(r,"");case 27:return Xn(r,3302,3311,!0,n);case 28:return HA(r,"",i);case 29:return HA(r,"",i);case 34:return Xn(r,3792,3801,!0,n);case 37:return Xn(r,6160,6169,!0,n);case 38:return Xn(r,4160,4169,!0,n);case 39:return Xn(r,2918,2927,!0,n);case 40:return Xn(r,1776,1785,!0,n);case 43:return Xn(r,3046,3055,!0,n);case 44:return Xn(r,3174,3183,!0,n);case 45:return Xn(r,3664,3673,!0,n);case 46:return Xn(r,3872,3881,!0,n);case 3:default:return Xn(r,48,57,!0,n)}},eI;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(eI||(eI={}));var tZ=(function(){function r(){}return r.getOrigin=function(e){var t=r._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},r.isSameOrigin=function(e){return r.getOrigin(e)===r._origin},r.setContext=function(e){r._link=e.document.createElement("a"),r._origin=r.getOrigin(e.location.href)},r._origin="about:blank",r})(),We=(function(){function r(e,t){this.type=0,this.x=e,this.y=t}return r.prototype.add=function(e,t){return new r(this.x+e,this.y+t)},r})(),Ac=function(r,e,t){return new We(r.x+(e.x-r.x)*t,r.y+(e.y-r.y)*t)},hg=(function(){function r(e,t,n,i){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=i}return r.prototype.subdivide=function(e,t){var n=Ac(this.start,this.startControl,e),i=Ac(this.startControl,this.endControl,e),a=Ac(this.endControl,this.end,e),s=Ac(n,i,e),o=Ac(i,a,e),A=Ac(s,o,e);return t?new r(this.start,n,s,A):new r(A,o,a,this.end)},r.prototype.add=function(e,t){return new r(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r})(),Ba=function(r){return r.type===1},nZ=(function(){function r(e){var t=e.styles,n=e.bounds,i=Ad(t.borderTopLeftRadius,n.width,n.height),a=i[0],s=i[1],o=Ad(t.borderTopRightRadius,n.width,n.height),A=o[0],l=o[1],c=Ad(t.borderBottomRightRadius,n.width,n.height),u=c[0],h=c[1],g=Ad(t.borderBottomLeftRadius,n.width,n.height),p=g[0],v=g[1],m=[];m.push((a+A)/n.width),m.push((p+u)/n.width),m.push((s+v)/n.height),m.push((l+h)/n.height);var w=Math.max.apply(Math,m);w>1&&(a/=w,s/=w,A/=w,l/=w,u/=w,h/=w,p/=w,v/=w);var b=n.width-A,_=n.height-h,C=n.width-u,M=n.height-v,F=t.borderTopWidth,k=t.borderRightWidth,P=t.borderBottomWidth,N=t.borderLeftWidth,D=mn(t.paddingTop,e.bounds.width),Q=mn(t.paddingRight,e.bounds.width),H=mn(t.paddingBottom,e.bounds.width),j=mn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||s>0?Fn(n.left+N/3,n.top+F/3,a-N/3,s-F/3,Yt.TOP_LEFT):new We(n.left+N/3,n.top+F/3),this.topRightBorderDoubleOuterBox=a>0||s>0?Fn(n.left+b,n.top+F/3,A-k/3,l-F/3,Yt.TOP_RIGHT):new We(n.left+n.width-k/3,n.top+F/3),this.bottomRightBorderDoubleOuterBox=u>0||h>0?Fn(n.left+C,n.top+_,u-k/3,h-P/3,Yt.BOTTOM_RIGHT):new We(n.left+n.width-k/3,n.top+n.height-P/3),this.bottomLeftBorderDoubleOuterBox=p>0||v>0?Fn(n.left+N/3,n.top+M,p-N/3,v-P/3,Yt.BOTTOM_LEFT):new We(n.left+N/3,n.top+n.height-P/3),this.topLeftBorderDoubleInnerBox=a>0||s>0?Fn(n.left+N*2/3,n.top+F*2/3,a-N*2/3,s-F*2/3,Yt.TOP_LEFT):new We(n.left+N*2/3,n.top+F*2/3),this.topRightBorderDoubleInnerBox=a>0||s>0?Fn(n.left+b,n.top+F*2/3,A-k*2/3,l-F*2/3,Yt.TOP_RIGHT):new We(n.left+n.width-k*2/3,n.top+F*2/3),this.bottomRightBorderDoubleInnerBox=u>0||h>0?Fn(n.left+C,n.top+_,u-k*2/3,h-P*2/3,Yt.BOTTOM_RIGHT):new We(n.left+n.width-k*2/3,n.top+n.height-P*2/3),this.bottomLeftBorderDoubleInnerBox=p>0||v>0?Fn(n.left+N*2/3,n.top+M,p-N*2/3,v-P*2/3,Yt.BOTTOM_LEFT):new We(n.left+N*2/3,n.top+n.height-P*2/3),this.topLeftBorderStroke=a>0||s>0?Fn(n.left+N/2,n.top+F/2,a-N/2,s-F/2,Yt.TOP_LEFT):new We(n.left+N/2,n.top+F/2),this.topRightBorderStroke=a>0||s>0?Fn(n.left+b,n.top+F/2,A-k/2,l-F/2,Yt.TOP_RIGHT):new We(n.left+n.width-k/2,n.top+F/2),this.bottomRightBorderStroke=u>0||h>0?Fn(n.left+C,n.top+_,u-k/2,h-P/2,Yt.BOTTOM_RIGHT):new We(n.left+n.width-k/2,n.top+n.height-P/2),this.bottomLeftBorderStroke=p>0||v>0?Fn(n.left+N/2,n.top+M,p-N/2,v-P/2,Yt.BOTTOM_LEFT):new We(n.left+N/2,n.top+n.height-P/2),this.topLeftBorderBox=a>0||s>0?Fn(n.left,n.top,a,s,Yt.TOP_LEFT):new We(n.left,n.top),this.topRightBorderBox=A>0||l>0?Fn(n.left+b,n.top,A,l,Yt.TOP_RIGHT):new We(n.left+n.width,n.top),this.bottomRightBorderBox=u>0||h>0?Fn(n.left+C,n.top+_,u,h,Yt.BOTTOM_RIGHT):new We(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=p>0||v>0?Fn(n.left,n.top+M,p,v,Yt.BOTTOM_LEFT):new We(n.left,n.top+n.height),this.topLeftPaddingBox=a>0||s>0?Fn(n.left+N,n.top+F,Math.max(0,a-N),Math.max(0,s-F),Yt.TOP_LEFT):new We(n.left+N,n.top+F),this.topRightPaddingBox=A>0||l>0?Fn(n.left+Math.min(b,n.width-k),n.top+F,b>n.width+k?0:Math.max(0,A-k),Math.max(0,l-F),Yt.TOP_RIGHT):new We(n.left+n.width-k,n.top+F),this.bottomRightPaddingBox=u>0||h>0?Fn(n.left+Math.min(C,n.width-N),n.top+Math.min(_,n.height-P),Math.max(0,u-k),Math.max(0,h-P),Yt.BOTTOM_RIGHT):new We(n.left+n.width-k,n.top+n.height-P),this.bottomLeftPaddingBox=p>0||v>0?Fn(n.left+N,n.top+Math.min(M,n.height-P),Math.max(0,p-N),Math.max(0,v-P),Yt.BOTTOM_LEFT):new We(n.left+N,n.top+n.height-P),this.topLeftContentBox=a>0||s>0?Fn(n.left+N+j,n.top+F+D,Math.max(0,a-(N+j)),Math.max(0,s-(F+D)),Yt.TOP_LEFT):new We(n.left+N+j,n.top+F+D),this.topRightContentBox=A>0||l>0?Fn(n.left+Math.min(b,n.width+N+j),n.top+F+D,b>n.width+N+j?0:A-N+j,l-(F+D),Yt.TOP_RIGHT):new We(n.left+n.width-(k+Q),n.top+F+D),this.bottomRightContentBox=u>0||h>0?Fn(n.left+Math.min(C,n.width-(N+j)),n.top+Math.min(_,n.height+F+D),Math.max(0,u-(k+Q)),h-(P+H),Yt.BOTTOM_RIGHT):new We(n.left+n.width-(k+Q),n.top+n.height-(P+H)),this.bottomLeftContentBox=p>0||v>0?Fn(n.left+N+j,n.top+M,Math.max(0,p-(N+j)),v-(P+H),Yt.BOTTOM_LEFT):new We(n.left+N+j,n.top+n.height-(P+H))}return r})(),Yt;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Yt||(Yt={}));var Fn=function(r,e,t,n,i){var a=4*((Math.sqrt(2)-1)/3),s=t*a,o=n*a,A=r+t,l=e+n;switch(i){case Yt.TOP_LEFT:return new hg(new We(r,l),new We(r,l-o),new We(A-s,e),new We(A,e));case Yt.TOP_RIGHT:return new hg(new We(r,e),new We(r+s,e),new We(A,l-o),new We(A,l));case Yt.BOTTOM_RIGHT:return new hg(new We(A,e),new We(A,e+o),new We(r+s,l),new We(r,l));case Yt.BOTTOM_LEFT:default:return new hg(new We(A,l),new We(A-s,l),new We(r,e+o),new We(r,e))}},jp=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},rZ=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},Kp=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},iZ=(function(){function r(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return r})(),fg=(function(){function r(e,t){this.path=e,this.target=t,this.type=1}return r})(),aZ=(function(){function r(e){this.opacity=e,this.type=2,this.target=6}return r})(),sZ=function(r){return r.type===0},k4=function(r){return r.type===1},oZ=function(r){return r.type===2},tI=function(r,e){return r.length===e.length?r.some(function(t,n){return t===e[n]}):!1},AZ=function(r,e,t,n,i){return r.map(function(a,s){switch(s){case 0:return a.add(e,t);case 1:return a.add(e+n,t);case 2:return a.add(e+n,t+i);case 3:return a.add(e,t+i)}return a})},I4=(function(){function r(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r})(),P4=(function(){function r(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new nZ(this.container),this.container.styles.opacity<1&&this.effects.push(new aZ(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new iZ(n,i,a))}if(this.container.styles.overflowX!==0){var s=jp(this.curves),o=Kp(this.curves);tI(s,o)?this.effects.push(new fg(s,6)):(this.effects.push(new fg(s,2)),this.effects.push(new fg(o,4)))}}return r.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,i=this.effects.slice(0);n;){var a=n.effects.filter(function(A){return!k4(A)});if(t||n.container.styles.position!==0||!n.parent){if(i.unshift.apply(i,a),t=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var s=jp(n.curves),o=Kp(n.curves);tI(s,o)||i.unshift(new fg(o,6))}}else i.unshift.apply(i,a);n=n.parent}return i.filter(function(A){return _r(A.target,e)})},r})(),vx=function(r,e,t,n){r.container.elements.forEach(function(i){var a=_r(i.flags,4),s=_r(i.flags,2),o=new P4(i,r);_r(i.styles.display,2048)&&n.push(o);var A=_r(i.flags,8)?[]:n;if(a||s){var l=a||i.styles.isPositioned()?t:e,c=new I4(o);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var u=i.styles.zIndex.order;if(u<0){var h=0;l.negativeZIndex.some(function(p,v){return u>p.element.container.styles.zIndex.order?(h=v,!1):h>0}),l.negativeZIndex.splice(h,0,c)}else if(u>0){var g=0;l.positiveZIndex.some(function(p,v){return u>=p.element.container.styles.zIndex.order?(g=v+1,!1):g>0}),l.positiveZIndex.splice(g,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else i.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);vx(o,c,a?c:t,A)}else i.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),vx(o,e,t,A);_r(i.flags,8)&&O4(i,A)})},O4=function(r,e){for(var t=r instanceof px?r.start:1,n=r instanceof px?r.reversed:!1,i=0;i<e.length;i++){var a=e[i];a.container instanceof b4&&typeof a.container.value=="number"&&a.container.value!==0&&(t=a.container.value),a.listValue=B2(t,a.container.styles.listStyleType,!0),t+=n?-1:1}},lZ=function(r){var e=new P4(r,null),t=new I4(e),n=[];return vx(e,t,t,n),O4(e.container,n),t},nI=function(r,e){switch(e){case 0:return Ta(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return Ta(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return Ta(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);case 3:default:return Ta(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},cZ=function(r,e){switch(e){case 0:return Ta(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return Ta(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return Ta(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);case 3:default:return Ta(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},uZ=function(r,e){switch(e){case 0:return Ta(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return Ta(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return Ta(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);case 3:default:return Ta(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},dZ=function(r,e){switch(e){case 0:return gg(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return gg(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return gg(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);case 3:default:return gg(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},gg=function(r,e){var t=[];return Ba(r)?t.push(r.subdivide(.5,!1)):t.push(r),Ba(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Ta=function(r,e,t,n){var i=[];return Ba(r)?i.push(r.subdivide(.5,!1)):i.push(r),Ba(t)?i.push(t.subdivide(.5,!0)):i.push(t),Ba(n)?i.push(n.subdivide(.5,!0).reverse()):i.push(n),Ba(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},L4=function(r){var e=r.bounds,t=r.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},Gp=function(r){var e=r.styles,t=r.bounds,n=mn(e.paddingLeft,t.width),i=mn(e.paddingRight,t.width),a=mn(e.paddingTop,t.width),s=mn(e.paddingBottom,t.width);return t.add(n+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+i),-(e.borderTopWidth+e.borderBottomWidth+a+s))},hZ=function(r,e){return r===0?e.bounds:r===2?Gp(e):L4(e)},fZ=function(r,e){return r===0?e.bounds:r===2?Gp(e):L4(e)},S1=function(r,e,t){var n=hZ(mc(r.styles.backgroundOrigin,e),r),i=fZ(mc(r.styles.backgroundClip,e),r),a=gZ(mc(r.styles.backgroundSize,e),t,n),s=a[0],o=a[1],A=Ad(mc(r.styles.backgroundPosition,e),n.width-s,n.height-o),l=pZ(mc(r.styles.backgroundRepeat,e),A,a,n,i),c=Math.round(n.left+A[0]),u=Math.round(n.top+A[1]);return[l,c,u,s,o]},lc=function(r){return Vn(r)&&r.value===Pc.AUTO},pg=function(r){return typeof r=="number"},gZ=function(r,e,t){var n=e[0],i=e[1],a=e[2],s=r[0],o=r[1];if(!s)return[0,0];if(ur(s)&&o&&ur(o))return[mn(s,t.width),mn(o,t.height)];var A=pg(a);if(Vn(s)&&(s.value===Pc.CONTAIN||s.value===Pc.COVER)){if(pg(a)){var l=t.width/t.height;return l<a!=(s.value===Pc.COVER)?[t.width,t.width/a]:[t.height*a,t.height]}return[t.width,t.height]}var c=pg(n),u=pg(i),h=c||u;if(lc(s)&&(!o||lc(o))){if(c&&u)return[n,i];if(!A&&!h)return[t.width,t.height];if(h&&A){var g=c?n:i*a,p=u?i:n/a;return[g,p]}var v=c?n:t.width,m=u?i:t.height;return[v,m]}if(A){var w=0,b=0;return ur(s)?w=mn(s,t.width):ur(o)&&(b=mn(o,t.height)),lc(s)?w=b*a:(!o||lc(o))&&(b=w/a),[w,b]}var _=null,C=null;if(ur(s)?_=mn(s,t.width):o&&ur(o)&&(C=mn(o,t.height)),_!==null&&(!o||lc(o))&&(C=c&&u?_/n*i:t.height),C!==null&&lc(s)&&(_=c&&u?C/i*n:t.width),_!==null&&C!==null)return[_,C];throw new Error("Unable to calculate background-size for element")},mc=function(r,e){var t=r[e];return typeof t>"u"?r[0]:t},pZ=function(r,e,t,n,i){var a=e[0],s=e[1],o=t[0],A=t[1];switch(r){case 2:return[new We(Math.round(n.left),Math.round(n.top+s)),new We(Math.round(n.left+n.width),Math.round(n.top+s)),new We(Math.round(n.left+n.width),Math.round(A+n.top+s)),new We(Math.round(n.left),Math.round(A+n.top+s))];case 3:return[new We(Math.round(n.left+a),Math.round(n.top)),new We(Math.round(n.left+a+o),Math.round(n.top)),new We(Math.round(n.left+a+o),Math.round(n.height+n.top)),new We(Math.round(n.left+a),Math.round(n.height+n.top))];case 1:return[new We(Math.round(n.left+a),Math.round(n.top+s)),new We(Math.round(n.left+a+o),Math.round(n.top+s)),new We(Math.round(n.left+a+o),Math.round(n.top+s+A)),new We(Math.round(n.left+a),Math.round(n.top+s+A))];default:return[new We(Math.round(i.left),Math.round(i.top)),new We(Math.round(i.left+i.width),Math.round(i.top)),new We(Math.round(i.left+i.width),Math.round(i.height+i.top)),new We(Math.round(i.left),Math.round(i.height+i.top))]}},vZ="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",rI="Hidden Text",mZ=(function(){function r(e){this._data={},this._document=e}return r.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),i=this._document.createElement("img"),a=this._document.createElement("span"),s=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",s.appendChild(n),i.src=vZ,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=t,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(rI)),n.appendChild(a),n.appendChild(i);var o=i.offsetTop-a.offsetTop+2;n.removeChild(a),n.appendChild(this._document.createTextNode(rI)),n.style.lineHeight="normal",i.style.verticalAlign="super";var A=i.offsetTop-n.offsetTop+2;return s.removeChild(n),{baseline:o,middle:A}},r.prototype.getMetrics=function(e,t){var n=e+" "+t;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},r})(),N4=(function(){function r(e,t){this.context=e,this.options=t}return r})(),yZ=1e4;(function(r){ns(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new mZ(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return e.prototype.applyEffects=function(t){for(var n=this;this._activeEffects.length;)this.popEffect();t.forEach(function(i){return n.applyEffect(i)})},e.prototype.applyEffect=function(t){this.ctx.save(),oZ(t)&&(this.ctx.globalAlpha=t.opacity),sZ(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),k4(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return ba(this,void 0,void 0,function(){var n;return Zi(this,function(i){switch(i.label){case 0:return n=t.element.container.styles,n.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return ba(this,void 0,void 0,function(){return Zi(this,function(n){switch(n.label){case 0:if(_r(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,n,i){var a=this;if(n===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+i);else{var s=E2(t.text);s.reduce(function(o,A){return a.ctx.fillText(A,o,t.bounds.top+i),o+a.ctx.measureText(A).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var n=t.fontVariant.filter(function(s){return s==="normal"||s==="small-caps"}).join(""),i=CZ(t.fontFamily).join(", "),a=ch(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,n,t.fontWeight,a,i].join(" "),i,a]},e.prototype.renderTextNode=function(t,n){return ba(this,void 0,void 0,function(){var i,a,s,o,A,l,c,u,h=this;return Zi(this,function(g){return i=this.createFontStyle(n),a=i[0],s=i[1],o=i[2],this.ctx.font=a,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(s,o),l=A.baseline,c=A.middle,u=n.paintOrder,t.textBounds.forEach(function(p){u.forEach(function(v){switch(v){case 0:h.ctx.fillStyle=Pr(n.color),h.renderTextWithLetterSpacing(p,n.letterSpacing,l);var m=n.textShadow;m.length&&p.text.trim().length&&(m.slice(0).reverse().forEach(function(w){h.ctx.shadowColor=Pr(w.color),h.ctx.shadowOffsetX=w.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=w.offsetY.number*h.options.scale,h.ctx.shadowBlur=w.blur.number,h.renderTextWithLetterSpacing(p,n.letterSpacing,l)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Pr(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(w){switch(w){case 1:h.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top+l),p.bounds.width,1);break;case 2:h.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top),p.bounds.width,1);break;case 3:h.ctx.fillRect(p.bounds.left,Math.ceil(p.bounds.top+c),p.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&p.text.trim().length&&(h.ctx.strokeStyle=Pr(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(p.text,p.bounds.left,p.bounds.top+l)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,n,i){if(i&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var a=Gp(t),s=Kp(n);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,t.intrinsicWidth,t.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return ba(this,void 0,void 0,function(){var n,i,a,s,o,A,b,b,l,c,u,h,C,g,p,M,v,m,w,b,_,C,M;return Zi(this,function(F){switch(F.label){case 0:this.applyEffects(t.getEffects(4)),n=t.container,i=t.curves,a=n.styles,s=0,o=n.textNodes,F.label=1;case 1:return s<o.length?(A=o[s],[4,this.renderTextNode(A,a)]):[3,4];case 2:F.sent(),F.label=3;case 3:return s++,[3,1];case 4:if(!(n instanceof m4))return[3,8];F.label=5;case 5:return F.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return b=F.sent(),this.renderReplacedElement(n,i,b),[3,8];case 7:return F.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof y4&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof w4))return[3,12];F.label=9;case 9:return F.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return b=F.sent(),this.renderReplacedElement(n,i,b),[3,12];case 11:return F.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof C4&&n.tree?(l=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,l.render(n.tree)]):[3,14];case 13:c=F.sent(),n.width&&n.height&&this.ctx.drawImage(c,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),F.label=14;case 14:if(n instanceof C2&&(u=Math.min(n.bounds.width,n.bounds.height),n.type===Hp?n.checked&&(this.ctx.save(),this.path([new We(n.bounds.left+u*.39363,n.bounds.top+u*.79),new We(n.bounds.left+u*.16,n.bounds.top+u*.5549),new We(n.bounds.left+u*.27347,n.bounds.top+u*.44071),new We(n.bounds.left+u*.39694,n.bounds.top+u*.5649),new We(n.bounds.left+u*.72983,n.bounds.top+u*.23),new We(n.bounds.left+u*.84,n.bounds.top+u*.34085),new We(n.bounds.left+u*.39363,n.bounds.top+u*.79)]),this.ctx.fillStyle=Pr(Wk),this.ctx.fill(),this.ctx.restore()):n.type===zp&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+u/2,n.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=Pr(Wk),this.ctx.fill(),this.ctx.restore())),wZ(n)&&n.value.length){switch(h=this.createFontStyle(a),C=h[0],g=h[1],p=this.fontMetrics.getMetrics(C,g).baseline,this.ctx.font=C,this.ctx.fillStyle=Pr(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=_Z(n.styles.textAlign),M=Gp(n),v=0,n.styles.textAlign){case 1:v+=M.width/2;break;case 2:v+=M.width;break}m=M.add(v,0,0,-M.height/2+1),this.ctx.save(),this.path([new We(M.left,M.top),new We(M.left+M.width,M.top),new We(M.left+M.width,M.top+M.height),new We(M.left,M.top+M.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Sd(n.value,m),a.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!_r(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(w=n.styles.listStyleImage,w.type!==0)return[3,18];b=void 0,_=w.url,F.label=15;case 15:return F.trys.push([15,17,,18]),[4,this.context.cache.match(_)];case 16:return b=F.sent(),this.ctx.drawImage(b,n.bounds.left-(b.width+10),n.bounds.top),[3,18];case 17:return F.sent(),this.context.logger.error("Error loading list-style-image "+_),[3,18];case 18:return[3,20];case 19:t.listValue&&n.styles.listStyleType!==-1&&(C=this.createFontStyle(a)[0],this.ctx.font=C,this.ctx.fillStyle=Pr(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",M=new fl(n.bounds.left,n.bounds.top+mn(n.styles.paddingTop,n.bounds.width),n.bounds.width,Ik(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Sd(t.listValue,M),a.letterSpacing,Ik(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),F.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return ba(this,void 0,void 0,function(){var n,i,w,a,s,w,o,A,w,l,c,w,u,h,w,g,p,w,v,m,w;return Zi(this,function(b){switch(b.label){case 0:if(_r(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:b.sent(),n=0,i=t.negativeZIndex,b.label=2;case 2:return n<i.length?(w=i[n],[4,this.renderStack(w)]):[3,5];case 3:b.sent(),b.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:b.sent(),a=0,s=t.nonInlineLevel,b.label=7;case 7:return a<s.length?(w=s[a],[4,this.renderNode(w)]):[3,10];case 8:b.sent(),b.label=9;case 9:return a++,[3,7];case 10:o=0,A=t.nonPositionedFloats,b.label=11;case 11:return o<A.length?(w=A[o],[4,this.renderStack(w)]):[3,14];case 12:b.sent(),b.label=13;case 13:return o++,[3,11];case 14:l=0,c=t.nonPositionedInlineLevel,b.label=15;case 15:return l<c.length?(w=c[l],[4,this.renderStack(w)]):[3,18];case 16:b.sent(),b.label=17;case 17:return l++,[3,15];case 18:u=0,h=t.inlineLevel,b.label=19;case 19:return u<h.length?(w=h[u],[4,this.renderNode(w)]):[3,22];case 20:b.sent(),b.label=21;case 21:return u++,[3,19];case 22:g=0,p=t.zeroOrAutoZIndexOrTransformedOrOpacity,b.label=23;case 23:return g<p.length?(w=p[g],[4,this.renderStack(w)]):[3,26];case 24:b.sent(),b.label=25;case 25:return g++,[3,23];case 26:v=0,m=t.positiveZIndex,b.label=27;case 27:return v<m.length?(w=m[v],[4,this.renderStack(w)]):[3,30];case 28:b.sent(),b.label=29;case 29:return v++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var n=this;t.forEach(function(i,a){var s=Ba(i)?i.start:i;a===0?n.ctx.moveTo(s.x,s.y):n.ctx.lineTo(s.x,s.y),Ba(i)&&n.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(t,n,i,a){this.path(t),this.ctx.fillStyle=n,this.ctx.translate(i,a),this.ctx.fill(),this.ctx.translate(-i,-a)},e.prototype.resizeImage=function(t,n,i){var a;if(t.width===n&&t.height===i)return t;var s=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,o=s.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,i);var A=o.getContext("2d");return A.drawImage(t,0,0,t.width,t.height,0,0,n,i),o},e.prototype.renderBackgroundImage=function(t){return ba(this,void 0,void 0,function(){var n,i,a,s,o,A;return Zi(this,function(l){switch(l.label){case 0:n=t.styles.backgroundImage.length-1,i=function(c){var u,h,g,D,ce,se,j,q,P,p,D,ce,se,j,q,v,m,w,b,_,C,M,F,k,P,N,D,Q,H,j,q,J,ce,se,W,le,fe,X,ne,Ie,te,$;return Zi(this,function(ue){switch(ue.label){case 0:if(c.type!==0)return[3,5];u=void 0,h=c.url,ue.label=1;case 1:return ue.trys.push([1,3,,4]),[4,a.context.cache.match(h)];case 2:return u=ue.sent(),[3,4];case 3:return ue.sent(),a.context.logger.error("Error loading background-image "+h),[3,4];case 4:return u&&(g=S1(t,n,[u.width,u.height,u.width/u.height]),D=g[0],ce=g[1],se=g[2],j=g[3],q=g[4],P=a.ctx.createPattern(a.resizeImage(u,j,q),"repeat"),a.renderRepeat(D,P,ce,se)),[3,6];case 5:_$(c)?(p=S1(t,n,[null,null,null]),D=p[0],ce=p[1],se=p[2],j=p[3],q=p[4],v=v$(c.angle,j,q),m=v[0],w=v[1],b=v[2],_=v[3],C=v[4],M=document.createElement("canvas"),M.width=j,M.height=q,F=M.getContext("2d"),k=F.createLinearGradient(w,_,b,C),Fk(c.stops,m).forEach(function(me){return k.addColorStop(me.stop,Pr(me.color))}),F.fillStyle=k,F.fillRect(0,0,j,q),j>0&&q>0&&(P=a.ctx.createPattern(M,"repeat"),a.renderRepeat(D,P,ce,se))):E$(c)&&(N=S1(t,n,[null,null,null]),D=N[0],Q=N[1],H=N[2],j=N[3],q=N[4],J=c.position.length===0?[w2]:c.position,ce=mn(J[0],j),se=mn(J[J.length-1],q),W=m$(c,ce,se,j,q),le=W[0],fe=W[1],le>0&&fe>0&&(X=a.ctx.createRadialGradient(Q+ce,H+se,0,Q+ce,H+se,le),Fk(c.stops,le*2).forEach(function(me){return X.addColorStop(me.stop,Pr(me.color))}),a.path(D),a.ctx.fillStyle=X,le!==fe?(ne=t.bounds.left+.5*t.bounds.width,Ie=t.bounds.top+.5*t.bounds.height,te=fe/le,$=1/te,a.ctx.save(),a.ctx.translate(ne,Ie),a.ctx.transform(1,0,0,te,0,0),a.ctx.translate(-ne,-Ie),a.ctx.fillRect(Q,$*(H-Ie)+Ie,j,q*$),a.ctx.restore()):a.ctx.fill())),ue.label=6;case 6:return n--,[2]}})},a=this,s=0,o=t.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return s<o.length?(A=o[s],[5,i(A)]):[3,4];case 2:l.sent(),l.label=3;case 3:return s++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,n,i){return ba(this,void 0,void 0,function(){return Zi(this,function(a){return this.path(nI(i,n)),this.ctx.fillStyle=Pr(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,n,i,a){return ba(this,void 0,void 0,function(){var s,o;return Zi(this,function(A){switch(A.label){case 0:return n<3?[4,this.renderSolidBorder(t,i,a)]:[3,2];case 1:return A.sent(),[2];case 2:return s=cZ(a,i),this.path(s),this.ctx.fillStyle=Pr(t),this.ctx.fill(),o=uZ(a,i),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return ba(this,void 0,void 0,function(){var n,i,a,s,o,A,l,c,u=this;return Zi(this,function(h){switch(h.label){case 0:return this.applyEffects(t.getEffects(2)),n=t.container.styles,i=!Ic(n.backgroundColor)||n.backgroundImage.length,a=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],s=bZ(mc(n.backgroundClip,0),t.curves),i||n.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),Ic(n.backgroundColor)||(this.ctx.fillStyle=Pr(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(g){u.ctx.save();var p=jp(t.curves),v=g.inset?0:yZ,m=AZ(p,-v+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(u.path(p),u.ctx.clip(),u.mask(m)):(u.mask(p),u.ctx.clip(),u.path(m)),u.ctx.shadowOffsetX=g.offsetX.number+v,u.ctx.shadowOffsetY=g.offsetY.number,u.ctx.shadowColor=Pr(g.color),u.ctx.shadowBlur=g.blur.number,u.ctx.fillStyle=g.inset?Pr(g.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),h.label=2;case 2:o=0,A=0,l=a,h.label=3;case 3:return A<l.length?(c=l[A],c.style!==0&&!Ic(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,o,t.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,o,t.curves,3)];case 6:return h.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,o,t.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,o,t.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,n,i,a,s){return ba(this,void 0,void 0,function(){var o,A,l,c,u,h,g,p,v,m,w,b,_,C,M,F,M,F;return Zi(this,function(k){return this.ctx.save(),o=dZ(a,i),A=nI(a,i),s===2&&(this.path(A),this.ctx.clip()),Ba(A[0])?(l=A[0].start.x,c=A[0].start.y):(l=A[0].x,c=A[0].y),Ba(A[1])?(u=A[1].end.x,h=A[1].end.y):(u=A[1].x,h=A[1].y),i===0||i===2?g=Math.abs(l-u):g=Math.abs(c-h),this.ctx.beginPath(),s===3?this.formatPath(o):this.formatPath(A.slice(0,2)),p=n<3?n*3:n*2,v=n<3?n*2:n,s===3&&(p=n,v=n),m=!0,g<=p*2?m=!1:g<=p*2+v?(w=g/(2*p+v),p*=w,v*=w):(b=Math.floor((g+v)/(p+v)),_=(g-b*p)/(b-1),C=(g-(b+1)*p)/b,v=C<=0||Math.abs(v-_)<Math.abs(v-C)?_:C),m&&(s===3?this.ctx.setLineDash([0,p+v]):this.ctx.setLineDash([p,v])),s===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Pr(t),this.ctx.stroke(),this.ctx.setLineDash([]),s===2&&(Ba(A[0])&&(M=A[3],F=A[0],this.ctx.beginPath(),this.formatPath([new We(M.end.x,M.end.y),new We(F.start.x,F.start.y)]),this.ctx.stroke()),Ba(A[1])&&(M=A[1],F=A[2],this.ctx.beginPath(),this.formatPath([new We(M.end.x,M.end.y),new We(F.start.x,F.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return ba(this,void 0,void 0,function(){var n;return Zi(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Pr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=lZ(t),[4,this.renderStack(n)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(N4);var wZ=function(r){return r instanceof E4||r instanceof _4?!0:r instanceof C2&&r.type!==zp&&r.type!==Hp},bZ=function(r,e){switch(r){case 0:return jp(e);case 2:return rZ(e);case 1:default:return Kp(e)}},_Z=function(r){switch(r){case 1:return"center";case 2:return"right";case 0:default:return"left"}},EZ=["-apple-system","system-ui"],CZ=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(e){return EZ.indexOf(e)===-1}):r};(function(r){ns(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return e.prototype.render=function(t){return ba(this,void 0,void 0,function(){var n,i;return Zi(this,function(a){switch(a.label){case 0:return n=gx(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,BZ(n)];case 1:return i=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Pr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(N4);var BZ=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})};typeof window<"u"&&tZ.setContext(window);/*!
 * @antv/g
 * @description A core module for rendering engine implements DOM API.
 * @version 6.3.1
 * @date 12/24/2025, 11:55:39 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var T1=(function(r){function e(t,n,i,a){var s;return Be(this,e),s=wt(this,e,[t]),s.currentTime=i,s.timelineTime=a,s.target=n,s.type="finish",s.bubbles=!1,s.currentTarget=n,s.defaultPrevented=!1,s.eventPhase=s.AT_TARGET,s.timeStamp=Date.now(),s.currentTime=i,s.timelineTime=a,s}return bt(e,r),xe(e)})(vv),xZ=0,SZ=(function(){function r(e,t){var n;Be(this,r),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=e,e.animation=this,this.timeline=t,this.id="".concat(xZ++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((n=this.effect)===null||n===void 0?void 0:n.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return xe(r,[{key:"pending",get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var t=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(n,i){t.resolveReadyPromise=function(){n(t)},t.rejectReadyPromise=function(){i(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var t=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(n,i){t.resolveFinishedPromise=function(){n(t)},t.rejectFinishedPromise=function(){i(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){if(t=Number(t),!isNaN(t)){if(this.timeline.restart(),!this._paused&&this._startTime!==null){var n;this._startTime=Number((n=this.timeline)===null||n===void 0?void 0:n.currentTime)-t/this.playbackRate}this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(t){if(t!==null){if(this.updatePromises(),t=Number(t),isNaN(t)||this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var n=this.currentTime;this._playbackRate=t,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),n!==null&&(this.currentTime=n),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||this.playState==="running"||!this._finishedFlag}},{key:"updatePromises",value:function(){var t;if((t=this.effect.target)!==null&&t!==void 0&&t.destroyed)return this.readyPromise=void 0,this.finishedPromise=void 0,!1;var n=this.oldPlayState,i=this.pending?"pending":this.playState;return this.readyPromise&&i!==n&&(i==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):n==="pending"?this.resolveReadyPromise():i==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&i!==n&&(i==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):i==="finished"?this.resolveFinishedPromise():n==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=i,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var t=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=null,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var n=new T1(null,this,this.currentTime,null);setTimeout(function(){t.oncancel(n)})}}},{key:"reverse",value:function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),t!==null&&(this.currentTime=t),this.updatePromises()}},{key:"updatePlaybackRate",value:function(t){this.playbackRate=t}},{key:"targetAnimations",value:function(){var t,n=(t=this.effect)===null||t===void 0?void 0:t.target;return n.getAnimations()}},{key:"markTarget",value:function(){var t=this.targetAnimations();t.indexOf(this)===-1&&t.push(this)}},{key:"unmarkTarget",value:function(){var t=this.targetAnimations(),n=t.indexOf(this);n!==-1&&t.splice(n,1)}},{key:"tick",value:function(t,n){!this._idle&&!this._paused&&(this._startTime===null?n&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),n&&(this.currentTimePending=!1,this.fireEvents(t))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")}},{key:"persist",value:function(){throw new Error(tn)}},{key:"addEventListener",value:function(t,n,i){throw new Error(tn)}},{key:"removeEventListener",value:function(t,n,i){throw new Error(tn)}},{key:"dispatchEvent",value:function(t){throw new Error(tn)}},{key:"commitStyles",value:function(){throw new Error(tn)}},{key:"ensureAlive",value:function(){if(this.playbackRate<0&&this.currentTime===0){var t;this._inEffect=!!((t=this.effect)!==null&&t!==void 0&&t.update(-1))}else{var n;this._inEffect=!!((n=this.effect)!==null&&n!==void 0&&n.update(this.currentTime))}!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(t,n){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!n&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(t){var n=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var i=new T1(null,this,this.currentTime,t);setTimeout(function(){n.onfinish&&n.onfinish(i)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var a=new T1(null,this,this.currentTime,t);this.onframe(a)}this._finishedFlag=!1}}}])})(),TZ=4,MZ=.001,FZ=1e-7,kZ=10,ud=11,vg=1/(ud-1),IZ=typeof Float32Array=="function",D4=function(e,t){return 1-3*t+3*e},R4=function(e,t){return 3*t-6*e},Q4=function(e){return 3*e},Vp=function(e,t,n){return((D4(t,n)*e+R4(t,n))*e+Q4(t))*e},U4=function(e,t,n){return 3*D4(t,n)*e*e+2*R4(t,n)*e+Q4(t)},PZ=function(e,t,n,i,a){var s,o,A=0;do o=t+(n-t)/2,s=Vp(o,i,a)-e,s>0?n=o:t=o;while(Math.abs(s)>FZ&&++A<kZ);return o},OZ=function(e,t,n,i){for(var a=0;a<TZ;++a){var s=U4(t,n,i);if(s===0)return t;var o=Vp(t,n,i)-e;t-=o/s}return t},x2=function(e,t,n,i){if(!(e>=0&&e<=1&&n>=0&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===i)return function(A){return A};for(var a=IZ?new Float32Array(ud):new Array(ud),s=0;s<ud;++s)a[s]=Vp(s*vg,e,n);var o=function(l){for(var c=0,u=1,h=ud-1;u!==h&&a[u]<=l;++u)c+=vg;--u;var g=(l-a[u])/(a[u+1]-a[u]),p=c+g*vg,v=U4(p,e,n);return v>=MZ?OZ(l,p,e,n):v===0?p:PZ(l,c,c+vg,e,n)};return function(A){return A===0||A===1?A:Vp(o(A),t,i)}},LZ=function(e){return e=e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())}),e.charAt(0)==="-"?e.substring(1):e},mg=function(e){return Math.pow(e,2)},yg=function(e){return Math.pow(e,3)},wg=function(e){return Math.pow(e,4)},bg=function(e){return Math.pow(e,5)},_g=function(e){return Math.pow(e,6)},Eg=function(e){return 1-Math.cos(e*Math.PI/2)},Cg=function(e){return 1-Math.sqrt(1-e*e)},Bg=function(e){return e*e*(3*e-2)},xg=function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)},Sg=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=yt(t,2),i=n[0],a=i===void 0?1:i,s=n[1],o=s===void 0?.5:s,A=Rn(Number(a),1,10),l=Rn(Number(o),.1,2);return e===0||e===1?e:-A*Math.pow(2,10*(e-1))*Math.sin((e-1-l/(Math.PI*2)*Math.asin(1/A))*(Math.PI*2)/l)},Yu=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=yt(t,4),a=i[0],s=a===void 0?1:a,o=i[1],A=o===void 0?100:o,l=i[2],c=l===void 0?10:l,u=i[3],h=u===void 0?0:u;s=Rn(s,.1,1e3),A=Rn(A,.1,1e3),c=Rn(c,.1,1e3),h=Rn(h,.1,1e3);var g=Math.sqrt(A/s),p=c/(2*Math.sqrt(A*s)),v=p<1?g*Math.sqrt(1-p*p):0,m=1,w=p<1?(p*g+-h)/v:-h+g,b=n?n*e/1e3:e;return p<1?b=Math.exp(-b*p*g)*(m*Math.cos(v*b)+w*Math.sin(v*b)):b=(m+w*b)*Math.exp(-b*g),e===0||e===1?e:1-b},M1=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=t,i=yt(n,2),a=i[0],s=a===void 0?10:a,o=i[1],A=o==="start"?Math.ceil:Math.floor;return A(Rn(e,0,1)*s)/s},iI=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=yt(t,4),i=n[0],a=n[1],s=n[2],o=n[3];return x2(i,a,s,o)(e)},Tg=x2(.42,0,1,1),va=function(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return 1-e(1-t,n,i)}},ma=function(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return t<.5?e(t*2,n,i)/2:1-e(t*-2+2,n,i)/2}},ya=function(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return t<.5?(1-e(1-t*2,n,i))/2:(e(t*2-1,n,i)+1)/2}},aI={steps:M1,"step-start":function(e){return M1(e,[1,"start"])},"step-end":function(e){return M1(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":iI,ease:function(e){return iI(e,[.25,.1,.25,1])},in:Tg,out:va(Tg),"in-out":ma(Tg),"out-in":ya(Tg),"in-quad":mg,"out-quad":va(mg),"in-out-quad":ma(mg),"out-in-quad":ya(mg),"in-cubic":yg,"out-cubic":va(yg),"in-out-cubic":ma(yg),"out-in-cubic":ya(yg),"in-quart":wg,"out-quart":va(wg),"in-out-quart":ma(wg),"out-in-quart":ya(wg),"in-quint":bg,"out-quint":va(bg),"in-out-quint":ma(bg),"out-in-quint":ya(bg),"in-expo":_g,"out-expo":va(_g),"in-out-expo":ma(_g),"out-in-expo":ya(_g),"in-sine":Eg,"out-sine":va(Eg),"in-out-sine":ma(Eg),"out-in-sine":ya(Eg),"in-circ":Cg,"out-circ":va(Cg),"in-out-circ":ma(Cg),"out-in-circ":ya(Cg),"in-back":Bg,"out-back":va(Bg),"in-out-back":ma(Bg),"out-in-back":ya(Bg),"in-bounce":xg,"out-bounce":va(xg),"in-out-bounce":ma(xg),"out-in-bounce":ya(xg),"in-elastic":Sg,"out-elastic":va(Sg),"in-out-elastic":ma(Sg),"out-in-elastic":ya(Sg),spring:Yu,"spring-in":Yu,"spring-out":va(Yu),"spring-in-out":ma(Yu),"spring-out-in":ya(Yu)},NZ=function(e){return LZ(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},DZ=function(e){return aI[NZ(e)]||aI.linear},RZ=function(e){return e},QZ=1,UZ=.5,sI=0;function oI(r,e){return function(t){if(t>=1)return 1;var n=1/r;return t+=e*n,t-t%n}}var Mg="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",HZ=new RegExp("cubic-bezier\\(".concat(Mg,",").concat(Mg,",").concat(Mg,",").concat(Mg,"\\)")),zZ=/steps\(\s*(\d+)\s*\)/,jZ=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function S2(r){var e=HZ.exec(r);if(e)return x2.apply(void 0,Ft(e.slice(1).map(Number)));var t=zZ.exec(r);if(t)return oI(Number(t[1]),sI);var n=jZ.exec(r);return n?oI(Number(n[1]),{start:QZ,middle:UZ,end:sI}[n[2]]):DZ(r)}function KZ(r){return Math.abs(GZ(r)/(r.playbackRate||1))}function GZ(r){var e;return r.duration===0||r.iterations===0?0:(r.duration==="auto"?0:Number(r.duration))*((e=r.iterations)!==null&&e!==void 0?e:1)}var H4=0,T2=1,Fv=2,z4=3;function VZ(r,e,t){if(e===null)return H4;var n=t.endTime;return e<Math.min(t.delay,n)?T2:e>=Math.min(t.delay+r+t.endDelay,n)?Fv:z4}function qZ(r,e,t,n,i){switch(n){case T2:return e==="backwards"||e==="both"?0:null;case z4:return t-i;case Fv:return e==="forwards"||e==="both"?r:null;case H4:return null}}function WZ(r,e,t,n,i){var a=i;return r===0?e!==T2&&(a+=t):a+=n/r,a}function $Z(r,e,t,n,i,a){var s=r===1/0?e%1:r%1;return s===0&&t===Fv&&n!==0&&(i!==0||a===0)&&(s=1),s}function YZ(r,e,t,n){return r===Fv&&e===1/0?1/0:t===1?Math.floor(n)-1:Math.floor(n)}function XZ(r,e,t){var n=r;if(r!=="normal"&&r!=="reverse"){var i=e;r==="alternate-reverse"&&(i+=1),n="normal",i!==1/0&&i%2!==0&&(n="reverse")}return n==="normal"?t:1-t}function ZZ(r,e,t){var n=VZ(r,e,t),i=qZ(r,t.fill,e,n,t.delay);if(i===null)return null;var a=t.duration==="auto"?0:t.duration,s=WZ(a,n,t.iterations,i,t.iterationStart),o=$Z(s,t.iterationStart,n,t.iterations,i,a),A=YZ(n,t.iterations,o,s),l=XZ(t.direction,A,o);return t.currentIteration=A,t.progress=l,t.easingFunction(l)}function JZ(r,e,t){var n=eJ(r,e),i=tJ(n,t);return function(a,s){if(s!==null)i.filter(function(A){return s>=A.applyFrom&&s<A.applyTo}).forEach(function(A){var l=s-A.startOffset,c=A.endOffset-A.startOffset,u=c===0?0:l/c;a.setAttribute(A.property,A.interpolation(u),!1,!1)});else for(var o in n)j4(o)&&a.setAttribute(o,null)}}function j4(r){return r!=="offset"&&r!=="easing"&&r!=="composite"&&r!=="computedOffset"}function eJ(r,e){for(var t={},n=0;n<r.length;n++)for(var i in r[n])if(j4(i)){var a={offset:r[n].offset,computedOffset:r[n].computedOffset,easing:r[n].easing,easingFunction:S2(r[n].easing)||e.easingFunction,value:r[n][i]};t[i]=t[i]||[],t[i].push(a)}return t}function tJ(r,e){var t=[];for(var n in r)for(var i=r[n],a=0;a<i.length-1;a++){var s=a,o=a+1,A=i[s].computedOffset,l=i[o].computedOffset,c=A,u=l;a===0&&(c=-1/0,l===0&&(o=s)),a===i.length-2&&(u=1/0,A===1&&(s=o)),t.push({applyFrom:c,applyTo:u,startOffset:i[s].computedOffset,endOffset:i[o].computedOffset,easingFunction:i[s].easingFunction,property:n,interpolation:nJ(n,i[s].value,i[o].value,e)})}return t.sort(function(h,g){return h.startOffset-g.startOffset}),t}var AI=function(e,t,n){return function(i){var a=K4(e,t,i);return je(a)?a:n(a)}};function nJ(r,e,t,n){var i=wU[r];if(i&&i.syntax&&i.int){var a=Se.styleValueRegistry.getPropertySyntax(i.syntax);if(a){var s=a.parser,o=s?s(e,n):e,A=s?s(t,n):t,l=a.mixer(o,A,n);if(l){var c=AI.apply(void 0,Ft(l));return function(u){return u===0?e:u===1?t:c(u)}}}}return AI(!1,!0,function(u){return u?t:e})}function K4(r,e,t){if(typeof r=="number"&&typeof e=="number")return r*(1-t)+e*t;if(typeof r=="boolean"&&typeof e=="boolean"||typeof r=="string"&&typeof e=="string")return t<.5?r:e;if(Array.isArray(r)&&Array.isArray(e)){for(var n=r.length,i=e.length,a=Math.max(n,i),s=[],o=0;o<a;o++)s.push(K4(r[o<n?o:n-1],e[o<i?o:i-1],t));return s}throw new Error("Mismatched interpolation arguments ".concat(r,":").concat(e))}var rJ=(function(){function r(){Be(this,r),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=RZ,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return xe(r,[{key:"easing",get:function(){return this._easing},set:function(t){this.easingFunction=S2(t),this._easing=t}}])})();function iJ(r){var e=[];for(var t in r)if(!(t in["easing","offset","composite"])){var n=r[t];Array.isArray(n)||(n=[n]);for(var i=n.length,a=0;a<i;a++){if(!e[a]){var s={};"offset"in r&&(s.offset=Number(r.offset)),"easing"in r&&(s.easing=r.easing),"composite"in r&&(s.composite=r.composite),e[a]=s}n[a]!==void 0&&n[a]!==null&&(e[a][t]=n[a])}}return e.sort(function(o,A){return(o.computedOffset||0)-(A.computedOffset||0)}),e}function lI(r,e){if(r===null)return[];Array.isArray(r)||(r=iJ(r));for(var t=r.map(function(A){var l={};e!=null&&e.composite&&(l.composite="auto");for(var c in A){var u=A[c];if(c==="offset"){if(u!==null){if(u=Number(u),!isFinite(u))throw new Error("Keyframe offsets must be numbers.");if(u<0||u>1)throw new Error("Keyframe offsets must be between 0 and 1.");l.computedOffset=u}}else if(c==="composite"&&["replace","add","accumulate","auto"].indexOf(u)===-1)throw new Error("".concat(u," compositing is not supported"));l[c]=u}return l.offset===void 0&&(l.offset=null),l.easing===void 0&&(l.easing=(e==null?void 0:e.easing)||"linear"),l.composite===void 0&&(l.composite="auto"),l}),n=!0,i=-1/0,a=0;a<t.length;a++){var s=t[a].offset;if(it(s))n=!1;else{if(s<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=s}}t=t.filter(function(A){return Number(A.offset)>=0&&Number(A.offset)<=1});function o(){var A,l=t,c=l.length;if(t[c-1].computedOffset=Number((A=t[c-1].offset)!==null&&A!==void 0?A:1),c>1){var u;t[0].computedOffset=Number((u=t[0].offset)!==null&&u!==void 0?u:0)}for(var h=0,g=Number(t[0].computedOffset),p=1;p<c;p++){var v=t[p].computedOffset;if(!it(v)&&!it(g)){for(var m=1;m<p-h;m++)t[h+m].computedOffset=g+(Number(v)-g)*m/(p-h);h=p,g=Number(v)}}}return n||o(),t}var aJ="backwards|forwards|both|none".split("|"),sJ="reverse|alternate|alternate-reverse".split("|");function oJ(r,e){var t=new rJ;return typeof r=="number"&&!isNaN(r)?t.duration=r:r!==void 0&&Object.keys(r).forEach(function(n){if(r[n]!==void 0&&r[n]!==null&&r[n]!=="auto"){if((typeof t[n]=="number"||n==="duration")&&(typeof r[n]!="number"||isNaN(r[n]))||n==="fill"&&aJ.indexOf(r[n])===-1||n==="direction"&&sJ.indexOf(r[n])===-1)return;t[n]=r[n]}}),t}function AJ(r,e){return r=lJ(r??{duration:"auto"}),oJ(r)}function lJ(r){return typeof r=="number"&&(isNaN(r)?r={duration:"auto"}:r={duration:r}),r}var cJ=(function(){function r(e,t,n){var i=this;Be(this,r),this.composite="replace",this.iterationComposite="replace",this.target=e,this.timing=AJ(n),this.timing.effect=this,this.timing.activeDuration=KZ(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=lI(t,this.timing),this.interpolations=JZ(this.normalizedKeyframes,this.timing,this.target);var a=Se.globalThis.Proxy;this.computedTiming=a?new a(this.timing,{get:function(o,A){return A==="duration"?o.duration==="auto"?0:o.duration:A==="fill"?o.fill==="auto"?"none":o.fill:A==="localTime"?i.animation&&i.animation.currentTime||null:A==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:o.currentIteration||0:A==="progress"?!i.animation||i.animation.playState!=="running"?null:o.progress||0:o[A]},set:function(){return!0}}):this.timing}return xe(r,[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(t){return t===null?!1:(this.timeFraction=ZZ(this.timing.activeDuration,t,this.timing),this.timeFraction!==null)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(t){this.normalizedKeyframes=lI(t)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(t){var n=this;Object.keys(t||{}).forEach(function(i){n.timing[i]=t[i]})}}])})();function cI(r,e){return Number(r.id)-Number(e.id)}var uJ=(function(){function r(e){var t=this;Be(this,r),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(n){t.currentTime=n,t.discardAnimations(),t.animations.length===0?t.timelineTicking=!1:t.requestAnimationFrame(t.webAnimationsNextTick)},this.processRafCallbacks=function(n){var i=t.rafCallbacks;t.rafCallbacks=[],n<Number(t.currentTime)&&(n=Number(t.currentTime)),t.animations.sort(cI),t.animations=t.tick(n,!0,t.animations)[0],i.forEach(function(a){a[1](n)}),t.applyPendingEffects()},this.document=e}return xe(r,[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(t,n,i){var a=new cJ(t,n,i),s=new SZ(a,this);return this.animations.push(s),this.restartWebAnimationsNextTick(),s.updatePromises(),s.play(),s.updatePromises(),s}},{key:"applyDirtiedAnimation",value:function(t){var n=this;if(!this.inTick){t.markTarget();var i=t.targetAnimations();i.sort(cI);var a=this.tick(Number(this.currentTime),!1,i.slice())[1];a.forEach(function(s){var o=n.animations.indexOf(s);o!==-1&&n.animations.splice(o,1)}),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach(function(t){t==null||t.applyInterpolations()}),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(t){return t.updatePromises()})}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(t){return t.playState!=="finished"&&t.playState!=="idle"})}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(t){var n=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([n,t]),n}},{key:"requestAnimationFrame",value:function(t){var n=this;return this.rAF(function(i){n.updateAnimationsPromises(),t(i),n.updateAnimationsPromises()})}},{key:"tick",value:function(t,n,i){var a=this,s,o;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var A=[],l=[],c=[],u=[];return i.forEach(function(h){h.tick(t,n),h._inEffect?(l.push(h.effect),h.markTarget()):(A.push(h.effect),h.unmarkTarget()),h._needsTick&&(a.ticking=!0);var g=h._inEffect||h._needsTick;h._inTimeline=g,g?c.push(h):u.push(h)}),(s=this.pendingEffects).push.apply(s,A),(o=this.pendingEffects).push.apply(o,l),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[c,u]}}])})();Se.EasingFunction=S2;Se.AnimationTimeline=uJ;var dJ=(function(r){function e(){var t;Be(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=wt(this,e,[].concat(i)),t.landmarks=[],t}return bt(e,r),xe(e,[{key:"rotate",value:function(n,i,a){if(this.relElevation=Tc(i),this.relAzimuth=Tc(n),this.relRoll=Tc(a),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===en.EXPLORING){var s=Go(lr(),[1,0,0],Wt((this.rotateWorld?1:-1)*this.relElevation)),o=Go(lr(),[0,1,0],Wt((this.rotateWorld?1:-1)*this.relAzimuth)),A=Go(lr(),[0,0,1],Wt(this.relRoll)),l=rA(lr(),o,s);l=rA(lr(),l,A);var c=i2(sn(),l);xc(this.matrix,this.matrix,[0,0,-this.distance]),Ai(this.matrix,this.matrix,c),xc(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===en.ORBITING||this.type===en.EXPLORING?this._getPosition():this.type===en.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(n,i){var a=mi(n,i,0),s=qs(this.position);return nA(s,s,_p(xt(),this.right,a[0])),nA(s,s,_p(xt(),this.up,a[1])),this._setPosition(s),this.triggerUpdate(),this}},{key:"dolly",value:function(n){var i=this.forward,a=qs(this.position),s=n*this.dollyingStep,o=this.distance+n*this.dollyingStep;return s=Math.max(Math.min(o,this.maxDistance),this.minDistance)-this.distance,a[0]+=s*i[0],a[1]+=s*i[1],a[2]+=s*i[2],this._setPosition(a),this.type===en.ORBITING||this.type===en.EXPLORING?this._getDistance():this.type===en.TRACKING&&nA(this.focalPoint,a,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(n){var i,a,s,o,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=A.position,c=l===void 0?this.position:l,u=A.focalPoint,h=u===void 0?this.focalPoint:u,g=A.roll,p=A.zoom,v=new Se.CameraContribution;v.setType(this.type,void 0),v.setPosition(c[0],(i=c[1])!==null&&i!==void 0?i:this.position[1],(a=c[2])!==null&&a!==void 0?a:this.position[2]),v.setFocalPoint(h[0],(s=h[1])!==null&&s!==void 0?s:this.focalPoint[1],(o=h[2])!==null&&o!==void 0?o:this.focalPoint[2]),v.setRoll(g??this.roll),v.setZoom(p??this.zoom);var m={name:n,matrix:pQ(v.getWorldTransform()),right:qs(v.right),up:qs(v.up),forward:qs(v.forward),position:qs(v.getPosition()),focalPoint:qs(v.getFocalPoint()),distanceVector:qs(v.getDistanceVector()),distance:v.getDistance(),dollyingStep:v.getDollyingStep(),azimuth:v.getAzimuth(),elevation:v.getElevation(),roll:v.getRoll(),relAzimuth:v.relAzimuth,relElevation:v.relElevation,relRoll:v.relRoll,zoom:v.getZoom()};return this.landmarks.push(m),m}},{key:"gotoLandmark",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Rt(n)?this.landmarks.find(function(Q){return Q.name===n}):n;if(s){var o=je(a)?{duration:a}:a,A=o.easing,l=A===void 0?"linear":A,c=o.duration,u=c===void 0?100:c,h=o.easingFunction,g=h===void 0?void 0:h,p=o.onfinish,v=p===void 0?void 0:p,m=o.onframe,w=m===void 0?void 0:m,b=.01;this.cancelLandmarkAnimation();var _=s.position,C=s.focalPoint,M=s.zoom,F=s.roll,k=g||Se.EasingFunction(l),P,N=function(){i.setFocalPoint(C),i.setPosition(_),i.setRoll(F),i.setZoom(M),i.computeMatrix(),i.triggerUpdate(),v==null||v()};if(u===0)return N();var D=function(H){P===void 0&&(P=H);var j=H-P;if(j>=u){N();return}var q=k(j/u),J=xt(),ce=xt(),se=1,W=0;kB(J,i.focalPoint,C,q),kB(ce,i.position,_,q),W=i.roll*(1-q)+F*q,se=i.zoom*(1-q)+M*q,i.setFocalPoint(J),i.setPosition(ce),i.setRoll(W),i.setZoom(se);var le=gF(J,C)+gF(ce,_);if(le<=b&&M===void 0&&F===void 0)return N();i.computeMatrix(),i.triggerUpdate(),j<u&&(w==null||w(q),i.landmarkAnimationID=i.canvas.requestAnimationFrame(D))};this.canvas.requestAnimationFrame(D)}}}])})(rU);Se.CameraContribution=dJ;var hJ=["body","startHead","endHead","startHeadOffset","endHeadOffset"],fJ=["body","startHead","endHead","startHeadOffset","endHeadOffset"],gJ=["body","startHead","endHead","startHeadOffset","endHeadOffset"],G4=(function(r){function e(t){var n;Be(this,e),n=wt(this,e,[dt(dt({},t),{},{type:e.tag})]);var i=n.attributes,a=i.body,s=i.startHead,o=i.endHead;i.startHeadOffset,i.endHeadOffset;var A=_s(i,hJ);if(!a)throw new Error("Arrow's body is required");return n.body=a,n.appendChild(n.body),n.handleBodyAttributeChanged(n.body),s&&n.appendArrowHead(n.getArrowHeadType(s),!0),o&&n.appendArrowHead(n.getArrowHeadType(o),!1),n.applyArrowStyle(A,[n.body,n.startHead,n.endHead]),n}return bt(e,r),xe(e,[{key:"handleBodyAttributeChanged",value:function(n){var i=this;n.addEventListener(Ot.ATTR_MODIFIED,function(a){var s=a.attrName;s==="x1"||s==="y1"?i.startHead&&i.transformArrowHead(i.startHead,!0):(s==="x2"||s==="y2")&&i.endHead&&i.transformArrowHead(i.endHead,!1)})}},{key:"getBody",value:function(){return this.body}},{key:"getStartHead",value:function(){return this.startHead}},{key:"getEndHead",value:function(){return this.endHead}},{key:"attributeChangedCallback",value:function(n,i,a){if(n==="opacity"||n==="strokeOpacity"||n==="stroke"||n==="lineWidth"||n==="increasedLineWidthForHitTesting")this.applyArrowStyle(Ke({},n,a),[this.body,this.startHead,this.endHead]);else if(n==="startHead"||n==="endHead"){var s=n==="startHead";if(this.destroyArrowHead(s),a){var o=this.attributes;o.body,o.startHead,o.endHead,o.startHeadOffset,o.endHeadOffset;var A=_s(o,fJ);this.appendArrowHead(this.getArrowHeadType(a),s),this.applyArrowStyle(A,[s?this.startHead:this.endHead])}}else if(n==="body"){var l=this.attributes;l.body,l.startHead,l.endHead,l.startHeadOffset,l.endHeadOffset;var c=_s(l,gJ);this.body.destroy(),this.body=a,this.appendChild(this.body),this.applyArrowStyle(c,[this.body])}else n==="startHeadOffset"?this.moveArrowHeadAlongTangent(a,!0):n==="endHeadOffset"&&this.moveArrowHeadAlongTangent(a,!1)}},{key:"getArrowHeadType",value:function(n){return typeof n=="boolean"?"default":"custom"}},{key:"appendArrowHead",value:function(n,i){var a;n==="default"?a=this.createDefaultArrowHead():a=i?this.attributes.startHead:this.attributes.endHead,this.transformArrowHead(a,i),a.setAttribute("zIndex",1),i?this.startHead=a:this.endHead=a,this.appendChild(a);var s=i?this.attributes.startHeadOffset:this.attributes.endHeadOffset;s&&this.moveArrowHeadAlongTangent(s,i)}},{key:"transformArrowHead",value:function(n,i){var a=xt(),s=0,o=0,A=0,l=0,c=0,u=this.body&&this.body.nodeName;if(u===we.LINE){var h=this.body.attributes,g=h.x1,p=h.x2,v=h.y1,m=h.y2;o=i?p:g,A=i?g:p,l=i?m:v,c=i?v:m}else if(u===we.POLYLINE){var w=this.body.attributes.points,b=w.length;o=i?w[1][0]:w[b-2][0],l=i?w[1][1]:w[b-2][1],A=i?w[0][0]:w[b-1][0],c=i?w[0][1]:w[b-1][1]}else if(u===we.PATH){var _=this.getTangent(this.body,i),C=yt(_,2),M=C[0],F=C[1];o=M[0],l=M[1],A=F[0],c=F[1]}var k=o-A,P=l-c;s=Math.atan2(P,k),a=on(A,c,0),i?(this.startHeadPosition=a,this.startHeadRad=s):(this.endHeadPosition=a,this.endHeadRad=s),n.setLocalPosition(a),n.setLocalEulerAngles(s*180/Math.PI+n.getLocalEulerAngles())}},{key:"moveArrowHeadAlongTangent",value:function(n,i){var a=i?this.startHead:this.endHead;a&&a.setLocalPosition(OQ(xt(),i?this.startHeadPosition:this.endHeadPosition,on(Math.cos(i?this.startHeadRad:this.endHeadRad)*n,Math.sin(i?this.startHeadRad:this.endHeadRad)*n,0))),this.body}},{key:"destroyArrowHead",value:function(n){n&&this.startHead&&(this.startHead.destroy(),this.startHead=void 0),!n&&this.endHead&&(this.endHead.destroy(),this.endHead=void 0)}},{key:"getTangent",value:function(n,i){return i?n.getStartTangent():n.getEndTangent()}},{key:"createDefaultArrowHead",value:function(){var n=this.attributes,i=n.stroke,a=n.lineWidth,s=Math.sin,o=Math.cos,A=Math.PI,l=10*o(A/6);return new ci({style:{d:"M".concat(l/2,",").concat(10*s(A/6)," L-").concat(l/2,",0 L").concat(l/2,",-").concat(10*s(A/6)),stroke:i,lineWidth:a,transformOrigin:"center"}})}},{key:"applyArrowStyle",value:function(n,i){var a=n.opacity,s=n.stroke,o=n.strokeOpacity,A=n.lineWidth,l=n.increasedLineWidthForHitTesting;i.forEach(function(c){c&&(it(a)||(c.style.opacity=a),it(s)||(c.style.stroke=s),it(o)||(c.style.strokeOpacity=o),it(A)||(c.style.lineWidth=A),it(l)||(c.style.increasedLineWidthForHitTesting=l))})}}])})(sh);G4.tag="arrow";G4.PARSED_STYLE_LIST=new Set([].concat(Ft(sh.PARSED_STYLE_LIST),["body","startHead","endHead","startHeadOffset","endHeadOffset","stroke","lineWidth","opacity","strokeOpacity"]));var M2=Math.PI,pJ=M2*2,Xu=Math.sin,Fg=Math.cos,vJ=Math.acos,ni=Math.atan2,Td=Math.sqrt,mx=Math.max,hs=Math.min,yc=1e-4,mJ=[{name:"sr",inherits:!1,interpolable:!0,syntax:De.LENGTH_PERCENTAGE},{name:"sr0",inherits:!1,interpolable:!0,syntax:De.LENGTH_PERCENTAGE},{name:"startAngle",inherits:!1,interpolable:!0,syntax:De.ANGLE},{name:"endAngle",inherits:!1,interpolable:!0,syntax:De.ANGLE}];mJ.forEach(function(r){d7.registerProperty(r)});var ja=function(e,t,n,i){return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}};function yJ(r,e,t,n,i,a,s,o){var A=t-r,l=n-e,c=s-i,u=o-a,h=u*A-c*l;if(!(h*h<yc))return h=(c*(e-a)-u*(r-i))/h,[r+h*A,e+h*l]}function kg(r,e,t,n,i,a,s){var o=r-t,A=e-n,l=a/Td(o*o+A*A),c=l*A,u=-l*o,h=r+c,g=e+u,p=t+c,v=n+u,m=(h+p)/2,w=(g+v)/2,b=p-h,_=v-g,C=b*b+_*_,M=i-a,F=h*v-p*g,k=(_<0?-1:1)*Td(mx(0,M*M*C-F*F)),P=(F*_-b*k)/C,N=(-F*b-_*k)/C,D=(F*_+b*k)/C,Q=(-F*b+_*k)/C,H=P-m,j=N-w,q=D-m,J=Q-w;return H*H+j*j>q*q+J*J&&(P=D,N=Q),{cx:P,cy:N,x0:-c,y0:-u,x1:P*(i/M-1),y1:N*(i/M-1)}}function Vs(r,e){return e=e<0&&r>=0?e+pJ:e,e-r<=M2?0:1}var wJ=(function(r){function e(t){var n;return Be(this,e),n=wt(this,e,[t]),n.updatePath(),n}return bt(e,r),xe(e,[{key:"setAttribute",value:function(n,i,a){Tp(e,"setAttribute",this)([n,i,a]),["startAngle","endAngle","sr","sr0","radius"].indexOf(n)>-1&&this.updatePath()}},{key:"updatePath",value:function(){var n=this.parsedStyle,i=n.x,a=n.y,s=n.startAngle,o=n.endAngle,A=n.sr,l=n.sr0,c=n.radius,u=this.createPath(i,a,s?Wt(s):0,o?Wt(o):Math.PI*2,A||0,l||0,c||[0,0,0,0]);Tp(e,"setAttribute",this)(["d",u])}},{key:"createPath",value:function(n,i,a,s,o,A,l){if(!(o<=0)){var c=ja(n,i,o,a),u=ja(n,i,o,s),h=ja(n,i,A,a),g=ja(n,i,A,s);if(Sc(s-a,Math.PI*2)){var p=ja(n,i,o,a+Math.PI),v=ja(n,i,A,a+Math.PI),m=[["M",c.x,c.y],["A",o,o,0,1,1,p.x,p.y],["A",o,o,0,1,1,u.x,u.y],["M",h.x,h.y]];return A&&(m.push(["A",A,A,0,1,0,v.x,v.y]),m.push(["A",A,A,0,1,0,g.x,g.y])),m.push(["M",c.x,c.y]),m.push(["Z"]),m}var w=s-a,b=o*Fg(a),_=o*Xu(a),C=A*Fg(s),M=A*Xu(s),F=o*Fg(s),k=o*Xu(s),P=A*Fg(a),N=A*Xu(a),D=yt(l,4),Q=D[0],H=D[1],j=D[2],q=D[3],J=(o-A)/2,ce=hs(J,Q),se=hs(J,H),W=hs(J,j),le=hs(J,q),fe=mx(ce,se),X=mx(W,le),ne=fe,Ie=X;if((fe>yc||X>yc)&&w<M2){var te=yJ(b,_,P,N,F,k,C,M);if(te){var $=b-te[0],ue=_-te[1],me=F-te[0],Te=k-te[1],He=1/Xu(vJ(($*me+ue*Te)/(Td($*$+ue*ue)*Td(me*me+Te*Te)))/2),Je=Td(te[0]*te[0]+te[1]*te[1]);ne=hs(fe,(o-Je)/(He+1)),Ie=hs(X,(A-Je)/(He-1))}}var Bt=Vs(a,s),Lt=[];if(ne>yc){var kt=hs(Q,ne),zt=hs(H,ne),ot=kg(P,N,b,_,o,kt),Qt=kg(F,k,C,M,o,zt);if(Lt.push(["M",n+ot.cx+ot.x0,i+ot.cy+ot.y0]),ne<fe&&kt===zt){var Ct=ni(ot.y0,ot.x0),Rr=ni(Qt.y0,Qt.x0);Lt.push(["A",ne,ne,0,Vs(Ct,Rr),1,n+Qt.cx+Qt.x0,i+Qt.cy+Qt.y0])}else{if(kt>0){var Gt=ni(ot.y0,ot.x0),ui=ni(ot.y1,ot.x1),Hn=ja(n,i,o,ui);Lt.push(["A",kt,kt,0,Vs(Gt,ui),1,Hn.x,Hn.y])}var An=ni(ot.cy+ot.y1,ot.cx+ot.x1),Xt=ni(Qt.cy+Qt.y1,Qt.cx+Qt.x1),ir=ja(n,i,o,Xt);if(Lt.push(["A",o,o,0,Vs(An,Xt),1,ir.x,ir.y]),zt>0){var pr=ni(Qt.y1,Qt.x1),Qr=ni(Qt.y0,Qt.x0);Lt.push(["A",zt,zt,0,Vs(pr,Qr),1,n+Qt.cx+Qt.x0,i+Qt.cy+Qt.y0])}}}else Lt.push(["M",c.x,c.y]),Lt.push(["A",o,o,0,Bt,1,u.x,u.y]);if(A<yc)Lt.push(["L",g.x,g.y]);else if(Ie>yc){var vr=hs(q,Ie),qn=hs(j,Ie),Tn=kg(C,M,0,0,A-o,qn),ln=kg(0,0,P,N,A-o,vr);if(Lt.push(["L",n+Tn.cx+Tn.x0,i+Tn.cy+Tn.y0]),Ie<X&&vr===qn){var Pa=ni(Tn.y0,Tn.x0),Ls=ni(ln.y0,ln.x0),Xr=ja(n,i,A,Ls);Lt.push(["A",ne,ne,0,Vs(Pa,Ls),1,Xr.x,Xr.y])}else{if(qn>0){var di=ni(Tn.y0,Tn.x0),kl=ni(Tn.y1,Tn.x1),co=ja(n,i,A-o,kl);Lt.push(["A",qn,qn,0,Vs(di,kl),1,co.x,co.y])}var wA=ni(Tn.cy+Tn.y1,Tn.cx+Tn.x1),uo=ni(ln.cy+ln.y1,ln.cx+ln.x1),Gi=ja(n,i,A,uo);if(Lt.push(["A",A,A,0,Vs(uo,wA),0,Gi.x,Gi.y]),Lt.push(["L",Gi.x,Gi.y]),vr>0){var ho=ni(ln.y1,ln.x1),Oa=ni(ln.y0,ln.x0);Lt.push(["A",vr,vr,0,Vs(ho,Oa),1,n+ln.cx+ln.x0,i+ln.cy+ln.y0])}}}else Lt.push(["L",g.x,g.y]),Lt.push(["A",A,A,0,Bt,0,h.x,h.y]);return Lt.push(["Z"]),Lt}}}])})(ci);wJ.PARSED_STYLE_LIST=new Set([].concat(Ft(ci.PARSED_STYLE_LIST),["x","y","sr","sr0","radius","startAngle","endAngle"]));const bJ={duration:500},_J={duration:1e3,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",iterations:1,fill:"both"};var Cn;(function(r){r.NodeAdded="NodeAdded",r.NodeUpdated="NodeUpdated",r.NodeRemoved="NodeRemoved",r.EdgeAdded="EdgeAdded",r.EdgeUpdated="EdgeUpdated",r.EdgeRemoved="EdgeRemoved",r.ComboAdded="ComboAdded",r.ComboUpdated="ComboUpdated",r.ComboRemoved="ComboRemoved"})(Cn||(Cn={}));var Oi;(function(r){r.DRAW="draw",r.COLLAPSE="collapse",r.EXPAND="expand",r.TRANSFORM="transform"})(Oi||(Oi={}));var ro;(function(r){r.CLICK="canvas:click",r.DBLCLICK="canvas:dblclick",r.POINTER_OVER="canvas:pointerover",r.POINTER_LEAVE="canvas:pointerleave",r.POINTER_ENTER="canvas:pointerenter",r.POINTER_MOVE="canvas:pointermove",r.POINTER_OUT="canvas:pointerout",r.POINTER_DOWN="canvas:pointerdown",r.POINTER_UP="canvas:pointerup",r.CONTEXT_MENU="canvas:contextmenu",r.DRAG_START="canvas:dragstart",r.DRAG="canvas:drag",r.DRAG_END="canvas:dragend",r.DRAG_ENTER="canvas:dragenter",r.DRAG_OVER="canvas:dragover",r.DRAG_LEAVE="canvas:dragleave",r.DROP="canvas:drop",r.WHEEL="canvas:wheel"})(ro||(ro={}));var JA;(function(r){r.CLICK="combo:click",r.DBLCLICK="combo:dblclick",r.POINTER_OVER="combo:pointerover",r.POINTER_LEAVE="combo:pointerleave",r.POINTER_ENTER="combo:pointerenter",r.POINTER_MOVE="combo:pointermove",r.POINTER_OUT="combo:pointerout",r.POINTER_DOWN="combo:pointerdown",r.POINTER_UP="combo:pointerup",r.CONTEXT_MENU="combo:contextmenu",r.DRAG_START="combo:dragstart",r.DRAG="combo:drag",r.DRAG_END="combo:dragend",r.DRAG_ENTER="combo:dragenter",r.DRAG_OVER="combo:dragover",r.DRAG_LEAVE="combo:dragleave",r.DROP="combo:drop"})(JA||(JA={}));var _e;(function(r){r.CLICK="click",r.DBLCLICK="dblclick",r.POINTER_OVER="pointerover",r.POINTER_LEAVE="pointerleave",r.POINTER_ENTER="pointerenter",r.POINTER_MOVE="pointermove",r.POINTER_OUT="pointerout",r.POINTER_DOWN="pointerdown",r.POINTER_UP="pointerup",r.CONTEXT_MENU="contextmenu",r.DRAG_START="dragstart",r.DRAG="drag",r.DRAG_END="dragend",r.DRAG_ENTER="dragenter",r.DRAG_OVER="dragover",r.DRAG_LEAVE="dragleave",r.DROP="drop",r.KEY_DOWN="keydown",r.KEY_UP="keyup",r.WHEEL="wheel",r.PINCH="pinch"})(_e||(_e={}));var Ec;(function(r){r.KEY_DOWN="keydown",r.KEY_UP="keyup"})(Ec||(Ec={}));var qp;(function(r){r.CLICK="edge:click",r.DBLCLICK="edge:dblclick",r.POINTER_OVER="edge:pointerover",r.POINTER_LEAVE="edge:pointerleave",r.POINTER_ENTER="edge:pointerenter",r.POINTER_MOVE="edge:pointermove",r.POINTER_OUT="edge:pointerout",r.POINTER_DOWN="edge:pointerdown",r.POINTER_UP="edge:pointerup",r.CONTEXT_MENU="edge:contextmenu",r.DRAG_ENTER="edge:dragenter",r.DRAG_OVER="edge:dragover",r.DRAG_LEAVE="edge:dragleave",r.DROP="edge:drop"})(qp||(qp={}));var Pe;(function(r){r.BEFORE_CANVAS_INIT="beforecanvasinit",r.AFTER_CANVAS_INIT="aftercanvasinit",r.BEFORE_SIZE_CHANGE="beforesizechange",r.AFTER_SIZE_CHANGE="aftersizechange",r.BEFORE_ELEMENT_CREATE="beforeelementcreate",r.AFTER_ELEMENT_CREATE="afterelementcreate",r.BEFORE_ELEMENT_UPDATE="beforeelementupdate",r.AFTER_ELEMENT_UPDATE="afterelementupdate",r.BEFORE_ELEMENT_DESTROY="beforeelementdestroy",r.AFTER_ELEMENT_DESTROY="afterelementdestroy",r.BEFORE_ELEMENT_TRANSLATE="beforeelementtranslate",r.AFTER_ELEMENT_TRANSLATE="afterelementtranslate",r.BEFORE_DRAW="beforedraw",r.AFTER_DRAW="afterdraw",r.BEFORE_RENDER="beforerender",r.AFTER_RENDER="afterrender",r.BEFORE_ANIMATE="beforeanimate",r.AFTER_ANIMATE="afteranimate",r.BEFORE_LAYOUT="beforelayout",r.AFTER_LAYOUT="afterlayout",r.BEFORE_STAGE_LAYOUT="beforestagelayout",r.AFTER_STAGE_LAYOUT="afterstagelayout",r.BEFORE_TRANSFORM="beforetransform",r.AFTER_TRANSFORM="aftertransform",r.BATCH_START="batchstart",r.BATCH_END="batchend",r.BEFORE_DESTROY="beforedestroy",r.AFTER_DESTROY="afterdestroy",r.BEFORE_RENDERER_CHANGE="beforerendererchange",r.AFTER_RENDERER_CHANGE="afterrendererchange"})(Pe||(Pe={}));var zo;(function(r){r.UNDO="undo",r.REDO="redo",r.CANCEL="cancel",r.ADD="add",r.CLEAR="clear",r.CHANGE="change"})(zo||(zo={}));var xa;(function(r){r.CLICK="node:click",r.DBLCLICK="node:dblclick",r.POINTER_OVER="node:pointerover",r.POINTER_LEAVE="node:pointerleave",r.POINTER_ENTER="node:pointerenter",r.POINTER_MOVE="node:pointermove",r.POINTER_OUT="node:pointerout",r.POINTER_DOWN="node:pointerdown",r.POINTER_UP="node:pointerup",r.CONTEXT_MENU="node:contextmenu",r.DRAG_START="node:dragstart",r.DRAG="node:drag",r.DRAG_END="node:dragend",r.DRAG_ENTER="node:dragenter",r.DRAG_OVER="node:dragover",r.DRAG_LEAVE="node:dragleave",r.DROP="node:drop"})(xa||(xa={}));const an="combo",ra="tree";var jd;(function(r){r.NODE="node",r.EDGE="edge",r.COMBO="combo",r.THEME="theme",r.PALETTE="palette",r.LAYOUT="layout",r.BEHAVIOR="behavior",r.PLUGIN="plugin",r.ANIMATION="animation",r.TRANSFORM="transform",r.SHAPE="shape"})(jd||(jd={}));const yx={animation:{},behavior:{},combo:{},edge:{},layout:{},node:{},palette:{},theme:{},plugin:{},transform:{},shape:{}};function io(r,e){var t;const n=(t=yx[r])===null||t===void 0?void 0:t[e];if(n)return n}const EJ="5.0.51",CJ="G6";function eo(r){return`[${CJ} v${EJ}] ${r}`}const ks={mute:!1,debug:r=>{console.debug(eo(r))},info:r=>{console.info(eo(r))},warn:r=>{console.warn(eo(r))},error:r=>{console.error(eo(r))}};function V4(r){const{theme:e}=r;if(!e)return{};const t=io(jd.THEME,e);return t||(ks.warn(`The theme of ${e} is not registered.`),{})}function F2(r,e){if(Array.isArray(r)&&r.length===0)return null;const t=Array.isArray(r)?r[0]:r,n=Array.isArray(r)?r.slice(1):e||[];return new Proxy(t,{get(i,a){return typeof i[a]=="function"&&!["onframe","onfinish"].includes(a)?(...s)=>{i[a](...s),n.forEach(o=>{var A;return(A=o[a])===null||A===void 0?void 0:A.call(o,...s)})}:a==="finished"?Promise.all([t.finished,...n.map(s=>s.finished)]):Reflect.get(i,a)},set(i,a,s){return["onframe","onfinish"].includes(a)||n.forEach(o=>{o[a]=s}),Reflect.set(i,a,s)}})}function wx(r){const e=r.reduce((n,i)=>(Object.entries(i).forEach(([a,s])=>{n[a]===void 0?n[a]=[s]:n[a].push(s)}),n),{});Object.entries(e).forEach(([n,i])=>{(i.length!==r.length||i.some(a=>it(a))||i.every(a=>!["sourceNode","targetNode","childrenNode"].includes(n)&&Qn(a,i[0])))&&delete e[n]});const t=Object.entries(e).reduce((n,[i,a])=>(a.forEach((s,o)=>{n[o]?n[o][i]=s:n[o]={[i]:s}}),n),[]);return r.length!==0&&t.length===0&&t.push({_:0},{_:0}),t}function Kd(r){switch(r){case"opacity":return 1;case"x":case"y":case"z":case"zIndex":return 0;case"visibility":return"visible";case"collapsed":return!1;case"states":return[];default:return}}function q4(r,e){const{animation:t}=r;if(t===!1||e===!1)return!1;const n=Object.assign({},bJ);return nr(t)&&Object.assign(n,t),nr(e)&&Object.assign(n,e),n}function BJ(r){if(typeof r=="string"){const e=io(jd.ANIMATION,r);return e||(ks.warn(`The animation of ${r} is not registered.`),[])}return r}function xJ(r,e,t,n){var i,a;const{animation:s}=r;if(s===!1||n===!1)return[];const o=(i=r==null?void 0:r[e])===null||i===void 0?void 0:i.animation;if(o===!1)return[];const A=o==null?void 0:o[t];if(A===!1)return[];const l=(a=V4(r)[e])===null||a===void 0?void 0:a.animation,c=(h=[])=>BJ(h).map(g=>Object.assign(Object.assign(Object.assign(Object.assign({},_J),nr(s)&&s),g),nr(n)&&n));if(A)return c(A);if(!l)return[];const u=l[t];return u===!1?[]:c(u)}function W4(r,e,t,n=[]){if(!n&&r===0&&e===0&&t===0)return null;if(Array.isArray(n)){let a=-1;const s=[];for(let o=0;o<n.length;o++){const A=n[o];if(A[0]==="translate"){if(A[1]===r&&A[2]===e)return null;a=o,s.push(["translate",r,e])}else if(A[0]==="translate3d"){if(A[1]===r&&A[2]===e&&A[3]===t)return null;a=o,s.push(["translate3d",r,e,t??0])}else s.push(A)}return a===-1&&s.splice(0,0,je(t)?["translate3d",r,e,t??0]:["translate",r,e]),s.length===0?null:s}const i=n?n.replace(/translate(3d)?\([^)]*\)/g,""):"";return t===0?`translate(${r}, ${e})${i}`:`translate3d(${r}, ${e}, ${t})${i}`}var SJ=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const TJ=(r,e,t)=>{if(!t.length)return null;const[n,i]=e,a=l=>{var c;if(l){const u=r.getShape(l);if(!u)return null;const h=`get${xp(l)}Style`,g=((c=r==null?void 0:r[h])===null||c===void 0?void 0:c.bind(r))||(m=>m),p=(g==null?void 0:g(n))||{},v=(g==null?void 0:g(i))||{};return{shape:u,fromStyle:p,toStyle:v}}else return{shape:r,fromStyle:n,toStyle:i}};let s;const o=t.map(l=>{var{fields:c,shape:u,states:h}=l,g=SJ(l,["fields","shape","states"]);const p=a(u);if(!p)return null;const{shape:v,fromStyle:m,toStyle:w}=p,b=[{},{}];if(c.forEach(C=>{var M,F;Object.assign(b[0],{[C]:(M=m[C])!==null&&M!==void 0?M:Kd(C)}),Object.assign(b[1],{[C]:(F=w[C])!==null&&F!==void 0?F:Kd(C)})}),b.some(C=>Object.keys(C).some(M=>["x","y","z"].includes(M)))){const{x:C=0,y:M=0,z:F,transform:k=""}=v.attributes||{};b.forEach(P=>{var N,D,Q;P.transform=W4((N=P.x)!==null&&N!==void 0?N:C,(D=P.y)!==null&&D!==void 0?D:M,(Q=P.z)!==null&&Q!==void 0?Q:F,k)})}const _=v.animate(wx(b),g);return u===void 0&&(s=_),_}).filter(Boolean),A=s||(o==null?void 0:o[0]);return A?F2(A,o.filter(l=>l!==l)):null},MJ=[{fields:["opacity"]}],FJ=[{fields:["x","y"]}],$4=[{fields:["x","y"]}],kJ=$4,Y4=[{fields:["sourceNode","targetNode"]}],IJ=Y4,X4=[{fields:["childrenNode","x","y"]}],PJ=X4;function OJ(r){return"source"in r&&"target"in r}function LJ(r){return r.length===2}function zc(r){return r instanceof Float32Array?!0:Array.isArray(r)&&(r.length===2||r.length===3)?r.every(e=>typeof e=="number"):!1}function Ss(r,e,t){return r>=e&&r<=t}function Fa(r=0){if(Array.isArray(r)){const[e=0,t=e,n=e,i=t]=r;return[e,t,n,i]}return[r,r,r,r]}function NJ(r=0){const e=Fa(r);return e[0]+e[2]}function Is(r){return r.max[0]-r.min[0]}function Ps(r){return r.max[1]-r.min[1]}function fA(r){return[Is(r),Ps(r)]}function Yo(r,e){const t=zc(r)?k2(r):r.getShape("key").getBounds();return e?gA(t,e):t}function k2(r){const[e,t,n=0]=r,i=new vn;return i.setMinMax([e,t,n],[e,t,n]),i}function gA(r,e){const[t,n,i,a]=Fa(e),[s,o,A]=r.min,[l,c,u]=r.max,h=new vn;return h.setMinMax([s-a,o-t,A],[l+n,c+i,u]),h}function uh(r){if(r.length===0)return new vn;if(r.length===1)return r[0];const e=new vn;e.setMinMax(r[0].min,r[0].max);for(let t=1;t<r.length;t++){const n=r[t];e.setMinMax([Math.min(e.min[0],n.min[0]),Math.min(e.min[1],n.min[1]),Math.min(e.min[2],n.min[2])],[Math.max(e.max[0],n.max[0]),Math.max(e.max[1],n.max[1]),Math.max(e.max[2],n.max[2])])}return e}function DJ(r,e){const[t,n]=r.min,[i,a]=r.max,[s,o]=e.min,[A,l]=e.max;return t>=s&&i<=A&&n>=o&&a<=l}function Ja(r,e){return Ss(r[0],e.min[0],e.max[0])&&Ss(r[1],e.min[1],e.max[1])}function Z4(r,e,t=!1){const{min:[n,i],max:[a,s]}=e,o=(r[1]===i||r[1]===s)&&(t||Ss(r[0],n,a)),A=(r[0]===n||r[0]===a)&&(t||Ss(r[1],i,s));return o||A}function RJ(r,e){return!Ja(r,e)}function Wp(r,e){const{center:t}=e;return r[0]===t[0]&&r[1]===t[1]}function Md(r,e){const[t,n]=r,[i,a]=e.min,[s,o]=e.max,A=t-i,l=s-t,c=n-a,u=o-n,h=Math.min(A,l,c,u);return h===A?"left":h===l?"right":h===c?"top":h===u?"bottom":"left"}function sl(r,e){const t=AA(r);if(Ja(r,e))switch(Md(r,e)){case"left":t[0]=e.min[0];break;case"right":t[0]=e.max[0];break;case"top":t[1]=e.min[1];break;case"bottom":t[1]=e.max[1];break}else{const[n,i]=r,[a,s]=e.min,[o,A]=e.max;t[0]=Ss(n,a,o)?n:n<a?a:o,t[1]=Ss(i,s,A)?i:i<s?s:A}return t}function QJ(r,e){const{center:t}=r,[n,i]=fA(r),a=e==="up"||e==="down"?t[0]:e==="right"?t[0]-n/6:t[0]+n/6,s=e==="left"||e==="right"?t[1]:e==="down"?t[1]-i/6:t[1]+i/6;return[a,s]}function UJ(r,e){let[t,n]=fA(r);return[t,n]=e==="up"||e==="down"?[t,n]:[n,t],(Math.pow(n,2)-Math.pow(Math.sqrt(Math.pow(t/2,2)+Math.pow(n,2))-t/2,2))/(2*n)}function HJ(r){const{min:[e,t],max:[n,i]}=r,a=[e,i],s=[n,i],o=[n,t],A=[e,t];return[[a,s],[s,o],[o,A],[A,a]]}var zJ=function(e,t){return e===t},uI=(function(){function r(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return r.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},r})(),jJ=(function(){function r(e){e===void 0&&(e=zJ),this.head=null,this.tail=null,this.compare=e}return r.prototype.prepend=function(e){var t=new uI(e,this.head);return this.head=t,this.tail||(this.tail=t),this},r.prototype.append=function(e){var t=new uI(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},r.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},r.prototype.find=function(e){var t=e.value,n=t===void 0?void 0:t,i=e.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var s=this.head;s;){if(a&&a(s.value)||n!==void 0&&this.compare(s.value,n))return s;s=s.next}return null},r.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},r.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},r.prototype.fromArray=function(e){var t=this;return e.forEach(function(n){return t.append(n)}),this},r.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},r.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},r.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},r})(),KJ=function(e,t,n){t===void 0&&(t=[]);var i=t.filter(function(A){return A.source===e||A.target===e});if(n==="target"){var a=function(l){return l.source===e};return i.filter(a).map(function(A){return A.target})}if(n==="source"){var s=function(l){return l.target===e};return i.filter(s).map(function(A){return A.source})}var o=function(l){return l.source===e?l.target:l.source};return i.map(o)},GJ=function(e,t){return t.filter(function(n){return n.source===e})},VJ=function(e,t){return t.filter(function(n){return n.source===e||n.target===e})},qJ=function(e){var t={},n=e.nodes,i=n===void 0?[]:n,a=e.edges,s=a===void 0?[]:a;return i.forEach(function(o){t[o.id]={degree:0,inDegree:0,outDegree:0}}),s.forEach(function(o){t[o.source].degree++,t[o.source].outDegree++,t[o.target].degree++,t[o.target].inDegree++}),t},WJ={}.toString,I2=function(r,e){return WJ.call(r)==="[object "+e+"]"};const J4=(function(r){return I2(r,"Function")}),eH=(function(r){return Array.isArray?Array.isArray(r):I2(r,"Array")}),$J=(function(r){var e=typeof r;return r!==null&&e==="object"||e==="function"});function YJ(r,e){if(r){var t;if(eH(r))for(var n=0,i=r.length;n<i&&(t=e(r[n],n),t!==!1);n++);else if($J(r)){for(var a in r)if(r.hasOwnProperty(a)&&(t=e(r[a],a),t===!1))break}}}const XJ=(function(r){return I2(r,"String")});var ZJ=Object.values?function(r){return Object.values(r)}:function(r){var e=[];return YJ(r,function(t,n){J4(r)&&n==="prototype"||e.push(t)}),e};const JJ=(function(r,e){if(!J4(r))throw new TypeError("Expected a function");var t=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=e?e.apply(this,n):n[0],s=t.cache;if(s.has(a))return s.get(a);var o=r.apply(this,n);return s.set(a,o),o};return t.cache=new Map,t});var Ig;JJ(function(r,e){e===void 0&&(e={});var t=e.fontSize,n=e.fontFamily,i=e.fontWeight,a=e.fontStyle,s=e.fontVariant;return Ig||(Ig=document.createElement("canvas").getContext("2d")),Ig.font=[a,s,i,t+"px",n].join(" "),Ig.measureText(XJ(r)?r:"").width},function(r,e){return e===void 0&&(e={}),GK([r],ZJ(e)).join("")});var eee=function(e,t,n){for(var i=1/0,a,s=0;s<t.length;s++){var o=t[s].id;!n[o]&&e[o]<=i&&(i=e[o],a=t[s])}return a},tee=function(e,t,n,i){var a=e.nodes,s=a===void 0?[]:a,o=e.edges,A=o===void 0?[]:o,l={},c={},u={};s.forEach(function(b,_){var C=b.id;c[C]=1/0,C===t&&(c[C]=0)});for(var h=s.length,g=function(_){var C=eee(c,s,l),M=C.id;if(l[M]=!0,c[M]===1/0)return"continue";var F=[];n?F=GJ(M,A):F=VJ(M,A),F.forEach(function(k){var P=k.target,N=k.source,D=P===M?N:P,Q=i&&k[i]?k[i]:1;c[D]>c[C.id]+Q?(c[D]=c[C.id]+Q,u[D]=[C.id]):c[D]===c[C.id]+Q&&u[D].push(C.id)})},p=0;p<h;p++)g();u[t]=[t];var v={};for(var m in c)c[m]!==1/0&&tH(t,m,u,v);var w={};for(var m in v)w[m]=v[m][0];return{length:c,path:w,allPath:v}};function tH(r,e,t,n){if(r===e)return[r];if(n[e])return n[e];for(var i=[],a=0,s=t[e];a<s.length;a++){var o=s[a],A=tH(r,o,t,n);if(!A)return;for(var l=0,c=A;l<c.length;l++){var u=c[l];eH(u)?i.push(Ze(Ze([],u,!0),[e],!1)):i.push([u,e])}}return n[e]=i,n[e]}var nH=function(e,t,n,i,a){var s=tee(e,t,i,a),o=s.length,A=s.path,l=s.allPath;return{length:o[n],path:A[n],allPath:l[n]}},dI;(function(r){r.EuclideanDistance="euclideanDistance"})(dI||(dI={}));var nee=function(e,t,n){typeof t!="number"&&(t=1e-6),typeof n!="number"&&(n=.85);for(var i=1,a=0,s=1e3,o=e.nodes,A=o===void 0?[]:o,l=e.edges,c=l===void 0?[]:l,u=A.length,h,g={},p={},v=0;v<u;++v){var m=A[v],w=m.id;g[w]=1/u,p[w]=1/u}for(var b=qJ(e);s>0&&i>t;){a=0;for(var v=0;v<u;++v){var m=A[v],w=m.id;if(h=0,b[m.id].inDegree===0)g[w]=0;else{for(var _=KJ(w,c,"source"),C=0;C<_.length;++C){var M=_[C],F=b[M].outDegree;F>0&&(h+=p[M]/F)}g[w]=n*h,a+=g[w]}}a=(1-a)/u,i=0;for(var v=0;v<u;++v){var m=A[v],w=m.id;h=g[w]+a,i+=Math.abs(h-p[w]),p[w]=h}s-=1}return p};(function(){function r(e){e===void 0&&(e=10),this.linkedList=new jJ,this.maxStep=e}return Object.defineProperty(r.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},r.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},r.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},r.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},r.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},r.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},r})();function he(r){if(r.id!==void 0)return r.id;if(r.source!==void 0&&r.target!==void 0)return`${r.source}-${r.target}`;throw new Error(eo("The datum does not have available id."))}function Pg(r){return r.combo}function rH(r,e){const t={nodes:(r.nodes||[]).map(he),edges:(r.edges||[]).map(he),combos:(r.combos||[]).map(he)};return e?Object.values(t).flat():t}const iH=(r,e,t)=>{var n;switch(t.type){case"degree":{const i=new Map;return(n=r.nodes)===null||n===void 0||n.forEach(a=>{const s=e(he(a),t.direction).length;i.set(he(a),s)}),i}case"betweenness":return ree(r,t.directed,t.weightPropertyName);case"closeness":return iee(r,t.directed,t.weightPropertyName);case"eigenvector":return see(r,t.directed);case"pagerank":return aee(r,t.epsilon,t.linkProb);default:return aH(r)}},aH=r=>{var e;const t=new Map;return(e=r.nodes)===null||e===void 0||e.forEach(n=>{t.set(he(n),0)}),t},ree=(r,e,t)=>{const n=aH(r),{nodes:i=[]}=r;return i.forEach(a=>{i.forEach(s=>{if(a!==s){const{allPath:o}=nH(r,he(a),he(s),e,t),A=o.length;o.flat().forEach(l=>{l!==he(a)&&l!==he(s)&&n.set(l,n.get(l)+1/A)})}})}),n},iee=(r,e,t)=>{const n=new Map,{nodes:i=[]}=r;return i.forEach(a=>{const s=i.reduce((o,A)=>{if(a!==A){const{length:l}=nH(r,he(a),he(A),e,t);o+=l}return o},0);n.set(he(a),1/s)}),n},aee=(r,e,t)=>{var n;const i=new Map,a=nee(r,e,t);return(n=r.nodes)===null||n===void 0||n.forEach(s=>{i.set(he(s),a[he(s)])}),i},see=(r,e)=>{const{nodes:t=[]}=r,n=oee(r,e),i=Aee(n,t.length),a=new Map;return t.forEach((s,o)=>{a.set(he(s),i[o])}),a},oee=(r,e)=>{const{nodes:t=[],edges:n=[]}=r,i=Array(t.length).fill(null).map(()=>Array(t.length).fill(0));return n.forEach(({source:a,target:s})=>{const o=t.findIndex(l=>he(l)===a),A=t.findIndex(l=>he(l)===s);e?i[o][A]=1:(i[o][A]=1,i[A][o]=1)}),i},Aee=(r,e,t=100,n=1e-6)=>{let i=Array(e).fill(1),a=1/0;for(let s=0;s<t&&a>n;s++){const o=Array(e).fill(0);for(let l=0;l<e;l++)for(let c=0;c<e;c++)o[l]+=r[l][c]*i[c];const A=Math.sqrt(o.reduce((l,c)=>l+c*c,0));for(let l=0;l<e;l++)o[l]/=A;a=Math.sqrt(o.reduce((l,c,u)=>l+(c-i[u])*c,0)),i=o}return i};function aA(r,e,t,n=Qn){const i=new Map(r.map(h=>[t(h),h])),a=new Map(e.map(h=>[t(h),h])),s=new Set(i.keys()),o=new Set(a.keys()),A=[],l=[],c=[],u=[];return o.forEach(h=>{s.has(h)?n(i.get(h),a.get(h))?u.push(a.get(h)):l.push(a.get(h)):A.push(a.get(h))}),s.forEach(h=>{o.has(h)||c.push(i.get(h))}),{enter:A,exit:c,keep:u,update:l}}function gl(r,e,t){const n=i=>{t&&!t(i)||(i.style.visibility=e)};r.forEach(i=>{n(i)})}function lee(r,e,t){const n={},i=a=>(a in n||(n[a]=0),`${e}-${a}-${n[a]++}`);return t.map(a=>typeof a=="string"?{type:a,key:i(a)}:typeof a=="function"?a.call(r):a.key?a:Object.assign(Object.assign({},a),{key:i(a.type)}))}class P2{constructor(e){this.extensions=[],this.extensionMap={},this.context=e}setExtensions(e){const t=lee(this.context.graph,this.category,e),{enter:n,update:i,exit:a,keep:s}=aA(this.extensions,t,o=>o.key);this.createExtensions(n),this.updateExtensions([...i,...s]),this.destroyExtensions(a),this.extensions=t}createExtension(e){const{category:t}=this,{key:n,type:i}=e,a=io(t,i);if(!a)return ks.warn(`The extension ${i} of ${t} is not registered.`);const s=new a(this.context,e);s.initialized=!0,this.extensionMap[n]=s}createExtensions(e){e.forEach(t=>this.createExtension(t))}updateExtension(e){const{key:t}=e,n=this.extensionMap[t];n&&n.update(e)}updateExtensions(e){e.forEach(t=>this.updateExtension(t))}destroyExtension(e){const t=this.extensionMap[e];t&&(t.initialized&&!t.destroyed&&t.destroy(),delete this.extensionMap[e])}destroyExtensions(e){e.forEach(({key:t})=>this.destroyExtension(t))}destroy(){this.destroyExtensions(this.extensions),this.context={},this.extensions=[],this.extensionMap={}}}class O2{constructor(e,t){this.events=[],this.initialized=!1,this.destroyed=!1,this.context=e,this.options=t}update(e){this.options=Object.assign(this.options,e)}destroy(){this.context={},this.options={},this.destroyed=!0}}class Aa extends O2{}class kv extends Aa{constructor(e,t){super(e,Object.assign({},kv.defaultOptions,t)),this.isOverlapping=(n,i)=>i.some(a=>n.intersects(a)),this.occupiedBounds=[],this.detectLabelCollision=n=>{const i=this.context.viewport,a={show:[],hide:[]};return this.occupiedBounds=[],n.forEach(s=>{const o=s.getShape("label").getRenderBounds();i.isInViewport(o,!0)&&!this.isOverlapping(o,this.occupiedBounds)?(a.show.push(s),this.occupiedBounds.push(gA(o,this.options.padding))):a.hide.push(s)}),a},this.hideLabelIfExceedViewport=(n,i)=>{const{exit:a}=aA(n,i,s=>s.id);a==null||a.forEach(this.hideLabel)},this.nodeCentralities=new Map,this.sortNodesByCentrality=(n,i)=>{const{model:a}=this.context,s=a.getData(),o=a.getRelatedEdgesData.bind(a);return n.map(l=>(this.nodeCentralities.has(l.id)||(this.nodeCentralities=iH(s,o,i)),{node:l,centrality:this.nodeCentralities.get(l.id)})).sort((l,c)=>c.centrality-l.centrality).map(l=>l.node)},this.sortLabelElementsInView=n=>{const{sort:i,sortNode:a,sortCombo:s,sortEdge:o}=this.options,{model:A}=this.context;if($e(i))return n.sort((v,m)=>i(A.getElementDataById(v.id),A.getElementDataById(m.id)));const{node:l=[],edge:c=[],combo:u=[]}=fv(n,v=>v.type),h=$e(s)?u.sort((v,m)=>s(...A.getComboData([v.id,m.id]))):u,g=$e(a)?l.sort((v,m)=>a(...A.getNodeData([v.id,m.id]))):this.sortNodesByCentrality(l,a),p=$e(o)?c.sort((v,m)=>o(...A.getEdgeData([v.id,m.id]))):c;return[...h,...g,...p]},this.labelElementsInView=[],this.isFirstRender=!0,this.onToggleVisibility=n=>{var i;if(((i=n.data)===null||i===void 0?void 0:i.stage)==="zIndex")return;if(!this.validate(n)){this.hiddenElements.size>0&&(this.hiddenElements.forEach(this.showLabel),this.hiddenElements.clear());return}const a=this.isFirstRender?this.getLabelElements():this.getLabelElementsInView();this.hideLabelIfExceedViewport(this.labelElementsInView,a),this.labelElementsInView=a;const s=this.sortLabelElementsInView(this.labelElementsInView),{show:o,hide:A}=this.detectLabelCollision(s);for(let l=o.length-1;l>=0;l--)this.showLabel(o[l]);A.forEach(this.hideLabel)},this.hiddenElements=new Map,this.hideLabel=n=>{const i=n.getShape("label");i&&gl(i,"hidden"),this.hiddenElements.set(n.id,n)},this.showLabel=n=>{const i=n.getShape("label");i&&gl(i,"visible"),n.toFront(),this.hiddenElements.delete(n.id)},this.onTransform=zQ(this.onToggleVisibility,this.options.throttle,{leading:!0}),this.enableToggle=!0,this.toggle=n=>{this.enableToggle&&this.onToggleVisibility(n)},this.onBeforeRender=()=>{this.enableToggle=!1},this.onAfterRender=n=>{this.onToggleVisibility(n),this.enableToggle=!0},this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents(),this.onToggleVisibility({})}getLabelElements(){const{elementMap:e}=this.context.element,t=[];for(const n in e){const i=e[n];i.isVisible()&&i.getShape("label")&&t.push(i)}return t}getLabelElementsInView(){const e=this.context.viewport;return this.getLabelElements().filter(t=>e.isInViewport(t.getShape("key").getRenderBounds()))}bindEvents(){const{graph:e}=this.context;e.on(Pe.BEFORE_RENDER,this.onBeforeRender),e.on(Pe.AFTER_RENDER,this.onAfterRender),e.on(Pe.AFTER_DRAW,this.toggle),e.on(Pe.AFTER_LAYOUT,this.toggle),e.on(Pe.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:e}=this.context;e.off(Pe.BEFORE_RENDER,this.onBeforeRender),e.off(Pe.AFTER_RENDER,this.onAfterRender),e.off(Pe.AFTER_DRAW,this.toggle),e.off(Pe.AFTER_LAYOUT,this.toggle),e.off(Pe.AFTER_TRANSFORM,this.onTransform)}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return $e(t)?t(e):!!t}destroy(){this.unbindEvents(),super.destroy()}}kv.defaultOptions={enable:!0,throttle:100,padding:0,sortNode:{type:"degree"}};const hI=[0,0,0];function mt(r,e){return r.map((t,n)=>t+e[n])}function rn(r,e){return r.map((t,n)=>t-e[n])}function $a(r,e){return typeof e=="number"?r.map(t=>t*e):r.map((t,n)=>t*e[n])}function es(r,e){return typeof e=="number"?r.map(t=>t/e):r.map((t,n)=>t/e[n])}function cee(r,e){return r.reduce((t,n,i)=>t+n*e[i],0)}function uee(r,e){const t=Gd(r),n=Gd(e);return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Xo(r,e){return r.map(t=>t*e)}function yn(r,e){return Math.sqrt(r.reduce((t,n,i)=>t+Math.pow(n-e[i]||0,2),0))}function $p(r,e){return r.reduce((t,n,i)=>t+Math.abs(n-e[i]),0)}function no(r){const e=r.reduce((t,n)=>t+Math.pow(n,2),0);return r.map(t=>t/Math.sqrt(e))}function L2(r,e,t=!1){const n=r[0]*e[1]-r[1]*e[0];let i=Math.acos($a(r,e).reduce((a,s)=>a+s,0)/(yn(r,hI)*yn(e,hI)));return t&&n<0&&(i=2*Math.PI-i),i}function Iv(r,e=!0){return e?[-r[1],r[0]]:[r[1],-r[0]]}function F1(r,e){return r.map(t=>t%e)}function pl(r){return[r[0],r[1]]}function Gd(r){return LJ(r)?[r[0],r[1],0]:r}function sH(r){const[e,t]=r;return!e&&!t?0:Math.atan2(t,e)}function oH(r,e){const[t,n]=r;if(e%360===0)return[t,n];const i=e*Math.PI/180,a=Math.cos(i),s=Math.sin(i);return[t*a-n*s,t*s+n*a]}function AH(r,e){const[t,n]=r,[i,a]=e,s=rn(t,n),o=rn(i,a);return uee(s,o).every(A=>A===0)}function N2(r,e,t=!1){if(AH(r,e))return;const[n,i]=r,[a,s]=e,o=((n[0]-a[0])*(a[1]-s[1])-(n[1]-a[1])*(a[0]-s[0]))/((n[0]-i[0])*(a[1]-s[1])-(n[1]-i[1])*(a[0]-s[0])),A=s[0]-a[0]?(n[0]-a[0]+o*(i[0]-n[0]))/(s[0]-a[0]):(n[1]-a[1]+o*(i[1]-n[1]))/(s[1]-a[1]);if(!(!t&&(!Ss(o,0,1)||!Ss(A,0,1))))return[n[0]+o*(i[0]-n[0]),n[1]+o*(i[1]-n[1])]}function lH(r){if(Array.isArray(r))return Ss(r[0],0,1)&&Ss(r[1],0,1)?r:[.5,.5];const e=r.split("-"),t=e.includes("left")?0:e.includes("right")?1:.5,n=e.includes("top")?0:e.includes("bottom")?1:.5;return[t,n]}function Cr(r){const{x:e=0,y:t=0,z:n=0}=r.style||{};return[+e,+t,+n]}function dee(r){const{x:e,y:t,z:n}=r.style||{};return e!==void 0||t!==void 0||n!==void 0}function hee(r,e){const[t,n]=e,{min:i,max:a}=r;return[i[0]+t*(a[0]-i[0]),i[1]+n*(a[1]-i[1])]}function Ys(r,e="center"){const t=lH(e);return hee(r,t)}function Gr(r){var e;return[r.x,r.y,(e=r.z)!==null&&e!==void 0?e:0]}function Ya(r){var e;return{x:r[0],y:r[1],z:(e=r[2])!==null&&e!==void 0?e:0}}function Zu(r,e=0){return r.map(t=>parseFloat(t.toFixed(e)))}function sA(r,e,t,n=!1){if(Qn(r,e))return r;const i=n?rn(r,e):rn(e,r),a=no(i),s=[a[0]*t,a[1]*t];return mt(pl(r),s)}function cH(r,e){return r[1]===e[1]}function fee(r,e){return r[0]===e[0]}function gee(r,e){return cH(r,e)||fee(r,e)}function uH(r,e,t){return AH([r,e],[e,t])}function dH(r,e){return[2*e[0]-r[0],2*e[1]-r[1]]}function hH(r,e,t,n=!0,i=!1){for(let a=0;a<t.length;a++){let s=t[a],o=t[(a+1)%t.length];n&&(s=mt(e,s),o=mt(e,o));const A=i?dH(r,e):r,l=N2([e,A],[s,o]);if(l)return{point:l,line:[s,o]}}return{point:e,line:void 0}}function pee(r,e,t,n){const i=r[0],a=r[1];let s=!1;t===void 0&&(t=0),n===void 0&&(n=e.length);const o=n-t;for(let A=0,l=o-1;A<o;l=A++){const c=e[A+t][0],u=e[A+t][1],h=e[l+t][0],g=e[l+t][1];u>a!=g>a&&i<(h-c)*(a-u)/(g-u)+c&&(s=!s)}return s}function vee(r,e,t=!1){const n=Ys(e,"center"),i=[Ys(e,"left-top"),Ys(e,"right-top"),Ys(e,"right-bottom"),Ys(e,"left-bottom")];return hH(r,n,i,!1,t).point}function Pv(r,e,t=!1){const n=e.center,i=t?dH(r,n):r,a=rn(i,e.center),s=Math.atan2(a[1],a[0]);if(isNaN(s))return n;const o=Is(e)/2,A=Ps(e)/2,l=n[0]+o*Math.cos(s),c=n[1]+A*Math.sin(s);return[l,c]}function mee(r,e){let t=1/0,n=[r[0],e[0]];return r.forEach(i=>{e.forEach(a=>{const s=yn(i,a);s<t&&(t=s,n=[i,a])})}),n}function yee(r,e){let t=1/0,n=[[0,0],[0,0]];return e.forEach(i=>{const a=wee(r,i);a<t&&(t=a,n=i)}),n}function wee(r,e){const t=fH(r,e);return yn(r,t)}function fH(r,e){const[t,n]=e[0],[i,a]=e[1],[s,o]=r,A=i-t,l=a-n;if(A===0&&l===0)return[t,n];let c=((s-t)*A+(o-n)*l)/(A*A+l*l);c>1?c=1:c<0&&(c=0);const u=t+c*A,h=n+c*l;return[u,h]}function bee(r){const e=r.reduce((t,n)=>mt(t,n),[0,0]);return es(e,r.length)}function D2(r,e=!0){const t=bee(r);return r.sort(([n,i],[a,s])=>{const o=Math.atan2(i-t[1],n-t[0]),A=Math.atan2(s-t[1],a-t[0]);return e?A-o:o-A})}function fI(r,e){return[r,[r[0],e[1]],e,[e[0],r[1]]]}class er{constructor(e,t,n){if(this.phase=t,this.pointerByTouch=[],this.initialDistance=null,this.emitter=e,er.instance)return er.callbacks[this.phase].push(n),er.instance;this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.bindEvents(),er.instance=this,er.callbacks[this.phase].push(n)}bindEvents(){const{emitter:e}=this;e.on(_e.POINTER_DOWN,this.onPointerDown),e.on(_e.POINTER_MOVE,this.onPointerMove),e.on(_e.POINTER_UP,this.onPointerUp)}updatePointerPosition(e,t,n){const i=this.pointerByTouch.findIndex(a=>a.pointerId===e);i>=0&&(this.pointerByTouch[i]={x:t,y:n,pointerId:e})}onPointerDown(e){const{x:t,y:n}=e.client||{};if(!(t===void 0||n===void 0)&&(this.pointerByTouch.push({x:t,y:n,pointerId:e.pointerId}),e.pointerType==="touch"&&this.pointerByTouch.length===2)){er.isPinching=!0;const i=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y;this.initialDistance=Math.sqrt(i*i+a*a),er.callbacks.pinchstart.forEach(s=>s(e,{scale:0}))}}onPointerMove(e){if(this.pointerByTouch.length!==2||this.initialDistance===null)return;const{x:t,y:n}=e.client||{};if(t===void 0||n===void 0)return;this.updatePointerPosition(e.pointerId,t,n);const i=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y,o=Math.sqrt(i*i+a*a)/this.initialDistance;er.callbacks.pinchmove.forEach(A=>A(e,{scale:(o-1)*5}))}onPointerUp(e){var t;er.callbacks.pinchend.forEach(n=>n(e,{scale:0})),er.isPinching=!1,this.initialDistance=null,this.pointerByTouch=[],(t=er.instance)===null||t===void 0||t.tryDestroy()}destroy(){this.emitter.off(_e.POINTER_DOWN,this.onPointerDown),this.emitter.off(_e.POINTER_MOVE,this.onPointerMove),this.emitter.off(_e.POINTER_UP,this.onPointerUp),er.instance=null}off(e,t){const n=er.callbacks[e].indexOf(t);n>-1&&er.callbacks[e].splice(n,1),this.tryDestroy()}tryDestroy(){Object.values(er.callbacks).every(e=>e.length===0)&&this.destroy()}}er.isPinching=!1;er.instance=null;er.callbacks={pinchstart:[],pinchmove:[],pinchend:[]};const gI=r=>r.map(e=>Rt(e)?e.toLocaleLowerCase():e);class pA{constructor(e){this.map=new Map,this.boundHandlePinch=()=>{},this.recordKey=new Set,this.onKeyDown=t=>{t!=null&&t.key&&(this.recordKey.add(t.key),this.trigger(t))},this.onKeyUp=t=>{t!=null&&t.key&&this.recordKey.delete(t.key)},this.onWheel=t=>{this.triggerExtendKey(_e.WHEEL,t)},this.onDrag=t=>{this.triggerExtendKey(_e.DRAG,t)},this.handlePinch=(t,n)=>{this.triggerExtendKey(_e.PINCH,Object.assign(Object.assign({},t),n))},this.onFocus=()=>{this.recordKey.clear()},this.emitter=e,this.bindEvents()}bind(e,t){e.length!==0&&(e.includes(_e.PINCH)&&!this.pinchHandler&&(this.boundHandlePinch=this.handlePinch.bind(this),this.pinchHandler=new er(this.emitter,"pinchmove",this.boundHandlePinch)),this.map.set(e,t))}unbind(e,t){this.map.forEach((n,i)=>{Qn(i,e)&&(!t||t===n)&&this.map.delete(i)})}unbindAll(){this.map.clear()}match(e){const t=gI(Array.from(this.recordKey)).sort(),n=gI(e).sort();return Qn(t,n)}bindEvents(){var e;const{emitter:t}=this;t.on(_e.KEY_DOWN,this.onKeyDown),t.on(_e.KEY_UP,this.onKeyUp),t.on(_e.WHEEL,this.onWheel),t.on(_e.DRAG,this.onDrag),(e=globalThis.addEventListener)===null||e===void 0||e.call(globalThis,"focus",this.onFocus)}trigger(e){this.map.forEach((t,n)=>{this.match(n)&&t(e)})}triggerExtendKey(e,t){this.map.forEach((n,i)=>{i.includes(e)&&Qn(Array.from(this.recordKey),i.filter(a=>a!==e))&&n(t)})}destroy(){var e,t;this.unbindAll(),this.emitter.off(_e.KEY_DOWN,this.onKeyDown),this.emitter.off(_e.KEY_UP,this.onKeyUp),this.emitter.off(_e.WHEEL,this.onWheel),this.emitter.off(_e.DRAG,this.onDrag),(e=this.pinchHandler)===null||e===void 0||e.off("pinchmove",this.boundHandlePinch),(t=globalThis.removeEventListener)===null||t===void 0||t.call(globalThis,"focus",this.onFocus)}}class dh extends Aa{constructor(e,t){super(e,qr({},dh.defaultOptions,t)),this.shortcut=new pA(e.graph),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.clearStates=this.clearStates.bind(this),this.bindEvents()}onPointerDown(e){if(!this.validate(e)||!this.isKeydown()||this.startPoint)return;const{canvas:t,graph:n}=this.context,i=Object.assign({},this.options.style);this.options.style.lineWidth&&(i.lineWidth=+this.options.style.lineWidth/n.getZoom()),this.rectShape=new Wr({id:"g6-brush-select",style:i}),t.appendChild(this.rectShape),this.startPoint=[e.canvas.x,e.canvas.y]}onPointerMove(e){var t;if(!this.startPoint)return;const{immediately:n,mode:i}=this.options;this.endPoint=Yp(e,this.context.graph),(t=this.rectShape)===null||t===void 0||t.attr({x:Math.min(this.endPoint[0],this.startPoint[0]),y:Math.min(this.endPoint[1],this.startPoint[1]),width:Math.abs(this.endPoint[0]-this.startPoint[0]),height:Math.abs(this.endPoint[1]-this.startPoint[1])}),n&&i==="default"&&this.updateElementsStates(fI(this.startPoint,this.endPoint))}onPointerUp(e){if(this.startPoint){if(!this.endPoint){this.clearBrush();return}this.endPoint=Yp(e,this.context.graph),this.updateElementsStates(fI(this.startPoint,this.endPoint)),this.clearBrush()}}clearStates(){this.endPoint||this.clearElementsStates()}clearElementsStates(){const{graph:e}=this.context,t=Object.values(e.getData()).reduce((n,i)=>Object.assign({},n,i.reduce((a,s)=>{var o;const A=(o=s.states||[])===null||o===void 0?void 0:o.filter(l=>l!==this.options.state);return a[he(s)]=A,a},{})),{});e.setElementState(t,this.options.animation)}updateElementsStates(e){const{graph:t}=this.context,{enableElements:n,state:i,mode:a,onSelect:s}=this.options,o=this.selector(t,e,n),A={};switch(a){case"union":o.forEach(l=>{A[l]=[...t.getElementState(l),i]});break;case"diff":o.forEach(l=>{const c=t.getElementState(l);A[l]=c.includes(i)?c.filter(u=>u!==i):[...c,i]});break;case"intersect":o.forEach(l=>{const c=t.getElementState(l);A[l]=c.includes(i)?[i]:[]});break;case"default":default:o.forEach(l=>{A[l]=[i]});break}$e(s)&&s(A),t.setElementState(A,this.options.animation)}selector(e,t,n){if(!n||n.length===0)return[];const i=[],a=e.getData();if(n.forEach(s=>{a[`${s}s`].forEach(o=>{const A=he(o);e.getElementVisibility(A)!=="hidden"&&pee(e.getElementPosition(A),t)&&i.push(A)})}),n.includes("edge")){const s=a.edges;s==null||s.forEach(o=>{const{source:A,target:l}=o;i.includes(A)&&i.includes(l)&&i.push(he(o))})}return i}clearBrush(){var e;(e=this.rectShape)===null||e===void 0||e.remove(),this.rectShape=void 0,this.startPoint=void 0,this.endPoint=void 0}isKeydown(){const{trigger:e}=this.options,t=Array.isArray(e)?e:[e];return this.shortcut.match(t.filter(n=>n!=="drag"))}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return $e(t)?t(e):!!t}bindEvents(){const{graph:e}=this.context;e.on(_e.POINTER_DOWN,this.onPointerDown),e.on(_e.POINTER_MOVE,this.onPointerMove),e.on(_e.POINTER_UP,this.onPointerUp),e.on(ro.CLICK,this.clearStates)}unbindEvents(){const{graph:e}=this.context;e.off(_e.POINTER_DOWN,this.onPointerDown),e.off(_e.POINTER_MOVE,this.onPointerMove),e.off(_e.POINTER_UP,this.onPointerUp),e.off(ro.CLICK,this.clearStates)}update(e){this.unbindEvents(),this.options=qr(this.options,e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}dh.defaultOptions={animation:!1,enable:!0,enableElements:["node","combo","edge"],immediately:!1,mode:"default",state:"selected",trigger:["shift"],style:{width:0,height:0,lineWidth:1,fill:"#1677FF",stroke:"#1677FF",fillOpacity:.1,zIndex:2,pointerEvents:"none"}};const Yp=(r,e)=>{if((r.targetType==="node"||r.targetType==="combo")&&!(r.nativeEvent.target instanceof HTMLCanvasElement)){const[t,n]=e.getCanvasByClient([r.client.x,r.client.y]);return[t,n]}return[r.canvas.x,r.canvas.y]},ao=.8,vl=["node","edge","combo"];function Oc(r,e,t,n,i=0){n==="TB"&&e(r,i);const a=t(r);if(a)for(const s of a)Oc(s,e,t,n,i+1);n==="BT"&&e(r,i)}function _ee(r,e,t){const n=[[r,0]];for(;n.length;){const[i,a]=n.shift();e(i,a);const s=t(i);if(s)for(const o of s)n.push([o,a+1])}}function gH(r,e,t,n,i="both"){if(e==="combo"||e==="node")return k1(r,t,n,i);const a=r.getEdgeData(t);if(!a)return[];const s=k1(r,a.source,n-1,i),o=k1(r,a.target,n-1,i);return Array.from(new Set([...s,...o,t]))}function k1(r,e,t,n="both"){const i=new Set,a=new Set,s=new Set;return _ee(e,(o,A)=>{A>t||(s.add(o),r.getRelatedEdgesData(o,n).forEach(l=>{const c=he(l);!a.has(c)&&A<t&&(s.add(c),a.add(c))}))},o=>r.getRelatedEdgesData(o,n).map(A=>A.source===o?A.target:A.source).filter(A=>i.has(A)?!1:(i.add(A),!0))),Array.from(s)}function I1(r){return r.states||[]}var Og=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class Ov extends Aa{constructor(e,t){super(e,Object.assign({},Ov.defaultOptions,t)),this.onClickSelect=n=>Og(this,void 0,void 0,function*(){var i,a;this.validate(n)&&(yield this.updateState(n),(a=(i=this.options).onClick)===null||a===void 0||a.call(i,n))}),this.onClickCanvas=n=>Og(this,void 0,void 0,function*(){var i,a;this.validate(n)&&(yield this.clearState(),(a=(i=this.options).onClick)===null||a===void 0||a.call(i,n))}),this.shortcut=new pA(e.graph),this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),vl.forEach(t=>{e.on(`${t}:${_e.CLICK}`,this.onClickSelect)}),e.on(ro.CLICK,this.onClickCanvas)}get isMultipleSelect(){const{multiple:e,trigger:t}=this.options;return e&&this.shortcut.match(t)}getNeighborIds(e){const{target:t,targetType:n}=e,{graph:i}=this.context,{degree:a}=this.options;return gH(i,n,t.id,typeof a=="function"?a(e):a).filter(s=>s!==t.id)}updateState(e){return Og(this,void 0,void 0,function*(){const{state:t,unselectedState:n,neighborState:i,animation:a}=this.options;if(!t&&!i&&!n)return;const{target:s}=e,{graph:o}=this.context,A=o.getElementData(s.id),l=I1(A).includes(t)?"unselect":"select",c={},u=this.isMultipleSelect,h=[s.id],g=this.getNeighborIds(e);if(u)if(Object.assign(c,this.getDataStates()),l==="select"){const p=(v,m)=>{v.forEach(w=>{const b=new Set(o.getElementState(w));b.add(m),b.delete(n),c[w]=Array.from(b)})};p(h,t),p(g,i),n&&Object.keys(c).forEach(v=>{const m=c[v];!m.includes(t)&&!m.includes(i)&&!m.includes(n)&&c[v].push(n)})}else{const p=c[s.id];c[s.id]=p.filter(v=>v!==t&&v!==i),p.includes(n)||c[s.id].push(n),g.forEach(v=>{c[v]=c[v].filter(m=>m!==i),c[v].includes(t)||c[v].push(n)})}else if(l==="select"){Object.assign(c,this.getClearStates(!!n));const p=(v,m)=>{v.forEach(w=>{c[w]||(c[w]=o.getElementState(w)),c[w].push(m)})};p(h,t),p(g,i),n&&Object.keys(c).forEach(v=>{!h.includes(v)&&!g.includes(v)&&c[v].push(n)})}else Object.assign(c,this.getClearStates());yield o.setElementState(c,a)})}getDataStates(){const{graph:e}=this.context,{nodes:t,edges:n,combos:i}=e.getData(),a={};return[...t,...n,...i].forEach(s=>{a[he(s)]=I1(s)}),a}getClearStates(e=!1){const{graph:t}=this.context,{state:n,unselectedState:i,neighborState:a}=this.options,s=new Set([n,i,a]),{nodes:o,edges:A,combos:l}=t.getData(),c={};return[...o,...A,...l].forEach(u=>{const h=I1(u),g=h.filter(p=>!s.has(p));(e||g.length!==h.length)&&(c[he(u)]=g)}),c}clearState(){return Og(this,void 0,void 0,function*(){const{graph:e}=this.context;yield e.setElementState(this.getClearStates(),this.options.animation)})}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return $e(t)?t(e):!!t}unbindEvents(){const{graph:e}=this.context;vl.forEach(t=>{e.off(`${t}:${_e.CLICK}`,this.onClickSelect)}),e.off(ro.CLICK,this.onClickCanvas)}destroy(){this.unbindEvents(),super.destroy()}}Ov.defaultOptions={animation:!0,enable:!0,multiple:!1,trigger:["shift"],state:"selected",neighborState:"selected",unselectedState:void 0,degree:0};function Qi(r){var e;return!!(!((e=r.style)===null||e===void 0)&&e.collapsed)}function Xp(r,e){if(!r.startsWith(e))return!1;const t=r[e.length];return t>="A"&&t<="Z"}function Eee(r,e){return`${e}${xp(r)}`}function Cee(r,e,t=!0){if(!e||!Xp(r,e))return r;const n=r.slice(e.length);return t?MK(n):n}function Gn(r,e){const t=Object.entries(r).reduce((n,[i,a])=>(i==="className"||i==="class"||Xp(i,e)&&Object.assign(n,{[Cee(i,e)]:a}),n),{});if("opacity"in r){const n=Eee("opacity",e),i=r.opacity;if(n in r){const a=r[n];Object.assign(t,{opacity:i*a})}else Object.assign(t,{opacity:i})}return t}function bx(r,e){const t=e.length;return Object.keys(r).reduce((n,i)=>{if(i.startsWith(e)){const a=i.slice(t);n[a]=r[i]}return n},{})}function pH(r,e){const t=typeof e=="string"?[e]:e,n={};return Object.keys(r).forEach(i=>{t.find(a=>i.startsWith(a))||(n[i]=r[i])}),n}function sa(r=0){if(typeof r=="number")return[r,r,r];const[e,t=e,n=e]=r;return[e,t,n]}var Bee=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function pI(r,e){const{datum:t,graph:n}=e;return typeof r=="function"?r.call(n,t):Object.fromEntries(Object.entries(r).map(([i,a])=>typeof a=="function"?[i,a.call(n,t)]:[i,a]))}function Nr(r,e){const t=(r==null?void 0:r.style)||{},n=(e==null?void 0:e.style)||{};for(const i in t)i in n||(n[i]=t[i]);return Object.assign({},r,e,{style:n})}function xee(r){const{x:e,y:t,z:n,class:i,className:a,transform:s,transformOrigin:o,zIndex:A,visibility:l}=r;return Bee(r,["x","y","z","class","className","transform","transformOrigin","zIndex","visibility"])}function See(r,e){const t=sa(r);let n={};return e.text&&!e.fontSize&&(n={fontSize:Math.min(...t)*.5}),e.src&&(!e.width||!e.height)&&(n={width:t[0]*.5,height:t[1]*.5}),n}function vI(r){if(r)return typeof r=="string"||typeof r=="function"||Array.isArray(r)?{type:"group",field:e=>e.id,color:r,invert:!1}:r}function Tee(r,e){if(!e)return{};const{type:t,color:n,field:i,invert:a}=e,s=A=>{const l=typeof n=="string"?io("palette",n):n;if(typeof l=="function"){const c={};return A.forEach(([u,h])=>{c[u]=l(a?1-h:h)}),c}else if(Array.isArray(l)){const c=a?[...l].reverse():l,u={};return A.forEach(([h,g])=>{u[h]=c[g%l.length]}),u}return{}},o=(A,l)=>{var c;return typeof A=="string"?(c=l.data)===null||c===void 0?void 0:c[A]:A==null?void 0:A(l)};if(t==="group"){const A=fv(r,h=>{if(!i)return"default";const g=o(i,h);return g?String(g):"default"}),l=Object.keys(A),c=s(l.map((h,g)=>[h,g])),u={};return Object.entries(A).forEach(([h,g])=>{g.forEach(p=>{u[he(p)]=c[h]})}),u}else if(t==="value"){const[A,l]=r.reduce(([u,h],g)=>{const p=o(i,g);if(typeof p!="number")throw new Error(eo(`Palette field ${i} is not a number`));return[Math.min(u,p),Math.max(h,p)]},[1/0,-1/0]),c=l-A;return s(r.map(u=>[u.id,(o(i,u)-A)/c]))}}function vH(r){const e=typeof r=="string"?io("palette",r):r;if(typeof e!="function")return e}function mH(r,e){let t=2*r;return typeof e=="string"?t=r*Number(e.replace("%",""))/100:typeof e=="number"&&(t=e),isNaN(t)&&(t=2*r),t}function yH(r,e,t=1,n=!1){const i=n?t:1,a=(r.max[0]-r.min[0])*i;return mH(a,e)}function Mee(r,e,t=1){const n=yn(r[0],r[1])*t;return mH(n,e)}class hh extends sh{constructor(e){mI(e.style),super(e),this.shapeMap={},this.animateMap={},this.render(this.attributes,this),this.setVisibility(),this.bindEvents()}get parsedAttributes(){return this.attributes}upsert(e,t,n,i,a){var s,o,A,l,c,u,h,g;const p=this.shapeMap[e];if(n===!1){p&&((s=a==null?void 0:a.beforeDestroy)===null||s===void 0||s.call(a,p),i.removeChild(p),delete this.shapeMap[e],(o=a==null?void 0:a.afterDestroy)===null||o===void 0||o.call(a,p));return}const v=typeof t=="string"?io(jd.SHAPE,t):t;if(!v)throw new Error(eo(`Shape ${t} not found`));if(!p||p.destroyed||!(p instanceof v)){p&&((A=a==null?void 0:a.beforeDestroy)===null||A===void 0||A.call(a,p),p==null||p.destroy(),(l=a==null?void 0:a.afterDestroy)===null||l===void 0||l.call(a,p)),(c=a==null?void 0:a.beforeCreate)===null||c===void 0||c.call(a);const m=new v({className:e,style:n});return i.appendChild(m),this.shapeMap[e]=m,(u=a==null?void 0:a.afterCreate)===null||u===void 0||u.call(a,m),m}return(h=a==null?void 0:a.beforeUpdate)===null||h===void 0||h.call(a,p),Tx(p,n),(g=a==null?void 0:a.afterUpdate)===null||g===void 0||g.call(a,p),p}update(e={}){const t=Object.assign({},this.attributes,e);mI(t),mne(this,t),this.render(t,this),this.setVisibility()}bindEvents(){}getGraphicStyle(e){return xee(e)}get compositeShapes(){return[["badges","badge-"],["ports","port-"]]}animate(e,t){if(e.length===0)return null;const n=[];if(e[0].x!==void 0||e[0].y!==void 0||e[0].z!==void 0){const{x:a=0,y:s=0,z:o=0}=this.attributes;e.forEach(A=>{const{x:l=a,y:c=s,z:u=o}=A;Object.assign(A,{transform:u?[["translate3d",l,c,u]]:[["translate",l,c]]})})}const i=super.animate(e,t);if(i&&(P1(this,i),n.push(i)),Array.isArray(e)&&e.length>0){const a=["transform","transformOrigin","x","y","z","zIndex"];if(Object.keys(e[0]).some(s=>!a.includes(s))){Object.entries(this.shapeMap).forEach(([o,A])=>{const l=`get${xp(o)}Style`,c=this[l];if($e(c)){const u=e.map(g=>c.call(this,Object.assign(Object.assign({},this.attributes),g))),h=A.animate(wx(u),t);h&&(P1(A,h),n.push(h))}});const s=(o,A)=>{if(!vs(o)){const l=`get${xp(A)}Style`,c=this[l];if($e(c)){const u=e.map(h=>c.call(this,Object.assign(Object.assign({},this.attributes),h)));Object.entries(u[0]).map(([h])=>{const g=u.map(v=>v[h]),p=o[h];if(p){const v=p.animate(wx(g),t);v&&(P1(p,v),n.push(v))}})}}};this.compositeShapes.forEach(([o,A])=>{const l=bx(this.shapeMap,A);s(l,o)})}}return F2(n)}getShape(e){return this.shapeMap[e]}setVisibility(){const{visibility:e}=this.attributes;gl(this,e)}destroy(){this.shapeMap={},this.animateMap={},super.destroy()}}function P1(r,e){e==null||e.finished.then(()=>{const t=r.activeAnimations.findIndex(n=>n===e);t>-1&&r.activeAnimations.splice(t,1)})}function mI(r){if(!r)return{};if("x"in r||"y"in r||"z"in r){const{x:e=0,y:t=0,z:n,transform:i}=r,a=W4(e,t,n,i);a&&(r.transform=a)}return r}var Fee=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class Ts extends hh{constructor(e){super(Nr({style:Ts.defaultStyleProps},e))}isTextStyle(e){return Xp(e,"label")}isBackgroundStyle(e){return Xp(e,"background")}getTextStyle(e){const t=this.getGraphicStyle(e),{padding:n}=t,i=Fee(t,["padding"]);return pH(i,"background")}getBackgroundStyle(e){if(e.background===!1)return!1;const t=this.getGraphicStyle(e),{wordWrap:n,wordWrapWidth:i,padding:a}=t,s=Gn(t,"background"),{min:[o,A],center:[l,c],halfExtents:[u,h]}=this.shapeMap.text.getGeometryBounds(),[g,p,v,m]=Fa(a),w=u*2+m+p,{width:b,height:_}=s;b&&_?Object.assign(s,{x:l-Number(b)/2,y:c-Number(_)/2}):Object.assign(s,{x:o-m,y:A-g,width:n?Math.min(w,i+m+p):w,height:h*2+g+v});const{radius:C}=s;if(typeof C=="string"&&C.endsWith("%")){const M=Number(C.replace("%",""))/100;s.radius=Math.min(+s.width,+s.height)*M}return s}render(e=this.parsedAttributes,t=this){this.upsert("text",_l,this.getTextStyle(e),t),this.upsert("background",Wr,this.getBackgroundStyle(e),t)}getGeometryBounds(){return(this.getShape("background")||this.getShape("text")).getGeometryBounds()}}Ts.defaultStyleProps={padding:0,fontSize:12,fontFamily:"system-ui, sans-serif",wordWrap:!0,maxLines:1,wordWrapWidth:128,textOverflow:"...",textBaseline:"middle",backgroundOpacity:.75,backgroundZIndex:-1,backgroundLineWidth:0};class qc extends hh{constructor(e){super(Nr({style:qc.defaultStyleProps},e))}getBadgeStyle(e){return this.getGraphicStyle(e)}render(e=this.parsedAttributes,t=this){this.upsert("label",Ts,this.getBadgeStyle(e),t)}getGeometryBounds(){const e=this.getShape("label");return(e.getShape("background")||e.getShape("text")).getGeometryBounds()}}qc.defaultStyleProps={padding:[2,4,2,4],fontSize:10,wordWrap:!1,backgroundRadius:"50%",backgroundOpacity:1};function kee(r,e=!0){const t=[];return r.forEach((n,i)=>{t.push([i===0?"M":"L",...n])}),e&&t.push(["Z"]),t}const yI={M:["x","y"],m:["dx","dy"],H:["x"],h:["dx"],V:["y"],v:["dy"],L:["x","y"],l:["dx","dy"],Z:[],z:[],C:["x1","y1","x2","y2","x","y"],c:["dx1","dy1","dx2","dy2","dx","dy"],S:["x2","y2","x","y"],s:["dx2","dy2","dx","dy"],Q:["x1","y1","x","y"],q:["dx1","dy1","dx","dy"],T:["x","y"],t:["dx","dy"],A:["rx","ry","rotation","large-arc","sweep","x","y"],a:["rx","ry","rotation","large-arc","sweep","dx","dy"]};function Iee(r){const e=r.replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").trim().split(/\s*,|\s+/),t=[];let n="",i={};for(;e.length>0;){let a=e.shift();a in yI?n=a:e.unshift(a),i={type:n},yI[n].forEach(A=>{a=e.shift(),i[A]=a}),n==="M"?n="L":n==="m"&&(n="l");const[s,...o]=Object.values(i);t.push([s,...o.map(Number)])}return t}function Pee(r){const e=[];return(typeof r=="string"?Iee(r):r).forEach(n=>{const i=n[0];if(i==="Z"){e.push(e[0]);return}if(i!=="A")for(let a=1;a<n.length;a=a+2)e.push([n[a],n[a+1],0]);else{const a=n.length;e.push([n[a-2],n[a-1],0])}}),e}const wH=r=>{if(r.length<2)return[["M",0,0],["L",0,0]];const e=r[0],t=r[1],n=r[r.length-1],i=r[r.length-2];r.unshift(i,n),r.push(e,t);const a=[["M",n[0],n[1]]];for(let s=1;s<r.length-2;s+=1){const[o,A]=r[s-1],[l,c]=r[s],[u,h]=r[s+1],[g,p]=s!==r.length-2?r[s+2]:[u,h],v=l+(u-o)/6,m=c+(h-A)/6,w=u-(g-l)/6,b=h-(p-c)/6;a.push(["C",v,m,w,b,u,h])}return a};function Oee(r,e,t,n,i,a,s){const[o,A]=Ys(r,e),l={textAlign:e==="left"?"right":e==="right"?"left":"center",textBaseline:e==="top"?"bottom":e==="bottom"?"top":"middle",transform:[["translate",o+t,A+n]]};if(e==="center"||!i)return l;const c=Pee(a);if(!c||c.length<=3)return l;const u=c.map((p,v)=>{const m=p,w=c[(v+1)%c.length];return Qn(m,w)?null:[m,w]}).filter(Boolean),h=yee([o,A],u),g=fH([o,A],h);if(g&&h&&(l.transform=[["translate",g[0]+t,g[1]+n]],s)){const p=Math.atan((h[0][1]-h[1][1])/(h[0][0]-h[1][0]));l.transform.push(["rotate",p/Math.PI*180]),l.textAlign="center",(e==="right"||e==="left")&&(p>0?l.textBaseline=e==="right"?"bottom":"top":l.textBaseline=e==="right"?"top":"bottom")}return l}var Lee=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class fh extends hh{constructor(e){super(Nr({style:fh.defaultStyleProps},e))}getLabelStyle(e){if(!e.label||!e.d||e.d.length===0)return!1;const t=Gn(this.getGraphicStyle(e),"label"),{maxWidth:n,offsetX:i,offsetY:a,autoRotate:s,placement:o,closeToPath:A}=t,l=Lee(t,["maxWidth","offsetX","offsetY","autoRotate","placement","closeToPath"]),c=this.shapeMap.key,u=c==null?void 0:c.getRenderBounds();return Object.assign(Oee(u,o,i,a,A,e.d,s),{wordWrapWidth:yH(u,n)},l)}getKeyStyle(e){return this.getGraphicStyle(e)}render(e,t){this.upsert("key",ci,this.getKeyStyle(e),t),this.upsert("label",Ts,this.getLabelStyle(e),t)}}fh.defaultStyleProps={label:!0,labelPlacement:"bottom",labelCloseToPath:!0,labelAutoRotate:!0,labelOffsetX:0,labelOffsetY:0};function Nee(r){const e=[],t=n=>{n!=null&&n.children.length&&n.children.forEach(i=>{e.push(i),t(i)})};return t(r),e}function Dee(r){const e=[];let t=r.parentNode;for(;t;)e.push(t),t=t.parentNode;return e}let R2=class extends Ah{constructor(e){super(e),this.onMounted=()=>{this.handleRadius()},this.onAttrModified=()=>{this.handleRadius()},wc=this,this.isMutationObserved=!0,this.addEventListener(Ot.MOUNTED,this.onMounted),this.addEventListener(Ot.ATTR_MODIFIED,this.onAttrModified)}handleRadius(){const{radius:e,clipPath:t,width:n=0,height:i=0}=this.attributes;if(e&&n&&i){const[a,s]=this.getBounds().min,o={x:a,y:s,radius:e,width:n,height:i};if(t)Object.assign(this.parsedStyle.clipPath.style,o);else{const A=new Wr({style:o});this.style.clipPath=A}}else t&&(this.style.clipPath=null)}};const _x=new WeakMap;let wc=null;const Q2=r=>{if(wc&&Dee(wc).includes(r)){const e=_x.get(r);e?e.includes(wc)||e.push(wc):_x.set(r,[wc])}},U2=r=>{const e=_x.get(r);e&&e.forEach(t=>t.handleRadius())};class bH extends hh{constructor(e){super(e)}isImage(){const{src:e}=this.attributes;return!!e}getIconStyle(e=this.attributes){const{width:t=0,height:n=0}=e,i=this.getGraphicStyle(e);return this.isImage()?Object.assign({x:-t/2,y:-n/2},i):Object.assign({textBaseline:"middle",textAlign:"center"},i)}render(e=this.attributes,t=this){this.upsert("icon",this.isImage()?R2:_l,this.getIconStyle(e),t)}}class _H extends hh{get context(){return this.config.context}get parsedAttributes(){return this.attributes}onframe(){}animate(e,t){const n=super.animate(e,t);return n&&(n.onframe=()=>this.onframe(),n.finished.then(()=>this.onframe())),n}}var Lg=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class rs extends _H{constructor(e){super(Nr({style:rs.defaultStyleProps},e)),this.type="node"}getSize(e=this.attributes){const{size:t}=e;return sa(t)}getKeyStyle(e){const t=this.getGraphicStyle(e);return Object.assign(pH(t,["label","halo","icon","badge","port"]))}getLabelStyle(e){if(e.label===!1||!e.labelText)return!1;const t=Gn(this.getGraphicStyle(e),"label"),{placement:n,maxWidth:i,offsetX:a,offsetY:s}=t,o=Lg(t,["placement","maxWidth","offsetX","offsetY"]),A=this.getShape("key").getLocalBounds();return Object.assign(LI(A,n,a,s),{wordWrapWidth:yH(A,i)},o)}getHaloStyle(e){if(e.halo===!1)return!1;const t=this.getKeyStyle(e),{fill:n}=t,i=Lg(t,["fill"]),a=Gn(this.getGraphicStyle(e),"halo");return Object.assign(Object.assign(Object.assign({},i),{stroke:n}),a)}getIconStyle(e){if(e.icon===!1||!e.iconText&&!e.iconSrc)return!1;const t=Gn(this.getGraphicStyle(e),"icon");return Object.assign(See(e.size,t),t)}getBadgesStyle(e){var t;const n=bx(this.shapeMap,"badge-"),i={};if(Object.keys(n).forEach(u=>{i[u]=!1}),e.badge===!1||!(!((t=e.badges)===null||t===void 0)&&t.length))return i;const{badges:a=[],badgePalette:s,opacity:o=1}=e,A=Lg(e,["badges","badgePalette","opacity"]),l=vH(s),c=Gn(this.getGraphicStyle(A),"badge");return a.forEach((u,h)=>{i[h]=Object.assign(Object.assign({backgroundFill:l?l[h%(l==null?void 0:l.length)]:void 0,opacity:o},c),this.getBadgeStyle(u))}),i}getBadgeStyle(e){const t=this.getShape("key"),{placement:n="top",offsetX:i,offsetY:a}=e,s=Lg(e,["placement","offsetX","offsetY"]),o=LI(t.getLocalBounds(),n,i,a,!0);return Object.assign(Object.assign({},o),s)}getPortsStyle(e){var t;const n=this.getPorts(),i={};if(Object.keys(n).forEach(o=>{i[o]=!1}),e.port===!1||!(!((t=e.ports)===null||t===void 0)&&t.length))return i;const a=Gn(this.getGraphicStyle(e),"port"),{ports:s=[]}=e;return s.forEach((o,A)=>{const l=o.key||A,c=Object.assign(Object.assign({},a),o);if(UH(c))i[l]=!1;else{const[u,h]=this.getPortXY(e,o);i[l]=Object.assign({transform:[["translate",u,h]]},c)}}),i}getPortXY(e,t){const{placement:n="left"}=t,i=this.getShape("key");return K2(Ree(this.context,i),n)}getPorts(){return bx(this.shapeMap,"port-")}getCenter(){return this.getShape("key").getBounds().center}getIntersectPoint(e,t=!1){const n=this.getShape("key").getBounds();return vee(e,n,t)}drawHaloShape(e,t){const n=this.getHaloStyle(e),i=this.getShape("key");this.upsert("halo",i.constructor,n,t)}drawIconShape(e,t){const n=this.getIconStyle(e);this.upsert("icon",bH,n,t),Q2(this)}drawBadgeShapes(e,t){const n=this.getBadgesStyle(e);Object.keys(n).forEach(i=>{const a=n[i];this.upsert(`badge-${i}`,qc,a,t)})}drawPortShapes(e,t){const n=this.getPortsStyle(e);Object.keys(n).forEach(i=>{const a=n[i],s=`port-${i}`;this.upsert(s,xs,a,t)})}drawLabelShape(e,t){const n=this.getLabelStyle(e);this.upsert("label",Ts,n,t)}_drawKeyShape(e,t){return this.drawKeyShape(e,t)}render(e=this.parsedAttributes,t=this){this._drawKeyShape(e,t),this.getShape("key")&&(this.drawHaloShape(e,t),this.drawIconShape(e,t),this.drawBadgeShapes(e,t),this.drawLabelShape(e,t),this.drawPortShapes(e,t))}update(e){super.update(e),e&&("x"in e||"y"in e||"z"in e)&&U2(this)}onframe(){this.drawBadgeShapes(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this)}}rs.defaultStyleProps={x:0,y:0,size:32,droppable:!0,draggable:!0,port:!0,ports:[],portZIndex:2,portLinkToCenter:!1,badge:!0,badges:[],badgeZIndex:3,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloStrokeOpacity:.25,haloPointerEvents:"none",haloZIndex:-1,icon:!0,iconZIndex:1,label:!0,labelIsBillboard:!0,labelMaxWidth:"200%",labelPlacement:"bottom",labelWordWrap:!1,labelZIndex:0};function Ree(r,e){if(!r)return e.getLocalBounds();const t=r.canvas.getLayer(),n=e.cloneNode();gl(n,"hidden"),t.appendChild(n);const i=n.getLocalBounds();return n.destroy(),i}let gh=class EH extends rs{constructor(e){super(Nr({style:EH.defaultStyleProps},e))}drawKeyShape(e,t){return this.upsert("key",xs,this.getKeyStyle(e),t)}getKeyStyle(e){const t=super.getKeyStyle(e);return Object.assign(Object.assign({},t),{r:Math.min(...this.getSize(e))/2})}getIconStyle(e){const t=super.getIconStyle(e),{r:n}=this.getShape("key").attributes,i=n*2*ao;return t?Object.assign({width:i,height:i},t):!1}getIntersectPoint(e,t=!1){const n=this.getShape("key").getBounds();return Pv(e,n,t)}};gh.defaultStyleProps={size:32};class Lv extends rs{constructor(e){super(e)}get parsedAttributes(){return this.attributes}drawKeyShape(e,t){return this.upsert("key",bl,this.getKeyStyle(e),t)}getKeyStyle(e){const t=super.getKeyStyle(e);return Object.assign(Object.assign({},t),{points:this.getPoints(e)})}getIntersectPoint(e,t=!1){var n,i;const{points:a}=this.getShape("key").attributes,s=[+(((n=this.attributes)===null||n===void 0?void 0:n.x)||0),+(((i=this.attributes)===null||i===void 0?void 0:i.y)||0)];return hH(e,s,a,!0,t).point}}class Qee extends Lv{constructor(e){super(e)}getPoints(e){const[t,n]=this.getSize(e);return vne(t,n)}}var Uee=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class Nv extends gh{constructor(e){super(Nr({style:Nv.defaultStyleProps},e))}parseOuterR(){const{size:e}=this.parsedAttributes;return Math.min(...sa(e))/2}parseInnerR(){const{innerR:e}=this.parsedAttributes;return Rt(e)?parseInt(e)/100*this.parseOuterR():e}drawDonutShape(e,t){const{donuts:n}=e;if(!(n!=null&&n.length))return;const i=n.map(u=>je(u)?{value:u}:u),a=Gn(this.getGraphicStyle(e),"donut"),s=vH(e.donutPalette);if(!s)return;const o=i.reduce((u,h)=>{var g;return u+((g=h.value)!==null&&g!==void 0?g:0)},0),A=this.parseOuterR(),l=this.parseInnerR();let c=0;i.forEach((u,h)=>{const{value:g=0,color:p=s[h%s.length]}=u,v=Uee(u,["value","color"]),m=(o===0?1/i.length:g/o)*360;this.upsert(`round${h}`,ci,Object.assign(Object.assign(Object.assign({},a),{d:jee(A,l,c,c+m),fill:p}),v),t),c+=m})}render(e,t=this){super.render(e,t),this.drawDonutShape(e,t)}}Nv.defaultStyleProps={innerR:"50%",donuts:[],donutPalette:"tableau"};const Ng=(r,e,t,n)=>[r+Math.sin(n)*t,e-Math.cos(n)*t],Hee=(r,e,t,n)=>n<=0||t<=n?[["M",r-t,e],["A",t,t,0,1,1,r+t,e],["A",t,t,0,1,1,r-t,e],["Z"]]:[["M",r-t,e],["A",t,t,0,1,1,r+t,e],["A",t,t,0,1,1,r-t,e],["Z"],["M",r+n,e],["A",n,n,0,1,0,r-n,e],["A",n,n,0,1,0,r+n,e],["Z"]],zee=(r,e,t,n,i,a)=>{const[s,o]=[i/360*2*Math.PI,a/360*2*Math.PI],A=[Ng(r,e,n,s),Ng(r,e,t,s),Ng(r,e,t,o),Ng(r,e,n,o)],l=o-s>Math.PI?1:0;return[["M",A[0][0],A[0][1]],["L",A[1][0],A[1][1]],["A",t,t,0,l,1,A[2][0],A[2][1]],["L",A[3][0],A[3][1]],["A",n,n,0,l,0,A[0][0],A[0][1]],["Z"]]},jee=(r=0,e=0,t,n)=>{const[i,a]=[0,0];return Math.abs(t-n)%360<1e-6?Hee(i,a,r,e):zee(i,a,r,e,t,n)};class Dv extends rs{constructor(e){super(Nr({style:Dv.defaultStyleProps},e))}drawKeyShape(e,t){return this.upsert("key",oh,this.getKeyStyle(e),t)}getKeyStyle(e){const t=super.getKeyStyle(e),[n,i]=this.getSize(e);return Object.assign(Object.assign({},t),{rx:n/2,ry:i/2})}getIconStyle(e){const t=super.getIconStyle(e),{rx:n,ry:i}=this.getShape("key").attributes,a=Math.min(+n,+i)*2*ao;return t?Object.assign({width:a,height:a},t):!1}getIntersectPoint(e,t=!1){const n=this.getShape("key").getBounds();return Pv(e,n,t)}}Dv.defaultStyleProps={size:[45,35]};class Kee extends Lv{constructor(e){super(e)}getOuterR(e){return e.outerR||Math.min(...this.getSize(e))/2}getPoints(e){return yne(this.getOuterR(e))}getIconStyle(e){const t=super.getIconStyle(e),n=this.getOuterR(e)*ao;return t?Object.assign({width:n,height:n},t):!1}}function fs(r,e){if(!{}.hasOwnProperty.call(r,e))throw new TypeError("attempted to use private field on non-instance");return r}var Gee=0;function Vee(r){return"__private_"+Gee+++"_"+r}/*!
 * @antv/g-canvas
 * @description A renderer implemented by Canvas 2D API
 * @version 2.2.0
 * @date 12/24/2025, 11:55:53 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Zn=Vee("renderState"),CH=(function(){function r(e){Be(this,r),this.renderQueue=[],Object.defineProperty(this,Zn,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=sn(),this.dprMatrix=sn(),this.tmpMat4=sn(),this.vec3a=xt(),this.vec3b=xt(),this.vec3c=xt(),this.vec3d=xt(),this.canvasRendererPluginOptions=e}return xe(r,[{key:"apply",value:function(t,n){var i=this;this.context=t;var a=this.context,s=a.config,o=a.camera,A=a.renderingService,l=a.renderingContext,c=a.pathGeneratorFactory,u=s.renderer.getConfig().enableRenderingOptimization;s.renderer.getConfig().enableDirtyCheck=!1,s.renderer.getConfig().enableDirtyRectangleRendering=!1,this.pathGeneratorFactory=c;var h=t.contextService,g=l.root.ownerDocument.defaultView;A.hooks.init.tap(r.tag,function(){var m=h.getDPR(),w=s.width,b=s.height,_=h.getContext();i.clearRect(_,0,0,w*m,b*m,s.background)}),A.hooks.destroy.tap(r.tag,function(){i.renderQueue=[],fs(i,Zn)[Zn]={restoreStack:[],prevObject:null,currentContext:null}});var p=function(){var w,b=h.getContext(),_=h.getDPR(),C=s.width,M=s.height,F=i.canvasRendererPluginOptions,k=F.dirtyObjectNumThreshold,P=F.dirtyObjectRatioThreshold,N=A.getStats(),D=N.total,Q=N.rendered,H=Q/D;i.clearFullScreen=i.clearFullScreenLastFrame||!((w=g.context.renderingPlugins[1])!==null&&w!==void 0&&w.isFirstTimeRenderingFinished)||A.disableDirtyRectangleRendering()||Q>k&&H>P,b&&(typeof b.resetTransform=="function"?b.resetTransform():b.setTransform(1,0,0,1,0,0),i.clearFullScreen&&i.clearRect(b,0,0,C*_,M*_,s.background))},v=function(w,b){for(var _=[w];_.length>0;){var C,M=_.pop();M.isVisible()&&!M.isCulled()&&(u?i.renderDisplayObjectOptimized(M,b,i.context,fs(i,Zn)[Zn],n):i.renderDisplayObject(M,b,i.context,fs(i,Zn)[Zn],n));for(var F=((C=M.sortable)===null||C===void 0||(C=C.sorted)===null||C===void 0?void 0:C.length)>0?M.sortable.sorted:M.childNodes,k=F.length-1;k>=0;k--)_.push(F[k])}};A.hooks.endFrame.tap(r.tag,function(){if(p(),l.root.childNodes.length===0){i.clearFullScreenLastFrame=!0;return}u=s.renderer.getConfig().enableRenderingOptimization,fs(i,Zn)[Zn]={restoreStack:[],prevObject:null,currentContext:fs(i,Zn)[Zn].currentContext},fs(i,Zn)[Zn].currentContext.clear(),i.clearFullScreenLastFrame=!1;var m=h.getContext(),w=h.getDPR();if(qA(i.dprMatrix,[w,w,1]),Ai(i.vpMatrix,i.dprMatrix,o.getOrthoMatrix()),i.clearFullScreen)u?(m.save(),v(l.root,m),m.restore()):v(l.root,m);else{var b=i.safeMergeAABB(i.mergeDirtyAABBs(i.renderQueue));if(vn.isEmpty(b)){i.renderQueue=[];return}var _=i.convertAABB2Rect(b),C=_.x,M=_.y,F=_.width,k=_.height,P=li(i.vec3a,[C,M,0],i.vpMatrix),N=li(i.vec3b,[C+F,M,0],i.vpMatrix),D=li(i.vec3c,[C,M+k,0],i.vpMatrix),Q=li(i.vec3d,[C+F,M+k,0],i.vpMatrix),H=Math.min(P[0],N[0],Q[0],D[0]),j=Math.min(P[1],N[1],Q[1],D[1]),q=Math.max(P[0],N[0],Q[0],D[0]),J=Math.max(P[1],N[1],Q[1],D[1]),ce=Math.floor(H),se=Math.floor(j),W=Math.ceil(q-H),le=Math.ceil(J-j);m.save(),i.clearRect(m,ce,se,W,le,s.background),m.beginPath(),m.rect(ce,se,W,le),m.clip(),m.setTransform(i.vpMatrix[0],i.vpMatrix[1],i.vpMatrix[4],i.vpMatrix[5],i.vpMatrix[12],i.vpMatrix[13]);var fe=s.renderer.getConfig(),X=fe.enableDirtyRectangleRenderingDebug;X&&g.dispatchEvent(new cr(na.DIRTY_RECTANGLE,{dirtyRect:{x:ce,y:se,width:W,height:le}}));var ne=b.getMin(),Ie=yt(ne,2),te=Ie[0],$=Ie[1],ue=b.getMax(),me=yt(ue,2),Te=me[0],He=me[1],Je=l.root.ownerDocument.elementsFromBBox(te,$,Te,He);Je.sort(function(Bt,Lt){return Bt.sortable.renderOrder-Lt.sortable.renderOrder}).forEach(function(Bt){Bt&&Bt.isVisible()&&!Bt.isCulled()&&i.renderDisplayObject(Bt,m,i.context,fs(i,Zn)[Zn],n)}),m.restore(),i.renderQueue.forEach(function(Bt){i.saveDirtyAABB(Bt)}),i.renderQueue=[]}fs(i,Zn)[Zn].restoreStack.forEach(function(){m.restore()}),fs(i,Zn)[Zn].restoreStack=[]}),A.hooks.render.tap(r.tag,function(m){i.clearFullScreen||i.renderQueue.push(m)})}},{key:"clearRect",value:function(t,n,i,a,s,o){t.clearRect(n,i,a,s),o&&(t.fillStyle=o,t.fillRect(n,i,a,s))}},{key:"renderDisplayObjectOptimized",value:function(t,n,i,a,s){var o=t.nodeName,A=!1,l=!1,c=this.context.styleRendererFactory[o],u=this.pathGeneratorFactory[o],h=t.parsedStyle.clipPath;if(h){A=!a.prevObject||!MB(h.getWorldTransform(),a.prevObject.getWorldTransform()),A&&(this.applyWorldTransform(n,h),a.prevObject=null);var g=this.pathGeneratorFactory[h.nodeName];g&&(n.save(),l=!0,n.beginPath(),g(n,h.parsedStyle),n.closePath(),n.clip())}if(c){A=!a.prevObject||!MB(t.getWorldTransform(),a.prevObject.getWorldTransform()),A&&this.applyWorldTransform(n,t);var p=!a.prevObject;if(!p){var v=a.prevObject.nodeName;o===we.TEXT?p=v!==we.TEXT:o===we.IMAGE?p=v!==we.IMAGE:p=v===we.TEXT||v===we.IMAGE}c.applyStyleToContext(n,t,p,a),a.prevObject=t}u&&(n.beginPath(),u(n,t.parsedStyle),o!==we.LINE&&o!==we.PATH&&o!==we.POLYLINE&&n.closePath()),c&&c.drawToContext(n,t,fs(this,Zn)[Zn],this,s),l&&n.restore(),t.dirty(!1)}},{key:"renderDisplayObject",value:function(t,n,i,a,s){var o=t.nodeName,A=a.restoreStack[a.restoreStack.length-1];A&&!(t.compareDocumentPosition(A)&kn.DOCUMENT_POSITION_CONTAINS)&&(n.restore(),a.restoreStack.pop());var l=this.context.styleRendererFactory[o],c=this.pathGeneratorFactory[o],u=t.parsedStyle.clipPath;if(u){this.applyWorldTransform(n,u);var h=this.pathGeneratorFactory[u.nodeName];h&&(n.save(),a.restoreStack.push(t),n.beginPath(),h(n,u.parsedStyle),n.closePath(),n.clip())}l&&(this.applyWorldTransform(n,t),n.save(),this.applyAttributesToContext(n,t)),c&&(n.beginPath(),c(n,t.parsedStyle),o!==we.LINE&&o!==we.PATH&&o!==we.POLYLINE&&n.closePath()),l&&(l.render(n,t.parsedStyle,t,i,this,s),n.restore()),t.dirty(!1)}},{key:"applyAttributesToContext",value:function(t,n){var i=n.parsedStyle,a=i.stroke,s=i.fill,o=i.opacity,A=i.lineDash,l=i.lineDashOffset;A&&t.setLineDash(A),it(l)||(t.lineDashOffset=l),it(o)||(t.globalAlpha*=o),!it(a)&&!Array.isArray(a)&&!a.isNone&&(t.strokeStyle=n.attributes.stroke),!it(s)&&!Array.isArray(s)&&!s.isNone&&(t.fillStyle=n.attributes.fill)}},{key:"convertAABB2Rect",value:function(t){var n=t.getMin(),i=t.getMax(),a=Math.floor(n[0]),s=Math.floor(n[1]),o=Math.ceil(i[0]),A=Math.ceil(i[1]),l=o-a,c=A-s;return{x:a,y:s,width:l,height:c}}},{key:"mergeDirtyAABBs",value:function(t){var n=new vn;return t.forEach(function(i){var a=i.getRenderBounds();n.add(a);var s=i.renderable.dirtyRenderBounds;s&&n.add(s)}),n}},{key:"saveDirtyAABB",value:function(t){var n=t.renderable;n.dirtyRenderBounds||(n.dirtyRenderBounds=new vn);var i=t.getRenderBounds();i&&n.dirtyRenderBounds.update(i.center,i.halfExtents)}},{key:"applyWorldTransform",value:function(t,n,i){i?(Dc(this.tmpMat4,n.getLocalTransform()),Ai(this.tmpMat4,i,this.tmpMat4),Ai(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(Dc(this.tmpMat4,n.getWorldTransform()),Ai(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var t=new vn,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return i.forEach(function(s){t.add(s)}),t}}])})();CH.tag="CanvasRenderer";function Zp(r,e,t,n,i,a,s){var o,A;if(r.image.nodeName==="rect"){var l=r.image.parsedStyle,c=l.width,u=l.height;A=n.contextService.getDPR();var h=n.config.offscreenCanvas;o=a.offscreenCanvasCreator.getOrCreateCanvas(h),o.width=c*A,o.height=u*A;var g=a.offscreenCanvasCreator.getOrCreateContext(h),p={restoreStack:[],prevObject:null,currentContext:new Map};r.image.forEach(function(m){i.renderDisplayObject(m,g,n,p,a)}),p.restoreStack.forEach(function(){g.restore()})}var v=s.getOrCreatePatternSync(e,r,t,o,A,e.getGeometryBounds().min,function(){e.dirty(),n.renderingService.dirty()});return v}function Jp(r,e,t,n){var i;if(r.type===Vo.LinearGradient||r.type===Vo.RadialGradient){var a=e.getGeometryBounds(),s=a&&a.halfExtents[0]*2||1,o=a&&a.halfExtents[1]*2||1,A=a&&a.min||[0,0];i=n.getOrCreateGradient(dt(dt({type:r.type},r.value),{},{min:A,width:s,height:o}),t)}return i}var Dg=["shadowBlur","shadowOffsetX","shadowOffsetY"],wI=["lineCap","lineJoin","miterLimit"],or={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},bI={};function Nn(r,e,t,n){var i=n.has(e)?n.get(e):or[e];return i!==t&&(e==="lineDash"?r.setLineDash(t):r[e]=t,n.set(e,t)),i}var qee=(function(){function r(e){Be(this,r),this.imagePool=e}return xe(r,[{key:"applyAttributesToContext",value:function(t,n){}},{key:"render",value:function(t,n,i,a,s,o){}},{key:"applyCommonStyleToContext",value:function(t,n,i,a){var s=i?bI:a.prevObject.parsedStyle,o=n.parsedStyle;(i||o.opacity!==s.opacity)&&Nn(t,"globalAlpha",it(o.opacity)?or.globalAlpha:o.opacity,a.currentContext),(i||o.blend!==s.blend)&&Nn(t,"globalCompositeOperation",it(o.blend)?or.globalCompositeOperation:o.blend,a.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(t,n,i,a){var s=i?bI:a.prevObject.parsedStyle,o=n.parsedStyle,A=o.lineWidth,l=A===void 0?or.lineWidth:A,c=o.fill&&!o.fill.isNone,u=o.stroke&&!o.stroke.isNone&&l>0;if(u){if(i||n.attributes.stroke!==a.prevObject.attributes.stroke){var h=!it(o.stroke)&&!Array.isArray(o.stroke)&&!o.stroke.isNone?n.attributes.stroke:or.strokeStyle;Nn(t,"strokeStyle",h,a.currentContext)}(i||o.lineWidth!==s.lineWidth)&&Nn(t,"lineWidth",it(o.lineWidth)?or.lineWidth:o.lineWidth,a.currentContext),(i||o.lineDash!==s.lineDash)&&Nn(t,"lineDash",o.lineDash||or.lineDash,a.currentContext),(i||o.lineDashOffset!==s.lineDashOffset)&&Nn(t,"lineDashOffset",it(o.lineDashOffset)?or.lineDashOffset:o.lineDashOffset,a.currentContext);for(var g=0;g<wI.length;g++){var p=wI[g];(i||o[p]!==s[p])&&Nn(t,p,it(o[p])?or[p]:o[p],a.currentContext)}}if(c&&(i||n.attributes.fill!==a.prevObject.attributes.fill)){var v=!it(o.fill)&&!Array.isArray(o.fill)&&!o.fill.isNone?n.attributes.fill:or.fillStyle;Nn(t,"fillStyle",v,a.currentContext)}}},{key:"applyStyleToContext",value:function(t,n,i,a){var s=n.nodeName;this.applyCommonStyleToContext(t,n,i,a),s===we.IMAGE||this.applyStrokeFillStyleToContext(t,n,i,a)}},{key:"applyShadowAndFilterStyleToContext",value:function(t,n,i,a){var s=n.parsedStyle;if(i){Nn(t,"shadowColor",s.shadowColor.toString(),a.currentContext);for(var o=0;o<Dg.length;o++){var A=Dg[o];Nn(t,A,s[A]||or[A],a.currentContext)}}s.filter&&s.filter.length&&Nn(t,"filter",n.attributes.filter,a.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(t,n,i,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(n){Nn(t,"shadowColor",or.shadowColor,a.currentContext);for(var o=0;o<Dg.length;o++){var A=Dg[o];Nn(t,A,or[A],a.currentContext)}}if(i)if(n&&s){var l=t.filter;!it(l)&&l.indexOf("drop-shadow")>-1&&Nn(t,"filter",l.replace(/drop-shadow\([^)]*\)/,"").trim()||or.filter,a.currentContext)}else Nn(t,"filter",or.filter,a.currentContext)}},{key:"fillToContext",value:function(t,n,i,a,s){var o=this,A=n.parsedStyle,l=A.fill,c=A.fillRule,u=null;if(Array.isArray(l)&&l.length>0)l.forEach(function(g){var p=Nn(t,"fillStyle",Jp(g,n,t,o.imagePool),i.currentContext);u=u??p,c?t.fill(c):t.fill()});else{if(dl(l)){var h=Zp(l,n,t,n.ownerDocument.defaultView.context,a,s,this.imagePool);h&&(t.fillStyle=h,u=!0)}c?t.fill(c):t.fill()}u!==null&&Nn(t,"fillStyle",u,i.currentContext)}},{key:"strokeToContext",value:function(t,n,i,a,s){var o=this,A=n.parsedStyle.stroke,l=null;if(Array.isArray(A)&&A.length>0)A.forEach(function(h){var g=Nn(t,"strokeStyle",Jp(h,n,t,o.imagePool),i.currentContext);l=l??g,t.stroke()});else{if(dl(A)){var c=Zp(A,n,t,n.ownerDocument.defaultView.context,a,s,this.imagePool);if(c){var u=Nn(t,"strokeStyle",c,i.currentContext);l=l??u}}t.stroke()}l!==null&&Nn(t,"strokeStyle",l,i.currentContext)}},{key:"drawToContext",value:function(t,n,i,a,s){var o,A=n.nodeName,l=n.parsedStyle,c=l.opacity,u=c===void 0?or.globalAlpha:c,h=l.fillOpacity,g=h===void 0?or.fillOpacity:h,p=l.strokeOpacity,v=p===void 0?or.strokeOpacity:p,m=l.lineWidth,w=m===void 0?or.lineWidth:m,b=l.fill&&!l.fill.isNone,_=l.stroke&&!l.stroke.isNone&&w>0;if(!(!b&&!_)){var C=!it(l.shadowColor)&&l.shadowBlur>0,M=l.shadowType==="inner",F=((o=l.fill)===null||o===void 0?void 0:o.alpha)===0,k=!!(l.filter&&l.filter.length),P=C&&_&&(A===we.PATH||A===we.LINE||A===we.POLYLINE||F||M),N=null;if(b){P||this.applyShadowAndFilterStyleToContext(t,n,C,i);var D=u*g;N=Nn(t,"globalAlpha",D,i.currentContext),this.fillToContext(t,n,i,a,s),P||this.clearShadowAndFilterStyleForContext(t,C,k,i)}if(_){var Q=!1,H=u*v,j=Nn(t,"globalAlpha",H,i.currentContext);if(N=b?N:j,P&&(this.applyShadowAndFilterStyleToContext(t,n,C,i),Q=!0,M)){var q=t.globalCompositeOperation;t.globalCompositeOperation="source-atop",this.strokeToContext(t,n,i,a,s),t.globalCompositeOperation=q,this.clearShadowAndFilterStyleForContext(t,C,k,i,!0)}this.strokeToContext(t,n,i,a,s),Q&&this.clearShadowAndFilterStyleForContext(t,C,k,i)}N!==null&&Nn(t,"globalAlpha",N,i.currentContext)}}}])})(),H2=(function(r){function e(){return Be(this,e),wt(this,e,arguments)}return bt(e,r),xe(e,[{key:"render",value:function(n,i,a,s,o,A){var l=i.fill,c=i.fillRule,u=i.opacity,h=u===void 0?1:u,g=i.fillOpacity,p=g===void 0?1:g,v=i.stroke,m=i.strokeOpacity,w=m===void 0?1:m,b=i.lineWidth,_=b===void 0?1:b,C=i.lineCap,M=i.lineJoin,F=i.shadowType,k=i.shadowColor,P=i.shadowBlur,N=i.filter,D=i.miterLimit,Q=l&&!l.isNone,H=v&&!v.isNone&&_>0,j=(l==null?void 0:l.alpha)===0,q=!!(N&&N.length),J=!it(k)&&P>0,ce=a.nodeName,se=F==="inner",W=H&&J&&(ce===we.PATH||ce===we.LINE||ce===we.POLYLINE||j||se);Q&&(n.globalAlpha=h*p,W||ev(a,n,J),BH(n,a,l,c,s,o,A,this.imagePool),W||this.clearShadowAndFilter(n,q,J)),H&&(n.globalAlpha=h*w,n.lineWidth=_,it(D)||(n.miterLimit=D),it(C)||(n.lineCap=C),it(M)||(n.lineJoin=M),W&&(se&&(n.globalCompositeOperation="source-atop"),ev(a,n,!0),se&&(Ex(n,a,v,s,o,A,this.imagePool),n.globalCompositeOperation=or.globalCompositeOperation,this.clearShadowAndFilter(n,q,!0))),Ex(n,a,v,s,o,A,this.imagePool))}},{key:"clearShadowAndFilter",value:function(n,i,a){if(a&&(n.shadowColor="transparent",n.shadowBlur=0),i){var s=n.filter;!it(s)&&s.indexOf("drop-shadow")>-1&&(n.filter=s.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])})(qee);function ev(r,e,t){var n=r.parsedStyle,i=n.filter,a=n.shadowColor,s=n.shadowBlur,o=n.shadowOffsetX,A=n.shadowOffsetY;i&&i.length&&(e.filter=r.style.filter),t&&(e.shadowColor=a.toString(),e.shadowBlur=s||0,e.shadowOffsetX=o||0,e.shadowOffsetY=A||0)}function BH(r,e,t,n,i,a,s,o){var A=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1;Array.isArray(t)?t.forEach(function(l){r.fillStyle=Jp(l,e,r,o),A||(n?r.fill(n):r.fill())}):(dl(t)&&(r.fillStyle=Zp(t,e,r,i,a,s,o)),A||(n?r.fill(n):r.fill()))}function Ex(r,e,t,n,i,a,s){var o=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;Array.isArray(t)?t.forEach(function(A){r.strokeStyle=Jp(A,e,r,s),o||r.stroke()}):(dl(t)&&(r.strokeStyle=Zp(t,e,r,n,i,a,s)),o||r.stroke())}function Wee(r,e){var t=yt(r,4),n=t[0],i=t[1],a=t[2],s=t[3],o=yt(e,4),A=o[0],l=o[1],c=o[2],u=o[3],h=Math.max(n,A),g=Math.max(i,l),p=Math.min(n+a,A+c),v=Math.min(i+s,l+u);return p<=h||v<=g?null:[h,g,p-h,v-g]}function $ee(r,e){var t=li(xt(),[r[0],r[1],0],e),n=li(xt(),[r[0]+r[2],r[1],0],e),i=li(xt(),[r[0],r[1]+r[3],0],e),a=li(xt(),[r[0]+r[2],r[1]+r[3],0],e);return[Math.min(t[0],n[0],i[0],a[0]),Math.min(t[1],n[1],i[1],a[1]),Math.max(t[0],n[0],i[0],a[0])-Math.min(t[0],n[0],i[0],a[0]),Math.max(t[1],n[1],i[1],a[1])-Math.min(t[1],n[1],i[1],a[1])]}var Yee=(function(r){function e(){return Be(this,e),wt(this,e,arguments)}return bt(e,r),xe(e,[{key:"renderDownSampled",value:function(n,i,a,s){var o=s.src,A=s.imageCache;if(!A.downSampled){this.imagePool.createDownSampledImage(o,a).then(function(){a.ownerDocument&&(a.dirty(),a.ownerDocument.defaultView.context.renderingService.dirty())}).catch(function(l){console.error(l)});return}n.drawImage(A.downSampled,Math.floor(s.drawRect[0]),Math.floor(s.drawRect[1]),Math.ceil(s.drawRect[2]),Math.ceil(s.drawRect[3]))}},{key:"renderTile",value:function(n,i,a,s){var o=s.src,A=s.imageCache,l=s.imageRect,c=s.drawRect,u=A.size,h=n.getTransform(),g=h.a,p=h.b,v=h.c,m=h.d,w=h.e,b=h.f;if(n.resetTransform(),!(A!=null&&A.gridSize)){this.imagePool.createImageTiles(o,[],function(){a.ownerDocument&&(a.dirty(),a.ownerDocument.defaultView.context.renderingService.dirty())},a).catch(function(J){console.error(J)});return}for(var _=[u[0]/l[2],u[1]/l[3]],C=[A.tileSize[0]/_[0],A.tileSize[1]/_[1]],M=[Math.floor((c[0]-l[0])/C[0]),Math.ceil((c[0]+c[2]-l[0])/C[0])],F=M[0],k=M[1],P=[Math.floor((c[1]-l[1])/C[1]),Math.ceil((c[1]+c[3]-l[1])/C[1])],N=P[0],D=P[1],Q=N;Q<=D;Q++)for(var H=F;H<=k;H++){var j=A.tiles[Q][H];if(j){var q=[Math.floor(l[0]+j.tileX*C[0]),Math.floor(l[1]+j.tileY*C[1]),Math.ceil(C[0]),Math.ceil(C[1])];n.drawImage(j.data,q[0],q[1],q[2],q[3])}}n.setTransform(g,p,v,m,w,b)}},{key:"render",value:function(n,i,a){var s=i.x,o=s===void 0?0:s,A=i.y,l=A===void 0?0:A,c=i.width,u=i.height,h=i.src,g=i.shadowColor,p=i.shadowBlur,v=this.imagePool.getImageSync(h,a),m=v==null?void 0:v.img,w=c,b=u;if(m){w||(w=m.width),b||(b=m.height);var _=!it(g)&&p>0;ev(a,n,_);try{var C=a.ownerDocument.defaultView.getContextService().getDomElement(),M=C.width,F=C.height,k=n.getTransform(),P=k.a,N=k.b,D=k.c,Q=k.d,H=k.e,j=k.f,q=vQ(P,D,0,0,N,Q,0,0,0,0,1,0,H,j,0,1),J=$ee([o,l,w,b],q),ce=Wee([0,0,M,F],J);if(!ce)return;if(!a.ownerDocument.defaultView.getConfig().enableLargeImageOptimization){e.renderFull(n,i,a,{image:m,drawRect:[o,l,w,b]});return}var se=J[2]/v.size[0];if(se<(v.downSamplingRate||.5)){this.renderDownSampled(n,i,a,{src:h,imageCache:v,drawRect:[o,l,w,b]});return}if(!ImagePool.isSupportTile){e.renderFull(n,i,a,{image:m,drawRect:[o,l,w,b]});return}this.renderTile(n,i,a,{src:h,imageCache:v,imageRect:J,drawRect:ce})}catch{}}}},{key:"drawToContext",value:function(n,i,a,s,o){this.render(n,i.parsedStyle,i)}}],[{key:"renderFull",value:function(n,i,a,s){n.drawImage(s.image,Math.floor(s.drawRect[0]),Math.floor(s.drawRect[1]),Math.ceil(s.drawRect[2]),Math.ceil(s.drawRect[3]))}}])})(H2),Xee=(function(r){function e(){return Be(this,e),wt(this,e,arguments)}return bt(e,r),xe(e,[{key:"render",value:function(n,i,a,s,o,A){a.getBounds();var l=i.lineWidth,c=l===void 0?1:l,u=i.textAlign,h=u===void 0?"start":u,g=i.textBaseline,p=g===void 0?"alphabetic":g,v=i.lineJoin,m=v===void 0?"miter":v,w=i.miterLimit,b=w===void 0?10:w,_=i.letterSpacing,C=_===void 0?0:_,M=i.stroke,F=i.fill,k=i.fillRule,P=i.fillOpacity,N=P===void 0?1:P,D=i.strokeOpacity,Q=D===void 0?1:D,H=i.opacity,j=H===void 0?1:H,q=i.metrics,J=i.x,ce=J===void 0?0:J,se=i.y,W=se===void 0?0:se,le=i.dx,fe=i.dy,X=i.shadowColor,ne=i.shadowBlur,Ie=i.textDecorationLine,te=q.font,$=q.lines,ue=q.height,me=q.lineHeight,Te=q.lineMetrics;n.font=te,n.lineWidth=c,n.textAlign=h==="middle"?"center":h;var He=p;He==="alphabetic"&&(He="bottom"),n.lineJoin=m,it(b)||(n.miterLimit=b);var Je=W;p==="middle"?Je+=-ue/2-me/2:p==="bottom"||p==="alphabetic"||p==="ideographic"?Je+=-ue:(p==="top"||p==="hanging")&&(Je+=-me);var Bt=ce+(le||0);Je+=fe||0,$.length===1&&(He==="bottom"?(He="middle",Je-=.5*ue):He==="top"&&(He="middle",Je+=.5*ue)),n.textBaseline=He;var Lt=!it(X)&&ne>0;ev(a,n,Lt);for(var kt=0;kt<$.length;kt++){var zt=c/2+Bt;Je+=me,!it(M)&&!M.isNone&&c&&this.drawLetterSpacing(n,a,$[kt],Te[kt],h,zt,Je,C,F,k,N,M,Q,j,!0,s,o,A),it(F)||this.drawLetterSpacing(n,a,$[kt],Te[kt],h,zt,Je,C,F,k,N,M,Q,j,!1,s,o,A)}Ie&&Ie!=="none"&&this.drawTextDecorations(n,i,a,$,me,Bt,W+(fe||0),s,o,A)}},{key:"drawLetterSpacing",value:function(n,i,a,s,o,A,l,c,u,h,g,p,v,m,w,b,_,C){if(c===0){w?this.strokeText(n,i,a,A,l,p,v,b,_,C):this.fillText(n,i,a,A,l,u,h,g,m,b,_,C);return}var M=n.textAlign;n.textAlign="left";var F=A;o==="center"||o==="middle"?F=A-s.width/2:(o==="right"||o==="end")&&(F=A-s.width);for(var k=Array.from(a),P=n.measureText(a).width,N=0,D=0;D<k.length;++D){var Q=k[D];w?this.strokeText(n,i,Q,F,l,p,v,b,_,C):this.fillText(n,i,Q,F,l,u,h,g,m,b,_,C),N=n.measureText(a.substring(D+1)).width,F+=P-N+c,P=N}n.textAlign=M}},{key:"fillText",value:function(n,i,a,s,o,A,l,c,u,h,g,p){BH(n,i,A,l,h,g,p,this.imagePool,!0);var v,m=!it(c)&&c!==1;m&&(v=n.globalAlpha,n.globalAlpha=c*u),n.fillText(a,s,o),m&&(n.globalAlpha=v)}},{key:"strokeText",value:function(n,i,a,s,o,A,l,c,u,h){Ex(n,i,A,c,u,h,this.imagePool,!0);var g,p=!it(l)&&l!==1;p&&(g=n.globalAlpha,n.globalAlpha=l),n.strokeText(a,s,o),p&&(n.globalAlpha=g)}},{key:"drawTextDecorations",value:function(n,i,a,s,o,A,l,c,u,h){var g=i.textDecorationLine,p=i.textDecorationColor,v=i.textDecorationStyle,m=i.textDecorationThickness,w=m===void 0?1:m,b=i.textAlign,_=b===void 0?"start":b,C=i.lineWidth,M=C===void 0?1:C,F=i.metrics;if(!(!g||g==="none")){var k=F.lineMetrics,P=g.split(" ");switch(n.lineWidth=w,p&&(n.strokeStyle="rgba(".concat(p.r,", ").concat(p.g,", ").concat(p.b,", ").concat(p.alpha,")")),v){case"dashed":n.setLineDash([5,5]);break;case"dotted":n.setLineDash([2,2]);break;case"wavy":n.setLineDash([]);break;default:n.setLineDash([]);break}var N=l,D=i.textBaseline,Q=D===void 0?"alphabetic":D;Q==="middle"?N+=-F.height/2-o/2:Q==="bottom"||Q==="alphabetic"||Q==="ideographic"?N+=-F.height:(Q==="top"||Q==="hanging")&&(N+=-o);for(var H=0;H<s.length;H++){N+=o;var j=k[H];if(j){var q=M/2,J=A,ce=A+j.width;_==="center"||_==="middle"?(J=A-j.width/2,ce=A+j.width/2):(_==="right"||_==="end")&&(J=A-j.width,ce=A),J+=q,ce+=q;var se=Ko(P),W;try{for(se.s();!(W=se.n()).done;){var le=W.value,fe=N;switch(le){case"underline":fe+=2;break;case"overline":fe-=o-2;break;case"line-through":fe-=o/2;break;default:continue}v==="wavy"?this.drawWavyLine(n,J,ce,fe):(n.beginPath(),n.moveTo(J,fe),n.lineTo(ce,fe),n.stroke())}}catch(X){se.e(X)}finally{se.f()}}}n.setLineDash([])}}},{key:"drawWavyLine",value:function(n,i,a,s){var o=2,A=10,l=Math.floor((a-i)/A);n.beginPath(),n.moveTo(i,s);for(var c=0;c<l;c++){var u=i+c*A+A/4,h=s+o,g=i+c*A+A/2,p=s;n.quadraticCurveTo(u,h,g,p);var v=i+c*A+A*3/4,m=s-o,w=i+(c+1)*A,b=s;n.quadraticCurveTo(v,m,w,b)}n.stroke()}},{key:"drawToContext",value:function(n,i,a,s,o){this.render(n,i.parsedStyle,i,i.ownerDocument.defaultView.context,s,o)}}])})(H2),Zee=(function(r){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Be(this,e),t=wt(this,e),t.name="canvas-renderer",t.options=n,t}return bt(e,r),xe(e,[{key:"init",value:function(){var n,i=dt({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),a=this.context.imagePool,s=new H2(a),o=(n={},Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(n,we.CIRCLE,s),we.ELLIPSE,s),we.RECT,s),we.IMAGE,new Yee(a)),we.TEXT,new Xee(a)),we.LINE,s),we.POLYLINE,s),we.POLYGON,s),we.PATH,s),we.GROUP,void 0),Ke(Ke(Ke(n,we.HTML,void 0),we.MESH,void 0),we.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=o,this.context.styleRendererFactory=o,this.addRenderingPlugin(new CH(i))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])})(hA),Jee=xt(),ete=xt(),tte=xt(),nte=sn(),xH=(function(){function r(){var e=this;Be(this,r),this.isHit=function(t,n,i,a){var s=e.context.pointInPathPickerFactory[t.nodeName];if(s){var o=ms(nte,i),A=li(ete,oi(tte,n[0],n[1],0),o);if(s(t,new Kr(A[0],A[1]),a,e.isPointInPath,e.context,e.runtime))return!0}return!1},this.isPointInPath=function(t,n){var i=e.runtime.offscreenCanvasCreator.getOrCreateContext(e.context.config.offscreenCanvas),a=e.context.pathGeneratorFactory[t.nodeName];return a&&(i.beginPath(),a(i,t.parsedStyle),i.closePath()),i.isPointInPath(n.x,n.y)}}return xe(r,[{key:"apply",value:function(t,n){var i,a=this,s=t.renderingService,o=t.renderingContext;this.context=t,this.runtime=n;var A=(i=o.root)===null||i===void 0?void 0:i.ownerDocument;s.hooks.pick.tapPromise(r.tag,(function(){var l=lA(Or().mark(function c(u){return Or().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",a.pick(A,u));case 1:case"end":return h.stop()}},c)}));return function(c){return l.apply(this,arguments)}})()),s.hooks.pickSync.tap(r.tag,function(l){return a.pick(A,l)})}},{key:"pick",value:function(t,n){var i=n.topmost,a=n.position,s=a.x,o=a.y,A=oi(Jee,s,o,0),l=t.elementsFromBBox(A[0],A[1],A[0],A[1]),c=[],u=Ko(l),h;try{for(u.s();!(h=u.n()).done;){var g=h.value,p=g.getWorldTransform(),v=this.isHit(g,A,p,!1);if(v){var m=EU(g);if(m){var w=m.parsedStyle.clipPath,b=this.isHit(w,A,w.getWorldTransform(),!0);if(b){if(i)return n.picked=[g],n;c.push(g)}}else{if(i)return n.picked=[g],n;c.push(g)}}}}catch(_){u.e(_)}finally{u.f()}return n.picked=c,n}}])})();xH.tag="CanvasPicker";function rte(r,e,t){var n=r.parsedStyle,i=n.cx,a=i===void 0?0:i,s=n.cy,o=s===void 0?0:s,A=n.r,l=n.fill,c=n.stroke,u=n.lineWidth,h=u===void 0?1:u,g=n.increasedLineWidthForHitTesting,p=g===void 0?0:g,v=n.pointerEvents,m=v===void 0?"auto":v,w=(h+p)/2,b=to(a,o,e.x,e.y),_=yl(m,l,c),C=yt(_,2),M=C[0],F=C[1];return M&&F||t?b<=A+w:M?b<=A:F?b>=A-w&&b<=A+w:!1}function Rg(r,e,t,n){return r/(t*t)+e/(n*n)}function ite(r,e,t){var n=r.parsedStyle,i=n.cx,a=i===void 0?0:i,s=n.cy,o=s===void 0?0:s,A=n.rx,l=n.ry,c=n.fill,u=n.stroke,h=n.lineWidth,g=h===void 0?1:h,p=n.increasedLineWidthForHitTesting,v=p===void 0?0:p,m=n.pointerEvents,w=m===void 0?"auto":m,b=e.x,_=e.y,C=yl(w,c,u),M=yt(C,2),F=M[0],k=M[1],P=(g+v)/2,N=(b-a)*(b-a),D=(_-o)*(_-o);return F&&k||t?Rg(N,D,A+P,l+P)<=1:F?Rg(N,D,A,l)<=1:k?Rg(N,D,A-P,l-P)>=1&&Rg(N,D,A+P,l+P)<=1:!1}function el(r,e,t,n,i,a){return i>=r&&i<=r+t&&a>=e&&a<=e+n}function ate(r,e,t,n,i,a,s){var o=i/2;return el(r-o,e-o,t,i,a,s)||el(r+t-o,e-o,i,n,a,s)||el(r+o,e+n-o,t,i,a,s)||el(r-o,e+o,i,n,a,s)}function Qg(r,e,t,n,i,a,s,o){var A=(Math.atan2(o-e,s-r)+Math.PI*2)%(Math.PI*2),l={x:r+t*Math.cos(A),y:e+t*Math.sin(A)};return to(l.x,l.y,s,o)<=a/2}function Zo(r,e,t,n,i,a,s){var o=Math.min(r,t),A=Math.max(r,t),l=Math.min(e,n),c=Math.max(e,n),u=i/2;return a>=o-u&&a<=A+u&&s>=l-u&&s<=c+u?MG(r,e,t,n,a,s)<=i/2:!1}function SH(r,e,t,n,i){var a=r.length;if(a<2)return!1;for(var s=0;s<a-1;s++){var o=r[s][0],A=r[s][1],l=r[s+1][0],c=r[s+1][1];if(Zo(o,A,l,c,e,t,n))return!0}if(i){var u=r[0],h=r[a-1];if(Zo(u[0],u[1],h[0],h[1],e,t,n))return!0}return!1}var ste=1e-6;function O1(r){return Math.abs(r)<ste?0:r<0?-1:1}function ote(r,e,t){return(t[0]-r[0])*(e[1]-r[1])===(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}function TH(r,e,t){var n=!1,i=r.length;if(i<=2)return!1;for(var a=0;a<i;a++){var s=r[a],o=r[(a+1)%i];if(ote(s,o,[e,t]))return!0;O1(s[1]-t)>0!=O1(o[1]-t)>0&&O1(e-(t-s[1])*(s[0]-o[0])/(s[1]-o[1])-s[0])<0&&(n=!n)}return n}function _I(r,e,t){for(var n=!1,i=0;i<r.length;i++){var a=r[i];if(n=TH(a,e,t),n)break}return n}function Ate(r,e,t){var n=r.parsedStyle,i=n.x1,a=n.y1,s=n.x2,o=n.y2,A=n.lineWidth,l=A===void 0?1:A,c=n.increasedLineWidthForHitTesting,u=c===void 0?0:c,h=n.pointerEvents,g=h===void 0?"auto":h,p=n.fill,v=n.stroke,m=yl(g,p,v),w=yt(m,2),b=w[1];return!b&&!t||!l?!1:Zo(i,a,s,o,l+u,e.x,e.y)}function lte(r,e,t,n,i){for(var a=!1,s=e/2,o=0;o<r.length;o++){var A=r[o],l=A.currentPoint,c=A.params,u=A.prePoint,h=A.box;if(!(h&&!el(h.x-s,h.y-s,h.width+e,h.height+e,t,n)))switch(A.command){case"L":case"Z":if(a=Zo(u[0],u[1],l[0],l[1],e,t,n),a)return!0;break;case"Q":var g=NG(u[0],u[1],c[1],c[2],c[3],c[4],t,n);if(a=g<=e/2,a)return!0;break;case"C":var p=CF(u[0],u[1],c[1],c[2],c[3],c[4],c[5],c[6],t,n,i);if(a=p<=e/2,a)return!0;break;case"A":A.cubicParams||(A.cubicParams=o2(u[0],u[1],c[1],c[2],c[3],c[4],c[5],c[6],c[7],void 0));for(var v=A.cubicParams,m=u,w=0;w<v.length;w+=6){var b=CF(m[0],m[1],v[w],v[w+1],v[w+2],v[w+3],v[w+4],v[w+5],t,n,i);if(m=[v[w+4],v[w+5]],a=b<=e/2,a)return!0}break}}return a}function cte(r,e,t,n,i,a){var s=r.parsedStyle,o=s.lineWidth,A=o===void 0?1:o,l=s.increasedLineWidthForHitTesting,c=l===void 0?0:l,u=s.stroke,h=s.fill,g=s.d,p=s.pointerEvents,v=p===void 0?"auto":p,m=g.segments,w=g.hasArc,b=g.polylines,_=g.polygons,C=yl(v,(_==null?void 0:_.length)&&h,u),M=yt(C,2),F=M[0],k=M[1],P=qB(r),N=!1;return F||t?(w?N=n(r,e):N=_I(_,e.x,e.y)||_I(b,e.x,e.y),N):((k||t)&&(N=lte(m,A+c,e.x,e.y,P)),N)}function ute(r,e,t){var n=r.parsedStyle,i=n.stroke,a=n.fill,s=n.lineWidth,o=s===void 0?1:s,A=n.increasedLineWidthForHitTesting,l=A===void 0?0:A,c=n.points,u=n.pointerEvents,h=u===void 0?"auto":u,g=yl(h,a,i),p=yt(g,2),v=p[0],m=p[1],w=!1;return(m||t)&&(w=SH(c.points,o+l,e.x,e.y,!0)),!w&&(v||t)&&(w=TH(c.points,e.x,e.y)),w}function dte(r,e,t){var n=r.parsedStyle,i=n.lineWidth,a=i===void 0?1:i,s=n.increasedLineWidthForHitTesting,o=s===void 0?0:s,A=n.points,l=n.pointerEvents,c=l===void 0?"auto":l,u=n.fill,h=n.stroke,g=yl(c,u,h),p=yt(g,2),v=p[1];return!v&&!t||!a?!1:SH(A.points,a+o,e.x,e.y,!1)}function hte(r,e,t,n,i){var a=r.parsedStyle,s=a.radius,o=a.fill,A=a.stroke,l=a.lineWidth,c=l===void 0?1:l,u=a.increasedLineWidthForHitTesting,h=u===void 0?0:u,g=a.x,p=g===void 0?0:g,v=a.y,m=v===void 0?0:v,w=a.width,b=a.height,_=a.pointerEvents,C=_===void 0?"auto":_,M=yl(C,o,A),F=yt(M,2),k=F[0],P=F[1],N=s&&s.some(function(j){return j!==0}),D=c+h;if(N){var H=!1;return(P||t)&&(H=fte(p,m,w,b,s.map(function(j){return Rn(j,0,Math.min(Math.abs(w)/2,Math.abs(b)/2))}),D,e.x,e.y)),!H&&(k||t)&&(H=n(r,e)),H}else{var Q=D/2;if(k&&P||t)return el(p-Q,m-Q,w+Q,b+Q,e.x,e.y);if(k)return el(p,m,w,b,e.x,e.y);if(P)return ate(p,m,w,b,D,e.x,e.y)}return!1}function fte(r,e,t,n,i,a,s,o){var A=yt(i,4),l=A[0],c=A[1],u=A[2],h=A[3];return Zo(r+l,e,r+t-c,e,a,s,o)||Zo(r+t,e+c,r+t,e+n-u,a,s,o)||Zo(r+t-u,e+n,r+h,e+n,a,s,o)||Zo(r,e+n-h,r,e+l,a,s,o)||Qg(r+t-c,e+c,c,1.5*Math.PI,2*Math.PI,a,s,o)||Qg(r+t-u,e+n-u,u,0,.5*Math.PI,a,s,o)||Qg(r+h,e+n-h,h,.5*Math.PI,Math.PI,a,s,o)||Qg(r+l,e+l,l,Math.PI,1.5*Math.PI,a,s,o)}function gte(r,e,t,n,i,a){var s=r.parsedStyle,o=s.pointerEvents,A=o===void 0?"auto":o,l=s.x,c=l===void 0?0:l,u=s.y,h=u===void 0?0:u,g=s.width,p=s.height;if(A==="non-transparent-pixel"){var v=i.config.offscreenCanvas,m=a.offscreenCanvasCreator.getOrCreateCanvas(v),w=a.offscreenCanvasCreator.getOrCreateContext(v,{willReadFrequently:!0});m.width=g,m.height=p,i.defaultStyleRendererFactory[we.IMAGE].render(w,dt(dt({},r.parsedStyle),{},{x:0,y:0}),r,void 0,void 0,void 0);var b=w.getImageData(e.x-c,e.y-h,1,1).data;return b.every(function(_){return _!==0})}return!0}function pte(r,e,t,n){var i=r.getGeometryBounds();return e.x>=i.min[0]&&e.y>=i.min[1]&&e.x<=i.max[0]&&e.y<=i.max[1]}var vte=(function(r){function e(){var t;Be(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=wt(this,e,[].concat(i)),t.name="canvas-picker",t}return bt(e,r),xe(e,[{key:"init",value:function(){var n,i=(n={},Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(n,we.CIRCLE,rte),we.ELLIPSE,ite),we.RECT,hte),we.LINE,Ate),we.POLYLINE,dte),we.POLYGON,ute),we.PATH,cte),we.TEXT,pte),we.GROUP,null),we.IMAGE,gte),Ke(Ke(n,we.HTML,null),we.MESH,null));this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new xH)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])})(hA);function mte(r,e){var t=e.cx,n=t===void 0?0:t,i=e.cy,a=i===void 0?0:i,s=e.r;r.arc(n,a,s,0,Math.PI*2,!1)}function yte(r,e){var t=e.cx,n=t===void 0?0:t,i=e.cy,a=i===void 0?0:i,s=e.rx,o=e.ry;if(r.ellipse)r.ellipse(n,a,s,o,0,0,Math.PI*2,!1);else{var A=s>o?s:o,l=s>o?1:s/o,c=s>o?o/s:1;r.save(),r.scale(l,c),r.arc(n,a,A,0,Math.PI*2)}}function wte(r,e){var t=e.x1,n=e.y1,i=e.x2,a=e.y2,s=e.markerStart,o=e.markerEnd,A=e.markerStartOffset,l=e.markerEndOffset,c=0,u=0,h=0,g=0,p=0,v,m;s&&Ht(s)&&A&&(v=i-t,m=a-n,p=Math.atan2(m,v),c=Math.cos(p)*(A||0),u=Math.sin(p)*(A||0)),o&&Ht(o)&&l&&(v=t-i,m=n-a,p=Math.atan2(m,v),h=Math.cos(p)*(l||0),g=Math.sin(p)*(l||0)),r.moveTo(t+c,n+u),r.lineTo(i+h,a+g)}function bte(r,e){var t=e.markerStart,n=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,s=e.d,o=s.absolutePath,A=s.segments,l=0,c=0,u=0,h=0,g=0,p,v;if(t&&Ht(t)&&i){var m=t.parentNode.getStartTangent(),w=yt(m,2),b=w[0],_=w[1];p=b[0]-_[0],v=b[1]-_[1],g=Math.atan2(v,p),l=Math.cos(g)*(i||0),c=Math.sin(g)*(i||0)}if(n&&Ht(n)&&a){var C=n.parentNode.getEndTangent(),M=yt(C,2),F=M[0],k=M[1];p=F[0]-k[0],v=F[1]-k[1],g=Math.atan2(v,p),u=Math.cos(g)*(a||0),h=Math.sin(g)*(a||0)}for(var P=0;P<o.length;P++){var N=o[P],D=N[0],Q=o[P+1],H=P===0&&(l!==0||c!==0),j=(P===o.length-1||Q&&(Q[0]==="M"||Q[0]==="Z"))&&u!==0&&h!==0,q=H?[l,c]:[0,0],J=yt(q,2),ce=J[0],se=J[1],W=j?[u,h]:[0,0],le=yt(W,2),fe=le[0],X=le[1];switch(D){case"M":r.moveTo(N[1]+ce,N[2]+se);break;case"L":r.lineTo(N[1]+fe,N[2]+X);break;case"Q":r.quadraticCurveTo(N[1],N[2],N[3]+fe,N[4]+X);break;case"C":r.bezierCurveTo(N[1],N[2],N[3],N[4],N[5]+fe,N[6]+X);break;case"A":{var ne=A[P].arcParams,Ie=ne.cx,te=ne.cy,$=ne.rx,ue=ne.ry,me=ne.startAngle,Te=ne.endAngle,He=ne.xRotation,Je=ne.sweepFlag;if(r.ellipse)r.ellipse(Ie,te,$,ue,He,me,Te,!!(1-Je));else{var Bt=$>ue?$:ue,Lt=$>ue?1:$/ue,kt=$>ue?ue/$:1;r.translate(Ie,te),r.rotate(He),r.scale(Lt,kt),r.arc(0,0,Bt,me,Te,!!(1-Je)),r.scale(1/Lt,1/kt),r.rotate(-He),r.translate(-Ie,-te)}j&&r.lineTo(N[6]+u,N[7]+h);break}case"Z":r.closePath();break}}}function _te(r,e){var t=e.markerStart,n=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,s=e.points.points,o=s.length,A=s[0][0],l=s[0][1],c=s[o-1][0],u=s[o-1][1],h=0,g=0,p=0,v=0,m=0,w,b;t&&Ht(t)&&i&&(w=s[1][0]-s[0][0],b=s[1][1]-s[0][1],m=Math.atan2(b,w),h=Math.cos(m)*(i||0),g=Math.sin(m)*(i||0)),n&&Ht(n)&&a&&(w=s[o-1][0]-s[0][0],b=s[o-1][1]-s[0][1],m=Math.atan2(b,w),p=Math.cos(m)*(a||0),v=Math.sin(m)*(a||0)),r.moveTo(A+(h||p),l+(g||v));for(var _=1;_<o-1;_++){var C=s[_];r.lineTo(C[0],C[1])}r.lineTo(c,u)}function Ete(r,e){var t=e.markerStart,n=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,s=e.points.points,o=s.length,A=s[0][0],l=s[0][1],c=s[o-1][0],u=s[o-1][1],h=0,g=0,p=0,v=0,m=0,w,b;t&&Ht(t)&&i&&(w=s[1][0]-s[0][0],b=s[1][1]-s[0][1],m=Math.atan2(b,w),h=Math.cos(m)*(i||0),g=Math.sin(m)*(i||0)),n&&Ht(n)&&a&&(w=s[o-2][0]-s[o-1][0],b=s[o-2][1]-s[o-1][1],m=Math.atan2(b,w),p=Math.cos(m)*(a||0),v=Math.sin(m)*(a||0)),r.moveTo(A+h,l+g);for(var _=1;_<o-1;_++){var C=s[_];r.lineTo(C[0],C[1])}r.lineTo(c+p,u+v)}function Cte(r,e){var t=e.x,n=t===void 0?0:t,i=e.y,a=i===void 0?0:i,s=e.radius,o=e.width,A=e.height,l=o,c=A,u=s&&s.some(function(M){return M!==0});if(!u)r.rect(n,a,l,c);else{var h=o>0?1:-1,g=A>0?1:-1,p=h+g===0,v=s.map(function(M){return Rn(M,0,Math.min(Math.abs(l)/2,Math.abs(c)/2))}),m=yt(v,4),w=m[0],b=m[1],_=m[2],C=m[3];r.moveTo(h*w+n,a),r.lineTo(l-h*b+n,a),b!==0&&r.arc(l-h*b+n,g*b+a,b,-g*Math.PI/2,h>0?0:Math.PI,p),r.lineTo(l+n,c-g*_+a),_!==0&&r.arc(l-h*_+n,c-g*_+a,_,h>0?0:Math.PI,g>0?Math.PI/2:1.5*Math.PI,p),r.lineTo(h*C+n,c+a),C!==0&&r.arc(h*C+n,c-g*C+a,C,g>0?Math.PI/2:-Math.PI/2,h>0?Math.PI:0,p),r.lineTo(n,g*w+a),w!==0&&r.arc(h*w+n,g*w+a,w,h>0?Math.PI:0,g>0?Math.PI*1.5:Math.PI/2,p)}}var Bte=(function(r){function e(){var t;Be(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=wt(this,e,[].concat(i)),t.name="canvas-path-generator",t}return bt(e,r),xe(e,[{key:"init",value:function(){var n,i=(n={},Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(n,we.CIRCLE,mte),we.ELLIPSE,yte),we.RECT,Cte),we.LINE,wte),we.POLYLINE,Ete),we.POLYGON,_te),we.PATH,bte),we.TEXT,void 0),we.GROUP,void 0),we.IMAGE,void 0),Ke(Ke(Ke(n,we.HTML,void 0),we.MESH,void 0),we.FRAGMENT,void 0));this.context.pathGeneratorFactory=i}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])})(hA),xte=(function(){function r(e){Be(this,r),this.renderingContext=e.renderingContext,this.canvasConfig=e.config}return xe(r,[{key:"init",value:function(){var t=this.canvasConfig,n=t.container,i=t.canvas;if(i)this.$canvas=i,n&&i.parentElement!==n&&n.appendChild(i),this.$container=i.parentElement,this.canvasConfig.container=this.$container;else if(n&&(this.$container=Rt(n)?document.getElementById(n):n,this.$container)){var a=document.createElement("canvas");this.$container.appendChild(a),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=a}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(t,n){var i=this.canvasConfig.devicePixelRatio;this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*n,jV(this.$canvas,t,n)),this.renderingContext.renderReasons.add(kc.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)}},{key:"toDataURL",value:(function(){var e=lA(Or().mark(function n(){var i,a,s,o=arguments;return Or().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return i=o.length>0&&o[0]!==void 0?o[0]:{},a=i.type,s=i.encoderOptions,A.abrupt("return",this.context.canvas.toDataURL(a,s));case 1:case"end":return A.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t})()}])})(),Ste=(function(r){function e(){var t;Be(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=wt(this,e,[].concat(i)),t.name="canvas-context-register",t}return bt(e,r),xe(e,[{key:"init",value:function(){this.context.ContextService=xte}},{key:"destroy",value:function(){delete this.context.ContextService}}])})(hA),Vd=(function(r){function e(t){var n;return Be(this,e),n=wt(this,e,[t]),n.registerPlugin(new Ste),n.registerPlugin(new y7.Plugin),n.registerPlugin(new Bte),n.registerPlugin(new Zee),n.registerPlugin(new C7.Plugin),n.registerPlugin(new vte),n.registerPlugin(new _7.Plugin),n}return bt(e,r),xe(e)})(UG),Tte=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class Rv extends rs{constructor(e){super(Object.assign(Object.assign({},e),{style:Object.assign({},Rv.defaultStyleProps,e.style)})),this.rootPointerEvent=new Dp(null),this.forwardEvents=t=>{const n=this.context.canvas,i=n.context.renderingContext.root.ownerDocument.defaultView;this.normalizeToPointerEvent(t,i).forEach(s=>{const o=this.bootstrapEvent(this.rootPointerEvent,s,i,t);Nd(n.context.eventService,"mappingTable.pointerupoutside",[]),n.context.eventService.mapEvent(o)})}}get eventService(){return this.context.canvas.context.eventService}get events(){return[_e.CLICK,_e.POINTER_DOWN,_e.POINTER_MOVE,_e.POINTER_UP,_e.POINTER_OVER,_e.POINTER_LEAVE]}getDomElement(){return this.getShape("key").getDomElement()}render(e=this.parsedAttributes,t=this){this.drawKeyShape(e,t),this.drawPortShapes(e,t)}getKeyStyle(e){const t=cl(e,["dx","dy","innerHTML","pointerEvents","cursor"]),{dx:n=0,dy:i=0}=t,a=Tte(t,["dx","dy"]),[s,o]=this.getSize(e);return Object.assign(Object.assign({x:n,y:i},a),{width:s,height:o})}drawKeyShape(e,t){const n=this.getKeyStyle(e),{x:i,y:a,width:s=0,height:o=0}=n,A=this.upsert("key-container",Wr,{x:i,y:a,width:s,height:o,opacity:0},t);return this.upsert("key",wl,n,A)}connectedCallback(){if(!(this.context.canvas.getRenderer("main")instanceof Vd))return;const n=this.getDomElement();this.events.forEach(i=>{n.addEventListener(i,this.forwardEvents)})}attributeChangedCallback(e,t,n){e==="zIndex"&&t!==n&&(this.getDomElement().style.zIndex=n)}destroy(){const e=this.getDomElement();this.events.forEach(t=>{e.removeEventListener(t,this.forwardEvents)}),super.destroy()}normalizeToPointerEvent(e,t){const n=[];if(t.isTouchEvent(e))for(let i=0;i<e.changedTouches.length;i++){const a=e.changedTouches[i];ft(a.button)&&(a.button=0),ft(a.buttons)&&(a.buttons=1),ft(a.isPrimary)&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),ft(a.width)&&(a.width=a.radiusX||1),ft(a.height)&&(a.height=a.radiusY||1),ft(a.tiltX)&&(a.tiltX=0),ft(a.tiltY)&&(a.tiltY=0),ft(a.pointerType)&&(a.pointerType="touch"),ft(a.pointerId)&&(a.pointerId=a.identifier||0),ft(a.pressure)&&(a.pressure=a.force||.5),ft(a.twist)&&(a.twist=0),ft(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,a.type=e.type,n.push(a)}else if(t.isMouseEvent(e)){const i=e;ft(i.isPrimary)&&(i.isPrimary=!0),ft(i.width)&&(i.width=1),ft(i.height)&&(i.height=1),ft(i.tiltX)&&(i.tiltX=0),ft(i.tiltY)&&(i.tiltY=0),ft(i.pointerType)&&(i.pointerType="mouse"),ft(i.pointerId)&&(i.pointerId=1),ft(i.pressure)&&(i.pressure=.5),ft(i.twist)&&(i.twist=0),ft(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,n.push(i)}else n.push(e);return n}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.screen.x=t.screenX,e.screen.y=t.screenY,e.relatedTarget=null}bootstrapEvent(e,t,n,i){e.view=n,e.originalEvent=null,e.nativeEvent=i,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);const{x:a,y:s}=this.getViewportXY(t);e.viewport.x=a,e.viewport.y=s;const[o,A]=this.context.canvas.getCanvasByViewport([a,s]);return e.canvas.x=o,e.canvas.y=A,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e}getViewportXY(e){let t,n;const{offsetX:i,offsetY:a,clientX:s,clientY:o}=e;if(!it(i)&&!it(a))t=i,n=a;else{const A=this.eventService.client2Viewport({x:s,y:o});t=A.x,n=A.y}return{x:t,y:n}}onframe(){super.onframe();const{opacity:e}=this.attributes;this.getDomElement().style.opacity=`${e}`}}Rv.defaultStyleProps={size:[160,80],halo:!1,icon:!1,label:!1,pointerEvents:"auto"};var EI=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};let MH=class FH extends rs{constructor(e){super(Nr({style:FH.defaultStyleProps},e))}getKeyStyle(e){const[t,n]=this.getSize(e),i=super.getKeyStyle(e),{fillOpacity:a,opacity:s=a}=i,o=EI(i,["fillOpacity","opacity"]);return Object.assign(Object.assign({opacity:s},o),{width:t,height:n,x:-t/2,y:-n/2})}getBounds(){return this.getShape("key").getBounds()}getHaloStyle(e){if(e.halo===!1)return!1;const t=this.getShape("key").attributes,{fill:n,stroke:i}=t;EI(t,["fill","stroke"]);const a=Gn(this.getGraphicStyle(e),"halo"),s=Number(a.lineWidth),[o,A]=mt(this.getSize(e),[s,s]),{lineWidth:l}=a,c={fill:"transparent",lineWidth:l/2,width:o-l/2,height:A-l/2,x:-(o-l/2)/2,y:-(A-l/2)/2};return Object.assign(Object.assign({},a),c)}getIconStyle(e){const t=super.getIconStyle(e),[n,i]=this.getSize(e);return t?Object.assign({width:n*ao,height:i*ao},t):!1}drawKeyShape(e,t){const n=this.upsert("key",R2,this.getKeyStyle(e),t);return Q2(this),n}drawHaloShape(e,t){this.upsert("halo",Wr,this.getHaloStyle(e),t)}update(e){super.update(e),e&&("x"in e||"y"in e||"z"in e)&&U2(this)}};MH.defaultStyleProps={size:32};class Mte extends rs{constructor(e){super(e)}getKeyStyle(e){const[t,n]=this.getSize(e);return Object.assign(Object.assign({},super.getKeyStyle(e)),{width:t,height:n,x:-t/2,y:-n/2})}getIconStyle(e){const t=super.getIconStyle(e),{width:n,height:i}=this.getShape("key").attributes;return t?Object.assign({width:n*ao,height:i*ao},t):!1}drawKeyShape(e,t){return this.upsert("key",Wr,this.getKeyStyle(e),t)}}class Fte extends Lv{constructor(e){super(e)}getInnerR(e){return e.innerR||this.getOuterR(e)*3/8}getOuterR(e){return Math.min(...this.getSize(e))/2}getPoints(e){return hne(this.getOuterR(e),this.getInnerR(e))}getIconStyle(e){const t=super.getIconStyle(e),n=this.getInnerR(e)*2*ao;return t?Object.assign({width:n,height:n},t):!1}getPortXY(e,t){const{placement:n="top"}=t,i=this.getShape("key").getLocalBounds(),a=fne(this.getOuterR(e),this.getInnerR(e));return K2(i,n,a,!1)}}class Qv extends Lv{constructor(e){super(Nr({style:Qv.defaultStyleProps},e))}getPoints(e){const{direction:t}=e,[n,i]=this.getSize(e);return gne(n,i,t)}getPortXY(e,t){const{direction:n}=e,{placement:i="top"}=t,a=this.getShape("key").getLocalBounds(),[s,o]=this.getSize(e),A=pne(s,o,n);return K2(a,i,A,!1)}getIconStyle(e){const{icon:t,iconText:n,iconSrc:i,direction:a}=e;if(t===!1||vs(n||i))return!1;const s=Gn(this.getGraphicStyle(e),"icon"),o=this.getShape("key").getLocalBounds(),[A,l]=QJ(o,a),c=UJ(o,a)*2*ao;return Object.assign({x:A,y:l,width:c,height:c},s)}}Qv.defaultStyleProps={size:40,direction:"up"};var CI=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class Wc extends rs{constructor(e){super(Nr({style:Wc.defaultStyleProps},e)),this.type="combo",this.updateComboPosition(this.parsedAttributes)}getKeySize(e){const{collapsed:t,childrenNode:n=[]}=e;return n.length===0?this.getEmptyKeySize(e):t?this.getCollapsedKeySize(e):this.getExpandedKeySize(e)}getEmptyKeySize(e){const{padding:t,collapsedSize:n}=e,[i,a,s,o]=Fa(t);return mt(sa(n),[o+a,i+s,0])}getCollapsedKeySize(e){return sa(e.collapsedSize)}getExpandedKeySize(e){const t=this.getContentBBox(e);return[Is(t),Ps(t),0]}getContentBBox(e){const{childrenNode:t=[],padding:n}=e,i=t.map(s=>this.context.element.getElement(s)).filter(Boolean);if(i.length===0){const s=new vn,{x:o=0,y:A=0,size:l}=e,[c,u]=sa(l);return s.setMinMax([o-c/2,A-u/2,0],[o+c/2,A+u/2,0]),s}const a=uh(i.map(s=>s.getBounds()));return n?gA(a,n):a}drawCollapsedMarkerShape(e,t){const n=this.getCollapsedMarkerStyle(e);this.upsert("collapsed-marker",bH,n,t),Q2(this)}getCollapsedMarkerStyle(e){if(!e.collapsed||!e.collapsedMarker)return!1;const t=Gn(this.getGraphicStyle(e),"collapsedMarker"),{type:n}=t,i=CI(t,["type"]),a=this.getShape("key"),[s,o]=Ys(a.getLocalBounds(),"center"),A=Object.assign(Object.assign({},i),{x:s,y:o});if(n){const l=this.getCollapsedMarkerText(n,e);Object.assign(A,{text:l})}return A}getCollapsedMarkerText(e,t){const{childrenData:n=[]}=t,{model:i}=this.context;return e==="descendant-count"?i.getDescendantsData(this.id).length.toString():e==="child-count"?n.length.toString():e==="node-count"?i.getDescendantsData(this.id).filter(a=>i.getElementType(he(a))==="node").length.toString():$e(e)?e(n):""}getComboPosition(e){const{x:t=0,y:n=0,collapsed:i,childrenData:a=[]}=e;if(a.length===0)return[+t,+n,0];if(i){const{model:s}=this.context,o=s.getDescendantsData(this.id).filter(A=>!s.isCombo(he(A)));if(o.length>0&&o.some(dee)){const A=o.reduce((l,c)=>mt(l,Cr(c)),[0,0,0]);return es(A,o.length)}return[+t,+n,0]}return this.getContentBBox(e).center}getComboStyle(e){const[t,n]=this.getComboPosition(e);return{x:t,y:n,transform:[["translate",t,n]]}}updateComboPosition(e){const t=this.getComboStyle(e);Object.assign(this.style,t);const{x:n,y:i}=t;this.context.model.syncNodeLikeDatum({id:this.id,style:{x:n,y:i}}),U2(this)}render(e,t=this){super.render(e,t),this.drawCollapsedMarkerShape(e,t)}update(e={}){super.update(e),this.updateComboPosition(this.parsedAttributes)}onframe(){super.onframe(),this.attributes.collapsed||this.updateComboPosition(this.parsedAttributes),this.drawKeyShape(this.parsedAttributes,this)}animate(e,t){const n=super.animate(this.attributes.collapsed?e:e.map(i=>{var{x:a,y:s,z:o,transform:A}=i,l=CI(i,["x","y","z","transform"]);return l}),t);return n&&new Proxy(n,{set:(i,a,s)=>(a==="currentTime"&&Promise.resolve().then(()=>this.onframe()),Reflect.set(i,a,s))})}}Wc.defaultStyleProps={childrenNode:[],droppable:!0,draggable:!0,collapsed:!1,collapsedSize:32,collapsedMarker:!0,collapsedMarkerZIndex:1,collapsedMarkerFontSize:12,collapsedMarkerTextAlign:"center",collapsedMarkerTextBaseline:"middle",collapsedMarkerType:"child-count"};class kte extends Wc{constructor(e){super(e)}drawKeyShape(e,t){return this.upsert("key",xs,this.getKeyStyle(e),t)}getKeyStyle(e){const{collapsed:t}=e,n=super.getKeyStyle(e),[i]=this.getKeySize(e);return Object.assign(Object.assign(Object.assign({},n),t&&Gn(n,"collapsed")),{r:i/2})}getCollapsedKeySize(e){const[t,n]=sa(e.collapsedSize),i=Math.max(t,n)/2;return[i*2,i*2,0]}getExpandedKeySize(e){const t=this.getContentBBox(e),[n,i]=fA(t),a=Math.sqrt(Math.pow(n,2)+Math.pow(i,2))/2;return[a*2,a*2,0]}getIntersectPoint(e,t=!1){const n=this.getShape("key").getBounds();return Pv(e,n,t)}}class Ite extends Wc{constructor(e){super(e)}drawKeyShape(e,t){return this.upsert("key",Wr,this.getKeyStyle(e),t)}getKeyStyle(e){const t=super.getKeyStyle(e),[n,i]=this.getKeySize(e);return Object.assign(Object.assign(Object.assign({},t),e.collapsed&&Gn(t,"collapsed")),{width:n,height:i,x:-n/2,y:-i/2})}}const Pte={padding:10};function BI(r,e,t,n,i,a){const{padding:s}=Object.assign(Pte,a),o=Yo(t,s),A=Yo(n,s),l=[r,...i,e];let c=null;const u=[];for(let h=0,g=l.length;h<g-1;h++){const p=h+1,v=l[h],m=l[p],w=gee(v,m);let b=null;if(h===0)if(p===g-1)if(o.intersects(A))b=L1(v,m,o,A);else if(!Wp(v,o)&&!Wp(m,A)){const _=sl(v,o),C=sl(m,A);b=SI(_,C,_i(_,C)),b.points.unshift(_),b.points.push(C)}else w||(b=Lte(v,m,o,A));else Ja(m,o)?b=L1(v,m,o,Yo(m,s),c):w||(b=lp(v,m,o));else p===g-1?Ja(v,A)?b=L1(v,m,Yo(v,s),A,c):w||(b=kH(v,m,A,c)):w||(b=SI(v,m,c));b?(u.push(...b.points),c=b.direction):c=_i(v,m),p<g-1&&u.push(m)}return u.map(pl)}const Ote={N:"S",S:"N",W:"E",E:"W"},xI={N:-Math.PI/2,S:Math.PI/2,E:0,W:Math.PI};function _i(r,e){const[t,n]=r,[i,a]=e;return t===i?n>a?"N":"S":n===a?t>i?"W":"E":null}function Cx(r,e){return e==="N"||e==="S"?Ps(r):Is(r)}function SI(r,e,t){const n=[r[0],e[1]],i=[e[0],r[1]],a=_i(r,n),s=_i(r,i),o=t?Ote[t]:null,A=a===t||a!==o&&s!==t?n:i;return{points:[A],direction:_i(A,e)}}function lp(r,e,t){if(Wp(r,t)){const n=qd(r,e,t);return{points:[n],direction:_i(n,e)}}else{const n=sl(r,t),a=["left","right"].includes(Md(r,t))?[e[0],n[1]]:[n[0],e[1]];return{points:[a],direction:_i(a,e)}}}function kH(r,e,t,n){const i=Wp(e,t)?e:sl(e,t),a=[[i[0],r[1]],[r[0],i[1]]],s=a.filter(A=>RJ(A,t)&&!Z4(A,t,!0)),o=s.filter(A=>_i(A,r)!==n);if(o.length>0){const A=o.find(l=>_i(r,l)===n)||o[0];return{points:[A],direction:_i(A,e)}}else{const A=wK(a,s)[0],l=sA(e,A,Cx(t,n)/2);return{points:[qd(l,r,t),l],direction:_i(l,e)}}}function Lte(r,e,t,n){let i=lp(r,e,t);const a=Gd(i.points[0]);if(Ja(a,n)){i=lp(e,r,n);const s=Gd(i.points[0]);if(Ja(s,t)){const o=sA(r,a,Cx(t,_i(r,a))/2),A=sA(e,s,Cx(n,_i(e,s))/2),l=[(o[0]+A[0])/2,(o[1]+A[1])/2],c=lp(r,l,t),u=kH(l,e,n,c.direction);i.points=[c.points[0],u.points[0]],i.direction=u.direction}}return i}function L1(r,e,t,n,i){const s=uh([t,n]),o=yn(e,s.center)>yn(r,s.center),[A,l]=o?[e,r]:[r,e],c=Ps(s)+Is(s);let u;if(i){const p=[A[0]+c*Math.cos(xI[i]),A[1]+c*Math.sin(xI[i])];u=sA(sl(p,s),p,.01)}else u=sA(sl(A,s),A,-.01);let h=qd(u,l,s),g=[Zu(u,2),Zu(h,2)];if(Qn(Zu(u),Zu(h))){const p=L2(rn(u,A),[1,0,0])+Math.PI/2;h=[l[0]+c*Math.cos(p),l[1]+c*Math.sin(p),0],h=Zu(sA(sl(h,s),l,-.01),2);const v=qd(u,h,s);g=[u,v,h]}return{points:o?g.reverse():g,direction:_i(o?u:h,e)}}function qd(r,e,t){let n=[r[0],e[1]];return Ja(n,t)&&(n=[e[0],r[1]]),n}function IH(r,e,t,n,i){let A=typeof e=="number"?e:.5;e==="start"&&(A=0),e==="end"&&(A=.99);const l=Gr(r.getPoint(A)),c=Gr(r.getPoint(A+.01));let u=e==="start"?"left":e==="end"?"right":"center";if(cH(l,c)||!t){const[w,b]=TI(r,A,n,i);return{transform:[["translate",w,b]],textAlign:u}}let h=Math.atan2(c[1]-l[1],c[0]-l[0]);c[0]<l[0]&&(u=u==="center"?u:u==="left"?"right":"left",n*=-1,h+=Math.PI);const[p,v]=TI(r,A,n,i,h),m=[["translate",p,v],["rotate",h/Math.PI*180]];return{textAlign:u,transform:m}}function Nte(r,e,t,n,i){var a,s;const o=((a=r.badge)===null||a===void 0?void 0:a.getGeometryBounds().halfExtents[0])*2||0,A=((s=r.label)===null||s===void 0?void 0:s.getGeometryBounds().halfExtents[0])*2||0;return IH(r.key,t,!0,(A?(A/2+o/2)*(e==="suffix"?1:-1):0)+n,i)}function TI(r,e,t,n,i){const[a,s]=Gr(r.getPoint(e));let o=t,A=n;return i&&(o=t*Math.cos(i)-n*Math.sin(i),A=t*Math.sin(i)+n*Math.cos(i)),[a+o,s+A]}function Bx(r,e,t,n){if(Qn(r,e))return r;const i=rn(e,r),a=[r[0]+t*i[0],r[1]+t*i[1]],s=no(Iv(i,!1));return a[0]+=n*s[0],a[1]+=n*s[1],a}function Dte(r){return je(r)?[r,-r]:r}function Rte(r){return je(r)?[r,1-r]:r}function Qte(r,e,t){return[["M",r[0],r[1]],["Q",t[0],t[1],e[0],e[1]]]}function PH(r,e,t){return[["M",r[0],r[1]],["C",t[0][0],t[0][1],t[1][0],t[1][1],e[0],e[1]]]}function z2(r,e=0,t=!1){const n=r.length-1,i=r[0],a=r[n],s=r.slice(1,n),o=[["M",i[0],i[1]]];return s.forEach((A,l)=>{const c=s[l-1]||i,u=s[l+1]||a;if(!uH(c,A,u)&&e){const[h,g]=Ute(c,A,u,e);o.push(["L",h[0],h[1]],["Q",A[0],A[1],g[0],g[1]],["L",g[0],g[1]])}else o.push(["L",A[0],A[1]])}),o.push(["L",a[0],a[1]]),t&&o.push(["Z"]),o}function Ute(r,e,t,n){const i=$p(r,e),a=$p(t,e),s=Math.min(n,Math.min(i,a)/2),o=[e[0]-s/i*(e[0]-r[0]),e[1]-s/i*(e[1]-r[1])],A=[e[0]-s/a*(e[0]-t[0]),e[1]-s/a*(e[1]-t[1])];return[o,A]}const Hte=r=>{const e=Math.PI/2,t=Ps(r)/2,n=Is(r)/2,i=Math.atan2(t,n)/2,a=Math.atan2(n,t)/2;return{top:[-e-a,-e+a],"top-right":[-e+a,-i],"right-top":[-e+a,-i],right:[-i,i],"bottom-right":[i,e-a],"right-bottom":[i,e-a],bottom:[e-a,e+a],"bottom-left":[e+a,Math.PI-i],"left-bottom":[e+a,Math.PI-i],left:[Math.PI-i,Math.PI+i],"top-left":[Math.PI+i,-e-a],"left-top":[Math.PI+i,-e-a]}};function OH(r,e,t,n,i){const a=Yo(r),s=r.getCenter();let o=n&&uA(n),A=i&&uA(i);if(!o||!A){const l=Hte(a),c=l[e][0],u=l[e][1],[h,g]=fA(a),p=Math.max(h,g),v=mt(s,[p*Math.cos(c),p*Math.sin(c),0]),m=mt(s,[p*Math.cos(u),p*Math.sin(u),0]);o=Sx(r,v),A=Sx(r,m),t||([o,A]=[A,o])}return[o,A]}function zte(r,e,t,n,i,a){const s=r.getPorts()[i||a],o=r.getPorts()[a||i];let[A,l]=OH(r,e,t,s,o);const c=jte(r,A,l,n);return s&&(A=Wd(s,c[0])),o&&(l=Wd(o,c.at(-1))),PH(A,l,c)}function jte(r,e,t,n){const i=r.getCenter();if(Qn(e,t)){const a=rn(e,i),s=[n*Math.sign(a[0])||n/2,n*Math.sign(a[1])||-n/2,0];return[mt(e,s),mt(t,$a(s,[1,-1,1]))]}return[sA(i,e,yn(i,e)+n),sA(i,t,yn(i,t)+n)]}function Kte(r,e,t,n,i,a,s){const o=G2(r),A=o[a||s],l=o[s||a];let[c,u]=OH(r,t,n,A,l);const h=Gte(r,c,u,i);return A&&(c=Wd(A,h[0])),l&&(u=Wd(l,h.at(-1))),z2([c,...h,u],e)}function Gte(r,e,t,n){const i=[],a=Yo(r);if(Qn(e,t))switch(Md(e,a)){case"left":i.push([e[0]-n,e[1]]),i.push([e[0]-n,e[1]+n]),i.push([e[0],e[1]+n]);break;case"right":i.push([e[0]+n,e[1]]),i.push([e[0]+n,e[1]+n]),i.push([e[0],e[1]+n]);break;case"top":i.push([e[0],e[1]-n]),i.push([e[0]+n,e[1]-n]),i.push([e[0]+n,e[1]]);break;case"bottom":i.push([e[0],e[1]+n]),i.push([e[0]+n,e[1]+n]),i.push([e[0]+n,e[1]]);break}else{const s=Md(e,a),o=Md(t,a);if(s===o){const A=s;let l,c;switch(A){case"left":l=Math.min(e[0],t[0])-n,i.push([l,e[1]]),i.push([l,t[1]]);break;case"right":l=Math.max(e[0],t[0])+n,i.push([l,e[1]]),i.push([l,t[1]]);break;case"top":c=Math.min(e[1],t[1])-n,i.push([e[0],c]),i.push([t[0],c]);break;case"bottom":c=Math.max(e[1],t[1])+n,i.push([e[0],c]),i.push([t[0],c]);break}}else{const A=(h,g)=>({left:[g[0]-n,g[1]],right:[g[0]+n,g[1]],top:[g[0],g[1]-n],bottom:[g[0],g[1]+n]})[h],l=A(s,e),c=A(o,t),u=qd(l,c,a);i.push(l,u,c)}}return i}function xx(r,e){const t=new Set,n=new Set,i=new Set;return r.forEach(a=>{e(a).forEach(o=>{t.add(o),r.includes(o.source)&&r.includes(o.target)?n.add(o):i.add(o)})}),{edges:Array.from(t),internal:Array.from(n),external:Array.from(i)}}function MI(r,e){const t=[];let n=r;for(;n;){t.push(n);const i=e(he(n));if(i)n=i;else break}if(t.some(i=>{var a;return(a=i.style)===null||a===void 0?void 0:a.collapsed})){const i=t.reverse().findIndex(Qi);return t[i]||t.at(-1)}return r}function Vte(r,e){return e||(r<4?10:r===4?12:r*2.5)}const qte=(r,e)=>{const t=Math.max(r,e)/2;return[["M",-r/2,0],["A",t,t,0,1,0,2*t-r/2,0],["A",t,t,0,1,0,-r/2,0],["Z"]]},LH=(r,e)=>[["M",-r/2,0],["L",r/2,-e/2],["L",r/2,e/2],["Z"]],Wte=(r,e)=>[["M",-r/2,0],["L",0,-e/2],["L",r/2,0],["L",0,e/2],["Z"]],$te=(r,e)=>[["M",-r/2,0],["L",r/2,-e/2],["L",4*r/5-r/2,0],["L",r/2,e/2],["Z"]],Yte=(r,e)=>[["M",-r/2,-e/2],["L",r/2,-e/2],["L",r/2,e/2],["L",-r/2,e/2],["Z"]],Xte=(r,e)=>{const t=r/2,n=r/7,i=r-n;return[["M",-t,0],["L",0,-e/2],["L",0,e/2],["Z"],["M",i-t,-e/2],["L",i+n-t,-e/2],["L",i+n-t,e/2],["L",i-t,e/2],["Z"]]},Zte=(r,e)=>[["M",r/2,-e/2],["L",-r/2,0],["L",r/2,0],["L",-r/2,0],["L",r/2,e/2]],Jte=Object.freeze(Object.defineProperty({__proto__:null,circle:qte,diamond:Wte,rect:Yte,simple:Zte,triangle:LH,triangleRect:Xte,vee:$te},Symbol.toStringTag,{value:"Module"}));var Ug=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class vA extends _H{constructor(e){super(Nr({style:vA.defaultStyleProps},e)),this.type="edge"}get sourceNode(){const{sourceNode:e}=this.parsedAttributes;return this.context.element.getElement(e)}get targetNode(){const{targetNode:e}=this.parsedAttributes;return this.context.element.getElement(e)}getKeyStyle(e){const t=this.getGraphicStyle(e),{loop:n}=t,i=Ug(t,["loop"]),{sourceNode:a,targetNode:s}=this,A={d:n&&lne(a,s)?this.getLoopPath(e):this.getKeyPath(e)};return ci.PARSED_STYLE_LIST.forEach(l=>{l in i&&(A[l]=i[l])}),A}getLoopPath(e){const{sourcePort:t,targetPort:n}=e,i=this.sourceNode,a=Yo(i),s=Math.max(Is(a),Ps(a)),{placement:o,clockwise:A,dist:l=s}=Gn(this.getGraphicStyle(e),"loop");return zte(i,o,A,l,t,n)}getEndpoints(e,t=!0,n=[]){const{sourcePort:i,targetPort:a}=e,{sourceNode:s,targetNode:o}=this,[A,l]=une(s,o,i,a);if(!t){const g=A?uA(A):s.getCenter(),p=l?uA(l):o.getCenter();return[g,p]}const c=typeof n=="function"?n():n,u=OI(A||s,c[0]||l||o),h=OI(l||o,c[c.length-1]||A||s);return[u,h]}getHaloStyle(e){if(e.halo===!1)return!1;const t=this.getKeyStyle(e),n=Gn(this.getGraphicStyle(e),"halo");return Object.assign(Object.assign({},t),n)}getLabelStyle(e){if(e.label===!1||!e.labelText)return!1;const t=Gn(this.getGraphicStyle(e),"label"),{placement:n,offsetX:i,offsetY:a,autoRotate:s,maxWidth:o}=t,A=Ug(t,["placement","offsetX","offsetY","autoRotate","maxWidth"]),l=IH(this.shapeMap.key,n,s,i,a),c=this.shapeMap.key.getLocalBounds(),u=Mee([c.min,c.max],o);return Object.assign({wordWrapWidth:u},l,A)}getBadgeStyle(e){if(e.badge===!1||!e.badgeText)return!1;const t=Gn(e,"badge"),{offsetX:n,offsetY:i,placement:a}=t,s=Ug(t,["offsetX","offsetY","placement"]);return Object.assign(s,Nte(this.shapeMap,a,e.labelPlacement,n,i))}drawArrow(e,t){var n;const i=t==="start",s=e[t==="start"?"startArrow":"endArrow"],o=this.shapeMap.key;if(s){const A=this.getArrowStyle(e,i),[l,c,u]=i?["markerStart","markerStartOffset","startArrowOffset"]:["markerEnd","markerEndOffset","endArrowOffset"],h=o.parsedStyle[l];if(h)h.attr(A);else{const g=A.src?Ah:ci,p=new g({style:A});o.style[l]=p}o.style[c]=e[u]||A.width/2+ +A.lineWidth}else{const A=i?"markerStart":"markerEnd";(n=o.style[A])===null||n===void 0||n.destroy(),o.style[A]=null}}getArrowStyle(e,t){const n=this.getShape("key").attributes,i=t?"startArrow":"endArrow",a=Gn(this.getGraphicStyle(e),i),{size:s,type:o}=a,A=Ug(a,["size","type"]),[l,c]=sa(Vte(n.lineWidth,s)),h=($e(o)?o:Jte[o]||LH)(l,c);return Object.assign(cl(n,["stroke","strokeOpacity","fillOpacity"]),{width:l,height:c},Object.assign({},h&&{d:h,fill:o==="simple"?"":n.stroke}),A)}drawLabelShape(e,t){const n=this.getLabelStyle(e);this.upsert("label",Ts,n,t)}drawHaloShape(e,t){const n=this.getHaloStyle(e);this.upsert("halo",ci,n,t)}drawBadgeShape(e,t){const n=this.getBadgeStyle(e);this.upsert("badge",qc,n,t)}drawSourceArrow(e){this.drawArrow(e,"start")}drawTargetArrow(e){this.drawArrow(e,"end")}drawKeyShape(e,t){const n=this.getKeyStyle(e);return this.upsert("key",ci,n,t)}render(e=this.parsedAttributes,t=this){this.drawKeyShape(e,t),this.getShape("key")&&(this.drawSourceArrow(e),this.drawTargetArrow(e),this.drawLabelShape(e,t),this.drawHaloShape(e,t),this.drawBadgeShape(e,t))}onframe(){this.drawKeyShape(this.parsedAttributes,this),this.drawSourceArrow(this.parsedAttributes),this.drawTargetArrow(this.parsedAttributes),this.drawHaloShape(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this),this.drawBadgeShape(this.parsedAttributes,this)}animate(e,t){const n=super.animate(e,t);return n&&new Proxy(n,{set:(i,a,s)=>(a==="currentTime"&&Promise.resolve().then(()=>this.onframe()),Reflect.set(i,a,s))})}}vA.defaultStyleProps={badge:!0,badgeOffsetX:0,badgeOffsetY:0,badgePlacement:"suffix",isBillboard:!0,label:!0,labelAutoRotate:!0,labelIsBillboard:!0,labelMaxWidth:"80%",labelOffsetX:4,labelOffsetY:0,labelPlacement:"center",labelTextBaseline:"middle",labelWordWrap:!1,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloPointerEvents:"none",haloStrokeOpacity:.25,haloZIndex:-1,loop:!0,startArrow:!1,startArrowLineDash:0,startArrowLineJoin:"round",startArrowLineWidth:1,startArrowTransformOrigin:"center",startArrowType:"vee",endArrow:!1,endArrowLineDash:0,endArrowLineJoin:"round",endArrowLineWidth:1,endArrowTransformOrigin:"center",endArrowType:"vee",loopPlacement:"top",loopClockwise:!0};class El extends vA{constructor(e){super(Nr({style:El.defaultStyleProps},e))}getKeyPath(e){const[t,n]=this.getEndpoints(e),{controlPoints:i,curvePosition:a,curveOffset:s}=e,o=this.getControlPoints(t,n,Rte(a),Dte(s),i);return PH(t,n,o)}getControlPoints(e,t,n,i,a){return(a==null?void 0:a.length)===2?a:[Bx(e,t,n[0],i[0]),Bx(e,t,n[1],i[1])]}}El.defaultStyleProps={curvePosition:.5,curveOffset:20};class Uv extends El{constructor(e){super(Nr({style:Uv.defaultStyleProps},e))}getControlPoints(e,t,n,i){const a=t[0]-e[0];return[[e[0]+a*n[0]+i[0],e[1]],[t[0]-a*n[1]+i[1],t[1]]]}}Uv.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};class Hv extends El{constructor(e){super(Nr({style:Hv.defaultStyleProps},e))}get ref(){return this.context.model.getRootsData()[0]}getEndpoints(e){if(this.sourceNode.id===this.ref.id)return super.getEndpoints(e);const t=Cr(this.ref),n=this.sourceNode.getIntersectPoint(t,!0),i=this.targetNode.getIntersectPoint(t);return[n,i]}toRadialCoordinate(e){const t=Cr(this.ref),n=yn(e,t),i=sH(rn(e,t));return[n,i]}getControlPoints(e,t,n,i){const[a,s]=this.toRadialCoordinate(e),[o]=this.toRadialCoordinate(t),A=o-a;return[[e[0]+(A*n[0]+i[0])*Math.cos(s),e[1]+(A*n[0]+i[0])*Math.sin(s)],[t[0]-(A*n[1]-i[0])*Math.cos(s),t[1]-(A*n[1]-i[0])*Math.sin(s)]]}}Hv.defaultStyleProps={curvePosition:.5,curveOffset:20};class zv extends El{constructor(e){super(Nr({style:zv.defaultStyleProps},e))}getControlPoints(e,t,n,i){const a=t[1]-e[1];return[[e[0],e[1]+a*n[0]+i[0]],[t[0],t[1]-a*n[1]+i[1]]]}}zv.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};let NH=class DH extends vA{constructor(e){super(Nr({style:DH.defaultStyleProps},e))}getKeyPath(e){const[t,n]=this.getEndpoints(e);return[["M",t[0],t[1]],["L",n[0],n[1]]]}};NH.defaultStyleProps={};const ene={enableObstacleAvoidance:!1,offset:10,maxAllowedDirectionChange:Math.PI/2,maximumLoops:3e3,gridSize:5,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{right:{stepX:1,stepY:0},left:{stepX:-1,stepY:0},bottom:{stepX:0,stepY:1},top:{stepX:0,stepY:-1}},penalties:{0:0,90:0},distFunc:$p},Ws=r=>`${Math.round(r[0])}|||${Math.round(r[1])}`;function tl(r,e){const t=n=>Math.round(n/e);return je(r)?t(r):r.map(t)}function tne(r,e){const t=Math.abs(r-e);return t>Math.PI?2*Math.PI-t:t}function FI(r,e){const t=e[0]-r[0],n=e[1]-r[1];return!t&&!n?0:Math.atan2(n,t)}function RH(r,e,t,n){const i=FI(r,e),a=t[Ws(r)],o=FI(a||n,r);return tne(o,i)}const nne=(r,e)=>{const{offset:t,gridSize:n}=e,i={};return r.forEach(a=>{if(!a||a.destroyed||!a.isVisible())return;const s=gA(a.getRenderBounds(),t);for(let o=tl(s.min[0],n);o<=tl(s.max[0],n);o+=1)for(let A=tl(s.min[1],n);A<=tl(s.max[1],n);A+=1)i[`${o}|||${A}`]=!0}),i};function kI(r,e,t){return Math.min(...e.map(n=>t(r,n)))}function rne(r,e,t){let n=r[0],i=t(r[0],e);for(let a=0;a<r.length;a++){const s=r[a],o=t(s,e);o<i&&(n=s,i=o)}return n}const II=(r,e,t,n)=>{if(!e)return[r];const{directionMap:i,offset:a}=n,s=gA(e.getRenderBounds(),a),o=Object.keys(i).reduce((A,l)=>{if(t.includes(l)){const c=i[l],[u,h]=fA(s),g=[r[0]+c.stepX*u,r[1]+c.stepY*h],p=HJ(s);for(let v=0;v<p.length;v++){const m=N2([r,g],p[v]);m&&Z4(m,s)&&A.push(m)}}return A},[]);return Ja(r,s)||o.push(r),o.map(A=>tl(A,n.gridSize))},ine=(r,e,t,n,i,a,s)=>{const o=[];let A=[a[0]===n[0]?n[0]:r[0]*s,a[1]===n[1]?n[1]:r[1]*s];o.unshift(A);let l=r,c=e[Ws(l)];for(;c;){const g=c,p=l;RH(g,p,e,t)&&(A=[g[0]===p[0]?A[0]:g[0]*s,g[1]===p[1]?A[1]:g[1]*s],o.unshift(A)),c=e[Ws(g)],l=g}const u=i.map(g=>[g[0]*s,g[1]*s]),h=rne(u,A,$p);return o.unshift(h),o};function ane(r,e,t,n){const i=pl(r.getCenter()),a=pl(e.getCenter()),s=Object.assign(ene,n),{gridSize:o}=s,A=s.enableObstacleAvoidance?t:[r,e],l=nne(A,s),c=tl(i,o),u=tl(a,o),h=II(i,r,s.startDirections,s),g=II(a,e,s.endDirections,s);h.forEach(P=>delete l[Ws(P)]),g.forEach(P=>delete l[Ws(P)]);const p={},v={},m={},w={},b={},_=new sne;for(let P=0;P<h.length;P++){const N=h[P],D=Ws(N);p[D]=N,w[D]=0,b[D]=kI(N,g,s.distFunc),_.add({id:D,value:b[D]})}const C=g.map(P=>Ws(P));let M=s.maximumLoops,F,k=1/0;for(const[P,N]of Object.entries(p))b[P]<=k&&(k=b[P],F=N);for(;Object.keys(p).length>0&&M>0;){const P=_.minId(!1);if(P)F=p[P];else break;const N=Ws(F);if(C.includes(N))return ine(F,m,c,a,h,u,o);delete p[N],_.remove(N),v[N]=!0;for(const D of Object.values(s.directionMap)){const Q=mt(F,[D.stepX,D.stepY]),H=Ws(Q);if(v[H])continue;const j=RH(F,Q,m,c);if(j>s.maxAllowedDirectionChange||l[H])continue;p[H]||(p[H]=Q);const q=s.penalties[j],J=s.distFunc(F,Q)+(isNaN(q)?o:q),ce=w[N]+J,se=w[H];se&&ce>=se||(m[H]=F,w[H]=ce,b[H]=ce+kI(Q,g,s.distFunc),_.add({id:H,value:b[H]}))}M-=1}return[]}class sne{constructor(){this.arr=[],this.map={},this.arr=[],this.map={}}_innerAdd(e,t){let n=0,i=t-1;for(;i-n>1;){const a=Math.floor((n+i)/2);if(this.arr[a].value>e.value)i=a;else if(this.arr[a].value<e.value)n=a;else{this.arr.splice(a,0,e),this.map[e.id]=!0;return}}this.arr.splice(i,0,e),this.map[e.id]=!0}add(e){delete this.map[e.id];const t=this.arr.length;if(!t||this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)}remove(e){this.map[e]&&delete this.map[e]}_clearAndGetMinId(){let e;for(let t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e}_findFirstId(){for(;this.arr.length;){const e=this.arr.shift();if(this.map[e.id])return e.id}}minId(e){return e?this._clearAndGetMinId():this._findFirstId()}}class jv extends vA{constructor(e){super(Nr({style:jv.defaultStyleProps},e))}getControlPoints(e){const{router:t}=e,{sourceNode:n,targetNode:i}=this,[a,s]=this.getEndpoints(e,!1);let o=[];if(!t)o=e.controlPoints;else if(t.type==="shortest-path"){const A=this.context.element.getNodes();o=ane(n,i,A,t),o.length||(o=BI(a,s,n,i,e.controlPoints,{padding:t.offset}))}else t.type==="orth"&&(o=BI(a,s,n,i,e.controlPoints,t));return o}getPoints(e){const t=this.getControlPoints(e),[n,i]=this.getEndpoints(e,!0,t);return[n,...t,i]}getKeyPath(e){const t=this.getPoints(e);return z2(t,e.radius)}getLoopPath(e){const{sourcePort:t,targetPort:n,radius:i}=e,a=this.sourceNode,s=Yo(a),o=Math.max(Is(s),Ps(s))/4,{placement:A,clockwise:l,dist:c=o}=Gn(this.getGraphicStyle(e),"loop");return Kte(a,i,A,l,c,t,n)}}jv.defaultStyleProps={radius:0,controlPoints:[],router:!1};class Kv extends vA{constructor(e){super(Nr({style:Kv.defaultStyleProps},e))}getKeyPath(e){const{curvePosition:t,curveOffset:n}=e,[i,a]=this.getEndpoints(e),s=e.controlPoint||Bx(i,a,t,n);return Qte(i,a,s)}}Kv.defaultStyleProps={curvePosition:.5,curveOffset:30};var one=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function ph(r){return r instanceof rs&&r.type==="node"}function QH(r){return r instanceof vA}function j2(r){return r instanceof Wc}function Ane(r){return ph(r)||QH(r)||j2(r)}function lne(r,e){return!r||!e?!1:r===e}const cne={top:[.5,0],right:[1,.5],bottom:[.5,1],left:[0,.5],"left-top":[0,0],"top-left":[0,0],"left-bottom":[0,1],"bottom-left":[0,1],"right-top":[1,0],"top-right":[1,0],"right-bottom":[1,1],"bottom-right":[1,1],default:[.5,.5]};function K2(r,e,t=cne,n=!0){const i=[.5,.5],a=Rt(e)?jr(t,e.toLocaleLowerCase(),i):e;if(!n&&Rt(e))return a;const[s,o]=a||i;return[r.min[0]+Is(r)*s,r.min[1]+Ps(r)*o]}function G2(r){if(!r)return{};const e=r.getPorts();return(r.attributes.ports||[]).forEach((n,i)=>{var a;const{key:s,placement:o}=n;UH(n)&&(e[a=s||i]||(e[a]=Ys(r.getShape("key").getBounds(),o)))}),e}function UH(r){const{r:e}=r;return!e||Number(e)===0}function uA(r){return zc(r)?r:r.getPosition()}function une(r,e,t,n){const i=PI(r,e,t,n),a=PI(e,r,n,t);return[i,a]}function PI(r,e,t,n){const i=G2(r);if(t)return i[t];const a=Object.values(i);if(a.length===0)return;const s=a.map(l=>uA(l)),o=dne(e,n),[A]=mee(s,o);return a.find(l=>uA(l)===A)}function dne(r,e){const t=G2(r);if(e)return[uA(t[e])];const n=Object.values(t);return n.length>0?n.map(i=>uA(i)):[r.getCenter()]}function OI(r,e){return j2(r)||ph(r)?Sx(r,e):Wd(r,e)}function Wd(r,e){if(!r||!e)return[0,0,0];if(zc(r))return r;if(r.attributes.linkToCenter)return r.getPosition();const t=zc(e)?e:ph(e)?e.getCenter():e.getPosition();return Pv(t,r.getBounds())}function Sx(r,e){if(!r||!e)return[0,0,0];const t=zc(e)?e:ph(e)?e.getCenter():e.getPosition();return r.getIntersectPoint(t)||r.getCenter()}function LI(r,e="bottom",t=0,n=0,i=!1){const a=e.split("-"),[s,o]=Ys(r,e),[A,l]=i?["bottom","top"]:["top","bottom"],c=a.includes("top")?l:a.includes("bottom")?A:"middle",u=a.includes("left")?"right":a.includes("right")?"left":"center";return{transform:[["translate",s+t,o+n]],textBaseline:c,textAlign:u}}function hne(r,e){return[[0,-r],[e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)],[r*Math.cos(Math.PI/10),-r*Math.sin(Math.PI/10)],[e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[r*Math.cos(3*Math.PI/10),r*Math.sin(3*Math.PI/10)],[0,e],[-r*Math.cos(3*Math.PI/10),r*Math.sin(3*Math.PI/10)],[-e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[-r*Math.cos(Math.PI/10),-r*Math.sin(Math.PI/10)],[-e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)]]}function fne(r,e){const t={};return t.top=[0,-r],t.left=[-r*Math.cos(Math.PI/10),-r*Math.sin(Math.PI/10)],t["left-bottom"]=[-r*Math.cos(3*Math.PI/10),r*Math.sin(3*Math.PI/10)],t.bottom=[0,e],t["right-bottom"]=[r*Math.cos(3*Math.PI/10),r*Math.sin(3*Math.PI/10)],t.right=t.default=[r*Math.cos(Math.PI/10),-r*Math.sin(Math.PI/10)],t}function gne(r,e,t){const n=e/2,i=r/2,a={up:[[-i,n],[i,n],[0,-n]],left:[[-i,0],[i,n],[i,-n]],right:[[-i,n],[-i,-n],[i,0]],down:[[-i,-n],[i,-n],[0,n]]};return a[t]||a.up}function pne(r,e,t){const n=e/2,i=r/2,a={};return t==="down"?(a.bottom=a.default=[0,n],a.right=[i,-n],a.left=[-i,-n]):t==="left"?(a.top=[i,-n],a.bottom=[i,n],a.left=a.default=[-i,0]):t==="right"?(a.top=[-i,-n],a.bottom=[-i,n],a.right=a.default=[i,0]):(a.left=[-i,n],a.top=a.default=[0,-n],a.right=[i,n]),a}function vne(r,e){return[[0,-e/2],[r/2,0],[0,e/2],[-r/2,0]]}function HH(r){return jr(r,["style","visibility"])!=="hidden"}function mne(r,e){const{zIndex:t,transform:n,transformOrigin:i,visibility:a,cursor:s,clipPath:o,component:A}=e,l=one(e,["zIndex","transform","transformOrigin","visibility","cursor","clipPath","component"]);Object.assign(r.attributes,l),n&&r.setAttribute("transform",n),je(t)&&r.setAttribute("zIndex",t),i&&r.setAttribute("transformOrigin",i),a&&r.setAttribute("visibility",a),s&&r.setAttribute("cursor",s),o&&r.setAttribute("clipPath",o),A&&r.setAttribute("component",A)}function Tx(r,e){"update"in r?r.update(e):r.attr(e)}function yne(r){return[[0,r],[r*Math.sqrt(3)/2,r/2],[r*Math.sqrt(3)/2,-r/2],[0,-r],[-r*Math.sqrt(3)/2,-r/2],[-r*Math.sqrt(3)/2,r/2]]}function wne(r){Nd(r,"__to_be_destroyed__",!0)}function vh(r){return jr(r,"__to_be_destroyed__",!1)}var bne=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class Gv extends Aa{constructor(e,t){super(e,Object.assign({},Gv.defaultOptions,t)),this.onCollapseExpand=n=>bne(this,void 0,void 0,function*(){if(!this.validate(n))return;const{target:i}=n;if(!Ane(i))return;const a=i.id,{model:s,graph:o}=this.context,A=s.getElementDataById(a);if(!A)return!1;const{onCollapse:l,onExpand:c,animation:u,align:h}=this.options;Qi(A)?(yield o.expandElement(a,{animation:u,align:h}),c==null||c(a)):(yield o.collapseElement(a,{animation:u,align:h}),l==null||l(a))}),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{graph:e}=this.context,{trigger:t}=this.options;e.on(`node:${t}`,this.onCollapseExpand),e.on(`combo:${t}`,this.onCollapseExpand)}unbindEvents(){const{graph:e}=this.context,{trigger:t}=this.options;e.off(`node:${t}`,this.onCollapseExpand),e.off(`combo:${t}`,this.onCollapseExpand)}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return $e(t)?t(e):!!t}destroy(){this.unbindEvents(),super.destroy()}}Gv.defaultOptions={enable:!0,animation:!0,trigger:_e.DBLCLICK,align:!0};var $d=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function Po(r,e){const{data:t,style:n}=r,i=$d(r,["data","style"]),{data:a,style:s}=e,o=$d(e,["data","style"]),A=Object.assign(Object.assign({},i),o);return(t||a)&&Object.assign(A,{data:Object.assign(Object.assign({},t),a)}),(n||s)&&Object.assign(A,{style:Object.assign(Object.assign({},n),s)}),A}function N1(r){const{data:e,style:t}=r,i=$d(r,["data","style"]);return e&&(i.data=Object.assign({},e)),t&&(i.style=Object.assign({},t)),i}function cc(r={},e={}){const{states:t=[],data:n={},style:i={},children:a=[]}=r,s=$d(r,["states","data","style","children"]),{states:o=[],data:A={},style:l={},children:c=[]}=e,u=$d(e,["states","data","style","children"]),h=(p,v)=>p.length!==v.length?!1:p.every((m,w)=>m===v[w]),g=(p,v)=>{const m=Object.keys(p),w=Object.keys(v);return m.length!==w.length?!1:m.every(b=>p[b]===v[b])};return!(!g(s,u)||!h(a,c)||!h(t,o)||!g(n,A)||!g(i,l))}const zH="__internal_override__";function NI(r){return r[zH]!==!1}var Hg=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};const _ne="g6-create-edge-assist-edge-id",zg="g6-create-edge-assist-node-id";class Vv extends Aa{constructor(e,t){super(e,Object.assign({},Vv.defaultOptions,t)),this.drop=n=>Hg(this,void 0,void 0,function*(){const{targetType:i}=n;["combo","node"].includes(i)&&this.source?yield this.handleCreateEdge(n):yield this.cancelEdge()}),this.handleCreateEdge=n=>Hg(this,void 0,void 0,function*(){var i,a,s;if(!this.validate(n))return;const{graph:o,canvas:A,batch:l,element:c}=this.context,{style:u}=this.options;if(this.source){this.createEdge(n),yield this.cancelEdge();return}l.startBatch(),A.setCursor("crosshair"),this.source=this.getSelectedNodeIDs([n.target.id])[0];const h=o.getElementData(this.source);o.addNodeData([{id:zg,type:"circle",[zH]:!1,style:{size:1,visibility:"hidden",ports:[{key:"port-1",placement:[.5,.5]}],x:(i=h.style)===null||i===void 0?void 0:i.x,y:(a=h.style)===null||a===void 0?void 0:a.y}}]),o.addEdgeData([{id:_ne,source:this.source,target:zg,style:Object.assign({pointerEvents:"none"},u)}]),yield(s=c.draw({animation:!1}))===null||s===void 0?void 0:s.finished}),this.updateAssistEdge=n=>Hg(this,void 0,void 0,function*(){var i;if(!this.source)return;const{model:a,element:s}=this.context;a.translateNodeTo(zg,[n.client.x,n.client.y]),yield(i=s.draw({animation:!1,silence:!0}))===null||i===void 0?void 0:i.finished}),this.createEdge=n=>{var i,a;const{graph:s}=this.context,{style:o,onFinish:A,onCreate:l}=this.options;if(((i=n.target)===null||i===void 0?void 0:i.id)===void 0||this.source===void 0)return;const u=(a=this.getSelectedNodeIDs([n.target.id]))===null||a===void 0?void 0:a[0],h=`${this.source}-${u}-${KK()}`,g=l({id:h,source:this.source,target:u,style:o});g&&(s.addEdgeData([g]),A(g))},this.cancelEdge=()=>Hg(this,void 0,void 0,function*(){var n;if(!this.source)return;const{graph:i,element:a,batch:s}=this.context;i.removeNodeData([zg]),this.source=void 0,yield(n=a.draw({animation:!1}))===null||n===void 0?void 0:n.finished,s.endBatch()}),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){const{graph:e}=this.context,{trigger:t}=this.options;this.unbindEvents(),t==="click"?(e.on(xa.CLICK,this.handleCreateEdge),e.on(JA.CLICK,this.handleCreateEdge),e.on(ro.CLICK,this.cancelEdge),e.on(qp.CLICK,this.cancelEdge)):(e.on(xa.DRAG_START,this.handleCreateEdge),e.on(JA.DRAG_START,this.handleCreateEdge),e.on(_e.POINTER_UP,this.drop)),e.on(_e.POINTER_MOVE,this.updateAssistEdge)}getSelectedNodeIDs(e){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(t=>t.id).concat(e)))}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return $e(t)?t(e):!!t}unbindEvents(){const{graph:e}=this.context;e.off(xa.CLICK,this.handleCreateEdge),e.off(JA.CLICK,this.handleCreateEdge),e.off(ro.CLICK,this.cancelEdge),e.off(qp.CLICK,this.cancelEdge),e.off(xa.DRAG_START,this.handleCreateEdge),e.off(JA.DRAG_START,this.handleCreateEdge),e.off(_e.POINTER_UP,this.drop),e.off(_e.POINTER_MOVE,this.updateAssistEdge)}destroy(){this.unbindEvents(),super.destroy()}}Vv.defaultOptions={animation:!0,enable:!0,style:{},trigger:"drag",onCreate:r=>r,onFinish:()=>{}};var DI=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class qv extends Aa{constructor(e,t){super(e,Object.assign({},qv.defaultOptions,t)),this.isDragging=!1,this.onDragStart=n=>{this.validate(n)&&(this.isDragging=!0,this.context.canvas.setCursor("grabbing"))},this.onDrag=n=>{var i,a,s,o;if(!this.isDragging||er.isPinching)return;const A=(a=(i=n.movement)===null||i===void 0?void 0:i.x)!==null&&a!==void 0?a:n.dx,l=(o=(s=n.movement)===null||s===void 0?void 0:s.y)!==null&&o!==void 0?o:n.dy;(A|l)!==0&&this.translate([A,l],!1)},this.onDragEnd=()=>{var n,i;this.isDragging=!1,this.context.canvas.setCursor(this.defaultCursor),(i=(n=this.options).onFinish)===null||i===void 0||i.call(n)},this.invokeOnFinish=nh(()=>{var n,i;(i=(n=this.options).onFinish)===null||i===void 0||i.call(n)},300),this.shortcut=new pA(e.graph),this.bindEvents(),this.defaultCursor=this.context.canvas.getConfig().cursor||"default"}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{trigger:e}=this.options;if(nr(e)){const{up:t=[],down:n=[],left:i=[],right:a=[]}=e;this.shortcut.bind(t,s=>this.onTranslate([0,1],s)),this.shortcut.bind(n,s=>this.onTranslate([0,-1],s)),this.shortcut.bind(i,s=>this.onTranslate([1,0],s)),this.shortcut.bind(a,s=>this.onTranslate([-1,0],s))}else{const{graph:t}=this.context;t.on(_e.DRAG_START,this.onDragStart),t.on(_e.DRAG,this.onDrag),t.on(_e.DRAG_END,this.onDragEnd)}}onTranslate(e,t){return DI(this,void 0,void 0,function*(){if(!this.validate(t))return;const{sensitivity:n}=this.options,i=n*-1;yield this.translate($a(e,i),this.options.animation),this.invokeOnFinish()})}translate(e,t){return DI(this,void 0,void 0,function*(){e=this.clampByDirection(e),e=this.clampByRange(e),e=this.clampByRotation(e),yield this.context.graph.translateBy(e,t)})}clampByRotation([e,t]){const n=this.context.graph.getRotation();return oH([e,t],n)}clampByDirection([e,t]){const{direction:n}=this.options;return n==="x"?t=0:n==="y"&&(e=0),[e,t]}clampByRange([e,t]){const{viewport:n,canvas:i}=this.context,[a,s]=i.getSize(),[o,A,l,c]=Fa(this.options.range),u=[s*o,a*A,s*l,a*c],h=gA(k2(n.getCanvasCenter()),u),g=rn(n.getViewportCenter(),[e,t,0]);if(!Ja(g,h)){const{min:[p,v],max:[m,w]}=h;(g[0]<p&&e>0||g[0]>m&&e<0)&&(e=0),(g[1]<v&&t>0||g[1]>w&&t<0)&&(t=0)}return[e,t]}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return typeof t=="function"?t(e):!!t}unbindEvents(){this.shortcut.unbindAll();const{graph:e}=this.context;e.off(_e.DRAG_START,this.onDragStart),e.off(_e.DRAG,this.onDrag),e.off(_e.DRAG_END,this.onDragEnd)}destroy(){this.shortcut.destroy(),this.unbindEvents(),this.context.canvas.setCursor(this.defaultCursor),super.destroy()}}qv.defaultOptions={enable:r=>"targetType"in r?r.targetType==="canvas":!0,sensitivity:10,direction:"both",range:1/0};var RI=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class mh extends Aa{constructor(e,t){super(e,Object.assign({},mh.defaultOptions,t)),this.enable=!1,this.enableElements=["node","combo"],this.target=[],this.shadowOrigin=[0,0],this.hiddenEdges=[],this.isDragging=!1,this.onDrop=n=>RI(this,void 0,void 0,function*(){var i;if(this.options.dropEffect!=="link")return;const{model:a,element:s}=this.context,o=n.target.id;this.target.forEach(A=>{const l=a.getParentData(A,an);l&&he(l)===o&&a.refreshComboData(o),a.setParent(A,o,an)}),yield(i=s==null?void 0:s.draw({animation:!0}))===null||i===void 0?void 0:i.finished}),this.setCursor=n=>{if(this.isDragging)return;const{type:i}=n,{canvas:a}=this.context,{cursor:s}=this.options;i===_e.POINTER_ENTER?a.setCursor((s==null?void 0:s.grab)||"grab"):a.setCursor((s==null?void 0:s.default)||"default")},this.shortcut=new pA(e.graph),this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onDrop=this.onDrop.bind(this),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{graph:e,canvas:t}=this.context,n=t.getLayer().getContextService().$canvas;n&&(n.addEventListener("blur",this.onDragEnd),n.addEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(i=>{e.on(`${i}:${_e.DRAG_START}`,this.onDragStart),e.on(`${i}:${_e.DRAG}`,this.onDrag),e.on(`${i}:${_e.DRAG_END}`,this.onDragEnd),e.on(`${i}:${_e.POINTER_ENTER}`,this.setCursor),e.on(`${i}:${_e.POINTER_LEAVE}`,this.setCursor)}),["link"].includes(this.options.dropEffect)&&(e.on(JA.DROP,this.onDrop),e.on(ro.DROP,this.onDrop))}getSelectedNodeIDs(e){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(t=>t.id).concat(e)))}getDelta(e){const t=this.context.graph.getZoom();return es([e.dx,e.dy],t)}onDragStart(e){var t;if(this.enable=this.validate(e),!this.enable)return;const{batch:n,canvas:i,graph:a}=this.context;i.setCursor(((t=this.options.cursor)===null||t===void 0?void 0:t.grabbing)||"grabbing"),this.isDragging=!0,n.startBatch();const s=e.target.id;a.getElementState(s).includes(this.options.state)?this.target=this.getSelectedNodeIDs([s]):this.target=[s],this.hideEdge(),this.context.graph.frontElement(this.target),this.options.shadow&&this.createShadow(this.target)}onDrag(e){if(!this.enable)return;const t=this.getDelta(e);this.options.shadow?this.moveShadow(t):this.moveElement(this.target,t)}onDragEnd(){var e,t,n;if(!this.enable)return;if(this.enable=!1,this.options.shadow){if(!this.shadow)return;this.shadow.style.visibility="hidden";const{x:s=0,y:o=0}=this.shadow.attributes,[A,l]=rn([+s,+o],this.shadowOrigin);this.moveElement(this.target,[A,l])}this.showEdges(),(t=(e=this.options).onFinish)===null||t===void 0||t.call(e,this.target);const{batch:i,canvas:a}=this.context;i.endBatch(),a.setCursor(((n=this.options.cursor)===null||n===void 0?void 0:n.grab)||"grab"),this.isDragging=!1,this.target=[]}isKeydown(){const{trigger:e}=this.options;return e!=null&&e.length?this.shortcut.match(e):!0}validate(e){if(this.destroyed||vh(e.target)||this.context.graph.isCollapsingExpanding||!this.isKeydown())return!1;const{enable:t}=this.options;return $e(t)?t(e):!!t}clampByRotation([e,t]){const n=this.context.graph.getRotation();return oH([e,t],n)}moveElement(e,t){return RI(this,void 0,void 0,function*(){const{graph:n,model:i}=this.context,{dropEffect:a}=this.options;a==="move"&&e.forEach(s=>i.refreshComboData(s)),n.translateElementBy(Object.fromEntries(e.map(s=>[s,this.clampByRotation(t)])),!1)})}moveShadow(e){if(!this.shadow)return;const{x:t=0,y:n=0}=this.shadow.attributes,[i,a]=e;this.shadow.attr({x:+t+i,y:+n+a})}createShadow(e){const t=Gn(this.options,"shadow"),n=uh(e.map(l=>this.context.element.getElement(l).getBounds())),[i,a]=n.min;this.shadowOrigin=[i,a];const[s,o]=fA(n),A={width:s,height:o,x:i,y:a};this.shadow?this.shadow.attr(Object.assign(Object.assign(Object.assign({},t),A),{visibility:"visible"})):(this.shadow=new Wr({style:Object.assign(Object.assign(Object.assign({$layer:"transient"},t),A),{pointerEvents:"none"})}),this.context.canvas.appendChild(this.shadow))}showEdges(){this.options.shadow||this.hiddenEdges.length===0||(this.context.graph.showElement(this.hiddenEdges),this.hiddenEdges=[])}hideEdge(){const{hideEdge:e,shadow:t}=this.options;if(e==="none"||t)return;const{graph:n}=this.context;e==="all"?this.hiddenEdges=n.getEdgeData().map(he):this.hiddenEdges=Array.from(new Set(this.target.map(i=>n.getRelatedEdgesData(i,e).map(he)).flat())),n.hideElement(this.hiddenEdges)}unbindEvents(){const{graph:e,canvas:t}=this.context,n=t.getLayer().getContextService().$canvas;n&&(n.removeEventListener("blur",this.onDragEnd),n.removeEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(i=>{e.off(`${i}:${_e.DRAG_START}`,this.onDragStart),e.off(`${i}:${_e.DRAG}`,this.onDrag),e.off(`${i}:${_e.DRAG_END}`,this.onDragEnd),e.off(`${i}:${_e.POINTER_ENTER}`,this.setCursor),e.off(`${i}:${_e.POINTER_LEAVE}`,this.setCursor)}),e.off(`combo:${_e.DROP}`,this.onDrop),e.off(`canvas:${_e.DROP}`,this.onDrop)}destroy(){var e;this.unbindEvents(),(e=this.shadow)===null||e===void 0||e.destroy(),super.destroy()}}mh.defaultOptions={animation:!0,enable:r=>["node","combo"].includes(r.targetType),trigger:[],dropEffect:"move",state:"selected",hideEdge:"none",shadow:!1,shadowZIndex:100,shadowFill:"#F3F9FF",shadowFillOpacity:.5,shadowStroke:"#1890FF",shadowStrokeOpacity:.9,shadowLineDash:[5,5],cursor:{default:"default",grab:"grab",grabbing:"grabbing"}};var Ene="*",Wv=(function(){function r(){this._events={}}return r.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},r.prototype.once=function(e,t){return this.on(e,t,!0)},r.prototype.emit=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=this._events[e]||[],s=this._events[Ene]||[],o=function(A){for(var l=A.length,c=0;c<l;c++)if(A[c]){var u=A[c],h=u.callback,g=u.once;g&&(A.splice(c,1),A.length===0&&delete t._events[e],l--,c--),h.apply(t,n)}};o(a),o(s)},r.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var n=this._events[e]||[],i=n.length,a=0;a<i;a++)n[a].callback===t&&(n.splice(a,1),i--,a--);n.length===0&&delete this._events[e]}return this},r.prototype.getEvents=function(){return this._events},r})();function Mx(r,e,t,n){for(;r.length;){const i=r.shift();if(t(i))return!0;e.add(i.id),n(i.id).forEach(s=>{e.has(s.id)||(e.add(s.id),r.push(s))})}return!1}function tv(r,e,t,n){if(t(r))return!0;e.add(r.id);for(const a of n(r.id))if(!e.has(a.id)&&tv(a,e,t,n))return!0;return!1}const QI=()=>!0;class Cne{constructor(e){_n(this,"graph");_n(this,"nodeFilter");_n(this,"edgeFilter");_n(this,"cacheEnabled");_n(this,"inEdgesMap",new Map);_n(this,"outEdgesMap",new Map);_n(this,"bothEdgesMap",new Map);_n(this,"allNodesMap",new Map);_n(this,"allEdgesMap",new Map);_n(this,"clearCache",()=>{this.inEdgesMap.clear(),this.outEdgesMap.clear(),this.bothEdgesMap.clear(),this.allNodesMap.clear(),this.allEdgesMap.clear()});_n(this,"refreshCache",()=>{this.clearCache(),this.updateCache(this.graph.getAllNodes().map(e=>e.id))});_n(this,"updateCache",e=>{const t=new Set;e.forEach(n=>{const i=this.bothEdgesMap.get(n);if(i&&i.forEach(a=>t.add(a.id)),!this.hasNode(n))this.inEdgesMap.delete(n),this.outEdgesMap.delete(n),this.bothEdgesMap.delete(n),this.allNodesMap.delete(n);else{const a=this.graph.getRelatedEdges(n,"in").filter(this.edgeFilter),s=this.graph.getRelatedEdges(n,"out").filter(this.edgeFilter),o=Array.from(new Set([...a,...s]));o.forEach(A=>t.add(A.id)),this.inEdgesMap.set(n,a),this.outEdgesMap.set(n,s),this.bothEdgesMap.set(n,o),this.allNodesMap.set(n,this.graph.getNode(n))}}),t.forEach(n=>{this.hasEdge(n)?this.allEdgesMap.set(n,this.graph.getEdge(n)):this.allEdgesMap.delete(n)})});_n(this,"handleGraphChanged",e=>{const t=new Set;e.changes.forEach(n=>{switch(n.type){case"NodeAdded":t.add(n.value.id);break;case"NodeDataUpdated":t.add(n.id);break;case"EdgeAdded":t.add(n.value.source),t.add(n.value.target);break;case"EdgeUpdated":(n.propertyName==="source"||n.propertyName==="target")&&(t.add(n.oldValue),t.add(n.newValue));break;case"EdgeDataUpdated":if(e.graph.hasEdge(n.id)){const i=e.graph.getEdge(n.id);t.add(i.source),t.add(i.target)}break;case"EdgeRemoved":t.add(n.value.source),t.add(n.value.target);break;case"NodeRemoved":t.add(n.value.id);break}}),this.updateCache(t)});this.graph=e.graph;const t=e.nodeFilter||QI,n=e.edgeFilter||QI;this.nodeFilter=t,this.edgeFilter=i=>{const{source:a,target:s}=this.graph.getEdgeDetail(i.id);return!t(a)||!t(s)?!1:n(i,a,s)},e.cache==="auto"?(this.cacheEnabled=!0,this.startAutoCache()):e.cache==="manual"?this.cacheEnabled=!0:this.cacheEnabled=!1}startAutoCache(){this.refreshCache(),this.graph.on("changed",this.handleGraphChanged)}stopAutoCache(){this.graph.off("changed",this.handleGraphChanged)}checkNodeExistence(e){this.getNode(e)}hasNode(e){if(!this.graph.hasNode(e))return!1;const t=this.graph.getNode(e);return this.nodeFilter(t)}areNeighbors(e,t){return this.checkNodeExistence(e),this.getNeighbors(t).some(n=>n.id===e)}getNode(e){const t=this.graph.getNode(e);if(!this.nodeFilter(t))throw new Error("Node not found for id: "+e);return t}getRelatedEdges(e,t){return this.checkNodeExistence(e),this.cacheEnabled?t==="in"?this.inEdgesMap.get(e):t==="out"?this.outEdgesMap.get(e):this.bothEdgesMap.get(e):this.graph.getRelatedEdges(e,t).filter(this.edgeFilter)}getDegree(e,t){return this.getRelatedEdges(e,t).length}getSuccessors(e){const n=this.getRelatedEdges(e,"out").map(i=>this.getNode(i.target));return Array.from(new Set(n))}getPredecessors(e){const n=this.getRelatedEdges(e,"in").map(i=>this.getNode(i.source));return Array.from(new Set(n))}getNeighbors(e){const t=this.getPredecessors(e),n=this.getSuccessors(e);return Array.from(new Set([...t,...n]))}hasEdge(e){if(!this.graph.hasEdge(e))return!1;const t=this.graph.getEdge(e);return this.edgeFilter(t)}getEdge(e){const t=this.graph.getEdge(e);if(!this.edgeFilter(t))throw new Error("Edge not found for id: "+e);return t}getEdgeDetail(e){const t=this.getEdge(e);return{edge:t,source:this.getNode(t.source),target:this.getNode(t.target)}}hasTreeStructure(e){return this.graph.hasTreeStructure(e)}getRoots(e){return this.graph.getRoots(e).filter(this.nodeFilter)}getChildren(e,t){return this.checkNodeExistence(e),this.graph.getChildren(e,t).filter(this.nodeFilter)}getParent(e,t){this.checkNodeExistence(e);const n=this.graph.getParent(e,t);return!n||!this.nodeFilter(n)?null:n}getAllNodes(){return this.cacheEnabled?Array.from(this.allNodesMap.values()):this.graph.getAllNodes().filter(this.nodeFilter)}getAllEdges(){return this.cacheEnabled?Array.from(this.allEdgesMap.values()):this.graph.getAllEdges().filter(this.edgeFilter)}bfs(e,t,n="out"){const i={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];Mx([this.getNode(e)],new Set,t,i)}dfs(e,t,n="out"){const i={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];tv(this.getNode(e),new Set,t,i)}}let Sr=class jH extends Wv{constructor(t){super();_n(this,"nodeMap",new Map);_n(this,"edgeMap",new Map);_n(this,"inEdgesMap",new Map);_n(this,"outEdgesMap",new Map);_n(this,"bothEdgesMap",new Map);_n(this,"treeIndices",new Map);_n(this,"changes",[]);_n(this,"batchCount",0);_n(this,"onChanged",()=>{});_n(this,"batch",t=>{this.batchCount+=1,t(),this.batchCount-=1,this.batchCount||this.commit()});t&&(t.nodes&&this.addNodes(t.nodes),t.edges&&this.addEdges(t.edges),t.tree&&this.addTree(t.tree),t.onChanged&&(this.onChanged=t.onChanged))}commit(){const t=this.changes;this.changes=[];const n={graph:this,changes:t};this.emit("changed",n),this.onChanged(n)}reduceChanges(t){let n=[];return t.forEach(i=>{switch(i.type){case"NodeRemoved":{let a=!1;n=n.filter(s=>{if(s.type==="NodeAdded"){const o=s.value.id===i.value.id;return o&&(a=!0),!o}else{if(s.type==="NodeDataUpdated")return s.id!==i.value.id;if(s.type==="TreeStructureChanged")return s.nodeId!==i.value.id}return!0}),a||n.push(i);break}case"EdgeRemoved":{let a=!1;n=n.filter(s=>{if(s.type==="EdgeAdded"){const o=s.value.id===i.value.id;return o&&(a=!0),!o}else if(s.type==="EdgeDataUpdated"||s.type==="EdgeUpdated")return s.id!==i.value.id;return!0}),a||n.push(i);break}case"NodeDataUpdated":case"EdgeDataUpdated":case"EdgeUpdated":{const a=n.findIndex(o=>o.type===i.type&&o.id===i.id&&(i.propertyName===void 0||o.propertyName===i.propertyName)),s=n[a];s?i.propertyName!==void 0?s.newValue=i.newValue:(n.splice(a,1),n.push(i)):n.push(i);break}case"TreeStructureDetached":{n=n.filter(a=>a.type==="TreeStructureAttached"||a.type==="TreeStructureChanged"?a.treeKey!==i.treeKey:!0),n.push(i);break}case"TreeStructureChanged":{const a=n.find(s=>s.type==="TreeStructureChanged"&&s.treeKey===i.treeKey&&s.nodeId===i.nodeId);a?a.newParentId=i.newParentId:n.push(i);break}default:n.push(i);break}}),n}checkNodeExistence(t){this.getNode(t)}hasNode(t){return this.nodeMap.has(t)}areNeighbors(t,n){return this.getNeighbors(n).some(i=>i.id===t)}getNode(t){const n=this.nodeMap.get(t);if(!n)throw new Error("Node not found for id: "+t);return n}getRelatedEdges(t,n){if(this.checkNodeExistence(t),n==="in"){const i=this.inEdgesMap.get(t);return Array.from(i)}else if(n==="out"){const i=this.outEdgesMap.get(t);return Array.from(i)}else{const i=this.bothEdgesMap.get(t);return Array.from(i)}}getDegree(t,n){return this.getRelatedEdges(t,n).length}getSuccessors(t){const i=this.getRelatedEdges(t,"out").map(a=>this.getNode(a.target));return Array.from(new Set(i))}getPredecessors(t){const i=this.getRelatedEdges(t,"in").map(a=>this.getNode(a.source));return Array.from(new Set(i))}getNeighbors(t){const n=this.getPredecessors(t),i=this.getSuccessors(t);return Array.from(new Set([...n,...i]))}doAddNode(t){if(this.hasNode(t.id))throw new Error("Node already exists: "+t.id);this.nodeMap.set(t.id,t),this.inEdgesMap.set(t.id,new Set),this.outEdgesMap.set(t.id,new Set),this.bothEdgesMap.set(t.id,new Set),this.treeIndices.forEach(n=>{n.childrenMap.set(t.id,new Set)}),this.changes.push({type:"NodeAdded",value:t})}addNodes(t){this.batch(()=>{for(const n of t)this.doAddNode(n)})}addNode(t){this.addNodes([t])}doRemoveNode(t){const n=this.getNode(t),i=this.bothEdgesMap.get(t);i==null||i.forEach(a=>this.doRemoveEdge(a.id)),this.nodeMap.delete(t),this.treeIndices.forEach(a=>{var o,A;(o=a.childrenMap.get(t))==null||o.forEach(l=>{a.parentMap.delete(l.id)});const s=a.parentMap.get(t);s&&((A=a.childrenMap.get(s.id))==null||A.delete(n)),a.parentMap.delete(t),a.childrenMap.delete(t)}),this.bothEdgesMap.delete(t),this.inEdgesMap.delete(t),this.outEdgesMap.delete(t),this.changes.push({type:"NodeRemoved",value:n})}removeNodes(t){this.batch(()=>{t.forEach(n=>this.doRemoveNode(n))})}removeNode(t){this.removeNodes([t])}updateNodeDataProperty(t,n,i){const a=this.getNode(t);this.batch(()=>{const s=a.data[n],o=i;a.data[n]=o,this.changes.push({type:"NodeDataUpdated",id:t,propertyName:n,oldValue:s,newValue:o})})}mergeNodeData(t,n){this.batch(()=>{Object.entries(n).forEach(([i,a])=>{this.updateNodeDataProperty(t,i,a)})})}updateNodeData(...t){const n=t[0],i=this.getNode(n);if(typeof t[1]=="string"){this.updateNodeDataProperty(n,t[1],t[2]);return}let a;if(typeof t[1]=="function"){const s=t[1];a=s(i.data)}else typeof t[1]=="object"&&(a=t[1]);this.batch(()=>{const s=i.data,o=a;i.data=a,this.changes.push({type:"NodeDataUpdated",id:n,oldValue:s,newValue:o})})}checkEdgeExistence(t){if(!this.hasEdge(t))throw new Error("Edge not found for id: "+t)}hasEdge(t){return this.edgeMap.has(t)}getEdge(t){return this.checkEdgeExistence(t),this.edgeMap.get(t)}getEdgeDetail(t){const n=this.getEdge(t);return{edge:n,source:this.getNode(n.source),target:this.getNode(n.target)}}doAddEdge(t){if(this.hasEdge(t.id))throw new Error("Edge already exists: "+t.id);this.checkNodeExistence(t.source),this.checkNodeExistence(t.target),this.edgeMap.set(t.id,t);const n=this.inEdgesMap.get(t.target),i=this.outEdgesMap.get(t.source),a=this.bothEdgesMap.get(t.source),s=this.bothEdgesMap.get(t.target);n.add(t),i.add(t),a.add(t),s.add(t),this.changes.push({type:"EdgeAdded",value:t})}addEdges(t){this.batch(()=>{for(const n of t)this.doAddEdge(n)})}addEdge(t){this.addEdges([t])}doRemoveEdge(t){const n=this.getEdge(t),i=this.outEdgesMap.get(n.source),a=this.inEdgesMap.get(n.target),s=this.bothEdgesMap.get(n.source),o=this.bothEdgesMap.get(n.target);i.delete(n),a.delete(n),s.delete(n),o.delete(n),this.edgeMap.delete(t),this.changes.push({type:"EdgeRemoved",value:n})}removeEdges(t){this.batch(()=>{t.forEach(n=>this.doRemoveEdge(n))})}removeEdge(t){this.removeEdges([t])}updateEdgeSource(t,n){const i=this.getEdge(t);this.checkNodeExistence(n);const a=i.source,s=n;this.outEdgesMap.get(a).delete(i),this.bothEdgesMap.get(a).delete(i),this.outEdgesMap.get(s).add(i),this.bothEdgesMap.get(s).add(i),i.source=n,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:t,propertyName:"source",oldValue:a,newValue:s})})}updateEdgeTarget(t,n){const i=this.getEdge(t);this.checkNodeExistence(n);const a=i.target,s=n;this.inEdgesMap.get(a).delete(i),this.bothEdgesMap.get(a).delete(i),this.inEdgesMap.get(s).add(i),this.bothEdgesMap.get(s).add(i),i.target=n,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:t,propertyName:"target",oldValue:a,newValue:s})})}updateEdgeDataProperty(t,n,i){const a=this.getEdge(t);this.batch(()=>{const s=a.data[n],o=i;a.data[n]=o,this.changes.push({type:"EdgeDataUpdated",id:t,propertyName:n,oldValue:s,newValue:o})})}updateEdgeData(...t){const n=t[0],i=this.getEdge(n);if(typeof t[1]=="string"){this.updateEdgeDataProperty(n,t[1],t[2]);return}let a;if(typeof t[1]=="function"){const s=t[1];a=s(i.data)}else typeof t[1]=="object"&&(a=t[1]);this.batch(()=>{const s=i.data,o=a;i.data=a,this.changes.push({type:"EdgeDataUpdated",id:n,oldValue:s,newValue:o})})}mergeEdgeData(t,n){this.batch(()=>{Object.entries(n).forEach(([i,a])=>{this.updateEdgeDataProperty(t,i,a)})})}checkTreeExistence(t){if(!this.hasTreeStructure(t))throw new Error("Tree structure not found for treeKey: "+t)}hasTreeStructure(t){return this.treeIndices.has(t)}attachTreeStructure(t){this.treeIndices.has(t)||(this.treeIndices.set(t,{parentMap:new Map,childrenMap:new Map}),this.batch(()=>{this.changes.push({type:"TreeStructureAttached",treeKey:t})}))}detachTreeStructure(t){this.checkTreeExistence(t),this.treeIndices.delete(t),this.batch(()=>{this.changes.push({type:"TreeStructureDetached",treeKey:t})})}addTree(t,n){this.batch(()=>{this.attachTreeStructure(n);const i=[],a=Array.isArray(t)?t:[t];for(;a.length;){const s=a.shift();i.push(s),s.children&&a.push(...s.children)}this.addNodes(i),i.forEach(s=>{var o;(o=s.children)==null||o.forEach(A=>{this.setParent(A.id,s.id,n)})})})}getRoots(t){return this.checkTreeExistence(t),this.getAllNodes().filter(n=>!this.getParent(n.id,t))}getChildren(t,n){this.checkNodeExistence(t),this.checkTreeExistence(n);const a=this.treeIndices.get(n).childrenMap.get(t);return Array.from(a||[])}getParent(t,n){return this.checkNodeExistence(t),this.checkTreeExistence(n),this.treeIndices.get(n).parentMap.get(t)||null}getAncestors(t,n){const i=[];let a=this.getNode(t),s;for(;s=this.getParent(a.id,n);)i.push(s),a=s;return i}setParent(t,n,i){var c,u;this.checkTreeExistence(i);const a=this.treeIndices.get(i);if(!a)return;const s=this.getNode(t),o=a.parentMap.get(t);if((o==null?void 0:o.id)===n)return;if(n==null){o&&((c=a.childrenMap.get(o.id))==null||c.delete(s)),a.parentMap.delete(t);return}const A=this.getNode(n);a.parentMap.set(t,A),o&&((u=a.childrenMap.get(o.id))==null||u.delete(s));let l=a.childrenMap.get(A.id);l||(l=new Set,a.childrenMap.set(A.id,l)),l.add(s),this.batch(()=>{this.changes.push({type:"TreeStructureChanged",treeKey:i,nodeId:t,oldParentId:o==null?void 0:o.id,newParentId:A.id})})}dfsTree(t,n,i){const a=s=>this.getChildren(s,i);return tv(this.getNode(t),new Set,n,a)}bfsTree(t,n,i){const a=s=>this.getChildren(s,i);return Mx([this.getNode(t)],new Set,n,a)}getAllNodes(){return Array.from(this.nodeMap.values())}getAllEdges(){return Array.from(this.edgeMap.values())}bfs(t,n,i="out"){const a={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[i];return Mx([this.getNode(t)],new Set,n,a)}dfs(t,n,i="out"){const a={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[i];return tv(this.getNode(t),new Set,n,a)}clone(){const t=this.getAllNodes().map(a=>({...a,data:{...a.data}})),n=this.getAllEdges().map(a=>({...a,data:{...a.data}})),i=new jH({nodes:t,edges:n});return this.treeIndices.forEach(({parentMap:a,childrenMap:s},o)=>{const A=new Map;a.forEach((c,u)=>{A.set(u,i.getNode(c.id))});const l=new Map;s.forEach((c,u)=>{l.set(u,new Set(Array.from(c).map(h=>i.getNode(h.id))))}),i.treeIndices.set(o,{parentMap:A,childrenMap:l})}),i}toJSON(){return JSON.stringify({nodes:this.getAllNodes(),edges:this.getAllEdges()})}createView(t){return new Cne({graph:this,...t})}};class $v{constructor(e,t){this.context=e,this.options=t||{}}}var Bne=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})},xne=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function Sne(r){const{type:e}=r;return["compact-box","mindmap","dendrogram","indented"].includes(e)}function Tne(r){return!Array.isArray(r)&&(r==null?void 0:r.preLayout)}function cp(r){const{nodes:e,edges:t}=r,n={nodes:[],edges:[],combos:[]};return e.forEach(i=>{const a=i.data._isCombo?n.combos:n.nodes,{x:s,y:o,z:A=0}=i.data;a==null||a.push({id:i.id,style:{x:s,y:o,z:A}})}),t.forEach(i=>{const{id:a,source:s,target:o,data:{points:A=[],controlPoints:l=A.slice(1,A.length-1)}}=i;n.edges.push({id:a,source:s,target:o,style:Object.assign({},l!=null&&l.length?{controlPoints:l.map(Gr)}:{})})}),n}function Mne(r,e){class t extends $v{constructor(i,a){if(super(i,a),this.instance=new r({}),this.id=this.instance.id,"stop"in this.instance&&"tick"in this.instance){const s=this.instance;this.stop=s.stop.bind(s),this.tick=o=>{const A=s.tick(o);return cp(A)}}}execute(i,a){return Bne(this,void 0,void 0,function*(){return cp(yield this.instance.execute(this.graphData2LayoutModel(i),this.transformOptions(qr({},this.options,a))))})}transformOptions(i){if(!("onTick"in i))return i;const a=i.onTick;return i.onTick=s=>a(cp(s)),i}graphData2LayoutModel(i){const{nodes:a=[],edges:s=[],combos:o=[]}=i,A=a.map(g=>{const p=he(g),{data:v,style:m,combo:w}=g,b=xne(g,["data","style","combo"]),_={id:p,data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},v),{data:v}),w?{parentId:w}:{}),{style:m}),b)};return m!=null&&m.x&&Object.assign(_.data,{x:m.x}),m!=null&&m.y&&Object.assign(_.data,{y:m.y}),m!=null&&m.z&&Object.assign(_.data,{z:m.z}),_}),l=new Map(A.map(g=>[g.id,g])),c=s.filter(g=>{const{source:p,target:v}=g;return l.has(p)&&l.has(v)}).map(g=>{const{source:p,target:v,data:m,style:w}=g;return{id:he(g),source:p,target:v,data:Object.assign({},m),style:Object.assign({},w)}}),u=o.map(g=>({id:he(g),data:Object.assign({_isCombo:!0},g.data),style:Object.assign({},g.style)})),h=new Sr({nodes:[...A,...u],edges:c});return e.model.model.hasTreeStructure(an)&&(h.attachTreeStructure(an),A.forEach(g=>{const p=e.model.model.getParent(g.id,an);p&&h.hasNode(p.id)&&h.setParent(g.id,p.id,an)})),h}}return t}function D1(r,e,...t){if(e in r)return r[e](...t);if("instance"in r){const n=r.instance;if(e in n)return n[e](...t)}return null}function UI(r,e){if(e in r)return r[e];if("instance"in r){const t=r.instance;if(e in t)return t[e]}return null}var Fne=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class kne extends mh{get forceLayoutInstance(){return this.context.layout.getLayoutInstance().find(e=>["d3-force","d3-force-3d"].includes(e==null?void 0:e.id))}validate(e){return this.context.layout?this.forceLayoutInstance?super.validate(e):(ks.warn("DragElementForce only works with d3-force or d3-force-3d layout"),!1):!1}moveElement(e,t){return Fne(this,void 0,void 0,function*(){const n=this.forceLayoutInstance;this.context.graph.getNodeData(e).forEach((i,a)=>{const{x:s=0,y:o=0}=i.style||{};n&&D1(n,"setFixedPosition",e[a],[...mt([+s,+o],this.clampByRotation(t))])})})}onDragStart(e){if(this.enable=this.validate(e),!this.enable)return;this.target=this.getSelectedNodeIDs([e.target.id]),this.hideEdge(),this.context.graph.frontElement(this.target);const t=this.forceLayoutInstance;t&&UI(t,"simulation").alphaTarget(.3).restart(),this.context.graph.getNodeData(this.target).forEach(n=>{const{x:i=0,y:a=0}=n.style||{};t&&D1(t,"setFixedPosition",he(n),[+i,+a])})}onDrag(e){if(!this.enable)return;const t=this.getDelta(e);this.moveElement(this.target,t)}onDragEnd(){const e=this.forceLayoutInstance;e&&UI(e,"simulation").alphaTarget(0),!this.options.fixed&&this.context.graph.getNodeData(this.target).forEach(t=>{e&&D1(e,"setFixedPosition",he(t),[null,null,null])})}}var HI=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class Yv extends Aa{constructor(e,t){super(e,Object.assign({},Yv.defaultOptions,t)),this.isZoomEvent=n=>!!(n.data&&"scale"in n.data),this.relatedEdgeToUpdate=new Set,this.zoom=this.context.graph.getZoom(),this.fixElementSize=n=>HI(this,void 0,void 0,function*(){if(!this.validate(n))return;const{graph:i}=this.context,{state:a,nodeFilter:s,edgeFilter:o,comboFilter:A}=this.options,l=(a?i.getElementDataByState("node",a):i.getNodeData()).filter(s),c=(a?i.getElementDataByState("edge",a):i.getEdgeData()).filter(o),u=(a?i.getElementDataByState("combo",a):i.getComboData()).filter(A),h=this.isZoomEvent(n)?this.zoom=Math.max(.01,Math.min(n.data.scale,10)):this.zoom,g=[...l,...u];g.length>0&&g.forEach(p=>this.fixNodeLike(p,h)),this.updateRelatedEdges(),c.length>0&&c.forEach(p=>this.fixEdge(p,h))}),this.cachedStyles=new Map,this.getOriginalFieldValue=(n,i,a)=>{var s;const o=this.cachedStyles.get(n)||[],A=((s=o.find(l=>l.shape===i))===null||s===void 0?void 0:s.style)||{};return a in A||(A[a]=i.attributes[a],this.cachedStyles.set(n,[...o.filter(l=>l.shape!==i),{shape:i,style:A}])),A[a]},this.scaleEntireElement=(n,i,a)=>{i.setLocalScale(1/a);const s=this.cachedStyles.get(n)||[];s.push({shape:i}),this.cachedStyles.set(n,s)},this.scaleSpecificShapes=(n,i,a)=>{const s=Nee(n);(Array.isArray(a)?a:[a]).forEach(A=>{const{shape:l,fields:c}=A,u=typeof l=="function"?l(s):n.getShape(l);if(u){if(!c){this.scaleEntireElement(n.id,u,i);return}c.forEach(h=>{const g=this.getOriginalFieldValue(n.id,u,h);je(g)&&(u.style[h]=g/i)})}})},this.skipIfExceedViewport=n=>{const{viewport:i}=this.context;return!(i!=null&&i.isInViewport(n.getRenderBounds(),!1,30))},this.fixNodeLike=(n,i)=>{const a=he(n),{element:s,model:o}=this.context,A=s.getElement(a);if(!A||this.skipIfExceedViewport(A))return;o.getRelatedEdgesData(a).forEach(u=>this.relatedEdgeToUpdate.add(he(u)));const c=this.options[A.type];if(!c){this.scaleEntireElement(a,A,i);return}this.scaleSpecificShapes(A,i,c)},this.fixEdge=(n,i)=>{const a=he(n),s=this.context.element.getElement(a);if(!s||this.skipIfExceedViewport(s))return;const o=this.options.edge;if(!o){s.style.transformOrigin="center",this.scaleEntireElement(a,s,i);return}this.scaleSpecificShapes(s,i,o)},this.updateRelatedEdges=()=>{const{element:n}=this.context;this.relatedEdgeToUpdate.size>0&&this.relatedEdgeToUpdate.forEach(i=>{const a=n.getElement(i);a==null||a.update({})}),this.relatedEdgeToUpdate.clear()},this.resetTransform=n=>HI(this,void 0,void 0,function*(){var i;!((i=n.data)===null||i===void 0)&&i.firstRender||(this.options.reset?this.restoreCachedStyles():this.fixElementSize({data:{scale:this.zoom}}))}),this.bindEvents()}restoreCachedStyles(){if(this.cachedStyles.size>0){this.cachedStyles.forEach(i=>{i.forEach(({shape:a,style:s})=>{if(vs(s))a.setLocalScale(1);else{if(this.options.state)return;Object.entries(s).forEach(([o,A])=>a.style[o]=A)}})});const{graph:e,element:t}=this.context,n=Object.keys(Object.fromEntries(this.cachedStyles)).filter(i=>i&&e.getElementType(i)==="node");if(n.length>0){const i=new Set;n.forEach(a=>{e.getRelatedEdgesData(a).forEach(s=>i.add(he(s)))}),i.forEach(a=>{const s=t==null?void 0:t.getElement(a);s==null||s.update({})})}}}bindEvents(){const{graph:e}=this.context;e.on(Pe.AFTER_DRAW,this.resetTransform),e.on(Pe.AFTER_TRANSFORM,this.fixElementSize)}unbindEvents(){const{graph:e}=this.context;e.off(Pe.AFTER_DRAW,this.resetTransform),e.off(Pe.AFTER_TRANSFORM,this.fixElementSize)}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return $e(t)?t(e):!!t}destroy(){this.unbindEvents(),super.destroy()}}Yv.defaultOptions={enable:r=>r.data.scale<1,nodeFilter:()=>!0,edgeFilter:()=>!0,comboFilter:()=>!0,edge:[{shape:"key",fields:["lineWidth"]},{shape:"halo",fields:["lineWidth"]},{shape:"label"}],reset:!1};var Ine=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class Xv extends Aa{constructor(e,t){super(e,Object.assign({},Xv.defaultOptions,t)),this.focus=n=>Ine(this,void 0,void 0,function*(){if(!this.validate(n))return;const{graph:i}=this.context;yield i.focusElement(n.target.id,this.options.animation)}),this.shortcut=new pA(e.graph),this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),vl.forEach(t=>{e.on(`${t}:${_e.CLICK}`,this.focus)})}validate(e){if(this.destroyed||!this.isKeydown())return!1;const{enable:t}=this.options;return $e(t)?t(e):!!t}isKeydown(){const{trigger:e}=this.options;return e!=null&&e.length?this.shortcut.match(e):!0}unbindEvents(){const{graph:e}=this.context;vl.forEach(t=>{e.off(`${t}:${_e.CLICK}`,this.focus)})}destroy(){this.unbindEvents(),this.shortcut.destroy(),super.destroy()}}Xv.defaultOptions={animation:{easing:"ease-in",duration:500},enable:!0,trigger:[]};class Zv extends Aa{constructor(e,t){super(e,Object.assign({},Zv.defaultOptions,t)),this.isFrozen=!1,this.toggleFrozen=n=>{this.isFrozen=n.type==="dragstart"},this.hoverElement=n=>{if(!this.validate(n))return;const i=n.type===_e.POINTER_ENTER;this.updateElementsState(n,i);const{onHover:a,onHoverEnd:s}=this.options;i?a==null||a(n):s==null||s(n)},this.updateElementsState=(n,i)=>{if(!this.options.state&&!this.options.inactiveState)return;const{graph:a}=this.context,{state:s,animation:o,inactiveState:A}=this.options,l=this.getActiveIds(n),c={};if(s&&Object.assign(c,this.getElementsState(l,s,i)),A){const u=rH(a.getData(),!0).filter(h=>!l.includes(h));Object.assign(c,this.getElementsState(u,A,i))}a.setElementState(c,o)},this.getElementsState=(n,i,a)=>{const{graph:s}=this.context,o={};return n.forEach(A=>{const l=s.getElementState(A);a?o[A]=l.includes(i)?l:[...l,i]:o[A]=l.filter(c=>c!==i)}),o},this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),vl.forEach(n=>{e.on(`${n}:${_e.POINTER_ENTER}`,this.hoverElement),e.on(`${n}:${_e.POINTER_LEAVE}`,this.hoverElement)});const t=this.context.canvas.document;t.addEventListener(`${_e.DRAG_START}`,this.toggleFrozen),t.addEventListener(`${_e.DRAG_END}`,this.toggleFrozen)}getActiveIds(e){const{graph:t}=this.context,{degree:n,direction:i}=this.options,a=e.target.id;return n?gH(t,e.targetType,a,typeof n=="function"?n(e):n,i):[a]}validate(e){if(this.destroyed||this.isFrozen||vh(e.target)||this.context.graph.isCollapsingExpanding)return!1;const{enable:t}=this.options;return $e(t)?t(e):!!t}unbindEvents(){const{graph:e}=this.context;vl.forEach(n=>{e.off(`${n}:${_e.POINTER_ENTER}`,this.hoverElement),e.off(`${n}:${_e.POINTER_LEAVE}`,this.hoverElement)});const t=this.context.canvas.document;t.removeEventListener(`${_e.DRAG_START}`,this.toggleFrozen),t.removeEventListener(`${_e.DRAG_END}`,this.toggleFrozen)}destroy(){this.unbindEvents(),super.destroy()}}Zv.defaultOptions={animation:!1,enable:!0,degree:0,direction:"both",state:"active",inactiveState:void 0};class Pne extends dh{onPointerDown(e){if(!super.validate(e)||!super.isKeydown()||this.points)return;const{canvas:t,graph:n}=this.context;this.pathShape=new ci({id:"g6-lasso-select",style:this.options.style}),t.appendChild(this.pathShape),this.points=[Yp(e,n)]}onPointerMove(e){var t;if(!this.points)return;const{immediately:n,mode:i}=this.options;this.points.push(Yp(e,this.context.graph)),(t=this.pathShape)===null||t===void 0||t.setAttribute("d",kee(this.points)),n&&i==="default"&&this.points.length>2&&super.updateElementsStates(this.points)}onPointerUp(){if(this.points){if(this.points.length<2){this.clearLasso();return}super.updateElementsStates(this.points),this.clearLasso()}}clearLasso(){var e;(e=this.pathShape)===null||e===void 0||e.remove(),this.pathShape=void 0,this.points=void 0}}class Jv extends Aa{constructor(e,t){super(e,Object.assign({},Jv.defaultOptions,t)),this.hiddenShapes=[],this.isVisible=!0,this.setElementsVisibility=(n,i,a)=>{n.filter(Boolean).forEach(s=>{i==="hidden"&&!s.isVisible()?this.hiddenShapes.push(s):i==="visible"&&this.hiddenShapes.includes(s)?this.hiddenShapes.splice(this.hiddenShapes.indexOf(s),1):gl(s,i,a)})},this.filterShapes=(n,i)=>{if($e(i))return s=>!i(n,s);const a=i==null?void 0:i[n];return s=>s.className?!(a!=null&&a.includes(s.className)):!0},this.hideShapes=n=>{if(!this.validate(n)||!this.isVisible)return;const{element:i}=this.context,{shapes:a={}}=this.options;this.setElementsVisibility(i.getNodes(),"hidden",this.filterShapes("node",a)),this.setElementsVisibility(i.getEdges(),"hidden",this.filterShapes("edge",a)),this.setElementsVisibility(i.getCombos(),"hidden",this.filterShapes("combo",a)),this.isVisible=!1},this.showShapes=nh(n=>{if(!this.validate(n)||this.isVisible)return;const{element:i}=this.context;this.setElementsVisibility(i.getNodes(),"visible"),this.setElementsVisibility(i.getEdges(),"visible"),this.setElementsVisibility(i.getCombos(),"visible"),this.isVisible=!0},this.options.debounce),this.bindEvents()}bindEvents(){const{graph:e}=this.context;e.on(Pe.BEFORE_TRANSFORM,this.hideShapes),e.on(Pe.AFTER_TRANSFORM,this.showShapes)}unbindEvents(){const{graph:e}=this.context;e.off(Pe.BEFORE_TRANSFORM,this.hideShapes),e.off(Pe.AFTER_TRANSFORM,this.showShapes)}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return $e(t)?t(e):!!t}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}Jv.defaultOptions={enable:!0,debounce:200,shapes:r=>r==="node"};var zI=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class em extends Aa{constructor(e,t){super(e,Object.assign({},em.defaultOptions,t)),this.onWheel=n=>zI(this,void 0,void 0,function*(){this.options.preventDefault&&n.preventDefault();const i=n.deltaX,a=n.deltaY;yield this.scroll([-i,-a],n)}),this.shortcut=new pA(e.graph),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){var e,t;const{trigger:n}=this.options;if(this.shortcut.unbindAll(),nr(n)){(e=this.graphDom)===null||e===void 0||e.removeEventListener(_e.WHEEL,this.onWheel);const{up:i=[],down:a=[],left:s=[],right:o=[]}=n;this.shortcut.bind(i,A=>this.scroll([0,-10],A)),this.shortcut.bind(a,A=>this.scroll([0,10],A)),this.shortcut.bind(s,A=>this.scroll([-10,0],A)),this.shortcut.bind(o,A=>this.scroll([10,0],A))}else(t=this.graphDom)===null||t===void 0||t.addEventListener(_e.WHEEL,this.onWheel,{passive:!1})}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}formatDisplacement(e){const{sensitivity:t}=this.options;return e=$a(e,t),e=this.clampByDirection(e),e=this.clampByRange(e),e}clampByDirection([e,t]){const{direction:n}=this.options;return n==="x"?t=0:n==="y"&&(e=0),[e,t]}clampByRange([e,t]){const{viewport:n,canvas:i}=this.context,[a,s]=i.getSize(),[o,A,l,c]=Fa(this.options.range),u=[s*o,a*A,s*l,a*c],h=gA(k2(n.getCanvasCenter()),u),g=rn(n.getViewportCenter(),[e,t,0]);if(!Ja(g,h)){const{min:[p,v],max:[m,w]}=h;(g[0]<p&&e>0||g[0]>m&&e<0)&&(e=0),(g[1]<v&&t>0||g[1]>w&&t<0)&&(t=0)}return[e,t]}scroll(e,t){return zI(this,void 0,void 0,function*(){if(!this.validate(t))return;const{onFinish:n}=this.options,i=this.context.graph,a=this.formatDisplacement(e);yield i.translateBy(a,!1),n==null||n()})}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return $e(t)?t(e):!!t}destroy(){var e;this.shortcut.destroy(),(e=this.graphDom)===null||e===void 0||e.removeEventListener(_e.WHEEL,this.onWheel),super.destroy()}}em.defaultOptions={enable:!0,sensitivity:1,preventDefault:!0,range:1/0};var jI=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class tm extends Aa{constructor(e,t){super(e,Object.assign({},tm.defaultOptions,t)),this.zoom=(n,i,a)=>jI(this,void 0,void 0,function*(){if(!this.validate(i))return;const{graph:s}=this.context;let o=this.options.origin;!o&&"viewport"in i&&(o=Gr(i.viewport));const{sensitivity:A,onFinish:l}=this.options,c=1+Rn(n,-50,50)*A/100,u=s.getZoom();yield s.zoomTo(u*c,a,o),l==null||l()}),this.onReset=()=>jI(this,void 0,void 0,function*(){yield this.context.graph.zoomTo(1,this.options.animation)}),this.preventDefault=n=>{this.options.preventDefault&&n.preventDefault()},this.shortcut=new pA(e.graph),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){const{trigger:e}=this.options;if(this.shortcut.unbindAll(),Array.isArray(e))if(e.includes(_e.PINCH))this.shortcut.bind([_e.PINCH],t=>{this.zoom(t.scale,t,!1)});else{const t=this.context.canvas.getContainer();t==null||t.addEventListener(_e.WHEEL,this.preventDefault),this.shortcut.bind([...e,_e.WHEEL],n=>{const{deltaX:i,deltaY:a}=n;this.zoom(-(a??i),n,!1)})}if(typeof e=="object"){const{zoomIn:t=[],zoomOut:n=[],reset:i=[]}=e;this.shortcut.bind(t,a=>this.zoom(10,a,this.options.animation)),this.shortcut.bind(n,a=>this.zoom(-10,a,this.options.animation)),this.shortcut.bind(i,this.onReset)}}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return $e(t)?t(e):!!t}destroy(){var e;this.shortcut.destroy(),(e=this.context.canvas.getContainer())===null||e===void 0||e.removeEventListener(_e.WHEEL,this.preventDefault),super.destroy()}}tm.defaultOptions={animation:{duration:200},enable:!0,sensitivity:1,trigger:[],preventDefault:!0};function KI(r,e,t,n="height"){const i=r[n],a=e[n];return t==="center"?(i+a)/2:r.height}const Cl=Object.assign,One={getId:r=>r.id||r.name,getPreH:r=>r.preH||0,getPreV:r=>r.preV||0,getHGap:r=>r.hgap||18,getVGap:r=>r.vgap||18,getChildren:r=>r.children,getHeight:r=>r.height||36,getWidth(r){const e=r.label||" ";return r.width||18*e.split("").length}};class nv{constructor(e,t){if(this.x=0,this.y=0,this.depth=0,this.children=[],this.hgap=0,this.vgap=0,e instanceof nv||"x"in e&&"y"in e&&"children"in e){const a=e;return this.data=a.data,this.id=a.id,this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this.depth=a.depth,this.children=a.children,this.parent=a.parent,this.hgap=a.hgap,this.vgap=a.vgap,this.preH=a.preH,void(this.preV=a.preV)}this.data=e;const n=t.getHGap(e),i=t.getVGap(e);this.preH=t.getPreH(e),this.preV=t.getPreV(e),this.width=t.getWidth(e),this.height=t.getHeight(e),this.width+=this.preH,this.height+=this.preV,this.id=t.getId(e),this.addGap(n,i)}isRoot(){return this.depth===0}isLeaf(){return this.children.length===0}addGap(e,t){this.hgap+=e,this.vgap+=t,this.width+=2*e,this.height+=2*t}eachNode(e){let t,n=[this];for(;t=n.shift();)e(t),n=t.children.concat(n)}DFTraverse(e){this.eachNode(e)}BFTraverse(e){let t,n=[this];for(;t=n.shift();)e(t),n=n.concat(t.children)}getBoundingBox(){const e={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(t=>{e.left=Math.min(e.left,t.x),e.top=Math.min(e.top,t.y),e.width=Math.max(e.width,t.x+t.width),e.height=Math.max(e.height,t.y+t.height)}),e}translate(e=0,t=0){this.eachNode(n=>{n.x+=e,n.y+=t,n.x+=n.preH,n.y+=n.preV})}right2left(){const e=this.getBoundingBox();this.eachNode(t=>{t.x=t.x-2*(t.x-e.left)-t.width}),this.translate(e.width,0)}bottom2top(){const e=this.getBoundingBox();this.eachNode(t=>{t.y=t.y-2*(t.y-e.top)-t.height}),this.translate(0,e.height)}}function Fx(r,e={},t){e=Cl({},One,e);const n=new nv(r,e),i=[n];let a;if(!t&&!r.collapsed){for(;a=i.shift();)if(!a.data.collapsed){const s=e.getChildren(a.data),o=s?s.length:0;if(a.children=new Array(o),s&&o)for(let A=0;A<o;A++){const l=new nv(s[A],e);a.children[A]=l,i.push(l),l.parent=a,l.depth=a.depth+1}}}return n}class nm{constructor(e,t={}){this.options=t,this.rootNode=Fx(e,t)}execute(){throw new Error("please override this method")}}let Lne=class up{constructor(e=0,t=0,n=0,i=[]){this.x=0,this.prelim=0,this.mod=0,this.shift=0,this.change=0,this.tl=null,this.tr=null,this.el=null,this.er=null,this.msel=0,this.mser=0,this.w=e||0,this.h=t||0,this.y=n||0,this.c=i||[],this.cs=i.length}static fromNode(e,t){if(!e)return null;const n=[];return e.children.forEach(i=>{const a=up.fromNode(i,t);a&&n.push(a)}),t?new up(e.height,e.width,e.x,n):new up(e.width,e.height,e.y,n)}};function KH(r,e,t){t?r.y+=e:r.x+=e,r.children.forEach(n=>{KH(n,e,t)})}function GH(r,e){let t=e?r.y:r.x;return r.children.forEach(n=>{t=Math.min(GH(n,e),t)}),t}function Nne(r,e){KH(r,-GH(r,e),e)}function VH(r,e,t){t?e.y=r.x:e.x=r.x,r.c.forEach((n,i)=>{VH(n,e.children[i],t)})}function qH(r,e,t=0){e?(r.x=t,t+=r.width):(r.y=t,t+=r.height),r.children.forEach(n=>{qH(n,e,t)})}function Dne(r,e={}){const t=e.isHorizontal;function n(u){u.cs===0?(u.el=u,u.er=u,u.msel=u.mser=0):(u.el=u.c[0].el,u.msel=u.c[0].msel,u.er=u.c[u.cs-1].er,u.mser=u.c[u.cs-1].mser)}function i(u,h,g){let p=u.c[h-1],v=p.mod,m=u.c[h],w=m.mod;for(;p!==null&&m!==null;){g&&A(p)>g.low&&(g=g.nxt);const b=v+p.prelim+p.w-(w+m.prelim);b>0&&(w+=b,g&&a(u,h,g.index,b));const _=A(p),C=A(m);_<=C&&(p=o(p),p!==null&&(v+=p.mod)),_>=C&&(m=s(m),m!==null&&(w+=m.mod))}!p&&m?(function(b,_,C,M){const F=b.c[0].el;F.tl=C;const k=M-C.mod-b.c[0].msel;F.mod+=k,F.prelim-=k,b.c[0].el=b.c[_].el,b.c[0].msel=b.c[_].msel})(u,h,m,w):p&&!m&&(function(b,_,C,M){const F=b.c[_].er;F.tr=C;const k=M-C.mod-b.c[_].mser;F.mod+=k,F.prelim-=k,b.c[_].er=b.c[_-1].er,b.c[_].mser=b.c[_-1].mser})(u,h,p,v)}function a(u,h,g,p){u.c[h].mod+=p,u.c[h].msel+=p,u.c[h].mser+=p,(function(v,m,w,b){if(w!==m-1){const _=m-w;v.c[w+1].shift+=b/_,v.c[m].shift-=b/_,v.c[m].change-=b-b/_}})(u,h,g,p)}function s(u){return u.cs===0?u.tl:u.c[0]}function o(u){return u.cs===0?u.tr:u.c[u.cs-1]}function A(u){return u.y+u.h}function l(u,h,g){for(;g!==null&&u>=g.low;)g=g.nxt;return{low:u,index:h,nxt:g}}qH(r,t);const c=Lne.fromNode(r,t);return c&&((function u(h){if(h.cs===0)return void n(h);u(h.c[0]);let g=l(A(h.c[0].el),0,null);for(let p=1;p<h.cs;++p){u(h.c[p]);const v=A(h.c[p].er);i(h,p,g),g=l(v,p,g)}(function(p){p.prelim=(p.c[0].prelim+p.c[0].mod+p.c[p.cs-1].mod+p.c[p.cs-1].prelim+p.c[p.cs-1].w)/2-p.w/2})(h),n(h)})(c),(function u(h,g){g+=h.mod,h.x=h.prelim+g,(function(p){let v=0,m=0;for(let w=0;w<p.cs;w++)v+=p.c[w].shift,m+=v+p.c[w].change,p.c[w].mod+=m})(h);for(let p=0;p<h.cs;p++)u(h.c[p],g)})(c,0),VH(c,r,t),Nne(r,t)),r}function WH(r,e){const t=Fx(r.data,e,!0),n=Fx(r.data,e,!0),i=r.children.length,a=Math.round(i/2),s=e.getSide||function(o,A){return A<a?"right":"left"};for(let o=0;o<i;o++){const A=r.children[o];s(A,o)==="right"?n.children.push(A):t.children.push(A)}return t.eachNode(o=>{o.isRoot()||(o.side="left")}),n.eachNode(o=>{o.isRoot()||(o.side="right")}),{left:t,right:n}}const Qo=["LR","RL","TB","BT","H","V"],Rne=["LR","RL","H"],Qne=Qo[0];function V2(r,e,t){const n=e.direction||Qne;if(e.isHorizontal=(a=>Rne.indexOf(a)>-1)(n),Qo.indexOf(n)===-1)throw new TypeError(`Invalid direction: ${n}`);if(n===Qo[0])t(r,e);else if(n===Qo[1])t(r,e),r.right2left();else if(n===Qo[2])t(r,e);else if(n===Qo[3])t(r,e),r.bottom2top();else if(n===Qo[4]||n===Qo[5]){const{left:a,right:s}=WH(r,e);t(a,e),t(s,e),e.isHorizontal?a.right2left():a.bottom2top(),s.translate(a.x-s.x,a.y-s.y),r.x=a.x,r.y=s.y;const o=r.getBoundingBox();e.isHorizontal?o.top<0&&r.translate(0,-o.top):o.left<0&&r.translate(-o.left,0)}let i=e.fixedRoot;return i===void 0&&(i=!0),i&&r.translate(-(r.x+r.width/2+r.hgap),-(r.y+r.height/2+r.vgap)),(function(a,s){if(s.radial){const[o,A]=s.isHorizontal?["x","y"]:["y","x"],l={x:1/0,y:1/0},c={x:-1/0,y:-1/0};let u=0;a.DFTraverse(p=>{u++;const{x:v,y:m}=p;l.x=Math.min(l.x,v),l.y=Math.min(l.y,m),c.x=Math.max(c.x,v),c.y=Math.max(c.y,m)});const h=c[A]-l[A];if(h===0)return;const g=2*Math.PI/u;a.DFTraverse(p=>{const v=p[A],m=l[A],w=p[o],b=a[o],_=(v-m)/h*(2*Math.PI-g)+g,C=w-b;p.x=Math.cos(_)*C,p.y=Math.sin(_)*C})}})(r,e),r}let Une=class extends nm{execute(){return V2(this.rootNode,this.options,Dne)}};const Hne={};function zne(r,e){const t=Cl({},Hne,e);return new Une(r,t).execute()}let jne=class{constructor(e=0,t=[]){this.x=0,this.y=0,this.leftChild=null,this.rightChild=null,this.isLeaf=!1,this.height=e,this.children=t}};const Kne={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function $H(r,e,t){t?(e.x=r.x,e.y=r.y):(e.x=r.y,e.y=r.x),r.children.forEach((n,i)=>{$H(n,e.children[i],t)})}function Gne(r,e={}){const t=Cl({},Kne,e);let n=0,i=null;const a=(function s(o){o.width=0,o.depth&&o.depth>n&&(n=o.depth);const A=o.children,l=A.length,c=new jne(0,[]);return A.forEach((u,h)=>{const g=s(u);c.children.push(g),h===0&&(c.leftChild=g),h===l-1&&(c.rightChild=g)}),c.originNode=o,c.isLeaf=o.isLeaf(),c})(r);return(function s(o){if(o.isLeaf||o.children.length===0)o.drawingDepth=n;else{const A=o.children.map(c=>s(c)),l=Math.min(...A);o.drawingDepth=l-1}return o.drawingDepth})(a),(function s(o){o.x=o.drawingDepth*t.rankSep,o.isLeaf?(o.y=0,i&&(o.y=i.y+i.height+t.nodeSep,o.originNode.parent!==i.originNode.parent&&(o.y+=t.subTreeSep)),i=o):(o.children.forEach(A=>{s(A)}),o.y=(o.leftChild.y+o.rightChild.y)/2)})(a),$H(a,r,t.isHorizontal),r}class Vne extends nm{execute(){return this.rootNode.width=0,V2(this.rootNode,this.options,Gne)}}const qne={};function Wne(r,e){const t=Cl({},qne,e);return new Vne(r,t).execute()}function jg(r,e,t,n){let i=null;r.eachNode(a=>{(function(s,o,A,l,c){const u=(typeof A=="function"?A(s):A)*s.depth;if(!l)try{if(s.parent&&s.id===s.parent.children[0].id)return s.x+=u,void(s.y=o?o.y:0)}catch{}if(s.x+=u,o){if(s.y=o.y+KI(o,s,c),o.parent&&s.parent&&s.parent.id!==o.parent.id){const h=o.parent,g=h.y+KI(h,s,c);s.y=g>s.y?g:s.y}}else s.y=0})(a,i,e,t,n),i=a})}const dd=["LR","RL","H"],$ne=dd[0];class Yne extends nm{execute(){const e=this.options,t=this.rootNode;e.isHorizontal=!0;const{indent:n=20,dropCap:i=!0,direction:a=$ne,align:s}=e;if(a&&dd.indexOf(a)===-1)throw new TypeError(`Invalid direction: ${a}`);if(a===dd[0])jg(t,n,i,s);else if(a===dd[1])jg(t,n,i,s),t.right2left();else if(a===dd[2]){const{left:o,right:A}=WH(t,e);jg(o,n,i,s),o.right2left(),jg(A,n,i,s);const l=o.getBoundingBox();A.translate(l.width,0),t.x=A.x-t.width/2}return t}}const Xne={};function Zne(r,e){const t=Cl({},Xne,e);return new Yne(r,t).execute()}function YH(r,e){let t=0;return r.children.length?r.children.forEach(n=>{t+=YH(n,e)}):t=r.height,r._subTreeSep=e.getSubTreeSep(r.data),r.totalHeight=Math.max(r.height,t)+2*r._subTreeSep,r.totalHeight}function XH(r){const e=r.children,t=e.length;if(t){e.forEach(o=>{XH(o)});const n=e[0],i=e[t-1],a=i.y-n.y+i.height;let s=0;if(e.forEach(o=>{s+=o.totalHeight}),a>r.height)r.y=n.y+a/2-r.height/2;else if(e.length!==1||r.height>s){const o=r.y+(r.height-a)/2-n.y;e.forEach(A=>{A.translate(0,o)})}else r.y=(n.y+n.height/2+i.y+i.height/2)/2-r.height/2}}const Jne={getSubTreeSep:()=>0};function ere(r,e={}){return e=Cl({},Jne,e),r.parent={x:0,width:0,height:0,y:0},r.BFTraverse(t=>{t.x=t.parent.x+t.parent.width}),r.parent=void 0,YH(r,e),r.startY=0,r.y=r.totalHeight/2-r.height/2,r.eachNode(t=>{const n=t.children,i=n.length;if(i){const a=n[0];if(a.startY=t.startY+t._subTreeSep,i===1)a.y=t.y+t.height/2-a.height/2;else{a.y=a.startY+a.totalHeight/2-a.height/2;for(let s=1;s<i;s++){const o=n[s];o.startY=n[s-1].startY+n[s-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}}),XH(r),r}class tre extends nm{execute(){return V2(this.rootNode,this.options,ere)}}const nre={};function rre(r,e){const t=Cl({},nre,e);return new tre(r,t).execute()}const ire=(r,e)=>{if(r!=="next"&&r!=="prev")return e},GI=r=>{r.prev.next=r.next,r.next.prev=r.prev,delete r.next,delete r.prev};let are=class{constructor(){const e={};e.prev=e,e.next=e.prev,this.shortcut=e}dequeue(){const e=this.shortcut,t=e.prev;if(t&&t!==e)return GI(t),t}enqueue(e){const t=this.shortcut;e.prev&&e.next&&GI(e),e.next=t.next,t.next.prev=e,t.next=e,e.prev=t}toString(){const e=[],t=this.shortcut;let n=t.prev;for(;n!==t;)e.push(JSON.stringify(n,ire)),n=n==null?void 0:n.prev;return`[${e.join(", ")}]`}};class sre extends are{}const ore=()=>1,Are=(r,e)=>{var t;if(r.getAllNodes().length<=1)return[];const n=cre(r,e||ore);return(t=lre(n.graph,n.buckets,n.zeroIdx).map(a=>r.getRelatedEdges(a.v,"out").filter(({target:s})=>s===a.w)))===null||t===void 0?void 0:t.flat()},lre=(r,e,t)=>{let n=[];const i=e[e.length-1],a=e[0];let s;for(;r.getAllNodes().length;){for(;s=a.dequeue();)R1(r,e,t,s);for(;s=i.dequeue();)R1(r,e,t,s);if(r.getAllNodes().length){for(let o=e.length-2;o>0;--o)if(s=e[o].dequeue(),s){n=n.concat(R1(r,e,t,s,!0));break}}}return n},R1=(r,e,t,n,i)=>{var a,s;const o=[];return r.hasNode(n.v)&&((a=r.getRelatedEdges(n.v,"in"))===null||a===void 0||a.forEach(A=>{const l=A.data.weight,c=r.getNode(A.source);i&&o.push({v:A.source,w:A.target,in:0,out:0}),c.data.out===void 0&&(c.data.out=0),c.data.out-=l,kx(e,t,Object.assign({v:c.id},c.data))}),(s=r.getRelatedEdges(n.v,"out"))===null||s===void 0||s.forEach(A=>{const l=A.data.weight,c=A.target,u=r.getNode(c);u.data.in===void 0&&(u.data.in=0),u.data.in-=l,kx(e,t,Object.assign({v:u.id},u.data))}),r.removeNode(n.v)),i?o:void 0},cre=(r,e)=>{const t=new Sr;let n=0,i=0;r.getAllNodes().forEach(A=>{t.addNode({id:A.id,data:{v:A.id,in:0,out:0}})}),r.getAllEdges().forEach(A=>{const l=t.getRelatedEdges(A.source,"out").find(u=>u.target===A.target),c=(e==null?void 0:e(A))||1;l?t.updateEdgeData(l==null?void 0:l.id,Object.assign(Object.assign({},l.data),{weight:l.data.weight+c})):t.addEdge({id:A.id,source:A.source,target:A.target,data:{weight:c}}),i=Math.max(i,t.getNode(A.source).data.out+=c),n=Math.max(n,t.getNode(A.target).data.in+=c)});const a=[],s=i+n+3;for(let A=0;A<s;A++)a.push(new sre);const o=n+1;return t.getAllNodes().forEach(A=>{kx(a,o,Object.assign({v:A.id},t.getNode(A.id).data))}),{buckets:a,zeroIdx:o,graph:t}},kx=(r,e,t)=>{t.out?t.in?r[t.out-t.in+e].enqueue(t):r[r.length-1].enqueue(t):r[0].enqueue(t)},ure=(r,e)=>{const n=Are(r,(i=>a=>a.data.weight||1)());n==null||n.forEach(i=>{const a=i.data;r.removeEdge(i.id),a.forwardName=i.data.name,a.reversed=!0,r.addEdge({id:i.id,source:i.target,target:i.source,data:Object.assign({},a)})})},dre=r=>{r.getAllEdges().forEach(e=>{const t=e.data;if(t.reversed){r.removeEdge(e.id);const n=t.forwardName;delete t.reversed,delete t.forwardName,r.addEdge({id:e.id,source:e.target,target:e.source,data:Object.assign(Object.assign({},t),{forwardName:n})})}})},hre=(r,e)=>Number(r)-Number(e),$c=(r,e,t,n)=>{let i;do i=`${n}${Math.random()}`;while(r.hasNode(i));return t.dummy=e,r.addNode({id:i,data:t}),i},fre=r=>{const e=new Sr;return r.getAllNodes().forEach(t=>{e.addNode(Object.assign({},t))}),r.getAllEdges().forEach(t=>{const n=e.getRelatedEdges(t.source,"out").find(i=>i.target===t.target);n?e.updateEdgeData(n==null?void 0:n.id,Object.assign(Object.assign({},n.data),{weight:n.data.weight+t.data.weight||0,minlen:Math.max(n.data.minlen,t.data.minlen||1)})):e.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:t.data.weight||0,minlen:t.data.minlen||1}})}),e},ZH=r=>{const e=new Sr;return r.getAllNodes().forEach(t=>{r.getChildren(t.id).length||e.addNode(Object.assign({},t))}),r.getAllEdges().forEach(t=>{e.addEdge(t)}),e},gre=(r,e)=>r==null?void 0:r.reduce((t,n,i)=>(t[n]=e[i],t),{}),VI=(r,e)=>{const t=Number(r.x),n=Number(r.y),i=Number(e.x)-t,a=Number(e.y)-n;let s=Number(r.width)/2,o=Number(r.height)/2;if(!i&&!a)return{x:0,y:0};let A,l;return Math.abs(a)*s>Math.abs(i)*o?(a<0&&(o=-o),A=o*i/a,l=o):(i<0&&(s=-s),A=s,l=s*a/i),{x:t+A,y:n+l}},Yd=r=>{const e=[],t=JH(r)+1;for(let n=0;n<t;n++)e.push([]);r.getAllNodes().forEach(n=>{const i=n.data.rank;i!==void 0&&e[i]&&e[i].push(n.id)});for(let n=0;n<t;n++)e[n]=e[n].sort((i,a)=>hre(r.getNode(i).data.order,r.getNode(a).data.order));return e},pre=r=>{const e=r.getAllNodes().filter(n=>n.data.rank!==void 0).map(n=>n.data.rank),t=Math.min(...e);r.getAllNodes().forEach(n=>{n.data.hasOwnProperty("rank")&&t!==1/0&&(n.data.rank-=t)})},vre=(r,e=0)=>{const t=r.getAllNodes(),n=t.filter(o=>o.data.rank!==void 0).map(o=>o.data.rank),i=Math.min(...n),a=[];t.forEach(o=>{const A=(o.data.rank||0)-i;a[A]||(a[A]=[]),a[A].push(o.id)});let s=0;for(let o=0;o<a.length;o++){const A=a[o];A===void 0?o%e!==0&&(s-=1):s&&(A==null||A.forEach(l=>{const c=r.getNode(l);c&&(c.data.rank=c.data.rank||0,c.data.rank+=s)}))}},qI=(r,e,t,n)=>{const i={width:0,height:0};return je(t)&&je(n)&&(i.rank=t,i.order=n),$c(r,"border",i,e)},JH=r=>{let e;return r.getAllNodes().forEach(t=>{const n=t.data.rank;n!==void 0&&(e===void 0||n>e)&&(e=n)}),e||(e=0),e},mre=(r,e)=>{const t={lhs:[],rhs:[]};return r==null||r.forEach(n=>{e(n)?t.lhs.push(n):t.rhs.push(n)}),t},q2=(r,e)=>r.reduce((t,n)=>{const i=e(t),a=e(n);return i>a?n:t}),e6=(r,e,t,n,i,a)=>{n.includes(e.id)||(n.push(e.id),t||a.push(e.id),i(e.id).forEach(s=>e6(r,s,t,n,i,a)),t&&a.push(e.id))},t6=(r,e,t,n)=>{const i=Array.isArray(e)?e:[e],a=A=>r.getNeighbors(A),s=[],o=[];return i.forEach(A=>{if(r.hasNode(A.id))e6(r,A,t==="post",o,a,s);else throw new Error(`Graph does not have node: ${A}`)}),s},yre=r=>{const e=t=>{const n=r.getChildren(t),i=r.getNode(t);if(n!=null&&n.length&&n.forEach(a=>e(a.id)),i.data.hasOwnProperty("minRank")){i.data.borderLeft=[],i.data.borderRight=[];for(let a=i.data.minRank,s=i.data.maxRank+1;a<s;a+=1)WI(r,"borderLeft","_bl",t,i,a),WI(r,"borderRight","_br",t,i,a)}};r.getRoots().forEach(t=>e(t.id))},WI=(r,e,t,n,i,a)=>{const s={rank:a,borderType:e,width:0,height:0},o=i.data[e][a-1],A=$c(r,"border",s,t);i.data[e][a]=A,r.setParent(A,n),o&&r.addEdge({id:`e${Math.random()}`,source:o,target:A,data:{weight:1}})},wre=(r,e)=>{const t=e.toLowerCase();(t==="lr"||t==="rl")&&n6(r)},bre=(r,e)=>{const t=e.toLowerCase();(t==="bt"||t==="rl")&&_re(r),(t==="lr"||t==="rl")&&(Ere(r),n6(r))},n6=r=>{r.getAllNodes().forEach(e=>{$I(e)}),r.getAllEdges().forEach(e=>{$I(e)})},$I=r=>{const e=r.data.width;r.data.width=r.data.height,r.data.height=e},_re=r=>{r.getAllNodes().forEach(e=>{Q1(e.data)}),r.getAllEdges().forEach(e=>{var t;(t=e.data.points)===null||t===void 0||t.forEach(n=>Q1(n)),e.data.hasOwnProperty("y")&&Q1(e.data)})},Q1=r=>{r!=null&&r.y&&(r.y=-r.y)},Ere=r=>{r.getAllNodes().forEach(e=>{U1(e.data)}),r.getAllEdges().forEach(e=>{var t;(t=e.data.points)===null||t===void 0||t.forEach(n=>U1(n)),e.data.hasOwnProperty("x")&&U1(e.data)})},U1=r=>{const e=r.x;r.x=r.y,r.y=e},Cre=r=>{const e=$c(r,"root",{},"_root"),t=Bre(r);let n=Math.max(...Object.values(t));Math.abs(n)===1/0&&(n=1);const i=n-1,a=2*i+1;r.getAllEdges().forEach(o=>{o.data.minlen*=a});const s=xre(r)+1;return r.getRoots().forEach(o=>{r6(r,e,a,s,i,t,o.id)}),{nestingRoot:e,nodeRankFactor:a}},r6=(r,e,t,n,i,a,s)=>{const o=r.getChildren(s);if(!(o!=null&&o.length)){s!==e&&r.addEdge({id:`e${Math.random()}`,source:e,target:s,data:{weight:0,minlen:t}});return}const A=qI(r,"_bt"),l=qI(r,"_bb"),c=r.getNode(s);r.setParent(A,s),c.data.borderTop=A,r.setParent(l,s),c.data.borderBottom=l,o==null||o.forEach(u=>{r6(r,e,t,n,i,a,u.id);const h=u.data.borderTop?u.data.borderTop:u.id,g=u.data.borderBottom?u.data.borderBottom:u.id,p=u.data.borderTop?n:2*n,v=h!==g?1:i-a[s]+1;r.addEdge({id:`e${Math.random()}`,source:A,target:h,data:{minlen:v,weight:p,nestingEdge:!0}}),r.addEdge({id:`e${Math.random()}`,source:g,target:l,data:{minlen:v,weight:p,nestingEdge:!0}})}),r.getParent(s)||r.addEdge({id:`e${Math.random()}`,source:e,target:A,data:{weight:0,minlen:i+a[s]}})},Bre=r=>{const e={},t=(n,i)=>{const a=r.getChildren(n);a==null||a.forEach(s=>t(s.id,i+1)),e[n]=i};return r.getRoots().forEach(n=>t(n.id,1)),e},xre=r=>{let e=0;return r.getAllEdges().forEach(t=>{e+=t.data.weight}),e},Sre=(r,e)=>{e&&r.removeNode(e),r.getAllEdges().forEach(t=>{t.data.nestingEdge&&r.removeEdge(t.id)})},Tre="edge",i6="edge-label",Mre=(r,e)=>{r.getAllEdges().forEach(t=>Fre(r,t,e))},Fre=(r,e,t)=>{let n=e.source,i=r.getNode(n).data.rank;const a=e.target,s=r.getNode(a).data.rank,o=e.data.labelRank;if(s===i+1)return;r.removeEdge(e.id);let A,l,c;for(c=0,++i;i<s;++c,++i)e.data.points=[],l={originalEdge:e,width:0,height:0,rank:i},A=$c(r,Tre,l,"_d"),i===o&&(l.width=e.data.width,l.height=e.data.height,l.dummy=i6,l.labelpos=e.data.labelpos),r.addEdge({id:`e${Math.random()}`,source:n,target:A,data:{weight:e.data.weight}}),c===0&&t.push(A),n=A;r.addEdge({id:`e${Math.random()}`,source:n,target:a,data:{weight:e.data.weight}})},kre=(r,e)=>{e.forEach(t=>{let n=r.getNode(t);const{data:i}=n,a=i.originalEdge;let s;a&&r.addEdge(a);let o=t;for(;n.data.dummy;)s=r.getSuccessors(o)[0],r.removeNode(o),a.data.points.push({x:n.data.x,y:n.data.y}),n.data.dummy===i6&&(a.data.x=n.data.x,a.data.y=n.data.y,a.data.width=n.data.width,a.data.height=n.data.height),o=s.id,n=r.getNode(o)})},Ire=(r,e,t)=>{const n={};let i;t==null||t.forEach(a=>{let s=r.getParent(a),o,A;for(;s;){if(o=r.getParent(s.id),o?(A=n[o.id],n[o.id]=s.id):(A=i,i=s.id),A&&A!==s.id){e.hasNode(A)||e.addNode({id:A,data:{}}),e.hasNode(s.id)||e.addNode({id:s.id,data:{}}),e.hasEdge(`e${A}-${s.id}`)||e.addEdge({id:`e${A}-${s.id}`,source:A,target:s.id,data:{}});return}s=o}})},Pre=(r,e,t)=>{const n=Ore(r),i=new Sr({tree:[{id:n,children:[],data:{}}]});return r.getAllNodes().forEach(a=>{const s=r.getParent(a.id);(a.data.rank===e||a.data.minRank<=e&&e<=a.data.maxRank)&&(i.hasNode(a.id)||i.addNode(Object.assign({},a)),s!=null&&s.id&&!i.hasNode(s==null?void 0:s.id)&&i.addNode(Object.assign({},s)),i.setParent(a.id,(s==null?void 0:s.id)||n),r.getRelatedEdges(a.id,t).forEach(o=>{const A=o.source===a.id?o.target:o.source;i.hasNode(A)||i.addNode(Object.assign({},r.getNode(A)));const l=i.getRelatedEdges(A,"out").find(({target:u})=>u===a.id),c=l!==void 0?l.data.weight:0;l?i.updateEdgeData(l.id,Object.assign(Object.assign({},l.data),{weight:o.data.weight+c})):i.addEdge({id:o.id,source:A,target:a.id,data:{weight:o.data.weight+c}})}),a.data.hasOwnProperty("minRank")&&i.updateNodeData(a.id,Object.assign(Object.assign({},a.data),{borderLeft:a.data.borderLeft[e],borderRight:a.data.borderRight[e]})))}),i},Ore=r=>{let e;for(;r.hasNode(e=`_root${Math.random()}`););return e},Lre=(r,e,t)=>{const n=gre(t,t.map((c,u)=>u)),a=e.map(c=>{const u=r.getRelatedEdges(c,"out").map(h=>({pos:n[h.target]||0,weight:h.data.weight}));return u==null?void 0:u.sort((h,g)=>h.pos-g.pos)}).flat().filter(c=>c!==void 0);let s=1;for(;s<t.length;)s<<=1;const o=2*s-1;s-=1;const A=Array(o).fill(0,0,o);let l=0;return a==null||a.forEach(c=>{if(c){let u=c.pos+s;A[u]+=c.weight;let h=0;for(;u>0;)u%2&&(h+=A[u+1]),u=u-1>>1,A[u]+=c.weight;l+=c.weight*h}}),l},YI=(r,e)=>{let t=0;for(let n=1;n<(e==null?void 0:e.length);n+=1)t+=Lre(r,e[n-1],e[n]);return t},XI=r=>{const e={},t=r.getAllNodes(),n=t.map(l=>{var c;return(c=l.data.rank)!==null&&c!==void 0?c:-1/0}),i=Math.max(...n),a=[];for(let l=0;l<i+1;l++)a.push([]);const s=t.sort((l,c)=>r.getNode(l.id).data.rank-r.getNode(c.id).data.rank),A=s.filter(l=>r.getNode(l.id).data.fixorder!==void 0).sort((l,c)=>r.getNode(l.id).data.fixorder-r.getNode(c.id).data.fixorder);return A==null||A.forEach(l=>{isNaN(r.getNode(l.id).data.rank)||a[r.getNode(l.id).data.rank].push(l.id),e[l.id]=!0}),s==null||s.forEach(l=>r.dfsTree(l.id,c=>{if(e.hasOwnProperty(c.id))return!0;e[c.id]=!0,isNaN(c.data.rank)||a[c.data.rank].push(c.id)})),a},Nre=(r,e)=>e.map(t=>{const n=r.getRelatedEdges(t,"in");if(!(n!=null&&n.length))return{v:t};const i={sum:0,weight:0};return n==null||n.forEach(a=>{const s=r.getNode(a.source);i.sum+=a.data.weight*s.data.order,i.weight+=a.data.weight}),{v:t,barycenter:i.sum/i.weight,weight:i.weight}}),Dre=(r,e)=>{var t,n,i;const a={};r==null||r.forEach((o,A)=>{a[o.v]={i:A,indegree:0,in:[],out:[],vs:[o.v]};const l=a[o.v];o.barycenter!==void 0&&(l.barycenter=o.barycenter,l.weight=o.weight)}),(t=e.getAllEdges())===null||t===void 0||t.forEach(o=>{const A=a[o.source],l=a[o.target];A!==void 0&&l!==void 0&&(l.indegree++,A.out.push(a[o.target]))});const s=(i=(n=Object.values(a)).filter)===null||i===void 0?void 0:i.call(n,o=>!o.indegree);return Rre(s)},Rre=r=>{var e,t;const n=[],i=A=>l=>{l.merged||(l.barycenter===void 0||A.barycenter===void 0||l.barycenter>=A.barycenter)&&Qre(A,l)},a=A=>l=>{l.in.push(A),--l.indegree===0&&r.push(l)};for(;r!=null&&r.length;){const A=r.pop();n.push(A),(e=A.in.reverse())===null||e===void 0||e.forEach(l=>i(A)(l)),(t=A.out)===null||t===void 0||t.forEach(l=>a(A)(l))}const s=n.filter(A=>!A.merged),o=["vs","i","barycenter","weight"];return s.map(A=>{const l={};return o==null||o.forEach(c=>{A[c]!==void 0&&(l[c]=A[c])}),l})},Qre=(r,e)=>{var t;let n=0,i=0;r.weight&&(n+=r.barycenter*r.weight,i+=r.weight),e.weight&&(n+=e.barycenter*e.weight,i+=e.weight),r.vs=(t=e.vs)===null||t===void 0?void 0:t.concat(r.vs),r.barycenter=n/i,r.weight=i,r.i=Math.min(e.i,r.i),e.merged=!0},Ure=(r,e,t,n)=>{const i=mre(r,h=>{const g=h.hasOwnProperty("fixorder")&&!isNaN(h.fixorder);return n?!g&&h.hasOwnProperty("barycenter"):g||h.hasOwnProperty("barycenter")}),a=i.lhs,s=i.rhs.sort((h,g)=>-h.i- -g.i),o=[];let A=0,l=0,c=0;a==null||a.sort(Hre(!!e,!!t)),c=ZI(o,s,c),a==null||a.forEach(h=>{var g;c+=(g=h.vs)===null||g===void 0?void 0:g.length,o.push(h.vs),A+=h.barycenter*h.weight,l+=h.weight,c=ZI(o,s,c)});const u={vs:o.flat()};return l&&(u.barycenter=A/l,u.weight=l),u},ZI=(r,e,t)=>{let n=t,i;for(;e.length&&(i=e[e.length-1]).i<=n;)e.pop(),r==null||r.push(i.vs),n++;return n},Hre=(r,e)=>(t,n)=>{if(t.fixorder!==void 0&&n.fixorder!==void 0)return t.fixorder-n.fixorder;if(t.barycenter<n.barycenter)return-1;if(t.barycenter>n.barycenter)return 1;if(e&&t.order!==void 0&&n.order!==void 0){if(t.order<n.order)return-1;if(t.order>n.order)return 1}return r?n.i-t.i:t.i-n.i},a6=(r,e,t,n,i,a)=>{var s,o,A,l;let c=r.getChildren(e).map(b=>b.id);const u=r.getNode(e),h=u?u.data.borderLeft:void 0,g=u?u.data.borderRight:void 0,p={};h&&(c=c==null?void 0:c.filter(b=>b!==h&&b!==g));const v=Nre(r,c||[]);v==null||v.forEach(b=>{var _;if(!((_=r.getChildren(b.v))===null||_===void 0)&&_.length){const C=a6(r,b.v,t,n,a);p[b.v]=C,C.hasOwnProperty("barycenter")&&jre(b,C)}});const m=Dre(v,t);zre(m,p),(s=m.filter(b=>b.vs.length>0))===null||s===void 0||s.forEach(b=>{const _=r.getNode(b.vs[0]);_&&(b.fixorder=_.data.fixorder,b.order=_.data.order)});const w=Ure(m,n,i,a);if(h&&(w.vs=[h,w.vs,g].flat(),!((o=r.getPredecessors(h))===null||o===void 0)&&o.length)){const b=r.getNode(((A=r.getPredecessors(h))===null||A===void 0?void 0:A[0].id)||""),_=r.getNode(((l=r.getPredecessors(g))===null||l===void 0?void 0:l[0].id)||"");w.hasOwnProperty("barycenter")||(w.barycenter=0,w.weight=0),w.barycenter=(w.barycenter*w.weight+b.data.order+_.data.order)/(w.weight+2),w.weight+=2}return w},zre=(r,e)=>{r==null||r.forEach(t=>{var n;const i=(n=t.vs)===null||n===void 0?void 0:n.map(a=>e[a]?e[a].vs:a);t.vs=i.flat()})},jre=(r,e)=>{r.barycenter!==void 0?(r.barycenter=(r.barycenter*r.weight+e.barycenter*e.weight)/(r.weight+e.weight),r.weight+=e.weight):(r.barycenter=e.barycenter,r.weight=e.weight)},Kre=(r,e)=>{const t=JH(r),n=[],i=[];for(let c=1;c<t+1;c++)n.push(c);for(let c=t-1;c>-1;c--)i.push(c);const a=JI(r,n,"in"),s=JI(r,i,"out");let o=XI(r);H1(r,o);let A=Number.POSITIVE_INFINITY,l;for(let c=0,u=0;u<4;++c,++u){eP(c%2?a:s,c%4>=2,!1,e),o=Yd(r);const h=YI(r,o);h<A&&(u=0,l=AA(o),A=h)}o=XI(r),H1(r,o);for(let c=0,u=0;u<4;++c,++u){eP(c%2?a:s,c%4>=2,!0,e),o=Yd(r);const h=YI(r,o);h<A&&(u=0,l=AA(o),A=h)}H1(r,l)},JI=(r,e,t)=>e.map(n=>Pre(r,n,t)),eP=(r,e,t,n)=>{const i=new Sr;r==null||r.forEach(a=>{var s;const o=a.getRoots()[0].id,A=a6(a,o,i,e,t,n);for(let l=0;l<((s=A.vs)===null||s===void 0?void 0:s.length);l++){const c=a.getNode(A.vs[l]);c&&(c.data.order=l)}Ire(a,i,A.vs)})},H1=(r,e)=>{e==null||e.forEach(t=>{t==null||t.forEach((n,i)=>{r.getNode(n).data.order=i})})},Gre=(r,e)=>{const n=r.getAllNodes().filter(s=>{var o;return!(!((o=r.getChildren(s.id))===null||o===void 0)&&o.length)}).map(s=>s.data.rank),i=Math.max(...n),a=[];for(let s=0;s<i+1;s++)a[s]=[];e==null||e.forEach(s=>{const o=r.getNode(s);!o||o.data.dummy||isNaN(o.data.rank)||(o.data.fixorder=a[o.data.rank].length,a[o.data.rank].push(s))})},Vre=r=>{const e={};let t=0;const n=i=>{const a=t;r.getChildren(i).forEach(s=>n(s.id)),e[i]={low:a,lim:t++}};return r.getRoots().forEach(i=>n(i.id)),e},qre=(r,e,t,n)=>{var i,a;const s=[],o=[],A=Math.min(e[t].low,e[n].low),l=Math.max(e[t].lim,e[n].lim);let c,u;c=t;do c=(i=r.getParent(c))===null||i===void 0?void 0:i.id,s.push(c);while(c&&(e[c].low>A||l>e[c].lim));for(u=c,c=n;c&&c!==u;)o.push(c),c=(a=r.getParent(c))===null||a===void 0?void 0:a.id;return{lca:u,path:s.concat(o.reverse())}},Wre=(r,e)=>{const t=Vre(r);e.forEach(n=>{var i,a;let s=n,o=r.getNode(s);const A=o.data.originalEdge;if(!A)return;const l=qre(r,t,A.source,A.target),c=l.path,u=l.lca;let h=0,g=c[h],p=!0;for(;s!==A.target;){if(o=r.getNode(s),p){for(;g!==u&&((i=r.getNode(g))===null||i===void 0?void 0:i.data.maxRank)<o.data.rank;)h++,g=c[h];g===u&&(p=!1)}if(!p){for(;h<c.length-1&&((a=r.getNode(c[h+1]))===null||a===void 0?void 0:a.data.minRank)<=o.data.rank;)h++;g=c[h]}r.hasNode(g)&&r.setParent(s,g),s=r.getSuccessors(s)[0].id}})},$re=(r,e)=>{const t={},n=(i,a)=>{let s=0,o=0;const A=i.length,l=a==null?void 0:a[(a==null?void 0:a.length)-1];return a==null||a.forEach((c,u)=>{var h;const g=Xre(r,c),p=g?r.getNode(g.id).data.order:A;(g||c===l)&&((h=a.slice(o,u+1))===null||h===void 0||h.forEach(v=>{var m;(m=r.getPredecessors(v))===null||m===void 0||m.forEach(w=>{var b;const _=r.getNode(w.id),C=_.data.order;(C<s||p<C)&&!(_.data.dummy&&(!((b=r.getNode(v))===null||b===void 0)&&b.data.dummy))&&s6(t,w.id,v)})}),o=u+1,s=p)}),a};return e!=null&&e.length&&e.reduce(n),t},Yre=(r,e)=>{const t={};function n(o,A,l,c,u){var h,g;let p;for(let v=A;v<l;v++)p=o[v],!((h=r.getNode(p))===null||h===void 0)&&h.data.dummy&&((g=r.getPredecessors(p))===null||g===void 0||g.forEach(m=>{const w=r.getNode(m.id);w.data.dummy&&(w.data.order<c||w.data.order>u)&&s6(t,m.id,p)}))}function i(o){return JSON.stringify(o.slice(1))}function a(o,A){const l=i(o);A.get(l)||(n(...o),A.set(l,!0))}const s=(o,A)=>{let l=-1,c,u=0;const h=new Map;return A==null||A.forEach((g,p)=>{var v;if(((v=r.getNode(g))===null||v===void 0?void 0:v.data.dummy)==="border"){const m=r.getPredecessors(g)||[];m.length&&(c=r.getNode(m[0].id).data.order,a([A,u,p,l,c],h),u=p,l=c)}a([A,u,A.length,c,o.length],h)}),A};return e!=null&&e.length&&e.reduce(s),t},Xre=(r,e)=>{var t,n;if(!((t=r.getNode(e))===null||t===void 0)&&t.data.dummy)return(n=r.getPredecessors(e))===null||n===void 0?void 0:n.find(i=>r.getNode(i.id).data.dummy)},s6=(r,e,t)=>{let n=e,i=t;if(n>i){const s=n;n=i,i=s}let a=r[n];a||(r[n]=a={}),a[i]=!0},Zre=(r,e,t)=>{let n=e,i=t;if(n>i){const a=e;n=i,i=a}return!!r[n]},Jre=(r,e,t,n)=>{const i={},a={},s={};return e==null||e.forEach(o=>{o==null||o.forEach((A,l)=>{i[A]=A,a[A]=A,s[A]=l})}),e==null||e.forEach(o=>{let A=-1;o==null||o.forEach(l=>{let c=n(l).map(u=>u.id);if(c.length){c=c.sort((h,g)=>s[h]-s[g]);const u=(c.length-1)/2;for(let h=Math.floor(u),g=Math.ceil(u);h<=g;++h){const p=c[h];a[l]===l&&A<s[p]&&!Zre(t,l,p)&&(a[p]=l,a[l]=i[l]=i[p],A=s[p])}}})}),{root:i,align:a}},eie=(r,e,t,n,i,a,s)=>{var o;const A={},l=tie(r,e,t,i,a,s),c=s?"borderLeft":"borderRight",u=(p,v)=>{let m=l.getAllNodes(),w=m.pop();const b={};for(;w;)b[w.id]?p(w.id):(b[w.id]=!0,m.push(w),m=m.concat(v(w.id))),w=m.pop()},h=p=>{A[p]=(l.getRelatedEdges(p,"in")||[]).reduce((v,m)=>Math.max(v,(A[m.source]||0)+m.data.weight),0)},g=p=>{const v=(l.getRelatedEdges(p,"out")||[]).reduce((w,b)=>Math.min(w,(A[b.target]||0)-b.data.weight),Number.POSITIVE_INFINITY),m=r.getNode(p);v!==Number.POSITIVE_INFINITY&&m.data.borderType!==c&&(A[p]=Math.max(A[p],v))};return u(h,l.getPredecessors.bind(l)),u(g,l.getSuccessors.bind(l)),(o=Object.values(n))===null||o===void 0||o.forEach(p=>{A[p]=A[t[p]]}),A},tie=(r,e,t,n,i,a)=>{const s=new Sr,o=aie(n,i,a);return e==null||e.forEach(A=>{let l;A==null||A.forEach(c=>{const u=t[c];if(s.hasNode(u)||s.addNode({id:u,data:{}}),l){const h=t[l],g=s.getRelatedEdges(h,"out").find(p=>p.target===u);g?s.updateEdgeData(g.id,Object.assign(Object.assign({},g.data),{weight:Math.max(o(r,c,l),g.data.weight||0)})):s.addEdge({id:`e${Math.random()}`,source:h,target:u,data:{weight:Math.max(o(r,c,l),0)}})}l=c})}),s},nie=(r,e)=>q2(Object.values(e),t=>{var n;let i=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return(n=Object.keys(t))===null||n===void 0||n.forEach(s=>{const o=t[s],A=sie(r,s)/2;i=Math.max(o+A,i),a=Math.min(o-A,a)}),i-a});function rie(r,e){const t=Object.values(e),n=Math.min(...t),i=Math.max(...t);["u","d"].forEach(a=>{["l","r"].forEach(s=>{const o=a+s,A=r[o];let l;if(A===e)return;const c=Object.values(A);l=s==="l"?n-Math.min(...c):i-Math.max(...c),l&&(r[o]={},Object.keys(A).forEach(u=>{r[o][u]=A[u]+l}))})})}const iie=(r,e)=>{const t={};return Object.keys(r.ul).forEach(n=>{if(e)t[n]=r[e.toLowerCase()][n];else{const i=Object.values(r).map(a=>a[n]);t[n]=(i[0]+i[1])/2}}),t},aie=(r,e,t)=>(n,i,a)=>{const s=n.getNode(i),o=n.getNode(a);let A=0,l=0;if(A+=s.data.width/2,s.data.hasOwnProperty("labelpos"))switch((s.data.labelpos||"").toLowerCase()){case"l":l=-s.data.width/2;break;case"r":l=s.data.width/2;break}if(l&&(A+=t?l:-l),l=0,A+=(s.data.dummy?e:r)/2,A+=(o.data.dummy?e:r)/2,A+=o.data.width/2,o.data.labelpos)switch((o.data.labelpos||"").toLowerCase()){case"l":l=o.data.width/2;break;case"r":l=-o.data.width/2;break}return l&&(A+=t?l:-l),l=0,A},sie=(r,e)=>r.getNode(e).data.width||0,oie=(r,e)=>{const{ranksep:t=0}=e||{},n=Yd(r);let i=0;n==null||n.forEach(a=>{const s=a.map(A=>r.getNode(A).data.height),o=Math.max(...s,0);a==null||a.forEach(A=>{r.getNode(A).data.y=i+o/2}),i+=o+t})},Aie=(r,e)=>{const{align:t,nodesep:n=0,edgesep:i=0}=e||{},a=Yd(r),s=Object.assign($re(r,a),Yre(r,a)),o={};let A=[];["u","d"].forEach(c=>{A=c==="u"?a:Object.values(a).reverse(),["l","r"].forEach(u=>{u==="r"&&(A=A.map(v=>Object.values(v).reverse()));const h=(c==="u"?r.getPredecessors:r.getSuccessors).bind(r),g=Jre(r,A,s,h),p=eie(r,A,g.root,g.align,n,i,u==="r");u==="r"&&Object.keys(p).forEach(v=>p[v]=-p[v]),o[c+u]=p})});const l=nie(r,o);return l&&rie(o,l),iie(o,t)},lie=(r,e)=>{var t;const n=ZH(r);oie(n,e);const i=Aie(n,e);(t=Object.keys(i))===null||t===void 0||t.forEach(a=>{n.getNode(a).data.x=i[a]})},o6=r=>{const e={},t=n=>{var i;const a=r.getNode(n);if(!a)return 0;if(e[n])return a.data.rank;e[n]=!0;let s;return(i=r.getRelatedEdges(n,"out"))===null||i===void 0||i.forEach(o=>{const A=t(o.target),l=o.data.minlen,c=A-l;c&&(s===void 0||c<s)&&(s=c)}),s||(s=0),a.data.rank=s,s};r.getAllNodes().filter(n=>r.getRelatedEdges(n.id,"in").length===0).forEach(n=>t(n.id))},cie=r=>{const e={};let t;const n=s=>{var o;const A=r.getNode(s);if(!A)return 0;if(e[s])return A.data.rank;e[s]=!0;let l;return(o=r.getRelatedEdges(s,"out"))===null||o===void 0||o.forEach(c=>{const u=n(c.target),h=c.data.minlen,g=u-h;g&&(l===void 0||g<l)&&(l=g)}),l||(l=0),(t===void 0||l<t)&&(t=l),A.data.rank=l,l};r.getAllNodes().filter(s=>r.getRelatedEdges(s.id,"in").length===0).forEach(s=>{s&&n(s.id)}),t===void 0&&(t=0);const i={},a=(s,o)=>{var A;const l=r.getNode(s),c=isNaN(l.data.layer)?o:l.data.layer;(l.data.rank===void 0||l.data.rank<c)&&(l.data.rank=c),!i[s]&&(i[s]=!0,(A=r.getRelatedEdges(s,"out"))===null||A===void 0||A.forEach(u=>{a(u.target,c+u.data.minlen)}))};r.getAllNodes().forEach(s=>{const o=s.data;o&&(isNaN(o.layer)?o.rank-=t:a(s.id,o.layer))})},dA=(r,e)=>r.getNode(e.target).data.rank-r.getNode(e.source).data.rank-e.data.minlen,uie=r=>{const e=new Sr({tree:[]}),t=r.getAllNodes()[0],n=r.getAllNodes().length;e.addNode(t);let i,a;for(;die(e,r)<n;)i=A6(e,r),a=e.hasNode(i.source)?dA(r,i):-dA(r,i),l6(e,r,a);return e},die=(r,e)=>{const t=n=>{e.getRelatedEdges(n,"both").forEach(i=>{const a=i.source,s=n===a?i.target:a;!r.hasNode(s)&&!dA(e,i)&&(r.addNode({id:s,data:{}}),r.addEdge({id:i.id,source:n,target:s,data:{}}),t(s))})};return r.getAllNodes().forEach(n=>t(n.id)),r.getAllNodes().length},hie=r=>{const e=new Sr({tree:[]}),t=r.getAllNodes()[0],n=r.getAllNodes().length;e.addNode(t);let i,a;for(;fie(e,r)<n;)i=A6(e,r),a=e.hasNode(i.source)?dA(r,i):-dA(r,i),l6(e,r,a);return e},fie=(r,e)=>{const t=n=>{var i;(i=e.getRelatedEdges(n,"both"))===null||i===void 0||i.forEach(a=>{const s=a.source,o=n===s?a.target:s;!r.hasNode(o)&&(e.getNode(o).data.layer!==void 0||!dA(e,a))&&(r.addNode({id:o,data:{}}),r.addEdge({id:a.id,source:n,target:o,data:{}}),t(o))})};return r.getAllNodes().forEach(n=>t(n.id)),r.getAllNodes().length},A6=(r,e)=>q2(e.getAllEdges(),t=>r.hasNode(t.source)!==r.hasNode(t.target)?dA(e,t):1/0),l6=(r,e,t)=>{r.getAllNodes().forEach(n=>{const i=e.getNode(n.id);i.data.rank||(i.data.rank=0),i.data.rank+=t})},gie=r=>{const e=fre(r);o6(e);const t=uie(e);u6(t),c6(t,e);let n,i;for(;n=mie(t);)i=yie(t,e,n),wie(t,e,n,i)},c6=(r,e)=>{let t=t6(r,r.getAllNodes(),"post");t=t.slice(0,(t==null?void 0:t.length)-1),t.forEach(n=>{pie(r,e,n)})},pie=(r,e,t)=>{const i=r.getNode(t).data.parent,a=r.getRelatedEdges(t,"both").find(s=>s.target===i||s.source===i);a.data.cutvalue=vie(r,e,t)},vie=(r,e,t)=>{const i=r.getNode(t).data.parent;let a=!0,s=e.getRelatedEdges(t,"out").find(A=>A.target===i),o=0;return s||(a=!1,s=e.getRelatedEdges(i,"out").find(A=>A.target===t)),o=s.data.weight,e.getRelatedEdges(t,"both").forEach(A=>{const l=A.source===t,c=l?A.target:A.source;if(c!==i){const u=l===a,h=A.data.weight;if(o+=u?h:-h,_ie(r,t,c)){const g=r.getRelatedEdges(t,"both").find(p=>p.source===c||p.target===c).data.cutvalue;o+=u?-g:g}}}),o},u6=(r,e=r.getAllNodes()[0].id)=>{d6(r,{},1,e)},d6=(r,e,t,n,i)=>{var a;const s=t;let o=t;const A=r.getNode(n);return e[n]=!0,(a=r.getNeighbors(n))===null||a===void 0||a.forEach(l=>{e[l.id]||(o=d6(r,e,o,l.id,n))}),A.data.low=s,A.data.lim=o++,i?A.data.parent=i:delete A.data.parent,o},mie=r=>r.getAllEdges().find(e=>e.data.cutvalue<0),yie=(r,e,t)=>{let n=t.source,i=t.target;e.getRelatedEdges(n,"out").find(c=>c.target===i)||(n=t.target,i=t.source);const a=r.getNode(n),s=r.getNode(i);let o=a,A=!1;a.data.lim>s.data.lim&&(o=s,A=!0);const l=e.getAllEdges().filter(c=>A===tP(r.getNode(c.source),o)&&A!==tP(r.getNode(c.target),o));return q2(l,c=>dA(e,c))},wie=(r,e,t,n)=>{const i=r.getRelatedEdges(t.source,"both").find(a=>a.source===t.target||a.target===t.target);i&&r.removeEdge(i.id),r.addEdge({id:`e${Math.random()}`,source:n.source,target:n.target,data:{}}),u6(r),c6(r,e),bie(r,e)},bie=(r,e)=>{const t=r.getAllNodes().find(i=>!i.data.parent);let n=t6(r,t,"pre");n=n.slice(1),n.forEach(i=>{const a=r.getNode(i).data.parent;let s=e.getRelatedEdges(i,"out").find(A=>A.target===a),o=!1;!s&&e.hasNode(a)&&(s=e.getRelatedEdges(a,"out").find(A=>A.target===i),o=!0),e.getNode(i).data.rank=(e.hasNode(a)&&e.getNode(a).data.rank||0)+(o?s==null?void 0:s.data.minlen:-(s==null?void 0:s.data.minlen))})},_ie=(r,e,t)=>r.getRelatedEdges(e,"both").find(n=>n.source===t||n.target===t),tP=(r,e)=>e.data.low<=r.data.lim&&r.data.lim<=e.data.lim,Eie=(r,e)=>{switch(e){case"network-simplex":Bie(r);break;case"tight-tree":nP(r);break;case"longest-path":Cie(r);break;default:nP(r)}},Cie=o6,nP=r=>{cie(r),hie(r)},Bie=r=>{gie(r)},xie=(r,e)=>{const{edgeLabelSpace:t,keepNodeOrder:n,prevGraph:i,rankdir:a,ranksep:s}=e;!n&&i&&Tie(r,i);const o=Oie(r);t&&(e.ranksep=Lie(o,{rankdir:a,ranksep:s}));let A;try{A=Sie(o,e)}catch(l){if(l.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,l);return}throw l}return Mie(r,o),A},Sie=(r,e)=>{const{ranker:t,rankdir:n="tb",nodeOrder:i,keepNodeOrder:a,align:s,nodesep:o=50,edgesep:A=20,ranksep:l=50}=e;Kie(r),ure(r);const{nestingRoot:c,nodeRankFactor:u}=Cre(r);Eie(ZH(r),t),Nie(r),vre(r,u),Sre(r,c),pre(r),Die(r),Rie(r);const h=[];Mre(r,h),Wre(r,h),yre(r),a&&Gre(r,i),Kre(r,a),Gie(r),wre(r,n),lie(r,{align:s,nodesep:o,edgesep:A,ranksep:l}),Vie(r),jie(r),kre(r,h),Hie(r),bre(r,n);const{width:g,height:p}=Qie(r);return Uie(r),zie(r),dre(r),{width:g,height:p}},Tie=(r,e)=>{r.getAllNodes().forEach(t=>{const n=r.getNode(t.id);if(e.hasNode(t.id)){const i=e.getNode(t.id);n.data.fixorder=i.data._order,delete i.data._order}else delete n.data.fixorder})},Mie=(r,e)=>{r.getAllNodes().forEach(t=>{var n;const i=r.getNode(t.id);if(i){const a=e.getNode(t.id);i.data.x=a.data.x,i.data.y=a.data.y,i.data._order=a.data.order,i.data._rank=a.data.rank,!((n=e.getChildren(t.id))===null||n===void 0)&&n.length&&(i.data.width=a.data.width,i.data.height=a.data.height)}}),r.getAllEdges().forEach(t=>{const n=r.getEdge(t.id),i=e.getEdge(t.id);n.data.points=i?i.data.points:[],i&&i.data.hasOwnProperty("x")&&(n.data.x=i.data.x,n.data.y=i.data.y)})},Fie=["width","height","layer","fixorder"],kie={width:0,height:0},Iie=["minlen","weight","width","height","labeloffset"],Pie={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},z1=["labelpos"],Oie=r=>{const e=new Sr({tree:[]});return r.getAllNodes().forEach(t=>{const n=iP(r.getNode(t.id).data),i=Object.assign(Object.assign({},kie),n),a=rP(i,Fie);e.hasNode(t.id)||e.addNode({id:t.id,data:Object.assign({},a)});const s=r.hasTreeStructure("combo")?r.getParent(t.id,"combo"):r.getParent(t.id);it(s)||(e.hasNode(s.id)||e.addNode(Object.assign({},s)),e.setParent(t.id,s.id))}),r.getAllEdges().forEach(t=>{const n=iP(r.getEdge(t.id).data),i={};z1==null||z1.forEach(a=>{n[a]!==void 0&&(i[a]=n[a])}),e.addEdge({id:t.id,source:t.source,target:t.target,data:Object.assign({},Pie,rP(n,Iie),i)})}),e},Lie=(r,e)=>{const{ranksep:t=0,rankdir:n}=e;return r.getAllNodes().forEach(i=>{isNaN(i.data.layer)||i.data.layer||(i.data.layer=0)}),r.getAllEdges().forEach(i=>{var a;i.data.minlen*=2,((a=i.data.labelpos)===null||a===void 0?void 0:a.toLowerCase())!=="c"&&(n==="TB"||n==="BT"?i.data.width+=i.data.labeloffset:i.data.height+=i.data.labeloffset)}),t/2},Nie=r=>{r.getAllEdges().forEach(e=>{if(e.data.width&&e.data.height){const t=r.getNode(e.source),n=r.getNode(e.target),i={e,rank:(n.data.rank-t.data.rank)/2+t.data.rank};$c(r,"edge-proxy",i,"_ep")}})},Die=r=>{let e=0;return r.getAllNodes().forEach(t=>{var n,i;t.data.borderTop&&(t.data.minRank=(n=r.getNode(t.data.borderTop))===null||n===void 0?void 0:n.data.rank,t.data.maxRank=(i=r.getNode(t.data.borderBottom))===null||i===void 0?void 0:i.data.rank,e=Math.max(e,t.data.maxRank||-1/0))}),e},Rie=r=>{r.getAllNodes().forEach(e=>{e.data.dummy==="edge-proxy"&&(r.getEdge(e.data.e.id).data.labelRank=e.data.rank,r.removeNode(e.id))})},Qie=(r,e)=>{let t,n=0,i,a=0;const{marginx:s=0,marginy:o=0}={},A=l=>{if(!l.data)return;const c=l.data.x,u=l.data.y,h=l.data.width,g=l.data.height;!isNaN(c)&&!isNaN(h)&&(t===void 0&&(t=c-h/2),t=Math.min(t,c-h/2),n=Math.max(n,c+h/2)),!isNaN(u)&&!isNaN(g)&&(i===void 0&&(i=u-g/2),i=Math.min(i,u-g/2),a=Math.max(a,u+g/2))};return r.getAllNodes().forEach(l=>{A(l)}),r.getAllEdges().forEach(l=>{l!=null&&l.data.hasOwnProperty("x")&&A(l)}),t-=s,i-=o,r.getAllNodes().forEach(l=>{l.data.x-=t,l.data.y-=i}),r.getAllEdges().forEach(l=>{var c;(c=l.data.points)===null||c===void 0||c.forEach(u=>{u.x-=t,u.y-=i}),l.data.hasOwnProperty("x")&&(l.data.x-=t),l.data.hasOwnProperty("y")&&(l.data.y-=i)}),{width:n-t+s,height:a-i+o}},Uie=r=>{r.getAllEdges().forEach(e=>{const t=r.getNode(e.source),n=r.getNode(e.target);let i,a;e.data.points?(i=e.data.points[0],a=e.data.points[e.data.points.length-1]):(e.data.points=[],i={x:n.data.x,y:n.data.y},a={x:t.data.x,y:t.data.y}),e.data.points.unshift(VI(t.data,i)),e.data.points.push(VI(n.data,a))})},Hie=r=>{r.getAllEdges().forEach(e=>{if(e.data.hasOwnProperty("x"))switch((e.data.labelpos==="l"||e.data.labelpos==="r")&&(e.data.width-=e.data.labeloffset),e.data.labelpos){case"l":e.data.x-=e.data.width/2+e.data.labeloffset;break;case"r":e.data.x+=e.data.width/2+e.data.labeloffset;break}})},zie=r=>{r.getAllEdges().forEach(e=>{var t;e.data.reversed&&((t=e.data.points)===null||t===void 0||t.reverse())})},jie=r=>{r.getAllNodes().forEach(e=>{var t,n,i;if(!((t=r.getChildren(e.id))===null||t===void 0)&&t.length){const a=r.getNode(e.id),s=r.getNode(a.data.borderTop),o=r.getNode(a.data.borderBottom),A=r.getNode(a.data.borderLeft[((n=a.data.borderLeft)===null||n===void 0?void 0:n.length)-1]),l=r.getNode(a.data.borderRight[((i=a.data.borderRight)===null||i===void 0?void 0:i.length)-1]);a.data.width=Math.abs((l==null?void 0:l.data.x)-(A==null?void 0:A.data.x))||10,a.data.height=Math.abs((o==null?void 0:o.data.y)-(s==null?void 0:s.data.y))||10,a.data.x=((A==null?void 0:A.data.x)||0)+a.data.width/2,a.data.y=((s==null?void 0:s.data.y)||0)+a.data.height/2}}),r.getAllNodes().forEach(e=>{e.data.dummy==="border"&&r.removeNode(e.id)})},Kie=r=>{r.getAllEdges().forEach(e=>{if(e.source===e.target){const t=r.getNode(e.source);t.data.selfEdges||(t.data.selfEdges=[]),t.data.selfEdges.push(e),r.removeEdge(e.id)}})},Gie=r=>{const e=Yd(r);e==null||e.forEach(t=>{let n=0;t==null||t.forEach((i,a)=>{var s;const o=r.getNode(i);o.data.order=a+n,(s=o.data.selfEdges)===null||s===void 0||s.forEach(A=>{$c(r,"selfedge",{width:A.data.width,height:A.data.height,rank:o.data.rank,order:a+ ++n,e:A},"_se")}),delete o.data.selfEdges})})},Vie=r=>{r.getAllNodes().forEach(e=>{const t=r.getNode(e.id);if(t.data.dummy==="selfedge"){const n=r.getNode(t.data.e.source),i=n.data.x+n.data.width/2,a=n.data.y,s=t.data.x-i,o=n.data.height/2;r.hasEdge(t.data.e.id)?r.updateEdgeData(t.data.e.id,t.data.e.data):r.addEdge({id:t.data.e.id,source:t.data.e.source,target:t.data.e.target,data:t.data.e.data}),r.removeNode(e.id),t.data.e.data.points=[{x:i+2*s/3,y:a-o},{x:i+5*s/6,y:a-o},{y:a,x:i+s},{x:i+5*s/6,y:a+o},{x:i+2*s/3,y:a+o}],t.data.e.data.x=t.data.x,t.data.e.data.y=t.data.y}})},rP=(r,e)=>{const t={};return e==null||e.forEach(n=>{r[n]!==void 0&&(t[n]=+r[n])}),t},iP=(r={})=>{const e={};return Object.keys(r).forEach(t=>{e[t.toLowerCase()]=r[t]}),e},Xs=Array.isArray,h6=r=>{const e=[],t=r.length;for(let n=0;n<t;n+=1){e[n]=[];for(let i=0;i<t;i+=1)n===i?e[n][i]=0:r[n][i]===0||!r[n][i]?e[n][i]=1/0:e[n][i]=r[n][i]}for(let n=0;n<t;n+=1)for(let i=0;i<t;i+=1)for(let a=0;a<t;a+=1)e[i][a]>e[i][n]+e[n][a]&&(e[i][a]=e[i][n]+e[n][a]);return e},f6=(r,e)=>{const{nodes:t,edges:n}=r,i=[],a={};if(!t)throw new Error("invalid nodes data!");return t&&t.forEach((s,o)=>{a[s.id]=o;const A=[];i.push(A)}),n==null||n.forEach(s=>{const{source:o,target:A}=s,l=a[o],c=a[A];l===void 0||c===void 0||(i[l][c]=1,i[c][l]=1)}),i},qie=(r,e)=>{const t=[];return r.forEach(n=>{const i=[];n.forEach(a=>{i.push(a*e)}),t.push(i)}),t},Wie=r=>{let e=1/0,t=1/0,n=-1/0,i=-1/0;return r.forEach(a=>{let s=a.data.size;Xs(s)?s.length===1&&(s=[s[0],s[0]]):je(s)?s=[s,s]:(s===void 0||isNaN(s))&&(s=[30,30]);const o=[s[0]/2,s[1]/2],A=a.data.x-o[0],l=a.data.x+o[0],c=a.data.y-o[1],u=a.data.y+o[1];e>A&&(e=A),t>c&&(t=c),n<l&&(n=l),i<u&&(i=u)}),{minX:e,minY:t,maxX:n,maxY:i}},aP=(r,e)=>Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)),Ix=(r,e,t,n="TB",i,a={})=>{if(!(e!=null&&e.length))return;const{stopBranchFn:s,stopAllFn:o}=a;for(let A=0;A<e.length;A++){const l=e[A];if(r.hasNode(l.id)&&!(s!=null&&s(l))){if(o!=null&&o(l))return;n==="TB"&&t(l),Ix(r,r.getChildren(l.id,i),t,n,i,a),n!=="TB"&&t(l)}}},Px=r=>{if(r===null)return r;if(r instanceof Date)return new Date(r.getTime());if(r instanceof Array){const e=[];return r.forEach(t=>{e.push(t)}),e.map(t=>Px(t))}if(typeof r=="object"){const e={};return Object.keys(r).forEach(t=>{e[t]=Px(r[t])}),e}return r},ia=(r,e)=>{const t=Px(r);return t.data=t.data||{},e&&(je(t.data.x)||(t.data.x=Math.random()*e[0]),je(t.data.y)||(t.data.y=Math.random()*e[1])),t};function yh(r){if(!r)return[0,0,0];if(je(r))return[r,r,r];if(r.length===0)return[0,0,0];const[e,t=e,n=e]=r;return[e,t,n]}function ol(r,e){let t;return $e(e)?t=e:je(e)?t=()=>e:t=()=>r,t}function W2(r,e,t=!0){return!e&&e!==0?n=>{const{size:i}=n.data||{};return i?Array.isArray(i)?t?Math.max(...i)||r:i:nr(i)&&i.width&&i.height?t?Math.max(i.width,i.height)||r:[i.width,i.height]:i:r}:$e(e)?e:je(e)?()=>e:Array.isArray(e)?()=>t?Math.max(...e)||r:e:nr(e)&&e.width&&e.height?()=>t?Math.max(e.width,e.height)||r:[e.width,e.height]:()=>r}const $2=(r,e,t=10)=>{let n;const i=typeof e=="function"?e:()=>e||0;return r?Array.isArray(r)?n=s=>r:$e(r)?n=r:n=s=>r:n=s=>{var o,A,l;if(!((o=s.data)===null||o===void 0)&&o.bboxSize)return(A=s.data)===null||A===void 0?void 0:A.bboxSize;if(!((l=s.data)===null||l===void 0)&&l.size){const c=s.data.size;return Array.isArray(c)?c:nr(c)?[c.width,c.height]:c}return t},s=>{const o=n(s),A=i(s);return Math.max(...yh(o))+A}},$ie={rankdir:"TB",nodesep:50,ranksep:50,edgeLabelSpace:!0,ranker:"tight-tree",controlPoints:!1,radial:!1,focusNode:null};class Yie{constructor(e={}){this.options=e,this.id="antv-dagre",this.options=Object.assign(Object.assign({},$ie),e)}execute(e,t){return St(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,e,t)})}assign(e,t){return St(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,e,t)})}genericDagreLayout(e,t,n){return St(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),n),{nodeSize:a,align:s,rankdir:o="TB",ranksep:A,nodesep:l,ranksepFunc:c,nodesepFunc:u,edgeLabelSpace:h,ranker:g,nodeOrder:p,begin:v,controlPoints:m,radial:w,sortByCombo:b,preset:_}=i,C=new Sr({tree:[]}),M=ol(A||50,c),F=ol(l||50,u);let k=F,P=M;(o==="LR"||o==="RL")&&(k=M,P=F);const N=W2(10,a,!1),D=t.getAllNodes(),Q=t.getAllEdges();D.forEach(W=>{const le=yh(N(W)),fe=P(W),X=k(W),ne=le[0]+2*X,Ie=le[1]+2*fe,te=W.data.layer;je(te)?C.addNode({id:W.id,data:{width:ne,height:Ie,layer:te}}):C.addNode({id:W.id,data:{width:ne,height:Ie}})}),b&&(C.attachTreeStructure("combo"),D.forEach(W=>{const{parentId:le}=W.data;le!==void 0&&C.hasNode(le)&&C.setParent(W.id,le,"combo")})),Q.forEach(W=>{C.addEdge({id:W.id,source:W.source,target:W.target,data:{weight:W.data.weight||1}})});let H;_!=null&&_.length&&(H=new Sr({nodes:_})),xie(C,{prevGraph:H,edgeLabelSpace:h,keepNodeOrder:!!p,nodeOrder:p||[],acyclicer:"greedy",ranker:g,rankdir:o,nodesep:l,align:s});const j=[0,0];if(v){let W=1/0,le=1/0;C.getAllNodes().forEach(fe=>{W>fe.data.x&&(W=fe.data.x),le>fe.data.y&&(le=fe.data.y)}),C.getAllEdges().forEach(fe=>{var X;(X=fe.data.points)===null||X===void 0||X.forEach(ne=>{W>ne.x&&(W=ne.x),le>ne.y&&(le=ne.y)})}),j[0]=v[0]-W,j[1]=v[1]-le}const q=o==="LR"||o==="RL";if(!w){const W=new Set,fe=o==="BT"||o==="RL"?(te,$)=>$-te:(te,$)=>te-$;C.getAllNodes().forEach(te=>{te.data.x=te.data.x+j[0],te.data.y=te.data.y+j[1],W.add(q?te.data.x:te.data.y)});const X=Array.from(W).sort(fe),ne=q?(te,$)=>te.x!==$.x:(te,$)=>te.y!==$.y,Ie=q?(te,$,ue)=>{const me=Math.max($.y,ue.y),Te=Math.min($.y,ue.y);return te.filter(He=>He.y<=me&&He.y>=Te)}:(te,$,ue)=>{const me=Math.max($.x,ue.x),Te=Math.min($.x,ue.x);return te.filter(He=>He.x<=me&&He.x>=Te)};C.getAllEdges().forEach((te,$)=>{var ue;h&&m&&te.data.type!=="loop"&&(te.data.controlPoints=Xie((ue=te.data.points)===null||ue===void 0?void 0:ue.map(({x:me,y:Te})=>({x:me+j[0],y:Te+j[1]})),C.getNode(te.source),C.getNode(te.target),X,q,ne,Ie))})}let J=[];J=C.getAllNodes().map(W=>ia(W));const ce=C.getAllEdges();return e&&(J.forEach(W=>{t.mergeNodeData(W.id,{x:W.data.x,y:W.data.y})}),ce.forEach(W=>{t.mergeEdgeData(W.id,{controlPoints:W.data.controlPoints})})),{nodes:J,edges:ce}})}}const Xie=(r,e,t,n,i,a,s)=>{let o=(r==null?void 0:r.slice(1,r.length-1))||[];if(e&&t){let{x:A,y:l}=e.data,{x:c,y:u}=t.data;if(i&&(A=e.data.y,l=e.data.x,c=t.data.y,u=t.data.x),u!==l&&A!==c){const h=n.indexOf(l),g=n[h+1];if(g){const m=o[0],w=i?{x:(l+g)/2,y:(m==null?void 0:m.y)||c}:{x:(m==null?void 0:m.x)||c,y:(l+g)/2};(!m||a(m,w))&&o.unshift(w)}const p=n.indexOf(u),v=Math.abs(p-h);if(v===1)o=s(o,e.data,t.data),o.length||o.push(i?{x:(l+u)/2,y:A}:{x:A,y:(l+u)/2});else if(v>1){const m=n[p-1];if(m){const w=o[o.length-1],b=i?{x:(u+m)/2,y:(w==null?void 0:w.y)||c}:{x:(w==null?void 0:w.x)||A,y:(u+m)/2};(!w||a(w,b))&&o.push(b)}}}}return o},Bl=(r,e,t)=>{const n=r.getAllNodes(),i=r.getAllEdges();if(!(n!=null&&n.length))return{nodes:[],edges:i};if(n.length===1)return e&&r.mergeNodeData(n[0].id,{x:t[0],y:t[1]}),{nodes:[Object.assign(Object.assign({},n[0]),{data:Object.assign(Object.assign({},n[0].data),{x:t[0],y:t[1]})})],edges:i}},Zie={radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1};class Jie{constructor(e={}){this.options=e,this.id="circular",this.options=Object.assign(Object.assign({},Zie),e)}execute(e,t){return St(this,void 0,void 0,function*(){return this.genericCircularLayout(!1,e,t)})}assign(e,t){return St(this,void 0,void 0,function*(){yield this.genericCircularLayout(!0,e,t)})}genericCircularLayout(e,t,n){return St(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),n),{width:a,height:s,center:o,divisions:A,startAngle:l=0,endAngle:c=2*Math.PI,angleRatio:u,ordering:h,clockwise:g,nodeSpacing:p,nodeSize:v}=i,m=t.getAllNodes(),w=t.getAllEdges(),[b,_,C]=tae(a,s,o),M=m==null?void 0:m.length;if(!M||M===1)return Bl(t,e,C);const F=(c-l)/M;let{radius:k,startRadius:P,endRadius:N}=i;if(p){const q=ol(10,p),J=W2(10,v);let ce=-1/0;m.forEach(W=>{const le=J(W);ce<le&&(ce=le)});let se=0;m.forEach((W,le)=>{le===0?se+=ce||10:se+=(q(W)||0)+(ce||10)}),k=se/(2*Math.PI)}else!k&&!P&&!N?k=Math.min(_,b)/2:!P&&N?P=N:P&&!N&&(N=P);const D=F*u;let Q=[];h==="topology"?Q=sP(t,m):h==="topology-directed"?Q=sP(t,m,!0):h==="degree"?Q=eae(t,m):Q=m.map(q=>ia(q));const H=Math.ceil(M/A);for(let q=0;q<M;++q){let J=k;!J&&P!==null&&N!==null&&(J=P+q*(N-P)/(M-1)),J||(J=10+q*100/(M-1));let ce=l+q%H*D+2*Math.PI/A*Math.floor(q/H);g||(ce=c-q%H*D-2*Math.PI/A*Math.floor(q/H)),Q[q].data.x=C[0]+Math.cos(ce)*J,Q[q].data.y=C[1]+Math.sin(ce)*J}return e&&Q.forEach(q=>{t.mergeNodeData(q.id,{x:q.data.x,y:q.data.y})}),{nodes:Q,edges:w}})}}const sP=(r,e,t=!1)=>{const n=[ia(e[0])],i={},a=e.length;i[e[0].id]=!0;let s=0;return e.forEach((o,A)=>{if(A!==0)if((A===a-1||r.getDegree(o.id,"both")!==r.getDegree(e[A+1].id,"both")||r.areNeighbors(n[s].id,o.id))&&!i[o.id])n.push(ia(o)),i[o.id]=!0,s++;else{const l=t?r.getSuccessors(n[s].id):r.getNeighbors(n[s].id);let c=!1;for(let h=0;h<l.length;h++){const g=l[h];if(r.getDegree(g.id)===r.getDegree(o.id)&&!i[g.id]){n.push(ia(g)),i[g.id]=!0,c=!0;break}}let u=0;for(;!c&&(i[e[u].id]||(n.push(ia(e[u])),i[e[u].id]=!0,c=!0),u++,u!==a););}}),n};function eae(r,e){const t=[];return e.forEach((n,i)=>{t.push(ia(n))}),t.sort((n,i)=>r.getDegree(n.id,"both")-r.getDegree(i.id,"both")),t}const tae=(r,e,t)=>{let n=r,i=e,a=t;return!n&&typeof window<"u"&&(n=window.innerWidth),!i&&typeof window<"u"&&(i=window.innerHeight),a||(a=[n/2,i/2]),[n,i,a]},nae={nodeSize:30,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"};class Ox{constructor(e={}){this.options=e,this.id="concentric",this.options=Object.assign(Object.assign({},nae),e)}execute(e,t){return St(this,void 0,void 0,function*(){return this.genericConcentricLayout(!1,e,t)})}assign(e,t){return St(this,void 0,void 0,function*(){yield this.genericConcentricLayout(!0,e,t)})}genericConcentricLayout(e,t,n){return St(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),n),{center:a,width:s,height:o,sortBy:A,maxLevelDiff:l,sweep:c,clockwise:u,equidistant:h,preventOverlap:g,startAngle:p=3/2*Math.PI,nodeSize:v,nodeSpacing:m}=i,w=t.getAllNodes(),b=t.getAllEdges(),_=!s&&typeof window<"u"?window.innerWidth:s,C=!o&&typeof window<"u"?window.innerHeight:o,M=a||[_/2,C/2];if(!(w!=null&&w.length)||w.length===1)return Bl(t,e,M);const F=[];let k,P=0;Xs(v)?k=Math.max(v[0],v[1]):$e(v)?(k=-1/0,w.forEach(W=>{const le=Math.max(...yh(v(W)));le>k&&(k=le)})):k=v,Xs(m)?P=Math.max(m[0],m[1]):je(m)&&(P=m),w.forEach(W=>{const le=ia(W);F.push(le);let fe=k;const{data:X}=le;Xs(X.size)?fe=Math.max(X.size[0],X.size[1]):je(X.size)?fe=X.size:nr(X.size)&&(fe=Math.max(X.size.width,X.size.height)),k=Math.max(k,fe),$e(m)&&(P=Math.max(m(W),P))});const N={};F.forEach((W,le)=>{N[W.id]=le});let D=A;(!Rt(D)||F[0].data[D]===void 0)&&(D="degree"),D==="degree"?F.sort((W,le)=>t.getDegree(le.id,"both")-t.getDegree(W.id,"both")):F.sort((W,le)=>le.data[D]-W.data[D]);const Q=F[0],H=(l||(D==="degree"?t.getDegree(Q.id,"both"):Q.data[D]))/4,j=[{nodes:[]}];let q=j[0];F.forEach(W=>{if(q.nodes.length>0){const le=Math.abs(D==="degree"?t.getDegree(q.nodes[0].id,"both")-t.getDegree(W.id,"both"):q.nodes[0].data[D]-W.data[D]);H&&le>=H&&(q={nodes:[]},j.push(q))}q.nodes.push(W)});let J=k+P;if(!g){const W=j.length>0&&j[0].nodes.length>1,fe=(Math.min(_,C)/2-J)/(j.length+(W?1:0));J=Math.min(J,fe)}let ce=0;if(j.forEach(W=>{const le=c===void 0?2*Math.PI-2*Math.PI/W.nodes.length:c;if(W.dTheta=le/Math.max(1,W.nodes.length-1),W.nodes.length>1&&g){const fe=Math.cos(W.dTheta)-Math.cos(0),X=Math.sin(W.dTheta)-Math.sin(0),ne=Math.sqrt(J*J/(fe*fe+X*X));ce=Math.max(ne,ce)}W.r=ce,ce+=J}),h){let W=0,le=0;for(let fe=0;fe<j.length;fe++){const ne=(j[fe].r||0)-le;W=Math.max(W,ne)}le=0,j.forEach((fe,X)=>{X===0&&(le=fe.r||0),fe.r=le,le+=W})}return j.forEach(W=>{const le=W.dTheta||0,fe=W.r||0;W.nodes.forEach((X,ne)=>{const Ie=p+(u?1:-1)*le*ne;X.data.x=M[0]+fe*Math.cos(Ie),X.data.y=M[1]+fe*Math.sin(Ie)})}),e&&F.forEach(W=>t.mergeNodeData(W.id,{x:W.data.x,y:W.data.y})),{nodes:F,edges:b}})}}function rae(r){const e=+this._x.call(null,r),t=+this._y.call(null,r);return g6(this.cover(e,t),e,t,r)}function g6(r,e,t,n){if(isNaN(e)||isNaN(t))return r;var i,a=r._root,s={data:n},o=r._x0,A=r._y0,l=r._x1,c=r._y1,u,h,g,p,v,m,w,b;if(!a)return r._root=s,r;for(;a.length;)if((v=e>=(u=(o+l)/2))?o=u:l=u,(m=t>=(h=(A+c)/2))?A=h:c=h,i=a,!(a=a[w=m<<1|v]))return i[w]=s,r;if(g=+r._x.call(null,a.data),p=+r._y.call(null,a.data),e===g&&t===p)return s.next=a,i?i[w]=s:r._root=s,r;do i=i?i[w]=new Array(4):r._root=new Array(4),(v=e>=(u=(o+l)/2))?o=u:l=u,(m=t>=(h=(A+c)/2))?A=h:c=h;while((w=m<<1|v)===(b=(p>=h)<<1|g>=u));return i[b]=a,i[w]=s,r}function iae(r){var e,t,n=r.length,i,a,s=new Array(n),o=new Array(n),A=1/0,l=1/0,c=-1/0,u=-1/0;for(t=0;t<n;++t)isNaN(i=+this._x.call(null,e=r[t]))||isNaN(a=+this._y.call(null,e))||(s[t]=i,o[t]=a,i<A&&(A=i),i>c&&(c=i),a<l&&(l=a),a>u&&(u=a));if(A>c||l>u)return this;for(this.cover(A,l).cover(c,u),t=0;t<n;++t)g6(this,s[t],o[t],r[t]);return this}function aae(r,e){if(isNaN(r=+r)||isNaN(e=+e))return this;var t=this._x0,n=this._y0,i=this._x1,a=this._y1;if(isNaN(t))i=(t=Math.floor(r))+1,a=(n=Math.floor(e))+1;else{for(var s=i-t||1,o=this._root,A,l;t>r||r>=i||n>e||e>=a;)switch(l=(e<n)<<1|r<t,A=new Array(4),A[l]=o,o=A,s*=2,l){case 0:i=t+s,a=n+s;break;case 1:t=i-s,a=n+s;break;case 2:i=t+s,n=a-s;break;case 3:t=i-s,n=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=t,this._y0=n,this._x1=i,this._y1=a,this}function sae(){var r=[];return this.visit(function(e){if(!e.length)do r.push(e.data);while(e=e.next)}),r}function oae(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function bi(r,e,t,n,i){this.node=r,this.x0=e,this.y0=t,this.x1=n,this.y1=i}function Aae(r,e,t){var n,i=this._x0,a=this._y0,s,o,A,l,c=this._x1,u=this._y1,h=[],g=this._root,p,v;for(g&&h.push(new bi(g,i,a,c,u)),t==null?t=1/0:(i=r-t,a=e-t,c=r+t,u=e+t,t*=t);p=h.pop();)if(!(!(g=p.node)||(s=p.x0)>c||(o=p.y0)>u||(A=p.x1)<i||(l=p.y1)<a))if(g.length){var m=(s+A)/2,w=(o+l)/2;h.push(new bi(g[3],m,w,A,l),new bi(g[2],s,w,m,l),new bi(g[1],m,o,A,w),new bi(g[0],s,o,m,w)),(v=(e>=w)<<1|r>=m)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-v],h[h.length-1-v]=p)}else{var b=r-+this._x.call(null,g.data),_=e-+this._y.call(null,g.data),C=b*b+_*_;if(C<t){var M=Math.sqrt(t=C);i=r-M,a=e-M,c=r+M,u=e+M,n=g.data}}return n}function lae(r){if(isNaN(c=+this._x.call(null,r))||isNaN(u=+this._y.call(null,r)))return this;var e,t=this._root,n,i,a,s=this._x0,o=this._y0,A=this._x1,l=this._y1,c,u,h,g,p,v,m,w;if(!t)return this;if(t.length)for(;;){if((p=c>=(h=(s+A)/2))?s=h:A=h,(v=u>=(g=(o+l)/2))?o=g:l=g,e=t,!(t=t[m=v<<1|p]))return this;if(!t.length)break;(e[m+1&3]||e[m+2&3]||e[m+3&3])&&(n=e,w=m)}for(;t.data!==r;)if(i=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,i?(a?i.next=a:delete i.next,this):e?(a?e[m]=a:delete e[m],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(n?n[w]=t:this._root=t),this):(this._root=a,this)}function cae(r){for(var e=0,t=r.length;e<t;++e)this.remove(r[e]);return this}function uae(){return this._root}function dae(){var r=0;return this.visit(function(e){if(!e.length)do++r;while(e=e.next)}),r}function hae(r){var e=[],t,n=this._root,i,a,s,o,A;for(n&&e.push(new bi(n,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!r(n=t.node,a=t.x0,s=t.y0,o=t.x1,A=t.y1)&&n.length){var l=(a+o)/2,c=(s+A)/2;(i=n[3])&&e.push(new bi(i,l,c,o,A)),(i=n[2])&&e.push(new bi(i,a,c,l,A)),(i=n[1])&&e.push(new bi(i,l,s,o,c)),(i=n[0])&&e.push(new bi(i,a,s,l,c))}return this}function fae(r){var e=[],t=[],n;for(this._root&&e.push(new bi(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var a,s=n.x0,o=n.y0,A=n.x1,l=n.y1,c=(s+A)/2,u=(o+l)/2;(a=i[0])&&e.push(new bi(a,s,o,c,u)),(a=i[1])&&e.push(new bi(a,c,o,A,u)),(a=i[2])&&e.push(new bi(a,s,u,c,l)),(a=i[3])&&e.push(new bi(a,c,u,A,l))}t.push(n)}for(;n=t.pop();)r(n.node,n.x0,n.y0,n.x1,n.y1);return this}function gae(r){return r[0]}function pae(r){return arguments.length?(this._x=r,this):this._x}function vae(r){return r[1]}function mae(r){return arguments.length?(this._y=r,this):this._y}function rm(r,e,t){var n=new Y2(e??gae,t??vae,NaN,NaN,NaN,NaN);return r==null?n:n.addAll(r)}function Y2(r,e,t,n,i,a){this._x=r,this._y=e,this._x0=t,this._y0=n,this._x1=i,this._y1=a,this._root=void 0}function oP(r){for(var e={data:r.data},t=e;r=r.next;)t=t.next={data:r.data};return e}var Ci=rm.prototype=Y2.prototype;Ci.copy=function(){var r=new Y2(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,n;if(!e)return r;if(!e.length)return r._root=oP(e),r;for(t=[{source:e,target:r._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(n=e.source[i])&&(n.length?t.push({source:n,target:e.target[i]=new Array(4)}):e.target[i]=oP(n));return r};Ci.add=rae;Ci.addAll=iae;Ci.cover=aae;Ci.data=sae;Ci.extent=oae;Ci.find=Aae;Ci.remove=lae;Ci.removeAll=cae;Ci.root=uae;Ci.size=dae;Ci.visit=hae;Ci.visitAfter=fae;Ci.x=pae;Ci.y=mae;function yae(r){const e=+this._x.call(null,r),t=+this._y.call(null,r),n=+this._z.call(null,r);return p6(this.cover(e,t,n),e,t,n,r)}function p6(r,e,t,n,i){if(isNaN(e)||isNaN(t)||isNaN(n))return r;var a,s=r._root,o={data:i},A=r._x0,l=r._y0,c=r._z0,u=r._x1,h=r._y1,g=r._z1,p,v,m,w,b,_,C,M,F,k,P;if(!s)return r._root=o,r;for(;s.length;)if((C=e>=(p=(A+u)/2))?A=p:u=p,(M=t>=(v=(l+h)/2))?l=v:h=v,(F=n>=(m=(c+g)/2))?c=m:g=m,a=s,!(s=s[k=F<<2|M<<1|C]))return a[k]=o,r;if(w=+r._x.call(null,s.data),b=+r._y.call(null,s.data),_=+r._z.call(null,s.data),e===w&&t===b&&n===_)return o.next=s,a?a[k]=o:r._root=o,r;do a=a?a[k]=new Array(8):r._root=new Array(8),(C=e>=(p=(A+u)/2))?A=p:u=p,(M=t>=(v=(l+h)/2))?l=v:h=v,(F=n>=(m=(c+g)/2))?c=m:g=m;while((k=F<<2|M<<1|C)===(P=(_>=m)<<2|(b>=v)<<1|w>=p));return a[P]=s,a[k]=o,r}function wae(r){Array.isArray(r)||(r=Array.from(r));const e=r.length,t=new Float64Array(e),n=new Float64Array(e),i=new Float64Array(e);let a=1/0,s=1/0,o=1/0,A=-1/0,l=-1/0,c=-1/0;for(let u=0,h,g,p,v;u<e;++u)isNaN(g=+this._x.call(null,h=r[u]))||isNaN(p=+this._y.call(null,h))||isNaN(v=+this._z.call(null,h))||(t[u]=g,n[u]=p,i[u]=v,g<a&&(a=g),g>A&&(A=g),p<s&&(s=p),p>l&&(l=p),v<o&&(o=v),v>c&&(c=v));if(a>A||s>l||o>c)return this;this.cover(a,s,o).cover(A,l,c);for(let u=0;u<e;++u)p6(this,t[u],n[u],i[u],r[u]);return this}function bae(r,e,t){if(isNaN(r=+r)||isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,a=this._z0,s=this._x1,o=this._y1,A=this._z1;if(isNaN(n))s=(n=Math.floor(r))+1,o=(i=Math.floor(e))+1,A=(a=Math.floor(t))+1;else{for(var l=s-n||1,c=this._root,u,h;n>r||r>=s||i>e||e>=o||a>t||t>=A;)switch(h=(t<a)<<2|(e<i)<<1|r<n,u=new Array(8),u[h]=c,c=u,l*=2,h){case 0:s=n+l,o=i+l,A=a+l;break;case 1:n=s-l,o=i+l,A=a+l;break;case 2:s=n+l,i=o-l,A=a+l;break;case 3:n=s-l,i=o-l,A=a+l;break;case 4:s=n+l,o=i+l,a=A-l;break;case 5:n=s-l,o=i+l,a=A-l;break;case 6:s=n+l,i=o-l,a=A-l;break;case 7:n=s-l,i=o-l,a=A-l;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._z0=a,this._x1=s,this._y1=o,this._z1=A,this}function _ae(){var r=[];return this.visit(function(e){if(!e.length)do r.push(e.data);while(e=e.next)}),r}function Eae(r){return arguments.length?this.cover(+r[0][0],+r[0][1],+r[0][2]).cover(+r[1][0],+r[1][1],+r[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function dn(r,e,t,n,i,a,s){this.node=r,this.x0=e,this.y0=t,this.z0=n,this.x1=i,this.y1=a,this.z1=s}function Cae(r,e,t,n){var i,a=this._x0,s=this._y0,o=this._z0,A,l,c,u,h,g,p=this._x1,v=this._y1,m=this._z1,w=[],b=this._root,_,C;for(b&&w.push(new dn(b,a,s,o,p,v,m)),n==null?n=1/0:(a=r-n,s=e-n,o=t-n,p=r+n,v=e+n,m=t+n,n*=n);_=w.pop();)if(!(!(b=_.node)||(A=_.x0)>p||(l=_.y0)>v||(c=_.z0)>m||(u=_.x1)<a||(h=_.y1)<s||(g=_.z1)<o))if(b.length){var M=(A+u)/2,F=(l+h)/2,k=(c+g)/2;w.push(new dn(b[7],M,F,k,u,h,g),new dn(b[6],A,F,k,M,h,g),new dn(b[5],M,l,k,u,F,g),new dn(b[4],A,l,k,M,F,g),new dn(b[3],M,F,c,u,h,k),new dn(b[2],A,F,c,M,h,k),new dn(b[1],M,l,c,u,F,k),new dn(b[0],A,l,c,M,F,k)),(C=(t>=k)<<2|(e>=F)<<1|r>=M)&&(_=w[w.length-1],w[w.length-1]=w[w.length-1-C],w[w.length-1-C]=_)}else{var P=r-+this._x.call(null,b.data),N=e-+this._y.call(null,b.data),D=t-+this._z.call(null,b.data),Q=P*P+N*N+D*D;if(Q<n){var H=Math.sqrt(n=Q);a=r-H,s=e-H,o=t-H,p=r+H,v=e+H,m=t+H,i=b.data}}return i}const Bae=(r,e,t,n,i,a)=>Math.sqrt((r-n)**2+(e-i)**2+(t-a)**2);function xae(r,e,t,n){const i=[],a=r-n,s=e-n,o=t-n,A=r+n,l=e+n,c=t+n;return this.visit((u,h,g,p,v,m,w)=>{if(!u.length)do{const b=u.data;Bae(r,e,t,this._x(b),this._y(b),this._z(b))<=n&&i.push(b)}while(u=u.next);return h>A||g>l||p>c||v<a||m<s||w<o}),i}function Sae(r){if(isNaN(h=+this._x.call(null,r))||isNaN(g=+this._y.call(null,r))||isNaN(p=+this._z.call(null,r)))return this;var e,t=this._root,n,i,a,s=this._x0,o=this._y0,A=this._z0,l=this._x1,c=this._y1,u=this._z1,h,g,p,v,m,w,b,_,C,M,F;if(!t)return this;if(t.length)for(;;){if((b=h>=(v=(s+l)/2))?s=v:l=v,(_=g>=(m=(o+c)/2))?o=m:c=m,(C=p>=(w=(A+u)/2))?A=w:u=w,e=t,!(t=t[M=C<<2|_<<1|b]))return this;if(!t.length)break;(e[M+1&7]||e[M+2&7]||e[M+3&7]||e[M+4&7]||e[M+5&7]||e[M+6&7]||e[M+7&7])&&(n=e,F=M)}for(;t.data!==r;)if(i=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,i?(a?i.next=a:delete i.next,this):e?(a?e[M]=a:delete e[M],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(n?n[F]=t:this._root=t),this):(this._root=a,this)}function Tae(r){for(var e=0,t=r.length;e<t;++e)this.remove(r[e]);return this}function Mae(){return this._root}function Fae(){var r=0;return this.visit(function(e){if(!e.length)do++r;while(e=e.next)}),r}function kae(r){var e=[],t,n=this._root,i,a,s,o,A,l,c;for(n&&e.push(new dn(n,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!r(n=t.node,a=t.x0,s=t.y0,o=t.z0,A=t.x1,l=t.y1,c=t.z1)&&n.length){var u=(a+A)/2,h=(s+l)/2,g=(o+c)/2;(i=n[7])&&e.push(new dn(i,u,h,g,A,l,c)),(i=n[6])&&e.push(new dn(i,a,h,g,u,l,c)),(i=n[5])&&e.push(new dn(i,u,s,g,A,h,c)),(i=n[4])&&e.push(new dn(i,a,s,g,u,h,c)),(i=n[3])&&e.push(new dn(i,u,h,o,A,l,g)),(i=n[2])&&e.push(new dn(i,a,h,o,u,l,g)),(i=n[1])&&e.push(new dn(i,u,s,o,A,h,g)),(i=n[0])&&e.push(new dn(i,a,s,o,u,h,g))}return this}function Iae(r){var e=[],t=[],n;for(this._root&&e.push(new dn(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();){var i=n.node;if(i.length){var a,s=n.x0,o=n.y0,A=n.z0,l=n.x1,c=n.y1,u=n.z1,h=(s+l)/2,g=(o+c)/2,p=(A+u)/2;(a=i[0])&&e.push(new dn(a,s,o,A,h,g,p)),(a=i[1])&&e.push(new dn(a,h,o,A,l,g,p)),(a=i[2])&&e.push(new dn(a,s,g,A,h,c,p)),(a=i[3])&&e.push(new dn(a,h,g,A,l,c,p)),(a=i[4])&&e.push(new dn(a,s,o,p,h,g,u)),(a=i[5])&&e.push(new dn(a,h,o,p,l,g,u)),(a=i[6])&&e.push(new dn(a,s,g,p,h,c,u)),(a=i[7])&&e.push(new dn(a,h,g,p,l,c,u))}t.push(n)}for(;n=t.pop();)r(n.node,n.x0,n.y0,n.z0,n.x1,n.y1,n.z1);return this}function Pae(r){return r[0]}function Oae(r){return arguments.length?(this._x=r,this):this._x}function Lae(r){return r[1]}function Nae(r){return arguments.length?(this._y=r,this):this._y}function Dae(r){return r[2]}function Rae(r){return arguments.length?(this._z=r,this):this._z}function v6(r,e,t,n){var i=new X2(e??Pae,t??Lae,n??Dae,NaN,NaN,NaN,NaN,NaN,NaN);return r==null?i:i.addAll(r)}function X2(r,e,t,n,i,a,s,o,A){this._x=r,this._y=e,this._z=t,this._x0=n,this._y0=i,this._z0=a,this._x1=s,this._y1=o,this._z1=A,this._root=void 0}function AP(r){for(var e={data:r.data},t=e;r=r.next;)t=t.next={data:r.data};return e}var Yr=v6.prototype=X2.prototype;Yr.copy=function(){var r=new X2(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,t,n;if(!e)return r;if(!e.length)return r._root=AP(e),r;for(t=[{source:e,target:r._root=new Array(8)}];e=t.pop();)for(var i=0;i<8;++i)(n=e.source[i])&&(n.length?t.push({source:n,target:e.target[i]=new Array(8)}):e.target[i]=AP(n));return r};Yr.add=yae;Yr.addAll=wae;Yr.cover=bae;Yr.data=_ae;Yr.extent=Eae;Yr.find=Cae;Yr.findAllWithinRadius=xae;Yr.remove=Sae;Yr.removeAll=Tae;Yr.root=Mae;Yr.size=Fae;Yr.visit=kae;Yr.visitAfter=Iae;Yr.x=Oae;Yr.y=Nae;Yr.z=Rae;const Qae=.81,j1=.1;function Uae(r,e,t,n,i=2){const a=e/t,s=r.getAllNodes(),o=s.map((c,u)=>{const{nodeStrength:h,x:g,y:p,z:v,size:m}=c.data;return{x:g,y:p,z:v,size:m,index:u,id:c.id,vx:0,vy:0,vz:0,weight:a*h}}),A=(i===2?rm(o,c=>c.x,c=>c.y):v6(o,c=>c.x,c=>c.y,c=>c.z)).visitAfter(Hae),l=new Map;return o.forEach(c=>{l.set(c.id,c),jae(c,A,i)}),o.map((c,u)=>{const{id:h,data:g}=s[u],{mass:p=1}=g;n[h]={x:c.vx/p,y:c.vy/p,z:c.vz/p}}),n}function Hae(r){let e=0,t=0,n=0,i=0,a=0;const s=r.length;if(s){for(let o=0;o<s;o++){const A=r[o];A&&A.weight&&(e+=A.weight,t+=A.x*A.weight,n+=A.y*A.weight,i+=A.z*A.weight,a+=A.size*A.weight)}r.x=t/e,r.y=n/e,r.z=i/e,r.size=a/e,r.weight=e}else{const o=r;r.x=o.data.x,r.y=o.data.y,r.z=o.data.z,r.size=o.data.size,r.weight=o.data.weight}}const zae=(r,e,t,n,i,a,s)=>{var o;if(((o=r.data)===null||o===void 0?void 0:o.id)===a.id)return;const A=[t,n,i][s-1],l=a.x-r.x||j1,c=a.y-r.y||j1,u=a.z-r.z||j1,h=[l,c,u],g=A-e;let p=0;for(let w=0;w<s;w++)p+=h[w]*h[w];const m=Math.sqrt(p)*p;if(g*g*Qae<p){const w=r.weight/m;return a.vx+=l*w,a.vy+=c*w,a.vz+=u*w,!0}if(r.length)return!1;if(r.data!==a){const w=r.data.weight/m;a.vx+=l*w,a.vy+=c*w,a.vz+=u*w}};function jae(r,e,t){e.visit((n,i,a,s,o)=>zae(n,i,a,s,o,r,t))}const Kae={dimensions:2,maxIteration:500,gravity:10,factor:1,edgeStrength:50,nodeStrength:1e3,coulombDisScale:.005,damping:.9,maxSpeed:200,minMovement:.4,interval:.02,linkDistance:200,clusterNodeStrength:20,preventOverlap:!0,distanceThresholdMode:"mean"};class m6{constructor(e={}){this.options=e,this.id="force",this.timeInterval=0,this.judgingDistance=0,this.running=!1,this.options=Object.assign(Object.assign({},Kae),e)}execute(e,t){return St(this,void 0,void 0,function*(){return this.genericForceLayout(!1,e,t)})}assign(e,t){return St(this,void 0,void 0,function*(){yield this.genericForceLayout(!0,e,t)})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval),this.running=!1}tick(e=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let n=0;(this.judgingDistance>this.lastOptions.minMovement||n<1)&&n<e;n++)this.runOneStep(this.lastCalcGraph,this.lastGraph,n,this.lastVelMap,this.lastOptions),this.updatePosition(this.lastGraph,this.lastCalcGraph,this.lastVelMap,this.lastOptions);const t={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&t.nodes.forEach(n=>this.lastGraph.mergeNodeData(n.id,{x:n.data.x,y:n.data.y,z:this.options.dimensions===3?n.data.z:void 0})),t}genericForceLayout(e,t,n){return St(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),n),a=t.getAllNodes(),s=t.getAllEdges(),o=this.formatOptions(i,t),{dimensions:A,width:l,height:c,nodeSize:u,getMass:h,nodeStrength:g,edgeStrength:p,linkDistance:v}=o,m=a.map((P,N)=>Object.assign(Object.assign({},P),{data:Object.assign(Object.assign({},P.data),{x:je(P.data.x)?P.data.x:Math.random()*l,y:je(P.data.y)?P.data.y:Math.random()*c,z:je(P.data.z)?P.data.z:Math.random()*Math.sqrt(l*c),size:u(P)||30,mass:h(P),nodeStrength:g(P)})})),w=s.map(P=>Object.assign(Object.assign({},P),{data:Object.assign(Object.assign({},P.data),{edgeStrength:p(P),linkDistance:v(P,t.getNode(P.source),t.getNode(P.target))})}));if(!(a!=null&&a.length))return this.lastResult={nodes:[],edges:s},{nodes:[],edges:s};const b={};a.forEach((P,N)=>{b[P.id]={x:0,y:0,z:0}});const _=new Sr({nodes:m,edges:w});this.formatCentripetal(o,_);const{maxIteration:C,minMovement:M,onTick:F}=o;if(this.lastLayoutNodes=m,this.lastLayoutEdges=w,this.lastAssign=e,this.lastGraph=t,this.lastCalcGraph=_,this.lastOptions=o,this.lastVelMap=b,typeof window>"u")return;let k=0;return new Promise(P=>{this.timeInterval=window.setInterval(()=>{(!a||!this.running)&&P({nodes:K1(t,m),edges:s}),this.runOneStep(_,t,k,b,o),this.updatePosition(t,_,b,o),e&&m.forEach(N=>t.mergeNodeData(N.id,{x:N.data.x,y:N.data.y,z:A===3?N.data.z:void 0})),F==null||F({nodes:K1(t,m),edges:s}),k++,(k>=C||this.judgingDistance<M)&&(window.clearInterval(this.timeInterval),P({nodes:K1(t,m),edges:s}))},0),this.running=!0})})}formatOptions(e,t){const n=Object.assign({},e),{width:i,height:a,getMass:s}=e;n.width=!i&&typeof window<"u"?window.innerWidth:i,n.height=!a&&typeof window<"u"?window.innerHeight:a,e.center||(n.center=[n.width/2,n.height/2]),s||(n.getMass=A=>{let l=1;je(A==null?void 0:A.data.mass)&&(l=A==null?void 0:A.data.mass);const c=t.getDegree(A.id,"both");return!c||c<5?l:c*5*l}),n.nodeSize=$2(e.nodeSize,e.nodeSpacing);const o=e.linkDistance?ol(1,e.linkDistance):A=>1+n.nodeSize(t.getNode(A.source))+n.nodeSize(t.getNode(A.target));return n.linkDistance=o,n.nodeStrength=ol(1,e.nodeStrength),n.edgeStrength=ol(1,e.edgeStrength),n}formatCentripetal(e,t){const{dimensions:n,centripetalOptions:i,center:a,clusterNodeStrength:s,leafCluster:o,clustering:A,nodeClusterBy:l}=e,c=t.getAllNodes(),u=i||{leaf:2,single:2,others:1,center:w=>({x:a[0],y:a[1],z:n===3?a[2]:void 0})};typeof s!="function"&&(e.clusterNodeStrength=w=>s);let h,g;if(o&&l&&(h=lP(t,l),g=Array.from(new Set(c==null?void 0:c.map(w=>w.data[l])))||[],e.centripetalOptions=Object.assign(u,{single:100,leaf:w=>{const{siblingLeaves:b,sameTypeLeaves:_}=h[w.id]||{};return(_==null?void 0:_.length)===(b==null?void 0:b.length)||(g==null?void 0:g.length)===1?1:e.clusterNodeStrength(w)},others:1,center:w=>{const b=t.getDegree(w.id,"both");if(!b)return{x:100,y:100,z:0};let _;if(b===1){const{sameTypeLeaves:C=[]}=h[w.id]||{};C.length===1?_=void 0:C.length>1&&(_=cP(C))}else _=void 0;return{x:_==null?void 0:_.x,y:_==null?void 0:_.y,z:_==null?void 0:_.z}}})),A&&l){h||(h=lP(t,l)),g||(g=Array.from(new Set(c.map(b=>b.data[l])))),g=g.filter(b=>b!==void 0);const w={};g.forEach(b=>{const _=c.filter(C=>C.data[l]===b).map(C=>t.getNode(C.id));w[b]=cP(_)}),e.centripetalOptions=Object.assign(u,{single:b=>e.clusterNodeStrength(b),leaf:b=>e.clusterNodeStrength(b),others:b=>e.clusterNodeStrength(b),center:b=>{const _=w[b.data[l]];return{x:_==null?void 0:_.x,y:_==null?void 0:_.y,z:_==null?void 0:_.z}}})}const{leaf:p,single:v,others:m}=e.centripetalOptions||{};p&&typeof p!="function"&&(e.centripetalOptions.leaf=()=>p),v&&typeof v!="function"&&(e.centripetalOptions.single=()=>v),m&&typeof m!="function"&&(e.centripetalOptions.others=()=>m)}runOneStep(e,t,n,i,a){const s={},o=e.getAllNodes(),A=e.getAllEdges();if(!(o!=null&&o.length))return;const{monitor:l}=a;if(this.calRepulsive(e,s,a),A&&this.calAttractive(e,s,a),this.calGravity(e,t,s,a),this.updateVelocity(e,s,i,a),l){const c=this.calTotalEnergy(s,o);l({energy:c,nodes:t.getAllNodes(),edges:t.getAllEdges(),iterations:n})}}calTotalEnergy(e,t){if(!(t!=null&&t.length))return 0;let n=0;return t.forEach((i,a)=>{const s=e[i.id].x,o=e[i.id].y,A=this.options.dimensions===3?e[i.id].z:0,l=s*s+o*o+A*A,{mass:c=1}=i.data;n+=c*l*.5}),n}calRepulsive(e,t,n){const{dimensions:i,factor:a,coulombDisScale:s}=n;Uae(e,a,s*s,t,i)}calAttractive(e,t,n){const{dimensions:i,nodeSize:a}=n;e.getAllEdges().forEach((s,o)=>{const{source:A,target:l}=s,c=e.getNode(A),u=e.getNode(l);if(!c||!u)return;let h=u.data.x-c.data.x,g=u.data.y-c.data.y,p=i===3?u.data.z-c.data.z:0;!h&&!g&&(h=Math.random()*.01,g=Math.random()*.01,i===3&&!p&&(p=Math.random()*.01));const v=Math.sqrt(h*h+g*g+p*p);if(v<a(c)+a(u))return;const m=h/v,w=g/v,b=p/v,{linkDistance:_=200,edgeStrength:C=200}=s.data||{},F=(_-v)*C,k=c.data.mass||1,P=u.data.mass||1,N=1/k,D=1/P,Q=m*F,H=w*F,j=b*F;t[A].x-=Q*N,t[A].y-=H*N,t[A].z-=j*N,t[l].x+=Q*D,t[l].y+=H*D,t[l].z+=j*D})}calGravity(e,t,n,i){const{getCenter:a}=i,s=e.getAllNodes(),o=t.getAllNodes(),A=t.getAllEdges(),{width:l,height:c,center:u,gravity:h,centripetalOptions:g}=i;s&&s.forEach(p=>{const{id:v,data:m}=p,{mass:w,x:b,y:_,z:C}=m,M=t.getNode(v);let F=0,k=0,P=0,N=h;const D=e.getDegree(v,"in"),Q=e.getDegree(v,"out"),H=e.getDegree(v,"both"),j=a==null?void 0:a(M,H);if(j){const[q,J,ce]=j;F=b-q,k=_-J,N=ce}else F=b-u[0],k=_-u[1],P=C-u[2];if(N&&(n[v].x-=N*F/w,n[v].y-=N*k/w,n[v].z-=N*P/w),g){const{leaf:q,single:J,others:ce,center:se}=g,{x:W,y:le,z:fe,centerStrength:X}=(se==null?void 0:se(M,o,A,l,c))||{x:0,y:0,z:0,centerStrength:0};if(!je(W)||!je(le))return;const ne=(b-W)/w,Ie=(_-le)/w,te=(C-fe)/w;if(X&&(n[v].x-=X*ne,n[v].y-=X*Ie,n[v].z-=X*te),H===0){const ue=J(M);if(!ue)return;n[v].x-=ue*ne,n[v].y-=ue*Ie,n[v].z-=ue*te;return}if(D===0||Q===0){const ue=q(M,o,A);if(!ue)return;n[v].x-=ue*ne,n[v].y-=ue*Ie,n[v].z-=ue*te;return}const $=ce(M);if(!$)return;n[v].x-=$*ne,n[v].y-=$*Ie,n[v].z-=$*te}})}updateVelocity(e,t,n,i){const{damping:a,maxSpeed:s,interval:o,dimensions:A}=i,l=e.getAllNodes();l!=null&&l.length&&l.forEach(c=>{const{id:u}=c;let h=(n[u].x+t[u].x*o)*a||.01,g=(n[u].y+t[u].y*o)*a||.01,p=A===3?(n[u].z+t[u].z*o)*a||.01:0;const v=Math.sqrt(h*h+g*g+p*p);if(v>s){const m=s/v;h=m*h,g=m*g,p=m*p}n[u]={x:h,y:g,z:p}})}updatePosition(e,t,n,i){const{distanceThresholdMode:a,interval:s,dimensions:o}=i,A=t.getAllNodes();if(!(A!=null&&A.length)){this.judgingDistance=0;return}let l=0;a==="max"?this.judgingDistance=-1/0:a==="min"&&(this.judgingDistance=1/0),A.forEach(c=>{const{id:u}=c,h=e.getNode(u);if(je(h.data.fx)&&je(h.data.fy)){t.mergeNodeData(u,{x:h.data.fx,y:h.data.fy,z:o===3?h.data.fz:void 0});return}const g=n[u].x*s,p=n[u].y*s,v=o===3?n[u].z*s:0;t.mergeNodeData(u,{x:c.data.x+g,y:c.data.y+p,z:c.data.z+v});const m=Math.sqrt(g*g+p*p+v*v);switch(a){case"max":this.judgingDistance<m&&(this.judgingDistance=m);break;case"min":this.judgingDistance>m&&(this.judgingDistance=m);break;default:l=l+m;break}}),(!a||a==="mean")&&(this.judgingDistance=l/A.length)}}const lP=(r,e)=>{const t=r.getAllNodes();if(!(t!=null&&t.length))return{};const n={};return t.forEach((i,a)=>{r.getDegree(i.id,"both")===1&&(n[i.id]=Gae(r,"leaf",i,e))}),n},Gae=(r,e,t,n)=>{const i=r.getDegree(t.id,"in"),a=r.getDegree(t.id,"out");let s=t,o=[];i===0?(s=r.getSuccessors(t.id)[0],o=r.getNeighbors(s.id)):a===0&&(s=r.getPredecessors(t.id)[0],o=r.getNeighbors(s.id)),o=o.filter(l=>r.getDegree(l.id,"in")===0||r.getDegree(l.id,"out")===0);const A=Vae(r,e,n,t,o);return{coreNode:s,siblingLeaves:o,sameTypeLeaves:A}},Vae=(r,e,t,n,i)=>{const a=n.data[t]||"";let s=(i==null?void 0:i.filter(o=>o.data[t]===a))||[];return s=s.filter(o=>r.getDegree(o.id,"in")===0||r.getDegree(o.id,"out")===0),s},cP=r=>{const e={x:0,y:0};r.forEach(n=>{const{x:i,y:a}=n.data;e.x+=i||0,e.y+=a||0});const t=r.length||1;return{x:e.x/t,y:e.y/t}},K1=(r,e)=>e.map(t=>{const{id:n,data:i}=t,a=r.getNode(n);return Object.assign(Object.assign({},a),{data:Object.assign(Object.assign({},a.data),{x:i.x,y:i.y,z:i.z})})});var It={};const qae=Object.prototype.toString;function Xd(r){const e=qae.call(r);return e.endsWith("Array]")&&!e.includes("Big")}const Wae=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray:Xd},Symbol.toStringTag,{value:"Module"})),$ae=uQ(Wae);function Yae(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Xd(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,n=t===void 0?0:t,i=e.toIndex,a=i===void 0?r.length:i;if(n<0||n>=r.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>r.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=r[n],o=n+1;o<a;o++)r[o]>s&&(s=r[o]);return s}function Xae(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Xd(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,n=t===void 0?0:t,i=e.toIndex,a=i===void 0?r.length:i;if(n<0||n>=r.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>r.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=r[n],o=n+1;o<a;o++)r[o]<s&&(s=r[o]);return s}function Zae(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Xd(r)){if(r.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var t;if(e.output!==void 0){if(!Xd(e.output))throw new TypeError("output option must be an array if specified");t=e.output}else t=new Array(r.length);var n=Xae(r),i=Yae(r);if(n===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=e.min,s=a===void 0?e.autoMinMax?n:0:a,o=e.max,A=o===void 0?e.autoMinMax?i:1:o;if(s>=A)throw new RangeError("min option must be smaller than max option");for(var l=(A-s)/(i-n),c=0;c<r.length;c++)t[c]=(r[c]-n)*l+s;return t}const Jae=Object.freeze(Object.defineProperty({__proto__:null,default:Zae},Symbol.toStringTag,{value:"Module"})),ese=uQ(Jae);var uP;function tse(){var la,Lx,mr;if(uP)return It;uP=1,Object.defineProperty(It,"__esModule",{value:!0});var r=$ae,e=ese;const t=" ".repeat(2),n=" ".repeat(4);function i(){return a(this)}function a(R,T={}){const{maxRows:x=15,maxColumns:E=10,maxNumSize:S=8,padMinus:O="auto"}=T;return`${R.constructor.name} {
${t}[
${n}${s(R,x,E,S,O)}
${t}]
${t}rows: ${R.rows}
${t}columns: ${R.columns}
}`}function s(R,T,x,E,S){const{rows:O,columns:z}=R,K=Math.min(O,T),G=Math.min(z,x),V=[];if(S==="auto"){S=!1;e:for(let de=0;de<K;de++)for(let ee=0;ee<G;ee++)if(R.get(de,ee)<0){S=!0;break e}}for(let de=0;de<K;de++){let ee=[];for(let be=0;be<G;be++)ee.push(o(R.get(de,be),E,S));V.push(`${ee.join(" ")}`)}return G!==z&&(V[V.length-1]+=` ... ${z-x} more columns`),K!==O&&V.push(`... ${O-T} more rows`),V.join(`
${n}`)}function o(R,T,x){return(R>=0&&x?` ${A(R,T-1)}`:A(R,T)).padEnd(T)}function A(R,T){let x=R.toString();if(x.length<=T)return x;let E=R.toFixed(T);if(E.length>T&&(E=R.toFixed(Math.max(0,T-(E.length-T)))),E.length<=T&&!E.startsWith("0.000")&&!E.startsWith("-0.000"))return E;let S=R.toExponential(T);return S.length>T&&(S=R.toExponential(Math.max(0,T-(S.length-T)))),S.slice(0)}function l(R,T){R.prototype.add=function(E){return typeof E=="number"?this.addS(E):this.addM(E)},R.prototype.addS=function(E){for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)+E);return this},R.prototype.addM=function(E){if(E=T.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)+E.get(S,O));return this},R.add=function(E,S){return new T(E).add(S)},R.prototype.sub=function(E){return typeof E=="number"?this.subS(E):this.subM(E)},R.prototype.subS=function(E){for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)-E);return this},R.prototype.subM=function(E){if(E=T.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)-E.get(S,O));return this},R.sub=function(E,S){return new T(E).sub(S)},R.prototype.subtract=R.prototype.sub,R.prototype.subtractS=R.prototype.subS,R.prototype.subtractM=R.prototype.subM,R.subtract=R.sub,R.prototype.mul=function(E){return typeof E=="number"?this.mulS(E):this.mulM(E)},R.prototype.mulS=function(E){for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)*E);return this},R.prototype.mulM=function(E){if(E=T.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)*E.get(S,O));return this},R.mul=function(E,S){return new T(E).mul(S)},R.prototype.multiply=R.prototype.mul,R.prototype.multiplyS=R.prototype.mulS,R.prototype.multiplyM=R.prototype.mulM,R.multiply=R.mul,R.prototype.div=function(E){return typeof E=="number"?this.divS(E):this.divM(E)},R.prototype.divS=function(E){for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)/E);return this},R.prototype.divM=function(E){if(E=T.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)/E.get(S,O));return this},R.div=function(E,S){return new T(E).div(S)},R.prototype.divide=R.prototype.div,R.prototype.divideS=R.prototype.divS,R.prototype.divideM=R.prototype.divM,R.divide=R.div,R.prototype.mod=function(E){return typeof E=="number"?this.modS(E):this.modM(E)},R.prototype.modS=function(E){for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)%E);return this},R.prototype.modM=function(E){if(E=T.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)%E.get(S,O));return this},R.mod=function(E,S){return new T(E).mod(S)},R.prototype.modulus=R.prototype.mod,R.prototype.modulusS=R.prototype.modS,R.prototype.modulusM=R.prototype.modM,R.modulus=R.mod,R.prototype.and=function(E){return typeof E=="number"?this.andS(E):this.andM(E)},R.prototype.andS=function(E){for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)&E);return this},R.prototype.andM=function(E){if(E=T.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)&E.get(S,O));return this},R.and=function(E,S){return new T(E).and(S)},R.prototype.or=function(E){return typeof E=="number"?this.orS(E):this.orM(E)},R.prototype.orS=function(E){for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)|E);return this},R.prototype.orM=function(E){if(E=T.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)|E.get(S,O));return this},R.or=function(E,S){return new T(E).or(S)},R.prototype.xor=function(E){return typeof E=="number"?this.xorS(E):this.xorM(E)},R.prototype.xorS=function(E){for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)^E);return this},R.prototype.xorM=function(E){if(E=T.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)^E.get(S,O));return this},R.xor=function(E,S){return new T(E).xor(S)},R.prototype.leftShift=function(E){return typeof E=="number"?this.leftShiftS(E):this.leftShiftM(E)},R.prototype.leftShiftS=function(E){for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)<<E);return this},R.prototype.leftShiftM=function(E){if(E=T.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)<<E.get(S,O));return this},R.leftShift=function(E,S){return new T(E).leftShift(S)},R.prototype.signPropagatingRightShift=function(E){return typeof E=="number"?this.signPropagatingRightShiftS(E):this.signPropagatingRightShiftM(E)},R.prototype.signPropagatingRightShiftS=function(E){for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)>>E);return this},R.prototype.signPropagatingRightShiftM=function(E){if(E=T.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)>>E.get(S,O));return this},R.signPropagatingRightShift=function(E,S){return new T(E).signPropagatingRightShift(S)},R.prototype.rightShift=function(E){return typeof E=="number"?this.rightShiftS(E):this.rightShiftM(E)},R.prototype.rightShiftS=function(E){for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)>>>E);return this},R.prototype.rightShiftM=function(E){if(E=T.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)>>>E.get(S,O));return this},R.rightShift=function(E,S){return new T(E).rightShift(S)},R.prototype.zeroFillRightShift=R.prototype.rightShift,R.prototype.zeroFillRightShiftS=R.prototype.rightShiftS,R.prototype.zeroFillRightShiftM=R.prototype.rightShiftM,R.zeroFillRightShift=R.rightShift,R.prototype.not=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,~this.get(E,S));return this},R.not=function(E){return new T(E).not()},R.prototype.abs=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.abs(this.get(E,S)));return this},R.abs=function(E){return new T(E).abs()},R.prototype.acos=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.acos(this.get(E,S)));return this},R.acos=function(E){return new T(E).acos()},R.prototype.acosh=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.acosh(this.get(E,S)));return this},R.acosh=function(E){return new T(E).acosh()},R.prototype.asin=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.asin(this.get(E,S)));return this},R.asin=function(E){return new T(E).asin()},R.prototype.asinh=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.asinh(this.get(E,S)));return this},R.asinh=function(E){return new T(E).asinh()},R.prototype.atan=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.atan(this.get(E,S)));return this},R.atan=function(E){return new T(E).atan()},R.prototype.atanh=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.atanh(this.get(E,S)));return this},R.atanh=function(E){return new T(E).atanh()},R.prototype.cbrt=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.cbrt(this.get(E,S)));return this},R.cbrt=function(E){return new T(E).cbrt()},R.prototype.ceil=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.ceil(this.get(E,S)));return this},R.ceil=function(E){return new T(E).ceil()},R.prototype.clz32=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.clz32(this.get(E,S)));return this},R.clz32=function(E){return new T(E).clz32()},R.prototype.cos=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.cos(this.get(E,S)));return this},R.cos=function(E){return new T(E).cos()},R.prototype.cosh=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.cosh(this.get(E,S)));return this},R.cosh=function(E){return new T(E).cosh()},R.prototype.exp=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.exp(this.get(E,S)));return this},R.exp=function(E){return new T(E).exp()},R.prototype.expm1=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.expm1(this.get(E,S)));return this},R.expm1=function(E){return new T(E).expm1()},R.prototype.floor=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.floor(this.get(E,S)));return this},R.floor=function(E){return new T(E).floor()},R.prototype.fround=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.fround(this.get(E,S)));return this},R.fround=function(E){return new T(E).fround()},R.prototype.log=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.log(this.get(E,S)));return this},R.log=function(E){return new T(E).log()},R.prototype.log1p=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.log1p(this.get(E,S)));return this},R.log1p=function(E){return new T(E).log1p()},R.prototype.log10=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.log10(this.get(E,S)));return this},R.log10=function(E){return new T(E).log10()},R.prototype.log2=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.log2(this.get(E,S)));return this},R.log2=function(E){return new T(E).log2()},R.prototype.round=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.round(this.get(E,S)));return this},R.round=function(E){return new T(E).round()},R.prototype.sign=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.sign(this.get(E,S)));return this},R.sign=function(E){return new T(E).sign()},R.prototype.sin=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.sin(this.get(E,S)));return this},R.sin=function(E){return new T(E).sin()},R.prototype.sinh=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.sinh(this.get(E,S)));return this},R.sinh=function(E){return new T(E).sinh()},R.prototype.sqrt=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.sqrt(this.get(E,S)));return this},R.sqrt=function(E){return new T(E).sqrt()},R.prototype.tan=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.tan(this.get(E,S)));return this},R.tan=function(E){return new T(E).tan()},R.prototype.tanh=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.tanh(this.get(E,S)));return this},R.tanh=function(E){return new T(E).tanh()},R.prototype.trunc=function(){for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.set(E,S,Math.trunc(this.get(E,S)));return this},R.trunc=function(E){return new T(E).trunc()},R.pow=function(E,S){return new T(E).pow(S)},R.prototype.pow=function(E){return typeof E=="number"?this.powS(E):this.powM(E)},R.prototype.powS=function(E){for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)**E);return this},R.prototype.powM=function(E){if(E=T.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw new RangeError("Matrices dimensions must be equal");for(let S=0;S<this.rows;S++)for(let O=0;O<this.columns;O++)this.set(S,O,this.get(S,O)**E.get(S,O));return this}}function c(R,T,x){let E=x?R.rows:R.rows-1;if(T<0||T>E)throw new RangeError("Row index out of range")}function u(R,T,x){let E=x?R.columns:R.columns-1;if(T<0||T>E)throw new RangeError("Column index out of range")}function h(R,T){if(T.to1DArray&&(T=T.to1DArray()),T.length!==R.columns)throw new RangeError("vector size must be the same as the number of columns");return T}function g(R,T){if(T.to1DArray&&(T=T.to1DArray()),T.length!==R.rows)throw new RangeError("vector size must be the same as the number of rows");return T}function p(R,T){if(!r.isAnyArray(T))throw new TypeError("row indices must be an array");for(let x=0;x<T.length;x++)if(T[x]<0||T[x]>=R.rows)throw new RangeError("row indices are out of range")}function v(R,T){if(!r.isAnyArray(T))throw new TypeError("column indices must be an array");for(let x=0;x<T.length;x++)if(T[x]<0||T[x]>=R.columns)throw new RangeError("column indices are out of range")}function m(R,T,x,E,S){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(b("startRow",T),b("endRow",x),b("startColumn",E),b("endColumn",S),T>x||E>S||T<0||T>=R.rows||x<0||x>=R.rows||E<0||E>=R.columns||S<0||S>=R.columns)throw new RangeError("Submatrix indices are out of range")}function w(R,T=0){let x=[];for(let E=0;E<R;E++)x.push(T);return x}function b(R,T){if(typeof T!="number")throw new TypeError(`${R} must be a number`)}function _(R){if(R.isEmpty())throw new Error("Empty matrix has no elements to index")}function C(R){let T=w(R.rows);for(let x=0;x<R.rows;++x)for(let E=0;E<R.columns;++E)T[x]+=R.get(x,E);return T}function M(R){let T=w(R.columns);for(let x=0;x<R.rows;++x)for(let E=0;E<R.columns;++E)T[E]+=R.get(x,E);return T}function F(R){let T=0;for(let x=0;x<R.rows;x++)for(let E=0;E<R.columns;E++)T+=R.get(x,E);return T}function k(R){let T=w(R.rows,1);for(let x=0;x<R.rows;++x)for(let E=0;E<R.columns;++E)T[x]*=R.get(x,E);return T}function P(R){let T=w(R.columns,1);for(let x=0;x<R.rows;++x)for(let E=0;E<R.columns;++E)T[E]*=R.get(x,E);return T}function N(R){let T=1;for(let x=0;x<R.rows;x++)for(let E=0;E<R.columns;E++)T*=R.get(x,E);return T}function D(R,T,x){const E=R.rows,S=R.columns,O=[];for(let z=0;z<E;z++){let K=0,G=0,V=0;for(let de=0;de<S;de++)V=R.get(z,de)-x[z],K+=V,G+=V*V;T?O.push((G-K*K/S)/(S-1)):O.push((G-K*K/S)/S)}return O}function Q(R,T,x){const E=R.rows,S=R.columns,O=[];for(let z=0;z<S;z++){let K=0,G=0,V=0;for(let de=0;de<E;de++)V=R.get(de,z)-x[z],K+=V,G+=V*V;T?O.push((G-K*K/E)/(E-1)):O.push((G-K*K/E)/E)}return O}function H(R,T,x){const E=R.rows,S=R.columns,O=E*S;let z=0,K=0,G=0;for(let V=0;V<E;V++)for(let de=0;de<S;de++)G=R.get(V,de)-x,z+=G,K+=G*G;return T?(K-z*z/O)/(O-1):(K-z*z/O)/O}function j(R,T){for(let x=0;x<R.rows;x++)for(let E=0;E<R.columns;E++)R.set(x,E,R.get(x,E)-T[x])}function q(R,T){for(let x=0;x<R.rows;x++)for(let E=0;E<R.columns;E++)R.set(x,E,R.get(x,E)-T[E])}function J(R,T){for(let x=0;x<R.rows;x++)for(let E=0;E<R.columns;E++)R.set(x,E,R.get(x,E)-T)}function ce(R){const T=[];for(let x=0;x<R.rows;x++){let E=0;for(let S=0;S<R.columns;S++)E+=R.get(x,S)**2/(R.columns-1);T.push(Math.sqrt(E))}return T}function se(R,T){for(let x=0;x<R.rows;x++)for(let E=0;E<R.columns;E++)R.set(x,E,R.get(x,E)/T[x])}function W(R){const T=[];for(let x=0;x<R.columns;x++){let E=0;for(let S=0;S<R.rows;S++)E+=R.get(S,x)**2/(R.rows-1);T.push(Math.sqrt(E))}return T}function le(R,T){for(let x=0;x<R.rows;x++)for(let E=0;E<R.columns;E++)R.set(x,E,R.get(x,E)/T[E])}function fe(R){const T=R.size-1;let x=0;for(let E=0;E<R.columns;E++)for(let S=0;S<R.rows;S++)x+=R.get(S,E)**2/T;return Math.sqrt(x)}function X(R,T){for(let x=0;x<R.rows;x++)for(let E=0;E<R.columns;E++)R.set(x,E,R.get(x,E)/T)}class ne{static from1DArray(T,x,E){if(T*x!==E.length)throw new RangeError("data length does not match given dimensions");let O=new $(T,x);for(let z=0;z<T;z++)for(let K=0;K<x;K++)O.set(z,K,E[z*x+K]);return O}static rowVector(T){let x=new $(1,T.length);for(let E=0;E<T.length;E++)x.set(0,E,T[E]);return x}static columnVector(T){let x=new $(T.length,1);for(let E=0;E<T.length;E++)x.set(E,0,T[E]);return x}static zeros(T,x){return new $(T,x)}static ones(T,x){return new $(T,x).fill(1)}static rand(T,x,E={}){if(typeof E!="object")throw new TypeError("options must be an object");const{random:S=Math.random}=E;let O=new $(T,x);for(let z=0;z<T;z++)for(let K=0;K<x;K++)O.set(z,K,S());return O}static randInt(T,x,E={}){if(typeof E!="object")throw new TypeError("options must be an object");const{min:S=0,max:O=1e3,random:z=Math.random}=E;if(!Number.isInteger(S))throw new TypeError("min must be an integer");if(!Number.isInteger(O))throw new TypeError("max must be an integer");if(S>=O)throw new RangeError("min must be smaller than max");let K=O-S,G=new $(T,x);for(let V=0;V<T;V++)for(let de=0;de<x;de++){let ee=S+Math.round(z()*K);G.set(V,de,ee)}return G}static eye(T,x,E){x===void 0&&(x=T),E===void 0&&(E=1);let S=Math.min(T,x),O=this.zeros(T,x);for(let z=0;z<S;z++)O.set(z,z,E);return O}static diag(T,x,E){let S=T.length;x===void 0&&(x=S),E===void 0&&(E=x);let O=Math.min(S,x,E),z=this.zeros(x,E);for(let K=0;K<O;K++)z.set(K,K,T[K]);return z}static min(T,x){T=this.checkMatrix(T),x=this.checkMatrix(x);let E=T.rows,S=T.columns,O=new $(E,S);for(let z=0;z<E;z++)for(let K=0;K<S;K++)O.set(z,K,Math.min(T.get(z,K),x.get(z,K)));return O}static max(T,x){T=this.checkMatrix(T),x=this.checkMatrix(x);let E=T.rows,S=T.columns,O=new this(E,S);for(let z=0;z<E;z++)for(let K=0;K<S;K++)O.set(z,K,Math.max(T.get(z,K),x.get(z,K)));return O}static checkMatrix(T){return ne.isMatrix(T)?T:new $(T)}static isMatrix(T){return T!=null&&T.klass==="Matrix"}get size(){return this.rows*this.columns}apply(T){if(typeof T!="function")throw new TypeError("callback must be a function");for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)T.call(this,x,E);return this}to1DArray(){let T=[];for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)T.push(this.get(x,E));return T}to2DArray(){let T=[];for(let x=0;x<this.rows;x++){T.push([]);for(let E=0;E<this.columns;E++)T[x].push(this.get(x,E))}return T}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let T=0;T<this.rows;T++)for(let x=0;x<=T;x++)if(this.get(T,x)!==this.get(x,T))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let T=0;T<this.rows;T++)if(this.get(T,T)!==0)return!1;return!0}isEchelonForm(){let T=0,x=0,E=-1,S=!0,O=!1;for(;T<this.rows&&S;){for(x=0,O=!1;x<this.columns&&O===!1;)this.get(T,x)===0?x++:this.get(T,x)===1&&x>E?(O=!0,E=x):(S=!1,O=!0);T++}return S}isReducedEchelonForm(){let T=0,x=0,E=-1,S=!0,O=!1;for(;T<this.rows&&S;){for(x=0,O=!1;x<this.columns&&O===!1;)this.get(T,x)===0?x++:this.get(T,x)===1&&x>E?(O=!0,E=x):(S=!1,O=!0);for(let z=x+1;z<this.rows;z++)this.get(T,z)!==0&&(S=!1);T++}return S}echelonForm(){let T=this.clone(),x=0,E=0;for(;x<T.rows&&E<T.columns;){let S=x;for(let O=x;O<T.rows;O++)T.get(O,E)>T.get(S,E)&&(S=O);if(T.get(S,E)===0)E++;else{T.swapRows(x,S);let O=T.get(x,E);for(let z=E;z<T.columns;z++)T.set(x,z,T.get(x,z)/O);for(let z=x+1;z<T.rows;z++){let K=T.get(z,E)/T.get(x,E);T.set(z,E,0);for(let G=E+1;G<T.columns;G++)T.set(z,G,T.get(z,G)-T.get(x,G)*K)}x++,E++}}return T}reducedEchelonForm(){let T=this.echelonForm(),x=T.columns,E=T.rows,S=E-1;for(;S>=0;)if(T.maxRow(S)===0)S--;else{let O=0,z=!1;for(;O<E&&z===!1;)T.get(S,O)===1?z=!0:O++;for(let K=0;K<S;K++){let G=T.get(K,O);for(let V=O;V<x;V++){let de=T.get(K,V)-G*T.get(S,V);T.set(K,V,de)}}S--}return T}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(T={}){if(typeof T!="object")throw new TypeError("options must be an object");const{rows:x=1,columns:E=1}=T;if(!Number.isInteger(x)||x<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(E)||E<=0)throw new TypeError("columns must be a positive integer");let S=new $(this.rows*x,this.columns*E);for(let O=0;O<x;O++)for(let z=0;z<E;z++)S.setSubMatrix(this,this.rows*O,this.columns*z);return S}fill(T){for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,T);return this}neg(){return this.mulS(-1)}getRow(T){c(this,T);let x=[];for(let E=0;E<this.columns;E++)x.push(this.get(T,E));return x}getRowVector(T){return $.rowVector(this.getRow(T))}setRow(T,x){c(this,T),x=h(this,x);for(let E=0;E<this.columns;E++)this.set(T,E,x[E]);return this}swapRows(T,x){c(this,T),c(this,x);for(let E=0;E<this.columns;E++){let S=this.get(T,E);this.set(T,E,this.get(x,E)),this.set(x,E,S)}return this}getColumn(T){u(this,T);let x=[];for(let E=0;E<this.rows;E++)x.push(this.get(E,T));return x}getColumnVector(T){return $.columnVector(this.getColumn(T))}setColumn(T,x){u(this,T),x=g(this,x);for(let E=0;E<this.rows;E++)this.set(E,T,x[E]);return this}swapColumns(T,x){u(this,T),u(this,x);for(let E=0;E<this.rows;E++){let S=this.get(E,T);this.set(E,T,this.get(E,x)),this.set(E,x,S)}return this}addRowVector(T){T=h(this,T);for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)+T[E]);return this}subRowVector(T){T=h(this,T);for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)-T[E]);return this}mulRowVector(T){T=h(this,T);for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)*T[E]);return this}divRowVector(T){T=h(this,T);for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)/T[E]);return this}addColumnVector(T){T=g(this,T);for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)+T[x]);return this}subColumnVector(T){T=g(this,T);for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)-T[x]);return this}mulColumnVector(T){T=g(this,T);for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)*T[x]);return this}divColumnVector(T){T=g(this,T);for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)this.set(x,E,this.get(x,E)/T[x]);return this}mulRow(T,x){c(this,T);for(let E=0;E<this.columns;E++)this.set(T,E,this.get(T,E)*x);return this}mulColumn(T,x){u(this,T);for(let E=0;E<this.rows;E++)this.set(E,T,this.get(E,T)*x);return this}max(T){if(this.isEmpty())return NaN;switch(T){case"row":{const x=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.get(E,S)>x[E]&&(x[E]=this.get(E,S));return x}case"column":{const x=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.get(E,S)>x[S]&&(x[S]=this.get(E,S));return x}case void 0:{let x=this.get(0,0);for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.get(E,S)>x&&(x=this.get(E,S));return x}default:throw new Error(`invalid option: ${T}`)}}maxIndex(){_(this);let T=this.get(0,0),x=[0,0];for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.get(E,S)>T&&(T=this.get(E,S),x[0]=E,x[1]=S);return x}min(T){if(this.isEmpty())return NaN;switch(T){case"row":{const x=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.get(E,S)<x[E]&&(x[E]=this.get(E,S));return x}case"column":{const x=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.get(E,S)<x[S]&&(x[S]=this.get(E,S));return x}case void 0:{let x=this.get(0,0);for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.get(E,S)<x&&(x=this.get(E,S));return x}default:throw new Error(`invalid option: ${T}`)}}minIndex(){_(this);let T=this.get(0,0),x=[0,0];for(let E=0;E<this.rows;E++)for(let S=0;S<this.columns;S++)this.get(E,S)<T&&(T=this.get(E,S),x[0]=E,x[1]=S);return x}maxRow(T){if(c(this,T),this.isEmpty())return NaN;let x=this.get(T,0);for(let E=1;E<this.columns;E++)this.get(T,E)>x&&(x=this.get(T,E));return x}maxRowIndex(T){c(this,T),_(this);let x=this.get(T,0),E=[T,0];for(let S=1;S<this.columns;S++)this.get(T,S)>x&&(x=this.get(T,S),E[1]=S);return E}minRow(T){if(c(this,T),this.isEmpty())return NaN;let x=this.get(T,0);for(let E=1;E<this.columns;E++)this.get(T,E)<x&&(x=this.get(T,E));return x}minRowIndex(T){c(this,T),_(this);let x=this.get(T,0),E=[T,0];for(let S=1;S<this.columns;S++)this.get(T,S)<x&&(x=this.get(T,S),E[1]=S);return E}maxColumn(T){if(u(this,T),this.isEmpty())return NaN;let x=this.get(0,T);for(let E=1;E<this.rows;E++)this.get(E,T)>x&&(x=this.get(E,T));return x}maxColumnIndex(T){u(this,T),_(this);let x=this.get(0,T),E=[0,T];for(let S=1;S<this.rows;S++)this.get(S,T)>x&&(x=this.get(S,T),E[0]=S);return E}minColumn(T){if(u(this,T),this.isEmpty())return NaN;let x=this.get(0,T);for(let E=1;E<this.rows;E++)this.get(E,T)<x&&(x=this.get(E,T));return x}minColumnIndex(T){u(this,T),_(this);let x=this.get(0,T),E=[0,T];for(let S=1;S<this.rows;S++)this.get(S,T)<x&&(x=this.get(S,T),E[0]=S);return E}diag(){let T=Math.min(this.rows,this.columns),x=[];for(let E=0;E<T;E++)x.push(this.get(E,E));return x}norm(T="frobenius"){switch(T){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${T}`)}}cumulativeSum(){let T=0;for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)T+=this.get(x,E),this.set(x,E,T);return this}dot(T){ne.isMatrix(T)&&(T=T.to1DArray());let x=this.to1DArray();if(x.length!==T.length)throw new RangeError("vectors do not have the same size");let E=0;for(let S=0;S<x.length;S++)E+=x[S]*T[S];return E}mmul(T){T=$.checkMatrix(T);let x=this.rows,E=this.columns,S=T.columns,O=new $(x,S),z=new Float64Array(E);for(let K=0;K<S;K++){for(let G=0;G<E;G++)z[G]=T.get(G,K);for(let G=0;G<x;G++){let V=0;for(let de=0;de<E;de++)V+=this.get(G,de)*z[de];O.set(G,K,V)}}return O}mpow(T){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(T)||T<0)throw new RangeError("Exponent must be a non-negative integer");let x=$.eye(this.rows),E=this;for(let S=T;S>=1;S/=2)(S&1)!==0&&(x=x.mmul(E)),E=E.mmul(E);return x}strassen2x2(T){T=$.checkMatrix(T);let x=new $(2,2);const E=this.get(0,0),S=T.get(0,0),O=this.get(0,1),z=T.get(0,1),K=this.get(1,0),G=T.get(1,0),V=this.get(1,1),de=T.get(1,1),ee=(E+V)*(S+de),be=(K+V)*S,Re=E*(z-de),ve=V*(G-S),Ce=(E+O)*de,Ge=(K-E)*(S+z),re=(O-V)*(G+de),Ne=ee+ve-Ce+re,qe=Re+Ce,ct=be+ve,ht=ee-be+Re+Ge;return x.set(0,0,Ne),x.set(0,1,qe),x.set(1,0,ct),x.set(1,1,ht),x}strassen3x3(T){T=$.checkMatrix(T);let x=new $(3,3);const E=this.get(0,0),S=this.get(0,1),O=this.get(0,2),z=this.get(1,0),K=this.get(1,1),G=this.get(1,2),V=this.get(2,0),de=this.get(2,1),ee=this.get(2,2),be=T.get(0,0),Re=T.get(0,1),ve=T.get(0,2),Ce=T.get(1,0),Ge=T.get(1,1),re=T.get(1,2),Ne=T.get(2,0),qe=T.get(2,1),ct=T.get(2,2),ht=(E+S+O-z-K-de-ee)*Ge,fn=(E-z)*(-Re+Ge),st=K*(-be+Re+Ce-Ge-re-Ne+ct),Ve=(-E+z+K)*(be-Re+Ge),Zt=(z+K)*(-be+Re),oe=E*be,Me=(-E+V+de)*(be-ve+re),ze=(-E+V)*(ve-re),Oe=(V+de)*(-be+ve),cn=(E+S+O-K-G-V-de)*re,Ut=de*(-be+ve+Ce-Ge-re-Ne+qe),Nt=(-O+de+ee)*(Ge+Ne-qe),gn=(O-ee)*(Ge-qe),Jt=O*Ne,Vi=(de+ee)*(-Ne+qe),Wn=(-O+K+G)*(re+Ne-ct),ca=(O-G)*(re-ct),Bi=(K+G)*(-Ne+ct),Tt=S*Ce,Pn=G*qe,Tr=z*ve,hi=V*Re,$n=ee*ct,au=oe+Jt+Tt,xh=ht+Ve+Zt+oe+Nt+Jt+Vi,su=oe+Me+Oe+cn+Jt+Wn+Bi,EA=fn+st+Ve+oe+Jt+Wn+ca,n0=fn+Ve+Zt+oe+Pn,ou=Jt+Wn+ca+Bi+Tr,Vt=oe+Me+ze+Ut+Nt+gn+Jt,Sh=Nt+gn+Jt+Vi+hi,Th=oe+Me+ze+Oe+$n;return x.set(0,0,au),x.set(0,1,xh),x.set(0,2,su),x.set(1,0,EA),x.set(1,1,n0),x.set(1,2,ou),x.set(2,0,Vt),x.set(2,1,Sh),x.set(2,2,Th),x}mmulStrassen(T){T=$.checkMatrix(T);let x=this.clone(),E=x.rows,S=x.columns,O=T.rows,z=T.columns;S!==O&&console.warn(`Multiplying ${E} x ${S} and ${O} x ${z} matrix: dimensions do not match.`);function K(ee,be,Re){let ve=ee.rows,Ce=ee.columns;if(ve===be&&Ce===Re)return ee;{let Ge=ne.zeros(be,Re);return Ge=Ge.setSubMatrix(ee,0,0),Ge}}let G=Math.max(E,O),V=Math.max(S,z);x=K(x,G,V),T=K(T,G,V);function de(ee,be,Re,ve){if(Re<=512||ve<=512)return ee.mmul(be);Re%2===1&&ve%2===1?(ee=K(ee,Re+1,ve+1),be=K(be,Re+1,ve+1)):Re%2===1?(ee=K(ee,Re+1,ve),be=K(be,Re+1,ve)):ve%2===1&&(ee=K(ee,Re,ve+1),be=K(be,Re,ve+1));let Ce=parseInt(ee.rows/2,10),Ge=parseInt(ee.columns/2,10),re=ee.subMatrix(0,Ce-1,0,Ge-1),Ne=be.subMatrix(0,Ce-1,0,Ge-1),qe=ee.subMatrix(0,Ce-1,Ge,ee.columns-1),ct=be.subMatrix(0,Ce-1,Ge,be.columns-1),ht=ee.subMatrix(Ce,ee.rows-1,0,Ge-1),fn=be.subMatrix(Ce,be.rows-1,0,Ge-1),st=ee.subMatrix(Ce,ee.rows-1,Ge,ee.columns-1),Ve=be.subMatrix(Ce,be.rows-1,Ge,be.columns-1),Zt=de(ne.add(re,st),ne.add(Ne,Ve),Ce,Ge),oe=de(ne.add(ht,st),Ne,Ce,Ge),Me=de(re,ne.sub(ct,Ve),Ce,Ge),ze=de(st,ne.sub(fn,Ne),Ce,Ge),Oe=de(ne.add(re,qe),Ve,Ce,Ge),cn=de(ne.sub(ht,re),ne.add(Ne,ct),Ce,Ge),Ut=de(ne.sub(qe,st),ne.add(fn,Ve),Ce,Ge),Nt=ne.add(Zt,ze);Nt.sub(Oe),Nt.add(Ut);let gn=ne.add(Me,Oe),Jt=ne.add(oe,ze),Vi=ne.sub(Zt,oe);Vi.add(Me),Vi.add(cn);let Wn=ne.zeros(2*Nt.rows,2*Nt.columns);return Wn=Wn.setSubMatrix(Nt,0,0),Wn=Wn.setSubMatrix(gn,Nt.rows,0),Wn=Wn.setSubMatrix(Jt,0,Nt.columns),Wn=Wn.setSubMatrix(Vi,Nt.rows,Nt.columns),Wn.subMatrix(0,Re-1,0,ve-1)}return de(x,T,G,V)}scaleRows(T={}){if(typeof T!="object")throw new TypeError("options must be an object");const{min:x=0,max:E=1}=T;if(!Number.isFinite(x))throw new TypeError("min must be a number");if(!Number.isFinite(E))throw new TypeError("max must be a number");if(x>=E)throw new RangeError("min must be smaller than max");let S=new $(this.rows,this.columns);for(let O=0;O<this.rows;O++){const z=this.getRow(O);z.length>0&&e(z,{min:x,max:E,output:z}),S.setRow(O,z)}return S}scaleColumns(T={}){if(typeof T!="object")throw new TypeError("options must be an object");const{min:x=0,max:E=1}=T;if(!Number.isFinite(x))throw new TypeError("min must be a number");if(!Number.isFinite(E))throw new TypeError("max must be a number");if(x>=E)throw new RangeError("min must be smaller than max");let S=new $(this.rows,this.columns);for(let O=0;O<this.columns;O++){const z=this.getColumn(O);z.length&&e(z,{min:x,max:E,output:z}),S.setColumn(O,z)}return S}flipRows(){const T=Math.ceil(this.columns/2);for(let x=0;x<this.rows;x++)for(let E=0;E<T;E++){let S=this.get(x,E),O=this.get(x,this.columns-1-E);this.set(x,E,O),this.set(x,this.columns-1-E,S)}return this}flipColumns(){const T=Math.ceil(this.rows/2);for(let x=0;x<this.columns;x++)for(let E=0;E<T;E++){let S=this.get(E,x),O=this.get(this.rows-1-E,x);this.set(E,x,O),this.set(this.rows-1-E,x,S)}return this}kroneckerProduct(T){T=$.checkMatrix(T);let x=this.rows,E=this.columns,S=T.rows,O=T.columns,z=new $(x*S,E*O);for(let K=0;K<x;K++)for(let G=0;G<E;G++)for(let V=0;V<S;V++)for(let de=0;de<O;de++)z.set(S*K+V,O*G+de,this.get(K,G)*T.get(V,de));return z}kroneckerSum(T){if(T=$.checkMatrix(T),!this.isSquare()||!T.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let x=this.rows,E=T.rows,S=this.kroneckerProduct($.eye(E,E)),O=$.eye(x,x).kroneckerProduct(T);return S.add(O)}transpose(){let T=new $(this.columns,this.rows);for(let x=0;x<this.rows;x++)for(let E=0;E<this.columns;E++)T.set(E,x,this.get(x,E));return T}sortRows(T=Ie){for(let x=0;x<this.rows;x++)this.setRow(x,this.getRow(x).sort(T));return this}sortColumns(T=Ie){for(let x=0;x<this.columns;x++)this.setColumn(x,this.getColumn(x).sort(T));return this}subMatrix(T,x,E,S){m(this,T,x,E,S);let O=new $(x-T+1,S-E+1);for(let z=T;z<=x;z++)for(let K=E;K<=S;K++)O.set(z-T,K-E,this.get(z,K));return O}subMatrixRow(T,x,E){if(x===void 0&&(x=0),E===void 0&&(E=this.columns-1),x>E||x<0||x>=this.columns||E<0||E>=this.columns)throw new RangeError("Argument out of range");let S=new $(T.length,E-x+1);for(let O=0;O<T.length;O++)for(let z=x;z<=E;z++){if(T[O]<0||T[O]>=this.rows)throw new RangeError(`Row index out of range: ${T[O]}`);S.set(O,z-x,this.get(T[O],z))}return S}subMatrixColumn(T,x,E){if(x===void 0&&(x=0),E===void 0&&(E=this.rows-1),x>E||x<0||x>=this.rows||E<0||E>=this.rows)throw new RangeError("Argument out of range");let S=new $(E-x+1,T.length);for(let O=0;O<T.length;O++)for(let z=x;z<=E;z++){if(T[O]<0||T[O]>=this.columns)throw new RangeError(`Column index out of range: ${T[O]}`);S.set(z-x,O,this.get(z,T[O]))}return S}setSubMatrix(T,x,E){if(T=$.checkMatrix(T),T.isEmpty())return this;let S=x+T.rows-1,O=E+T.columns-1;m(this,x,S,E,O);for(let z=0;z<T.rows;z++)for(let K=0;K<T.columns;K++)this.set(x+z,E+K,T.get(z,K));return this}selection(T,x){p(this,T),v(this,x);let E=new $(T.length,x.length);for(let S=0;S<T.length;S++){let O=T[S];for(let z=0;z<x.length;z++){let K=x[z];E.set(S,z,this.get(O,K))}}return E}trace(){let T=Math.min(this.rows,this.columns),x=0;for(let E=0;E<T;E++)x+=this.get(E,E);return x}clone(){return this.constructor.copy(this,new $(this.rows,this.columns))}static copy(T,x){for(const[E,S,O]of T.entries())x.set(E,S,O);return x}sum(T){switch(T){case"row":return C(this);case"column":return M(this);case void 0:return F(this);default:throw new Error(`invalid option: ${T}`)}}product(T){switch(T){case"row":return k(this);case"column":return P(this);case void 0:return N(this);default:throw new Error(`invalid option: ${T}`)}}mean(T){const x=this.sum(T);switch(T){case"row":{for(let E=0;E<this.rows;E++)x[E]/=this.columns;return x}case"column":{for(let E=0;E<this.columns;E++)x[E]/=this.rows;return x}case void 0:return x/this.size;default:throw new Error(`invalid option: ${T}`)}}variance(T,x={}){if(typeof T=="object"&&(x=T,T=void 0),typeof x!="object")throw new TypeError("options must be an object");const{unbiased:E=!0,mean:S=this.mean(T)}=x;if(typeof E!="boolean")throw new TypeError("unbiased must be a boolean");switch(T){case"row":{if(!r.isAnyArray(S))throw new TypeError("mean must be an array");return D(this,E,S)}case"column":{if(!r.isAnyArray(S))throw new TypeError("mean must be an array");return Q(this,E,S)}case void 0:{if(typeof S!="number")throw new TypeError("mean must be a number");return H(this,E,S)}default:throw new Error(`invalid option: ${T}`)}}standardDeviation(T,x){typeof T=="object"&&(x=T,T=void 0);const E=this.variance(T,x);if(T===void 0)return Math.sqrt(E);for(let S=0;S<E.length;S++)E[S]=Math.sqrt(E[S]);return E}center(T,x={}){if(typeof T=="object"&&(x=T,T=void 0),typeof x!="object")throw new TypeError("options must be an object");const{center:E=this.mean(T)}=x;switch(T){case"row":{if(!r.isAnyArray(E))throw new TypeError("center must be an array");return j(this,E),this}case"column":{if(!r.isAnyArray(E))throw new TypeError("center must be an array");return q(this,E),this}case void 0:{if(typeof E!="number")throw new TypeError("center must be a number");return J(this,E),this}default:throw new Error(`invalid option: ${T}`)}}scale(T,x={}){if(typeof T=="object"&&(x=T,T=void 0),typeof x!="object")throw new TypeError("options must be an object");let E=x.scale;switch(T){case"row":{if(E===void 0)E=ce(this);else if(!r.isAnyArray(E))throw new TypeError("scale must be an array");return se(this,E),this}case"column":{if(E===void 0)E=W(this);else if(!r.isAnyArray(E))throw new TypeError("scale must be an array");return le(this,E),this}case void 0:{if(E===void 0)E=fe(this);else if(typeof E!="number")throw new TypeError("scale must be a number");return X(this,E),this}default:throw new Error(`invalid option: ${T}`)}}toString(T){return a(this,T)}[Symbol.iterator](){return this.entries()}*entries(){for(let T=0;T<this.rows;T++)for(let x=0;x<this.columns;x++)yield[T,x,this.get(T,x)]}*values(){for(let T=0;T<this.rows;T++)for(let x=0;x<this.columns;x++)yield this.get(T,x)}}ne.prototype.klass="Matrix",typeof Symbol<"u"&&(ne.prototype[Symbol.for("nodejs.util.inspect.custom")]=i);function Ie(R,T){return R-T}function te(R){return R.every(T=>typeof T=="number")}ne.random=ne.rand,ne.randomInt=ne.randInt,ne.diagonal=ne.diag,ne.prototype.diagonal=ne.prototype.diag,ne.identity=ne.eye,ne.prototype.negate=ne.prototype.neg,ne.prototype.tensorProduct=ne.prototype.kroneckerProduct;const bA=class bA extends ne{constructor(x,E){super();Oy(this,la);_n(this,"data");if(bA.isMatrix(x))Ly(this,la,Lx).call(this,x.rows,x.columns),bA.copy(x,this);else if(Number.isInteger(x)&&x>=0)Ly(this,la,Lx).call(this,x,E);else if(r.isAnyArray(x)){const S=x;if(x=S.length,E=x?S[0].length:0,typeof E!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let O=0;O<x;O++){if(S[O].length!==E)throw new RangeError("Inconsistent array dimensions");if(!te(S[O]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(S[O]))}this.rows=x,this.columns=E}else throw new TypeError("First argument must be a positive number or an array")}set(x,E,S){return this.data[x][E]=S,this}get(x,E){return this.data[x][E]}removeRow(x){return c(this,x),this.data.splice(x,1),this.rows-=1,this}addRow(x,E){return E===void 0&&(E=x,x=this.rows),c(this,x,!0),E=Float64Array.from(h(this,E)),this.data.splice(x,0,E),this.rows+=1,this}removeColumn(x){u(this,x);for(let E=0;E<this.rows;E++){const S=new Float64Array(this.columns-1);for(let O=0;O<x;O++)S[O]=this.data[E][O];for(let O=x+1;O<this.columns;O++)S[O-1]=this.data[E][O];this.data[E]=S}return this.columns-=1,this}addColumn(x,E){typeof E>"u"&&(E=x,x=this.columns),u(this,x,!0),E=g(this,E);for(let S=0;S<this.rows;S++){const O=new Float64Array(this.columns+1);let z=0;for(;z<x;z++)O[z]=this.data[S][z];for(O[z++]=E[S];z<this.columns+1;z++)O[z]=this.data[S][z-1];this.data[S]=O}return this.columns+=1,this}};la=new WeakSet,Lx=function(x,E){if(this.data=[],Number.isInteger(E)&&E>=0)for(let S=0;S<x;S++)this.data.push(new Float64Array(E));else throw new TypeError("nColumns must be a positive integer");this.rows=x,this.columns=E};let $=bA;l(ne,$);const _A=class _A extends ne{constructor(x){super();Oy(this,mr);if($.isMatrix(x)){if(!x.isSymmetric())throw new TypeError("not symmetric data");Ff(this,mr,$.copy(x,new $(x.rows,x.rows)))}else if(Number.isInteger(x)&&x>=0)Ff(this,mr,new $(x,x));else if(Ff(this,mr,new $(x)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return Ha(this,mr).size}get rows(){return Ha(this,mr).rows}get columns(){return Ha(this,mr).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(x){return $.isMatrix(x)&&x.klassType==="SymmetricMatrix"}static zeros(x){return new this(x)}static ones(x){return new this(x).fill(1)}clone(){const x=new _A(this.diagonalSize);for(const[E,S,O]of this.upperRightEntries())x.set(E,S,O);return x}toMatrix(){return new $(this)}get(x,E){return Ha(this,mr).get(x,E)}set(x,E,S){return Ha(this,mr).set(x,E,S),Ha(this,mr).set(E,x,S),this}removeCross(x){return Ha(this,mr).removeRow(x),Ha(this,mr).removeColumn(x),this}addCross(x,E){E===void 0&&(E=x,x=this.diagonalSize);const S=E.slice();return S.splice(x,1),Ha(this,mr).addRow(x,S),Ha(this,mr).addColumn(x,E),this}applyMask(x){if(x.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const E=[];for(const[S,O]of x.entries())O||E.push(S);E.reverse();for(const S of E)this.removeCross(S);return this}toCompact(){const{diagonalSize:x}=this,E=new Array(x*(x+1)/2);for(let S=0,O=0,z=0;z<E.length;z++)E[z]=this.get(O,S),++S>=x&&(S=++O);return E}static fromCompact(x){const E=x.length,S=(Math.sqrt(8*E+1)-1)/2;if(!Number.isInteger(S))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(x)}`);const O=new _A(S);for(let z=0,K=0,G=0;G<E;G++)O.set(z,K,x[G]),++z>=S&&(z=++K);return O}*upperRightEntries(){for(let x=0,E=0;x<this.diagonalSize;void 0){const S=this.get(x,E);yield[x,E,S],++E>=this.diagonalSize&&(E=++x)}}*upperRightValues(){for(let x=0,E=0;x<this.diagonalSize;void 0)yield this.get(x,E),++E>=this.diagonalSize&&(E=++x)}};mr=new WeakMap;let ue=_A;ue.prototype.klassType="SymmetricMatrix";class me extends ue{static isDistanceMatrix(T){return ue.isSymmetricMatrix(T)&&T.klassSubType==="DistanceMatrix"}constructor(T){if(super(T),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(T,x,E){return T===x&&(E=0),super.set(T,x,E)}addCross(T,x){return x===void 0&&(x=T,T=this.diagonalSize),x=x.slice(),x[T]=0,super.addCross(T,x)}toSymmetricMatrix(){return new ue(this)}clone(){const T=new me(this.diagonalSize);for(const[x,E,S]of this.upperRightEntries())x!==E&&T.set(x,E,S);return T}toCompact(){const{diagonalSize:T}=this,x=(T-1)*T/2,E=new Array(x);for(let S=1,O=0,z=0;z<E.length;z++)E[z]=this.get(O,S),++S>=T&&(S=++O+1);return E}static fromCompact(T){const x=T.length;if(x===0)return new this(0);const E=(Math.sqrt(8*x+1)+1)/2;if(!Number.isInteger(E))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(T)}`);const S=new this(E);for(let O=1,z=0,K=0;K<x;K++)S.set(O,z,T[K]),++O>=E&&(O=++z+1);return S}}me.prototype.klassSubType="DistanceMatrix";class Te extends ne{constructor(T,x,E){super(),this.matrix=T,this.rows=x,this.columns=E}}class He extends Te{constructor(T,x){u(T,x),super(T,T.rows,1),this.column=x}set(T,x,E){return this.matrix.set(T,this.column,E),this}get(T){return this.matrix.get(T,this.column)}}class Je extends Te{constructor(T,x){v(T,x),super(T,T.rows,x.length),this.columnIndices=x}set(T,x,E){return this.matrix.set(T,this.columnIndices[x],E),this}get(T,x){return this.matrix.get(T,this.columnIndices[x])}}class Bt extends Te{constructor(T){super(T,T.rows,T.columns)}set(T,x,E){return this.matrix.set(T,this.columns-x-1,E),this}get(T,x){return this.matrix.get(T,this.columns-x-1)}}class Lt extends Te{constructor(T){super(T,T.rows,T.columns)}set(T,x,E){return this.matrix.set(this.rows-T-1,x,E),this}get(T,x){return this.matrix.get(this.rows-T-1,x)}}class kt extends Te{constructor(T,x){c(T,x),super(T,1,T.columns),this.row=x}set(T,x,E){return this.matrix.set(this.row,x,E),this}get(T,x){return this.matrix.get(this.row,x)}}class zt extends Te{constructor(T,x){p(T,x),super(T,x.length,T.columns),this.rowIndices=x}set(T,x,E){return this.matrix.set(this.rowIndices[T],x,E),this}get(T,x){return this.matrix.get(this.rowIndices[T],x)}}class ot extends Te{constructor(T,x,E){p(T,x),v(T,E),super(T,x.length,E.length),this.rowIndices=x,this.columnIndices=E}set(T,x,E){return this.matrix.set(this.rowIndices[T],this.columnIndices[x],E),this}get(T,x){return this.matrix.get(this.rowIndices[T],this.columnIndices[x])}}class Qt extends Te{constructor(T,x,E,S,O){m(T,x,E,S,O),super(T,E-x+1,O-S+1),this.startRow=x,this.startColumn=S}set(T,x,E){return this.matrix.set(this.startRow+T,this.startColumn+x,E),this}get(T,x){return this.matrix.get(this.startRow+T,this.startColumn+x)}}class Ct extends Te{constructor(T){super(T,T.columns,T.rows)}set(T,x,E){return this.matrix.set(x,T,E),this}get(T,x){return this.matrix.get(x,T)}}class Rr extends ne{constructor(T,x={}){const{rows:E=1}=x;if(T.length%E!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=E,this.columns=T.length/E,this.data=T}set(T,x,E){let S=this._calculateIndex(T,x);return this.data[S]=E,this}get(T,x){let E=this._calculateIndex(T,x);return this.data[E]}_calculateIndex(T,x){return T*this.columns+x}}class Gt extends ne{constructor(T){super(),this.data=T,this.rows=T.length,this.columns=T[0].length}set(T,x,E){return this.data[T][x]=E,this}get(T,x){return this.data[T][x]}}function ui(R,T){if(r.isAnyArray(R))return R[0]&&r.isAnyArray(R[0])?new Gt(R):new Rr(R,T);throw new Error("the argument is not an array")}class Hn{constructor(T){T=Gt.checkMatrix(T);let x=T.clone(),E=x.rows,S=x.columns,O=new Float64Array(E),z=1,K,G,V,de,ee,be,Re,ve,Ce;for(K=0;K<E;K++)O[K]=K;for(ve=new Float64Array(E),G=0;G<S;G++){for(K=0;K<E;K++)ve[K]=x.get(K,G);for(K=0;K<E;K++){for(Ce=Math.min(K,G),ee=0,V=0;V<Ce;V++)ee+=x.get(K,V)*ve[V];ve[K]-=ee,x.set(K,G,ve[K])}for(de=G,K=G+1;K<E;K++)Math.abs(ve[K])>Math.abs(ve[de])&&(de=K);if(de!==G){for(V=0;V<S;V++)be=x.get(de,V),x.set(de,V,x.get(G,V)),x.set(G,V,be);Re=O[de],O[de]=O[G],O[G]=Re,z=-z}if(G<E&&x.get(G,G)!==0)for(K=G+1;K<E;K++)x.set(K,G,x.get(K,G)/x.get(G,G))}this.LU=x,this.pivotVector=O,this.pivotSign=z}isSingular(){let T=this.LU,x=T.columns;for(let E=0;E<x;E++)if(T.get(E,E)===0)return!0;return!1}solve(T){T=$.checkMatrix(T);let x=this.LU;if(x.rows!==T.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let S=T.columns,O=T.subMatrixRow(this.pivotVector,0,S-1),z=x.columns,K,G,V;for(V=0;V<z;V++)for(K=V+1;K<z;K++)for(G=0;G<S;G++)O.set(K,G,O.get(K,G)-O.get(V,G)*x.get(K,V));for(V=z-1;V>=0;V--){for(G=0;G<S;G++)O.set(V,G,O.get(V,G)/x.get(V,V));for(K=0;K<V;K++)for(G=0;G<S;G++)O.set(K,G,O.get(K,G)-O.get(V,G)*x.get(K,V))}return O}get determinant(){let T=this.LU;if(!T.isSquare())throw new Error("Matrix must be square");let x=this.pivotSign,E=T.columns;for(let S=0;S<E;S++)x*=T.get(S,S);return x}get lowerTriangularMatrix(){let T=this.LU,x=T.rows,E=T.columns,S=new $(x,E);for(let O=0;O<x;O++)for(let z=0;z<E;z++)O>z?S.set(O,z,T.get(O,z)):O===z?S.set(O,z,1):S.set(O,z,0);return S}get upperTriangularMatrix(){let T=this.LU,x=T.rows,E=T.columns,S=new $(x,E);for(let O=0;O<x;O++)for(let z=0;z<E;z++)O<=z?S.set(O,z,T.get(O,z)):S.set(O,z,0);return S}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function An(R,T){let x=0;return Math.abs(R)>Math.abs(T)?(x=T/R,Math.abs(R)*Math.sqrt(1+x*x)):T!==0?(x=R/T,Math.abs(T)*Math.sqrt(1+x*x)):0}class Xt{constructor(T){T=Gt.checkMatrix(T);let x=T.clone(),E=T.rows,S=T.columns,O=new Float64Array(S),z,K,G,V;for(G=0;G<S;G++){let de=0;for(z=G;z<E;z++)de=An(de,x.get(z,G));if(de!==0){for(x.get(G,G)<0&&(de=-de),z=G;z<E;z++)x.set(z,G,x.get(z,G)/de);for(x.set(G,G,x.get(G,G)+1),K=G+1;K<S;K++){for(V=0,z=G;z<E;z++)V+=x.get(z,G)*x.get(z,K);for(V=-V/x.get(G,G),z=G;z<E;z++)x.set(z,K,x.get(z,K)+V*x.get(z,G))}}O[G]=-de}this.QR=x,this.Rdiag=O}solve(T){T=$.checkMatrix(T);let x=this.QR,E=x.rows;if(T.rows!==E)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let S=T.columns,O=T.clone(),z=x.columns,K,G,V,de;for(V=0;V<z;V++)for(G=0;G<S;G++){for(de=0,K=V;K<E;K++)de+=x.get(K,V)*O.get(K,G);for(de=-de/x.get(V,V),K=V;K<E;K++)O.set(K,G,O.get(K,G)+de*x.get(K,V))}for(V=z-1;V>=0;V--){for(G=0;G<S;G++)O.set(V,G,O.get(V,G)/this.Rdiag[V]);for(K=0;K<V;K++)for(G=0;G<S;G++)O.set(K,G,O.get(K,G)-O.get(V,G)*x.get(K,V))}return O.subMatrix(0,z-1,0,S-1)}isFullRank(){let T=this.QR.columns;for(let x=0;x<T;x++)if(this.Rdiag[x]===0)return!1;return!0}get upperTriangularMatrix(){let T=this.QR,x=T.columns,E=new $(x,x),S,O;for(S=0;S<x;S++)for(O=0;O<x;O++)S<O?E.set(S,O,T.get(S,O)):S===O?E.set(S,O,this.Rdiag[S]):E.set(S,O,0);return E}get orthogonalMatrix(){let T=this.QR,x=T.rows,E=T.columns,S=new $(x,E),O,z,K,G;for(K=E-1;K>=0;K--){for(O=0;O<x;O++)S.set(O,K,0);for(S.set(K,K,1),z=K;z<E;z++)if(T.get(K,K)!==0){for(G=0,O=K;O<x;O++)G+=T.get(O,K)*S.get(O,z);for(G=-G/T.get(K,K),O=K;O<x;O++)S.set(O,z,S.get(O,z)+G*T.get(O,K))}}return S}}class ir{constructor(T,x={}){if(T=Gt.checkMatrix(T),T.isEmpty())throw new Error("Matrix must be non-empty");let E=T.rows,S=T.columns;const{computeLeftSingularVectors:O=!0,computeRightSingularVectors:z=!0,autoTranspose:K=!1}=x;let G=!!O,V=!!z,de=!1,ee;if(E<S)if(!K)ee=T.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{ee=T.transpose(),E=ee.rows,S=ee.columns,de=!0;let oe=G;G=V,V=oe}else ee=T.clone();let be=Math.min(E,S),Re=Math.min(E+1,S),ve=new Float64Array(Re),Ce=new $(E,be),Ge=new $(S,S),re=new Float64Array(S),Ne=new Float64Array(E),qe=new Float64Array(Re);for(let oe=0;oe<Re;oe++)qe[oe]=oe;let ct=Math.min(E-1,S),ht=Math.max(0,Math.min(S-2,E)),fn=Math.max(ct,ht);for(let oe=0;oe<fn;oe++){if(oe<ct){ve[oe]=0;for(let Me=oe;Me<E;Me++)ve[oe]=An(ve[oe],ee.get(Me,oe));if(ve[oe]!==0){ee.get(oe,oe)<0&&(ve[oe]=-ve[oe]);for(let Me=oe;Me<E;Me++)ee.set(Me,oe,ee.get(Me,oe)/ve[oe]);ee.set(oe,oe,ee.get(oe,oe)+1)}ve[oe]=-ve[oe]}for(let Me=oe+1;Me<S;Me++){if(oe<ct&&ve[oe]!==0){let ze=0;for(let Oe=oe;Oe<E;Oe++)ze+=ee.get(Oe,oe)*ee.get(Oe,Me);ze=-ze/ee.get(oe,oe);for(let Oe=oe;Oe<E;Oe++)ee.set(Oe,Me,ee.get(Oe,Me)+ze*ee.get(Oe,oe))}re[Me]=ee.get(oe,Me)}if(G&&oe<ct)for(let Me=oe;Me<E;Me++)Ce.set(Me,oe,ee.get(Me,oe));if(oe<ht){re[oe]=0;for(let Me=oe+1;Me<S;Me++)re[oe]=An(re[oe],re[Me]);if(re[oe]!==0){re[oe+1]<0&&(re[oe]=0-re[oe]);for(let Me=oe+1;Me<S;Me++)re[Me]/=re[oe];re[oe+1]+=1}if(re[oe]=-re[oe],oe+1<E&&re[oe]!==0){for(let Me=oe+1;Me<E;Me++)Ne[Me]=0;for(let Me=oe+1;Me<E;Me++)for(let ze=oe+1;ze<S;ze++)Ne[Me]+=re[ze]*ee.get(Me,ze);for(let Me=oe+1;Me<S;Me++){let ze=-re[Me]/re[oe+1];for(let Oe=oe+1;Oe<E;Oe++)ee.set(Oe,Me,ee.get(Oe,Me)+ze*Ne[Oe])}}if(V)for(let Me=oe+1;Me<S;Me++)Ge.set(Me,oe,re[Me])}}let st=Math.min(S,E+1);if(ct<S&&(ve[ct]=ee.get(ct,ct)),E<st&&(ve[st-1]=0),ht+1<st&&(re[ht]=ee.get(ht,st-1)),re[st-1]=0,G){for(let oe=ct;oe<be;oe++){for(let Me=0;Me<E;Me++)Ce.set(Me,oe,0);Ce.set(oe,oe,1)}for(let oe=ct-1;oe>=0;oe--)if(ve[oe]!==0){for(let Me=oe+1;Me<be;Me++){let ze=0;for(let Oe=oe;Oe<E;Oe++)ze+=Ce.get(Oe,oe)*Ce.get(Oe,Me);ze=-ze/Ce.get(oe,oe);for(let Oe=oe;Oe<E;Oe++)Ce.set(Oe,Me,Ce.get(Oe,Me)+ze*Ce.get(Oe,oe))}for(let Me=oe;Me<E;Me++)Ce.set(Me,oe,-Ce.get(Me,oe));Ce.set(oe,oe,1+Ce.get(oe,oe));for(let Me=0;Me<oe-1;Me++)Ce.set(Me,oe,0)}else{for(let Me=0;Me<E;Me++)Ce.set(Me,oe,0);Ce.set(oe,oe,1)}}if(V)for(let oe=S-1;oe>=0;oe--){if(oe<ht&&re[oe]!==0)for(let Me=oe+1;Me<S;Me++){let ze=0;for(let Oe=oe+1;Oe<S;Oe++)ze+=Ge.get(Oe,oe)*Ge.get(Oe,Me);ze=-ze/Ge.get(oe+1,oe);for(let Oe=oe+1;Oe<S;Oe++)Ge.set(Oe,Me,Ge.get(Oe,Me)+ze*Ge.get(Oe,oe))}for(let Me=0;Me<S;Me++)Ge.set(Me,oe,0);Ge.set(oe,oe,1)}let Ve=st-1,Zt=Number.EPSILON;for(;st>0;){let oe,Me;for(oe=st-2;oe>=-1&&oe!==-1;oe--){const ze=Number.MIN_VALUE+Zt*Math.abs(ve[oe]+Math.abs(ve[oe+1]));if(Math.abs(re[oe])<=ze||Number.isNaN(re[oe])){re[oe]=0;break}}if(oe===st-2)Me=4;else{let ze;for(ze=st-1;ze>=oe&&ze!==oe;ze--){let Oe=(ze!==st?Math.abs(re[ze]):0)+(ze!==oe+1?Math.abs(re[ze-1]):0);if(Math.abs(ve[ze])<=Zt*Oe){ve[ze]=0;break}}ze===oe?Me=3:ze===st-1?Me=1:(Me=2,oe=ze)}switch(oe++,Me){case 1:{let ze=re[st-2];re[st-2]=0;for(let Oe=st-2;Oe>=oe;Oe--){let cn=An(ve[Oe],ze),Ut=ve[Oe]/cn,Nt=ze/cn;if(ve[Oe]=cn,Oe!==oe&&(ze=-Nt*re[Oe-1],re[Oe-1]=Ut*re[Oe-1]),V)for(let gn=0;gn<S;gn++)cn=Ut*Ge.get(gn,Oe)+Nt*Ge.get(gn,st-1),Ge.set(gn,st-1,-Nt*Ge.get(gn,Oe)+Ut*Ge.get(gn,st-1)),Ge.set(gn,Oe,cn)}break}case 2:{let ze=re[oe-1];re[oe-1]=0;for(let Oe=oe;Oe<st;Oe++){let cn=An(ve[Oe],ze),Ut=ve[Oe]/cn,Nt=ze/cn;if(ve[Oe]=cn,ze=-Nt*re[Oe],re[Oe]=Ut*re[Oe],G)for(let gn=0;gn<E;gn++)cn=Ut*Ce.get(gn,Oe)+Nt*Ce.get(gn,oe-1),Ce.set(gn,oe-1,-Nt*Ce.get(gn,Oe)+Ut*Ce.get(gn,oe-1)),Ce.set(gn,Oe,cn)}break}case 3:{const ze=Math.max(Math.abs(ve[st-1]),Math.abs(ve[st-2]),Math.abs(re[st-2]),Math.abs(ve[oe]),Math.abs(re[oe])),Oe=ve[st-1]/ze,cn=ve[st-2]/ze,Ut=re[st-2]/ze,Nt=ve[oe]/ze,gn=re[oe]/ze,Jt=((cn+Oe)*(cn-Oe)+Ut*Ut)/2,Vi=Oe*Ut*(Oe*Ut);let Wn=0;(Jt!==0||Vi!==0)&&(Jt<0?Wn=0-Math.sqrt(Jt*Jt+Vi):Wn=Math.sqrt(Jt*Jt+Vi),Wn=Vi/(Jt+Wn));let ca=(Nt+Oe)*(Nt-Oe)+Wn,Bi=Nt*gn;for(let Tt=oe;Tt<st-1;Tt++){let Pn=An(ca,Bi);Pn===0&&(Pn=Number.MIN_VALUE);let Tr=ca/Pn,hi=Bi/Pn;if(Tt!==oe&&(re[Tt-1]=Pn),ca=Tr*ve[Tt]+hi*re[Tt],re[Tt]=Tr*re[Tt]-hi*ve[Tt],Bi=hi*ve[Tt+1],ve[Tt+1]=Tr*ve[Tt+1],V)for(let $n=0;$n<S;$n++)Pn=Tr*Ge.get($n,Tt)+hi*Ge.get($n,Tt+1),Ge.set($n,Tt+1,-hi*Ge.get($n,Tt)+Tr*Ge.get($n,Tt+1)),Ge.set($n,Tt,Pn);if(Pn=An(ca,Bi),Pn===0&&(Pn=Number.MIN_VALUE),Tr=ca/Pn,hi=Bi/Pn,ve[Tt]=Pn,ca=Tr*re[Tt]+hi*ve[Tt+1],ve[Tt+1]=-hi*re[Tt]+Tr*ve[Tt+1],Bi=hi*re[Tt+1],re[Tt+1]=Tr*re[Tt+1],G&&Tt<E-1)for(let $n=0;$n<E;$n++)Pn=Tr*Ce.get($n,Tt)+hi*Ce.get($n,Tt+1),Ce.set($n,Tt+1,-hi*Ce.get($n,Tt)+Tr*Ce.get($n,Tt+1)),Ce.set($n,Tt,Pn)}re[st-2]=ca;break}case 4:{if(ve[oe]<=0&&(ve[oe]=ve[oe]<0?-ve[oe]:0,V))for(let ze=0;ze<=Ve;ze++)Ge.set(ze,oe,-Ge.get(ze,oe));for(;oe<Ve&&!(ve[oe]>=ve[oe+1]);){let ze=ve[oe];if(ve[oe]=ve[oe+1],ve[oe+1]=ze,V&&oe<S-1)for(let Oe=0;Oe<S;Oe++)ze=Ge.get(Oe,oe+1),Ge.set(Oe,oe+1,Ge.get(Oe,oe)),Ge.set(Oe,oe,ze);if(G&&oe<E-1)for(let Oe=0;Oe<E;Oe++)ze=Ce.get(Oe,oe+1),Ce.set(Oe,oe+1,Ce.get(Oe,oe)),Ce.set(Oe,oe,ze);oe++}st--;break}}}if(de){let oe=Ge;Ge=Ce,Ce=oe}this.m=E,this.n=S,this.s=ve,this.U=Ce,this.V=Ge}solve(T){let x=T,E=this.threshold,S=this.s.length,O=$.zeros(S,S);for(let be=0;be<S;be++)Math.abs(this.s[be])<=E?O.set(be,be,0):O.set(be,be,1/this.s[be]);let z=this.U,K=this.rightSingularVectors,G=K.mmul(O),V=K.rows,de=z.rows,ee=$.zeros(V,de);for(let be=0;be<V;be++)for(let Re=0;Re<de;Re++){let ve=0;for(let Ce=0;Ce<S;Ce++)ve+=G.get(be,Ce)*z.get(Re,Ce);ee.set(be,Re,ve)}return ee.mmul(x)}solveForDiagonal(T){return this.solve($.diag(T))}inverse(){let T=this.V,x=this.threshold,E=T.rows,S=T.columns,O=new $(E,this.s.length);for(let de=0;de<E;de++)for(let ee=0;ee<S;ee++)Math.abs(this.s[ee])>x&&O.set(de,ee,T.get(de,ee)/this.s[ee]);let z=this.U,K=z.rows,G=z.columns,V=new $(E,K);for(let de=0;de<E;de++)for(let ee=0;ee<K;ee++){let be=0;for(let Re=0;Re<G;Re++)be+=O.get(de,Re)*z.get(ee,Re);V.set(de,ee,be)}return V}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let T=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,x=0,E=this.s;for(let S=0,O=E.length;S<O;S++)E[S]>T&&x++;return x}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return $.diag(this.s)}}function pr(R,T=!1){return R=Gt.checkMatrix(R),T?new ir(R).inverse():Qr(R,$.eye(R.rows))}function Qr(R,T,x=!1){return R=Gt.checkMatrix(R),T=Gt.checkMatrix(T),x?new ir(R).solve(T):R.isSquare()?new Hn(R).solve(T):new Xt(R).solve(T)}function vr(R){if(R=$.checkMatrix(R),R.isSquare()){if(R.columns===0)return 1;let T,x,E,S;if(R.columns===2)return T=R.get(0,0),x=R.get(0,1),E=R.get(1,0),S=R.get(1,1),T*S-x*E;if(R.columns===3){let O,z,K;return O=new ot(R,[1,2],[1,2]),z=new ot(R,[1,2],[0,2]),K=new ot(R,[1,2],[0,1]),T=R.get(0,0),x=R.get(0,1),E=R.get(0,2),T*vr(O)-x*vr(z)+E*vr(K)}else return new Hn(R).determinant}else throw Error("determinant can only be calculated for a square matrix")}function qn(R,T){let x=[];for(let E=0;E<R;E++)E!==T&&x.push(E);return x}function Tn(R,T,x,E=1e-9,S=1e-9){if(R>S)return new Array(T.rows+1).fill(0);{let O=T.addRow(x,[0]);for(let z=0;z<O.rows;z++)Math.abs(O.get(z,0))<E&&O.set(z,0,0);return O.to1DArray()}}function ln(R,T={}){const{thresholdValue:x=1e-9,thresholdError:E=1e-9}=T;R=$.checkMatrix(R);let S=R.rows,O=new $(S,S);for(let z=0;z<S;z++){let K=$.columnVector(R.getRow(z)),G=R.subMatrixRow(qn(S,z)).transpose(),de=new ir(G).solve(K),ee=$.sub(K,G.mmul(de)).abs().max();O.setRow(z,Tn(ee,de,z,x,E))}return O}function Pa(R,T=Number.EPSILON){if(R=$.checkMatrix(R),R.isEmpty())return R.transpose();let x=new ir(R,{autoTranspose:!0}),E=x.leftSingularVectors,S=x.rightSingularVectors,O=x.diagonal;for(let z=0;z<O.length;z++)Math.abs(O[z])>T?O[z]=1/O[z]:O[z]=0;return S.mmul($.diag(O).mmul(E.transpose()))}function Ls(R,T=R,x={}){R=new $(R);let E=!1;if(typeof T=="object"&&!$.isMatrix(T)&&!r.isAnyArray(T)?(x=T,T=R,E=!0):T=new $(T),R.rows!==T.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:S=!0}=x;S&&(R=R.center("column"),E||(T=T.center("column")));const O=R.transpose().mmul(T);for(let z=0;z<O.rows;z++)for(let K=0;K<O.columns;K++)O.set(z,K,O.get(z,K)*(1/(R.rows-1)));return O}function Xr(R,T=R,x={}){R=new $(R);let E=!1;if(typeof T=="object"&&!$.isMatrix(T)&&!r.isAnyArray(T)?(x=T,T=R,E=!0):T=new $(T),R.rows!==T.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:S=!0,scale:O=!0}=x;S&&(R.center("column"),E||T.center("column")),O&&(R.scale("column"),E||T.scale("column"));const z=R.standardDeviation("column",{unbiased:!0}),K=E?z:T.standardDeviation("column",{unbiased:!0}),G=R.transpose().mmul(T);for(let V=0;V<G.rows;V++)for(let de=0;de<G.columns;de++)G.set(V,de,G.get(V,de)*(1/(z[V]*K[de]))*(1/(R.rows-1)));return G}class di{constructor(T,x={}){const{assumeSymmetric:E=!1}=x;if(T=Gt.checkMatrix(T),!T.isSquare())throw new Error("Matrix is not a square matrix");if(T.isEmpty())throw new Error("Matrix must be non-empty");let S=T.columns,O=new $(S,S),z=new Float64Array(S),K=new Float64Array(S),G=T,V,de,ee=!1;if(E?ee=!0:ee=T.isSymmetric(),ee){for(V=0;V<S;V++)for(de=0;de<S;de++)O.set(V,de,G.get(V,de));kl(S,K,z,O),co(S,K,z,O)}else{let be=new $(S,S),Re=new Float64Array(S);for(de=0;de<S;de++)for(V=0;V<S;V++)be.set(V,de,G.get(V,de));wA(S,be,Re,O),uo(S,K,z,O,be)}this.n=S,this.e=K,this.d=z,this.V=O}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let T=this.n,x=this.e,E=this.d,S=new $(T,T),O,z;for(O=0;O<T;O++){for(z=0;z<T;z++)S.set(O,z,0);S.set(O,O,E[O]),x[O]>0?S.set(O,O+1,x[O]):x[O]<0&&S.set(O,O-1,x[O])}return S}}function kl(R,T,x,E){let S,O,z,K,G,V,de,ee;for(G=0;G<R;G++)x[G]=E.get(R-1,G);for(K=R-1;K>0;K--){for(ee=0,z=0,V=0;V<K;V++)ee=ee+Math.abs(x[V]);if(ee===0)for(T[K]=x[K-1],G=0;G<K;G++)x[G]=E.get(K-1,G),E.set(K,G,0),E.set(G,K,0);else{for(V=0;V<K;V++)x[V]/=ee,z+=x[V]*x[V];for(S=x[K-1],O=Math.sqrt(z),S>0&&(O=-O),T[K]=ee*O,z=z-S*O,x[K-1]=S-O,G=0;G<K;G++)T[G]=0;for(G=0;G<K;G++){for(S=x[G],E.set(G,K,S),O=T[G]+E.get(G,G)*S,V=G+1;V<=K-1;V++)O+=E.get(V,G)*x[V],T[V]+=E.get(V,G)*S;T[G]=O}for(S=0,G=0;G<K;G++)T[G]/=z,S+=T[G]*x[G];for(de=S/(z+z),G=0;G<K;G++)T[G]-=de*x[G];for(G=0;G<K;G++){for(S=x[G],O=T[G],V=G;V<=K-1;V++)E.set(V,G,E.get(V,G)-(S*T[V]+O*x[V]));x[G]=E.get(K-1,G),E.set(K,G,0)}}x[K]=z}for(K=0;K<R-1;K++){if(E.set(R-1,K,E.get(K,K)),E.set(K,K,1),z=x[K+1],z!==0){for(V=0;V<=K;V++)x[V]=E.get(V,K+1)/z;for(G=0;G<=K;G++){for(O=0,V=0;V<=K;V++)O+=E.get(V,K+1)*E.get(V,G);for(V=0;V<=K;V++)E.set(V,G,E.get(V,G)-O*x[V])}}for(V=0;V<=K;V++)E.set(V,K+1,0)}for(G=0;G<R;G++)x[G]=E.get(R-1,G),E.set(R-1,G,0);E.set(R-1,R-1,1),T[0]=0}function co(R,T,x,E){let S,O,z,K,G,V,de,ee,be,Re,ve,Ce,Ge,re,Ne,qe;for(z=1;z<R;z++)T[z-1]=T[z];T[R-1]=0;let ct=0,ht=0,fn=Number.EPSILON;for(V=0;V<R;V++){for(ht=Math.max(ht,Math.abs(x[V])+Math.abs(T[V])),de=V;de<R&&!(Math.abs(T[de])<=fn*ht);)de++;if(de>V)do{for(S=x[V],ee=(x[V+1]-S)/(2*T[V]),be=An(ee,1),ee<0&&(be=-be),x[V]=T[V]/(ee+be),x[V+1]=T[V]*(ee+be),Re=x[V+1],O=S-x[V],z=V+2;z<R;z++)x[z]-=O;for(ct=ct+O,ee=x[de],ve=1,Ce=ve,Ge=ve,re=T[V+1],Ne=0,qe=0,z=de-1;z>=V;z--)for(Ge=Ce,Ce=ve,qe=Ne,S=ve*T[z],O=ve*ee,be=An(ee,T[z]),T[z+1]=Ne*be,Ne=T[z]/be,ve=ee/be,ee=ve*x[z]-Ne*S,x[z+1]=O+Ne*(ve*S+Ne*x[z]),G=0;G<R;G++)O=E.get(G,z+1),E.set(G,z+1,Ne*E.get(G,z)+ve*O),E.set(G,z,ve*E.get(G,z)-Ne*O);ee=-Ne*qe*Ge*re*T[V]/Re,T[V]=Ne*ee,x[V]=ve*ee}while(Math.abs(T[V])>fn*ht);x[V]=x[V]+ct,T[V]=0}for(z=0;z<R-1;z++){for(G=z,ee=x[z],K=z+1;K<R;K++)x[K]<ee&&(G=K,ee=x[K]);if(G!==z)for(x[G]=x[z],x[z]=ee,K=0;K<R;K++)ee=E.get(K,z),E.set(K,z,E.get(K,G)),E.set(K,G,ee)}}function wA(R,T,x,E){let S=0,O=R-1,z,K,G,V,de,ee,be;for(ee=S+1;ee<=O-1;ee++){for(be=0,V=ee;V<=O;V++)be=be+Math.abs(T.get(V,ee-1));if(be!==0){for(G=0,V=O;V>=ee;V--)x[V]=T.get(V,ee-1)/be,G+=x[V]*x[V];for(K=Math.sqrt(G),x[ee]>0&&(K=-K),G=G-x[ee]*K,x[ee]=x[ee]-K,de=ee;de<R;de++){for(z=0,V=O;V>=ee;V--)z+=x[V]*T.get(V,de);for(z=z/G,V=ee;V<=O;V++)T.set(V,de,T.get(V,de)-z*x[V])}for(V=0;V<=O;V++){for(z=0,de=O;de>=ee;de--)z+=x[de]*T.get(V,de);for(z=z/G,de=ee;de<=O;de++)T.set(V,de,T.get(V,de)-z*x[de])}x[ee]=be*x[ee],T.set(ee,ee-1,be*K)}}for(V=0;V<R;V++)for(de=0;de<R;de++)E.set(V,de,V===de?1:0);for(ee=O-1;ee>=S+1;ee--)if(T.get(ee,ee-1)!==0){for(V=ee+1;V<=O;V++)x[V]=T.get(V,ee-1);for(de=ee;de<=O;de++){for(K=0,V=ee;V<=O;V++)K+=x[V]*E.get(V,de);for(K=K/x[ee]/T.get(ee,ee-1),V=ee;V<=O;V++)E.set(V,de,E.get(V,de)+K*x[V])}}}function uo(R,T,x,E,S){let O=R-1,z=0,K=R-1,G=Number.EPSILON,V=0,de=0,ee=0,be=0,Re=0,ve=0,Ce=0,Ge=0,re,Ne,qe,ct,ht,fn,st,Ve,Zt,oe,Me,ze,Oe,cn,Ut;for(re=0;re<R;re++)for((re<z||re>K)&&(x[re]=S.get(re,re),T[re]=0),Ne=Math.max(re-1,0);Ne<R;Ne++)de=de+Math.abs(S.get(re,Ne));for(;O>=z;){for(ct=O;ct>z&&(ve=Math.abs(S.get(ct-1,ct-1))+Math.abs(S.get(ct,ct)),ve===0&&(ve=de),!(Math.abs(S.get(ct,ct-1))<G*ve));)ct--;if(ct===O)S.set(O,O,S.get(O,O)+V),x[O]=S.get(O,O),T[O]=0,O--,Ge=0;else if(ct===O-1){if(st=S.get(O,O-1)*S.get(O-1,O),ee=(S.get(O-1,O-1)-S.get(O,O))/2,be=ee*ee+st,Ce=Math.sqrt(Math.abs(be)),S.set(O,O,S.get(O,O)+V),S.set(O-1,O-1,S.get(O-1,O-1)+V),Ve=S.get(O,O),be>=0){for(Ce=ee>=0?ee+Ce:ee-Ce,x[O-1]=Ve+Ce,x[O]=x[O-1],Ce!==0&&(x[O]=Ve-st/Ce),T[O-1]=0,T[O]=0,Ve=S.get(O,O-1),ve=Math.abs(Ve)+Math.abs(Ce),ee=Ve/ve,be=Ce/ve,Re=Math.sqrt(ee*ee+be*be),ee=ee/Re,be=be/Re,Ne=O-1;Ne<R;Ne++)Ce=S.get(O-1,Ne),S.set(O-1,Ne,be*Ce+ee*S.get(O,Ne)),S.set(O,Ne,be*S.get(O,Ne)-ee*Ce);for(re=0;re<=O;re++)Ce=S.get(re,O-1),S.set(re,O-1,be*Ce+ee*S.get(re,O)),S.set(re,O,be*S.get(re,O)-ee*Ce);for(re=z;re<=K;re++)Ce=E.get(re,O-1),E.set(re,O-1,be*Ce+ee*E.get(re,O)),E.set(re,O,be*E.get(re,O)-ee*Ce)}else x[O-1]=Ve+ee,x[O]=Ve+ee,T[O-1]=Ce,T[O]=-Ce;O=O-2,Ge=0}else{if(Ve=S.get(O,O),Zt=0,st=0,ct<O&&(Zt=S.get(O-1,O-1),st=S.get(O,O-1)*S.get(O-1,O)),Ge===10){for(V+=Ve,re=z;re<=O;re++)S.set(re,re,S.get(re,re)-Ve);ve=Math.abs(S.get(O,O-1))+Math.abs(S.get(O-1,O-2)),Ve=Zt=.75*ve,st=-.4375*ve*ve}if(Ge===30&&(ve=(Zt-Ve)/2,ve=ve*ve+st,ve>0)){for(ve=Math.sqrt(ve),Zt<Ve&&(ve=-ve),ve=Ve-st/((Zt-Ve)/2+ve),re=z;re<=O;re++)S.set(re,re,S.get(re,re)-ve);V+=ve,Ve=Zt=st=.964}for(Ge=Ge+1,ht=O-2;ht>=ct&&(Ce=S.get(ht,ht),Re=Ve-Ce,ve=Zt-Ce,ee=(Re*ve-st)/S.get(ht+1,ht)+S.get(ht,ht+1),be=S.get(ht+1,ht+1)-Ce-Re-ve,Re=S.get(ht+2,ht+1),ve=Math.abs(ee)+Math.abs(be)+Math.abs(Re),ee=ee/ve,be=be/ve,Re=Re/ve,!(ht===ct||Math.abs(S.get(ht,ht-1))*(Math.abs(be)+Math.abs(Re))<G*(Math.abs(ee)*(Math.abs(S.get(ht-1,ht-1))+Math.abs(Ce)+Math.abs(S.get(ht+1,ht+1))))));)ht--;for(re=ht+2;re<=O;re++)S.set(re,re-2,0),re>ht+2&&S.set(re,re-3,0);for(qe=ht;qe<=O-1&&(cn=qe!==O-1,qe!==ht&&(ee=S.get(qe,qe-1),be=S.get(qe+1,qe-1),Re=cn?S.get(qe+2,qe-1):0,Ve=Math.abs(ee)+Math.abs(be)+Math.abs(Re),Ve!==0&&(ee=ee/Ve,be=be/Ve,Re=Re/Ve)),Ve!==0);qe++)if(ve=Math.sqrt(ee*ee+be*be+Re*Re),ee<0&&(ve=-ve),ve!==0){for(qe!==ht?S.set(qe,qe-1,-ve*Ve):ct!==ht&&S.set(qe,qe-1,-S.get(qe,qe-1)),ee=ee+ve,Ve=ee/ve,Zt=be/ve,Ce=Re/ve,be=be/ee,Re=Re/ee,Ne=qe;Ne<R;Ne++)ee=S.get(qe,Ne)+be*S.get(qe+1,Ne),cn&&(ee=ee+Re*S.get(qe+2,Ne),S.set(qe+2,Ne,S.get(qe+2,Ne)-ee*Ce)),S.set(qe,Ne,S.get(qe,Ne)-ee*Ve),S.set(qe+1,Ne,S.get(qe+1,Ne)-ee*Zt);for(re=0;re<=Math.min(O,qe+3);re++)ee=Ve*S.get(re,qe)+Zt*S.get(re,qe+1),cn&&(ee=ee+Ce*S.get(re,qe+2),S.set(re,qe+2,S.get(re,qe+2)-ee*Re)),S.set(re,qe,S.get(re,qe)-ee),S.set(re,qe+1,S.get(re,qe+1)-ee*be);for(re=z;re<=K;re++)ee=Ve*E.get(re,qe)+Zt*E.get(re,qe+1),cn&&(ee=ee+Ce*E.get(re,qe+2),E.set(re,qe+2,E.get(re,qe+2)-ee*Re)),E.set(re,qe,E.get(re,qe)-ee),E.set(re,qe+1,E.get(re,qe+1)-ee*be)}}}if(de!==0){for(O=R-1;O>=0;O--)if(ee=x[O],be=T[O],be===0)for(ct=O,S.set(O,O,1),re=O-1;re>=0;re--){for(st=S.get(re,re)-ee,Re=0,Ne=ct;Ne<=O;Ne++)Re=Re+S.get(re,Ne)*S.get(Ne,O);if(T[re]<0)Ce=st,ve=Re;else if(ct=re,T[re]===0?S.set(re,O,st!==0?-Re/st:-Re/(G*de)):(Ve=S.get(re,re+1),Zt=S.get(re+1,re),be=(x[re]-ee)*(x[re]-ee)+T[re]*T[re],fn=(Ve*ve-Ce*Re)/be,S.set(re,O,fn),S.set(re+1,O,Math.abs(Ve)>Math.abs(Ce)?(-Re-st*fn)/Ve:(-ve-Zt*fn)/Ce)),fn=Math.abs(S.get(re,O)),G*fn*fn>1)for(Ne=re;Ne<=O;Ne++)S.set(Ne,O,S.get(Ne,O)/fn)}else if(be<0)for(ct=O-1,Math.abs(S.get(O,O-1))>Math.abs(S.get(O-1,O))?(S.set(O-1,O-1,be/S.get(O,O-1)),S.set(O-1,O,-(S.get(O,O)-ee)/S.get(O,O-1))):(Ut=Gi(0,-S.get(O-1,O),S.get(O-1,O-1)-ee,be),S.set(O-1,O-1,Ut[0]),S.set(O-1,O,Ut[1])),S.set(O,O-1,0),S.set(O,O,1),re=O-2;re>=0;re--){for(oe=0,Me=0,Ne=ct;Ne<=O;Ne++)oe=oe+S.get(re,Ne)*S.get(Ne,O-1),Me=Me+S.get(re,Ne)*S.get(Ne,O);if(st=S.get(re,re)-ee,T[re]<0)Ce=st,Re=oe,ve=Me;else if(ct=re,T[re]===0?(Ut=Gi(-oe,-Me,st,be),S.set(re,O-1,Ut[0]),S.set(re,O,Ut[1])):(Ve=S.get(re,re+1),Zt=S.get(re+1,re),ze=(x[re]-ee)*(x[re]-ee)+T[re]*T[re]-be*be,Oe=(x[re]-ee)*2*be,ze===0&&Oe===0&&(ze=G*de*(Math.abs(st)+Math.abs(be)+Math.abs(Ve)+Math.abs(Zt)+Math.abs(Ce))),Ut=Gi(Ve*Re-Ce*oe+be*Me,Ve*ve-Ce*Me-be*oe,ze,Oe),S.set(re,O-1,Ut[0]),S.set(re,O,Ut[1]),Math.abs(Ve)>Math.abs(Ce)+Math.abs(be)?(S.set(re+1,O-1,(-oe-st*S.get(re,O-1)+be*S.get(re,O))/Ve),S.set(re+1,O,(-Me-st*S.get(re,O)-be*S.get(re,O-1))/Ve)):(Ut=Gi(-Re-Zt*S.get(re,O-1),-ve-Zt*S.get(re,O),Ce,be),S.set(re+1,O-1,Ut[0]),S.set(re+1,O,Ut[1]))),fn=Math.max(Math.abs(S.get(re,O-1)),Math.abs(S.get(re,O))),G*fn*fn>1)for(Ne=re;Ne<=O;Ne++)S.set(Ne,O-1,S.get(Ne,O-1)/fn),S.set(Ne,O,S.get(Ne,O)/fn)}for(re=0;re<R;re++)if(re<z||re>K)for(Ne=re;Ne<R;Ne++)E.set(re,Ne,S.get(re,Ne));for(Ne=R-1;Ne>=z;Ne--)for(re=z;re<=K;re++){for(Ce=0,qe=z;qe<=Math.min(Ne,K);qe++)Ce=Ce+E.get(re,qe)*S.get(qe,Ne);E.set(re,Ne,Ce)}}}function Gi(R,T,x,E){let S,O;return Math.abs(x)>Math.abs(E)?(S=E/x,O=x+S*E,[(R+S*T)/O,(T-S*R)/O]):(S=x/E,O=E+S*x,[(S*R+T)/O,(S*T-R)/O])}class ho{constructor(T){if(T=Gt.checkMatrix(T),!T.isSymmetric())throw new Error("Matrix is not symmetric");let x=T,E=x.rows,S=new $(E,E),O=!0,z,K,G;for(K=0;K<E;K++){let V=0;for(G=0;G<K;G++){let de=0;for(z=0;z<G;z++)de+=S.get(G,z)*S.get(K,z);de=(x.get(K,G)-de)/S.get(G,G),S.set(K,G,de),V=V+de*de}for(V=x.get(K,K)-V,O&&(O=V>0),S.set(K,K,Math.sqrt(Math.max(V,0))),G=K+1;G<E;G++)S.set(K,G,0)}this.L=S,this.positiveDefinite=O}isPositiveDefinite(){return this.positiveDefinite}solve(T){T=Gt.checkMatrix(T);let x=this.L,E=x.rows;if(T.rows!==E)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let S=T.columns,O=T.clone(),z,K,G;for(G=0;G<E;G++)for(K=0;K<S;K++){for(z=0;z<G;z++)O.set(G,K,O.get(G,K)-O.get(z,K)*x.get(G,z));O.set(G,K,O.get(G,K)/x.get(G,G))}for(G=E-1;G>=0;G--)for(K=0;K<S;K++){for(z=G+1;z<E;z++)O.set(G,K,O.get(G,K)-O.get(z,K)*x.get(z,G));O.set(G,K,O.get(G,K)/x.get(G,G))}return O}get lowerTriangularMatrix(){return this.L}}class Oa{constructor(T,x={}){T=Gt.checkMatrix(T);let{Y:E}=x;const{scaleScores:S=!1,maxIterations:O=1e3,terminationCriteria:z=1e-10}=x;let K;if(E){if(r.isAnyArray(E)&&typeof E[0]=="number"?E=$.columnVector(E):E=Gt.checkMatrix(E),E.rows!==T.rows)throw new Error("Y should have the same number of rows as X");K=E.getColumnVector(0)}else K=T.getColumnVector(0);let G=1,V,de,ee,be;for(let Re=0;Re<O&&G>z;Re++)ee=T.transpose().mmul(K).div(K.transpose().mmul(K).get(0,0)),ee=ee.div(ee.norm()),V=T.mmul(ee).div(ee.transpose().mmul(ee).get(0,0)),Re>0&&(G=V.clone().sub(be).pow(2).sum()),be=V.clone(),E?(de=E.transpose().mmul(V).div(V.transpose().mmul(V).get(0,0)),de=de.div(de.norm()),K=E.mmul(de).div(de.transpose().mmul(de).get(0,0))):K=V;if(E){let Re=T.transpose().mmul(V).div(V.transpose().mmul(V).get(0,0));Re=Re.div(Re.norm());let ve=T.clone().sub(V.clone().mmul(Re.transpose())),Ce=K.transpose().mmul(V).div(V.transpose().mmul(V).get(0,0)),Ge=E.clone().sub(V.clone().mulS(Ce.get(0,0)).mmul(de.transpose()));this.t=V,this.p=Re.transpose(),this.w=ee.transpose(),this.q=de,this.u=K,this.s=V.transpose().mmul(V),this.xResidual=ve,this.yResidual=Ge,this.betas=Ce}else this.w=ee.transpose(),this.s=V.transpose().mmul(V).sqrt(),S?this.t=V.clone().div(this.s.get(0,0)):this.t=V,this.xResidual=T.sub(V.mmul(ee.transpose()))}}return It.AbstractMatrix=ne,It.CHO=ho,It.CholeskyDecomposition=ho,It.DistanceMatrix=me,It.EVD=di,It.EigenvalueDecomposition=di,It.LU=Hn,It.LuDecomposition=Hn,It.Matrix=$,It.MatrixColumnSelectionView=Je,It.MatrixColumnView=He,It.MatrixFlipColumnView=Bt,It.MatrixFlipRowView=Lt,It.MatrixRowSelectionView=zt,It.MatrixRowView=kt,It.MatrixSelectionView=ot,It.MatrixSubView=Qt,It.MatrixTransposeView=Ct,It.NIPALS=Oa,It.Nipals=Oa,It.QR=Xt,It.QrDecomposition=Xt,It.SVD=ir,It.SingularValueDecomposition=ir,It.SymmetricMatrix=ue,It.WrapperMatrix1D=Rr,It.WrapperMatrix2D=Gt,It.correlation=Xr,It.covariance=Ls,It.default=$,It.determinant=vr,It.inverse=pr,It.linearDependencies=ln,It.pseudoInverse=Pa,It.solve=Qr,It.wrap=ui,It}var im=tse();const dP=Vc(im),Jo=im.Matrix,y6=im.SingularValueDecomposition;dP.Matrix?dP.Matrix:im.Matrix;const nse={center:[0,0],linkDistance:50};class w6{constructor(e={}){this.options=e,this.id="mds",this.options=Object.assign(Object.assign({},nse),e)}execute(e,t){return St(this,void 0,void 0,function*(){return this.genericMDSLayout(!1,e,t)})}assign(e,t){return St(this,void 0,void 0,function*(){yield this.genericMDSLayout(!0,e,t)})}genericMDSLayout(e,t,n){return St(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),n),{center:a=[0,0],linkDistance:s=50}=i,o=t.getAllNodes(),A=t.getAllEdges();if(!(o!=null&&o.length)||o.length===1)return Bl(t,e,a);const l=f6({nodes:o,edges:A}),c=h6(l);rse(c);const u=qie(c,s),h=ise(u),g=[];return h.forEach((v,m)=>{const w=ia(o[m]);w.data.x=v[0]+a[0],w.data.y=v[1]+a[1],g.push(w)}),e&&g.forEach(v=>t.mergeNodeData(v.id,{x:v.data.x,y:v.data.y})),{nodes:g,edges:A}})}}const rse=r=>{let e=-999999;r.forEach(t=>{t.forEach(n=>{n!==1/0&&e<n&&(e=n)})}),r.forEach((t,n)=>{t.forEach((i,a)=>{i===1/0&&(r[n][a]=e)})})},ise=r=>{const t=Jo.mul(Jo.pow(r,2),-.5),n=t.mean("row"),i=t.mean("column"),a=t.mean();t.add(a).subRowVector(n).subColumnVector(i);const s=new y6(t),o=Jo.sqrt(s.diagonalMatrix).diagonal();return s.leftSingularVectors.toJSON().map(A=>Jo.mul([A],[o]).toJSON()[0].splice(0,2))};function Nx(r){return!!r.tick&&!!r.stop}const ase={gForce:!0,force2:!0,d3force:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0},sse={center:[0,0],comboPadding:10,treeKey:"combo"};class ose{constructor(e={}){this.options=e,this.id="comboCombined",this.options=Object.assign(Object.assign({},sse),e)}execute(e,t){return St(this,void 0,void 0,function*(){return this.genericComboCombinedLayout(!1,e,t)})}assign(e,t){return St(this,void 0,void 0,function*(){yield this.genericComboCombinedLayout(!0,e,t)})}genericComboCombinedLayout(e,t,n){return St(this,void 0,void 0,function*(){const i=this.initVals(Object.assign(Object.assign({},this.options),n)),{center:a,treeKey:s,outerLayout:o}=i,A=t.getAllNodes().filter(P=>!P.data._isCombo),l=t.getAllNodes().filter(P=>P.data._isCombo),c=t.getAllEdges(),u=A==null?void 0:A.length;if(!u||u===1)return Bl(t,e,a);const h=[],g=new Map;A.forEach(P=>{g.set(P.id,P)});const p=new Map;l.forEach(P=>{p.set(P.id,P)});const v=new Map,m=this.getInnerGraphs(t,s,g,p,c,i,v);yield Promise.all(m);const w=new Map,b=[],_=new Map;let C=!0;t.getRoots(s).forEach(P=>{const N=v.get(P.id),D=p.get(P.id)||g.get(P.id),Q={id:P.id,data:Object.assign(Object.assign({},P.data),{x:N.data.x||D.data.x,y:N.data.y||D.data.y,fx:N.data.fx||D.data.fx,fy:N.data.fy||D.data.fy,mass:N.data.mass||D.data.mass,size:N.data.size})};b.push(Q),w.set(P.id,!0),!isNaN(Q.data.x)&&Q.data.x!==0&&!isNaN(Q.data.y)&&Q.data.y!==0?C=!1:(Q.data.x=Math.random()*100,Q.data.y=Math.random()*100),Ix(t,[P],H=>{H.id!==P.id&&_.set(H.id,P.id)},"TB",s)});const M=[];c.forEach(P=>{const N=_.get(P.source)||P.source,D=_.get(P.target)||P.target;N!==D&&w.has(N)&&w.has(D)&&M.push({id:P.id,source:N,target:D,data:{}})});let F;if(b!=null&&b.length){if(b.length===1)b[0].data.x=a[0],b[0].data.y=a[1];else{const P=new Sr({nodes:b,edges:M}),N=o||new m6;C&&ase[N.id]&&(yield(b.length<100?new w6:new Ox).assign(P));const D=Object.assign({center:a,kg:5,preventOverlap:!0,animate:!1},N.id==="force"?{gravity:1,factor:4,linkDistance:(Q,H,j)=>{const q=Math.max(...H.data.size)||32,J=Math.max(...j.data.size)||32;return q/2+J/2+200}}:{});F=yield hP(N,P,D)}v.forEach(P=>{var N;const D=F.nodes.find(j=>j.id===P.id);if(D){const{x:j,y:q}=D.data;P.data.visited=!0,P.data.x=j,P.data.y=q,h.push({id:P.id,data:{x:j,y:q}})}const{x:Q,y:H}=P.data;(N=P.data.nodes)===null||N===void 0||N.forEach(j=>{h.push({id:j.id,data:{x:j.data.x+Q,y:j.data.y+H}})})}),v.forEach(({data:P})=>{const{x:N,y:D,visited:Q,nodes:H}=P;H==null||H.forEach(j=>{if(!Q){const q=h.find(J=>J.id===j.id);q.data.x+=N||0,q.data.y+=D||0}})})}return e&&h.forEach(P=>{t.mergeNodeData(P.id,{x:P.data.x,y:P.data.y})}),{nodes:h,edges:c}})}initVals(e){const t=Object.assign({},e),{nodeSize:n,spacing:i,comboPadding:a}=e;let s,o;if(je(i)?o=()=>i:$e(i)?o=i:o=()=>0,t.spacing=o,!n)s=l=>{const c=o(l);return l.size?Xs(l.size)?((l.size[0]>l.size[1]?l.size[0]:l.size[1])+c)/2:nr(l.size)?((l.size.width>l.size.height?l.size.width:l.size.height)+c)/2:(l.size+c)/2:32+c/2};else if($e(n))s=l=>{const c=n(l),u=o(l);return Xs(l.size)?((l.size[0]>l.size[1]?l.size[0]:l.size[1])+u)/2:((c||32)+u)/2};else if(Xs(n)){const c=(n[0]>n[1]?n[0]:n[1])/2;s=u=>c+o(u)/2}else{const l=n/2;s=c=>l+o(c)/2}t.nodeSize=s;let A;return je(a)?A=()=>a:Xs(a)?A=()=>Math.max.apply(null,a):$e(a)?A=a:A=()=>0,t.comboPadding=A,t}getInnerGraphs(e,t,n,i,a,s,o){const{nodeSize:A,comboPadding:l,spacing:c,innerLayout:u}=s,h=u||new Ox({}),g={center:[0,0],preventOverlap:!0,nodeSpacing:c},p=[],v=m=>{let w=(l==null?void 0:l(m))||10;return Xs(w)&&(w=Math.max(...w)),{size:w?[w*2,w*2]:[30,30],padding:w}};return e.getRoots(t).forEach(m=>{o.set(m.id,{id:m.id,data:{nodes:[],size:v(m).size}});let w=Promise.resolve();Ix(e,[m],b=>{var _;if(!b.data._isCombo)return;const{size:C,padding:M}=v(b);if(!(!((_=e.getChildren(b.id,t))===null||_===void 0)&&_.length))o.set(b.id,{id:b.id,data:Object.assign(Object.assign({},b.data),{size:C})});else{const F=o.get(b.id);o.set(b.id,{id:b.id,data:Object.assign({nodes:[]},F==null?void 0:F.data)});const k=new Map,P=e.getChildren(b.id,t).map(Q=>{if(Q.data._isCombo)return o.has(Q.id)||o.set(Q.id,{id:Q.id,data:Object.assign({},Q.data)}),k.set(Q.id,!0),o.get(Q.id);const H=n.get(Q.id)||i.get(Q.id);return k.set(Q.id,!0),{id:Q.id,data:Object.assign(Object.assign({},H.data),Q.data)}}),N={nodes:P,edges:a.filter(Q=>k.has(Q.source)&&k.has(Q.target))};let D=1/0;P.forEach(Q=>{var H;let{size:j}=Q.data;j||(j=((H=o.get(Q.id))===null||H===void 0?void 0:H.data.size)||(A==null?void 0:A(Q))||[30,30]),je(j)&&(j=[j,j]);const[q,J]=j;D>q&&(D=q),D>J&&(D=J),Q.data.size=j}),w=w.then(()=>St(this,void 0,void 0,function*(){const Q=new Sr(N);yield hP(h,Q,g,!0);const{minX:H,minY:j,maxX:q,maxY:J}=Wie(P),ce={x:(q+H)/2,y:(J+j)/2};N.nodes.forEach(W=>{W.data.x-=ce.x,W.data.y-=ce.y});const se=[Math.max(q-H,D)+M*2,Math.max(J-j,D)+M*2];o.get(b.id).data.size=se,o.get(b.id).data.nodes=P}))}return!0},"BT",t),p.push(w)}),p}}function hP(r,e,t,n){var i;return St(this,void 0,void 0,function*(){return Nx(r)?(r.execute(e,t),r.stop(),r.tick((i=t.iterations)!==null&&i!==void 0?i:300)):n?yield r.assign(e,t):yield r.execute(e,t)})}function Ase(r,e){var t,n=1;r==null&&(r=0),e==null&&(e=0);function i(){var a,s=t.length,o,A=0,l=0;for(a=0;a<s;++a)o=t[a],A+=o.x,l+=o.y;for(A=(A/s-r)*n,l=(l/s-e)*n,a=0;a<s;++a)o=t[a],o.x-=A,o.y-=l}return i.initialize=function(a){t=a},i.x=function(a){return arguments.length?(r=+a,i):r},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(n=+a,i):n},i}function Br(r){return function(){return r}}function eA(r){return(r()-.5)*1e-6}function lse(r){return r.x+r.vx}function cse(r){return r.y+r.vy}function use(r){var e,t,n,i=1,a=1;typeof r!="function"&&(r=Br(r==null?1:+r));function s(){for(var l,c=e.length,u,h,g,p,v,m,w=0;w<a;++w)for(u=rm(e,lse,cse).visitAfter(o),l=0;l<c;++l)h=e[l],v=t[h.index],m=v*v,g=h.x+h.vx,p=h.y+h.vy,u.visit(b);function b(_,C,M,F,k){var P=_.data,N=_.r,D=v+N;if(P){if(P.index>h.index){var Q=g-P.x-P.vx,H=p-P.y-P.vy,j=Q*Q+H*H;j<D*D&&(Q===0&&(Q=eA(n),j+=Q*Q),H===0&&(H=eA(n),j+=H*H),j=(D-(j=Math.sqrt(j)))/j*i,h.vx+=(Q*=j)*(D=(N*=N)/(m+N)),h.vy+=(H*=j)*D,P.vx-=Q*(D=1-D),P.vy-=H*D)}return}return C>g+D||F<g-D||M>p+D||k<p-D}}function o(l){if(l.data)return l.r=t[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function A(){if(e){var l,c=e.length,u;for(t=new Array(c),l=0;l<c;++l)u=e[l],t[u.index]=+r(u,l,e)}}return s.initialize=function(l,c){e=l,n=c,A()},s.iterations=function(l){return arguments.length?(a=+l,s):a},s.strength=function(l){return arguments.length?(i=+l,s):i},s.radius=function(l){return arguments.length?(r=typeof l=="function"?l:Br(+l),A(),s):r},s}function dse(r){return r.index}function fP(r,e){var t=r.get(e);if(!t)throw new Error("node not found: "+e);return t}function hse(r){var e=dse,t=u,n,i=Br(30),a,s,o,A,l,c=1;r==null&&(r=[]);function u(m){return 1/Math.min(o[m.source.index],o[m.target.index])}function h(m){for(var w=0,b=r.length;w<c;++w)for(var _=0,C,M,F,k,P,N,D;_<b;++_)C=r[_],M=C.source,F=C.target,k=F.x+F.vx-M.x-M.vx||eA(l),P=F.y+F.vy-M.y-M.vy||eA(l),N=Math.sqrt(k*k+P*P),N=(N-a[_])/N*m*n[_],k*=N,P*=N,F.vx-=k*(D=A[_]),F.vy-=P*D,M.vx+=k*(D=1-D),M.vy+=P*D}function g(){if(s){var m,w=s.length,b=r.length,_=new Map(s.map((M,F)=>[e(M,F,s),M])),C;for(m=0,o=new Array(w);m<b;++m)C=r[m],C.index=m,typeof C.source!="object"&&(C.source=fP(_,C.source)),typeof C.target!="object"&&(C.target=fP(_,C.target)),o[C.source.index]=(o[C.source.index]||0)+1,o[C.target.index]=(o[C.target.index]||0)+1;for(m=0,A=new Array(b);m<b;++m)C=r[m],A[m]=o[C.source.index]/(o[C.source.index]+o[C.target.index]);n=new Array(b),p(),a=new Array(b),v()}}function p(){if(s)for(var m=0,w=r.length;m<w;++m)n[m]=+t(r[m],m,r)}function v(){if(s)for(var m=0,w=r.length;m<w;++m)a[m]=+i(r[m],m,r)}return h.initialize=function(m,w){s=m,l=w,g()},h.links=function(m){return arguments.length?(r=m,g(),h):r},h.id=function(m){return arguments.length?(e=m,h):e},h.iterations=function(m){return arguments.length?(c=+m,h):c},h.strength=function(m){return arguments.length?(t=typeof m=="function"?m:Br(+m),p(),h):t},h.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Br(+m),v(),h):i},h}var fse={value:()=>{}};function b6(){for(var r=0,e=arguments.length,t={},n;r<e;++r){if(!(n=arguments[r]+"")||n in t||/[\s.]/.test(n))throw new Error("illegal type: "+n);t[n]=[]}return new dp(t)}function dp(r){this._=r}function gse(r,e){return r.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}dp.prototype=b6.prototype={constructor:dp,on:function(r,e){var t=this._,n=gse(r+"",t),i,a=-1,s=n.length;if(arguments.length<2){for(;++a<s;)if((i=(r=n[a]).type)&&(i=pse(t[i],r.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(r=n[a]).type)t[i]=gP(t[i],r.name,e);else if(e==null)for(i in t)t[i]=gP(t[i],r.name,null);return this},copy:function(){var r={},e=this._;for(var t in e)r[t]=e[t].slice();return new dp(r)},call:function(r,e){if((i=arguments.length-2)>0)for(var t=new Array(i),n=0,i,a;n<i;++n)t[n]=arguments[n+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(a=this._[r],n=0,i=a.length;n<i;++n)a[n].value.apply(e,t)},apply:function(r,e,t){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],i=0,a=n.length;i<a;++i)n[i].value.apply(e,t)}};function pse(r,e){for(var t=0,n=r.length,i;t<n;++t)if((i=r[t]).name===e)return i.value}function gP(r,e,t){for(var n=0,i=r.length;n<i;++n)if(r[n].name===e){r[n]=fse,r=r.slice(0,n).concat(r.slice(n+1));break}return t!=null&&r.push({name:e,value:t}),r}var jc=0,hd=0,Ju=0,_6=1e3,rv,fd,iv=0,ml=0,am=0,Zd=typeof performance=="object"&&performance.now?performance:Date,E6=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function C6(){return ml||(E6(vse),ml=Zd.now()+am)}function vse(){ml=0}function Dx(){this._call=this._time=this._next=null}Dx.prototype=B6.prototype={constructor:Dx,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?C6():+t)+(e==null?0:+e),!this._next&&fd!==this&&(fd?fd._next=this:rv=this,fd=this),this._call=r,this._time=t,Rx()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rx())}};function B6(r,e,t){var n=new Dx;return n.restart(r,e,t),n}function mse(){C6(),++jc;for(var r=rv,e;r;)(e=ml-r._time)>=0&&r._call.call(void 0,e),r=r._next;--jc}function pP(){ml=(iv=Zd.now())+am,jc=hd=0;try{mse()}finally{jc=0,wse(),ml=0}}function yse(){var r=Zd.now(),e=r-iv;e>_6&&(am-=e,iv=r)}function wse(){for(var r,e=rv,t,n=1/0;e;)e._call?(n>e._time&&(n=e._time),r=e,e=e._next):(t=e._next,e._next=null,e=r?r._next=t:rv=t);fd=r,Rx(n)}function Rx(r){if(!jc){hd&&(hd=clearTimeout(hd));var e=r-ml;e>24?(r<1/0&&(hd=setTimeout(pP,r-Zd.now()-am)),Ju&&(Ju=clearInterval(Ju))):(Ju||(iv=Zd.now(),Ju=setInterval(yse,_6)),jc=1,E6(pP))}}const bse=1664525,_se=1013904223,vP=4294967296;function Ese(){let r=1;return()=>(r=(bse*r+_se)%vP)/vP}function Cse(r){return r.x}function Bse(r){return r.y}var xse=10,Sse=Math.PI*(3-Math.sqrt(5));function Tse(r){var e,t=1,n=.001,i=1-Math.pow(n,1/300),a=0,s=.6,o=new Map,A=B6(u),l=b6("tick","end"),c=Ese();r==null&&(r=[]);function u(){h(),l.call("tick",e),t<n&&(A.stop(),l.call("end",e))}function h(v){var m,w=r.length,b;v===void 0&&(v=1);for(var _=0;_<v;++_)for(t+=(a-t)*i,o.forEach(function(C){C(t)}),m=0;m<w;++m)b=r[m],b.fx==null?b.x+=b.vx*=s:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=s:(b.y=b.fy,b.vy=0);return e}function g(){for(var v=0,m=r.length,w;v<m;++v){if(w=r[v],w.index=v,w.fx!=null&&(w.x=w.fx),w.fy!=null&&(w.y=w.fy),isNaN(w.x)||isNaN(w.y)){var b=xse*Math.sqrt(.5+v),_=v*Sse;w.x=b*Math.cos(_),w.y=b*Math.sin(_)}(isNaN(w.vx)||isNaN(w.vy))&&(w.vx=w.vy=0)}}function p(v){return v.initialize&&v.initialize(r,c),v}return g(),e={tick:h,restart:function(){return A.restart(u),e},stop:function(){return A.stop(),e},nodes:function(v){return arguments.length?(r=v,g(),o.forEach(p),e):r},alpha:function(v){return arguments.length?(t=+v,e):t},alphaMin:function(v){return arguments.length?(n=+v,e):n},alphaDecay:function(v){return arguments.length?(i=+v,e):+i},alphaTarget:function(v){return arguments.length?(a=+v,e):a},velocityDecay:function(v){return arguments.length?(s=1-v,e):1-s},randomSource:function(v){return arguments.length?(c=v,o.forEach(p),e):c},force:function(v,m){return arguments.length>1?(m==null?o.delete(v):o.set(v,p(m)),e):o.get(v)},find:function(v,m,w){var b=0,_=r.length,C,M,F,k,P;for(w==null?w=1/0:w*=w,b=0;b<_;++b)k=r[b],C=v-k.x,M=m-k.y,F=C*C+M*M,F<w&&(P=k,w=F);return P},on:function(v,m){return arguments.length>1?(l.on(v,m),e):l.on(v)}}}function Mse(){var r,e,t,n,i=Br(-30),a,s=1,o=1/0,A=.81;function l(g){var p,v=r.length,m=rm(r,Cse,Bse).visitAfter(u);for(n=g,p=0;p<v;++p)e=r[p],m.visit(h)}function c(){if(r){var g,p=r.length,v;for(a=new Array(p),g=0;g<p;++g)v=r[g],a[v.index]=+i(v,g,r)}}function u(g){var p=0,v,m,w=0,b,_,C;if(g.length){for(b=_=C=0;C<4;++C)(v=g[C])&&(m=Math.abs(v.value))&&(p+=v.value,w+=m,b+=m*v.x,_+=m*v.y);g.x=b/w,g.y=_/w}else{v=g,v.x=v.data.x,v.y=v.data.y;do p+=a[v.data.index];while(v=v.next)}g.value=p}function h(g,p,v,m){if(!g.value)return!0;var w=g.x-e.x,b=g.y-e.y,_=m-p,C=w*w+b*b;if(_*_/A<C)return C<o&&(w===0&&(w=eA(t),C+=w*w),b===0&&(b=eA(t),C+=b*b),C<s&&(C=Math.sqrt(s*C)),e.vx+=w*g.value*n/C,e.vy+=b*g.value*n/C),!0;if(g.length||C>=o)return;(g.data!==e||g.next)&&(w===0&&(w=eA(t),C+=w*w),b===0&&(b=eA(t),C+=b*b),C<s&&(C=Math.sqrt(s*C)));do g.data!==e&&(_=a[g.data.index]*n/C,e.vx+=w*_,e.vy+=b*_);while(g=g.next)}return l.initialize=function(g,p){r=g,t=p,c()},l.strength=function(g){return arguments.length?(i=typeof g=="function"?g:Br(+g),c(),l):i},l.distanceMin=function(g){return arguments.length?(s=g*g,l):Math.sqrt(s)},l.distanceMax=function(g){return arguments.length?(o=g*g,l):Math.sqrt(o)},l.theta=function(g){return arguments.length?(A=g*g,l):Math.sqrt(A)},l}function Fse(r,e,t){var n,i=Br(.1),a,s;typeof r!="function"&&(r=Br(+r)),e==null&&(e=0),t==null&&(t=0);function o(l){for(var c=0,u=n.length;c<u;++c){var h=n[c],g=h.x-e||1e-6,p=h.y-t||1e-6,v=Math.sqrt(g*g+p*p),m=(s[c]-v)*a[c]*l/v;h.vx+=g*m,h.vy+=p*m}}function A(){if(n){var l,c=n.length;for(a=new Array(c),s=new Array(c),l=0;l<c;++l)s[l]=+r(n[l],l,n),a[l]=isNaN(s[l])?0:+i(n[l],l,n)}}return o.initialize=function(l){n=l,A()},o.strength=function(l){return arguments.length?(i=typeof l=="function"?l:Br(+l),A(),o):i},o.radius=function(l){return arguments.length?(r=typeof l=="function"?l:Br(+l),A(),o):r},o.x=function(l){return arguments.length?(e=+l,o):e},o.y=function(l){return arguments.length?(t=+l,o):t},o}function kse(r){var e=Br(.1),t,n,i;typeof r!="function"&&(r=Br(r==null?0:+r));function a(o){for(var A=0,l=t.length,c;A<l;++A)c=t[A],c.vx+=(i[A]-c.x)*n[A]*o}function s(){if(t){var o,A=t.length;for(n=new Array(A),i=new Array(A),o=0;o<A;++o)n[o]=isNaN(i[o]=+r(t[o],o,t))?0:+e(t[o],o,t)}}return a.initialize=function(o){t=o,s()},a.strength=function(o){return arguments.length?(e=typeof o=="function"?o:Br(+o),s(),a):e},a.x=function(o){return arguments.length?(r=typeof o=="function"?o:Br(+o),s(),a):r},a}function Ise(r){var e=Br(.1),t,n,i;typeof r!="function"&&(r=Br(r==null?0:+r));function a(o){for(var A=0,l=t.length,c;A<l;++A)c=t[A],c.vy+=(i[A]-c.y)*n[A]*o}function s(){if(t){var o,A=t.length;for(n=new Array(A),i=new Array(A),o=0;o<A;++o)n[o]=isNaN(i[o]=+r(t[o],o,t))?0:+e(t[o],o,t)}}return a.initialize=function(o){t=o,s()},a.strength=function(o){return arguments.length?(e=typeof o=="function"?o:Br(+o),s(),a):e},a.y=function(o){return arguments.length?(r=typeof o=="function"?o:Br(+o),s(),a):r},a}class Pse{constructor(e){this.id="d3-force",this.config={inputNodeAttrs:["x","y","vx","vy","fx","fy"],outputNodeAttrs:["x","y","vx","vy"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource"]},this.forceMap={link:hse,manyBody:Mse,center:Ase,collide:use,radial:Fse,x:kse,y:Ise},this.options={link:{id:t=>t.id},manyBody:{},center:{x:0,y:0}},this.context={options:{},assign:!1,nodes:[],edges:[]},qr(this.options,e),this.options.forceSimulation&&(this.simulation=this.options.forceSimulation)}execute(e,t){return St(this,void 0,void 0,function*(){return this.genericLayout(!1,e,t)})}assign(e,t){return St(this,void 0,void 0,function*(){yield this.genericLayout(!0,e,t)})}stop(){this.simulation.stop()}tick(e){return this.simulation.tick(e),this.getResult()}restart(){this.simulation.restart()}setFixedPosition(e,t){const n=this.context.nodes.find(i=>i.id===e);n&&t.forEach((i,a)=>{if(typeof i=="number"||i===null){const s=["fx","fy","fz"][a];n[s]=i}})}getOptions(e){var t,n;const i=qr({},this.options,e);return i.collide&&((t=i.collide)===null||t===void 0?void 0:t.radius)===void 0&&(i.collide=i.collide||{},i.collide.radius=(n=i.nodeSize)!==null&&n!==void 0?n:10),i.iterations===void 0&&(i.link&&i.link.iterations===void 0&&(i.iterations=i.link.iterations),i.collide&&i.collide.iterations===void 0&&(i.iterations=i.collide.iterations)),this.context.options=i,i}genericLayout(e,t,n){var i;return St(this,void 0,void 0,function*(){const a=this.getOptions(n),s=t.getAllNodes().map(({id:c,data:u})=>Object.assign(Object.assign({id:c},u),cl(u.data,this.config.inputNodeAttrs))),o=t.getAllEdges().map(c=>Object.assign({},c));Object.assign(this.context,{assign:e,nodes:s,edges:o,graph:t});const A=new Promise(c=>{this.resolver=c}),l=this.setSimulation(a);return l.nodes(s),(i=l.force("link"))===null||i===void 0||i.links(o),A})}getResult(){const{assign:e,nodes:t,edges:n,graph:i}=this.context,a=t.map(o=>({id:o.id,data:Object.assign(Object.assign({},o.data),cl(o,this.config.outputNodeAttrs))})),s=n.map(({id:o,source:A,target:l,data:c})=>({id:o,source:typeof A=="object"?A.id:A,target:typeof l=="object"?l.id:l,data:c}));return e&&a.forEach(o=>i.mergeNodeData(o.id,o.data)),{nodes:a,edges:s}}initSimulation(){return Tse()}setSimulation(e){const t=this.simulation||this.options.forceSimulation||this.initSimulation();return this.simulation||(this.simulation=t.on("tick",()=>{var n;return(n=e.onTick)===null||n===void 0?void 0:n.call(e,this.getResult())}).on("end",()=>{var n;return(n=this.resolver)===null||n===void 0?void 0:n.call(this,this.getResult())})),mP(t,this.config.simulationAttrs.map(n=>[n,e[n]])),Object.entries(this.forceMap).forEach(([n,i])=>{const a=n;if(e[n]){let s=t.force(a);s||(s=i(),t.force(a,s)),mP(s,Object.entries(e[a]))}else t.force(a,null)}),t}}const mP=(r,e)=>e.reduce((t,[n,i])=>!t[n]||i===void 0?t:t[n].call(r,i),r);function Z2(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var G1,yP;function Ose(){if(yP)return G1;yP=1;function r(){this.__data__=[],this.size=0}return G1=r,G1}var V1,wP;function Yc(){if(wP)return V1;wP=1;function r(e,t){return e===t||e!==e&&t!==t}return V1=r,V1}var q1,bP;function sm(){if(bP)return q1;bP=1;var r=Yc();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return q1=e,q1}var W1,_P;function Lse(){if(_P)return W1;_P=1;var r=sm(),e=Array.prototype,t=e.splice;function n(i){var a=this.__data__,s=r(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():t.call(a,s,1),--this.size,!0}return W1=n,W1}var $1,EP;function Nse(){if(EP)return $1;EP=1;var r=sm();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return $1=e,$1}var Y1,CP;function Dse(){if(CP)return Y1;CP=1;var r=sm();function e(t){return r(this.__data__,t)>-1}return Y1=e,Y1}var X1,BP;function Rse(){if(BP)return X1;BP=1;var r=sm();function e(t,n){var i=this.__data__,a=r(i,t);return a<0?(++this.size,i.push([t,n])):i[a][1]=n,this}return X1=e,X1}var Z1,xP;function om(){if(xP)return Z1;xP=1;var r=Ose(),e=Lse(),t=Nse(),n=Dse(),i=Rse();function a(s){var o=-1,A=s==null?0:s.length;for(this.clear();++o<A;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,Z1=a,Z1}var J1,SP;function Qse(){if(SP)return J1;SP=1;var r=om();function e(){this.__data__=new r,this.size=0}return J1=e,J1}var ew,TP;function Use(){if(TP)return ew;TP=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return ew=r,ew}var tw,MP;function Hse(){if(MP)return tw;MP=1;function r(e){return this.__data__.get(e)}return tw=r,tw}var nw,FP;function zse(){if(FP)return nw;FP=1;function r(e){return this.__data__.has(e)}return nw=r,nw}var rw,kP;function x6(){if(kP)return rw;kP=1;var r=typeof kf=="object"&&kf&&kf.Object===Object&&kf;return rw=r,rw}var iw,IP;function is(){if(IP)return iw;IP=1;var r=x6(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return iw=t,iw}var aw,PP;function Xc(){if(PP)return aw;PP=1;var r=is(),e=r.Symbol;return aw=e,aw}var sw,OP;function jse(){if(OP)return sw;OP=1;var r=Xc(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function a(s){var o=t.call(s,i),A=s[i];try{s[i]=void 0;var l=!0}catch{}var c=n.call(s);return l&&(o?s[i]=A:delete s[i]),c}return sw=a,sw}var ow,LP;function Kse(){if(LP)return ow;LP=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return ow=t,ow}var Aw,NP;function xl(){if(NP)return Aw;NP=1;var r=Xc(),e=jse(),t=Kse(),n="[object Null]",i="[object Undefined]",a=r?r.toStringTag:void 0;function s(o){return o==null?o===void 0?i:n:a&&a in Object(o)?e(o):t(o)}return Aw=s,Aw}var lw,DP;function ka(){if(DP)return lw;DP=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return lw=r,lw}var cw,RP;function wh(){if(RP)return cw;RP=1;var r=xl(),e=ka(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!e(o))return!1;var A=r(o);return A==n||A==i||A==t||A==a}return cw=s,cw}var uw,QP;function Gse(){if(QP)return uw;QP=1;var r=is(),e=r["__core-js_shared__"];return uw=e,uw}var dw,UP;function Vse(){if(UP)return dw;UP=1;var r=Gse(),e=(function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function t(n){return!!e&&e in n}return dw=t,dw}var hw,HP;function S6(){if(HP)return hw;HP=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return hw=t,hw}var fw,zP;function qse(){if(zP)return fw;zP=1;var r=wh(),e=Vse(),t=ka(),n=S6(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,A=s.toString,l=o.hasOwnProperty,c=RegExp("^"+A.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function u(h){if(!t(h)||e(h))return!1;var g=r(h)?c:a;return g.test(n(h))}return fw=u,fw}var gw,jP;function Wse(){if(jP)return gw;jP=1;function r(e,t){return e==null?void 0:e[t]}return gw=r,gw}var pw,KP;function Sl(){if(KP)return pw;KP=1;var r=qse(),e=Wse();function t(n,i){var a=e(n,i);return r(a)?a:void 0}return pw=t,pw}var vw,GP;function J2(){if(GP)return vw;GP=1;var r=Sl(),e=is(),t=r(e,"Map");return vw=t,vw}var mw,VP;function Am(){if(VP)return mw;VP=1;var r=Sl(),e=r(Object,"create");return mw=e,mw}var yw,qP;function $se(){if(qP)return yw;qP=1;var r=Am();function e(){this.__data__=r?r(null):{},this.size=0}return yw=e,yw}var ww,WP;function Yse(){if(WP)return ww;WP=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return ww=r,ww}var bw,$P;function Xse(){if($P)return bw;$P=1;var r=Am(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(a){var s=this.__data__;if(r){var o=s[a];return o===e?void 0:o}return n.call(s,a)?s[a]:void 0}return bw=i,bw}var _w,YP;function Zse(){if(YP)return _w;YP=1;var r=Am(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var a=this.__data__;return r?a[i]!==void 0:t.call(a,i)}return _w=n,_w}var Ew,XP;function Jse(){if(XP)return Ew;XP=1;var r=Am(),e="__lodash_hash_undefined__";function t(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=r&&i===void 0?e:i,this}return Ew=t,Ew}var Cw,ZP;function eoe(){if(ZP)return Cw;ZP=1;var r=$se(),e=Yse(),t=Xse(),n=Zse(),i=Jse();function a(s){var o=-1,A=s==null?0:s.length;for(this.clear();++o<A;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,Cw=a,Cw}var Bw,JP;function toe(){if(JP)return Bw;JP=1;var r=eoe(),e=om(),t=J2();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return Bw=n,Bw}var xw,eO;function noe(){if(eO)return xw;eO=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return xw=r,xw}var Sw,tO;function lm(){if(tO)return Sw;tO=1;var r=noe();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return Sw=e,Sw}var Tw,nO;function roe(){if(nO)return Tw;nO=1;var r=lm();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return Tw=e,Tw}var Mw,rO;function ioe(){if(rO)return Mw;rO=1;var r=lm();function e(t){return r(this,t).get(t)}return Mw=e,Mw}var Fw,iO;function aoe(){if(iO)return Fw;iO=1;var r=lm();function e(t){return r(this,t).has(t)}return Fw=e,Fw}var kw,aO;function soe(){if(aO)return kw;aO=1;var r=lm();function e(t,n){var i=r(this,t),a=i.size;return i.set(t,n),this.size+=i.size==a?0:1,this}return kw=e,kw}var Iw,sO;function eS(){if(sO)return Iw;sO=1;var r=toe(),e=roe(),t=ioe(),n=aoe(),i=soe();function a(s){var o=-1,A=s==null?0:s.length;for(this.clear();++o<A;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,Iw=a,Iw}var Pw,oO;function ooe(){if(oO)return Pw;oO=1;var r=om(),e=J2(),t=eS(),n=200;function i(a,s){var o=this.__data__;if(o instanceof r){var A=o.__data__;if(!e||A.length<n-1)return A.push([a,s]),this.size=++o.size,this;o=this.__data__=new t(A)}return o.set(a,s),this.size=o.size,this}return Pw=i,Pw}var Ow,AO;function cm(){if(AO)return Ow;AO=1;var r=om(),e=Qse(),t=Use(),n=Hse(),i=zse(),a=ooe();function s(o){var A=this.__data__=new r(o);this.size=A.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,Ow=s,Ow}var Lw,lO;function tS(){if(lO)return Lw;lO=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}return Lw=r,Lw}var Nw,cO;function T6(){if(cO)return Nw;cO=1;var r=Sl(),e=(function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}})();return Nw=e,Nw}var Dw,uO;function um(){if(uO)return Dw;uO=1;var r=T6();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return Dw=e,Dw}var Rw,dO;function dm(){if(dO)return Rw;dO=1;var r=um(),e=Yc(),t=Object.prototype,n=t.hasOwnProperty;function i(a,s,o){var A=a[s];(!(n.call(a,s)&&e(A,o))||o===void 0&&!(s in a))&&r(a,s,o)}return Rw=i,Rw}var Qw,hO;function bh(){if(hO)return Qw;hO=1;var r=dm(),e=um();function t(n,i,a,s){var o=!a;a||(a={});for(var A=-1,l=i.length;++A<l;){var c=i[A],u=s?s(a[c],n[c],c,a,n):void 0;u===void 0&&(u=n[c]),o?e(a,c,u):r(a,c,u)}return a}return Qw=t,Qw}var Uw,fO;function Aoe(){if(fO)return Uw;fO=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return Uw=r,Uw}var Hw,gO;function Os(){if(gO)return Hw;gO=1;function r(e){return e!=null&&typeof e=="object"}return Hw=r,Hw}var zw,pO;function loe(){if(pO)return zw;pO=1;var r=xl(),e=Os(),t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return zw=n,zw}var jw,vO;function _h(){if(vO)return jw;vO=1;var r=loe(),e=Os(),t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,a=r((function(){return arguments})())?r:function(s){return e(s)&&n.call(s,"callee")&&!i.call(s,"callee")};return jw=a,jw}var Kw,mO;function gr(){if(mO)return Kw;mO=1;var r=Array.isArray;return Kw=r,Kw}var gd={exports:{}},Gw,yO;function coe(){if(yO)return Gw;yO=1;function r(){return!1}return Gw=r,Gw}gd.exports;var wO;function Zc(){return wO||(wO=1,(function(r,e){var t=is(),n=coe(),i=e&&!e.nodeType&&e,a=i&&!0&&r&&!r.nodeType&&r,s=a&&a.exports===i,o=s?t.Buffer:void 0,A=o?o.isBuffer:void 0,l=A||n;r.exports=l})(gd,gd.exports)),gd.exports}var Vw,bO;function hm(){if(bO)return Vw;bO=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var a=typeof n;return i=i??r,!!i&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return Vw=t,Vw}var qw,_O;function nS(){if(_O)return qw;_O=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return qw=e,qw}var Ww,EO;function uoe(){if(EO)return Ww;EO=1;var r=xl(),e=nS(),t=Os(),n="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",A="[object Function]",l="[object Map]",c="[object Number]",u="[object Object]",h="[object RegExp]",g="[object Set]",p="[object String]",v="[object WeakMap]",m="[object ArrayBuffer]",w="[object DataView]",b="[object Float32Array]",_="[object Float64Array]",C="[object Int8Array]",M="[object Int16Array]",F="[object Int32Array]",k="[object Uint8Array]",P="[object Uint8ClampedArray]",N="[object Uint16Array]",D="[object Uint32Array]",Q={};Q[b]=Q[_]=Q[C]=Q[M]=Q[F]=Q[k]=Q[P]=Q[N]=Q[D]=!0,Q[n]=Q[i]=Q[m]=Q[a]=Q[w]=Q[s]=Q[o]=Q[A]=Q[l]=Q[c]=Q[u]=Q[h]=Q[g]=Q[p]=Q[v]=!1;function H(j){return t(j)&&e(j.length)&&!!Q[r(j)]}return Ww=H,Ww}var $w,CO;function fm(){if(CO)return $w;CO=1;function r(e){return function(t){return e(t)}}return $w=r,$w}var pd={exports:{}};pd.exports;var BO;function rS(){return BO||(BO=1,(function(r,e){var t=x6(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,a=i&&i.exports===n,s=a&&t.process,o=(function(){try{var A=i&&i.require&&i.require("util").types;return A||s&&s.binding&&s.binding("util")}catch{}})();r.exports=o})(pd,pd.exports)),pd.exports}var Yw,xO;function Eh(){if(xO)return Yw;xO=1;var r=uoe(),e=fm(),t=rS(),n=t&&t.isTypedArray,i=n?e(n):r;return Yw=i,Yw}var Xw,SO;function M6(){if(SO)return Xw;SO=1;var r=Aoe(),e=_h(),t=gr(),n=Zc(),i=hm(),a=Eh(),s=Object.prototype,o=s.hasOwnProperty;function A(l,c){var u=t(l),h=!u&&e(l),g=!u&&!h&&n(l),p=!u&&!h&&!g&&a(l),v=u||h||g||p,m=v?r(l.length,String):[],w=m.length;for(var b in l)(c||o.call(l,b))&&!(v&&(b=="length"||g&&(b=="offset"||b=="parent")||p&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||i(b,w)))&&m.push(b);return m}return Xw=A,Xw}var Zw,TO;function gm(){if(TO)return Zw;TO=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return Zw=e,Zw}var Jw,MO;function F6(){if(MO)return Jw;MO=1;function r(e,t){return function(n){return e(t(n))}}return Jw=r,Jw}var eb,FO;function doe(){if(FO)return eb;FO=1;var r=F6(),e=r(Object.keys,Object);return eb=e,eb}var tb,kO;function iS(){if(kO)return tb;kO=1;var r=gm(),e=doe(),t=Object.prototype,n=t.hasOwnProperty;function i(a){if(!r(a))return e(a);var s=[];for(var o in Object(a))n.call(a,o)&&o!="constructor"&&s.push(o);return s}return tb=i,tb}var nb,IO;function Ao(){if(IO)return nb;IO=1;var r=wh(),e=nS();function t(n){return n!=null&&e(n.length)&&!r(n)}return nb=t,nb}var rb,PO;function mA(){if(PO)return rb;PO=1;var r=M6(),e=iS(),t=Ao();function n(i){return t(i)?r(i):e(i)}return rb=n,rb}var ib,OO;function hoe(){if(OO)return ib;OO=1;var r=bh(),e=mA();function t(n,i){return n&&r(i,e(i),n)}return ib=t,ib}var ab,LO;function foe(){if(LO)return ab;LO=1;function r(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}return ab=r,ab}var sb,NO;function goe(){if(NO)return sb;NO=1;var r=ka(),e=gm(),t=foe(),n=Object.prototype,i=n.hasOwnProperty;function a(s){if(!r(s))return t(s);var o=e(s),A=[];for(var l in s)l=="constructor"&&(o||!i.call(s,l))||A.push(l);return A}return sb=a,sb}var ob,DO;function Tl(){if(DO)return ob;DO=1;var r=M6(),e=goe(),t=Ao();function n(i){return t(i)?r(i,!0):e(i)}return ob=n,ob}var Ab,RO;function poe(){if(RO)return Ab;RO=1;var r=bh(),e=Tl();function t(n,i){return n&&r(i,e(i),n)}return Ab=t,Ab}var vd={exports:{}};vd.exports;var QO;function k6(){return QO||(QO=1,(function(r,e){var t=is(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,a=i&&i.exports===n,s=a?t.Buffer:void 0,o=s?s.allocUnsafe:void 0;function A(l,c){if(c)return l.slice();var u=l.length,h=o?o(u):new l.constructor(u);return l.copy(h),h}r.exports=A})(vd,vd.exports)),vd.exports}var lb,UO;function I6(){if(UO)return lb;UO=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return lb=r,lb}var cb,HO;function P6(){if(HO)return cb;HO=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,a=0,s=[];++n<i;){var o=e[n];t(o,n,e)&&(s[a++]=o)}return s}return cb=r,cb}var ub,zO;function O6(){if(zO)return ub;zO=1;function r(){return[]}return ub=r,ub}var db,jO;function aS(){if(jO)return db;jO=1;var r=P6(),e=O6(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),r(i(s),function(o){return n.call(s,o)}))}:e;return db=a,db}var hb,KO;function voe(){if(KO)return hb;KO=1;var r=bh(),e=aS();function t(n,i){return r(n,e(n),i)}return hb=t,hb}var fb,GO;function sS(){if(GO)return fb;GO=1;function r(e,t){for(var n=-1,i=t.length,a=e.length;++n<i;)e[a+n]=t[n];return e}return fb=r,fb}var gb,VO;function pm(){if(VO)return gb;VO=1;var r=F6(),e=r(Object.getPrototypeOf,Object);return gb=e,gb}var pb,qO;function L6(){if(qO)return pb;qO=1;var r=sS(),e=pm(),t=aS(),n=O6(),i=Object.getOwnPropertySymbols,a=i?function(s){for(var o=[];s;)r(o,t(s)),s=e(s);return o}:n;return pb=a,pb}var vb,WO;function moe(){if(WO)return vb;WO=1;var r=bh(),e=L6();function t(n,i){return r(n,e(n),i)}return vb=t,vb}var mb,$O;function N6(){if($O)return mb;$O=1;var r=sS(),e=gr();function t(n,i,a){var s=i(n);return e(n)?s:r(s,a(n))}return mb=t,mb}var yb,YO;function D6(){if(YO)return yb;YO=1;var r=N6(),e=aS(),t=mA();function n(i){return r(i,t,e)}return yb=n,yb}var wb,XO;function yoe(){if(XO)return wb;XO=1;var r=N6(),e=L6(),t=Tl();function n(i){return r(i,t,e)}return wb=n,wb}var bb,ZO;function woe(){if(ZO)return bb;ZO=1;var r=Sl(),e=is(),t=r(e,"DataView");return bb=t,bb}var _b,JO;function boe(){if(JO)return _b;JO=1;var r=Sl(),e=is(),t=r(e,"Promise");return _b=t,_b}var Eb,eL;function R6(){if(eL)return Eb;eL=1;var r=Sl(),e=is(),t=r(e,"Set");return Eb=t,Eb}var Cb,tL;function _oe(){if(tL)return Cb;tL=1;var r=Sl(),e=is(),t=r(e,"WeakMap");return Cb=t,Cb}var Bb,nL;function Jc(){if(nL)return Bb;nL=1;var r=woe(),e=J2(),t=boe(),n=R6(),i=_oe(),a=xl(),s=S6(),o="[object Map]",A="[object Object]",l="[object Promise]",c="[object Set]",u="[object WeakMap]",h="[object DataView]",g=s(r),p=s(e),v=s(t),m=s(n),w=s(i),b=a;return(r&&b(new r(new ArrayBuffer(1)))!=h||e&&b(new e)!=o||t&&b(t.resolve())!=l||n&&b(new n)!=c||i&&b(new i)!=u)&&(b=function(_){var C=a(_),M=C==A?_.constructor:void 0,F=M?s(M):"";if(F)switch(F){case g:return h;case p:return o;case v:return l;case m:return c;case w:return u}return C}),Bb=b,Bb}var xb,rL;function Eoe(){if(rL)return xb;rL=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n){var i=n.length,a=new n.constructor(i);return i&&typeof n[0]=="string"&&e.call(n,"index")&&(a.index=n.index,a.input=n.input),a}return xb=t,xb}var Sb,iL;function Q6(){if(iL)return Sb;iL=1;var r=is(),e=r.Uint8Array;return Sb=e,Sb}var Tb,aL;function oS(){if(aL)return Tb;aL=1;var r=Q6();function e(t){var n=new t.constructor(t.byteLength);return new r(n).set(new r(t)),n}return Tb=e,Tb}var Mb,sL;function Coe(){if(sL)return Mb;sL=1;var r=oS();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return Mb=e,Mb}var Fb,oL;function Boe(){if(oL)return Fb;oL=1;var r=/\w*$/;function e(t){var n=new t.constructor(t.source,r.exec(t));return n.lastIndex=t.lastIndex,n}return Fb=e,Fb}var kb,AL;function xoe(){if(AL)return kb;AL=1;var r=Xc(),e=r?r.prototype:void 0,t=e?e.valueOf:void 0;function n(i){return t?Object(t.call(i)):{}}return kb=n,kb}var Ib,lL;function U6(){if(lL)return Ib;lL=1;var r=oS();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return Ib=e,Ib}var Pb,cL;function Soe(){if(cL)return Pb;cL=1;var r=oS(),e=Coe(),t=Boe(),n=xoe(),i=U6(),a="[object Boolean]",s="[object Date]",o="[object Map]",A="[object Number]",l="[object RegExp]",c="[object Set]",u="[object String]",h="[object Symbol]",g="[object ArrayBuffer]",p="[object DataView]",v="[object Float32Array]",m="[object Float64Array]",w="[object Int8Array]",b="[object Int16Array]",_="[object Int32Array]",C="[object Uint8Array]",M="[object Uint8ClampedArray]",F="[object Uint16Array]",k="[object Uint32Array]";function P(N,D,Q){var H=N.constructor;switch(D){case g:return r(N);case a:case s:return new H(+N);case p:return e(N,Q);case v:case m:case w:case b:case _:case C:case M:case F:case k:return i(N,Q);case o:return new H;case A:case u:return new H(N);case l:return t(N);case c:return new H;case h:return n(N)}}return Pb=P,Pb}var Ob,uL;function H6(){if(uL)return Ob;uL=1;var r=ka(),e=Object.create,t=(function(){function n(){}return function(i){if(!r(i))return{};if(e)return e(i);n.prototype=i;var a=new n;return n.prototype=void 0,a}})();return Ob=t,Ob}var Lb,dL;function z6(){if(dL)return Lb;dL=1;var r=H6(),e=pm(),t=gm();function n(i){return typeof i.constructor=="function"&&!t(i)?r(e(i)):{}}return Lb=n,Lb}var Nb,hL;function Toe(){if(hL)return Nb;hL=1;var r=Jc(),e=Os(),t="[object Map]";function n(i){return e(i)&&r(i)==t}return Nb=n,Nb}var Db,fL;function Moe(){if(fL)return Db;fL=1;var r=Toe(),e=fm(),t=rS(),n=t&&t.isMap,i=n?e(n):r;return Db=i,Db}var Rb,gL;function Foe(){if(gL)return Rb;gL=1;var r=Jc(),e=Os(),t="[object Set]";function n(i){return e(i)&&r(i)==t}return Rb=n,Rb}var Qb,pL;function koe(){if(pL)return Qb;pL=1;var r=Foe(),e=fm(),t=rS(),n=t&&t.isSet,i=n?e(n):r;return Qb=i,Qb}var Ub,vL;function j6(){if(vL)return Ub;vL=1;var r=cm(),e=tS(),t=dm(),n=hoe(),i=poe(),a=k6(),s=I6(),o=voe(),A=moe(),l=D6(),c=yoe(),u=Jc(),h=Eoe(),g=Soe(),p=z6(),v=gr(),m=Zc(),w=Moe(),b=ka(),_=koe(),C=mA(),M=Tl(),F=1,k=2,P=4,N="[object Arguments]",D="[object Array]",Q="[object Boolean]",H="[object Date]",j="[object Error]",q="[object Function]",J="[object GeneratorFunction]",ce="[object Map]",se="[object Number]",W="[object Object]",le="[object RegExp]",fe="[object Set]",X="[object String]",ne="[object Symbol]",Ie="[object WeakMap]",te="[object ArrayBuffer]",$="[object DataView]",ue="[object Float32Array]",me="[object Float64Array]",Te="[object Int8Array]",He="[object Int16Array]",Je="[object Int32Array]",Bt="[object Uint8Array]",Lt="[object Uint8ClampedArray]",kt="[object Uint16Array]",zt="[object Uint32Array]",ot={};ot[N]=ot[D]=ot[te]=ot[$]=ot[Q]=ot[H]=ot[ue]=ot[me]=ot[Te]=ot[He]=ot[Je]=ot[ce]=ot[se]=ot[W]=ot[le]=ot[fe]=ot[X]=ot[ne]=ot[Bt]=ot[Lt]=ot[kt]=ot[zt]=!0,ot[j]=ot[q]=ot[Ie]=!1;function Qt(Ct,Rr,Gt,ui,Hn,An){var Xt,ir=Rr&F,pr=Rr&k,Qr=Rr&P;if(Gt&&(Xt=Hn?Gt(Ct,ui,Hn,An):Gt(Ct)),Xt!==void 0)return Xt;if(!b(Ct))return Ct;var vr=v(Ct);if(vr){if(Xt=h(Ct),!ir)return s(Ct,Xt)}else{var qn=u(Ct),Tn=qn==q||qn==J;if(m(Ct))return a(Ct,ir);if(qn==W||qn==N||Tn&&!Hn){if(Xt=pr||Tn?{}:p(Ct),!ir)return pr?A(Ct,i(Xt,Ct)):o(Ct,n(Xt,Ct))}else{if(!ot[qn])return Hn?Ct:{};Xt=g(Ct,qn,ir)}}An||(An=new r);var ln=An.get(Ct);if(ln)return ln;An.set(Ct,Xt),_(Ct)?Ct.forEach(function(Xr){Xt.add(Qt(Xr,Rr,Gt,Xr,Ct,An))}):w(Ct)&&Ct.forEach(function(Xr,di){Xt.set(di,Qt(Xr,Rr,Gt,di,Ct,An))});var Pa=Qr?pr?c:l:pr?M:C,Ls=vr?void 0:Pa(Ct);return e(Ls||Ct,function(Xr,di){Ls&&(di=Xr,Xr=Ct[di]),t(Xt,di,Qt(Xr,Rr,Gt,di,Ct,An))}),Xt}return Ub=Qt,Ub}var Hb,mL;function Ioe(){if(mL)return Hb;mL=1;var r=j6(),e=4;function t(n){return r(n,e)}return Hb=t,Hb}var zb,yL;function AS(){if(yL)return zb;yL=1;function r(e){return function(){return e}}return zb=r,zb}var jb,wL;function Poe(){if(wL)return jb;wL=1;function r(e){return function(t,n,i){for(var a=-1,s=Object(t),o=i(t),A=o.length;A--;){var l=o[e?A:++a];if(n(s[l],l,s)===!1)break}return t}}return jb=r,jb}var Kb,bL;function lS(){if(bL)return Kb;bL=1;var r=Poe(),e=r();return Kb=e,Kb}var Gb,_L;function cS(){if(_L)return Gb;_L=1;var r=lS(),e=mA();function t(n,i){return n&&r(n,i,e)}return Gb=t,Gb}var Vb,EL;function Ooe(){if(EL)return Vb;EL=1;var r=Ao();function e(t,n){return function(i,a){if(i==null)return i;if(!r(i))return t(i,a);for(var s=i.length,o=n?s:-1,A=Object(i);(n?o--:++o<s)&&a(A[o],o,A)!==!1;);return i}}return Vb=e,Vb}var qb,CL;function vm(){if(CL)return qb;CL=1;var r=cS(),e=Ooe(),t=e(r);return qb=t,qb}var Wb,BL;function Ml(){if(BL)return Wb;BL=1;function r(e){return e}return Wb=r,Wb}var $b,xL;function K6(){if(xL)return $b;xL=1;var r=Ml();function e(t){return typeof t=="function"?t:r}return $b=e,$b}var Yb,SL;function G6(){if(SL)return Yb;SL=1;var r=tS(),e=vm(),t=K6(),n=gr();function i(a,s){var o=n(a)?r:e;return o(a,t(s))}return Yb=i,Yb}var Xb,TL;function V6(){return TL||(TL=1,Xb=G6()),Xb}var Zb,ML;function Loe(){if(ML)return Zb;ML=1;var r=vm();function e(t,n){var i=[];return r(t,function(a,s,o){n(a,s,o)&&i.push(a)}),i}return Zb=e,Zb}var Jb,FL;function Noe(){if(FL)return Jb;FL=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return Jb=e,Jb}var e_,kL;function Doe(){if(kL)return e_;kL=1;function r(e){return this.__data__.has(e)}return e_=r,e_}var t_,IL;function q6(){if(IL)return t_;IL=1;var r=eS(),e=Noe(),t=Doe();function n(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new r;++a<s;)this.add(i[a])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,t_=n,t_}var n_,PL;function Roe(){if(PL)return n_;PL=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return n_=r,n_}var r_,OL;function W6(){if(OL)return r_;OL=1;function r(e,t){return e.has(t)}return r_=r,r_}var i_,LL;function $6(){if(LL)return i_;LL=1;var r=q6(),e=Roe(),t=W6(),n=1,i=2;function a(s,o,A,l,c,u){var h=A&n,g=s.length,p=o.length;if(g!=p&&!(h&&p>g))return!1;var v=u.get(s),m=u.get(o);if(v&&m)return v==o&&m==s;var w=-1,b=!0,_=A&i?new r:void 0;for(u.set(s,o),u.set(o,s);++w<g;){var C=s[w],M=o[w];if(l)var F=h?l(M,C,w,o,s,u):l(C,M,w,s,o,u);if(F!==void 0){if(F)continue;b=!1;break}if(_){if(!e(o,function(k,P){if(!t(_,P)&&(C===k||c(C,k,A,l,u)))return _.push(P)})){b=!1;break}}else if(!(C===M||c(C,M,A,l,u))){b=!1;break}}return u.delete(s),u.delete(o),b}return i_=a,i_}var a_,NL;function Qoe(){if(NL)return a_;NL=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,a){n[++t]=[a,i]}),n}return a_=r,a_}var s_,DL;function uS(){if(DL)return s_;DL=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return s_=r,s_}var o_,RL;function Uoe(){if(RL)return o_;RL=1;var r=Xc(),e=Q6(),t=Yc(),n=$6(),i=Qoe(),a=uS(),s=1,o=2,A="[object Boolean]",l="[object Date]",c="[object Error]",u="[object Map]",h="[object Number]",g="[object RegExp]",p="[object Set]",v="[object String]",m="[object Symbol]",w="[object ArrayBuffer]",b="[object DataView]",_=r?r.prototype:void 0,C=_?_.valueOf:void 0;function M(F,k,P,N,D,Q,H){switch(P){case b:if(F.byteLength!=k.byteLength||F.byteOffset!=k.byteOffset)return!1;F=F.buffer,k=k.buffer;case w:return!(F.byteLength!=k.byteLength||!Q(new e(F),new e(k)));case A:case l:case h:return t(+F,+k);case c:return F.name==k.name&&F.message==k.message;case g:case v:return F==k+"";case u:var j=i;case p:var q=N&s;if(j||(j=a),F.size!=k.size&&!q)return!1;var J=H.get(F);if(J)return J==k;N|=o,H.set(F,k);var ce=n(j(F),j(k),N,D,Q,H);return H.delete(F),ce;case m:if(C)return C.call(F)==C.call(k)}return!1}return o_=M,o_}var A_,QL;function Hoe(){if(QL)return A_;QL=1;var r=D6(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(a,s,o,A,l,c){var u=o&e,h=r(a),g=h.length,p=r(s),v=p.length;if(g!=v&&!u)return!1;for(var m=g;m--;){var w=h[m];if(!(u?w in s:n.call(s,w)))return!1}var b=c.get(a),_=c.get(s);if(b&&_)return b==s&&_==a;var C=!0;c.set(a,s),c.set(s,a);for(var M=u;++m<g;){w=h[m];var F=a[w],k=s[w];if(A)var P=u?A(k,F,w,s,a,c):A(F,k,w,a,s,c);if(!(P===void 0?F===k||l(F,k,o,A,c):P)){C=!1;break}M||(M=w=="constructor")}if(C&&!M){var N=a.constructor,D=s.constructor;N!=D&&"constructor"in a&&"constructor"in s&&!(typeof N=="function"&&N instanceof N&&typeof D=="function"&&D instanceof D)&&(C=!1)}return c.delete(a),c.delete(s),C}return A_=i,A_}var l_,UL;function zoe(){if(UL)return l_;UL=1;var r=cm(),e=$6(),t=Uoe(),n=Hoe(),i=Jc(),a=gr(),s=Zc(),o=Eh(),A=1,l="[object Arguments]",c="[object Array]",u="[object Object]",h=Object.prototype,g=h.hasOwnProperty;function p(v,m,w,b,_,C){var M=a(v),F=a(m),k=M?c:i(v),P=F?c:i(m);k=k==l?u:k,P=P==l?u:P;var N=k==u,D=P==u,Q=k==P;if(Q&&s(v)){if(!s(m))return!1;M=!0,N=!1}if(Q&&!N)return C||(C=new r),M||o(v)?e(v,m,w,b,_,C):t(v,m,k,w,b,_,C);if(!(w&A)){var H=N&&g.call(v,"__wrapped__"),j=D&&g.call(m,"__wrapped__");if(H||j){var q=H?v.value():v,J=j?m.value():m;return C||(C=new r),_(q,J,w,b,C)}}return Q?(C||(C=new r),n(v,m,w,b,_,C)):!1}return l_=p,l_}var c_,HL;function Y6(){if(HL)return c_;HL=1;var r=zoe(),e=Os();function t(n,i,a,s,o){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,a,s,t,o)}return c_=t,c_}var u_,zL;function joe(){if(zL)return u_;zL=1;var r=cm(),e=Y6(),t=1,n=2;function i(a,s,o,A){var l=o.length,c=l,u=!A;if(a==null)return!c;for(a=Object(a);l--;){var h=o[l];if(u&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++l<c;){h=o[l];var g=h[0],p=a[g],v=h[1];if(u&&h[2]){if(p===void 0&&!(g in a))return!1}else{var m=new r;if(A)var w=A(p,v,g,a,s,m);if(!(w===void 0?e(v,p,t|n,A,m):w))return!1}}return!0}return u_=i,u_}var d_,jL;function X6(){if(jL)return d_;jL=1;var r=ka();function e(t){return t===t&&!r(t)}return d_=e,d_}var h_,KL;function Koe(){if(KL)return h_;KL=1;var r=X6(),e=mA();function t(n){for(var i=e(n),a=i.length;a--;){var s=i[a],o=n[s];i[a]=[s,o,r(o)]}return i}return h_=t,h_}var f_,GL;function Z6(){if(GL)return f_;GL=1;function r(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}return f_=r,f_}var g_,VL;function Goe(){if(VL)return g_;VL=1;var r=joe(),e=Koe(),t=Z6();function n(i){var a=e(i);return a.length==1&&a[0][2]?t(a[0][0],a[0][1]):function(s){return s===i||r(s,i,a)}}return g_=n,g_}var p_,qL;function eu(){if(qL)return p_;qL=1;var r=xl(),e=Os(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return p_=n,p_}var v_,WL;function dS(){if(WL)return v_;WL=1;var r=gr(),e=eu(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){if(r(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:n.test(a)||!t.test(a)||s!=null&&a in Object(s)}return v_=i,v_}var m_,$L;function Voe(){if($L)return m_;$L=1;var r=eS(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],A=a.cache;if(A.has(o))return A.get(o);var l=n.apply(this,s);return a.cache=A.set(o,l)||A,l};return a.cache=new(t.Cache||r),a}return t.Cache=r,m_=t,m_}var y_,YL;function qoe(){if(YL)return y_;YL=1;var r=Voe(),e=500;function t(n){var i=r(n,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return y_=t,y_}var w_,XL;function Woe(){if(XL)return w_;XL=1;var r=qoe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,o,A,l){a.push(A?l.replace(t,"$1"):o||s)}),a});return w_=n,w_}var b_,ZL;function mm(){if(ZL)return b_;ZL=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,a=Array(i);++n<i;)a[n]=t(e[n],n,e);return a}return b_=r,b_}var __,JL;function $oe(){if(JL)return __;JL=1;var r=Xc(),e=mm(),t=gr(),n=eu(),i=r?r.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(t(o))return e(o,s)+"";if(n(o))return a?a.call(o):"";var A=o+"";return A=="0"&&1/o==-1/0?"-0":A}return __=s,__}var E_,eN;function J6(){if(eN)return E_;eN=1;var r=$oe();function e(t){return t==null?"":r(t)}return E_=e,E_}var C_,tN;function ym(){if(tN)return C_;tN=1;var r=gr(),e=dS(),t=Woe(),n=J6();function i(a,s){return r(a)?a:e(a,s)?[a]:t(n(a))}return C_=i,C_}var B_,nN;function Ch(){if(nN)return B_;nN=1;var r=eu();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return B_=e,B_}var x_,rN;function wm(){if(rN)return x_;rN=1;var r=ym(),e=Ch();function t(n,i){i=r(i,n);for(var a=0,s=i.length;n!=null&&a<s;)n=n[e(i[a++])];return a&&a==s?n:void 0}return x_=t,x_}var S_,iN;function Yoe(){if(iN)return S_;iN=1;var r=wm();function e(t,n,i){var a=t==null?void 0:r(t,n);return a===void 0?i:a}return S_=e,S_}var T_,aN;function Xoe(){if(aN)return T_;aN=1;function r(e,t){return e!=null&&t in Object(e)}return T_=r,T_}var M_,sN;function e5(){if(sN)return M_;sN=1;var r=ym(),e=_h(),t=gr(),n=hm(),i=nS(),a=Ch();function s(o,A,l){A=r(A,o);for(var c=-1,u=A.length,h=!1;++c<u;){var g=a(A[c]);if(!(h=o!=null&&l(o,g)))break;o=o[g]}return h||++c!=u?h:(u=o==null?0:o.length,!!u&&i(u)&&n(g,u)&&(t(o)||e(o)))}return M_=s,M_}var F_,oN;function t5(){if(oN)return F_;oN=1;var r=Xoe(),e=e5();function t(n,i){return n!=null&&e(n,i,r)}return F_=t,F_}var k_,AN;function Zoe(){if(AN)return k_;AN=1;var r=Y6(),e=Yoe(),t=t5(),n=dS(),i=X6(),a=Z6(),s=Ch(),o=1,A=2;function l(c,u){return n(c)&&i(u)?a(s(c),u):function(h){var g=e(h,c);return g===void 0&&g===u?t(h,c):r(u,g,o|A)}}return k_=l,k_}var I_,lN;function n5(){if(lN)return I_;lN=1;function r(e){return function(t){return t==null?void 0:t[e]}}return I_=r,I_}var P_,cN;function Joe(){if(cN)return P_;cN=1;var r=wm();function e(t){return function(n){return r(n,t)}}return P_=e,P_}var O_,uN;function eAe(){if(uN)return O_;uN=1;var r=n5(),e=Joe(),t=dS(),n=Ch();function i(a){return t(a)?r(n(a)):e(a)}return O_=i,O_}var L_,dN;function lo(){if(dN)return L_;dN=1;var r=Goe(),e=Zoe(),t=Ml(),n=gr(),i=eAe();function a(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?n(s)?e(s[0],s[1]):r(s):i(s)}return L_=a,L_}var N_,hN;function r5(){if(hN)return N_;hN=1;var r=P6(),e=Loe(),t=lo(),n=gr();function i(a,s){var o=n(a)?r:e;return o(a,t(s,3))}return N_=i,N_}var D_,fN;function tAe(){if(fN)return D_;fN=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n,i){return n!=null&&e.call(n,i)}return D_=t,D_}var R_,gN;function i5(){if(gN)return R_;gN=1;var r=tAe(),e=e5();function t(n,i){return n!=null&&e(n,i,r)}return R_=t,R_}var Q_,pN;function nAe(){if(pN)return Q_;pN=1;var r=iS(),e=Jc(),t=_h(),n=gr(),i=Ao(),a=Zc(),s=gm(),o=Eh(),A="[object Map]",l="[object Set]",c=Object.prototype,u=c.hasOwnProperty;function h(g){if(g==null)return!0;if(i(g)&&(n(g)||typeof g=="string"||typeof g.splice=="function"||a(g)||o(g)||t(g)))return!g.length;var p=e(g);if(p==A||p==l)return!g.size;if(s(g))return!r(g).length;for(var v in g)if(u.call(g,v))return!1;return!0}return Q_=h,Q_}var U_,vN;function a5(){if(vN)return U_;vN=1;function r(e){return e===void 0}return U_=r,U_}var H_,mN;function s5(){if(mN)return H_;mN=1;var r=vm(),e=Ao();function t(n,i){var a=-1,s=e(n)?Array(n.length):[];return r(n,function(o,A,l){s[++a]=i(o,A,l)}),s}return H_=t,H_}var z_,yN;function o5(){if(yN)return z_;yN=1;var r=mm(),e=lo(),t=s5(),n=gr();function i(a,s){var o=n(a)?r:t;return o(a,e(s,3))}return z_=i,z_}var j_,wN;function rAe(){if(wN)return j_;wN=1;function r(e,t,n,i){var a=-1,s=e==null?0:e.length;for(i&&s&&(n=e[++a]);++a<s;)n=t(n,e[a],a,e);return n}return j_=r,j_}var K_,bN;function iAe(){if(bN)return K_;bN=1;function r(e,t,n,i,a){return a(e,function(s,o,A){n=i?(i=!1,s):t(n,s,o,A)}),n}return K_=r,K_}var G_,_N;function A5(){if(_N)return G_;_N=1;var r=rAe(),e=vm(),t=lo(),n=iAe(),i=gr();function a(s,o,A){var l=i(s)?r:n,c=arguments.length<3;return l(s,t(o,4),A,c,e)}return G_=a,G_}var V_,EN;function aAe(){if(EN)return V_;EN=1;var r=xl(),e=gr(),t=Os(),n="[object String]";function i(a){return typeof a=="string"||!e(a)&&t(a)&&r(a)==n}return V_=i,V_}var q_,CN;function sAe(){if(CN)return q_;CN=1;var r=n5(),e=r("length");return q_=e,q_}var W_,BN;function oAe(){if(BN)return W_;BN=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+r+i+a+"]");function A(l){return o.test(l)}return W_=A,W_}var $_,xN;function AAe(){if(xN)return $_;xN=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,a="\\ufe0e\\ufe0f",s="["+r+"]",o="["+i+"]",A="\\ud83c[\\udffb-\\udfff]",l="(?:"+o+"|"+A+")",c="[^"+r+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",p=l+"?",v="["+a+"]?",m="(?:"+g+"(?:"+[c,u,h].join("|")+")"+v+p+")*",w=v+p+m,b="(?:"+[c+o+"?",o,u,h,s].join("|")+")",_=RegExp(A+"(?="+A+")|"+b+w,"g");function C(M){for(var F=_.lastIndex=0;_.test(M);)++F;return F}return $_=C,$_}var Y_,SN;function lAe(){if(SN)return Y_;SN=1;var r=sAe(),e=oAe(),t=AAe();function n(i){return e(i)?t(i):r(i)}return Y_=n,Y_}var X_,TN;function cAe(){if(TN)return X_;TN=1;var r=iS(),e=Jc(),t=Ao(),n=aAe(),i=lAe(),a="[object Map]",s="[object Set]";function o(A){if(A==null)return 0;if(t(A))return n(A)?i(A):A.length;var l=e(A);return l==a||l==s?A.size:r(A).length}return X_=o,X_}var Z_,MN;function uAe(){if(MN)return Z_;MN=1;var r=tS(),e=H6(),t=cS(),n=lo(),i=pm(),a=gr(),s=Zc(),o=wh(),A=ka(),l=Eh();function c(u,h,g){var p=a(u),v=p||s(u)||l(u);if(h=n(h,4),g==null){var m=u&&u.constructor;v?g=p?new m:[]:A(u)?g=o(m)?e(i(u)):{}:g={}}return(v?r:t)(u,function(w,b,_){return h(g,w,b,_)}),g}return Z_=c,Z_}var J_,FN;function dAe(){if(FN)return J_;FN=1;var r=Xc(),e=_h(),t=gr(),n=r?r.isConcatSpreadable:void 0;function i(a){return t(a)||e(a)||!!(n&&a&&a[n])}return J_=i,J_}var eE,kN;function hS(){if(kN)return eE;kN=1;var r=sS(),e=dAe();function t(n,i,a,s,o){var A=-1,l=n.length;for(a||(a=e),o||(o=[]);++A<l;){var c=n[A];i>0&&a(c)?i>1?t(c,i-1,a,s,o):r(o,c):s||(o[o.length]=c)}return o}return eE=t,eE}var tE,IN;function hAe(){if(IN)return tE;IN=1;function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}return tE=r,tE}var nE,PN;function l5(){if(PN)return nE;PN=1;var r=hAe(),e=Math.max;function t(n,i,a){return i=e(i===void 0?n.length-1:i,0),function(){for(var s=arguments,o=-1,A=e(s.length-i,0),l=Array(A);++o<A;)l[o]=s[i+o];o=-1;for(var c=Array(i+1);++o<i;)c[o]=s[o];return c[i]=a(l),r(n,this,c)}}return nE=t,nE}var rE,ON;function fAe(){if(ON)return rE;ON=1;var r=AS(),e=T6(),t=Ml(),n=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:r(a),writable:!0})}:t;return rE=n,rE}var iE,LN;function gAe(){if(LN)return iE;LN=1;var r=800,e=16,t=Date.now;function n(i){var a=0,s=0;return function(){var o=t(),A=e-(o-s);if(s=o,A>0){if(++a>=r)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return iE=n,iE}var aE,NN;function c5(){if(NN)return aE;NN=1;var r=fAe(),e=gAe(),t=e(r);return aE=t,aE}var sE,DN;function bm(){if(DN)return sE;DN=1;var r=Ml(),e=l5(),t=c5();function n(i,a){return t(e(i,a,r),i+"")}return sE=n,sE}var oE,RN;function u5(){if(RN)return oE;RN=1;function r(e,t,n,i){for(var a=e.length,s=n+(i?1:-1);i?s--:++s<a;)if(t(e[s],s,e))return s;return-1}return oE=r,oE}var AE,QN;function pAe(){if(QN)return AE;QN=1;function r(e){return e!==e}return AE=r,AE}var lE,UN;function vAe(){if(UN)return lE;UN=1;function r(e,t,n){for(var i=n-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}return lE=r,lE}var cE,HN;function mAe(){if(HN)return cE;HN=1;var r=u5(),e=pAe(),t=vAe();function n(i,a,s){return a===a?t(i,a,s):r(i,e,s)}return cE=n,cE}var uE,zN;function yAe(){if(zN)return uE;zN=1;var r=mAe();function e(t,n){var i=t==null?0:t.length;return!!i&&r(t,n,0)>-1}return uE=e,uE}var dE,jN;function wAe(){if(jN)return dE;jN=1;function r(e,t,n){for(var i=-1,a=e==null?0:e.length;++i<a;)if(n(t,e[i]))return!0;return!1}return dE=r,dE}var hE,KN;function bAe(){if(KN)return hE;KN=1;function r(){}return hE=r,hE}var fE,GN;function _Ae(){if(GN)return fE;GN=1;var r=R6(),e=bAe(),t=uS(),n=1/0,i=r&&1/t(new r([,-0]))[1]==n?function(a){return new r(a)}:e;return fE=i,fE}var gE,VN;function EAe(){if(VN)return gE;VN=1;var r=q6(),e=yAe(),t=wAe(),n=W6(),i=_Ae(),a=uS(),s=200;function o(A,l,c){var u=-1,h=e,g=A.length,p=!0,v=[],m=v;if(c)p=!1,h=t;else if(g>=s){var w=l?null:i(A);if(w)return a(w);p=!1,h=n,m=new r}else m=l?[]:v;e:for(;++u<g;){var b=A[u],_=l?l(b):b;if(b=c||b!==0?b:0,p&&_===_){for(var C=m.length;C--;)if(m[C]===_)continue e;l&&m.push(_),v.push(b)}else h(m,_,c)||(m!==v&&m.push(_),v.push(b))}return v}return gE=o,gE}var pE,qN;function d5(){if(qN)return pE;qN=1;var r=Ao(),e=Os();function t(n){return e(n)&&r(n)}return pE=t,pE}var vE,WN;function CAe(){if(WN)return vE;WN=1;var r=hS(),e=bm(),t=EAe(),n=d5(),i=e(function(a){return t(r(a,1,n,!0))});return vE=i,vE}var mE,$N;function BAe(){if($N)return mE;$N=1;var r=mm();function e(t,n){return r(n,function(i){return t[i]})}return mE=e,mE}var yE,YN;function h5(){if(YN)return yE;YN=1;var r=BAe(),e=mA();function t(n){return n==null?[]:r(n,e(n))}return yE=t,yE}var wE,XN;function Ia(){if(XN)return wE;XN=1;var r;if(typeof Z2=="function")try{r={clone:Ioe(),constant:AS(),each:V6(),filter:r5(),has:i5(),isArray:gr(),isEmpty:nAe(),isFunction:wh(),isUndefined:a5(),keys:mA(),map:o5(),reduce:A5(),size:cAe(),transform:uAe(),union:CAe(),values:h5()}}catch{}return r||(r=window._),wE=r,wE}var bE,ZN;function fS(){if(ZN)return bE;ZN=1;var r=Ia();bE=i;var e="\0",t="\0",n="";function i(c){this._isDirected=r.has(c,"directed")?c.directed:!0,this._isMultigraph=r.has(c,"multigraph")?c.multigraph:!1,this._isCompound=r.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[t]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return r.isFunction(c)||(c=r.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return r.keys(this._nodes)},i.prototype.sources=function(){var c=this;return r.filter(this.nodes(),function(u){return r.isEmpty(c._in[u])})},i.prototype.sinks=function(){var c=this;return r.filter(this.nodes(),function(u){return r.isEmpty(c._out[u])})},i.prototype.setNodes=function(c,u){var h=arguments,g=this;return r.each(c,function(p){h.length>1?g.setNode(p,u):g.setNode(p)}),this},i.prototype.setNode=function(c,u){return r.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=u),this):(this._nodes[c]=arguments.length>1?u:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=t,this._children[c]={},this._children[t][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return r.has(this._nodes,c)},i.prototype.removeNode=function(c){var u=this;if(r.has(this._nodes,c)){var h=function(g){u.removeEdge(u._edgeObjs[g])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],r.each(this.children(c),function(g){u.setParent(g)}),delete this._children[c]),r.each(r.keys(this._in[c]),h),delete this._in[c],delete this._preds[c],r.each(r.keys(this._out[c]),h),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,u){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(u))u=t;else{u+="";for(var h=u;!r.isUndefined(h);h=this.parent(h))if(h===c)throw new Error("Setting "+u+" as parent of "+c+" would create a cycle");this.setNode(u)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=u,this._children[u][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var u=this._parent[c];if(u!==t)return u}},i.prototype.children=function(c){if(r.isUndefined(c)&&(c=t),this._isCompound){var u=this._children[c];if(u)return r.keys(u)}else{if(c===t)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var u=this._preds[c];if(u)return r.keys(u)},i.prototype.successors=function(c){var u=this._sucs[c];if(u)return r.keys(u)},i.prototype.neighbors=function(c){var u=this.predecessors(c);if(u)return r.union(u,this.successors(c))},i.prototype.isLeaf=function(c){var u;return this.isDirected()?u=this.successors(c):u=this.neighbors(c),u.length===0},i.prototype.filterNodes=function(c){var u=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});u.setGraph(this.graph());var h=this;r.each(this._nodes,function(v,m){c(m)&&u.setNode(m,v)}),r.each(this._edgeObjs,function(v){u.hasNode(v.v)&&u.hasNode(v.w)&&u.setEdge(v,h.edge(v))});var g={};function p(v){var m=h.parent(v);return m===void 0||u.hasNode(m)?(g[v]=m,m):m in g?g[m]:p(m)}return this._isCompound&&r.each(u.nodes(),function(v){u.setParent(v,p(v))}),u},i.prototype.setDefaultEdgeLabel=function(c){return r.isFunction(c)||(c=r.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return r.values(this._edgeObjs)},i.prototype.setPath=function(c,u){var h=this,g=arguments;return r.reduce(c,function(p,v){return g.length>1?h.setEdge(p,v,u):h.setEdge(p,v),v}),this},i.prototype.setEdge=function(){var c,u,h,g,p=!1,v=arguments[0];typeof v=="object"&&v!==null&&"v"in v?(c=v.v,u=v.w,h=v.name,arguments.length===2&&(g=arguments[1],p=!0)):(c=v,u=arguments[1],h=arguments[3],arguments.length>2&&(g=arguments[2],p=!0)),c=""+c,u=""+u,r.isUndefined(h)||(h=""+h);var m=o(this._isDirected,c,u,h);if(r.has(this._edgeLabels,m))return p&&(this._edgeLabels[m]=g),this;if(!r.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(u),this._edgeLabels[m]=p?g:this._defaultEdgeLabelFn(c,u,h);var w=A(this._isDirected,c,u,h);return c=w.v,u=w.w,Object.freeze(w),this._edgeObjs[m]=w,a(this._preds[u],c),a(this._sucs[c],u),this._in[u][m]=w,this._out[c][m]=w,this._edgeCount++,this},i.prototype.edge=function(c,u,h){var g=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,u,h);return this._edgeLabels[g]},i.prototype.hasEdge=function(c,u,h){var g=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,u,h);return r.has(this._edgeLabels,g)},i.prototype.removeEdge=function(c,u,h){var g=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,u,h),p=this._edgeObjs[g];return p&&(c=p.v,u=p.w,delete this._edgeLabels[g],delete this._edgeObjs[g],s(this._preds[u],c),s(this._sucs[c],u),delete this._in[u][g],delete this._out[c][g],this._edgeCount--),this},i.prototype.inEdges=function(c,u){var h=this._in[c];if(h){var g=r.values(h);return u?r.filter(g,function(p){return p.v===u}):g}},i.prototype.outEdges=function(c,u){var h=this._out[c];if(h){var g=r.values(h);return u?r.filter(g,function(p){return p.w===u}):g}},i.prototype.nodeEdges=function(c,u){var h=this.inEdges(c,u);if(h)return h.concat(this.outEdges(c,u))};function a(c,u){c[u]?c[u]++:c[u]=1}function s(c,u){--c[u]||delete c[u]}function o(c,u,h,g){var p=""+u,v=""+h;if(!c&&p>v){var m=p;p=v,v=m}return p+n+v+n+(r.isUndefined(g)?e:g)}function A(c,u,h,g){var p=""+u,v=""+h;if(!c&&p>v){var m=p;p=v,v=m}var w={v:p,w:v};return g&&(w.name=g),w}function l(c,u){return o(c,u.v,u.w,u.name)}return bE}var _E,JN;function xAe(){return JN||(JN=1,_E="2.1.8"),_E}var EE,eD;function SAe(){return eD||(eD=1,EE={Graph:fS(),version:xAe()}),EE}var CE,tD;function TAe(){if(tD)return CE;tD=1;var r=Ia(),e=fS();CE={write:t,read:a};function t(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:i(s)};return r.isUndefined(s.graph())||(o.value=r.clone(s.graph())),o}function n(s){return r.map(s.nodes(),function(o){var A=s.node(o),l=s.parent(o),c={v:o};return r.isUndefined(A)||(c.value=A),r.isUndefined(l)||(c.parent=l),c})}function i(s){return r.map(s.edges(),function(o){var A=s.edge(o),l={v:o.v,w:o.w};return r.isUndefined(o.name)||(l.name=o.name),r.isUndefined(A)||(l.value=A),l})}function a(s){var o=new e(s.options).setGraph(s.value);return r.each(s.nodes,function(A){o.setNode(A.v,A.value),A.parent&&o.setParent(A.v,A.parent)}),r.each(s.edges,function(A){o.setEdge({v:A.v,w:A.w,name:A.name},A.value)}),o}return CE}var BE,nD;function MAe(){if(nD)return BE;nD=1;var r=Ia();BE=e;function e(t){var n={},i=[],a;function s(o){r.has(n,o)||(n[o]=!0,a.push(o),r.each(t.successors(o),s),r.each(t.predecessors(o),s))}return r.each(t.nodes(),function(o){a=[],s(o),a.length&&i.push(a)}),i}return BE}var xE,rD;function f5(){if(rD)return xE;rD=1;var r=Ia();xE=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(t){return t.key})},e.prototype.has=function(t){return r.has(this._keyIndices,t)},e.prototype.priority=function(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(t,n){var i=this._keyIndices;if(t=String(t),!r.has(i,t)){var a=this._arr,s=a.length;return i[t]=s,a.push({key:t,priority:n}),this._decrease(s),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},e.prototype.decrease=function(t,n){var i=this._keyIndices[t];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},e.prototype._heapify=function(t){var n=this._arr,i=2*t,a=i+1,s=t;i<n.length&&(s=n[i].priority<n[s].priority?i:s,a<n.length&&(s=n[a].priority<n[s].priority?a:s),s!==t&&(this._swap(t,s),this._heapify(s)))},e.prototype._decrease=function(t){for(var n=this._arr,i=n[t].priority,a;t!==0&&(a=t>>1,!(n[a].priority<i));)this._swap(t,a),t=a},e.prototype._swap=function(t,n){var i=this._arr,a=this._keyIndices,s=i[t],o=i[n];i[t]=o,i[n]=s,a[o.key]=t,a[s.key]=n},xE}var SE,iD;function g5(){if(iD)return SE;iD=1;var r=Ia(),e=f5();SE=n;var t=r.constant(1);function n(a,s,o,A){return i(a,String(s),o||t,A||function(l){return a.outEdges(l)})}function i(a,s,o,A){var l={},c=new e,u,h,g=function(p){var v=p.v!==u?p.v:p.w,m=l[v],w=o(p),b=h.distance+w;if(w<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+p+" Weight: "+w);b<m.distance&&(m.distance=b,m.predecessor=u,c.decrease(v,b))};for(a.nodes().forEach(function(p){var v=p===s?0:Number.POSITIVE_INFINITY;l[p]={distance:v},c.add(p,v)});c.size()>0&&(u=c.removeMin(),h=l[u],h.distance!==Number.POSITIVE_INFINITY);)A(u).forEach(g);return l}return SE}var TE,aD;function FAe(){if(aD)return TE;aD=1;var r=g5(),e=Ia();TE=t;function t(n,i,a){return e.transform(n.nodes(),function(s,o){s[o]=r(n,o,i,a)},{})}return TE}var ME,sD;function p5(){if(sD)return ME;sD=1;var r=Ia();ME=e;function e(t){var n=0,i=[],a={},s=[];function o(A){var l=a[A]={onStack:!0,lowlink:n,index:n++};if(i.push(A),t.successors(A).forEach(function(h){r.has(a,h)?a[h].onStack&&(l.lowlink=Math.min(l.lowlink,a[h].index)):(o(h),l.lowlink=Math.min(l.lowlink,a[h].lowlink))}),l.lowlink===l.index){var c=[],u;do u=i.pop(),a[u].onStack=!1,c.push(u);while(A!==u);s.push(c)}}return t.nodes().forEach(function(A){r.has(a,A)||o(A)}),s}return ME}var FE,oD;function kAe(){if(oD)return FE;oD=1;var r=Ia(),e=p5();FE=t;function t(n){return r.filter(e(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return FE}var kE,AD;function IAe(){if(AD)return kE;AD=1;var r=Ia();kE=t;var e=r.constant(1);function t(i,a,s){return n(i,a||e,s||function(o){return i.outEdges(o)})}function n(i,a,s){var o={},A=i.nodes();return A.forEach(function(l){o[l]={},o[l][l]={distance:0},A.forEach(function(c){l!==c&&(o[l][c]={distance:Number.POSITIVE_INFINITY})}),s(l).forEach(function(c){var u=c.v===l?c.w:c.v,h=a(c);o[l][u]={distance:h,predecessor:l}})}),A.forEach(function(l){var c=o[l];A.forEach(function(u){var h=o[u];A.forEach(function(g){var p=h[l],v=c[g],m=h[g],w=p.distance+v.distance;w<m.distance&&(m.distance=w,m.predecessor=v.predecessor)})})}),o}return kE}var IE,lD;function v5(){if(lD)return IE;lD=1;var r=Ia();IE=e,e.CycleException=t;function e(n){var i={},a={},s=[];function o(A){if(r.has(a,A))throw new t;r.has(i,A)||(a[A]=!0,i[A]=!0,r.each(n.predecessors(A),o),delete a[A],s.push(A))}if(r.each(n.sinks(),o),r.size(i)!==n.nodeCount())throw new t;return s}function t(){}return t.prototype=new Error,IE}var PE,cD;function PAe(){if(cD)return PE;cD=1;var r=v5();PE=e;function e(t){try{r(t)}catch(n){if(n instanceof r.CycleException)return!1;throw n}return!0}return PE}var OE,uD;function m5(){if(uD)return OE;uD=1;var r=Ia();OE=e;function e(n,i,a){r.isArray(i)||(i=[i]);var s=(n.isDirected()?n.successors:n.neighbors).bind(n),o=[],A={};return r.each(i,function(l){if(!n.hasNode(l))throw new Error("Graph does not have node: "+l);t(n,l,a==="post",A,s,o)}),o}function t(n,i,a,s,o,A){r.has(s,i)||(s[i]=!0,a||A.push(i),r.each(o(i),function(l){t(n,l,a,s,o,A)}),a&&A.push(i))}return OE}var LE,dD;function OAe(){if(dD)return LE;dD=1;var r=m5();LE=e;function e(t,n){return r(t,n,"post")}return LE}var NE,hD;function LAe(){if(hD)return NE;hD=1;var r=m5();NE=e;function e(t,n){return r(t,n,"pre")}return NE}var DE,fD;function NAe(){if(fD)return DE;fD=1;var r=Ia(),e=fS(),t=f5();DE=n;function n(i,a){var s=new e,o={},A=new t,l;function c(h){var g=h.v===l?h.w:h.v,p=A.priority(g);if(p!==void 0){var v=a(h);v<p&&(o[g]=l,A.decrease(g,v))}}if(i.nodeCount()===0)return s;r.each(i.nodes(),function(h){A.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),A.decrease(i.nodes()[0],0);for(var u=!1;A.size()>0;){if(l=A.removeMin(),r.has(o,l))s.setEdge(l,o[l]);else{if(u)throw new Error("Input graph is not connected: "+i);u=!0}i.nodeEdges(l).forEach(c)}return s}return DE}var RE,gD;function DAe(){return gD||(gD=1,RE={components:MAe(),dijkstra:g5(),dijkstraAll:FAe(),findCycles:kAe(),floydWarshall:IAe(),isAcyclic:PAe(),postorder:OAe(),preorder:LAe(),prim:NAe(),tarjan:p5(),topsort:v5()}),RE}var QE,pD;function RAe(){if(pD)return QE;pD=1;var r=SAe();return QE={Graph:r.Graph,json:TAe(),alg:DAe(),version:r.version},QE}var UE,vD;function ts(){if(vD)return UE;vD=1;var r;if(typeof Z2=="function")try{r=RAe()}catch{}return r||(r=window.graphlib),UE=r,UE}var HE,mD;function QAe(){if(mD)return HE;mD=1;var r=j6(),e=1,t=4;function n(i){return r(i,e|t)}return HE=n,HE}var zE,yD;function _m(){if(yD)return zE;yD=1;var r=Yc(),e=Ao(),t=hm(),n=ka();function i(a,s,o){if(!n(o))return!1;var A=typeof s;return(A=="number"?e(o)&&t(s,o.length):A=="string"&&s in o)?r(o[s],a):!1}return zE=i,zE}var jE,wD;function UAe(){if(wD)return jE;wD=1;var r=bm(),e=Yc(),t=_m(),n=Tl(),i=Object.prototype,a=i.hasOwnProperty,s=r(function(o,A){o=Object(o);var l=-1,c=A.length,u=c>2?A[2]:void 0;for(u&&t(A[0],A[1],u)&&(c=1);++l<c;)for(var h=A[l],g=n(h),p=-1,v=g.length;++p<v;){var m=g[p],w=o[m];(w===void 0||e(w,i[m])&&!a.call(o,m))&&(o[m]=h[m])}return o});return jE=s,jE}var KE,bD;function HAe(){if(bD)return KE;bD=1;var r=lo(),e=Ao(),t=mA();function n(i){return function(a,s,o){var A=Object(a);if(!e(a)){var l=r(s,3);a=t(a),s=function(u){return l(A[u],u,A)}}var c=i(a,s,o);return c>-1?A[l?a[c]:c]:void 0}}return KE=n,KE}var GE,_D;function zAe(){if(_D)return GE;_D=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return GE=e,GE}var VE,ED;function jAe(){if(ED)return VE;ED=1;var r=zAe(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return VE=t,VE}var qE,CD;function KAe(){if(CD)return qE;CD=1;var r=jAe(),e=ka(),t=eu(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function A(l){if(typeof l=="number")return l;if(t(l))return n;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=r(l);var u=a.test(l);return u||s.test(l)?o(l.slice(2),u?2:8):i.test(l)?n:+l}return qE=A,qE}var WE,BD;function y5(){if(BD)return WE;BD=1;var r=KAe(),e=1/0,t=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=r(i),i===e||i===-e){var a=i<0?-1:1;return a*t}return i===i?i:0}return WE=n,WE}var $E,xD;function GAe(){if(xD)return $E;xD=1;var r=y5();function e(t){var n=r(t),i=n%1;return n===n?i?n-i:n:0}return $E=e,$E}var YE,SD;function VAe(){if(SD)return YE;SD=1;var r=u5(),e=lo(),t=GAe(),n=Math.max;function i(a,s,o){var A=a==null?0:a.length;if(!A)return-1;var l=o==null?0:t(o);return l<0&&(l=n(A+l,0)),r(a,e(s,3),l)}return YE=i,YE}var XE,TD;function qAe(){if(TD)return XE;TD=1;var r=HAe(),e=VAe(),t=r(e);return XE=t,XE}var ZE,MD;function w5(){if(MD)return ZE;MD=1;var r=hS();function e(t){var n=t==null?0:t.length;return n?r(t,1):[]}return ZE=e,ZE}var JE,FD;function WAe(){if(FD)return JE;FD=1;var r=lS(),e=K6(),t=Tl();function n(i,a){return i==null?i:r(i,e(a),t)}return JE=n,JE}var eC,kD;function $Ae(){if(kD)return eC;kD=1;function r(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return eC=r,eC}var tC,ID;function YAe(){if(ID)return tC;ID=1;var r=um(),e=cS(),t=lo();function n(i,a){var s={};return a=t(a,3),e(i,function(o,A,l){r(s,A,a(o,A,l))}),s}return tC=n,tC}var nC,PD;function gS(){if(PD)return nC;PD=1;var r=eu();function e(t,n,i){for(var a=-1,s=t.length;++a<s;){var o=t[a],A=n(o);if(A!=null&&(l===void 0?A===A&&!r(A):i(A,l)))var l=A,c=o}return c}return nC=e,nC}var rC,OD;function XAe(){if(OD)return rC;OD=1;function r(e,t){return e>t}return rC=r,rC}var iC,LD;function ZAe(){if(LD)return iC;LD=1;var r=gS(),e=XAe(),t=Ml();function n(i){return i&&i.length?r(i,t,e):void 0}return iC=n,iC}var aC,ND;function b5(){if(ND)return aC;ND=1;var r=um(),e=Yc();function t(n,i,a){(a!==void 0&&!e(n[i],a)||a===void 0&&!(i in n))&&r(n,i,a)}return aC=t,aC}var sC,DD;function JAe(){if(DD)return sC;DD=1;var r=xl(),e=pm(),t=Os(),n="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,A=s.call(Object);function l(c){if(!t(c)||r(c)!=n)return!1;var u=e(c);if(u===null)return!0;var h=o.call(u,"constructor")&&u.constructor;return typeof h=="function"&&h instanceof h&&s.call(h)==A}return sC=l,sC}var oC,RD;function _5(){if(RD)return oC;RD=1;function r(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return oC=r,oC}var AC,QD;function ele(){if(QD)return AC;QD=1;var r=bh(),e=Tl();function t(n){return r(n,e(n))}return AC=t,AC}var lC,UD;function tle(){if(UD)return lC;UD=1;var r=b5(),e=k6(),t=U6(),n=I6(),i=z6(),a=_h(),s=gr(),o=d5(),A=Zc(),l=wh(),c=ka(),u=JAe(),h=Eh(),g=_5(),p=ele();function v(m,w,b,_,C,M,F){var k=g(m,b),P=g(w,b),N=F.get(P);if(N){r(m,b,N);return}var D=M?M(k,P,b+"",m,w,F):void 0,Q=D===void 0;if(Q){var H=s(P),j=!H&&A(P),q=!H&&!j&&h(P);D=P,H||j||q?s(k)?D=k:o(k)?D=n(k):j?(Q=!1,D=e(P,!0)):q?(Q=!1,D=t(P,!0)):D=[]:u(P)||a(P)?(D=k,a(k)?D=p(k):(!c(k)||l(k))&&(D=i(P))):Q=!1}Q&&(F.set(P,D),C(D,P,_,M,F),F.delete(P)),r(m,b,D)}return lC=v,lC}var cC,HD;function nle(){if(HD)return cC;HD=1;var r=cm(),e=b5(),t=lS(),n=tle(),i=ka(),a=Tl(),s=_5();function o(A,l,c,u,h){A!==l&&t(l,function(g,p){if(h||(h=new r),i(g))n(A,l,p,c,o,u,h);else{var v=u?u(s(A,p),g,p+"",A,l,h):void 0;v===void 0&&(v=g),e(A,p,v)}},a)}return cC=o,cC}var uC,zD;function rle(){if(zD)return uC;zD=1;var r=bm(),e=_m();function t(n){return r(function(i,a){var s=-1,o=a.length,A=o>1?a[o-1]:void 0,l=o>2?a[2]:void 0;for(A=n.length>3&&typeof A=="function"?(o--,A):void 0,l&&e(a[0],a[1],l)&&(A=o<3?void 0:A,o=1),i=Object(i);++s<o;){var c=a[s];c&&n(i,c,s,A)}return i})}return uC=t,uC}var dC,jD;function ile(){if(jD)return dC;jD=1;var r=nle(),e=rle(),t=e(function(n,i,a){r(n,i,a)});return dC=t,dC}var hC,KD;function E5(){if(KD)return hC;KD=1;function r(e,t){return e<t}return hC=r,hC}var fC,GD;function ale(){if(GD)return fC;GD=1;var r=gS(),e=E5(),t=Ml();function n(i){return i&&i.length?r(i,t,e):void 0}return fC=n,fC}var gC,VD;function sle(){if(VD)return gC;VD=1;var r=gS(),e=lo(),t=E5();function n(i,a){return i&&i.length?r(i,e(a,2),t):void 0}return gC=n,gC}var pC,qD;function ole(){if(qD)return pC;qD=1;var r=is(),e=function(){return r.Date.now()};return pC=e,pC}var vC,WD;function Ale(){if(WD)return vC;WD=1;var r=dm(),e=ym(),t=hm(),n=ka(),i=Ch();function a(s,o,A,l){if(!n(s))return s;o=e(o,s);for(var c=-1,u=o.length,h=u-1,g=s;g!=null&&++c<u;){var p=i(o[c]),v=A;if(p==="__proto__"||p==="constructor"||p==="prototype")return s;if(c!=h){var m=g[p];v=l?l(m,p,g):void 0,v===void 0&&(v=n(m)?m:t(o[c+1])?[]:{})}r(g,p,v),g=g[p]}return s}return vC=a,vC}var mC,$D;function lle(){if($D)return mC;$D=1;var r=wm(),e=Ale(),t=ym();function n(i,a,s){for(var o=-1,A=a.length,l={};++o<A;){var c=a[o],u=r(i,c);s(u,c)&&e(l,t(c,i),u)}return l}return mC=n,mC}var yC,YD;function cle(){if(YD)return yC;YD=1;var r=lle(),e=t5();function t(n,i){return r(n,i,function(a,s){return e(n,s)})}return yC=t,yC}var wC,XD;function ule(){if(XD)return wC;XD=1;var r=w5(),e=l5(),t=c5();function n(i){return t(e(i,void 0,r),i+"")}return wC=n,wC}var bC,ZD;function dle(){if(ZD)return bC;ZD=1;var r=cle(),e=ule(),t=e(function(n,i){return n==null?{}:r(n,i)});return bC=t,bC}var _C,JD;function hle(){if(JD)return _C;JD=1;var r=Math.ceil,e=Math.max;function t(n,i,a,s){for(var o=-1,A=e(r((i-n)/(a||1)),0),l=Array(A);A--;)l[s?A:++o]=n,n+=a;return l}return _C=t,_C}var EC,e3;function fle(){if(e3)return EC;e3=1;var r=hle(),e=_m(),t=y5();function n(i){return function(a,s,o){return o&&typeof o!="number"&&e(a,s,o)&&(s=o=void 0),a=t(a),s===void 0?(s=a,a=0):s=t(s),o=o===void 0?a<s?1:-1:t(o),r(a,s,o,i)}}return EC=n,EC}var CC,t3;function gle(){if(t3)return CC;t3=1;var r=fle(),e=r();return CC=e,CC}var BC,n3;function ple(){if(n3)return BC;n3=1;function r(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}return BC=r,BC}var xC,r3;function vle(){if(r3)return xC;r3=1;var r=eu();function e(t,n){if(t!==n){var i=t!==void 0,a=t===null,s=t===t,o=r(t),A=n!==void 0,l=n===null,c=n===n,u=r(n);if(!l&&!u&&!o&&t>n||o&&A&&c&&!l&&!u||a&&A&&c||!i&&c||!s)return 1;if(!a&&!o&&!u&&t<n||u&&i&&s&&!a&&!o||l&&i&&s||!A&&s||!c)return-1}return 0}return xC=e,xC}var SC,i3;function mle(){if(i3)return SC;i3=1;var r=vle();function e(t,n,i){for(var a=-1,s=t.criteria,o=n.criteria,A=s.length,l=i.length;++a<A;){var c=r(s[a],o[a]);if(c){if(a>=l)return c;var u=i[a];return c*(u=="desc"?-1:1)}}return t.index-n.index}return SC=e,SC}var TC,a3;function yle(){if(a3)return TC;a3=1;var r=mm(),e=wm(),t=lo(),n=s5(),i=ple(),a=fm(),s=mle(),o=Ml(),A=gr();function l(c,u,h){u.length?u=r(u,function(v){return A(v)?function(m){return e(m,v.length===1?v[0]:v)}:v}):u=[o];var g=-1;u=r(u,a(t));var p=n(c,function(v,m,w){var b=r(u,function(_){return _(v)});return{criteria:b,index:++g,value:v}});return i(p,function(v,m){return s(v,m,h)})}return TC=l,TC}var MC,s3;function wle(){if(s3)return MC;s3=1;var r=hS(),e=yle(),t=bm(),n=_m(),i=t(function(a,s){if(a==null)return[];var o=s.length;return o>1&&n(a,s[0],s[1])?s=[]:o>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),e(a,r(s,1),[])});return MC=i,MC}var FC,o3;function ble(){if(o3)return FC;o3=1;var r=J6(),e=0;function t(n){var i=++e;return r(n)+i}return FC=t,FC}var kC,A3;function _le(){if(A3)return kC;A3=1;function r(e,t,n){for(var i=-1,a=e.length,s=t.length,o={};++i<a;){var A=i<s?t[i]:void 0;n(o,e[i],A)}return o}return kC=r,kC}var IC,l3;function Ele(){if(l3)return IC;l3=1;var r=dm(),e=_le();function t(n,i){return e(n||[],i||[],r)}return IC=t,IC}var PC,c3;function In(){if(c3)return PC;c3=1;var r;if(typeof Z2=="function")try{r={cloneDeep:QAe(),constant:AS(),defaults:UAe(),each:V6(),filter:r5(),find:qAe(),flatten:w5(),forEach:G6(),forIn:WAe(),has:i5(),isUndefined:a5(),last:$Ae(),map:o5(),mapValues:YAe(),max:ZAe(),merge:ile(),min:ale(),minBy:sle(),now:ole(),pick:dle(),range:gle(),reduce:A5(),sortBy:wle(),uniqueId:ble(),values:h5(),zipObject:Ele()}}catch{}return r||(r=window._),PC=r,PC}var OC,u3;function Cle(){if(u3)return OC;u3=1,OC=r;function r(){var n={};n._next=n._prev=n,this._sentinel=n}r.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return e(i),i},r.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&e(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},r.prototype.toString=function(){for(var n=[],i=this._sentinel,a=i._prev;a!==i;)n.push(JSON.stringify(a,t)),a=a._prev;return"["+n.join(", ")+"]"};function e(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function t(n,i){if(n!=="_next"&&n!=="_prev")return i}return OC}var LC,d3;function Ble(){if(d3)return LC;d3=1;var r=In(),e=ts().Graph,t=Cle();LC=i;var n=r.constant(1);function i(l,c){if(l.nodeCount()<=1)return[];var u=o(l,c||n),h=a(u.graph,u.buckets,u.zeroIdx);return r.flatten(r.map(h,function(g){return l.outEdges(g.v,g.w)}),!0)}function a(l,c,u){for(var h=[],g=c[c.length-1],p=c[0],v;l.nodeCount();){for(;v=p.dequeue();)s(l,c,u,v);for(;v=g.dequeue();)s(l,c,u,v);if(l.nodeCount()){for(var m=c.length-2;m>0;--m)if(v=c[m].dequeue(),v){h=h.concat(s(l,c,u,v,!0));break}}}return h}function s(l,c,u,h,g){var p=g?[]:void 0;return r.forEach(l.inEdges(h.v),function(v){var m=l.edge(v),w=l.node(v.v);g&&p.push({v:v.v,w:v.w}),w.out-=m,A(c,u,w)}),r.forEach(l.outEdges(h.v),function(v){var m=l.edge(v),w=v.w,b=l.node(w);b.in-=m,A(c,u,b)}),l.removeNode(h.v),p}function o(l,c){var u=new e,h=0,g=0;r.forEach(l.nodes(),function(m){u.setNode(m,{v:m,in:0,out:0})}),r.forEach(l.edges(),function(m){var w=u.edge(m.v,m.w)||0,b=c(m),_=w+b;u.setEdge(m.v,m.w,_),g=Math.max(g,u.node(m.v).out+=b),h=Math.max(h,u.node(m.w).in+=b)});var p=r.range(g+h+3).map(function(){return new t}),v=h+1;return r.forEach(u.nodes(),function(m){A(p,v,u.node(m))}),{graph:u,buckets:p,zeroIdx:v}}function A(l,c,u){u.out?u.in?l[u.out-u.in+c].enqueue(u):l[l.length-1].enqueue(u):l[0].enqueue(u)}return LC}var NC,h3;function xle(){if(h3)return NC;h3=1;var r=In(),e=Ble();NC={run:t,undo:i};function t(a){var s=a.graph().acyclicer==="greedy"?e(a,o(a)):n(a);r.forEach(s,function(A){var l=a.edge(A);a.removeEdge(A),l.forwardName=A.name,l.reversed=!0,a.setEdge(A.w,A.v,l,r.uniqueId("rev"))});function o(A){return function(l){return A.edge(l).weight}}}function n(a){var s=[],o={},A={};function l(c){r.has(A,c)||(A[c]=!0,o[c]=!0,r.forEach(a.outEdges(c),function(u){r.has(o,u.w)?s.push(u):l(u.w)}),delete o[c])}return r.forEach(a.nodes(),l),s}function i(a){r.forEach(a.edges(),function(s){var o=a.edge(s);if(o.reversed){a.removeEdge(s);var A=o.forwardName;delete o.reversed,delete o.forwardName,a.setEdge(s.w,s.v,o,A)}})}return NC}var DC,f3;function Hi(){if(f3)return DC;f3=1;var r=In(),e=ts().Graph;DC={addDummyNode:t,simplify:n,asNonCompoundGraph:i,successorWeights:a,predecessorWeights:s,intersectRect:o,buildLayerMatrix:A,normalizeRanks:l,removeEmptyRanks:c,addBorderNode:u,maxRank:h,partition:g,time:p,notime:v};function t(m,w,b,_){var C;do C=r.uniqueId(_);while(m.hasNode(C));return b.dummy=w,m.setNode(C,b),C}function n(m){var w=new e().setGraph(m.graph());return r.forEach(m.nodes(),function(b){w.setNode(b,m.node(b))}),r.forEach(m.edges(),function(b){var _=w.edge(b.v,b.w)||{weight:0,minlen:1},C=m.edge(b);w.setEdge(b.v,b.w,{weight:_.weight+C.weight,minlen:Math.max(_.minlen,C.minlen)})}),w}function i(m){var w=new e({multigraph:m.isMultigraph()}).setGraph(m.graph());return r.forEach(m.nodes(),function(b){m.children(b).length||w.setNode(b,m.node(b))}),r.forEach(m.edges(),function(b){w.setEdge(b,m.edge(b))}),w}function a(m){var w=r.map(m.nodes(),function(b){var _={};return r.forEach(m.outEdges(b),function(C){_[C.w]=(_[C.w]||0)+m.edge(C).weight}),_});return r.zipObject(m.nodes(),w)}function s(m){var w=r.map(m.nodes(),function(b){var _={};return r.forEach(m.inEdges(b),function(C){_[C.v]=(_[C.v]||0)+m.edge(C).weight}),_});return r.zipObject(m.nodes(),w)}function o(m,w){var b=m.x,_=m.y,C=w.x-b,M=w.y-_,F=m.width/2,k=m.height/2;if(!C&&!M)throw new Error("Not possible to find intersection inside of the rectangle");var P,N;return Math.abs(M)*F>Math.abs(C)*k?(M<0&&(k=-k),P=k*C/M,N=k):(C<0&&(F=-F),P=F,N=F*M/C),{x:b+P,y:_+N}}function A(m){var w=r.map(r.range(h(m)+1),function(){return[]});return r.forEach(m.nodes(),function(b){var _=m.node(b),C=_.rank;r.isUndefined(C)||(w[C][_.order]=b)}),w}function l(m){var w=r.min(r.map(m.nodes(),function(b){return m.node(b).rank}));r.forEach(m.nodes(),function(b){var _=m.node(b);r.has(_,"rank")&&(_.rank-=w)})}function c(m){var w=r.min(r.map(m.nodes(),function(M){return m.node(M).rank})),b=[];r.forEach(m.nodes(),function(M){var F=m.node(M).rank-w;b[F]||(b[F]=[]),b[F].push(M)});var _=0,C=m.graph().nodeRankFactor;r.forEach(b,function(M,F){r.isUndefined(M)&&F%C!==0?--_:_&&r.forEach(M,function(k){m.node(k).rank+=_})})}function u(m,w,b,_){var C={width:0,height:0};return arguments.length>=4&&(C.rank=b,C.order=_),t(m,"border",C,w)}function h(m){return r.max(r.map(m.nodes(),function(w){var b=m.node(w).rank;if(!r.isUndefined(b))return b}))}function g(m,w){var b={lhs:[],rhs:[]};return r.forEach(m,function(_){w(_)?b.lhs.push(_):b.rhs.push(_)}),b}function p(m,w){var b=r.now();try{return w()}finally{console.log(m+" time: "+(r.now()-b)+"ms")}}function v(m,w){return w()}return DC}var RC,g3;function Sle(){if(g3)return RC;g3=1;var r=In(),e=Hi();RC={run:t,undo:i};function t(a){a.graph().dummyChains=[],r.forEach(a.edges(),function(s){n(a,s)})}function n(a,s){var o=s.v,A=a.node(o).rank,l=s.w,c=a.node(l).rank,u=s.name,h=a.edge(s),g=h.labelRank;if(c!==A+1){a.removeEdge(s);var p,v,m;for(m=0,++A;A<c;++m,++A)h.points=[],v={width:0,height:0,edgeLabel:h,edgeObj:s,rank:A},p=e.addDummyNode(a,"edge",v,"_d"),A===g&&(v.width=h.width,v.height=h.height,v.dummy="edge-label",v.labelpos=h.labelpos),a.setEdge(o,p,{weight:h.weight},u),m===0&&a.graph().dummyChains.push(p),o=p;a.setEdge(o,l,{weight:h.weight},u)}}function i(a){r.forEach(a.graph().dummyChains,function(s){var o=a.node(s),A=o.edgeLabel,l;for(a.setEdge(o.edgeObj,A);o.dummy;)l=a.successors(s)[0],a.removeNode(s),A.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(A.x=o.x,A.y=o.y,A.width=o.width,A.height=o.height),s=l,o=a.node(s)})}return RC}var QC,p3;function av(){if(p3)return QC;p3=1;var r=In();QC={longestPath:e,slack:t};function e(n){var i={};function a(s){var o=n.node(s);if(r.has(i,s))return o.rank;i[s]=!0;var A=r.min(r.map(n.outEdges(s),function(l){return a(l.w)-n.edge(l).minlen}));return(A===Number.POSITIVE_INFINITY||A===void 0||A===null)&&(A=0),o.rank=A}r.forEach(n.sources(),a)}function t(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen}return QC}var UC,v3;function C5(){if(v3)return UC;v3=1;var r=In(),e=ts().Graph,t=av().slack;UC=n;function n(o){var A=new e({directed:!1}),l=o.nodes()[0],c=o.nodeCount();A.setNode(l,{});for(var u,h;i(A,o)<c;)u=a(A,o),h=A.hasNode(u.v)?t(o,u):-t(o,u),s(A,o,h);return A}function i(o,A){function l(c){r.forEach(A.nodeEdges(c),function(u){var h=u.v,g=c===h?u.w:h;!o.hasNode(g)&&!t(A,u)&&(o.setNode(g,{}),o.setEdge(c,g,{}),l(g))})}return r.forEach(o.nodes(),l),o.nodeCount()}function a(o,A){return r.minBy(A.edges(),function(l){if(o.hasNode(l.v)!==o.hasNode(l.w))return t(A,l)})}function s(o,A,l){r.forEach(o.nodes(),function(c){A.node(c).rank+=l})}return UC}var HC,m3;function Tle(){if(m3)return HC;m3=1;var r=In(),e=C5(),t=av().slack,n=av().longestPath,i=ts().alg.preorder,a=ts().alg.postorder,s=Hi().simplify;HC=o,o.initLowLimValues=u,o.initCutValues=A,o.calcCutValue=c,o.leaveEdge=g,o.enterEdge=p,o.exchangeEdges=v;function o(_){_=s(_),n(_);var C=e(_);u(C),A(C,_);for(var M,F;M=g(C);)F=p(C,_,M),v(C,_,M,F)}function A(_,C){var M=a(_,_.nodes());M=M.slice(0,M.length-1),r.forEach(M,function(F){l(_,C,F)})}function l(_,C,M){var F=_.node(M),k=F.parent;_.edge(M,k).cutvalue=c(_,C,M)}function c(_,C,M){var F=_.node(M),k=F.parent,P=!0,N=C.edge(M,k),D=0;return N||(P=!1,N=C.edge(k,M)),D=N.weight,r.forEach(C.nodeEdges(M),function(Q){var H=Q.v===M,j=H?Q.w:Q.v;if(j!==k){var q=H===P,J=C.edge(Q).weight;if(D+=q?J:-J,w(_,M,j)){var ce=_.edge(M,j).cutvalue;D+=q?-ce:ce}}}),D}function u(_,C){arguments.length<2&&(C=_.nodes()[0]),h(_,{},1,C)}function h(_,C,M,F,k){var P=M,N=_.node(F);return C[F]=!0,r.forEach(_.neighbors(F),function(D){r.has(C,D)||(M=h(_,C,M,D,F))}),N.low=P,N.lim=M++,k?N.parent=k:delete N.parent,M}function g(_){return r.find(_.edges(),function(C){return _.edge(C).cutvalue<0})}function p(_,C,M){var F=M.v,k=M.w;C.hasEdge(F,k)||(F=M.w,k=M.v);var P=_.node(F),N=_.node(k),D=P,Q=!1;P.lim>N.lim&&(D=N,Q=!0);var H=r.filter(C.edges(),function(j){return Q===b(_,_.node(j.v),D)&&Q!==b(_,_.node(j.w),D)});return r.minBy(H,function(j){return t(C,j)})}function v(_,C,M,F){var k=M.v,P=M.w;_.removeEdge(k,P),_.setEdge(F.v,F.w,{}),u(_),A(_,C),m(_,C)}function m(_,C){var M=r.find(_.nodes(),function(k){return!C.node(k).parent}),F=i(_,M);F=F.slice(1),r.forEach(F,function(k){var P=_.node(k).parent,N=C.edge(k,P),D=!1;N||(N=C.edge(P,k),D=!0),C.node(k).rank=C.node(P).rank+(D?N.minlen:-N.minlen)})}function w(_,C,M){return _.hasEdge(C,M)}function b(_,C,M){return M.low<=C.lim&&C.lim<=M.lim}return HC}var zC,y3;function Mle(){if(y3)return zC;y3=1;var r=av(),e=r.longestPath,t=C5(),n=Tle();zC=i;function i(A){switch(A.graph().ranker){case"network-simplex":o(A);break;case"tight-tree":s(A);break;case"longest-path":a(A);break;default:o(A)}}var a=e;function s(A){e(A),t(A)}function o(A){n(A)}return zC}var jC,w3;function Fle(){if(w3)return jC;w3=1;var r=In();jC=e;function e(i){var a=n(i);r.forEach(i.graph().dummyChains,function(s){for(var o=i.node(s),A=o.edgeObj,l=t(i,a,A.v,A.w),c=l.path,u=l.lca,h=0,g=c[h],p=!0;s!==A.w;){if(o=i.node(s),p){for(;(g=c[h])!==u&&i.node(g).maxRank<o.rank;)h++;g===u&&(p=!1)}if(!p){for(;h<c.length-1&&i.node(g=c[h+1]).minRank<=o.rank;)h++;g=c[h]}i.setParent(s,g),s=i.successors(s)[0]}})}function t(i,a,s,o){var A=[],l=[],c=Math.min(a[s].low,a[o].low),u=Math.max(a[s].lim,a[o].lim),h,g;h=s;do h=i.parent(h),A.push(h);while(h&&(a[h].low>c||u>a[h].lim));for(g=h,h=o;(h=i.parent(h))!==g;)l.push(h);return{path:A.concat(l.reverse()),lca:g}}function n(i){var a={},s=0;function o(A){var l=s;r.forEach(i.children(A),o),a[A]={low:l,lim:s++}}return r.forEach(i.children(),o),a}return jC}var KC,b3;function kle(){if(b3)return KC;b3=1;var r=In(),e=Hi();KC={run:t,cleanup:s};function t(o){var A=e.addDummyNode(o,"root",{},"_root"),l=i(o),c=r.max(r.values(l))-1,u=2*c+1;o.graph().nestingRoot=A,r.forEach(o.edges(),function(g){o.edge(g).minlen*=u});var h=a(o)+1;r.forEach(o.children(),function(g){n(o,A,u,h,c,l,g)}),o.graph().nodeRankFactor=u}function n(o,A,l,c,u,h,g){var p=o.children(g);if(!p.length){g!==A&&o.setEdge(A,g,{weight:0,minlen:l});return}var v=e.addBorderNode(o,"_bt"),m=e.addBorderNode(o,"_bb"),w=o.node(g);o.setParent(v,g),w.borderTop=v,o.setParent(m,g),w.borderBottom=m,r.forEach(p,function(b){n(o,A,l,c,u,h,b);var _=o.node(b),C=_.borderTop?_.borderTop:b,M=_.borderBottom?_.borderBottom:b,F=_.borderTop?c:2*c,k=C!==M?1:u-h[g]+1;o.setEdge(v,C,{weight:F,minlen:k,nestingEdge:!0}),o.setEdge(M,m,{weight:F,minlen:k,nestingEdge:!0})}),o.parent(g)||o.setEdge(A,v,{weight:0,minlen:u+h[g]})}function i(o){var A={};function l(c,u){var h=o.children(c);h&&h.length&&r.forEach(h,function(g){l(g,u+1)}),A[c]=u}return r.forEach(o.children(),function(c){l(c,1)}),A}function a(o){return r.reduce(o.edges(),function(A,l){return A+o.edge(l).weight},0)}function s(o){var A=o.graph();o.removeNode(A.nestingRoot),delete A.nestingRoot,r.forEach(o.edges(),function(l){var c=o.edge(l);c.nestingEdge&&o.removeEdge(l)})}return KC}var GC,_3;function Ile(){if(_3)return GC;_3=1;var r=In(),e=Hi();GC=t;function t(i){function a(s){var o=i.children(s),A=i.node(s);if(o.length&&r.forEach(o,a),r.has(A,"minRank")){A.borderLeft=[],A.borderRight=[];for(var l=A.minRank,c=A.maxRank+1;l<c;++l)n(i,"borderLeft","_bl",s,A,l),n(i,"borderRight","_br",s,A,l)}}r.forEach(i.children(),a)}function n(i,a,s,o,A,l){var c={width:0,height:0,rank:l,borderType:a},u=A[a][l-1],h=e.addDummyNode(i,"border",c,s);A[a][l]=h,i.setParent(h,o),u&&i.setEdge(u,h,{weight:1})}return GC}var VC,E3;function Ple(){if(E3)return VC;E3=1;var r=In();VC={adjust:e,undo:t};function e(l){var c=l.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&n(l)}function t(l){var c=l.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&a(l),(c==="lr"||c==="rl")&&(o(l),n(l))}function n(l){r.forEach(l.nodes(),function(c){i(l.node(c))}),r.forEach(l.edges(),function(c){i(l.edge(c))})}function i(l){var c=l.width;l.width=l.height,l.height=c}function a(l){r.forEach(l.nodes(),function(c){s(l.node(c))}),r.forEach(l.edges(),function(c){var u=l.edge(c);r.forEach(u.points,s),r.has(u,"y")&&s(u)})}function s(l){l.y=-l.y}function o(l){r.forEach(l.nodes(),function(c){A(l.node(c))}),r.forEach(l.edges(),function(c){var u=l.edge(c);r.forEach(u.points,A),r.has(u,"x")&&A(u)})}function A(l){var c=l.x;l.x=l.y,l.y=c}return VC}var qC,C3;function Ole(){if(C3)return qC;C3=1;var r=In();qC=e;function e(t){var n={},i=r.filter(t.nodes(),function(l){return!t.children(l).length}),a=r.max(r.map(i,function(l){return t.node(l).rank})),s=r.map(r.range(a+1),function(){return[]});function o(l){if(!r.has(n,l)){n[l]=!0;var c=t.node(l);s[c.rank].push(l),r.forEach(t.successors(l),o)}}var A=r.sortBy(i,function(l){return t.node(l).rank});return r.forEach(A,o),s}return qC}var WC,B3;function Lle(){if(B3)return WC;B3=1;var r=In();WC=e;function e(n,i){for(var a=0,s=1;s<i.length;++s)a+=t(n,i[s-1],i[s]);return a}function t(n,i,a){for(var s=r.zipObject(a,r.map(a,function(h,g){return g})),o=r.flatten(r.map(i,function(h){return r.sortBy(r.map(n.outEdges(h),function(g){return{pos:s[g.w],weight:n.edge(g).weight}}),"pos")}),!0),A=1;A<a.length;)A<<=1;var l=2*A-1;A-=1;var c=r.map(new Array(l),function(){return 0}),u=0;return r.forEach(o.forEach(function(h){var g=h.pos+A;c[g]+=h.weight;for(var p=0;g>0;)g%2&&(p+=c[g+1]),g=g-1>>1,c[g]+=h.weight;u+=h.weight*p})),u}return WC}var $C,x3;function Nle(){if(x3)return $C;x3=1;var r=In();$C=e;function e(t,n){return r.map(n,function(i){var a=t.inEdges(i);if(a.length){var s=r.reduce(a,function(o,A){var l=t.edge(A),c=t.node(A.v);return{sum:o.sum+l.weight*c.order,weight:o.weight+l.weight}},{sum:0,weight:0});return{v:i,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:i}})}return $C}var YC,S3;function Dle(){if(S3)return YC;S3=1;var r=In();YC=e;function e(i,a){var s={};r.forEach(i,function(A,l){var c=s[A.v]={indegree:0,in:[],out:[],vs:[A.v],i:l};r.isUndefined(A.barycenter)||(c.barycenter=A.barycenter,c.weight=A.weight)}),r.forEach(a.edges(),function(A){var l=s[A.v],c=s[A.w];!r.isUndefined(l)&&!r.isUndefined(c)&&(c.indegree++,l.out.push(s[A.w]))});var o=r.filter(s,function(A){return!A.indegree});return t(o)}function t(i){var a=[];function s(l){return function(c){c.merged||(r.isUndefined(c.barycenter)||r.isUndefined(l.barycenter)||c.barycenter>=l.barycenter)&&n(l,c)}}function o(l){return function(c){c.in.push(l),--c.indegree===0&&i.push(c)}}for(;i.length;){var A=i.pop();a.push(A),r.forEach(A.in.reverse(),s(A)),r.forEach(A.out,o(A))}return r.map(r.filter(a,function(l){return!l.merged}),function(l){return r.pick(l,["vs","i","barycenter","weight"])})}function n(i,a){var s=0,o=0;i.weight&&(s+=i.barycenter*i.weight,o+=i.weight),a.weight&&(s+=a.barycenter*a.weight,o+=a.weight),i.vs=a.vs.concat(i.vs),i.barycenter=s/o,i.weight=o,i.i=Math.min(a.i,i.i),a.merged=!0}return YC}var XC,T3;function Rle(){if(T3)return XC;T3=1;var r=In(),e=Hi();XC=t;function t(a,s){var o=e.partition(a,function(v){return r.has(v,"barycenter")}),A=o.lhs,l=r.sortBy(o.rhs,function(v){return-v.i}),c=[],u=0,h=0,g=0;A.sort(i(!!s)),g=n(c,l,g),r.forEach(A,function(v){g+=v.vs.length,c.push(v.vs),u+=v.barycenter*v.weight,h+=v.weight,g=n(c,l,g)});var p={vs:r.flatten(c,!0)};return h&&(p.barycenter=u/h,p.weight=h),p}function n(a,s,o){for(var A;s.length&&(A=r.last(s)).i<=o;)s.pop(),a.push(A.vs),o++;return o}function i(a){return function(s,o){return s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:a?o.i-s.i:s.i-o.i}}return XC}var ZC,M3;function Qle(){if(M3)return ZC;M3=1;var r=In(),e=Nle(),t=Dle(),n=Rle();ZC=i;function i(o,A,l,c){var u=o.children(A),h=o.node(A),g=h?h.borderLeft:void 0,p=h?h.borderRight:void 0,v={};g&&(u=r.filter(u,function(M){return M!==g&&M!==p}));var m=e(o,u);r.forEach(m,function(M){if(o.children(M.v).length){var F=i(o,M.v,l,c);v[M.v]=F,r.has(F,"barycenter")&&s(M,F)}});var w=t(m,l);a(w,v);var b=n(w,c);if(g&&(b.vs=r.flatten([g,b.vs,p],!0),o.predecessors(g).length)){var _=o.node(o.predecessors(g)[0]),C=o.node(o.predecessors(p)[0]);r.has(b,"barycenter")||(b.barycenter=0,b.weight=0),b.barycenter=(b.barycenter*b.weight+_.order+C.order)/(b.weight+2),b.weight+=2}return b}function a(o,A){r.forEach(o,function(l){l.vs=r.flatten(l.vs.map(function(c){return A[c]?A[c].vs:c}),!0)})}function s(o,A){r.isUndefined(o.barycenter)?(o.barycenter=A.barycenter,o.weight=A.weight):(o.barycenter=(o.barycenter*o.weight+A.barycenter*A.weight)/(o.weight+A.weight),o.weight+=A.weight)}return ZC}var JC,F3;function Ule(){if(F3)return JC;F3=1;var r=In(),e=ts().Graph;JC=t;function t(i,a,s){var o=n(i),A=new e({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(l){return i.node(l)});return r.forEach(i.nodes(),function(l){var c=i.node(l),u=i.parent(l);(c.rank===a||c.minRank<=a&&a<=c.maxRank)&&(A.setNode(l),A.setParent(l,u||o),r.forEach(i[s](l),function(h){var g=h.v===l?h.w:h.v,p=A.edge(g,l),v=r.isUndefined(p)?0:p.weight;A.setEdge(g,l,{weight:i.edge(h).weight+v})}),r.has(c,"minRank")&&A.setNode(l,{borderLeft:c.borderLeft[a],borderRight:c.borderRight[a]}))}),A}function n(i){for(var a;i.hasNode(a=r.uniqueId("_root")););return a}return JC}var eB,k3;function Hle(){if(k3)return eB;k3=1;var r=In();eB=e;function e(t,n,i){var a={},s;r.forEach(i,function(o){for(var A=t.parent(o),l,c;A;){if(l=t.parent(A),l?(c=a[l],a[l]=A):(c=s,s=A),c&&c!==A){n.setEdge(c,A);return}A=l}})}return eB}var tB,I3;function zle(){if(I3)return tB;I3=1;var r=In(),e=Ole(),t=Lle(),n=Qle(),i=Ule(),a=Hle(),s=ts().Graph,o=Hi();tB=A;function A(h){var g=o.maxRank(h),p=l(h,r.range(1,g+1),"inEdges"),v=l(h,r.range(g-1,-1,-1),"outEdges"),m=e(h);u(h,m);for(var w=Number.POSITIVE_INFINITY,b,_=0,C=0;C<4;++_,++C){c(_%2?p:v,_%4>=2),m=o.buildLayerMatrix(h);var M=t(h,m);M<w&&(C=0,b=r.cloneDeep(m),w=M)}u(h,b)}function l(h,g,p){return r.map(g,function(v){return i(h,v,p)})}function c(h,g){var p=new s;r.forEach(h,function(v){var m=v.graph().root,w=n(v,m,p,g);r.forEach(w.vs,function(b,_){v.node(b).order=_}),a(v,p,w.vs)})}function u(h,g){r.forEach(g,function(p){r.forEach(p,function(v,m){h.node(v).order=m})})}return tB}var nB,P3;function jle(){if(P3)return nB;P3=1;var r=In(),e=ts().Graph,t=Hi();nB={positionX:p,findType1Conflicts:n,findType2Conflicts:i,addConflict:s,hasConflict:o,verticalAlignment:A,horizontalCompaction:l,alignCoordinates:h,findSmallestWidthAlignment:u,balance:g};function n(w,b){var _={};function C(M,F){var k=0,P=0,N=M.length,D=r.last(F);return r.forEach(F,function(Q,H){var j=a(w,Q),q=j?w.node(j).order:N;(j||Q===D)&&(r.forEach(F.slice(P,H+1),function(J){r.forEach(w.predecessors(J),function(ce){var se=w.node(ce),W=se.order;(W<k||q<W)&&!(se.dummy&&w.node(J).dummy)&&s(_,ce,J)})}),P=H+1,k=q)}),F}return r.reduce(b,C),_}function i(w,b){var _={};function C(F,k,P,N,D){var Q;r.forEach(r.range(k,P),function(H){Q=F[H],w.node(Q).dummy&&r.forEach(w.predecessors(Q),function(j){var q=w.node(j);q.dummy&&(q.order<N||q.order>D)&&s(_,j,Q)})})}function M(F,k){var P=-1,N,D=0;return r.forEach(k,function(Q,H){if(w.node(Q).dummy==="border"){var j=w.predecessors(Q);j.length&&(N=w.node(j[0]).order,C(k,D,H,P,N),D=H,P=N)}C(k,D,k.length,N,F.length)}),k}return r.reduce(b,M),_}function a(w,b){if(w.node(b).dummy)return r.find(w.predecessors(b),function(_){return w.node(_).dummy})}function s(w,b,_){if(b>_){var C=b;b=_,_=C}var M=w[b];M||(w[b]=M={}),M[_]=!0}function o(w,b,_){if(b>_){var C=b;b=_,_=C}return r.has(w[b],_)}function A(w,b,_,C){var M={},F={},k={};return r.forEach(b,function(P){r.forEach(P,function(N,D){M[N]=N,F[N]=N,k[N]=D})}),r.forEach(b,function(P){var N=-1;r.forEach(P,function(D){var Q=C(D);if(Q.length){Q=r.sortBy(Q,function(ce){return k[ce]});for(var H=(Q.length-1)/2,j=Math.floor(H),q=Math.ceil(H);j<=q;++j){var J=Q[j];F[D]===D&&N<k[J]&&!o(_,D,J)&&(F[J]=D,F[D]=M[D]=M[J],N=k[J])}}})}),{root:M,align:F}}function l(w,b,_,C,M){var F={},k=c(w,b,_,M),P=M?"borderLeft":"borderRight";function N(H,j){for(var q=k.nodes(),J=q.pop(),ce={};J;)ce[J]?H(J):(ce[J]=!0,q.push(J),q=q.concat(j(J))),J=q.pop()}function D(H){F[H]=k.inEdges(H).reduce(function(j,q){return Math.max(j,F[q.v]+k.edge(q))},0)}function Q(H){var j=k.outEdges(H).reduce(function(J,ce){return Math.min(J,F[ce.w]-k.edge(ce))},Number.POSITIVE_INFINITY),q=w.node(H);j!==Number.POSITIVE_INFINITY&&q.borderType!==P&&(F[H]=Math.max(F[H],j))}return N(D,k.predecessors.bind(k)),N(Q,k.successors.bind(k)),r.forEach(C,function(H){F[H]=F[_[H]]}),F}function c(w,b,_,C){var M=new e,F=w.graph(),k=v(F.nodesep,F.edgesep,C);return r.forEach(b,function(P){var N;r.forEach(P,function(D){var Q=_[D];if(M.setNode(Q),N){var H=_[N],j=M.edge(H,Q);M.setEdge(H,Q,Math.max(k(w,D,N),j||0))}N=D})}),M}function u(w,b){return r.minBy(r.values(b),function(_){var C=Number.NEGATIVE_INFINITY,M=Number.POSITIVE_INFINITY;return r.forIn(_,function(F,k){var P=m(w,k)/2;C=Math.max(F+P,C),M=Math.min(F-P,M)}),C-M})}function h(w,b){var _=r.values(b),C=r.min(_),M=r.max(_);r.forEach(["u","d"],function(F){r.forEach(["l","r"],function(k){var P=F+k,N=w[P],D;if(N!==b){var Q=r.values(N);D=k==="l"?C-r.min(Q):M-r.max(Q),D&&(w[P]=r.mapValues(N,function(H){return H+D}))}})})}function g(w,b){return r.mapValues(w.ul,function(_,C){if(b)return w[b.toLowerCase()][C];var M=r.sortBy(r.map(w,C));return(M[1]+M[2])/2})}function p(w){var b=t.buildLayerMatrix(w),_=r.merge(n(w,b),i(w,b)),C={},M;r.forEach(["u","d"],function(k){M=k==="u"?b:r.values(b).reverse(),r.forEach(["l","r"],function(P){P==="r"&&(M=r.map(M,function(H){return r.values(H).reverse()}));var N=(k==="u"?w.predecessors:w.successors).bind(w),D=A(w,M,_,N),Q=l(w,M,D.root,D.align,P==="r");P==="r"&&(Q=r.mapValues(Q,function(H){return-H})),C[k+P]=Q})});var F=u(w,C);return h(C,F),g(C,w.graph().align)}function v(w,b,_){return function(C,M,F){var k=C.node(M),P=C.node(F),N=0,D;if(N+=k.width/2,r.has(k,"labelpos"))switch(k.labelpos.toLowerCase()){case"l":D=-k.width/2;break;case"r":D=k.width/2;break}if(D&&(N+=_?D:-D),D=0,N+=(k.dummy?b:w)/2,N+=(P.dummy?b:w)/2,N+=P.width/2,r.has(P,"labelpos"))switch(P.labelpos.toLowerCase()){case"l":D=P.width/2;break;case"r":D=-P.width/2;break}return D&&(N+=_?D:-D),D=0,N}}function m(w,b){return w.node(b).width}return nB}var rB,O3;function Kle(){if(O3)return rB;O3=1;var r=In(),e=Hi(),t=jle().positionX;rB=n;function n(a){a=e.asNonCompoundGraph(a),i(a),r.forEach(t(a),function(s,o){a.node(o).x=s})}function i(a){var s=e.buildLayerMatrix(a),o=a.graph().ranksep,A=0;r.forEach(s,function(l){var c=r.max(r.map(l,function(u){return a.node(u).height}));r.forEach(l,function(u){a.node(u).y=A+c/2}),A+=c+o})}return rB}var iB,L3;function Gle(){if(L3)return iB;L3=1;var r=In(),e=xle(),t=Sle(),n=Mle(),i=Hi().normalizeRanks,a=Fle(),s=Hi().removeEmptyRanks,o=kle(),A=Ile(),l=Ple(),c=zle(),u=Kle(),h=Hi(),g=ts().Graph;iB=p;function p(te,$){var ue=$&&$.debugTiming?h.time:h.notime;ue("layout",function(){var me=ue("  buildLayoutGraph",function(){return N(te)});ue("  runLayout",function(){v(me,ue)}),ue("  updateInputGraph",function(){m(te,me)})})}function v(te,$){$("    makeSpaceForEdgeLabels",function(){D(te)}),$("    removeSelfEdges",function(){le(te)}),$("    acyclic",function(){e.run(te)}),$("    nestingGraph.run",function(){o.run(te)}),$("    rank",function(){n(h.asNonCompoundGraph(te))}),$("    injectEdgeLabelProxies",function(){Q(te)}),$("    removeEmptyRanks",function(){s(te)}),$("    nestingGraph.cleanup",function(){o.cleanup(te)}),$("    normalizeRanks",function(){i(te)}),$("    assignRankMinMax",function(){H(te)}),$("    removeEdgeLabelProxies",function(){j(te)}),$("    normalize.run",function(){t.run(te)}),$("    parentDummyChains",function(){a(te)}),$("    addBorderSegments",function(){A(te)}),$("    order",function(){c(te)}),$("    insertSelfEdges",function(){fe(te)}),$("    adjustCoordinateSystem",function(){l.adjust(te)}),$("    position",function(){u(te)}),$("    positionSelfEdges",function(){X(te)}),$("    removeBorderNodes",function(){W(te)}),$("    normalize.undo",function(){t.undo(te)}),$("    fixupEdgeLabelCoords",function(){ce(te)}),$("    undoCoordinateSystem",function(){l.undo(te)}),$("    translateGraph",function(){q(te)}),$("    assignNodeIntersects",function(){J(te)}),$("    reversePoints",function(){se(te)}),$("    acyclic.undo",function(){e.undo(te)})}function m(te,$){r.forEach(te.nodes(),function(ue){var me=te.node(ue),Te=$.node(ue);me&&(me.x=Te.x,me.y=Te.y,$.children(ue).length&&(me.width=Te.width,me.height=Te.height))}),r.forEach(te.edges(),function(ue){var me=te.edge(ue),Te=$.edge(ue);me.points=Te.points,r.has(Te,"x")&&(me.x=Te.x,me.y=Te.y)}),te.graph().width=$.graph().width,te.graph().height=$.graph().height}var w=["nodesep","edgesep","ranksep","marginx","marginy"],b={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},_=["acyclicer","ranker","rankdir","align"],C=["width","height"],M={width:0,height:0},F=["minlen","weight","width","height","labeloffset"],k={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},P=["labelpos"];function N(te){var $=new g({multigraph:!0,compound:!0}),ue=Ie(te.graph());return $.setGraph(r.merge({},b,ne(ue,w),r.pick(ue,_))),r.forEach(te.nodes(),function(me){var Te=Ie(te.node(me));$.setNode(me,r.defaults(ne(Te,C),M)),$.setParent(me,te.parent(me))}),r.forEach(te.edges(),function(me){var Te=Ie(te.edge(me));$.setEdge(me,r.merge({},k,ne(Te,F),r.pick(Te,P)))}),$}function D(te){var $=te.graph();$.ranksep/=2,r.forEach(te.edges(),function(ue){var me=te.edge(ue);me.minlen*=2,me.labelpos.toLowerCase()!=="c"&&($.rankdir==="TB"||$.rankdir==="BT"?me.width+=me.labeloffset:me.height+=me.labeloffset)})}function Q(te){r.forEach(te.edges(),function($){var ue=te.edge($);if(ue.width&&ue.height){var me=te.node($.v),Te=te.node($.w),He={rank:(Te.rank-me.rank)/2+me.rank,e:$};h.addDummyNode(te,"edge-proxy",He,"_ep")}})}function H(te){var $=0;r.forEach(te.nodes(),function(ue){var me=te.node(ue);me.borderTop&&(me.minRank=te.node(me.borderTop).rank,me.maxRank=te.node(me.borderBottom).rank,$=r.max($,me.maxRank))}),te.graph().maxRank=$}function j(te){r.forEach(te.nodes(),function($){var ue=te.node($);ue.dummy==="edge-proxy"&&(te.edge(ue.e).labelRank=ue.rank,te.removeNode($))})}function q(te){var $=Number.POSITIVE_INFINITY,ue=0,me=Number.POSITIVE_INFINITY,Te=0,He=te.graph(),Je=He.marginx||0,Bt=He.marginy||0;function Lt(kt){var zt=kt.x,ot=kt.y,Qt=kt.width,Ct=kt.height;$=Math.min($,zt-Qt/2),ue=Math.max(ue,zt+Qt/2),me=Math.min(me,ot-Ct/2),Te=Math.max(Te,ot+Ct/2)}r.forEach(te.nodes(),function(kt){Lt(te.node(kt))}),r.forEach(te.edges(),function(kt){var zt=te.edge(kt);r.has(zt,"x")&&Lt(zt)}),$-=Je,me-=Bt,r.forEach(te.nodes(),function(kt){var zt=te.node(kt);zt.x-=$,zt.y-=me}),r.forEach(te.edges(),function(kt){var zt=te.edge(kt);r.forEach(zt.points,function(ot){ot.x-=$,ot.y-=me}),r.has(zt,"x")&&(zt.x-=$),r.has(zt,"y")&&(zt.y-=me)}),He.width=ue-$+Je,He.height=Te-me+Bt}function J(te){r.forEach(te.edges(),function($){var ue=te.edge($),me=te.node($.v),Te=te.node($.w),He,Je;ue.points?(He=ue.points[0],Je=ue.points[ue.points.length-1]):(ue.points=[],He=Te,Je=me),ue.points.unshift(h.intersectRect(me,He)),ue.points.push(h.intersectRect(Te,Je))})}function ce(te){r.forEach(te.edges(),function($){var ue=te.edge($);if(r.has(ue,"x"))switch((ue.labelpos==="l"||ue.labelpos==="r")&&(ue.width-=ue.labeloffset),ue.labelpos){case"l":ue.x-=ue.width/2+ue.labeloffset;break;case"r":ue.x+=ue.width/2+ue.labeloffset;break}})}function se(te){r.forEach(te.edges(),function($){var ue=te.edge($);ue.reversed&&ue.points.reverse()})}function W(te){r.forEach(te.nodes(),function($){if(te.children($).length){var ue=te.node($),me=te.node(ue.borderTop),Te=te.node(ue.borderBottom),He=te.node(r.last(ue.borderLeft)),Je=te.node(r.last(ue.borderRight));ue.width=Math.abs(Je.x-He.x),ue.height=Math.abs(Te.y-me.y),ue.x=He.x+ue.width/2,ue.y=me.y+ue.height/2}}),r.forEach(te.nodes(),function($){te.node($).dummy==="border"&&te.removeNode($)})}function le(te){r.forEach(te.edges(),function($){if($.v===$.w){var ue=te.node($.v);ue.selfEdges||(ue.selfEdges=[]),ue.selfEdges.push({e:$,label:te.edge($)}),te.removeEdge($)}})}function fe(te){var $=h.buildLayerMatrix(te);r.forEach($,function(ue){var me=0;r.forEach(ue,function(Te,He){var Je=te.node(Te);Je.order=He+me,r.forEach(Je.selfEdges,function(Bt){h.addDummyNode(te,"selfedge",{width:Bt.label.width,height:Bt.label.height,rank:Je.rank,order:He+ ++me,e:Bt.e,label:Bt.label},"_se")}),delete Je.selfEdges})})}function X(te){r.forEach(te.nodes(),function($){var ue=te.node($);if(ue.dummy==="selfedge"){var me=te.node(ue.e.v),Te=me.x+me.width/2,He=me.y,Je=ue.x-Te,Bt=me.height/2;te.setEdge(ue.e,ue.label),te.removeNode($),ue.label.points=[{x:Te+2*Je/3,y:He-Bt},{x:Te+5*Je/6,y:He-Bt},{x:Te+Je,y:He},{x:Te+5*Je/6,y:He+Bt},{x:Te+2*Je/3,y:He+Bt}],ue.label.x=ue.x,ue.label.y=ue.y}})}function ne(te,$){return r.mapValues(r.pick(te,$),Number)}function Ie(te){var $={};return r.forEach(te,function(ue,me){$[me.toLowerCase()]=ue}),$}return iB}var aB,N3;function Vle(){if(N3)return aB;N3=1;var r=In(),e=Hi(),t=ts().Graph;aB={debugOrdering:n};function n(i){var a=e.buildLayerMatrix(i),s=new t({compound:!0,multigraph:!0}).setGraph({});return r.forEach(i.nodes(),function(o){s.setNode(o,{label:o}),s.setParent(o,"layer"+i.node(o).rank)}),r.forEach(i.edges(),function(o){s.setEdge(o.v,o.w,{},o.name)}),r.forEach(a,function(o,A){var l="layer"+A;s.setNode(l,{rank:"same"}),r.reduce(o,function(c,u){return s.setEdge(c,u,{style:"invis"}),u})}),s}return aB}var sB,D3;function qle(){return D3||(D3=1,sB="0.8.5"),sB}var oB,R3;function Wle(){return R3||(R3=1,oB={graphlib:ts(),layout:Gle(),debug:Vle(),util:{time:Hi().time,notime:Hi().notime},version:qle()}),oB}var B5=Wle();const $le=Vc(B5);class Em{constructor(e){this.id="dagre",this.options={},Object.assign(this.options,Em.defaultOptions,e)}execute(e,t){return St(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,e,Object.assign(Object.assign({},this.options),t))})}assign(e,t){return St(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,e,Object.assign(Object.assign({},this.options),t))})}genericDagreLayout(e,t,n){return St(this,void 0,void 0,function*(){const{nodeSize:i}=n,a=new B5.graphlib.Graph;a.setGraph(n),a.setDefaultEdgeLabel(()=>({}));const s=t.getAllNodes(),o=t.getAllEdges();[...s,...o].some(({id:l})=>je(l))&&console.error("Dagre layout only support string id, it will convert number to string."),t.getAllNodes().forEach(l=>{const{id:c}=l,u=Object.assign({},l.data);if(i!==void 0){const[h,g]=yh($e(i)?i(l):i);Object.assign(u,{width:h,height:g})}a.setNode(c.toString(),u)}),t.getAllEdges().forEach(({id:l,source:c,target:u})=>{a.setEdge(c.toString(),u.toString(),{id:l})}),$le.layout(a);const A={nodes:[],edges:[]};return a.nodes().forEach(l=>{const c=a.node(l);A.nodes.push({id:l,data:c}),e&&t.mergeNodeData(l,c)}),a.edges().forEach(l=>{const c=a.edge(l),{id:u}=c,h=Sn(c,["id"]),{v:g,w:p}=l;A.edges.push({id:u,source:g,target:p,data:h}),e&&t.mergeEdgeData(u,h)}),A})}}Em.defaultOptions={};class pS{constructor(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}distanceTo(e){const t=this.rx-e.rx,n=this.ry-e.ry;return Math.hypot(t,n)}setPos(e,t){this.rx=e,this.ry=t}resetForce(){this.fx=0,this.fy=0}addForce(e){const t=e.rx-this.rx,n=e.ry-this.ry;let i=Math.hypot(t,n);i=i<1e-4?1e-4:i;const a=this.g*(this.degree+1)*(e.degree+1)/i;this.fx+=a*t/i,this.fy+=a*n/i}in(e){return e.contains(this.rx,this.ry)}add(e){const t=this.mass+e.mass,n=(this.rx*this.mass+e.rx*e.mass)/t,i=(this.ry*this.mass+e.ry*e.mass)/t,a=this.degree+e.degree,s={rx:n,ry:i,mass:t,degree:a};return new pS(s)}}class Cc{constructor(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}getLength(){return this.length}contains(e,t){const n=this.length/2;return e<=this.xmid+n&&e>=this.xmid-n&&t<=this.ymid+n&&t>=this.ymid-n}NW(){const e=this.xmid-this.length/4,t=this.ymid+this.length/4,n=this.length/2,i={xmid:e,ymid:t,length:n};return new Cc(i)}NE(){const e=this.xmid+this.length/4,t=this.ymid+this.length/4,n=this.length/2,i={xmid:e,ymid:t,length:n};return new Cc(i)}SW(){const e=this.xmid-this.length/4,t=this.ymid-this.length/4,n=this.length/2,i={xmid:e,ymid:t,length:n};return new Cc(i)}SE(){const e=this.xmid+this.length/4,t=this.ymid-this.length/4,n=this.length/2,i={xmid:e,ymid:t,length:n};return new Cc(i)}}class Bc{constructor(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,e!=null&&(this.quad=e)}insert(e){if(this.body==null){this.body=e;return}this._isExternal()?(this.quad&&(this.NW=new Bc(this.quad.NW()),this.NE=new Bc(this.quad.NE()),this.SW=new Bc(this.quad.SW()),this.SE=new Bc(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e))}_putBody(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(e){if(!(this.body==null||e===this.body))if(this._isExternal())e.addForce(this.body);else{const t=this.quad?this.quad.getLength():0,n=this.body.distanceTo(e);t/n<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e))}}}const Yle={center:[0,0],width:300,height:300,kr:5,kg:1,mode:"normal",preventOverlap:!1,dissuadeHubs:!1,maxIteration:0,ks:.1,ksmax:10,tao:.1};class Xle{constructor(e={}){this.options=e,this.id="forceAtlas2",this.options=Object.assign(Object.assign({},Yle),e)}execute(e,t){return St(this,void 0,void 0,function*(){return this.genericForceAtlas2Layout(!1,e,t)})}assign(e,t){return St(this,void 0,void 0,function*(){yield this.genericForceAtlas2Layout(!0,e,t)})}genericForceAtlas2Layout(e,t,n){return St(this,void 0,void 0,function*(){const i=t.getAllEdges(),a=t.getAllNodes(),s=this.formatOptions(n,a.length),{width:o,height:A,prune:l,maxIteration:c,nodeSize:u,center:h}=s;if(!(a!=null&&a.length)||a.length===1)return Bl(t,e,h);const g=a.map(w=>ia(w,[o,A])),p=i.filter(w=>{const{source:b,target:_}=w;return b!==_}),v=new Sr({nodes:g,edges:p}),m=this.getSizes(v,u);if(this.run(v,t,c,m,e,s),l){for(let b=0;b<p.length;b+=1){const{source:_,target:C}=p[b],M=v.getDegree(_),F=v.getDegree(_);if(M<=1){const k=v.getNode(C);v.mergeNodeData(_,{x:k.data.x,y:k.data.y})}else if(F<=1){const k=v.getNode(_);v.mergeNodeData(C,{x:k.data.x,y:k.data.y})}}const w=Object.assign(Object.assign({},s),{prune:!1,barnesHut:!1});this.run(v,t,100,m,e,w)}return{nodes:g,edges:i}})}getSizes(e,t){const n=e.getAllNodes(),i={};for(let a=0;a<n.length;a+=1){const s=n[a];i[s.id]=$2(t,void 0)(s)}return i}formatOptions(e={},t){const n=Object.assign(Object.assign({},this.options),e),{center:i,width:a,height:s,barnesHut:o,prune:A,maxIteration:l,kr:c,kg:u}=n;return n.width=!a&&typeof window<"u"?window.innerWidth:a,n.height=!s&&typeof window<"u"?window.innerHeight:s,n.center=i||[n.width/2,n.height/2],o===void 0&&t>250&&(n.barnesHut=!0),A===void 0&&t>100&&(n.prune=!0),l===0&&!A?(n.maxIteration=250,t<=200&&t>100?n.maxIteration=1e3:t>200&&(n.maxIteration=1200)):l===0&&A&&(n.maxIteration=100,t<=200&&t>100?n.maxIteration=500:t>200&&(n.maxIteration=950)),c||(n.kr=50,t>100&&t<=500?n.kr=20:t>500&&(n.kr=1)),u||(n.kg=20,t>100&&t<=500?n.kg=10:t>500&&(n.kg=1)),n}run(e,t,n,i,a,s){const{kr:o,barnesHut:A,onTick:l}=s,c=e.getAllNodes();let u=0,h=n;const g={},p={},v={};for(let m=0;m<c.length;m+=1){const{data:w,id:b}=c[m];if(g[b]=[0,0],A){const _={id:m,rx:w.x,ry:w.y,mass:1,g:o,degree:e.getDegree(b)};v[b]=new pS(_)}}for(;h>0;)u=this.oneStep(e,{iter:h,preventOverlapIters:50,krPrime:100,sg:u,forces:g,preForces:p,bodies:v,sizes:i},s),h--,l==null||l({nodes:c,edges:t.getAllEdges()});return e}oneStep(e,t,n){const{iter:i,preventOverlapIters:a,krPrime:s,sg:o,preForces:A,bodies:l,sizes:c}=t;let{forces:u}=t;const{preventOverlap:h,barnesHut:g}=n,p=e.getAllNodes();for(let v=0;v<p.length;v+=1){const{id:m}=p[v];A[m]=[...u[m]],u[m]=[0,0]}return u=this.getAttrForces(e,i,a,c,u,n),g&&(h&&i>a||!h)?u=this.getOptRepGraForces(e,u,l,n):u=this.getRepGraForces(e,i,a,u,s,c,n),this.updatePos(e,u,A,o,n)}getAttrForces(e,t,n,i,a,s){const{preventOverlap:o,dissuadeHubs:A,mode:l,prune:c}=s,u=e.getAllEdges();for(let h=0;h<u.length;h+=1){const{source:g,target:p}=u[h],v=e.getNode(g),m=e.getNode(p),w=e.getDegree(g),b=e.getDegree(p);if(c&&(w<=1||b<=1))continue;const _=[m.data.x-v.data.x,m.data.y-v.data.y];let C=Math.hypot(_[0],_[1]);C=C<1e-4?1e-4:C,_[0]=_[0]/C,_[1]=_[1]/C,o&&t<n&&(C=C-i[g]-i[p]);let M=C,F=M;l==="linlog"&&(M=Math.log(1+C),F=M),A&&(M=C/w,F=C/b),o&&t<n&&C<=0?(M=0,F=0):o&&t<n&&C>0&&(M=C,F=C),a[g][0]+=M*_[0],a[p][0]-=F*_[0],a[g][1]+=M*_[1],a[p][1]-=F*_[1]}return a}getOptRepGraForces(e,t,n,i){const{kg:a,center:s,prune:o}=i,A=e.getAllNodes(),l=A.length;let c=9e10,u=-9e10,h=9e10,g=-9e10;for(let b=0;b<l;b+=1){const{id:_,data:C}=A[b];o&&e.getDegree(_)<=1||(n[_].setPos(C.x,C.y),C.x>=u&&(u=C.x),C.x<=c&&(c=C.x),C.y>=g&&(g=C.y),C.y<=h&&(h=C.y))}const p=Math.max(u-c,g-h),v={xmid:(u+c)/2,ymid:(g+h)/2,length:p,massCenter:s,mass:l},m=new Cc(v),w=new Bc(m);for(let b=0;b<l;b+=1){const{id:_}=A[b];o&&e.getDegree(_)<=1||n[_].in(m)&&w.insert(n[_])}for(let b=0;b<l;b+=1){const{id:_,data:C}=A[b],M=e.getDegree(_);if(o&&M<=1)continue;n[_].resetForce(),w.updateForce(n[_]),t[_][0]-=n[_].fx,t[_][1]-=n[_].fy;const F=[C.x-s[0],C.y-s[1]];let k=Math.hypot(F[0],F[1]);k=k<1e-4?1e-4:k,F[0]=F[0]/k,F[1]=F[1]/k;const P=a*(M+1);t[_][0]-=P*F[0],t[_][1]-=P*F[1]}return t}getRepGraForces(e,t,n,i,a,s,o){const{preventOverlap:A,kr:l,kg:c,center:u,prune:h}=o,g=e.getAllNodes(),p=g.length;for(let v=0;v<p;v+=1){const m=g[v],w=e.getDegree(m.id);for(let M=v+1;M<p;M+=1){const F=g[M],k=e.getDegree(F.id);if(h&&(w<=1||k<=1))continue;const P=[F.data.x-m.data.x,F.data.y-m.data.y];let N=Math.hypot(P[0],P[1]);N=N<1e-4?1e-4:N,P[0]=P[0]/N,P[1]=P[1]/N,A&&t<n&&(N=N-s[m.id]-s[F.id]);let D=l*(w+1)*(k+1)/N;A&&t<n&&N<0?D=a*(w+1)*(k+1):A&&t<n&&N===0?D=0:A&&t<n&&N>0&&(D=l*(w+1)*(k+1)/N),i[m.id][0]-=D*P[0],i[F.id][0]+=D*P[0],i[m.id][1]-=D*P[1],i[F.id][1]+=D*P[1]}const b=[m.data.x-u[0],m.data.y-u[1]],_=Math.hypot(b[0],b[1]);b[0]=b[0]/_,b[1]=b[1]/_;const C=c*(w+1);i[m.id][0]-=C*b[0],i[m.id][1]-=C*b[1]}return i}updatePos(e,t,n,i,a){const{ks:s,tao:o,prune:A,ksmax:l}=a,c=e.getAllNodes(),u=c.length,h=[],g=[];let p=0,v=0,m=i;for(let b=0;b<u;b+=1){const{id:_}=c[b],C=e.getDegree(_);if(A&&C<=1)continue;const M=[t[_][0]-n[_][0],t[_][1]-n[_][1]],F=Math.hypot(M[0],M[1]),k=[t[_][0]+n[_][0],t[_][1]+n[_][1]],P=Math.hypot(k[0],k[1]);h[b]=F,g[b]=P/2,p+=(C+1)*h[b],v+=(C+1)*g[b]}const w=m;m=o*v/p,w!==0&&(m=m>1.5*w?1.5*w:m);for(let b=0;b<u;b+=1){const{id:_,data:C}=c[b],M=e.getDegree(_);if(A&&M<=1||je(C.fx)&&je(C.fy))continue;let F=s*m/(1+m*Math.sqrt(h[b])),k=Math.hypot(t[_][0],t[_][1]);k=k<1e-4?1e-4:k;const P=l/k;F=F>P?P:F;const N=F*t[_][0],D=F*t[_][1];e.mergeNodeData(_,{x:C.x+N,y:C.y+D})}return m}}const Zle={maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10,width:300,height:300,nodeClusterBy:"cluster"},Jle=800;class ece{constructor(e={}){this.options=e,this.id="fruchterman",this.timeInterval=0,this.running=!1,this.options=Object.assign(Object.assign({},Zle),e)}execute(e,t){return St(this,void 0,void 0,function*(){return this.genericFruchtermanLayout(!1,e,t)})}assign(e,t){return St(this,void 0,void 0,function*(){yield this.genericFruchtermanLayout(!0,e,t)})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval),this.running=!1}tick(e=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let n=0;n<e;n++)this.runOneStep(this.lastGraph,this.lastClusterMap,this.lastOptions);const t={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&t.nodes.forEach(n=>this.lastGraph.mergeNodeData(n.id,{x:n.data.x,y:n.data.y,z:this.options.dimensions===3?n.data.z:void 0})),t}genericFruchtermanLayout(e,t,n){return St(this,void 0,void 0,function*(){if(this.running)return;const i=this.formatOptions(n),{dimensions:a,width:s,height:o,center:A,clustering:l,nodeClusterBy:c,maxIteration:u,onTick:h}=i,g=t.getAllNodes(),p=t.getAllEdges();if(!(g!=null&&g.length)){const _={nodes:[],edges:p};return this.lastResult=_,_}if(g.length===1){e&&t.mergeNodeData(g[0].id,{x:A[0],y:A[1],z:a===3?A[2]:void 0});const _={nodes:[Object.assign(Object.assign({},g[0]),{data:Object.assign(Object.assign({},g[0].data),{x:A[0],y:A[1],z:a===3?A[2]:void 0})})],edges:p};return this.lastResult=_,_}const v=g.map(_=>ia(_,[s,o])),m=new Sr({nodes:v,edges:p}),w={};if(l&&v.forEach(_=>{const C=_.data[c];w[C]||(w[C]={name:C,cx:0,cy:0,count:0})}),this.lastLayoutNodes=v,this.lastLayoutEdges=p,this.lastAssign=e,this.lastGraph=m,this.lastOptions=i,this.lastClusterMap=w,typeof window>"u")return;let b=0;return new Promise(_=>{this.timeInterval=window.setInterval(()=>{if(!this.running){_({nodes:v,edges:p});return}this.runOneStep(m,w,i),e&&v.forEach(({id:C,data:M})=>t.mergeNodeData(C,{x:M.x,y:M.y,z:a===3?M.z:void 0})),h==null||h({nodes:v,edges:p}),b++,b>=u&&(window.clearInterval(this.timeInterval),_({nodes:v,edges:p}))},0),this.running=!0})})}formatOptions(e={}){const t=Object.assign(Object.assign({},this.options),e),{clustering:n,nodeClusterBy:i}=t,{center:a,width:s,height:o}=t;return t.width=!s&&typeof window<"u"?window.innerWidth:s,t.height=!o&&typeof window<"u"?window.innerHeight:o,t.center=a||[t.width/2,t.height/2],t.clustering=n&&!!i,t}runOneStep(e,t,n){const{dimensions:i,height:a,width:s,gravity:o,center:A,speed:l,clustering:c,nodeClusterBy:u,clusterGravity:h}=n,g=a*s,p=Math.sqrt(g)/10,v=e.getAllNodes(),m=g/(v.length+1),w=Math.sqrt(m),b={};if(this.applyCalculate(e,b,w,m),c){for(const C in t)t[C].cx=0,t[C].cy=0,t[C].count=0;v.forEach(C=>{const{data:M}=C,F=t[M[u]];je(M.x)&&(F.cx+=M.x),je(M.y)&&(F.cy+=M.y),F.count++});for(const C in t)t[C].cx/=t[C].count,t[C].cy/=t[C].count;const _=h||o;v.forEach((C,M)=>{const{id:F,data:k}=C;if(!je(k.x)||!je(k.y))return;const P=t[k[u]],N=Math.sqrt((k.x-P.cx)*(k.x-P.cx)+(k.y-P.cy)*(k.y-P.cy)),D=w*_;b[F].x-=D*(k.x-P.cx)/N,b[F].y-=D*(k.y-P.cy)/N})}v.forEach((_,C)=>{const{id:M,data:F}=_;if(!je(F.x)||!je(F.y))return;const k=.01*w*o;b[M].x-=k*(F.x-A[0]),b[M].y-=k*(F.y-A[1]),i===3&&(b[M].z-=k*(F.z-A[2]))}),v.forEach((_,C)=>{const{id:M,data:F}=_;if(je(F.fx)&&je(F.fy)){F.x=F.fx,F.y=F.fy,i===3&&(F.z=F.fz);return}if(!je(F.x)||!je(F.y))return;const k=Math.sqrt(b[M].x*b[M].x+b[M].y*b[M].y+(i===3?b[M].z*b[M].z:0));if(k>0){const P=Math.min(p*(l/Jle),k);e.mergeNodeData(M,{x:F.x+b[M].x/k*P,y:F.y+b[M].y/k*P,z:i===3?F.z+b[M].z/k*P:void 0})}})}applyCalculate(e,t,n,i){this.calRepulsive(e,t,i),this.calAttractive(e,t,n)}calRepulsive(e,t,n){const i=e.getAllNodes();i.forEach(({data:a,id:s},o)=>{t[s]={x:0,y:0,z:0},i.forEach(({data:A,id:l},c)=>{if(o<=c||!je(a.x)||!je(A.x)||!je(a.y)||!je(A.y))return;let u=a.x-A.x,h=a.y-A.y,g=this.options.dimensions===3?a.z-A.z:0,p=u*u+h*h+g*g;p===0&&(p=1,u=.01,h=.01,g=.01);const v=n/p,m=u*v,w=h*v,b=g*v;t[s].x+=m,t[s].y+=w,t[l].x-=m,t[l].y-=w,this.options.dimensions===3&&(t[s].z+=b,t[l].z-=b)})})}calAttractive(e,t,n){e.getAllEdges().forEach(a=>{const{source:s,target:o}=a;if(!s||!o||s===o)return;const{data:A}=e.getNode(s),{data:l}=e.getNode(o);if(!je(l.x)||!je(A.x)||!je(l.y)||!je(A.y))return;const c=l.x-A.x,u=l.y-A.y,h=this.options.dimensions===3?l.z-A.z:0,g=Math.sqrt(c*c+u*u+h*h)/n,p=c*g,v=u*g,m=h*g;t[s].x+=p,t[s].y+=v,t[o].x-=p,t[o].y-=v,this.options.dimensions===3&&(t[s].z+=m,t[o].z-=m)})}}const tce={begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30,width:300,height:300};class nce{constructor(e={}){this.options=e,this.id="grid",this.options=Object.assign(Object.assign({},tce),e)}execute(e,t){return St(this,void 0,void 0,function*(){return this.genericGridLayout(!1,e,t)})}assign(e,t){return St(this,void 0,void 0,function*(){yield this.genericGridLayout(!0,e,t)})}genericGridLayout(e,t,n){return St(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),n),{begin:a=[0,0],condense:s,preventOverlapPadding:o,preventOverlap:A,rows:l,cols:c,nodeSpacing:u,nodeSize:h,width:g,height:p,position:v}=i;let{sortBy:m}=i;const w=t.getAllNodes(),b=t.getAllEdges(),_=w==null?void 0:w.length;if(!_||_===1)return Bl(t,e,a);const C=w.map(J=>ia(J));m!=="id"&&(!Rt(m)||C[0].data[m]===void 0)&&(m="degree"),m==="degree"?C.sort((J,ce)=>t.getDegree(ce.id,"both")-t.getDegree(J.id,"both")):m==="id"?C.sort((J,ce)=>je(ce.id)&&je(J.id)?ce.id-J.id:`${J.id}`.localeCompare(`${ce.id}`)):C.sort((J,ce)=>ce.data[m]-J.data[m]);const M=!g&&typeof window<"u"?window.innerWidth:g,F=!p&&typeof window<"u"?window.innerHeight:p,k=_,P={rows:l,cols:c};if(l!=null&&c!=null)P.rows=l,P.cols=c;else if(l!=null&&c==null)P.rows=l,P.cols=Math.ceil(k/P.rows);else if(l==null&&c!=null)P.cols=c,P.rows=Math.ceil(k/P.cols);else{const J=Math.sqrt(k*F/M);P.rows=Math.round(J),P.cols=Math.round(M/F*J)}if(P.rows=Math.max(P.rows,1),P.cols=Math.max(P.cols,1),P.cols*P.rows>k){const J=Kg(P),ce=Gg(P);(J-1)*ce>=k?Kg(P,J-1):(ce-1)*J>=k&&Gg(P,ce-1)}else for(;P.cols*P.rows<k;){const J=Kg(P),ce=Gg(P);(ce+1)*J>=k?Gg(P,ce+1):Kg(P,J+1)}let N=s?0:M/P.cols,D=s?0:F/P.rows;if(A||u){const J=ol(10,u),ce=W2(30,h,!1);C.forEach(se=>{(!se.data.x||!se.data.y)&&(se.data.x=0,se.data.y=0);const W=t.getNode(se.id),[le,fe]=yh(ce(W)||30),X=J!==void 0?J(se):o,ne=le+X,Ie=fe+X;N=Math.max(N,ne),D=Math.max(D,Ie)})}const Q={},H={row:0,col:0},j={};for(let J=0;J<C.length;J++){const ce=C[J];let se;if(v&&(se=v(t.getNode(ce.id))),se&&(se.row!==void 0||se.col!==void 0)){const W={row:se.row,col:se.col};if(W.col===void 0)for(W.col=0;Qx(Q,W);)W.col++;else if(W.row===void 0)for(W.row=0;Qx(Q,W);)W.row++;j[ce.id]=W,x5(Q,W)}rce(ce,a,N,D,j,P,H,Q)}const q={nodes:C,edges:b};return e&&C.forEach(J=>{t.mergeNodeData(J.id,{x:J.data.x,y:J.data.y})}),q})}}const Kg=(r,e)=>{let t;const n=r.rows||5,i=r.cols||5;return e==null?t=Math.min(n,i):Math.min(n,i)===r.rows?r.rows=e:r.cols=e,t},Gg=(r,e)=>{let t;const n=r.rows||5,i=r.cols||5;return e==null?t=Math.max(n,i):Math.max(n,i)===r.rows?r.rows=e:r.cols=e,t},Qx=(r,e)=>r[`c-${e.row}-${e.col}`]||!1,x5=(r,e)=>r[`c-${e.row}-${e.col}`]=!0,Q3=(r,e)=>{const t=r.cols||5;e.col++,e.col>=t&&(e.col=0,e.row++)},rce=(r,e,t,n,i,a,s,o)=>{let A,l;const c=i[r.id];if(c)A=c.col*t+t/2+e[0],l=c.row*n+n/2+e[1];else{for(;Qx(o,s);)Q3(a,s);A=s.col*t+t/2+e[0],l=s.row*n+n/2+e[1],x5(o,s),Q3(a,s)}r.data.x=A,r.data.y=l},ice=(r,e,t)=>{try{const n=Jo.mul(Jo.pow(e,2),-.5),i=n.mean("row"),a=n.mean("column"),s=n.mean();n.add(s).subRowVector(i).subColumnVector(a);const o=new y6(n),A=Jo.sqrt(o.diagonalMatrix).diagonal();return o.leftSingularVectors.toJSON().map(l=>Jo.mul([l],[A]).toJSON()[0].splice(0,r))}catch{const i=[];for(let a=0;a<e.length;a++){const s=Math.random()*t,o=Math.random()*t;i.push([s,o])}return i}},ace=800,sce={iterations:10,height:10,width:10,speed:100,gravity:10,k:5},oce=(r,e)=>{const t=Object.assign(Object.assign({},sce),e),{positions:n,iterations:i,width:a,k:s,speed:o=100,strictRadial:A,focusIdx:l,radii:c=[],nodeSizeFunc:u}=t,h=r.getAllNodes(),g=[],p=a/10;for(let v=0;v<i;v++)n.forEach((m,w)=>{g[w]={x:0,y:0}}),Ace(h,n,g,s,c,u),lce(n,g,o,A,l,p,a,c);return n},Ace=(r,e,t,n,i,a)=>{e.forEach((s,o)=>{t[o]={x:0,y:0},e.forEach((A,l)=>{if(o===l||i[o]!==i[l])return;let c=s.x-A.x,u=s.y-A.y,h=Math.sqrt(c*c+u*u);if(h===0){h=1;const g=o>l?1:-1;c=.01*g,u=.01*g}if(h<a(r[o])/2+a(r[l])/2){const g=n*n/h;t[o].x+=c/h*g,t[o].y+=u/h*g}})})},lce=(r,e,t,n,i,a,s,o)=>{const A=a||s/10;return n&&e.forEach((l,c)=>{const u=r[c].x-r[i].x,h=r[c].y-r[i].y,g=Math.sqrt(u*u+h*h);let p=h/g,v=-u/g;const m=Math.sqrt(l.x*l.x+l.y*l.y);let w=Math.acos((p*l.x+v*l.y)/m);w>Math.PI/2&&(w-=Math.PI/2,p*=-1,v*=-1);const b=Math.cos(w)*m;l.x=p*b,l.y=v*b}),r.forEach((l,c)=>{if(c===i)return;const u=Math.sqrt(e[c].x*e[c].x+e[c].y*e[c].y);if(u>0&&c!==i){const h=Math.min(A*(t/ace),u);if(l.x+=e[c].x/u*h,l.y+=e[c].y/u*h,n){let g=l.x-r[i].x,p=l.y-r[i].y;const v=Math.sqrt(g*g+p*p);g=g/v*o[c],p=p/v*o[c],l.x=r[i].x+g,l.y=r[i].y+p}}}),r},cce={maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,strictRadial:!0,maxPreventOverlapIteration:200,sortStrength:10};class uce{constructor(e={}){this.options=e,this.id="radial",this.options=Object.assign(Object.assign({},cce),e)}execute(e,t){return St(this,void 0,void 0,function*(){return this.genericRadialLayout(!1,e,t)})}assign(e,t){return St(this,void 0,void 0,function*(){yield this.genericRadialLayout(!0,e,t)})}genericRadialLayout(e,t,n){return St(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),n),{width:a,height:s,center:o,focusNode:A,unitRadius:l,nodeSize:c,nodeSpacing:u,strictRadial:h,preventOverlap:g,maxPreventOverlapIteration:p,sortBy:v,linkDistance:m=50,sortStrength:w=10,maxIteration:b=1e3}=i,_=t.getAllNodes(),C=t.getAllEdges(),M=!a&&typeof window<"u"?window.innerWidth:a,F=!s&&typeof window<"u"?window.innerHeight:s,k=o||[M/2,F/2];if(!(_!=null&&_.length)||_.length===1)return Bl(t,e,k);let P=_[0];if(Rt(A)){for(let me=0;me<_.length;me++)if(_[me].id===A){P=_[me];break}}else P=A||_[0];const N=fce(_,P.id),D=f6({nodes:_,edges:C}),Q=h6(D),H=pce(Q,N);gce(Q,N,H+1);const j=Q[N];let q=M-k[0]>k[0]?k[0]:M-k[0],J=F-k[1]>k[1]?k[1]:F-k[1];q===0&&(q=M/2),J===0&&(J=F/2);const ce=Math.min(q,J),se=Math.max(...j),W=[],le=l||ce/se;j.forEach((me,Te)=>{W[Te]=me*le});const fe=dce(_,Q,m,W,le,v,w),X=hce(fe),ne=ice(m,fe,m);let Ie=ne.map(([me,Te])=>({x:(isNaN(me)?Math.random()*m:me)-ne[N][0],y:(isNaN(Te)?Math.random()*m:Te)-ne[N][1]}));this.run(b,Ie,X,fe,W,N);let te;if(g){te=$2(c,u);const me={nodes:_,nodeSizeFunc:te,positions:Ie,radii:W,height:F,width:M,strictRadial:!!h,focusIdx:N,iterations:p||200,k:Ie.length/4.5};Ie=oce(t,me)}const $=[];return Ie.forEach((me,Te)=>{const He=ia(_[Te]);He.data.x=me.x+k[0],He.data.y=me.y+k[1],$.push(He)}),e&&$.forEach(me=>t.mergeNodeData(me.id,{x:me.data.x,y:me.data.y})),{nodes:$,edges:C}})}run(e,t,n,i,a,s){for(let o=0;o<=e;o++){const A=o/e;this.oneIteration(A,t,a,i,n,s)}}oneIteration(e,t,n,i,a,s){const o=1-e;t.forEach((A,l)=>{const c=aP(A,{x:0,y:0}),u=c===0?0:1/c;if(l===s)return;let h=0,g=0,p=0;t.forEach((m,w)=>{if(l===w)return;const b=aP(A,m),_=b===0?0:1/b,C=i[w][l];p+=a[l][w],h+=a[l][w]*(m.x+C*(A.x-m.x)*_),g+=a[l][w]*(m.y+C*(A.y-m.y)*_)});const v=n[l]===0?0:1/n[l];p*=o,p+=e*v*v,h*=o,h+=e*v*A.x*u,A.x=h/p,g*=o,g+=e*v*A.y*u,A.y=g/p})}}const dce=(r,e,t,n,i,a,s)=>{if(!r)return[];const o=[];if(e){const A={};e.forEach((l,c)=>{const u=[];l.forEach((h,g)=>{var p,v;if(c===g)u.push(0);else if(n[c]===n[g])if(a==="data")u.push(h*(Math.abs(c-g)*s)/(n[c]/i));else if(a){let m,w;if(A[r[c].id])m=A[r[c].id];else{const b=(a==="id"?r[c].id:(p=r[c].data)===null||p===void 0?void 0:p[a])||0;Rt(b)?m=b.charCodeAt(0):m=b,A[r[c].id]=m}if(A[r[g].id])w=A[r[g].id];else{const b=(a==="id"?r[g].id:(v=r[g].data)===null||v===void 0?void 0:v[a])||0;Rt(b)?w=b.charCodeAt(0):w=b,A[r[g].id]=w}u.push(h*(Math.abs(m-w)*s)/(n[c]/i))}else u.push(h*t/(n[c]/i));else{const m=(t+i)/2;u.push(h*m)}}),o.push(u)})}return o},hce=r=>{const e=r.length,t=r[0].length,n=[];for(let i=0;i<e;i++){const a=[];for(let s=0;s<t;s++)r[i][s]!==0?a.push(1/(r[i][s]*r[i][s])):a.push(0);n.push(a)}return n},fce=(r,e)=>{let t=-1;return r.forEach((n,i)=>{n.id===e&&(t=i)}),Math.max(t,0)},gce=(r,e,t)=>{const n=r.length;for(let i=0;i<n;i++)if(r[e][i]===1/0){r[e][i]=t,r[i][e]=t;for(let a=0;a<n;a++)r[i][a]!==1/0&&r[e][a]===1/0&&(r[e][a]=t+r[i][a],r[a][e]=t+r[i][a])}for(let i=0;i<n;i++)if(i!==e){for(let a=0;a<n;a++)if(r[i][a]===1/0){let s=Math.abs(r[e][i]-r[e][a]);s=s===0?1:s,r[i][a]=s}}},pce=(r,e)=>{let t=0;for(let n=0;n<r[e].length;n++)r[e][n]!==1/0&&(t=r[e][n]>t?r[e][n]:t);return t},vce={center:[0,0],width:300,height:300};class mce{constructor(e={}){this.options=e,this.id="random",this.options=Object.assign(Object.assign({},vce),e)}execute(e,t){return St(this,void 0,void 0,function*(){return this.genericRandomLayout(!1,e,t)})}assign(e,t){return St(this,void 0,void 0,function*(){yield this.genericRandomLayout(!0,e,t)})}genericRandomLayout(e,t,n){return St(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),n),{center:a,width:s,height:o}=i,A=t.getAllNodes(),l=.9,c=!s&&typeof window<"u"?window.innerWidth:s,u=!o&&typeof window<"u"?window.innerHeight:o,h=a||[c/2,u/2],g=[];return A&&A.forEach(v=>{g.push({id:v.id,data:{x:(Math.random()-.5)*l*c+h[0],y:(Math.random()-.5)*l*u+h[1]}})}),e&&g.forEach(v=>t.mergeNodeData(v.id,{x:v.data.x,y:v.data.y})),{nodes:g,edges:t.getAllEdges()}})}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S5=Symbol("Comlink.proxy"),yce=Symbol("Comlink.endpoint"),T5=Symbol("Comlink.releaseProxy"),AB=Symbol("Comlink.finalizer"),hp=Symbol("Comlink.thrown"),M5=r=>typeof r=="object"&&r!==null||typeof r=="function",wce={canHandle:r=>M5(r)&&r[S5],serialize(r){const{port1:e,port2:t}=new MessageChannel;return k5(r,e),[t,[t]]},deserialize(r){return r.start(),P5(r)}},bce={canHandle:r=>M5(r)&&hp in r,serialize({value:r}){let e;return r instanceof Error?e={isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:e={isError:!1,value:r},[e,[]]},deserialize(r){throw r.isError?Object.assign(new Error(r.value.message),r.value):r.value}},F5=new Map([["proxy",wce],["throw",bce]]);function _ce(r,e){for(const t of r)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function k5(r,e=globalThis,t=["*"]){e.addEventListener("message",function n(i){if(!i||!i.data)return;if(!_ce(t,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:a,type:s,path:o}=Object.assign({path:[]},i.data),A=(i.data.argumentList||[]).map($A);let l;try{const c=o.slice(0,-1).reduce((h,g)=>h[g],r),u=o.reduce((h,g)=>h[g],r);switch(s){case"GET":l=u;break;case"SET":c[o.slice(-1)[0]]=$A(i.data.value),l=!0;break;case"APPLY":l=u.apply(c,A);break;case"CONSTRUCT":{const h=new u(...A);l=Tce(h)}break;case"ENDPOINT":{const{port1:h,port2:g}=new MessageChannel;k5(r,g),l=Sce(h,[h])}break;case"RELEASE":l=void 0;break;default:return}}catch(c){l={value:c,[hp]:0}}Promise.resolve(l).catch(c=>({value:c,[hp]:0})).then(c=>{const[u,h]=Av(c);e.postMessage(Object.assign(Object.assign({},u),{id:a}),h),s==="RELEASE"&&(e.removeEventListener("message",n),I5(e),AB in r&&typeof r[AB]=="function"&&r[AB]())}).catch(c=>{const[u,h]=Av({value:new TypeError("Unserializable return value"),[hp]:0});e.postMessage(Object.assign(Object.assign({},u),{id:a}),h)})}),e.start&&e.start()}function Ece(r){return r.constructor.name==="MessagePort"}function I5(r){Ece(r)&&r.close()}function P5(r,e){const t=new Map;return r.addEventListener("message",function(i){const{data:a}=i;if(!a||!a.id)return;const s=t.get(a.id);if(s)try{s(a)}finally{t.delete(a.id)}}),Ux(r,t,[],e)}function Vg(r){if(r)throw new Error("Proxy has been released and is not useable")}function O5(r){return bc(r,new Map,{type:"RELEASE"}).then(()=>{I5(r)})}const sv=new WeakMap,ov="FinalizationRegistry"in globalThis&&new FinalizationRegistry(r=>{const e=(sv.get(r)||0)-1;sv.set(r,e),e===0&&O5(r)});function Cce(r,e){const t=(sv.get(e)||0)+1;sv.set(e,t),ov&&ov.register(r,e,r)}function Bce(r){ov&&ov.unregister(r)}function Ux(r,e,t=[],n=function(){}){let i=!1;const a=new Proxy(n,{get(s,o){if(Vg(i),o===T5)return()=>{Bce(a),O5(r),e.clear(),i=!0};if(o==="then"){if(t.length===0)return{then:()=>a};const A=bc(r,e,{type:"GET",path:t.map(l=>l.toString())}).then($A);return A.then.bind(A)}return Ux(r,e,[...t,o])},set(s,o,A){Vg(i);const[l,c]=Av(A);return bc(r,e,{type:"SET",path:[...t,o].map(u=>u.toString()),value:l},c).then($A)},apply(s,o,A){Vg(i);const l=t[t.length-1];if(l===yce)return bc(r,e,{type:"ENDPOINT"}).then($A);if(l==="bind")return Ux(r,e,t.slice(0,-1));const[c,u]=U3(A);return bc(r,e,{type:"APPLY",path:t.map(h=>h.toString()),argumentList:c},u).then($A)},construct(s,o){Vg(i);const[A,l]=U3(o);return bc(r,e,{type:"CONSTRUCT",path:t.map(c=>c.toString()),argumentList:A},l).then($A)}});return Cce(a,r),a}function xce(r){return Array.prototype.concat.apply([],r)}function U3(r){const e=r.map(Av);return[e.map(t=>t[0]),xce(e.map(t=>t[1]))]}const L5=new WeakMap;function Sce(r,e){return L5.set(r,e),r}function Tce(r){return Object.assign(r,{[S5]:!0})}function Av(r){for(const[e,t]of F5)if(t.canHandle(r)){const[n,i]=t.serialize(r);return[{type:"HANDLER",name:e,value:n},i]}return[{type:"RAW",value:r},L5.get(r)||[]]}function $A(r){switch(r.type){case"HANDLER":return F5.get(r.name).deserialize(r.value);case"RAW":return r.value}}function bc(r,e,t,n){return new Promise(i=>{const a=Mce();e.set(a,i),r.start&&r.start(),r.postMessage(Object.assign({id:a},t),n)})}function Mce(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class Fce extends Wv{constructor(e,t,n){super(),this.graph=e,this.layout=t,this.options=n,this.spawnWorker()}spawnWorker(){this.proxy=P5(new Worker(new URL("/adhd-graph-explorer/assets/worker-B9qc9nkC.js",import.meta.url),{type:"module"})),this.running&&(this.running=!1,this.execute())}execute(){var e;return St(this,void 0,void 0,function*(){if(this.running)return this;this.running=!0;const t=this.layout.options,{onTick:n}=t,i=Sn(t,["onTick"]),a={};Object.keys(i).forEach(l=>{$e(i[l])||(a[l]=i[l])});const s={layout:{id:this.layout.id,options:a,iterations:(e=this.options)===null||e===void 0?void 0:e.iterations},nodes:this.graph.getAllNodes(),edges:this.graph.getAllEdges()},o=new Float32Array([0]),[A]=yield this.proxy.calculateLayout(s,[o]);return A})}stop(){return this.running=!1,this.proxy.stopLayout(),this}kill(){this.proxy[T5]()}isRunning(){return this.running}}var kce=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class Cm extends $v{constructor(){super(...arguments),this.id="fishbone"}getRoot(){const e=this.context.model.getRootsData();if(!(vs(e)||e.length>2))return e[0]}formatSize(e){const t=typeof e=="function"?e:()=>e;return n=>sa(t(n))}doLayout(e,t){const{hGap:n,getRibSep:i,vGap:a,nodeSize:s,height:o}=t,{model:A}=this.context,l=this.formatSize(s);let c=l(e)[0]+i(e);const u=(_,C=0)=>{var M;return C+=n*((_.children||[]).length+1),(M=_.children)===null||M===void 0||M.forEach(F=>{var k;(k=A.getNodeLikeDatum(F).children)===null||k===void 0||k.forEach(N=>{const D=A.getNodeLikeDatum(N);C=u(D,C)})}),C},h=_=>{if(_.depth===1)return c;const C=A.getParentData(_.id,"tree");if(uc(_)){const M=A.getParentData(C.id,"tree"),F=v(_)-v(M);return h(C)+F*n/a}else{const M=(C.children||[]).indexOf(_.id),F=A.getNodeData((C.children||[]).slice(M));return g(C)-F.reduce((k,P)=>k+u(P),0)-l(C)[0]/2}},g=PB(_=>{if(lB(_))return l(_)[0]/2;const C=A.getParentData(_.id,"tree");if(uc(_))return h(_)+u(_)+l(_)[0]/2;{const M=v(_)-v(C),F=n/a;return h(_)+M*F}},_=>_.id),p=_=>v(A.getParentData(_,"tree")),v=PB(_=>{if(lB(_))return o/2;if(uc(_)){const C=A.getParentData(_.id,"tree"),M=C.children.indexOf(_.id);if(M===0)return p(C.id)+a;const F=A.getNodeLikeDatum(C.children[M-1]);if(vs(F.children))return v(F)+a;const k=A.getDescendantsData(F.id);return Math.max(...k.map(P=>uc(P)?p(P.id):v(P)))+a}else{if(vs(_.children))return p(_.id)+a;const C=A.getNodeLikeDatum(_.children.slice(-1)[0]);if(vs(C.children))return v(C)+a;const M=A.getDescendantsData(_.id).slice(-1)[0];return(uc(M)?p(M.id):v(M))+a}},_=>_.id);let m=0;const w={nodes:[],edges:[]},b=_=>{var C;(C=_.children)===null||C===void 0||C.forEach(N=>b(A.getNodeLikeDatum(N)));const M=v(_),F=g(_);if(w.nodes.push({id:_.id,x:F,y:M}),lB(_))return;const k=A.getRelatedEdgesData(_.id,"in")[0],P=[h(_),uc(_)?M:p(_.id)];w.edges.push({id:he(k),controlPoints:[P],relatedNodeId:_.id}),m=Math.max(m,F+i(_)),_.depth===1&&(c=m)};return b(e),w}placeAlterative(e,t){const n=(t.children||[]).filter((o,A)=>A%2!==0);if(n.length===0)return e;const{model:i}=this.context,a=e.nodes.find(o=>o.id===t.id).y,s=o=>{const A=i.getAncestorsData(o,"tree");if(vs(A))return!1;const l=A.length===1?o:A[A.length-2].id;return n.includes(l)};e.nodes.forEach(o=>{s(o.id)&&(o.y=2*a-o.y)}),e.edges.forEach(o=>{s(o.relatedNodeId)&&(o.controlPoints=o.controlPoints.map(A=>[A[0],2*a-A[1]]))})}rightToLeft(e,t){return e.nodes.forEach(n=>n.x=t.width-n.x),e.edges.forEach(n=>{n.controlPoints=n.controlPoints.map(i=>[t.width-i[0],i[1]])}),e}execute(e,t){return kce(this,void 0,void 0,function*(){const n=Object.assign(Object.assign(Object.assign({},Cm.defaultOptions),this.options),t),{direction:i,nodeSize:a}=n,s=this.getRoot();if(!s)return e;const o=this.formatSize(a);n.vGap||(n.vGap=Math.max(...(e.nodes||[]).map(h=>o(h)[1]))),n.hGap||(n.hGap=Math.max(...(e.nodes||[]).map(h=>o(h)[0])));let A=this.doLayout(s,n);this.placeAlterative(A,s),i==="RL"&&(A=this.rightToLeft(A,n));const{model:l}=this.context,c=[],u=[];return A.nodes.forEach(h=>{const{id:g,x:p,y:v}=h,m=l.getNodeLikeDatum(g);c.push(H3(m,{x:p,y:v}))}),A.edges.forEach(h=>{const{id:g,controlPoints:p}=h,v=l.getEdgeDatum(g);u.push(H3(v,{controlPoints:p}))}),{nodes:c,edges:u}})}}Cm.defaultOptions={direction:"RL",getRibSep:()=>60};const H3=(r,e)=>Object.assign(Object.assign({},r),{style:Object.assign(Object.assign({},r.style||{}),e)}),lB=r=>r.depth===0,uc=r=>(r.depth||(r.depth=0))%2===0;var Ice=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class Bm extends $v{constructor(){super(...arguments),this.id="snake"}formatSize(e,t){const n=typeof t=="function"?t:(()=>t);return e.reduce((i,a)=>{const[s,o]=sa(n(a))||[0,0];return[Math.max(i[0],s),Math.max(i[1],o)]},[0,0])}validate(e){const{nodes:t=[],edges:n=[]}=e,i={},a={},s={};t.forEach(h=>{i[h.id]=0,a[h.id]=0,s[h.id]=[]}),n.forEach(h=>{i[h.target]++,a[h.source]++,s[h.source].push(h.target)});const o=new Set,A=h=>{o.has(h)||(o.add(h),s[h].forEach(A))};if(A(t[0].id),o.size!==t.length)return!1;const l=t.filter(h=>i[h.id]===0),c=t.filter(h=>a[h.id]===0);return!(l.length!==1||c.length!==1||t.filter(h=>i[h.id]===1&&a[h.id]===1).length!==t.length-2)}execute(e,t){return Ice(this,void 0,void 0,function*(){var n;if(!this.validate(e))return e;const{nodeSize:i,padding:a,sortBy:s,cols:o,colGap:A,rowGap:l,clockwise:c,width:u,height:h}=Object.assign({},Bm.defaultOptions,this.options,t),[g,p,v,m]=Fa(a),w=this.formatSize(e.nodes||[],i),b=Math.ceil((e.nodes||[]).length/o);let _=A||(u-m-p-o*w[0])/(o-1),C=l||(h-g-v-b*w[1])/(b-1);return(C===1/0||C<0)&&(C=0),(_===1/0||_<0)&&(_=0),{nodes:((s?(n=e.nodes)===null||n===void 0?void 0:n.sort(s):Pce(e))||[]).map((k,P)=>{const N=Math.floor(P/o),D=P%o,Q=c?N%2===0?D:o-1-D:N%2===0?o-1-D:D,H=m+Q*(w[0]+_)+w[0]/2,j=g+N*(w[1]+C)+w[1]/2;return{id:k.id,style:{x:H,y:j}}})}})}}Bm.defaultOptions={padding:0,cols:5,clockwise:!0};function Pce(r){const{nodes:e=[],edges:t=[]}=r,n={},i={};e.forEach(o=>{n[o.id]=0,i[o.id]=[]}),t.forEach(o=>{n[o.target]++,i[o.source].push(o.target)});const a=[],s=[];for(e.forEach(o=>{n[o.id]===0&&a.push(o.id)});a.length>0;){const o=a.shift(),A=e.find(l=>l.id===o);s.push(A),i[o].forEach(l=>{n[l]--,n[l]===0&&a.push(l)})}return s}const Oce=["rgb(158, 1, 66)","rgb(213, 62, 79)","rgb(244, 109, 67)","rgb(253, 174, 97)","rgb(254, 224, 139)","rgb(255, 255, 191)","rgb(230, 245, 152)","rgb(171, 221, 164)","rgb(102, 194, 165)","rgb(50, 136, 189)","rgb(94, 79, 162)"],Lce=["rgb(78, 121, 167)","rgb(242, 142, 44)","rgb(225, 87, 89)","rgb(118, 183, 178)","rgb(89, 161, 79)","rgb(237, 201, 73)","rgb(175, 122, 161)","rgb(255, 157, 167)","rgb(156, 117, 95)","rgb(186, 176, 171)"],Nce=["rgb(255, 245, 235)","rgb(254, 230, 206)","rgb(253, 208, 162)","rgb(253, 174, 107)","rgb(253, 141, 60)","rgb(241, 105, 19)","rgb(217, 72, 1)","rgb(166, 54, 3)","rgb(127, 39, 4)"],Dce=["rgb(247, 252, 245)","rgb(229, 245, 224)","rgb(199, 233, 192)","rgb(161, 217, 155)","rgb(116, 196, 118)","rgb(65, 171, 93)","rgb(35, 139, 69)","rgb(0, 109, 44)","rgb(0, 68, 27)"],Rce=["rgb(247, 251, 255)","rgb(222, 235, 247)","rgb(198, 219, 239)","rgb(158, 202, 225)","rgb(107, 174, 214)","rgb(66, 146, 198)","rgb(33, 113, 181)","rgb(8, 81, 156)","rgb(8, 48, 107)"];class Dr extends O2{}function tu(r,e=!0,t){const n=document.createElement("div");return n.setAttribute("class",`g6-${r}`),Object.assign(n.style,{position:"absolute",display:"block"}),e&&Object.assign(n.style,{position:"unset",gridArea:"1 / 1 / 2 / 2",inset:"0px",height:"100%",width:"100%",overflow:"hidden",pointerEvents:"none"}),t&&Object.assign(n.style,t),n}function Hx(r,e="div",t={},n="",i=document.body){const a=document.getElementById(r);a&&a.remove();const s=document.createElement(e);return s.innerHTML=n,s.id=r,Object.assign(s.style,t),i.appendChild(s),s}var Qce=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class xm extends Dr{constructor(e,t){super(e,Object.assign({},xm.defaultOptions,t)),this.$element=tu("background"),this.context.canvas.getContainer().prepend(this.$element),this.update(t)}update(e){const t=Object.create(null,{update:{get:()=>super.update}});return Qce(this,void 0,void 0,function*(){t.update.call(this,e),Object.assign(this.$element.style,s2(this.options,["key","type"]))})}destroy(){super.destroy(),this.$element.remove()}}xm.defaultOptions={transition:"background 0.5s",backgroundSize:"cover",zIndex:"-1"};function vS(r,e,t,n,i,a){const s=r,o=e,A=t-s,l=n-o;let c=i-s,u=a-o,h=c*A+u*l,g=0;h<=0?g=0:(c=A-c,u=l-u,h=c*A+u*l,h<=0?g=0:g=h*h/(A*A+l*l));const p=c*c+u*u-g;return p<0?0:p}function tA(r,e,t,n){return(r-t)*(r-t)+(e-n)*(e-n)}function z3(r,e,t,n,i){return tA(r,e,t,n)<i*i}function Uce(r){if(!Number.isFinite(r))return t=>t;if(r===0)return Math.round;const e=Math.pow(10,r);return t=>Math.round(t*e)/e}function N5(r){const e=Math.min(r.x1,r.x2),t=Math.max(r.x1,r.x2),n=Math.min(r.y1,r.y2),i=Math.max(r.y1,r.y2);return{x:e,y:n,x2:t,y2:i,width:t-e,height:i-n}}class Lr{constructor(e,t,n,i){this.x1=e,this.y1=t,this.x2=n,this.y2=i}equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2}draw(e){e.moveTo(this.x1,this.y1),e.lineTo(this.x2,this.y2)}toString(){return`Line(from=(${this.x1},${this.y1}),to=(${this.x2},${this.y2}))`}static from(e){return new Lr(e.x1,e.y1,e.x2,e.y2)}cuts(e,t){if(this.y1===this.y2||t<this.y1&&t<=this.y2||t>this.y1&&t>=this.y2||e>this.x1&&e>=this.x2)return!1;if(e<this.x1&&e<=this.x2)return!0;const n=this.x1+(t-this.y1)*(this.x2-this.x1)/(this.y2-this.y1);return e<=n}distSquare(e,t){return vS(this.x1,this.y1,this.x2,this.y2,e,t)}ptClose(e,t,n){if(this.x1<this.x2){if(e<this.x1-n||e>this.x2+n)return!1}else if(e<this.x2-n||e>this.x1+n)return!1;if(this.y1<this.y2){if(t<this.y1-n||t>this.y2+n)return!1}else if(t<this.y2-n||t>this.y1+n)return!1;return!0}}var jn;(function(r){r[r.POINT=1]="POINT",r[r.PARALLEL=2]="PARALLEL",r[r.COINCIDENT=3]="COINCIDENT",r[r.NONE=4]="NONE"})(jn||(jn={}));class cB{constructor(e,t=0,n=0){this.state=e,this.x=t,this.y=n}}function qg(r,e){const t=(e.x2-e.x1)*(r.y1-e.y1)-(e.y2-e.y1)*(r.x1-e.x1),n=(r.x2-r.x1)*(r.y1-e.y1)-(r.y2-r.y1)*(r.x1-e.x1),i=(e.y2-e.y1)*(r.x2-r.x1)-(e.x2-e.x1)*(r.y2-r.y1);if(i){const a=t/i,s=n/i;return 0<=a&&a<=1&&0<=s&&s<=1?new cB(jn.POINT,r.x1+a*(r.x2-r.x1),r.y1+a*(r.y2-r.y1)):new cB(jn.NONE)}return new cB(t===0||n===0?jn.COINCIDENT:jn.PARALLEL)}function D5(r,e){const t=(e.x2-e.x1)*(r.y1-e.y1)-(e.y2-e.y1)*(r.x1-e.x1),n=(r.x2-r.x1)*(r.y1-e.y1)-(r.y2-r.y1)*(r.x1-e.x1),i=(e.y2-e.y1)*(r.x2-r.x1)-(e.x2-e.x1)*(r.y2-r.y1);if(i){const a=t/i,s=n/i;if(0<=a&&a<=1&&0<=s&&s<=1)return a}return Number.POSITIVE_INFINITY}function Hce(r,e){function t(i,a,s,o){let A=D5(e,new Lr(i,a,s,o));return A=Math.abs(A-.5),A>=0&&A<=1?1:0}let n=t(r.x,r.y,r.x2,r.y);return n+=t(r.x,r.y,r.x,r.y2),n>1||(n+=t(r.x,r.y2,r.x2,r.y2),n>1)?!0:(n+=t(r.x2,r.y,r.x2,r.y2),n>0)}var Kn;(function(r){r[r.LEFT=0]="LEFT",r[r.TOP=1]="TOP",r[r.RIGHT=2]="RIGHT",r[r.BOTTOM=3]="BOTTOM"})(Kn||(Kn={}));function fp(r,e,t){const n=new Set;return r.width<=0?(n.add(Kn.LEFT),n.add(Kn.RIGHT)):e<r.x?n.add(Kn.LEFT):e>r.x+r.width&&n.add(Kn.RIGHT),r.height<=0?(n.add(Kn.TOP),n.add(Kn.BOTTOM)):t<r.y?n.add(Kn.TOP):t>r.y+r.height&&n.add(Kn.BOTTOM),n}function R5(r,e){let t=e.x1,n=e.y1;const i=e.x2,a=e.y2,s=Array.from(fp(r,i,a));if(s.length===0)return!0;let o=fp(r,t,n);for(;o.size!==0;){for(const A of s)if(o.has(A))return!1;if(o.has(Kn.RIGHT)||o.has(Kn.LEFT)){let A=r.x;o.has(Kn.RIGHT)&&(A+=r.width),n=n+(A-t)*(a-n)/(i-t),t=A}else{let A=r.y;o.has(Kn.BOTTOM)&&(A+=r.height),t=t+(A-n)*(i-t)/(a-n),n=A}o=fp(r,t,n)}return!0}function zce(r,e){let t=Number.POSITIVE_INFINITY,n=0;function i(a,s,o,A){let l=D5(e,new Lr(a,s,o,A));l=Math.abs(l-.5),l>=0&&l<=1&&(n++,l<t&&(t=l))}return i(r.x,r.y,r.x2,r.y),i(r.x,r.y,r.x,r.y2),n>1||(i(r.x,r.y2,r.x2,r.y2),n>1)?t:(i(r.x2,r.y,r.x2,r.y2),n===0?-1:t)}function jce(r,e){let t=0;const n=qg(r,new Lr(e.x,e.y,e.x2,e.y));t+=n.state===jn.POINT?1:0;const i=qg(r,new Lr(e.x,e.y,e.x,e.y2));t+=i.state===jn.POINT?1:0;const a=qg(r,new Lr(e.x,e.y2,e.x2,e.y2));t+=a.state===jn.POINT?1:0;const s=qg(r,new Lr(e.x2,e.y,e.x2,e.y2));return t+=s.state===jn.POINT?1:0,{top:n,left:i,bottom:a,right:s,count:t}}class si{constructor(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i}get x2(){return this.x+this.width}get y2(){return this.y+this.height}get cx(){return this.x+this.width/2}get cy(){return this.y+this.height/2}get radius(){return Math.max(this.width,this.height)/2}static from(e){return new si(e.x,e.y,e.width,e.height)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}clone(){return new si(this.x,this.y,this.width,this.height)}add(e){const t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x2,e.x+e.width),a=Math.max(this.y2,e.y+e.height);this.x=t,this.y=n,this.width=i-t,this.height=a-n}addPoint(e){const t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x2,e.x),a=Math.max(this.y2,e.y);this.x=t,this.y=n,this.width=i-t,this.height=a-n}toString(){return`Rectangle[x=${this.x}, y=${this.y}, w=${this.width}, h=${this.height}]`}draw(e){e.rect(this.x,this.y,this.width,this.height)}containsPt(e,t){return e>=this.x&&e<=this.x2&&t>=this.y&&t<=this.y2}get area(){return this.width*this.height}intersects(e){return this.area<=0||e.width<=0||e.height<=0?!1:e.x+e.width>this.x&&e.y+e.height>this.y&&e.x<this.x2&&e.y<this.y2}distSquare(e,t){if(this.containsPt(e,t))return 0;const n=fp(this,e,t);return n.has(Kn.TOP)?n.has(Kn.LEFT)?tA(e,t,this.x,this.y):n.has(Kn.RIGHT)?tA(e,t,this.x2,this.y):(this.y-t)*(this.y-t):n.has(Kn.BOTTOM)?n.has(Kn.LEFT)?tA(e,t,this.x,this.y2):n.has(Kn.RIGHT)?tA(e,t,this.x2,this.y2):(t-this.y2)*(t-this.y2):n.has(Kn.LEFT)?(this.x-e)*(this.x-e):n.has(Kn.RIGHT)?(e-this.x2)*(e-this.x2):0}}function Kce(r){if(r.length===0)return null;const e=r[0],t=new si(e.x,e.y,0,0);for(const n of r)t.addPoint(n);return t}class lv{constructor(e,t,n){this.cx=e,this.cy=t,this.radius=n}get x(){return this.cx-this.radius}get x2(){return this.cx+this.radius}get width(){return this.radius*2}get y(){return this.cy-this.radius}get y2(){return this.cy+this.radius}get height(){return this.radius*2}static from(e){return new lv(e.cx,e.cy,e.radius)}containsPt(e,t){return tA(this.cx,this.cy,e,t)<this.radius*this.radius}distSquare(e,t){const n=tA(this.cx,this.cy,e,t);if(n<this.radius*this.radius)return 0;const i=Math.sqrt(n)-this.radius;return i*i}draw(e){e.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,Math.PI*2)}}class Al{constructor(e,t=0,n=0,i=0,a=0,s=10,o=10,A=new Float32Array(Math.max(0,s*o)).fill(0)){this.pixelGroup=e,this.i=t,this.j=n,this.pixelX=i,this.pixelY=a,this.width=s,this.height=o,this.area=A}createSub(e,t){return new Al(this.pixelGroup,e.x,e.y,t.x,t.y,e.width,e.height)}static fromPixelRegion(e,t){return new Al(t,0,0,e.x,e.y,Math.ceil(e.width/t),Math.ceil(e.height/t))}copy(e,t){return new Al(this.pixelGroup,this.scaleX(t.x),this.scaleY(t.y),t.x,t.y,e.width,e.height,e.area)}boundX(e){return e<this.i?this.i:e>=this.width?this.width-1:e}boundY(e){return e<this.j?this.j:e>=this.height?this.height-1:e}scaleX(e){return this.boundX(Math.floor((e-this.pixelX)/this.pixelGroup))}scaleY(e){return this.boundY(Math.floor((e-this.pixelY)/this.pixelGroup))}scale(e){const t=this.scaleX(e.x),n=this.scaleY(e.y),i=this.boundX(Math.ceil((e.x+e.width-this.pixelX)/this.pixelGroup)),a=this.boundY(Math.ceil((e.y+e.height-this.pixelY)/this.pixelGroup)),s=i-t,o=a-n;return new si(t,n,s,o)}invertScaleX(e){return Math.round(e*this.pixelGroup+this.pixelX)}invertScaleY(e){return Math.round(e*this.pixelGroup+this.pixelY)}addPadding(e,t){const n=Math.ceil(t/this.pixelGroup),i=this.boundX(e.x-n),a=this.boundY(e.y-n),s=this.boundX(e.x2+n),o=this.boundY(e.y2+n),A=s-i,l=o-a;return new si(i,a,A,l)}get(e,t){return e<0||t<0||e>=this.width||t>=this.height?Number.NaN:this.area[e+t*this.width]}inc(e,t,n){e<0||t<0||e>=this.width||t>=this.height||(this.area[e+t*this.width]+=n)}set(e,t,n){e<0||t<0||e>=this.width||t>=this.height||(this.area[e+t*this.width]=n)}incArea(e,t){if(e.width<=0||e.height<=0||t===0)return;const n=this.width,i=e.width,a=Math.max(0,e.i),s=Math.max(0,e.j),o=Math.min(e.i+e.width,n),A=Math.min(e.j+e.height,this.height);if(!(A<=0||o<=0||a>=n||A>=this.height))for(let l=s;l<A;l++){const c=(l-e.j)*i,u=l*n;for(let h=a;h<o;h++){const g=e.area[h-e.i+c];g!==0&&(this.area[h+u]+=t*g)}}}fill(e){this.area.fill(e)}fillArea(e,t){const n=e.x+e.y*this.width;for(let i=0;i<e.height;i++){const a=n+i*this.width;this.area.fill(t,a,a+e.width)}}fillHorizontalLine(e,t,n,i){const a=e+t*this.width;this.area.fill(i,a,a+n)}fillVerticalLine(e,t,n,i){const a=e+t*this.width;for(let s=0;s<n;s++)this.area[a+s*this.width]=i}clear(){this.area.fill(0)}toString(){let e="";for(let t=0;t<this.height;t++){const n=t*this.width;for(let i=0;i<this.width;i++){const a=this.area[n+i];e+=a.toFixed(1).padStart(6),e+=" "}e+=`
`}return e}draw(e,t=!0){if(this.width<=0||this.height<=0)return;e.save(),t&&e.translate(this.pixelX,this.pixelY);const n=this.area.reduce((s,o)=>Math.min(s,o),Number.POSITIVE_INFINITY),i=this.area.reduce((s,o)=>Math.max(s,o),Number.NEGATIVE_INFINITY),a=s=>(s-n)/(i-n);e.scale(this.pixelGroup,this.pixelGroup);for(let s=0;s<this.width;s++)for(let o=0;o<this.height;o++){const A=this.area[s+o*this.width];e.fillStyle=`rgba(0, 0, 0, ${a(A)})`,e.fillRect(s,o,1,1)}e.restore()}drawThreshold(e,t,n=!0){if(!(this.width<=0||this.height<=0)){e.save(),n&&e.translate(this.pixelX,this.pixelY),e.scale(this.pixelGroup,this.pixelGroup);for(let i=0;i<this.width;i++)for(let a=0;a<this.height;a++){const s=this.area[i+a*this.width];e.fillStyle=s>t?"black":"white",e.fillRect(i,a,1,1)}e.restore()}}}function Q5(r,e){const t=n=>({x:n.x-e,y:n.y-e,width:n.width+2*e,height:n.height+2*e});return Array.isArray(r)?r.map(t):t(r)}function j3(r,e,t){return U5(Object.assign(N5(r),{distSquare:(n,i)=>vS(r.x1,r.y1,r.x2,r.y2,n,i)}),e,t)}function U5(r,e,t){const n=Q5(r,t),i=e.scale(n),a=e.createSub(i,n);return Gce(a,e,t,(s,o)=>r.distSquare(s,o)),a}function Gce(r,e,t,n){const i=t*t;for(let a=0;a<r.height;a++)for(let s=0;s<r.width;s++){const o=e.invertScaleX(r.i+s),A=e.invertScaleY(r.j+a),l=n(o,A);if(l===0){r.set(s,a,i);continue}if(l<i){const c=t-Math.sqrt(l);r.set(s,a,c*c)}}return r}function Vce(r,e,t){const n=e.scale(r),i=e.addPadding(n,t),a=e.createSub(i,{x:r.x-t,y:r.y-t}),s=n.x-i.x,o=n.y-i.y,A=i.x2-n.x2,l=i.y2-n.y2,c=i.width-s-A,u=i.height-o-l,h=t*t;a.fillArea({x:s,y:o,width:c+1,height:u+1},h);const g=[0],p=Math.max(o,s,A,l);{const b=e.invertScaleX(n.x+n.width/2);for(let _=1;_<p;_++){const C=e.invertScaleY(n.y-_),M=r.distSquare(b,C);if(M<h){const F=t-Math.sqrt(M);g.push(F*F)}else break}}const v=[],m=Math.max(s,A),w=Math.max(o,A);for(let b=1;b<m;b++){const _=e.invertScaleX(n.x-b),C=[];for(let M=1;M<w;M++){const F=e.invertScaleY(n.y-M),k=r.distSquare(_,F);if(k<h){const P=t-Math.sqrt(k);C.push(P*P)}else C.push(0)}v.push(C)}for(let b=1;b<Math.min(o,g.length);b++){const _=g[b];a.fillHorizontalLine(s,o-b,c+1,_)}for(let b=1;b<Math.min(l,g.length);b++){const _=g[b];a.fillHorizontalLine(s,o+u+b,c+1,_)}for(let b=1;b<Math.min(s,g.length);b++){const _=g[b];a.fillVerticalLine(s-b,o,u+1,_)}for(let b=1;b<Math.min(l,g.length);b++){const _=g[b];a.fillVerticalLine(s+c+b,o,u+1,_)}for(let b=1;b<s;b++){const _=v[b-1],C=s-b;for(let M=1;M<o;M++)a.set(C,o-M,_[M-1]);for(let M=1;M<l;M++)a.set(C,o+u+M,_[M-1])}for(let b=1;b<A;b++){const _=v[b-1],C=s+c+b;for(let M=1;M<o;M++)a.set(C,o-M,_[M-1]);for(let M=1;M<l;M++)a.set(C,o+u+M,_[M-1])}return a}function En(r,e){return{x:r,y:e}}function qce(r,e,t,n){if(r.length===0)return[];const i=Zce(r);return i.map((a,s)=>{const o=i.slice(0,s);return Wce(e,a,o,t,n)}).flat()}function Wce(r,e,t,n,i){const a=En(e.cx,e.cy),s=Xce(a,t,r);if(s==null)return[];const o=new Lr(a.x,a.y,s.cx,s.cy),A=$ce(o,r,n,i);return Yce(A,r)}function $ce(r,e,t,n){const i=[],a=[];a.push(r);let s=!0;for(let o=0;o<t&&s;o++)for(s=!1;!s&&a.length>0;){const A=a.pop(),l=H5(e,A),c=l?jce(A,l):null;if(!l||!c||c.count!==2){s||i.push(A);continue}let u=n,h=$g(l,u,c,!0),g=Oo(h,a)||Oo(h,i),p=Wg(h,e);for(;!g&&p&&u>=1;)u/=1.5,h=$g(l,u,c,!0),g=Oo(h,a)||Oo(h,i),p=Wg(h,e);if(h&&!g&&!p&&(a.push(new Lr(A.x1,A.y1,h.x,h.y)),a.push(new Lr(h.x,h.y,A.x2,A.y2)),s=!0),s)continue;u=n,h=$g(l,u,c,!1);let v=Oo(h,a)||Oo(h,i);for(p=Wg(h,e);!v&&p&&u>=1;)u/=1.5,h=$g(l,u,c,!1),v=Oo(h,a)||Oo(h,i),p=Wg(h,e);h&&!v&&(a.push(new Lr(A.x1,A.y1,h.x,h.y)),a.push(new Lr(h.x,h.y,A.x2,A.y2)),s=!0),s||i.push(A)}for(;a.length>0;)i.push(a.pop());return i}function Yce(r,e){const t=[];for(;r.length>0;){const n=r.pop();if(r.length===0){t.push(n);break}const i=r.pop(),a=new Lr(n.x1,n.y1,i.x2,i.y2);H5(e,a)?(t.push(n),r.push(i)):r.push(a)}return t}function Xce(r,e,t){let n=Number.POSITIVE_INFINITY;return e.reduce((i,a)=>{const s=tA(r.x,r.y,a.cx,a.cy);if(s>n)return i;const o=new Lr(r.x,r.y,a.cx,a.cy),A=Jce(t,o);return s*(A+1)*(A+1)<n&&(i=a,n=s*(A+1)*(A+1)),i},null)}function Zce(r){if(r.length<2)return r;let e=0,t=0;return r.forEach(n=>{e+=n.cx,t+=n.cy}),e/=r.length,t/=r.length,r.map(n=>{const i=e-n.cx,a=t-n.cy,s=i*i+a*a;return[n,s]}).sort((n,i)=>n[1]-i[1]).map(n=>n[0])}function Wg(r,e){return e.some(t=>t.containsPt(r.x,r.y))}function Oo(r,e){return e.some(t=>!!(z3(t.x1,t.y1,r.x,r.y,.001)||z3(t.x2,t.y2,r.x,r.y,.001)))}function H5(r,e){let t=Number.POSITIVE_INFINITY,n=null;for(const i of r){if(!R5(i,e))continue;const a=zce(i,e);a>=0&&a<t&&(n=i,t=a)}return n}function Jce(r,e){return r.reduce((t,n)=>R5(n,e)&&Hce(n,e)?t+1:t,0)}function $g(r,e,t,n){const i=t.top,a=t.left,s=t.bottom,o=t.right;if(n){if(a.state===jn.POINT){if(i.state===jn.POINT)return En(r.x-e,r.y-e);if(s.state===jn.POINT)return En(r.x-e,r.y2+e);const h=r.width*r.height;return r.width*((a.y-r.y+(o.y-r.y))*.5)<h*.5?a.y>o.y?En(r.x-e,r.y-e):En(r.x2+e,r.y-e):a.y<o.y?En(r.x-e,r.y2+e):En(r.x2+e,r.y2+e)}if(o.state===jn.POINT){if(i.state===jn.POINT)return En(r.x2+e,r.y-e);if(s.state===jn.POINT)return En(r.x2+e,r.y2+e)}const c=r.height*r.width;return r.height*((i.x-r.x+(o.x-r.x))*.5)<c*.5?i.x>s.x?En(r.x-e,r.y-e):En(r.x-e,r.y2+e):i.x<s.x?En(r.x2+e,r.y-e):En(r.x2+e,r.y2+e)}if(a.state===jn.POINT){if(i.state===jn.POINT)return En(r.x2+e,r.y2+e);if(s.state===jn.POINT)return En(r.x2+e,r.y-e);const c=r.height*r.width;return r.width*((a.y-r.y+(o.y-r.y))*.5)<c*.5?a.y>o.y?En(r.x2+e,r.y2+e):En(r.x-e,r.y2+e):a.y<o.y?En(r.x2+e,r.y-e):En(r.x-e,r.y-e)}if(o.state===jn.POINT){if(i.state===jn.POINT)return En(r.x-e,r.y2+e);if(s.state===jn.POINT)return En(r.x-e,r.y-e)}const A=r.height*r.width;return r.height*((i.x-r.x+(o.x-r.x))*.5)<A*.5?i.x>s.x?En(r.x2+e,r.y2+e):En(r.x2+e,r.y-e):i.x<s.x?En(r.x-e,r.y2+e):En(r.x-e,r.y-e)}function eue(r,e,t,n){if(!(r.closed?t<r.length:t<r.length-1))return!1;const a=r.get(e),s=r.get(t+1);for(let o=e+1;o<=t;o++){const A=r.get(o);if(vS(a.x,a.y,s.x,s.y,A.x,A.y)>n)return!1}return!0}function tue(r=0){return e=>{if(r<0||e.length<3)return e;const t=[];let n=0;const i=r*r;for(;n<e.length;){let a=n+1;for(;eue(e,n,a,i);)a++;t.push(e.get(n)),n=a}return new nu(t)}}function nue(r,e){switch(r){case-2:return(((-e+3)*e-3)*e+1)/6;case-1:return((3*e-6)*e*e+4)/6;case 0:return(((-3*e+3)*e+3)*e+1)/6;case 1:return e*e*e/6;default:throw new Error("unknown error")}}function rue(r=6){function a(s,o,A){let l=0,c=0;for(let u=-2;u<=1;u++){const h=s.get(o+u),g=nue(u,A);l+=g*h.x,c+=g*h.y}return{x:l,y:c}}return s=>{if(s.length<3)return s;const o=[],A=s.closed,l=s.length+3-1+(A?0:2);o.push(a(s,2-(A?0:2),0));for(let c=2-(A?0:2);c<l;c++)for(let u=1;u<=r;u++)o.push(a(s,c,u/r));return new nu(o)}}function iue(r=8){return e=>{let t=r,n=e.length;if(t>1)for(n=Math.floor(e.length/t);n<3&&t>1;)t-=1,n=Math.floor(e.length/t);const i=[];for(let a=0,s=0;s<n;s++,a+=t)i.push(e.get(a));return new nu(i)}}class nu{constructor(e=[],t=!0){this.points=e,this.closed=t}get(e){const t=e,n=this.points.length;return e<0?this.closed?this.get(e+n):this.points[0]:e>=n?this.closed?this.get(e-n):this.points[n-1]:this.points[t]}get length(){return this.points.length}toString(e=1/0){const t=this.points;if(t.length===0)return"";const n=typeof e=="function"?e:Uce(e);let i="M";for(const a of t)i+=`${n(a.x)},${n(a.y)} L`;return i=i.slice(0,-1),this.closed&&(i+=" Z"),i}draw(e){const t=this.points;if(t.length!==0){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(const n of t)e.lineTo(n.x,n.y);this.closed&&e.closePath()}}sample(e){return iue(e)(this)}simplify(e){return tue(e)(this)}bSplines(e){return rue(e)(this)}apply(e){return e(this)}containsElements(e){const t=Kce(this.points);return t?e.every(n=>t.containsPt(n.cx,n.cy)&&this.withinArea(n.cx,n.cy)):!1}withinArea(e,t){if(this.length===0)return!1;let n=0;const i=this.points[0],a=new Lr(i.x,i.y,i.x,i.y);for(let s=1;s<this.points.length;s++){const o=this.points[s];a.x1=a.x2,a.y1=a.y2,a.x2=o.x,a.y2=o.y,a.cuts(e,t)&&n++}return a.x1=a.x2,a.y1=a.y2,a.x2=i.x,a.y2=i.y,a.cuts(e,t)&&n++,n%2===1}}class aue{constructor(e=0){this.count=0,this.arr=[],this.set=new Set,this.arr.length=e}add(e){this.set.add(`${e.x}x${e.y}`),this.arr[this.count++]=e}contains(e){return this.set.has(`${e.x}x${e.y}`)}isFirst(e){if(this.count===0)return!1;const t=this.arr[0];return t!=null&&t.x===e.x&&t.y===e.y}path(){return new nu(this.arr.slice(0,this.count))}clear(){this.set.clear(),this.count=0}get(e){return this.arr[e]}get length(){return this.count}}const ed=0,Yg=1,Xg=2,uB=3;function sue(r,e){const t=(Math.floor(r.width)+Math.floor(r.height))*2,n=new aue(t);function i(A,l,c,u){const h=r.get(A,l);return Number.isNaN(h)?Number.NaN:h>e?c+u:c}function a(A,l){let c=ed;return c=i(A,l,c,1),c=i(A+1,l,c,2),c=i(A,l+1,c,4),c=i(A+1,l+1,c,8),Number.isNaN(c)?-1:c}let s=Yg;function o(A,l){let c=A,u=l,h=r.invertScaleX(c),g=r.invertScaleY(u);for(let p=0;p<r.width*r.height;p++){const v={x:h,y:g};if(n.contains(v)){if(n.isFirst(v))return!0}else n.add(v);const m=a(c,u);switch(m){case-1:return!0;case 0:case 3:case 2:case 7:s=Xg;break;case 12:case 14:case 4:s=uB;break;case 6:s=s===ed?uB:Xg;break;case 1:case 13:case 5:s=ed;break;case 9:s=s===Xg?ed:Yg;break;case 10:case 8:case 11:s=Yg;break;default:return console.warn("Marching squares invalid state: "+m),!0}switch(s){case ed:u--,g-=r.pixelGroup;break;case Yg:u++,g+=r.pixelGroup;break;case uB:c--,h-=r.pixelGroup;break;case Xg:c++,h+=r.pixelGroup;break;default:return console.warn("Marching squares invalid state: "+m),!0}}return!0}for(let A=0;A<r.width;A++)for(let l=0;l<r.height;l++){if(r.get(A,l)<=e)continue;const c=a(A,l);if(!(c<0||c===15)&&o(A,l))return n.path()}return null}const Sm={maxRoutingIterations:100,maxMarchingIterations:20,pixelGroup:4,edgeR0:10,edgeR1:20,nodeR0:15,nodeR1:50,morphBuffer:10,threshold:1,memberInfluenceFactor:1,edgeInfluenceFactor:1,nonMemberInfluenceFactor:-.8,virtualEdges:!0};function Fd(r){return r!=null&&typeof r.radius=="number"}function K3(r,e){if(Fd(r)!==Fd(e))return!1;if(Fd(r)){const n=e;return r.cx===n.cx&&r.cy===n.cy&&r.radius===n.radius}const t=e;return r.x===t.x&&r.y===t.y&&r.width===t.width&&r.height===t.height}var Va;(function(r){r[r.MEMBERS=0]="MEMBERS",r[r.NON_MEMBERS=1]="NON_MEMBERS",r[r.EDGES=2]="EDGES"})(Va||(Va={}));let G3=class{constructor(e={}){this.dirty=new Set,this.members=[],this.nonMembers=[],this.virtualEdges=[],this.edges=[],this.activeRegion=new si(0,0,0,0),this.potentialArea=new Al(1,0,0,0,0,0,0),this.o=Object.assign({},Sm,e)}pushMember(...e){if(e.length!==0){this.dirty.add(Va.MEMBERS);for(const t of e)this.members.push({raw:t,obj:Fd(t)?lv.from(t):si.from(t),area:null})}}removeMember(e){const t=this.members.findIndex(n=>K3(n.raw,e));return t<0?!1:(this.members.splice(t,1),this.dirty.add(Va.MEMBERS),!0)}removeNonMember(e){const t=this.nonMembers.findIndex(n=>K3(n.raw,e));return t<0?!1:(this.nonMembers.splice(t,1),this.dirty.add(Va.NON_MEMBERS),!0)}removeEdge(e){const t=this.edges.findIndex(n=>n.obj.equals(e));return t<0?!1:(this.edges.splice(t,1),this.dirty.add(Va.NON_MEMBERS),!0)}pushNonMember(...e){if(e.length!==0){this.dirty.add(Va.NON_MEMBERS);for(const t of e)this.nonMembers.push({raw:t,obj:Fd(t)?lv.from(t):si.from(t),area:null})}}pushEdge(...e){if(e.length!==0){this.dirty.add(Va.EDGES);for(const t of e)this.edges.push({raw:t,obj:Lr.from(t),area:null})}}update(){const e=this.dirty.has(Va.MEMBERS),t=this.dirty.has(Va.NON_MEMBERS);let n=this.dirty.has(Va.EDGES);this.dirty.clear();const i=this.members.map(l=>l.obj);if(this.o.virtualEdges&&(e||t)){const l=this.nonMembers.map(h=>h.obj),c=qce(i,l,this.o.maxRoutingIterations,this.o.morphBuffer),u=new Map(this.virtualEdges.map(h=>[h.obj.toString(),h.area]));this.virtualEdges=c.map(h=>{var g;return{raw:h,obj:h,area:(g=u.get(h.toString()))!==null&&g!==void 0?g:null}}),n=!0}let a=!1;if(e||n){const l=this.virtualEdges.concat(this.edges).map(g=>g.obj),c=Aue(i,l),u=Math.max(this.o.edgeR1,this.o.nodeR1)+this.o.morphBuffer,h=si.from(Q5(c,u));h.equals(this.activeRegion)||(a=!0,this.activeRegion=h)}if(a){const l=Math.ceil(this.activeRegion.width/this.o.pixelGroup),c=Math.ceil(this.activeRegion.height/this.o.pixelGroup);this.activeRegion.x!==this.potentialArea.pixelX||this.activeRegion.y!==this.potentialArea.pixelY?(this.potentialArea=Al.fromPixelRegion(this.activeRegion,this.o.pixelGroup),this.members.forEach(u=>u.area=null),this.nonMembers.forEach(u=>u.area=null),this.edges.forEach(u=>u.area=null),this.virtualEdges.forEach(u=>u.area=null)):(l!==this.potentialArea.width||c!==this.potentialArea.height)&&(this.potentialArea=Al.fromPixelRegion(this.activeRegion,this.o.pixelGroup))}const s=new Map,o=l=>{if(l.area){const c=`${l.obj.width}x${l.obj.height}x${l.obj instanceof si?"R":"C"}`;s.set(c,l.area)}},A=l=>{if(l.area)return;const c=`${l.obj.width}x${l.obj.height}x${l.obj instanceof si?"R":"C"}`;if(s.has(c)){const h=s.get(c);l.area=this.potentialArea.copy(h,{x:l.obj.x-this.o.nodeR1,y:l.obj.y-this.o.nodeR1});return}const u=l.obj instanceof si?Vce(l.obj,this.potentialArea,this.o.nodeR1):U5(l.obj,this.potentialArea,this.o.nodeR1);l.area=u,s.set(c,u)};this.members.forEach(o),this.nonMembers.forEach(o),this.members.forEach(A),this.nonMembers.forEach(l=>{this.activeRegion.intersects(l.obj)?A(l):l.area=null}),this.edges.forEach(l=>{l.area||(l.area=j3(l.obj,this.potentialArea,this.o.edgeR1))}),this.virtualEdges.forEach(l=>{l.area||(l.area=j3(l.obj,this.potentialArea,this.o.edgeR1))})}drawMembers(e){for(const t of this.members)t.obj.draw(e)}drawNonMembers(e){for(const t of this.nonMembers)t.obj.draw(e)}drawEdges(e){for(const t of this.edges)t.obj.draw(e)}drawPotentialArea(e,t=!0){this.potentialArea.draw(e,t)}compute(){if(this.members.length===0)return new nu([]);this.dirty.size>0&&this.update();const{o:e,potentialArea:t}=this,n=this.members.map(o=>o.area),i=this.virtualEdges.concat(this.edges).map(o=>o.area),a=this.nonMembers.filter(o=>o.area!=null).map(o=>o.area),s=this.members.map(o=>o.obj);return oue(t,n,i,a,o=>o.containsElements(s),e)}};function oue(r,e,t,n,i,a={}){const s=Object.assign({},Sm,a);let o=s.threshold,A=s.memberInfluenceFactor,l=s.edgeInfluenceFactor,c=s.nonMemberInfluenceFactor;const u=(s.nodeR0-s.nodeR1)*(s.nodeR0-s.nodeR1),h=(s.edgeR0-s.edgeR1)*(s.edgeR0-s.edgeR1);for(let g=0;g<s.maxMarchingIterations;g++){if(r.clear(),A!==0){const v=A/u;for(const m of e)r.incArea(m,v)}if(l!==0){const v=l/h;for(const m of t)r.incArea(m,v)}if(c!==0){const v=c/u;for(const m of n)r.incArea(m,v)}const p=sue(r,o);if(p&&i(p))return p;if(o*=.95,g<=s.maxMarchingIterations*.5)A*=1.2,l*=1.2;else if(c!==0&&n.length>0)c*=.8;else break}return new nu([])}function Aue(r,e){if(r.length===0)return new si(0,0,0,0);const t=si.from(r[0]);for(const n of r)t.add(n);for(const n of e)t.add(N5(n));return t}var lue=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class Tm extends Dr{constructor(e,t){super(e,qr({},Tm.defaultOptions,t)),this.path=null,this.members=new Map,this.avoidMembers=new Map,this.bubbleSetOptions={},this.drawBubbleSets=()=>{const{style:n,bubbleSetOptions:i}=this.parseOptions();Qn(this.bubbleSetOptions,i)||this.init(),this.bubbleSetOptions=Object.assign({},i);const a=Object.assign(Object.assign({},n),{d:this.getPath()});this.shape?this.shape.update(a):(this.shape=new fh({style:a}),this.context.canvas.appendChild(this.shape))},this.updateBubbleSetsPath=n=>{if(!this.shape)return;const i=he(n.data);[...this.options.members,...this.options.avoidMembers].includes(i)&&this.shape.update(Object.assign(Object.assign({},this.parseOptions().style),{d:this.getPath(i)}))},this.getPath=n=>{const{graph:i}=this.context,a=this.options.members,s=[...this.members.keys()],o=this.options.avoidMembers,A=[...this.avoidMembers.keys()];if(a.length===0&&o.length===0)return this.members.clear(),this.avoidMembers.clear(),this.path=[],this.path;if(!n&&this.path&&Qn(a,s)&&Qn(o,A))return this.path;const{enter:l=[],exit:c=[]}=aA(s,a,m=>m),{enter:u=[],exit:h=[]}=aA(A,o,m=>m);if(n){const m=a.includes(n),w=o.includes(n);m&&(c.push(n),l.push(n)),w&&(h.push(n),u.push(n))}const g=(m,w,b)=>{m.forEach(_=>{const C=b?this.members:this.avoidMembers,M=b?"pushMember":"pushNonMember",F=b?"removeMember":"removeNonMember";if(w){let k;i.getElementType(_)==="edge"?([k]=uue(i,_),this.bubbleSets.pushEdge(k)):([k]=cue(i,_),this.bubbleSets[M](k)),C.set(_,k)}else{const k=C.get(_);k&&(i.getElementType(_)==="edge"?this.bubbleSets.removeEdge(k):this.bubbleSets[F](k),C.delete(_))}})};g(c,!1,!0),g(l,!0,!0),g(h,!1,!1),g(u,!0,!1);const v=this.bubbleSets.compute().sample(8).simplify(0).bSplines().simplify(0);return this.path=wH(v.points.map(Gr)),this.path},this.bindEvents(),this.bubbleSets=new G3(this.options)}bindEvents(){this.context.graph.on(Pe.AFTER_RENDER,this.drawBubbleSets),this.context.graph.on(Pe.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath)}init(){this.bubbleSets=new G3(this.options),this.members.clear(),this.avoidMembers.clear(),this.path=null}parseOptions(){const e=this.options,{type:t,key:n,members:i,avoidMembers:a}=e,s=lue(e,["type","key","members","avoidMembers"]),o=Object.keys(s).reduce((A,l)=>(l in Sm?A.bubbleSetOptions[l]=s[l]:A.style[l]=s[l],A),{style:{},bubbleSetOptions:{}});return Object.assign({type:t,key:n,members:i,avoidMembers:a},o)}addMember(e){const t=Array.isArray(e)?e:[e];t.some(n=>this.options.avoidMembers.includes(n))&&(this.options.avoidMembers=this.options.avoidMembers.filter(n=>!t.includes(n))),this.options.members=[...new Set([...this.options.members,...t])],this.drawBubbleSets()}removeMember(e){const t=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter(n=>!t.includes(n)),this.drawBubbleSets()}updateMember(e){this.options.members=$e(e)?e(this.options.members):e,this.drawBubbleSets()}getMember(){return this.options.members}addAvoidMember(e){const t=Array.isArray(e)?e:[e];t.some(n=>this.options.members.includes(n))&&(this.options.members=this.options.members.filter(n=>!t.includes(n))),this.options.avoidMembers=[...new Set([...this.options.avoidMembers,...t])],this.drawBubbleSets()}removeAvoidMember(e){const t=Array.isArray(e)?e:[e];this.options.avoidMembers.some(n=>t.includes(n))&&(this.options.avoidMembers=this.options.avoidMembers.filter(n=>!t.includes(n)),this.drawBubbleSets())}updateAvoidMember(e){this.options.avoidMembers=Array.isArray(e)?e:[e],this.drawBubbleSets()}getAvoidMember(){return this.options.avoidMembers}destroy(){this.context.graph.off(Pe.AFTER_RENDER,this.drawBubbleSets),this.context.graph.off(Pe.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath),this.shape&&(this.shape.destroy(),this.shape=void 0),super.destroy()}}Tm.defaultOptions=Object.assign({members:[],avoidMembers:[],fill:"lightblue",fillOpacity:.2,stroke:"blue",strokeOpacity:.2},Sm);const cue=(r,e)=>(Array.isArray(e)?e:[e]).map(n=>{const i=r.getElementRenderBounds(n);return new si(i.min[0],i.min[1],Is(i),Ps(i))}),uue=(r,e)=>(Array.isArray(e)?e:[e]).map(n=>{const i=r.getEdgeData(n),a=r.getElementPosition(i.source),s=r.getElementPosition(i.target);return Lr.from({x1:a[0],y1:a[1],x2:s[0],y2:s[1]})});function due(r){return`
    <ul class="g6-contextmenu-ul">
      ${r.map(e=>`<li  class="g6-contextmenu-li" value="${e.value}">${e.name}</li>`).join("")}
    </ul>
  `}const hue=`
  .g6-contextmenu {
    font-size: 12px;
    background-color: rgba(255, 255, 255, 0.96);
    border-radius: 4px;
    overflow: hidden;
    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;
    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;
  }

  .g6-contextmenu-ul {
    max-width: 256px;
    min-width: 96px;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .g6-contextmenu-li {
    padding: 8px 12px;
    cursor: pointer;
    user-select: none;
  }

  .g6-contextmenu-li:hover {
    background-color: #f5f5f5;
    cursor: pointer;
  }
`;var V3=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class Mm extends Dr{constructor(e,t){super(e,Object.assign({},Mm.defaultOptions,t)),this.targetElement=null,this.onTriggerEvent=n=>{var i;(i=n.preventDefault)===null||i===void 0||i.call(n),this.show(n)},this.onMenuItemClick=n=>{const{onClick:i,trigger:a}=this.options;if(n.target instanceof HTMLElement&&n.target.className.includes("g6-contextmenu-li")){const s=n.target.getAttribute("value");i==null||i(s,n.target,this.targetElement),this.hide()}a!=="click"&&this.hide()},this.initElement(),this.update(t)}initElement(){this.$element=tu("contextmenu",!1,{zIndex:"99"});const{className:e}=this.options;e&&this.$element.classList.add(e),this.context.canvas.getContainer().appendChild(this.$element),Hx("g6-contextmenu-css","style",{},hue,document.head)}show(e){return V3(this,void 0,void 0,function*(){const{enable:t,offset:n}=this.options;if(typeof t=="function"&&!t(e)||!t){this.hide();return}const i=yield this.getDOMContent(e);i instanceof HTMLElement?(this.$element.innerHTML="",this.$element.appendChild(i)):this.$element.innerHTML=i;const a=this.context.graph.getCanvas().getContainer().getBoundingClientRect();this.$element.style.left=`${e.client.x-a.left+n[0]}px`,this.$element.style.top=`${e.client.y-a.top+n[1]}px`,this.$element.style.display="block",this.targetElement=e.target})}hide(){this.$element.style.display="none",this.targetElement=null}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.$element.remove()}getDOMContent(e){return V3(this,void 0,void 0,function*(){const{getContent:t,getItems:n}=this.options;return n?due(yield n(e)):yield t(e)})}bindEvents(){const{graph:e}=this.context,{trigger:t}=this.options;e.on(`canvas:${t}`,this.onTriggerEvent),e.on(`node:${t}`,this.onTriggerEvent),e.on(`edge:${t}`,this.onTriggerEvent),e.on(`combo:${t}`,this.onTriggerEvent),document.addEventListener("click",this.onMenuItemClick)}unbindEvents(){const{graph:e}=this.context,{trigger:t}=this.options;e.off(`canvas:${t}`,this.onTriggerEvent),e.off(`node:${t}`,this.onTriggerEvent),e.off(`edge:${t}`,this.onTriggerEvent),e.off(`combo:${t}`,this.onTriggerEvent),document.removeEventListener("click",this.onMenuItemClick)}}Mm.defaultOptions={trigger:"contextmenu",offset:[4,4],loadingContent:'<div class="g6-contextmenu-loading">Loading...</div>',getContent:()=>"It is a empty context menu.",enable:()=>!0};class Fm extends Dr{constructor(e,t){super(e,Object.assign({},Fm.defaultOptions,t)),this.edgeBundles={},this.edgePoints={},this.onBundle=()=>{const{model:n,element:i}=this.context,a=n.getEdgeData();this.divideEdges(this.options.divisions);const{cycles:s,iterRate:o,divRate:A}=this.options;let{lambda:l,divisions:c,iterations:u}=this.options;for(let h=0;h<s;h++){for(let g=0;g<u;g++){const p={};a.forEach(v=>{var m;if(v.source===v.target)return;const w=he(v);p[w]=this.getEdgeForces(v,c,l);for(let b=0;b<c+1;b++)(m=this.edgePoints)[w]||(m[w]=[]),this.edgePoints[w][b]=mt(this.edgePoints[w][b],p[w][b])})}l/=2,c*=A,u*=o,this.divideEdges(c)}a.forEach(h=>{const g=he(h),p=i.getElement(g);p==null||p.update({d:z2(this.edgePoints[g])})})},this.bindEvents()}get nodeMap(){const e=this.context.model.getNodeData();return Object.fromEntries(e.map(t=>[he(t),pl(Cr(t))]))}divideEdges(e){this.context.model.getEdgeData().forEach(n=>{var i;const a=he(n);(i=this.edgePoints)[a]||(i[a]=[]);const s=this.nodeMap[n.source],o=this.nodeMap[n.target];if(e===1)this.edgePoints[a].push(s),this.edgePoints[a].push(es(mt(s,o),2)),this.edgePoints[a].push(o);else{const l=(this.edgePoints[a].length===0?yn(s,o):mue(this.edgePoints[a]))/(e+1);let c=l;const u=[s];for(let h=1;h<this.edgePoints[a].length;h++){const g=this.edgePoints[a][h-1],p=this.edgePoints[a][h];let v=yn(p,g);for(;v>c;){const m=c/v,w=mt(g,$a(rn(p,g),m));u.push(w),v-=c,c=l}c-=v}u.push(o),this.edgePoints[a]=u}})}getVectorPosition(e){const t=this.nodeMap[e.source],n=this.nodeMap[e.target],[i,a]=rn(n,t),s=yn(t,n);return{source:t,target:n,vx:i,vy:a,length:s}}measureEdgeCompatibility(e,t){const n=this.getVectorPosition(e),i=this.getVectorPosition(t),a=fue(n,i),s=gue(n,i),o=pue(n,i),A=vue(n,i);return a*s*o*A}getEdgeBundles(){const e={},t=this.options.bundleThreshold,n=this.context.model.getEdgeData();return n.forEach((i,a)=>{n.forEach((s,o)=>{var A,l;if(o<=a)return;this.measureEdgeCompatibility(i,s)>=t&&(e[A=he(i)]||(e[A]=[]),e[he(i)].push(s),e[l=he(s)]||(e[l]=[]),e[he(s)].push(i))})}),e}getSpringForce(e,t){const{pre:n,cur:i,next:a}=e;return $a(rn(mt(n,a),$a(i,2)),t)}getElectrostaticForce(e,t){vs(this.edgeBundles)&&(this.edgeBundles=this.getEdgeBundles());const n=this.edgeBundles[he(t)];let i=[0,0];return n==null||n.forEach(a=>{const s=this.edgePoints[he(a)][e],o=this.edgePoints[he(t)][e],A=rn(s,o),l=yn(s,o);i=mt(i,$a(A,1/l))}),i}getEdgeForces(e,t,n){const i=this.nodeMap[e.source],a=this.nodeMap[e.target],s=this.options.K/(yn(i,a)*(t+1)),o=[[0,0]],A=he(e);for(let l=1;l<t;l++){const c=this.getSpringForce({pre:this.edgePoints[A][l-1],cur:this.edgePoints[A][l],next:this.edgePoints[A][l+1]||[0,0]},s),u=this.getElectrostaticForce(l,e);o.push($a(mt(c,u),n))}return o.push([0,0]),o}bindEvents(){const{graph:e}=this.context;e.on(Pe.AFTER_RENDER,this.onBundle)}unbindEvents(){const{graph:e}=this.context;e.off(Pe.AFTER_RENDER,this.onBundle)}destroy(){this.unbindEvents(),super.destroy()}}Fm.defaultOptions={K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:2/3,bundleThreshold:.6};const fue=(r,e)=>Math.abs(cee([r.vx,r.vy],[e.vx,e.vy])/(r.length*e.length)),gue=(r,e)=>{const t=(r.length+e.length)/2;return 2/(t/Math.min(r.length,e.length)+Math.max(r.length,e.length)/t)},pue=(r,e)=>{const t=(r.length+e.length)/2,n=es(mt(r.source,r.target),2),i=es(mt(e.source,e.target),2);return t/(t+yn(n,i))},q3=(r,e)=>{if(e.source[0]===e.target[0])return[e.source[0],r[1]];if(e.source[1]===e.target[1])return[r[0],e.source[1]];const t=(e.source[1]-e.target[1])/(e.source[0]-e.target[0]),n=(t*t*e.source[0]+t*(r[1]-e.source[1])+r[0])/(t*t+1),i=t*(n-e.source[0])+e.source[1];return[n,i]},W3=(r,e)=>{const t=q3(e.source,r),n=q3(e.target,r),i=es(mt(t,n),2),a=es(mt(r.source,r.target),2);return yn(t,n)===0?0:Math.max(0,1-2*yn(a,i)/yn(t,n))},vue=(r,e)=>Math.min(W3(r,e),W3(e,r)),mue=r=>{let e=0;for(let t=1;t<r.length;t++)e+=yn(r[t],r[t-1]);return e},yue={fill:"#fff",fillOpacity:1,lineWidth:1,stroke:"#000",strokeOpacity:.8,zIndex:-1/0},$3=.05;class km extends Dr{constructor(e,t){super(e,Object.assign({},km.defaultOptions,t)),this.shapes=new Map,this.r=this.options.r,this.onEdgeFilter=n=>{if(this.options.trigger==="drag"&&this.isLensOn)return;const i=Gr(n.canvas);this.renderLens(i),this.renderFocusElements()},this.renderLens=n=>{const i=Object.assign({},yue,this.options.style);this.isLensOn||(this.lens=new gh({style:i}),this.canvas.appendChild(this.lens)),Object.assign(i,Ya(n),{size:this.r*2}),this.lens.update(i)},this.getFilterData=()=>{const{filter:n}=this.options,{model:i}=this.context,a=i.getData();if(!n)return a;const{nodes:s,edges:o,combos:A}=a;return{nodes:s.filter(l=>n(he(l),"node")),edges:o.filter(l=>n(he(l),"edge")),combos:A.filter(l=>n(he(l),"combo"))}},this.getFocusElements=n=>{const{nodes:i,edges:a}=this.getFilterData(),s=i.filter(l=>yn(Cr(l),n)<this.r),o=s.map(l=>he(l)),A=a.filter(l=>{const{source:c,target:u}=l,h=o.includes(c),g=o.includes(u);switch(this.options.nodeType){case"both":return h&&g;case"either":return h!==g;case"source":return h&&!g;case"target":return!h&&g;default:return!1}});return{nodes:s,edges:A}},this.renderFocusElements=()=>{const{element:n,graph:i}=this.context;if(!this.isLensOn)return;const a=this.lens.getCenter(),{nodes:s,edges:o}=this.getFocusElements(a),A=new Set,l=c=>{const u=he(c);A.add(u);const h=n.getElement(u);if(!h)return;const g=this.shapes.get(u)||h.cloneNode();g.setPosition(h.getPosition()),g.id=h.id,this.shapes.has(u)?Object.entries(h.attributes).forEach(([m,w])=>{g.style[m]!==w&&(g.style[m]=w)}):(this.canvas.appendChild(g),this.shapes.set(u,g));const p=i.getElementType(u),v=this.getElementStyle(p,c);g.update(v)};s.forEach(l),o.forEach(l),this.shapes.forEach((c,u)=>{A.has(u)||(c.destroy(),this.shapes.delete(u))})},this.scaleRByWheel=n=>{var i;this.options.preventDefault&&n.preventDefault();const{clientX:a,clientY:s,deltaX:o,deltaY:A}=n,{graph:l,canvas:c}=this.context,u=l.getCanvasByClient([a,s]),h=(i=this.lens)===null||i===void 0?void 0:i.getCenter();if(!this.isLensOn||yn(u,h)>this.r)return;const{maxR:g,minR:p}=this.options,v=o+A>0?1/(1-$3):1-$3,m=Math.min(...c.getSize())/2;this.r=Math.max(p||0,Math.min(g||m,this.r*v)),this.renderLens(h),this.renderFocusElements()},this.isLensDragging=!1,this.onDragStart=n=>{var i;const a=Gr(n.canvas),s=(i=this.lens)===null||i===void 0?void 0:i.getCenter();!this.isLensOn||yn(a,s)>this.r||(this.isLensDragging=!0)},this.onDrag=n=>{if(!this.isLensDragging)return;const i=Gr(n.canvas);this.renderLens(i),this.renderFocusElements()},this.onDragEnd=()=>{this.isLensDragging=!1},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}getElementStyle(e,t){const n=e==="node"?this.options.nodeStyle:this.options.edgeStyle;return typeof n=="function"?n(t):n}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var e;const{graph:t}=this.context,{trigger:n,scaleRBy:i}=this.options,a=t.getCanvas().getLayer();["click","drag"].includes(n)&&a.addEventListener(_e.CLICK,this.onEdgeFilter),n==="pointermove"?a.addEventListener(_e.POINTER_MOVE,this.onEdgeFilter):n==="drag"&&(a.addEventListener(_e.DRAG_START,this.onDragStart),a.addEventListener(_e.DRAG,this.onDrag),a.addEventListener(_e.DRAG_END,this.onDragEnd)),i==="wheel"&&((e=this.graphDom)===null||e===void 0||e.addEventListener(_e.WHEEL,this.scaleRByWheel,{passive:!1}))}unbindEvents(){var e;const{graph:t}=this.context,{trigger:n,scaleRBy:i}=this.options,a=t.getCanvas().getLayer();["click","drag"].includes(n)&&a.removeEventListener(_e.CLICK,this.onEdgeFilter),n==="pointermove"?a.removeEventListener(_e.POINTER_MOVE,this.onEdgeFilter):n==="drag"&&(a.removeEventListener(_e.DRAG_START,this.onDragStart),a.removeEventListener(_e.DRAG,this.onDrag),a.removeEventListener(_e.DRAG_END,this.onDragEnd)),i==="wheel"&&((e=this.graphDom)===null||e===void 0||e.removeEventListener(_e.WHEEL,this.scaleRByWheel))}update(e){var t;this.unbindEvents(),super.update(e),this.r=(t=e.r)!==null&&t!==void 0?t:this.r,this.bindEvents()}destroy(){this.unbindEvents(),this.isLensOn&&this.lens.destroy(),this.shapes.forEach((e,t)=>{e.destroy(),this.shapes.delete(t)}),super.destroy()}}km.defaultOptions={trigger:"pointermove",r:60,nodeType:"both",filter:()=>!0,style:{lineWidth:2},nodeStyle:{label:!1},edgeStyle:{label:!0},scaleRBy:"wheel",preventDefault:!0};const wue={fill:"#ccc",fillOpacity:.1,lineWidth:2,stroke:"#000",strokeOpacity:.8,labelFontSize:12},Y3=.05,X3=.1;class Im extends Dr{constructor(e,t){super(e,Object.assign({},Im.defaultOptions,t)),this.r=this.options.r,this.d=this.options.d,this.onCreateFisheye=n=>{if(this.options.trigger==="drag"&&this.isLensOn)return;const i=Gr(n.canvas);this.onMagnify(i)},this.onMagnify=n=>{n.some(isNaN)||(this.renderLens(n),this.renderFocusElements())},this.renderLens=n=>{const i=Object.assign({},wue,this.options.style);this.isLensOn||(this.lens=new gh({style:i}),this.canvas.appendChild(this.lens)),Object.assign(i,Ya(n),{size:this.r*2,label:this.options.showDPercent,labelText:this.getDPercent()}),this.lens.update(i)},this.getDPercent=()=>{const{minD:n,maxD:i}=this.options;return`${Math.round((this.d-n)/(i-n)*100)}%`},this.prevMagnifiedStyleMap=new Map,this.prevOriginStyleMap=new Map,this.renderFocusElements=()=>{if(!this.isLensOn)return;const{graph:n}=this.context,i=this.lens.getCenter(),a=(this.d+1)*this.r,s=new Map,o=new Map;n.getNodeData().forEach(l=>{const c=Cr(l),u=yn(c,i);if(u>this.r)return;const h=a*u/(this.d*u+this.r),[g,p]=c,[v,m]=i,w=(g-v)/u,b=(p-m)/u,_=[v+h*w,m+h*b],C=he(l),M=this.getNodeStyle(l),F=cl(n.getElementRenderStyle(C),Object.keys(M));s.set(C,Object.assign(Object.assign({},Ya(_)),M)),o.set(C,Object.assign(Object.assign({},Ya(c)),F))}),this.updateStyle(s,o)},this.getNodeStyle=n=>{const{nodeStyle:i}=this.options;return typeof i=="function"?i(n):i},this.updateStyle=(n,i)=>{const{graph:a,element:s}=this.context,{enter:o,exit:A,keep:l}=aA(Array.from(this.prevMagnifiedStyleMap.keys()),Array.from(n.keys()),h=>h),c=new Set,u=(h,g)=>{const p=s.getElement(h);p==null||p.update(g),a.getRelatedEdgesData(h).forEach(v=>{c.add(he(v))})};[...o,...l].forEach(h=>{u(h,n.get(h))}),A.forEach(h=>{u(h,this.prevOriginStyleMap.get(h)),this.prevOriginStyleMap.delete(h)}),c.forEach(h=>{const g=s.getElement(h);g==null||g.update({})}),this.prevMagnifiedStyleMap=n,i.forEach((h,g)=>{this.prevOriginStyleMap.has(g)||this.prevOriginStyleMap.set(g,h)})},this.isWheelValid=n=>{if(this.options.preventDefault&&n.preventDefault(),!this.isLensOn)return!1;const{clientX:i,clientY:a}=n,s=this.context.graph.getCanvasByClient([i,a]),o=this.lens.getCenter();return!(yn(s,o)>this.r)},this.scaleR=n=>{const{maxR:i,minR:a}=this.options,s=n?1/(1-Y3):1-Y3,o=Math.min(...this.context.canvas.getSize())/2;this.r=Math.max(a||0,Math.min(i||o,this.r*s))},this.scaleD=n=>{const{maxD:i,minD:a}=this.options,s=n?this.d+X3:this.d-X3;this.d=Math.max(a,Math.min(i,s))},this.scaleRByWheel=n=>{if(!this.isWheelValid(n))return;const{deltaX:i,deltaY:a}=n;this.scaleR(i+a>0);const s=this.lens.getCenter();this.onMagnify(s)},this.scaleDByWheel=n=>{if(!this.isWheelValid(n))return;const{deltaX:i,deltaY:a}=n;this.scaleD(i+a>0);const s=this.lens.getCenter();this.onMagnify(s)},this.isDragValid=n=>{if(this.options.preventDefault&&n.preventDefault(),!this.isLensOn)return!1;const i=Gr(n.canvas),a=this.lens.getCenter();return!(yn(i,a)>this.r)},this.isLensDragging=!1,this.onDragStart=n=>{this.isDragValid(n)&&(this.isLensDragging=!0)},this.onDrag=n=>{if(!this.isLensDragging)return;const i=Gr(n.canvas);this.onMagnify(i)},this.onDragEnd=()=>{this.isLensDragging=!1},this.scaleRByDrag=n=>{if(!this.isLensDragging)return;const{dx:i,dy:a}=n;this.scaleR(i-a>0);const s=this.lens.getCenter();this.onMagnify(s)},this.scaleDByDrag=n=>{if(!this.isLensDragging)return;const{dx:i,dy:a}=n;this.scaleD(i-a>0);const s=this.lens.getCenter();this.onMagnify(s)},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var e;const{graph:t}=this.context,{trigger:n,scaleRBy:i,scaleDBy:a}=this.options,s=t.getCanvas().getLayer();if(["click","drag"].includes(n)&&s.addEventListener(_e.CLICK,this.onCreateFisheye),n==="pointermove"&&s.addEventListener(_e.POINTER_MOVE,this.onCreateFisheye),n==="drag"||i==="drag"||a==="drag"){s.addEventListener(_e.DRAG_START,this.onDragStart),s.addEventListener(_e.DRAG_END,this.onDragEnd);const o=n==="drag"?this.onDrag:i==="drag"?this.scaleRByDrag:this.scaleDByDrag;s.addEventListener(_e.DRAG,o)}if(i==="wheel"||a==="wheel"){const o=i==="wheel"?this.scaleRByWheel:this.scaleDByWheel;(e=this.graphDom)===null||e===void 0||e.addEventListener(_e.WHEEL,o,{passive:!1})}}unbindEvents(){var e;const{graph:t}=this.context,{trigger:n,scaleRBy:i,scaleDBy:a}=this.options,s=t.getCanvas().getLayer();if(["click","drag"].includes(n)&&s.removeEventListener(_e.CLICK,this.onCreateFisheye),n==="pointermove"&&s.removeEventListener(_e.POINTER_MOVE,this.onCreateFisheye),n==="drag"||i==="drag"||a==="drag"){s.removeEventListener(_e.DRAG_START,this.onDragStart),s.removeEventListener(_e.DRAG_END,this.onDragEnd);const o=n==="drag"?this.onDrag:i==="drag"?this.scaleRByDrag:this.scaleDByDrag;s.removeEventListener(_e.DRAG,o)}if(i==="wheel"||a==="wheel"){const o=i==="wheel"?this.scaleRByWheel:this.scaleDByWheel;(e=this.graphDom)===null||e===void 0||e.removeEventListener(_e.WHEEL,o)}}update(e){var t,n;this.unbindEvents(),super.update(e),this.r=(t=e.r)!==null&&t!==void 0?t:this.r,this.d=(n=e.d)!==null&&n!==void 0?n:this.d,this.bindEvents()}destroy(){var e;this.unbindEvents(),this.isLensOn&&((e=this.lens)===null||e===void 0||e.destroy()),this.prevMagnifiedStyleMap.clear(),this.prevOriginStyleMap.clear(),super.destroy()}}Im.defaultOptions={trigger:"pointermove",r:120,d:1.5,maxD:5,minD:0,showDPercent:!0,style:{},nodeStyle:{label:!0},preventDefault:!0};class Pm extends Dr{constructor(e,t){super(e,Object.assign({},Pm.defaultOptions,t)),this.$el=this.context.canvas.getContainer(),this.graphSize=[0,0],this.onFullscreenChange=()=>{var n,i,a,s;const o=!!document.fullscreenElement;this.options.autoFit&&this.setGraphSize(o),o?(i=(n=this.options).onEnter)===null||i===void 0||i.call(n):(s=(a=this.options).onExit)===null||s===void 0||s.call(a)},this.shortcut=new pA(e.graph),this.bindEvents(),this.style=document.createElement("style"),document.head.appendChild(this.style),this.style.innerHTML=`
      :not(:root):fullscreen::backdrop {
        background: transparent;
      }
    `}bindEvents(){this.unbindEvents(),this.shortcut.unbindAll();const{request:e=[],exit:t=[]}=this.options.trigger;this.shortcut.bind(e,this.request),this.shortcut.bind(t,this.exit),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(i=>{document.addEventListener(i,this.onFullscreenChange,!1)})}unbindEvents(){this.shortcut.unbindAll(),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(t=>{document.removeEventListener(t,this.onFullscreenChange,!1)})}setGraphSize(e=!0){var t,n;let i,a;e?(i=((t=globalThis.screen)===null||t===void 0?void 0:t.width)||0,a=((n=globalThis.screen)===null||n===void 0?void 0:n.height)||0,this.graphSize=this.context.graph.getSize()):[i,a]=this.graphSize,this.context.graph.setSize(i,a),this.context.graph.render()}request(){document.fullscreenElement||!bue()||this.$el.requestFullscreen().catch(e=>{ks.warn(`Error attempting to enable full-screen: ${e.message} (${e.name})`)})}exit(){document.fullscreenElement&&document.exitFullscreen()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.exit(),this.style.remove(),super.destroy()}}Pm.defaultOptions={trigger:{},autoFit:!0};function bue(){return document.fullscreenEnabled||Reflect.get(document,"webkitFullscreenEnabled")||Reflect.get(document,"mozFullscreenEnabled")||Reflect.get(document,"msFullscreenEnabled")}class Om extends Dr{constructor(e,t){super(e,Object.assign({},Om.defaultOptions,t)),this.$element=tu("grid-line",!0),this.offset=[0,0],this.currentScale=1,this.followZoom=i=>{const{data:{scale:a,origin:s}}=i;if(!a||s===void 0&&this.context.viewport===void 0)return;const o=this.currentScale;this.currentScale=a;const A=a/o,l=$a(s||this.context.graph.getCanvasCenter(),1-A),c=this.baseSize*a,u=$a(this.offset,A),h=F1(u,c),g=mt(h,l);this.$element.style.backgroundSize=`${c}px ${c}px`,this.$element.style.backgroundPosition=`${g[0]}px ${g[1]}px`,this.offset=F1(g,c)},this.followTranslate=i=>{if(!this.options.follow)return;const{data:{translate:a}}=i;a&&this.updateOffset(a)},this.onTransform=i=>{const a=this.parseFollow(this.options.follow);a.zoom&&this.followZoom(i),a.translate&&this.followTranslate(i)},this.context.canvas.getContainer().prepend(this.$element),this.baseSize=this.options.size,this.updateStyle(),this.bindEvents()}update(e){super.update(e),e.size!==void 0&&(this.baseSize=e.size),this.updateStyle()}bindEvents(){const{graph:e}=this.context;e.on(Pe.AFTER_TRANSFORM,this.onTransform)}updateStyle(){const{stroke:e,lineWidth:t,border:n,borderLineWidth:i,borderStroke:a,borderStyle:s}=this.options,o=this.baseSize*this.currentScale;Object.assign(this.$element.style,{border:n?`${i}px ${s} ${a}`:"none",backgroundImage:`linear-gradient(${e} ${t}px, transparent ${t}px), linear-gradient(90deg, ${e} ${t}px, transparent ${t}px)`,backgroundSize:`${o}px ${o}px`,backgroundRepeat:"repeat"})}updateOffset(e){const t=this.baseSize*this.currentScale;this.offset=F1(mt(this.offset,e),t),this.$element.style.backgroundPosition=`${this.offset[0]}px ${this.offset[1]}px`}parseFollow(e){var t,n;return Ld(e)?{translate:e,zoom:e}:{translate:(t=e==null?void 0:e.translate)!==null&&t!==void 0?t:!1,zoom:(n=e==null?void 0:e.zoom)!==null&&n!==void 0?n:!1}}destroy(){this.context.graph.off(Pe.AFTER_TRANSFORM,this.onTransform),this.$element.remove(),super.destroy()}}Om.defaultOptions={border:!0,borderLineWidth:1,borderStroke:"#eee",borderStyle:"solid",lineWidth:1,size:20,stroke:"#eee"};function mS(r){const e={Added:new Map,Updated:new Map,Removed:new Map};return r.forEach(t=>{const{type:n,value:i}=t,a=he(i);if(n==="NodeAdded"||n==="EdgeAdded"||n==="ComboAdded")e.Added.set(a,t);else if(n==="NodeUpdated"||n==="EdgeUpdated"||n==="ComboUpdated")if(e.Added.has(a))e.Added.set(a,{type:n.replace("Updated","Added"),value:i});else if(e.Updated.has(a)){const{original:s}=e.Updated.get(a);e.Updated.set(a,{type:n,value:i,original:s})}else e.Removed.has(a)||e.Updated.set(a,t);else(n==="NodeRemoved"||n==="EdgeRemoved"||n==="ComboRemoved")&&(e.Added.has(a)?e.Added.delete(a):(e.Updated.has(a)&&e.Updated.delete(a),e.Removed.set(a,t)))}),[...Array.from(e.Added.values()),...Array.from(e.Updated.values()),...Array.from(e.Removed.values())]}function z5(r){const{NodeAdded:e=[],NodeUpdated:t=[],NodeRemoved:n=[],EdgeAdded:i=[],EdgeUpdated:a=[],EdgeRemoved:s=[],ComboAdded:o=[],ComboUpdated:A=[],ComboRemoved:l=[]}=fv(r,c=>c.type);return{add:{nodes:e,edges:i,combos:o},update:{nodes:t,edges:a,combos:A},remove:{nodes:n,edges:s,combos:l}}}function j5(r,e){for(const t in r)nr(r[t])&&!Array.isArray(r[t])&&r[t]!==null?(e[t]||(e[t]={}),j5(r[t],e[t])):e[t]===void 0&&(e[t]=Kd(t))}function _ue(r,e=!1,t){const n={animation:e,current:{add:{},update:{},remove:{}},original:{add:{},update:{},remove:{}}},{add:i,update:a,remove:s}=z5(mS(r));return["nodes","edges","combos"].forEach(o=>{a[o]&&a[o].forEach(A=>{var l,c;const u=Object.assign({},A.value);let h=Object.assign({},A.original);if(t){const g=t.graph.getElementType(he(A.original)),p=g==="edge"?"stroke":"fill",v=t.element.getElementComputedStyle(g,A.original);h=Object.assign(Object.assign({},A.original),{style:Object.assign({[p]:v[p]},A.original.style)})}j5(u,h),(l=n.current.update)[o]||(l[o]=[]),n.current.update[o].push(u),(c=n.original.update)[o]||(c[o]=[]),n.original.update[o].push(h)}),i[o]&&i[o].forEach(A=>{var l,c;const u=Object.assign({},A.value);(l=n.current.add)[o]||(l[o]=[]),n.current.add[o].push(u),(c=n.original.remove)[o]||(c[o]=[]),n.original.remove[o].push(u)}),s[o]&&s[o].forEach(A=>{var l,c;const u=Object.assign({},A.value);(l=n.current.remove)[o]||(l[o]=[]),n.current.remove[o].push(u),(c=n.original.add)[o]||(c[o]=[]),n.original.add[o].push(u)})}),n}class Lm extends Dr{constructor(e,t){super(e,Object.assign({},Lm.defaultOptions,t)),this.batchChanges=null,this.batchAnimation=!1,this.undoStack=[],this.redoStack=[],this.freezed=!1,this.executeCommand=(i,a=!0)=>{var s,o,A;this.freezed=!0,(o=(s=this.options).executeCommand)===null||o===void 0||o.call(s,i);const l=a?i.original:i.current;this.context.graph.addData(l.add),this.context.graph.updateData(l.update),this.context.graph.removeData(rH(l.remove,!1)),(A=this.context.element)===null||A===void 0||A.draw({silence:!0,animation:i.animation}),this.freezed=!1},this.addCommand=i=>{var a;if(!this.freezed){if(i.type===Pe.AFTER_DRAW){const{dataChanges:s=[],animation:o=!0}=i.data;if(!((a=this.context.batch)===null||a===void 0)&&a.isBatching){if(!this.batchChanges)return;this.batchChanges.push(s),this.batchAnimation&&(this.batchAnimation=o);return}this.batchChanges=[s],this.batchAnimation=o}this.undoStackPush(_ue(this.batchChanges.flat(),this.batchAnimation,this.context)),this.notify(zo.ADD,this.undoStack[this.undoStack.length-1])}},this.initBatchCommand=i=>{const{initiate:a}=i.data;this.batchAnimation=!1,a?this.batchChanges=[]:this.undoStack.pop()||(this.batchChanges=null)},this.emitter=new Wv;const{graph:n}=this.context;n.on(Pe.AFTER_DRAW,this.addCommand),n.on(Pe.BATCH_START,this.initBatchCommand),n.on(Pe.BATCH_END,this.addCommand)}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undo(){var e,t,n,i;const a=this.undoStack.pop();if(a){if(this.executeCommand(a),((t=(e=this.options).beforeAddCommand)===null||t===void 0?void 0:t.call(e,a,!1))===!1)return;this.redoStack.push(a),(i=(n=this.options).afterAddCommand)===null||i===void 0||i.call(n,a,!1),this.notify(zo.UNDO,a)}return this}redo(){const e=this.redoStack.pop();return e&&(this.executeCommand(e,!1),this.undoStackPush(e),this.notify(zo.REDO,e)),this}undoAndCancel(){const e=this.undoStack.pop();return e&&(this.executeCommand(e,!1),this.redoStack=[],this.notify(zo.CANCEL,e)),this}undoStackPush(e){var t,n,i,a;const{stackSize:s}=this.options;s!==0&&this.undoStack.length>=s&&this.undoStack.shift(),((n=(t=this.options).beforeAddCommand)===null||n===void 0?void 0:n.call(t,e,!0))!==!1&&(this.undoStack.push(e),(a=(i=this.options).afterAddCommand)===null||a===void 0||a.call(i,e,!0))}clear(){this.undoStack=[],this.redoStack=[],this.batchChanges=null,this.batchAnimation=!1,this.notify(zo.CLEAR,null)}notify(e,t){this.emitter.emit(e,{cmd:t}),this.emitter.emit(zo.CHANGE,{cmd:t})}on(e,t){this.emitter.on(e,t)}destroy(){const{graph:e}=this.context;e.off(Pe.AFTER_DRAW,this.addCommand),e.off(Pe.BATCH_START,this.initBatchCommand),e.off(Pe.BATCH_END,this.addCommand),this.emitter.off(),super.destroy(),this.undoStack=[],this.redoStack=[]}}Lm.defaultOptions={stackSize:0};const dB={toXy(r,e){if(!e)return[...r];const t=e[0].slice(1),n=e[1].slice(1);return r.map(i=>[i[t],i[n]])},fromXy(r,e){if(!e)return[...r];const t=e[0].slice(1),n=e[1].slice(1);return r.map(([i,a])=>({[t]:i,[n]:a}))}};let Eue=class{constructor(e,t){this._cells=[],this._cellSize=t,this._reverseCellSize=1/t;for(const n of e){const i=this.coordToCellNum(n[0]),a=this.coordToCellNum(n[1]);this._cells[i]||(this._cells[i]=[]),this._cells[i][a]||(this._cells[i][a]=[]),this._cells[i][a].push(n)}}cellPoints(e,t){var n;return((n=this._cells[e])===null||n===void 0?void 0:n[t])||[]}rangePoints(e){const t=this.coordToCellNum(e[0]),n=this.coordToCellNum(e[1]),i=this.coordToCellNum(e[2]),a=this.coordToCellNum(e[3]),s=[];for(let o=t;o<=i;o++)for(let A=n;A<=a;A++){const l=this.cellPoints(o,A);for(const c of l)s.push(c)}return s}removePoint(e){const t=this.coordToCellNum(e[0]),n=this.coordToCellNum(e[1]),i=this._cells[t][n],a=i.findIndex(([s,o])=>s===e[0]&&o===e[1]);return a>-1&&i.splice(a,1),i}trunc(e){return Math.trunc(e)}coordToCellNum(e){return this.trunc(e*this._reverseCellSize)}extendBbox(e,t){return[e[0]-t*this._cellSize,e[1]-t*this._cellSize,e[2]+t*this._cellSize,e[3]+t*this._cellSize]}};function Cue(r,e){return new Eue(r,e)}const Z3=+(Math.pow(2,27)+1);function gp(r,e,t){const n=r*e,i=Z3*r,a=i-r,s=i-a,o=r-s,A=Z3*e,l=A-e,c=A-l,u=e-c,p=n-s*c-o*c-s*u,v=o*u-p;return t?(t[0]=v,t[1]=n,t):[v,n]}function Bue(r,e,t){const n=r+e,i=n-r,a=n-i,s=e-i,o=r-a;return t?(t[0]=o+s,t[1]=n,t):[o+s,n]}function xue(r,e){const t=r.length;if(t===1){const o=gp(r[0],e);return o[0]?o:[o[1]]}const n=new Array(2*t),i=[.1,.1],a=[.1,.1];let s=0;gp(r[0],e,i),i[0]&&(n[s++]=i[0]);for(let o=1;o<t;++o){gp(r[o],e,a);const A=i[1];Bue(A,a[0],i),i[0]&&(n[s++]=i[0]);const l=a[1],c=i[1],u=l+c,h=u-l,g=c-h;i[1]=u,g&&(n[s++]=g)}return i[1]&&(n[s++]=i[1]),s===0&&(n[s++]=0),n.length=s,n}function Sue(r,e){const t=r+e,n=t-r,i=t-n,a=e-n,o=r-i+a;return o?[o,t]:[t]}function Tue(r,e){const t=r.length|0,n=e.length|0;if(t===1&&n===1)return Sue(r[0],-e[0]);const i=t+n,a=new Array(i);let s=0,o=0,A=0;const l=Math.abs;let c=r[o],u=l(c),h=-e[A],g=l(h),p,v;u<g?(v=c,o+=1,o<t&&(c=r[o],u=l(c))):(v=h,A+=1,A<n&&(h=-e[A],g=l(h))),o<t&&u<g||A>=n?(p=c,o+=1,o<t&&(c=r[o],u=l(c))):(p=h,A+=1,A<n&&(h=-e[A],g=l(h)));let m=p+v,w=m-p,b=v-w,_=b,C=m,M,F,k,P,N;for(;o<t&&A<n;)u<g?(p=c,o+=1,o<t&&(c=r[o],u=l(c))):(p=h,A+=1,A<n&&(h=-e[A],g=l(h))),v=_,m=p+v,w=m-p,b=v-w,b&&(a[s++]=b),M=C+m,F=M-C,k=M-F,P=m-F,N=C-k,_=N+P,C=M;for(;o<t;)p=c,v=_,m=p+v,w=m-p,b=v-w,b&&(a[s++]=b),M=C+m,F=M-C,k=M-F,P=m-F,N=C-k,_=N+P,C=M,o+=1,o<t&&(c=r[o]);for(;A<n;)p=h,v=_,m=p+v,w=m-p,b=v-w,b&&(a[s++]=b),M=C+m,F=M-C,k=M-F,P=m-F,N=C-k,_=N+P,C=M,A+=1,A<n&&(h=-e[A]);return _&&(a[s++]=_),C&&(a[s++]=C),s||(a[s++]=0),a.length=s,a}function Mue(r,e){const t=r+e,n=t-r,i=t-n,a=e-n,o=r-i+a;return o?[o,t]:[t]}function Fue(r,e){const t=r.length|0,n=e.length|0;if(t===1&&n===1)return Mue(r[0],e[0]);const i=t+n,a=new Array(i);let s=0,o=0,A=0;const l=Math.abs;let c=r[o],u=l(c),h=e[A],g=l(h),p,v;u<g?(v=c,o+=1,o<t&&(c=r[o],u=l(c))):(v=h,A+=1,A<n&&(h=e[A],g=l(h))),o<t&&u<g||A>=n?(p=c,o+=1,o<t&&(c=r[o],u=l(c))):(p=h,A+=1,A<n&&(h=e[A],g=l(h)));let m=p+v,w=m-p,b=v-w,_=b,C=m,M,F,k,P,N;for(;o<t&&A<n;)u<g?(p=c,o+=1,o<t&&(c=r[o],u=l(c))):(p=h,A+=1,A<n&&(h=e[A],g=l(h))),v=_,m=p+v,w=m-p,b=v-w,b&&(a[s++]=b),M=C+m,F=M-C,k=M-F,P=m-F,N=C-k,_=N+P,C=M;for(;o<t;)p=c,v=_,m=p+v,w=m-p,b=v-w,b&&(a[s++]=b),M=C+m,F=M-C,k=M-F,P=m-F,N=C-k,_=N+P,C=M,o+=1,o<t&&(c=r[o]);for(;A<n;)p=h,v=_,m=p+v,w=m-p,b=v-w,b&&(a[s++]=b),M=C+m,F=M-C,k=M-F,P=m-F,N=C-k,_=N+P,C=M,A+=1,A<n&&(h=e[A]);return _&&(a[s++]=_),C&&(a[s++]=C),s||(a[s++]=0),a.length=s,a}const J3=5,cv=11102230246251565e-32,kue=(3+16*cv)*cv,Iue=(7+56*cv)*cv;function Pue(r,e,t,n){return function(a,s,o){const A=r(r(e(s[1],o[0]),e(-o[1],s[0])),r(e(a[1],s[0]),e(-s[1],a[0]))),l=r(e(a[1],o[0]),e(-o[1],a[0])),c=n(A,l);return c[c.length-1]}}function Oue(r,e,t,n){return function(a,s,o,A){const l=r(r(t(r(e(o[1],A[0]),e(-A[1],o[0])),s[2]),r(t(r(e(s[1],A[0]),e(-A[1],s[0])),-o[2]),t(r(e(s[1],o[0]),e(-o[1],s[0])),A[2]))),r(t(r(e(s[1],A[0]),e(-A[1],s[0])),a[2]),r(t(r(e(a[1],A[0]),e(-A[1],a[0])),-s[2]),t(r(e(a[1],s[0]),e(-s[1],a[0])),A[2])))),c=r(r(t(r(e(o[1],A[0]),e(-A[1],o[0])),a[2]),r(t(r(e(a[1],A[0]),e(-A[1],a[0])),-o[2]),t(r(e(a[1],o[0]),e(-o[1],a[0])),A[2]))),r(t(r(e(s[1],o[0]),e(-o[1],s[0])),a[2]),r(t(r(e(a[1],o[0]),e(-o[1],a[0])),-s[2]),t(r(e(a[1],s[0]),e(-s[1],a[0])),o[2])))),u=n(l,c);return u[u.length-1]}}function Lue(r,e,t,n){return function(a,s,o,A,l){const c=r(r(r(t(r(t(r(e(A[1],l[0]),e(-l[1],A[0])),o[2]),r(t(r(e(o[1],l[0]),e(-l[1],o[0])),-A[2]),t(r(e(o[1],A[0]),e(-A[1],o[0])),l[2]))),s[3]),r(t(r(t(r(e(A[1],l[0]),e(-l[1],A[0])),s[2]),r(t(r(e(s[1],l[0]),e(-l[1],s[0])),-A[2]),t(r(e(s[1],A[0]),e(-A[1],s[0])),l[2]))),-o[3]),t(r(t(r(e(o[1],l[0]),e(-l[1],o[0])),s[2]),r(t(r(e(s[1],l[0]),e(-l[1],s[0])),-o[2]),t(r(e(s[1],o[0]),e(-o[1],s[0])),l[2]))),A[3]))),r(t(r(t(r(e(o[1],A[0]),e(-A[1],o[0])),s[2]),r(t(r(e(s[1],A[0]),e(-A[1],s[0])),-o[2]),t(r(e(s[1],o[0]),e(-o[1],s[0])),A[2]))),-l[3]),r(t(r(t(r(e(A[1],l[0]),e(-l[1],A[0])),s[2]),r(t(r(e(s[1],l[0]),e(-l[1],s[0])),-A[2]),t(r(e(s[1],A[0]),e(-A[1],s[0])),l[2]))),a[3]),t(r(t(r(e(A[1],l[0]),e(-l[1],A[0])),a[2]),r(t(r(e(a[1],l[0]),e(-l[1],a[0])),-A[2]),t(r(e(a[1],A[0]),e(-A[1],a[0])),l[2]))),-s[3])))),r(r(t(r(t(r(e(s[1],l[0]),e(-l[1],s[0])),a[2]),r(t(r(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),t(r(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),A[3]),r(t(r(t(r(e(s[1],A[0]),e(-A[1],s[0])),a[2]),r(t(r(e(a[1],A[0]),e(-A[1],a[0])),-s[2]),t(r(e(a[1],s[0]),e(-s[1],a[0])),A[2]))),-l[3]),t(r(t(r(e(o[1],A[0]),e(-A[1],o[0])),s[2]),r(t(r(e(s[1],A[0]),e(-A[1],s[0])),-o[2]),t(r(e(s[1],o[0]),e(-o[1],s[0])),A[2]))),a[3]))),r(t(r(t(r(e(o[1],A[0]),e(-A[1],o[0])),a[2]),r(t(r(e(a[1],A[0]),e(-A[1],a[0])),-o[2]),t(r(e(a[1],o[0]),e(-o[1],a[0])),A[2]))),-s[3]),r(t(r(t(r(e(s[1],A[0]),e(-A[1],s[0])),a[2]),r(t(r(e(a[1],A[0]),e(-A[1],a[0])),-s[2]),t(r(e(a[1],s[0]),e(-s[1],a[0])),A[2]))),o[3]),t(r(t(r(e(s[1],o[0]),e(-o[1],s[0])),a[2]),r(t(r(e(a[1],o[0]),e(-o[1],a[0])),-s[2]),t(r(e(a[1],s[0]),e(-s[1],a[0])),o[2]))),-A[3]))))),u=r(r(r(t(r(t(r(e(A[1],l[0]),e(-l[1],A[0])),o[2]),r(t(r(e(o[1],l[0]),e(-l[1],o[0])),-A[2]),t(r(e(o[1],A[0]),e(-A[1],o[0])),l[2]))),a[3]),t(r(t(r(e(A[1],l[0]),e(-l[1],A[0])),a[2]),r(t(r(e(a[1],l[0]),e(-l[1],a[0])),-A[2]),t(r(e(a[1],A[0]),e(-A[1],a[0])),l[2]))),-o[3])),r(t(r(t(r(e(o[1],l[0]),e(-l[1],o[0])),a[2]),r(t(r(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),t(r(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),A[3]),t(r(t(r(e(o[1],A[0]),e(-A[1],o[0])),a[2]),r(t(r(e(a[1],A[0]),e(-A[1],a[0])),-o[2]),t(r(e(a[1],o[0]),e(-o[1],a[0])),A[2]))),-l[3]))),r(r(t(r(t(r(e(o[1],l[0]),e(-l[1],o[0])),s[2]),r(t(r(e(s[1],l[0]),e(-l[1],s[0])),-o[2]),t(r(e(s[1],o[0]),e(-o[1],s[0])),l[2]))),a[3]),t(r(t(r(e(o[1],l[0]),e(-l[1],o[0])),a[2]),r(t(r(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),t(r(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),-s[3])),r(t(r(t(r(e(s[1],l[0]),e(-l[1],s[0])),a[2]),r(t(r(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),t(r(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),o[3]),t(r(t(r(e(s[1],o[0]),e(-o[1],s[0])),a[2]),r(t(r(e(a[1],o[0]),e(-o[1],a[0])),-s[2]),t(r(e(a[1],s[0]),e(-s[1],a[0])),o[2]))),-l[3])))),h=n(c,u);return h[h.length-1]}}function Nm(r){return(r===3?Pue:r===4?Oue:Lue)(Fue,gp,xue,Tue)}const Nue=Nm(3),Due=Nm(4),YA=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){const i=(e[1]-n[1])*(t[0]-n[0]),a=(e[0]-n[0])*(t[1]-n[1]),s=i-a;let o;if(i>0){if(a<=0)return s;o=i+a}else if(i<0){if(a>=0)return s;o=-(i+a)}else return s;const A=kue*o;return s>=A||s<=-A?s:Nue(e,t,n)},function(e,t,n,i){const a=e[0]-i[0],s=t[0]-i[0],o=n[0]-i[0],A=e[1]-i[1],l=t[1]-i[1],c=n[1]-i[1],u=e[2]-i[2],h=t[2]-i[2],g=n[2]-i[2],p=s*c,v=o*l,m=o*A,w=a*c,b=a*l,_=s*A,C=u*(p-v)+h*(m-w)+g*(b-_),M=(Math.abs(p)+Math.abs(v))*Math.abs(u)+(Math.abs(m)+Math.abs(w))*Math.abs(h)+(Math.abs(b)+Math.abs(_))*Math.abs(g),F=Iue*M;return C>F||-C>F?C:Due(e,t,n,i)}];function Rue(r){let e=YA[r.length];return e||(e=YA[r.length]=Nm(r.length)),e.apply(void 0,...r)}function Que(r,e,t,n,i,a,s){return function(...A){switch(A.length){case 0:case 1:return 0;case 2:return n(A[0],A[1]);case 3:return i(A[0],A[1],A[2]);case 4:return a(A[0],A[1],A[2],A[3]);case 5:return s(A[0],A[1],A[2],A[3],A[4])}return r(A)}}function Uue(){for(;YA.length<=J3;)YA.push(Nm(YA.length));const r=Que(void 0,Rue,...YA);for(let e=0;e<=J3;++e)r[e]=YA[e];return r}const md=Uue(),eR=md[3];function Hue(r){const e=r.length;if(e<3){const o=new Array(e);for(let A=0;A<e;++A)o[A]=A;return e===2&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:o}const t=new Array(e);for(let o=0;o<e;++o)t[o]=o;t.sort((o,A)=>{const l=r[o][0]-r[A][0];return l||r[o][1]-r[A][1]});const n=[t[0],t[1]],i=[t[0],t[1]];for(let o=2;o<e;++o){const A=t[o],l=r[A];let c=n.length;for(;c>1&&eR(r[n[c-2]],r[n[c-1]],l)<=0;)c-=1,n.pop();for(n.push(A),c=i.length;c>1&&eR(r[i[c-2]],r[i[c-1]],l)>=0;)c-=1,i.pop();i.push(A)}const a=new Array(i.length+n.length-2);let s=0;for(let o=0,A=n.length;o<A;++o)a[s++]=n[o];for(let o=i.length-2;o>0;--o)a[s++]=i[o];return a}function zue(r,e,t,n){for(let i=0;i<2;++i){const a=r[i],s=e[i],[o,A]=[Math.min(a,s),Math.max(a,s)],l=t[i],c=n[i],[u,h]=[Math.min(l,c),Math.max(l,c)];if(h<o||A<u)return!1}return!0}function jue(r,e,t,n){const i=md(r,t,n),a=md(e,t,n);if(i>0&&a>0||i<0&&a<0)return!1;const s=md(t,r,e),o=md(n,r,e);return s>0&&o>0||s<0&&o<0?!1:i===0&&a===0&&s===0&&o===0?zue(r,e,t,n):!0}function Kue(r){const e=[r[0]];let t=r[0];for(let n=1;n<r.length;n++){const i=r[n];(t[0]!==i[0]||t[1]!==i[1])&&e.push(i),t=i}return e}function Gue(r){return r.sort(function(e,t){return e[0]-t[0]||e[1]-t[1]})}function zx(r,e){return Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2)}function tR(r,e,t){const n=[e[0]-r[0],e[1]-r[1]],i=[t[0]-r[0],t[1]-r[1]],a=zx(r,e),s=zx(r,t);return(n[0]*i[0]+n[1]*i[1])/Math.sqrt(a*s)}function nR(r,e){for(let t=0;t<e.length-1;t++){const n=[e[t],e[t+1]];if(!(r[0][0]===n[0][0]&&r[0][1]===n[0][1]||r[0][0]===n[1][0]&&r[0][1]===n[1][1])&&jue(r[0],r[1],n[0],n[1]))return!0}return!1}function Vue(r){let e=1/0,t=1/0,n=-1/0,i=-1/0;for(let a=r.length-1;a>=0;a--)r[a][0]<e&&(e=r[a][0]),r[a][1]<t&&(t=r[a][1]),r[a][0]>n&&(n=r[a][0]),r[a][1]>i&&(i=r[a][1]);return[n-e,i-t]}function que(r){return[Math.min(r[0][0],r[1][0]),Math.min(r[0][1],r[1][1]),Math.max(r[0][0],r[1][0]),Math.max(r[0][1],r[1][1])]}function Wue(r,e,t){let n=null,i=rR,a=rR,s,o;for(let A=0;A<e.length;A++)s=tR(r[0],r[1],e[A]),o=tR(r[1],r[0],e[A]),s>i&&o>a&&!nR([r[0],e[A]],t)&&!nR([r[1],e[A]],t)&&(i=s,a=o,n=e[A]);return n}function K5(r,e,t,n,i){let a=!1;for(let s=0;s<r.length-1;s++){const o=[r[s],r[s+1]],A=o[0][0]+","+o[0][1]+","+o[1][0]+","+o[1][1];if(zx(o[0],o[1])<e||i.has(A))continue;let l=0,c=que(o),u,h,g;do c=n.extendBbox(c,l),u=c[2]-c[0],h=c[3]-c[1],g=Wue(o,n.rangePoints(c),r),l++;while(g===null&&(t[0]>u||t[1]>h));u>=t[0]&&h>=t[1]&&i.add(A),g!==null&&(r.splice(s+1,0,g),n.removePoint(g),a=!0)}return a?K5(r,e,t,n,i):r}function $ue(r,e,t){const n=e||20,i=Kue(Gue(dB.toXy(r,t)));if(i.length<4){const u=i.concat([i[0]]);return t?dB.fromXy(u,t):u}const a=Vue(i),s=[a[0]*iR,a[1]*iR],o=Hue(i).reverse().map(u=>i[u]);o.push(o[0]);const A=i.filter(function(u){return o.indexOf(u)<0}),l=Math.ceil(1/(i.length/(a[0]*a[1]))),c=K5(o,Math.pow(n,2),s,Cue(A,l),new Set);return t?dB.fromXy(c,t):c}const rR=Math.cos(90/(180/Math.PI)),iR=.6;function Yue(r,e,t){if(r.length===1)return Xue(r[0],e,t);if(r.length===2)return aR(r,e,t);if(r.length===3){const[n,i,a]=D2(r);if(uH(n,i,a))return aR([n,a],e,t)}switch(t){case"smooth":return Jue(r,e);case"sharp":return ede(r,e);case"rounded":default:return Zue(r,e)}}const Xue=(r,e,t)=>{if(t==="sharp")return[["M",r[0]-e,r[1]-e],["L",r[0]+e,r[1]-e],["L",r[0]+e,r[1]+e],["L",r[0]-e,r[1]+e],["Z"]];const n=[e,e,0,0,0];return[["M",r[0],r[1]-e],["A",...n,r[0],r[1]+e],["A",...n,r[0],r[1]-e]]},aR=(r,e,t)=>{const n=[e,e,0,0,0],i=t==="sharp"?mt(r[0],Xo(no(rn(r[0],r[1])),e)):r[0],a=t==="sharp"?mt(r[1],Xo(no(rn(r[1],r[0])),e)):r[1],s=Xo(no(Iv(rn(i,a),!1)),e),o=Xo(s,-1),A=mt(i,s),l=mt(a,s),c=mt(a,o),u=mt(i,o);return t==="sharp"?[["M",A[0],A[1]],["L",l[0],l[1]],["L",c[0],c[1]],["L",u[0],u[1]],["Z"]]:[["M",A[0],A[1]],["L",l[0],l[1]],["A",...n,c[0],c[1]],["L",u[0],u[1]],["A",...n,A[0],A[1]]]},Zue=(r,e)=>{const t=D2(r).map((o,A)=>{const l=(A-2+r.length)%r.length,c=(A-1+r.length)%r.length,u=(A+1)%r.length,h=r[l],g=r[c],p=r[u],v=rn(h,g),m=rn(g,o),w=rn(o,p),b=(k,P)=>L2(k,P,!0)<Math.PI,_=b(v,m),C=b(m,w),M=k=>Xo(no(Iv(k,!1)),e),F=M(m);return[{p:pl(_?mt(g,M(v)):mt(g,F)),concave:_&&g},{p:pl(C?mt(o,M(w)):mt(o,F)),concave:C&&o}]}),n=[e,e,0,0,0],i=t.findIndex((o,A)=>!t[(A-1+t.length)%t.length][0].concave&&!t[(A-1+t.length)%t.length][1].concave&&!o[0].concave&&!o[0].concave&&!o[1].concave),a=t.slice(i).concat(t.slice(0,i));let s=[];return a.flatMap((o,A)=>{const l=[],c=a[t.length-1];return A===0&&l.push(["M",...c[1].p]),o[0].concave?s.push(o[0].p,o[1].p):l.push(["A",...n,...o[0].p]),o[1].concave?s.unshift(o[1].p):l.push(["L",...o[1].p]),s.length===3&&(l.pop(),l.push(["C",...s.flat()]),s=[]),l})},Jue=(r,e)=>{const t=D2(r).map((n,i)=>{const a=r[(i+1)%r.length];return{p:n,v:no(rn(a,n))}});return t.forEach((n,i)=>{const a=i>0?i-1:r.length-1,s=t[a].v,o=no(mt(s,Xo(n.v,L2(s,n.v,!0)<Math.PI?1:-1)));n.p=mt(n.p,Xo(o,e))}),wH(t.map(n=>n.p))},ede=(r,e)=>{const n=r.map((a,s)=>{const o=r[s===0?r.length-1:s-1],A=Gd(Xo(no(Iv(rn(o,a),!1)),e));return[mt(o,A),mt(a,A)]}).flat();return n.map((a,s)=>{if(s%2===0)return null;const o=[n[(s-1)%n.length],n[s%n.length]],A=[n[(s+1)%n.length],n[(s+2)%n.length]];return N2(o,A,!0)}).filter(Boolean).map((a,s)=>[s===0?"M":"L",a[0],a[1]]).concat([["Z"]])};var tde=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class Dm extends Dr{constructor(e,t){super(e,Object.assign({},Dm.defaultOptions,t)),this.hullMemberIds=[],this.drawHull=()=>{if(!this.shape)this.shape=new fh({style:this.getHullStyle()}),this.context.canvas.appendChild(this.shape);else{const n=!Qn(this.optionsCache,this.options);this.shape.update(this.getHullStyle(n))}this.optionsCache=Object.assign({},this.options)},this.updateHullPath=n=>{this.shape&&this.options.members.includes(he(n.data))&&this.shape.update({d:this.getHullPath(!0)})},this.getHullPath=(n=!1)=>{const{graph:i}=this.context,a=this.getMember();if(a.length===0)return"";const s=a.map(l=>i.getNodeData(l)),o=$ue(s.map(Cr),this.options.concavity).slice(1).reverse(),A=o.flatMap(l=>s.filter(c=>Qn(Cr(c),l)).map(he));return Qn(A,this.hullMemberIds)&&!n?this.path:(this.hullMemberIds=A,this.path=Yue(o,this.getPadding(),this.options.corner),this.path)},this.bindEvents()}bindEvents(){this.context.graph.on(Pe.AFTER_RENDER,this.drawHull),this.context.graph.on(Pe.AFTER_ELEMENT_UPDATE,this.updateHullPath)}unbindEvents(){this.context.graph.off(Pe.AFTER_RENDER,this.drawHull),this.context.graph.off(Pe.AFTER_ELEMENT_UPDATE,this.updateHullPath)}getHullStyle(e){const t=this.options,{members:n,padding:i,corner:a}=t,s=tde(t,["members","padding","corner"]);return Object.assign(Object.assign({},s),{d:this.getHullPath(e)})}getPadding(){const{graph:e}=this.context;return this.hullMemberIds.reduce((n,i)=>{const{halfExtents:a}=e.getElementRenderBounds(i),s=Math.max(a[0],a[1]);return Math.max(n,s)},0)+this.options.padding}addMember(e){const t=Array.isArray(e)?e:[e];this.options.members=[...new Set([...this.options.members,...t])],this.shape.update({d:this.getHullPath()})}removeMember(e){const t=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter(n=>!t.includes(n)),t.some(n=>this.hullMemberIds.includes(n))&&this.shape.update({d:this.getHullPath()})}updateMember(e){this.options.members=$e(e)?e(this.options.members):e,this.shape.update(this.getHullStyle(!0))}getMember(){return this.options.members}destroy(){this.unbindEvents(),this.shape.destroy(),this.hullMemberIds=[],super.destroy()}}Dm.defaultOptions={members:[],padding:10,corner:"rounded",concavity:1/0,fill:"lightblue",fillOpacity:.2,labelOpacity:1,stroke:"blue",strokeOpacity:.2};function G5(r,e){e(r),r.children&&r.children.forEach(function(t){t&&G5(t,e)})}function Bh(r){Rm(r,!0)}function Xa(r){Rm(r,!1)}function Rm(r,e){var t=e?"visible":"hidden";G5(r,function(n){n.attr("visibility",t)})}var nde=(function(r){Et(e,r);function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=r.apply(this,Ze([],Y(t),!1))||this;return i.isMutationObserved=!0,i.addEventListener(Ot.INSERTED,function(){Xa(i)}),i}return e})(xr);function V5(r){var e=r.appendChild(new nde({class:"offscreen"}));return Xa(e),e}function rde(r){for(var e=r;e;){if(e.className==="offscreen")return!0;e=e.parent}return!1}var yS=(function(r){Et(e,r);function e(t){t===void 0&&(t={});var n=t.style,i=Sn(t,["style"]);return r.call(this,Ee({style:Ee({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},n)},i))||this}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=V5(this)),this._offscreen},enumerable:!1,configurable:!0}),e.prototype.disconnectedCallback=function(){var t;(t=this._offscreen)===null||t===void 0||t.destroy()},e})(_l);function Kc(r){return r*Math.PI/180}function q5(r){return Number((r*180/Math.PI).toPrecision(5))}var Ei=(function(){function r(e,t,n,i){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=e,this.y=t,this.width=n,this.height=i}return Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),r.fromRect=function(e){return new r(e.x,e.y,e.width,e.height)},r.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},r.prototype.isPointIn=function(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom},r})();function ji(r,e){return $e(r)?r.apply(void 0,Ze([],Y(e),!1)):r}var as=function(r,e){var t=function(i){return"".concat(e,"-").concat(i)},n=Object.fromEntries(Object.entries(r).map(function(i){var a=Y(i,2),s=a[0],o=a[1],A=t(o);return[s,{name:A,class:".".concat(A),id:"#".concat(A),toString:function(){return A}}]}));return Object.assign(n,{prefix:t}),n},ide=5,W5=function(r,e,t,n){t===void 0&&(t=0),n===void 0&&(n=ide),Object.entries(e).forEach(function(i){var a=Y(i,2),s=a[0],o=a[1],A=r;Object.prototype.hasOwnProperty.call(e,s)&&(o?Qc(o)?(Qc(r[s])||(A[s]={}),t<n?W5(r[s],o,t+1,n):A[s]=e[s]):Ki(o)?(A[s]=[],A[s]=A[s].concat(o)):A[s]=o:A[s]=o)})},fr=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n+=1)W5(r,e[n]);return r},ade=function(r){return r!==void 0&&r!=null&&!Number.isNaN(r)},Zg,sde=PB(function(r,e){var t=e.fontSize,n=e.fontFamily,i=e.fontWeight,a=e.fontStyle,s=e.fontVariant;return Zg||(Zg=Se.offscreenCanvasCreator.getOrCreateContext(void 0)),Zg.font=[a,s,i,"".concat(t,"px"),n].join(" "),Zg.measureText(r).width},function(r,e){return[r,Object.values(e||$5(r)).join()].join("")},4096),$5=function(r){var e=r.style.fontFamily||"sans-serif",t=r.style.fontWeight||"normal",n=r.style.fontStyle||"normal",i=r.style.fontVariant,a=r.style.fontSize;return a=typeof a=="object"?a.value:a,{fontSize:a,fontFamily:e,fontWeight:t,fontStyle:n,fontVariant:i}};function Y5(r){return r.nodeName==="text"?r:r.nodeName==="g"&&r.children.length===1&&r.children[0].nodeName==="text"?r.children[0]:null}function X5(r,e){var t=Y5(r);t&&t.attr(e)}function jx(r,e,t){t===void 0&&(t="..."),X5(r,{wordWrap:!0,wordWrapWidth:e,maxLines:1,textOverflow:t})}function ode(r,e,t,n){t===void 0&&(t=2),n===void 0&&(n="top"),X5(r,{wordWrap:!0,wordWrapWidth:e,maxLines:t,textBaseline:n})}function sR(r){var e=r.nativeEvent,t=r.touches,n=r.clientX,i=r.clientY;if(e)return[e.clientX,e.clientY];if(t){var a=t[0],s=a.clientX,o=a.clientY;return[s,o]}return typeof n=="number"&&typeof i=="number"?[n,i]:[0,0]}function so(r){return typeof r=="function"?r():Rt(r)||je(r)?new yS({style:{text:String(r)}}):r}function Ade(r,e){return typeof r=="function"?r():Rt(r)||je(r)?new wl({style:Ee(Ee({pointerEvents:"auto"},e),{innerHTML:r})}):r}function lde(r,e){return r.reduce(function(t,n){return(t[n[e]]=t[n[e]]||[]).push(n),t},{})}function zi(r,e,t,n,i){return n===void 0&&(n=!0),i===void 0&&(i=function(a){a.node().removeChildren()}),r?t(e):(n&&i(e),null)}function zr(r,e,t,n,i){return n===void 0&&(n=!0),i===void 0&&(i=!1),n&&r===e||i&&r===t?!0:r>e&&r<t}var cde=function(r,e){return function(t){return r*(1-t)+e*t}};function ude(r,e){var t=e?e.length:0,n=r?Math.min(t,r.length):0;return function(i){var a=new Array(n),s=new Array(t),o=0;for(o=0;o<n;++o)a[o]=wS(r[o],e[o]);for(;o<t;++o)s[o]=e[o];for(o=0;o<n;++o)s[o]=a[o](i);return s}}function dde(r,e){r===void 0&&(r={}),e===void 0&&(e={});var t={},n={};return Object.entries(e).forEach(function(i){var a=Y(i,2),s=a[0],o=a[1];s in r?t[s]=wS(r[s],o):n[s]=o}),function(i){return Object.entries(t).forEach(function(a){var s=Y(a,2),o=s[0],A=s[1];return n[o]=A(i)}),n}}function wS(r,e){return typeof r=="number"&&typeof e=="number"?cde(r,e):Array.isArray(r)&&Array.isArray(e)?ude(r,e):typeof r=="object"&&typeof e=="object"?dde(r,e):(function(t){return r})}function hde(r,e,t,n){if(!n)return r.attr("__keyframe_data__",t),null;var i=n.duration,a=i===void 0?0:i,s=wS(e,t),o=Math.ceil(+a/16),A=new Array(o).fill(0).map(function(l,c,u){return{__keyframe_data__:s(c/(u.length-1))}});return r.animate(A,Ee({fill:"both"},n))}function Zs(r,e){return[r[0]*e,r[1]*e]}function yd(r,e){return[r[0]+e[0],r[1]+e[1]]}function hB(r,e){return[r[0]-e[0],r[1]-e[1]]}function zA(r,e){return[Math.min(r[0],e[0]),Math.min(r[1],e[1])]}function jA(r,e){return[Math.max(r[0],e[0]),Math.max(r[1],e[1])]}function Jd(r,e){return Math.sqrt(Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2))}function Z5(r){if(r[0]===0&&r[1]===0)return[0,0];var e=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2));return[r[0]/e,r[1]/e]}function fde(r,e){return e?[r[1],-r[0]]:[-r[1],r[0]]}function oR(r,e){return+r.toPrecision(e)}function Kx(r,e){var t={},n=Array.isArray(e)?e:[e];for(var i in r)n.includes(i)||(t[i]=r[i]);return t}function gde(r,e,t,n){var i,a=[],s=!!n,o,A,l=[1/0,1/0],c=[-1/0,-1/0],u,h,g;if(s){i=Y(n,2),l=i[0],c=i[1];for(var p=0,v=r.length;p<v;p+=1){var m=r[p];l=zA(l,m),c=jA(c,m)}}for(var p=0,w=r.length;p<w;p+=1){var m=r[p];if(p===0)g=m;else if(p===w-1)h=m,a.push(g),a.push(h);else{var b=[p?p-1:w-1,p-1][1];o=r[b],A=r[p+1];var _=[0,0];_=hB(A,o),_=Zs(_,e);var C=Jd(m,o),M=Jd(m,A),F=C+M;F!==0&&(C/=F,M/=F);var k=Zs(_,-C),P=Zs(_,M);h=yd(m,k),u=yd(m,P),u=zA(u,jA(A,m)),u=jA(u,zA(A,m)),k=hB(u,m),k=Zs(k,-C/M),h=yd(m,k),h=zA(h,jA(o,m)),h=jA(h,zA(o,m)),P=hB(m,h),P=Zs(P,M/C),u=yd(m,P),s&&(h=jA(h,l),h=zA(h,c),u=jA(u,l),u=zA(u,c)),a.push(g),a.push(h),g=u}}return a}function pde(r,e,t){t===void 0&&(t=[[0,0],[1,1]]);for(var n=!1,i=[],a=0,s=r.length;a<s;a+=2)i.push([r[a],r[a+1]]);for(var o=gde(i,.4,n,t),A=i.length,l=[],c,u,h,a=0;a<A-1;a+=1)c=o[a*2],u=o[a*2+1],h=i[a+1],l.push(["C",c[0],c[1],u[0],u[1],h[0],h[1]]);return l}var vde=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function mde(r){return vde.includes(r)}function AR(r){var e={};for(var t in r)mde(t)&&(e[t]=r[t]);return e}function yde(r,e){if(r.length<=e)return r;for(var t=Math.floor(r.length/e),n=[],i=0;i<r.length;i+=t)n.push(r[i]);return n}function bS(r,e,t){var n=r.getBBox(),i=n.width,a=n.height,s=e/Math.max(i,a);return r.style.transform="scale(".concat(s,")"),s}function wde(r,e){var t=new Map;return r.forEach(function(n){var i=e(n);t.has(i)||t.set(i,[]),t.get(i).push(n)}),t}function bde(r){throw new Error(r)}var _de=(function(){function r(i,a,s,o,A,l,c){i===void 0&&(i=null),a===void 0&&(a=null),s===void 0&&(s=null),o===void 0&&(o=null),A===void 0&&(A=[null,null,null,null,null]),l===void 0&&(l=[]),c===void 0&&(c=[]),e.add(this),this._elements=Array.from(i),this._data=a,this._parent=s,this._document=o,this._enter=A[0],this._update=A[1],this._exit=A[2],this._merge=A[3],this._split=A[4],this._transitions=l,this._facetElements=c}r.prototype.selectAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new t(a,null,this._elements[0],this._document)},r.prototype.selectFacetAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new t(this._elements,null,this._parent,this._document,void 0,void 0,a)},r.prototype.select=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new t([a],null,a,this._document)},r.prototype.append=function(i){var a=this,s=typeof i=="function"?i:function(){return a.createElement(i)},o=[];if(this._data!==null){for(var A=0;A<this._data.length;A++){var l=this._data[A],c=Y(Array.isArray(l)?l:[l,null],2),u=c[0],h=c[1],g=s(u,A);g.__data__=u,h!==null&&(g.__fromElements__=h),this._parent.appendChild(g),o.push(g)}return new t(o,null,this._parent,this._document)}for(var A=0;A<this._elements.length;A++){var p=this._elements[A],u=p.__data__,g=s(u,A);p.appendChild(g),o.push(g)}return new t(o,null,o[0],this._document)},r.prototype.maybeAppend=function(i,a){var s=Vy(this,e,"m",n).call(this,i[0]==="#"?i:"#".concat(i),a);return s.attr("id",i),s},r.prototype.maybeAppendByClassName=function(i,a){var s=i.toString(),o=Vy(this,e,"m",n).call(this,s[0]==="."?s:".".concat(s),a);return o.attr("className",s),o},r.prototype.maybeAppendByName=function(i,a){var s=Vy(this,e,"m",n).call(this,'[name="'.concat(i,'"]'),a);return s.attr("name",i),s},r.prototype.data=function(i,a,s){var o,A;a===void 0&&(a=function(D){return D}),s===void 0&&(s=function(){return null});for(var l=[],c=[],u=new Set(this._elements),h=[],g=new Set,p=new Map(this._elements.map(function(D,Q){return[a(D.__data__,Q),D]})),v=new Map(this._facetElements.map(function(D,Q){return[a(D.__data__,Q),D]})),m=wde(this._elements,function(D){return s(D.__data__)}),w=0;w<i.length;w++){var b=i[w],_=a(b,w),C=s(b,w);if(p.has(_)){var M=p.get(_);M.__data__=b,M.__facet__=!1,c.push(M),u.delete(M),p.delete(_)}else if(v.has(_)){var M=v.get(_);M.__data__=b,M.__facet__=!0,c.push(M),v.delete(_)}else if(m.has(_)){var F=m.get(_);h.push([b,F]);try{for(var k=(o=void 0,rh(F)),P=k.next();!P.done;P=k.next()){var M=P.value;u.delete(M)}}catch(D){o={error:D}}finally{try{P&&!P.done&&(A=k.return)&&A.call(k)}finally{if(o)throw o.error}}m.delete(_)}else if(p.has(C)){var M=p.get(C);M.__toData__?M.__toData__.push(b):M.__toData__=[b],g.add(M),u.delete(M)}else l.push(b)}var N=[new t([],l,this._parent,this._document),new t(c,null,this._parent,this._document),new t(u,null,this._parent,this._document),new t([],h,this._parent,this._document),new t(g,null,this._parent,this._document)];return new t(this._elements,null,this._parent,this._document,N)},r.prototype.merge=function(i){var a=Ze(Ze([],Y(this._elements),!1),Y(i._elements),!1),s=Ze(Ze([],Y(this._transitions),!1),Y(i._transitions),!1);return new t(a,null,this._parent,this._document,void 0,s)},r.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var a=t.registry[i];return a?new a:bde("Unknown node type: ".concat(i))},r.prototype.join=function(i,a,s,o,A){i===void 0&&(i=function(p){return p}),a===void 0&&(a=function(p){return p}),s===void 0&&(s=function(p){return p.remove()}),o===void 0&&(o=function(p){return p}),A===void 0&&(A=function(p){return p.remove()});var l=i(this._enter),c=a(this._update),u=s(this._exit),h=o(this._merge),g=A(this._split);return c.merge(l).merge(u).merge(h).merge(g)},r.prototype.remove=function(){for(var i=function(o){var A=a._elements[o],l=a._transitions[o];l?l.then(function(){return A.remove()}):A.remove()},a=this,s=0;s<this._elements.length;s++)i(s);return new t([],null,this._parent,this._document,void 0,this._transitions)},r.prototype.each=function(i){for(var a=0;a<this._elements.length;a++){var s=this._elements[a],o=s.__data__;i.call(s,o,a)}return this},r.prototype.attr=function(i,a){var s=typeof a!="function"?function(){return a}:a;return this.each(function(o,A){a!==void 0&&(this[i]=s.call(this,o,A))})},r.prototype.style=function(i,a,s){s===void 0&&(s=!0);var o=typeof a!="function"||!s?function(){return a}:a;return this.each(function(A,l){a!==void 0&&(this.style[i]=o.call(this,A,l))})},r.prototype.styles=function(i,a){return i===void 0&&(i={}),a===void 0&&(a=!0),this.each(function(s,o){var A=this;Object.entries(i).forEach(function(l){var c=Y(l,2),u=c[0],h=c[1],g=typeof h!="function"||!a?function(){return h}:h;h!==void 0&&A.attr(u,g.call(A,s,o))})})},r.prototype.update=function(i,a){a===void 0&&(a=!0);var s=typeof i!="function"||!a?function(){return i}:i;return this.each(function(o,A){i&&this.update&&this.update(s.call(this,o,A))})},r.prototype.maybeUpdate=function(i,a){a===void 0&&(a=!0);var s=typeof i!="function"||!a?function(){return i}:i;return this.each(function(o,A){i&&this.update&&this.update(s.call(this,o,A))})},r.prototype.transition=function(i){this._transitions;var a=new Array(this._elements.length);return this.each(function(s,o){a[o]=i.call(this,s,o)}),this._transitions=_K(a),this},r.prototype.on=function(i,a){return this.each(function(){this.addEventListener(i,a)}),this},r.prototype.call=function(i){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return i.call.apply(i,Ze([this._parent,this],Y(a),!1)),this},r.prototype.node=function(){return this._elements[0]},r.prototype.nodes=function(){return this._elements},r.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},r.prototype.parent=function(){return this._parent};var e,t,n;return t=r,e=new WeakSet,n=function(a,s){var o=this._elements[0],A=o.querySelector(a);if(A)return new t([A],null,this._parent,this._document);var l=typeof s=="string"?this.createElement(s):s();return o.appendChild(l),new t([l],null,this._parent,this._document)},r.registry={g:xr,rect:Wr,circle:xs,path:ci,text:yS,ellipse:oh,image:Ah,line:hl,polygon:bl,polyline:mv,html:wl},r})();function Ye(r){return new _de([r],null,r,r.ownerDocument)}function Ede(r,e,t){return r.querySelector(e)?Ye(r).select(e):Ye(r).append(t)}function $r(r){if(je(r))return[r,r,r,r];if(Ki(r)){var e=r.length;if(e===1)return[r[0],r[0],r[0],r[0]];if(e===2)return[r[0],r[1],r[0],r[1]];if(e===3)return[r[0],r[1],r[2],r[1]];if(e===4)return r}return[0,0,0,0]}function lR(r){var e=r.getLocalBounds(),t=e.min,n=e.max,i=Y([t,n],2),a=Y(i[0],2),s=a[0],o=a[1],A=Y(i[1],2),l=A[0],c=A[1];return{x:s,y:o,width:l-s,height:c-o,left:s,bottom:c,top:o,right:l}}function Cde(r,e){var t=Y(r,2),n=t[0],i=t[1],a=Y(e,2),s=a[0],o=a[1];return n!==s&&i===o}function Bde(r,e){var t,n,i=e.attributes;try{for(var a=rh(Object.entries(i)),s=a.next();!s.done;s=a.next()){var o=Y(s.value,2),A=o[0],l=o[1];A!=="id"&&A!=="className"&&r.attr(A,l)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}}function _S(r){return r.toString().charAt(0).toUpperCase()+r.toString().slice(1)}function xde(r){return r.toString().charAt(0).toLowerCase()+r.toString().slice(1)}function Sde(r,e){return"".concat(e).concat(_S(r))}function cR(r,e,t){var n;t===void 0&&(t=!0);var i=e||((n=r.match(/^([a-z][a-z0-9]+)/))===null||n===void 0?void 0:n[0])||"",a=r.replace(new RegExp("^(".concat(i,")")),"");return t?xde(a):a}function Tde(r,e){Object.entries(e).forEach(function(t){var n=Y(t,2),i=n[0],a=n[1];Ze([r],Y(r.querySelectorAll(i)),!1).filter(function(s){return s.matches(i)}).forEach(function(s){if(s){var o=s;o.style.cssText+=Object.entries(a).reduce(function(A,l){return"".concat(A).concat(l.join(":"),";")},"")}})})}var Jg=function(r,e){if(!(r!=null&&r.startsWith(e)))return!1;var t=r[e.length];return t>="A"&&t<="Z"};function vt(r,e,t){t===void 0&&(t=!1);var n={};return Object.entries(r).forEach(function(i){var a=Y(i,2),s=a[0],o=a[1];if(!(s==="className"||s==="class")){if(Jg(s,"show")&&Jg(cR(s,"show"),e)!==t)s===Sde(e,"show")?n[s]=o:n[s.replace(new RegExp(_S(e)),"")]=o;else if(!Jg(s,"show")&&Jg(s,e)!==t){var A=cR(s,e);A==="filter"&&typeof o=="function"||(n[A]=o)}}}),n}function _c(r,e){return Object.entries(r).reduce(function(t,n){var i=Y(n,2),a=i[0],s=i[1];return a.startsWith("show")?t["show".concat(e).concat(a.slice(4))]=s:t["".concat(e).concat(_S(a))]=s,t},{})}function oo(r,e){e===void 0&&(e=["x","y","class","className"]);var t=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],n={},i={};return Object.entries(r).forEach(function(a){var s=Y(a,2),o=s[0],A=s[1];e.includes(o)||(t.indexOf(o)!==-1?i[o]=A:n[o]=A)}),[n,i]}function Pi(r,e){var t={YYYY:r.getFullYear(),MM:r.getMonth()+1,DD:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds()},n=e;return Object.keys(t).forEach(function(i){var a=t[i];n=n.replace(i,i==="YYYY"?"".concat(a):"".concat(a).padStart(2,"0"))}),n}function Mde(r,e,t){var n=r.getBBox(),i=n.width,a=n.height,s=Y([e,t].map(function(l,c){var u;return l.includes("%")?parseFloat(((u=l.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||u===void 0?void 0:u[0])||"0")/100*(c===0?i:a):l}),2),o=s[0],A=s[1];return[o,A]}function J5(r,e){if(e)try{var t=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,n=e.replace(t,function(i,a,s){return"translate(".concat(Mde(r,a,s),")")});r.attr("transform",n)}catch{}}function Fde(r){var e;return((e=r[0])===null||e===void 0?void 0:e.map(function(t,n){return r.map(function(i){return i[n]})}))||[]}var uR=function(r,e){if(e==null){r.innerHTML="";return}r.replaceChildren?Array.isArray(e)?r.replaceChildren.apply(r,Ze([],Y(e),!1)):r.replaceChildren(e):(r.innerHTML="",Array.isArray(e)?e.forEach(function(t){return r.appendChild(t)}):r.appendChild(e))};function Qm(r){return/\S+-\S+/g.test(r)?r.split("-").map(function(e){return e[0]}):r.length>2?[r[0]]:r.split("")}var kde=function(r){var e=new DOMParser,t=e.parseFromString(r,"text/html"),n=t.body.firstElementChild;if(console.log(n==null?void 0:n.getClientRects(),11),!n)return 0;var i=n.getAttribute("style")||"",a=Object.fromEntries(i.split(";").map(function(m){return m.trim()}).filter(function(m){return m.includes(":")}).map(function(m){var w=Y(m.split(":").map(function(C){return C.trim()}),2),b=w[0],_=w[1];return[b.toLowerCase(),_]})),s=function(m){if(!m)return 0;var w=m.match(/([\d.]+)px/);return w?parseFloat(w[1]):0};if(a.height)return s(a.height);var o=s(a["font-size"])||16,A=a["line-height"],l;!A||A==="normal"?l=1.2*o:A.endsWith("px")?l=s(A):/^[\d.]+$/.test(A)?l=parseFloat(A)*o:l=o;var c=s(a["padding-top"]),u=s(a["padding-bottom"]);if(a.padding){var h=a.padding.split(/\s+/).map(s);h.length===1||h.length===2?(c=h[0],u=h[0]):(h.length===3||h.length===4)&&(c=h[0],u=h[2])}var g=s(a["border-top-width"]),p=s(a["border-bottom-width"]);if(a.border){var v=a.border.match(/([\d.]+)px/);v&&(g=parseFloat(v[1]),p=parseFloat(v[1]))}if(a["border-width"]){var h=a["border-width"].split(/\s+/).map(s);h.length===1||h.length===2?(g=h[0],p=h[0]):(h.length===3||h.length===4)&&(g=h[0],p=h[2])}return l+c+u+g+p};function Ide(){Rm(this,this.attributes.visibility!=="hidden")}var Un=(function(r){Et(e,r);function e(t,n){n===void 0&&(n={});var i=r.call(this,fr({},{style:n},t))||this;return i.initialized=!1,i._defaultOptions=n,i}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=V5(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},e.prototype.disconnectedCallback=function(){var t;(t=this._offscreen)===null||t===void 0||t.destroy()},e.prototype.attributeChangedCallback=function(t){t==="visibility"&&Ide.call(this)},e.prototype.update=function(t,n){var i;return this.attr(fr({},this.attributes,t||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,n)},e.prototype.clear=function(){this.removeChildren()},e.prototype.bindEvents=function(t,n){},e.prototype.getSubShapeStyle=function(t){t.x,t.y,t.transform,t.transformOrigin,t.class,t.className,t.zIndex;var n=Sn(t,["x","y","transform","transformOrigin","class","className","zIndex"]);return n},e})(sh),e8=function(r,e,t){return[["M",r-t,e],["A",t,t,0,1,0,r+t,e],["A",t,t,0,1,0,r-t,e],["Z"]]},Pde=e8,Ode=function(r,e,t){return[["M",r-t,e-t],["L",r+t,e-t],["L",r+t,e+t],["L",r-t,e+t],["Z"]]},Lde=function(r,e,t){return[["M",r-t,e],["L",r,e-t],["L",r+t,e],["L",r,e+t],["Z"]]},Nde=function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e+n],["L",r,e-n],["L",r+t,e+n],["Z"]]},Dde=function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e-n],["L",r+t,e-n],["L",r,e+n],["Z"]]},Rde=function(r,e,t){var n=t/2*Math.sqrt(3);return[["M",r,e-t],["L",r+n,e-t/2],["L",r+n,e+t/2],["L",r,e+t],["L",r-n,e+t/2],["L",r-n,e-t/2],["Z"]]},Qde=function(r,e,t){var n=t-1.5;return[["M",r-t,e-n],["L",r+t,e+n],["L",r+t,e-n],["L",r-t,e+n],["Z"]]},t8=function(r,e,t){return[["M",r,e+t],["L",r,e-t]]},Ude=function(r,e,t){return[["M",r-t,e-t],["L",r+t,e+t],["M",r+t,e-t],["L",r-t,e+t]]},Hde=function(r,e,t){return[["M",r-t/2,e-t],["L",r+t/2,e-t],["M",r,e-t],["L",r,e+t],["M",r-t/2,e+t],["L",r+t/2,e+t]]},zde=function(r,e,t){return[["M",r-t,e],["L",r+t,e],["M",r,e-t],["L",r,e+t]]},jde=function(r,e,t){return[["M",r-t,e],["L",r+t,e]]},n8=function(r,e,t){return[["M",r-t,e],["L",r+t,e]]},Kde=n8,Gde=function(r,e,t){return[["M",r-t,e],["A",t/2,t/2,0,1,1,r,e],["A",t/2,t/2,0,1,0,r+t,e]]},Vde=function(r,e,t){return[["M",r-t-1,e-2.5],["L",r,e-2.5],["L",r,e+2.5],["L",r+t+1,e+2.5]]},qde=function(r,e,t){return[["M",r-t-1,e+2.5],["L",r,e+2.5],["L",r,e-2.5],["L",r+t+1,e-2.5]]},Wde=function(r,e,t){return[["M",r-(t+1),e+2.5],["L",r-t/2,e+2.5],["L",r-t/2,e-2.5],["L",r+t/2,e-2.5],["L",r+t/2,e+2.5],["L",r+t+1,e+2.5]]};function $de(r,e){return[["M",r-5,e+2.5],["L",r-5,e],["L",r,e],["L",r,e-3],["L",r,e+3],["L",r+6.5,e+3]]}var Yde=function(r,e,t){return[["M",r-t,e-t],["L",r+t,e],["L",r-t,e+t],["Z"]]},Xde=function(r,e,t){var n=t,i=t*.2,a=t*.7;return[["M",r-n,e],["A",n,n,0,1,0,r+n,e],["A",n,n,0,1,0,r-n,e],["Z"],["M",r-a,e],["L",r-i,e],["M",r+i,e],["L",r+a,e],["M",r,e-a],["L",r,e-i],["M",r,e+i],["L",r,e+a]]};function Zde(r){var e="default";if(nr(r)&&r instanceof Image)e="image";else if($e(r))e="symbol";else if(Rt(r)){var t=new RegExp("data:(image|text)");r.match(t)?e="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(r)?e="url":e="symbol"}return e}function Jde(r){var e=Zde(r);return["base64","url","image"].includes(e)?"image":r&&e==="symbol"?"path":null}var $t=(function(r){Et(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,n){var i=t.x,a=i===void 0?0:i,s=t.y,o=s===void 0?0:s,A=this.getSubShapeStyle(t),l=A.symbol,c=A.size,u=c===void 0?16:c,h=Sn(A,["symbol","size"]),g=Jde(l);zi(!!g,Ye(n),function(p){p.maybeAppendByClassName("marker",g).attr("className","marker ".concat(g,"-marker")).call(function(v){if(g==="image"){var m=u*2;v.styles({img:l,width:m,height:m,x:a-u,y:o-u})}else{var m=u/2,w=$e(l)?l:e.getSymbol(l);v.styles(Ee({d:w==null?void 0:w(a,o,m)},h))}})})},e.MARKER_SYMBOL_MAP=new Map,e.registerSymbol=function(t,n){e.MARKER_SYMBOL_MAP.set(t,n)},e.getSymbol=function(t){return e.MARKER_SYMBOL_MAP.get(t)},e.getSymbols=function(){return Array.from(e.MARKER_SYMBOL_MAP.keys())},e})(Un);$t.registerSymbol("cross",Ude);$t.registerSymbol("hyphen",jde);$t.registerSymbol("line",t8);$t.registerSymbol("plus",zde);$t.registerSymbol("tick",Hde);$t.registerSymbol("circle",e8);$t.registerSymbol("point",Pde);$t.registerSymbol("bowtie",Qde);$t.registerSymbol("hexagon",Rde);$t.registerSymbol("square",Ode);$t.registerSymbol("diamond",Lde);$t.registerSymbol("triangle",Nde);$t.registerSymbol("triangle-down",Dde);$t.registerSymbol("line",t8);$t.registerSymbol("dot",n8);$t.registerSymbol("dash",Kde);$t.registerSymbol("smooth",Gde);$t.registerSymbol("hv",Vde);$t.registerSymbol("vh",qde);$t.registerSymbol("hvh",Wde);$t.registerSymbol("vhv",$de);$t.registerSymbol("focus",Xde);function uv(r,...e){return e.reduce((t,n)=>i=>t(n(i)),r)}function Gx(r,e){return e-r?t=>(t-r)/(e-r):t=>.5}function ehe(r,e){const t=e<r?e:r,n=r>e?r:e;return i=>Math.min(Math.max(t,i),n)}function the(r,e,t,n,i){let a=t,s=n||r.length;const o=(A=>A);for(;a<s;){const A=Math.floor((a+s)/2);o(r[A])>e?s=A:a=A+1}return a}const dR=Math.sqrt(50),hR=Math.sqrt(10),fR=Math.sqrt(2);function pp(r,e,t){const n=(e-r)/Math.max(0,t),i=Math.floor(Math.log(n)/Math.LN10),a=n/10**i;return i>=0?(a>=dR?10:a>=hR?5:a>=fR?2:1)*10**i:-(10**-i)/(a>=dR?10:a>=hR?5:a>=fR?2:1)}const nhe=(r,e,t=5)=>{const n=[r,e];let i=0,a=n.length-1,s=n[i],o=n[a],A;return o<s&&([s,o]=[o,s],[i,a]=[a,i]),A=pp(s,o,t),A>0?(s=Math.floor(s/A)*A,o=Math.ceil(o/A)*A,A=pp(s,o,t)):A<0&&(s=Math.ceil(s*A)/A,o=Math.floor(o*A)/A,A=pp(s,o,t)),A>0?(n[i]=Math.floor(s/A)*A,n[a]=Math.ceil(o/A)*A):A<0&&(n[i]=Math.ceil(s*A)/A,n[a]=Math.floor(o*A)/A),n};function gR(r){return!ft(r)&&!OK(r)&&!Number.isNaN(r)}var fB={exports:{}},gB,pR;function rhe(){return pR||(pR=1,gB={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),gB}var pB={exports:{}},vB,vR;function ihe(){return vR||(vR=1,vB=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}),vB}var mR;function ahe(){if(mR)return pB.exports;mR=1;var r=ihe(),e=Array.prototype.concat,t=Array.prototype.slice,n=pB.exports=function(a){for(var s=[],o=0,A=a.length;o<A;o++){var l=a[o];r(l)?s=e.call(s,t.call(l)):s.push(l)}return s};return n.wrap=function(i){return function(){return i(n(arguments))}},pB.exports}var yR;function she(){if(yR)return fB.exports;yR=1;var r=rhe(),e=ahe(),t=Object.hasOwnProperty,n=Object.create(null);for(var i in r)t.call(r,i)&&(n[r[i]]=i);var a=fB.exports={to:{},get:{}};a.get=function(A){var l=A.substring(0,3).toLowerCase(),c,u;switch(l){case"hsl":c=a.get.hsl(A),u="hsl";break;case"hwb":c=a.get.hwb(A),u="hwb";break;default:c=a.get.rgb(A),u="rgb";break}return c?{model:u,value:c}:null},a.get.rgb=function(A){if(!A)return null;var l=/^#([a-f0-9]{3,4})$/i,c=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,u=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,h=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,g=/^(\w+)$/,p=[0,0,0,1],v,m,w;if(v=A.match(c)){for(w=v[2],v=v[1],m=0;m<3;m++){var b=m*2;p[m]=parseInt(v.slice(b,b+2),16)}w&&(p[3]=parseInt(w,16)/255)}else if(v=A.match(l)){for(v=v[1],w=v[3],m=0;m<3;m++)p[m]=parseInt(v[m]+v[m],16);w&&(p[3]=parseInt(w+w,16)/255)}else if(v=A.match(u)){for(m=0;m<3;m++)p[m]=parseInt(v[m+1],0);v[4]&&(v[5]?p[3]=parseFloat(v[4])*.01:p[3]=parseFloat(v[4]))}else if(v=A.match(h)){for(m=0;m<3;m++)p[m]=Math.round(parseFloat(v[m+1])*2.55);v[4]&&(v[5]?p[3]=parseFloat(v[4])*.01:p[3]=parseFloat(v[4]))}else return(v=A.match(g))?v[1]==="transparent"?[0,0,0,0]:t.call(r,v[1])?(p=r[v[1]],p[3]=1,p):null:null;for(m=0;m<3;m++)p[m]=s(p[m],0,255);return p[3]=s(p[3],0,1),p},a.get.hsl=function(A){if(!A)return null;var l=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,c=A.match(l);if(c){var u=parseFloat(c[4]),h=(parseFloat(c[1])%360+360)%360,g=s(parseFloat(c[2]),0,100),p=s(parseFloat(c[3]),0,100),v=s(isNaN(u)?1:u,0,1);return[h,g,p,v]}return null},a.get.hwb=function(A){if(!A)return null;var l=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,c=A.match(l);if(c){var u=parseFloat(c[4]),h=(parseFloat(c[1])%360+360)%360,g=s(parseFloat(c[2]),0,100),p=s(parseFloat(c[3]),0,100),v=s(isNaN(u)?1:u,0,1);return[h,g,p,v]}return null},a.to.hex=function(){var A=e(arguments);return"#"+o(A[0])+o(A[1])+o(A[2])+(A[3]<1?o(Math.round(A[3]*255)):"")},a.to.rgb=function(){var A=e(arguments);return A.length<4||A[3]===1?"rgb("+Math.round(A[0])+", "+Math.round(A[1])+", "+Math.round(A[2])+")":"rgba("+Math.round(A[0])+", "+Math.round(A[1])+", "+Math.round(A[2])+", "+A[3]+")"},a.to.rgb.percent=function(){var A=e(arguments),l=Math.round(A[0]/255*100),c=Math.round(A[1]/255*100),u=Math.round(A[2]/255*100);return A.length<4||A[3]===1?"rgb("+l+"%, "+c+"%, "+u+"%)":"rgba("+l+"%, "+c+"%, "+u+"%, "+A[3]+")"},a.to.hsl=function(){var A=e(arguments);return A.length<4||A[3]===1?"hsl("+A[0]+", "+A[1]+"%, "+A[2]+"%)":"hsla("+A[0]+", "+A[1]+"%, "+A[2]+"%, "+A[3]+")"},a.to.hwb=function(){var A=e(arguments),l="";return A.length>=4&&A[3]!==1&&(l=", "+A[3]),"hwb("+A[0]+", "+A[1]+"%, "+A[2]+"%"+l+")"},a.to.keyword=function(A){return n[A.slice(0,3)]};function s(A,l,c){return Math.min(Math.max(l,A),c)}function o(A){var l=Math.round(A).toString(16).toUpperCase();return l.length<2?"0"+l:l}return fB.exports}var ohe=she();const Ahe=Vc(ohe);function mB(r,e,t){let n=t;return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(e-r)*6*n:n<1/2?e:n<2/3?r+(e-r)*(2/3-n)*6:r}function lhe(r){const e=r[0]/360,t=r[1]/100,n=r[2]/100,i=r[3];if(t===0)return[n*255,n*255,n*255,i];const a=n<.5?n*(1+t):n+t-n*t,s=2*n-a,o=mB(s,a,e+1/3),A=mB(s,a,e),l=mB(s,a,e-1/3);return[o*255,A*255,l*255,i]}function wR(r){const e=Ahe.get(r);if(!e)return null;const{model:t,value:n}=e;return t==="rgb"?n:t==="hsl"?lhe(n):null}const dv=(r,e)=>t=>r*(1-t)+e*t,che=(r,e)=>{const t=wR(r),n=wR(e);return t===null||n===null?t?()=>r:()=>e:i=>{const a=new Array(4);for(let c=0;c<4;c+=1){const u=t[c],h=n[c];a[c]=u*(1-i)+h*i}const[s,o,A,l]=a;return`rgba(${Math.round(s)}, ${Math.round(o)}, ${Math.round(A)}, ${l})`}},uhe=(r,e)=>typeof r=="number"&&typeof e=="number"?dv(r,e):typeof r=="string"&&typeof e=="string"?che(r,e):()=>r,dhe=(r,e)=>{const t=dv(r,e);return n=>Math.round(t(n))};function bR({map:r,initKey:e},t){const n=e(t);return r.has(n)?r.get(n):t}function hhe({map:r,initKey:e},t){const n=e(t);return r.has(n)?r.get(n):(r.set(n,t),t)}function fhe({map:r,initKey:e},t){const n=e(t);return r.has(n)&&(t=r.get(n),r.delete(n)),t}function ghe(r){return typeof r=="object"?r.valueOf():r}class _R extends Map{constructor(e){if(super(),this.map=new Map,this.initKey=ghe,e!==null)for(const[t,n]of e)this.set(t,n)}get(e){return super.get(bR({map:this.map,initKey:this.initKey},e))}has(e){return super.has(bR({map:this.map,initKey:this.initKey},e))}set(e,t){return super.set(hhe({map:this.map,initKey:this.initKey},e),t)}delete(e){return super.delete(fhe({map:this.map,initKey:this.initKey},e))}}class r8{constructor(e){this.options=qr({},this.getDefaultOptions()),this.update(e)}getOptions(){return this.options}update(e={}){this.options=qr({},this.options,e),this.rescale(e)}rescale(e){}}const ES=Symbol("defaultUnknown");function ER(r,e,t){for(let n=0;n<e.length;n+=1)r.has(e[n])||r.set(t(e[n]),n)}function CR(r){const{value:e,from:t,to:n,mapper:i,notFoundReturn:a}=r;let s=i.get(e);if(s===void 0){if(a!==ES)return a;s=t.push(e)-1,i.set(e,s)}return n[s%n.length]}function BR(r){return r instanceof Date?e=>`${e}`:typeof r=="object"?e=>JSON.stringify(e):e=>e}class CS extends r8{getDefaultOptions(){return{domain:[],range:[],unknown:ES}}constructor(e){super(e)}map(e){return this.domainIndexMap.size===0&&ER(this.domainIndexMap,this.getDomain(),this.domainKey),CR({value:this.domainKey(e),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(e){return this.rangeIndexMap.size===0&&ER(this.rangeIndexMap,this.getRange(),this.rangeKey),CR({value:this.rangeKey(e),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(e){const[t]=this.options.domain,[n]=this.options.range;if(this.domainKey=BR(t),this.rangeKey=BR(n),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!e||e.range)&&this.rangeIndexMap.clear(),(!e||e.domain||e.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new CS(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:e,compare:t}=this.options;return this.sortedDomain=t?[...e].sort(t):e,this.sortedDomain}}function phe(r){const e=Math.min(...r);return r.map(t=>t/e)}function vhe(r,e){const t=r.length,n=e-t;return n>0?[...r,...new Array(n).fill(1)]:n<0?r.slice(0,e):r}function mhe(r){return Math.round(r*1e12)/1e12}function yhe(r){const{domain:e,range:t,paddingOuter:n,paddingInner:i,flex:a,round:s,align:o}=r,A=e.length,l=vhe(a,A),[c,u]=t,h=u-c,g=2/A*n+1-1/A*i,p=h/g,v=p*i/A,m=p-A*v,w=phe(l),b=w.reduce((H,j)=>H+j),_=m/b,C=new _R(e.map((H,j)=>{const q=w[j]*_;return[H,s?Math.floor(q):q]})),M=new _R(e.map((H,j)=>{const J=w[j]*_+v;return[H,s?Math.floor(J):J]})),F=Array.from(M.values()).reduce((H,j)=>H+j),P=(h-(F-F/A*i))*o,N=c+P;let D=s?Math.round(N):N;const Q=new Array(A);for(let H=0;H<A;H+=1){Q[H]=mhe(D);const j=e[H];D+=M.get(j)}return{valueBandWidth:C,valueStep:M,adjustedRange:Q}}function whe(r){var e;const{domain:t}=r,n=t.length;if(n===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((e=r.flex)===null||e===void 0)&&e.length))return yhe(r);const{range:a,paddingOuter:s,paddingInner:o,round:A,align:l}=r;let c,u,h=a[0];const p=a[1]-h,v=s*2,m=n-o;c=p/Math.max(1,v+m),A&&(c=Math.floor(c)),h+=(p-c*(n-o))*l,u=c*(1-o),A&&(h=Math.round(h),u=Math.round(u));const w=new Array(n).fill(0).map((b,_)=>h+_*c);return{valueStep:c,valueBandWidth:u,adjustedRange:w}}class BS extends CS{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:ES,flex:[]}}constructor(e){super(e)}clone(){return new BS(this.options)}getStep(e){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:e===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(e)}getBandWidth(e){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:e===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(e)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:e,paddingInner:t}=this.options;return e>0?e:t}getPaddingOuter(){const{padding:e,paddingOuter:t}=this.options;return e>0?e:t}rescale(){super.rescale();const{align:e,domain:t,range:n,round:i,flex:a}=this.options,{adjustedRange:s,valueBandWidth:o,valueStep:A}=whe({align:e,range:n,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:t});this.valueStep=A,this.valueBandWidth=o,this.adjustedRange=s}}const bhe=(r,e,t)=>{let n,i,a=r,s=e;if(a===s&&t>0)return[a];let o=pp(a,s,t);if(o===0||!Number.isFinite(o))return[];if(o>0){a=Math.ceil(a/o),s=Math.floor(s/o),i=new Array(n=Math.ceil(s-a+1));for(let A=0;A<n;A+=1)i[A]=(a+A)*o}else{o=-o,a=Math.ceil(a*o),s=Math.floor(s*o),i=new Array(n=Math.ceil(s-a+1));for(let A=0;A<n;A+=1)i[A]=(a+A)/o}return i},_he=(r,e,t)=>{const[n,i]=r,[a,s]=e;let o,A;return n<i?(o=Gx(n,i),A=t(a,s)):(o=Gx(i,n),A=t(s,a)),uv(A,o)},Ehe=(r,e,t)=>{const n=Math.min(r.length,e.length)-1,i=new Array(n),a=new Array(n),s=r[0]>r[n],o=s?[...r].reverse():r,A=s?[...e].reverse():e;for(let l=0;l<n;l+=1)i[l]=Gx(o[l],o[l+1]),a[l]=t(A[l],A[l+1]);return l=>{const c=the(r,l,1,n)-1,u=i[c],h=a[c];return uv(h,u)(l)}},xR=(r,e,t,n)=>(Math.min(r.length,e.length)>2?Ehe:_he)(r,e,n?dhe:t);class Che extends r8{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:dv,tickCount:5}}map(e){return gR(e)?this.output(e):this.options.unknown}invert(e){return gR(e)?this.input(e):this.options.unknown}nice(){if(!this.options.nice)return;const[e,t,n,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(e,t,n,...i)}getTicks(){const{tickMethod:e}=this.options,[t,n,i,...a]=this.getTickMethodOptions();return e(t,n,i,...a)}getTickMethodOptions(){const{domain:e,tickCount:t}=this.options,n=e[0],i=e[e.length-1];return[n,i,t]}chooseNice(){return nhe}rescale(){this.nice();const[e,t]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,t,this.chooseClamp(t))}chooseClamp(e){const{clamp:t,range:n}=this.options,i=this.options.domain.map(e),a=Math.min(i.length,n.length);return t?ehe(i[0],i[a-1]):OB}composeOutput(e,t){const{domain:n,range:i,round:a,interpolate:s}=this.options,o=xR(n.map(e),i,s,a);this.output=uv(o,t,e)}composeInput(e,t,n){const{domain:i,range:a}=this.options,s=xR(a,i.map(e),dv);this.input=uv(t,n,s)}}class kd extends Che{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:uhe,tickMethod:bhe,tickCount:5}}chooseTransforms(){return[OB,OB]}clone(){return new kd(this.options)}}var Bhe=(function(r){Et(e,r);function e(t){var n=this,i=t.style,a=Sn(t,["style"]);return n=r.call(this,qr({},{type:"column"},Ee({style:i},a)))||this,n.columnsGroup=new xr({name:"columns"}),n.appendChild(n.columnsGroup),n.render(),n}return e.prototype.render=function(){var t=this.attributes,n=t.columns,i=t.x,a=t.y;this.columnsGroup.style.transform="translate(".concat(i,", ").concat(a,")"),Ye(this.columnsGroup).selectAll(".column").data(n.flat()).join(function(s){return s.append("rect").attr("className","column").each(function(o){this.attr(o)})},function(s){return s.each(function(o){this.attr(o)})},function(s){return s.remove()})},e.prototype.update=function(t){this.attr(fr({},this.attributes,t)),this.render()},e.prototype.clear=function(){this.removeChildren()},e})(hn),xhe=(function(r){Et(e,r);function e(t){var n=this,i=t.style,a=Sn(t,["style"]);return n=r.call(this,qr({},{type:"lines"},Ee({style:i},a)))||this,n.linesGroup=n.appendChild(new xr),n.areasGroup=n.appendChild(new xr),n.render(),n}return e.prototype.render=function(){var t=this.attributes,n=t.lines,i=t.areas,a=t.x,s=t.y;this.style.transform="translate(".concat(a,", ").concat(s,")"),n&&this.renderLines(n),i&&this.renderAreas(i)},e.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},e.prototype.update=function(t){this.attr(fr({},this.attributes,t)),this.render()},e.prototype.renderLines=function(t){Ye(this.linesGroup).selectAll(".line").data(t).join(function(n){return n.append("path").attr("className","line").each(function(i){this.attr(i)})},function(n){return n.each(function(i){this.attr(i)})},function(n){return n.remove()})},e.prototype.renderAreas=function(t){Ye(this.linesGroup).selectAll(".area").data(t).join(function(n){return n.append("path").attr("className","area").each(function(i){this.attr(i)})},function(n){return n.each(function(i){this.style(i)})},function(n){return n.remove()})},e})(hn);function She(r,e){var t,n=e.x,i=e.y,a=Y(i.getOptions().range||[0,0],2),s=a[0],o=a[1];return o>s&&(t=Y([s,o],2),o=t[0],s=t[1]),r.map(function(A){var l=A.map(function(c,u){return[n.map(u),Rn(i.map(c),o,s)]});return l})}function eh(r,e){e===void 0&&(e=!1);var t=e?r.length-1:0,n=r.map(function(i,a){return Ze([a===t?"M":"L"],Y(i),!1)});return e?n.reverse():n}function hv(r,e){if(e===void 0&&(e=!1),r.length<=2)return eh(r);for(var t=[],n=r.length,i=0;i<n;i+=1){var a=e?r[n-i-1]:r[i];Qn(a,t.slice(-2))||t.push.apply(t,Ze([],Y(a),!1))}var s=pde(t);return e?s.unshift(Ze(["M"],Y(r[n-1]),!1)):s.unshift(Ze(["M"],Y(r[0]),!1)),s}function xS(r,e,t){var n=AA(r);return n.push(["L",e,t],["L",0,t],["Z"]),n}function The(r,e,t,n){return r.map(function(i){return xS(e?hv(i):eh(i),t,n)})}function Mhe(r,e,t){for(var n=[],i=r.length-1;i>=0;i-=1){var a=r[i],s=eh(a),o=void 0;if(i===0)o=xS(s,e,t);else{var A=r[i-1],l=eh(A,!0);l[0][0]="L",o=Ze(Ze(Ze([],Y(s),!1),Y(l),!1),[["Z"]],!1)}n.push(o)}return n}function Fhe(r,e,t){for(var n=[],i=r.length-1;i>=0;i-=1){var a=r[i],s=hv(a),o=void 0;if(i===0)o=xS(s,e,t);else{var A=r[i-1],l=hv(A,!0),c=a[0];l[0][0]="L",o=Ze(Ze(Ze([],Y(s),!1),Y(l),!1),[Ze(["M"],Y(c),!1),["Z"]],!1)}n.push(o)}return n}function SR(r){return r.length===0?[0,0]:[Bp(TK(r,function(e){return Bp(e)||0})),Cp(SK(r,function(e){return Cp(e)||0}))]}function TR(r){for(var e=AA(r),t=e[0].length,n=Y([Array(t).fill(0),Array(t).fill(0)],2),i=n[0],a=n[1],s=0;s<e.length;s+=1)for(var o=e[s],A=0;A<t;A+=1)o[A]>=0?(o[A]+=i[A],i[A]=o[A]):(o[A]+=a[A],a[A]=o[A]);return e}var khe=(function(r){Et(e,r);function e(t){return r.call(this,t,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(e.prototype,"rawData",{get:function(){var t=this.attributes.data;if(!t||(t==null?void 0:t.length)===0)return[[]];var n=AA(t);return je(n[0])?[n]:n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.isStack?TR(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseline",{get:function(){var t=this.scales.y,n=Y(t.getOptions().domain||[0,0],2),i=n[0],a=n[1];return a<0?t.map(a):t.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerShape",{get:function(){var t=this.attributes,n=t.width,i=t.height;return{width:n,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linesStyle",{get:function(){var t=this,n=this.attributes,i=n.type,a=n.isStack,s=n.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var o=vt(this.attributes,"area"),A=vt(this.attributes,"line"),l=this.containerShape.width,c=this.data;if(c[0].length===0)return{lines:[],areas:[]};var u=this.scales,h=u.x,g=u.y,p=She(c,{x:h,y:g}),v=[];if(o){var m=this.baseline;a?v=s?Fhe(p,l,m):Mhe(p,l,m):v=The(p,s,l,m)}return{lines:p.map(function(w,b){return Ee({stroke:t.getColor(b),d:s?hv(w):eh(w)},A)}),areas:v.map(function(w,b){return Ee({d:w,fill:t.getColor(b)},o)})}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnsStyle",{get:function(){var t=this,n=vt(this.attributes,"column"),i=this.attributes,a=i.isStack,s=i.type,o=i.scale;if(s!=="column")throw new Error("columnsStyle can only be used in column type");var A=this.containerShape.height,l=this.rawData;if(!l)return{columns:[]};a&&(l=TR(l));var c=this.createScales(l),u=c.x,h=c.y,g=Y(SR(l),2),p=g[0],v=g[1],m=new kd({domain:[0,v-(p>0?0:p)],range:[0,A*o]}),w=u.getBandWidth(),b=this.rawData;return{columns:l.map(function(_,C){return _.map(function(M,F){var k=w/l.length,P=function(){return{x:u.map(F)+k*C,y:M>=0?h.map(M):h.map(0),width:k,height:m.map(Math.abs(M))}},N=function(){return{x:u.map(F),y:h.map(M),width:w,height:m.map(b[C][F])}};return Ee(Ee({fill:t.getColor(C)},n),a?N():P())})})}},enumerable:!1,configurable:!0}),e.prototype.render=function(t,n){Ede(n,".container","rect").attr("className","container").node();var i=t.type,a=t.x,s=t.y,o="spark".concat(i),A=Ee({x:a,y:s},i==="line"?this.linesStyle:this.columnsStyle);Ye(n).selectAll(".spark").data([i]).join(function(l){return l.append(function(c){return c==="line"?new xhe({className:o,style:A}):new Bhe({className:o,style:A})}).attr("className","spark ".concat(o))},function(l){return l.update(A)},function(l){return l.remove()})},e.prototype.getColor=function(t){var n=this.attributes.color;return Ki(n)?n[t%n.length]:$e(n)?n.call(null,t):n},e.prototype.createScales=function(t){var n,i,a=this.attributes,s=a.type,o=a.scale,A=a.range,l=A===void 0?[]:A,c=a.spacing,u=this.containerShape,h=u.width,g=u.height,p=Y(SR(t),2),v=p[0],m=p[1],w=new kd({domain:[(n=l[0])!==null&&n!==void 0?n:v,(i=l[1])!==null&&i!==void 0?i:m],range:[g,g*(1-o)]});return s==="line"?{type:s,x:new kd({domain:[0,t[0].length-1],range:[0,h]}),y:w}:{type:s,x:new BS({domain:t[0].map(function(b,_){return _}),range:[0,h],paddingInner:c,paddingOuter:c/2,align:.5}),y:w}},e.tag="sparkline",e})(Un);function Ihe(r){return typeof r=="boolean"?!1:"enter"in r&&"update"in r&&"exit"in r}function MR(r){if(!r)return{enter:!1,update:!1,exit:!1};var e=["enter","update","exit"],t=Object.fromEntries(Object.entries(r).filter(function(n){var i=Y(n,1),a=i[0];return!e.includes(a)}));return Object.fromEntries(e.map(function(n){return Ihe(r)?r[n]===!1?[n,!1]:[n,Ee(Ee({},r[n]),t)]:[n,t]}))}function ru(r,e){r?r.finished.then(e):e()}function Phe(r,e){r.length===0?e():Promise.all(r.map(function(t){return t==null?void 0:t.finished})).then(e)}function i8(r,e){"update"in r?r.update(e):r.attr(e)}function a8(r,e,t){if(e.length===0)return null;if(!t){var n=e.slice(-1)[0];return i8(r,{style:n}),null}return r.animate(e,t)}function Ohe(r,e){return!(r.nodeName!=="text"||e.nodeName!=="text"||r.attributes.text!==e.attributes.text)}function Lhe(r,e,t,n){if(n===void 0&&(n="destroy"),Ohe(r,e))return r.remove(),[null];var i=function(){n==="destroy"?r.destroy():n==="hide"&&Xa(r),e.isVisible()&&Bh(e)};if(!t)return i(),[null];var a=t.duration,s=a===void 0?0:a,o=t.delay,A=o===void 0?0:o,l=Math.ceil(+s/2),c=+s/4,u=Y(r.getGeometryBounds().center,2),h=u[0],g=u[1],p=Y(e.getGeometryBounds().center,2),v=p[0],m=p[1],w=Y([(h+v)/2-h,(g+m)/2-g],2),b=w[0],_=w[1],C=r.style.opacity,M=C===void 0?1:C,F=e.style.opacity,k=F===void 0?1:F,P=r.style.transform||"",N=e.style.transform||"",D=r.animate([{opacity:M,transform:"translate(0, 0) ".concat(P)},{opacity:0,transform:"translate(".concat(b,", ").concat(_,") ").concat(P)}],Ee(Ee({fill:"both"},t),{duration:A+l+c})),Q=e.animate([{opacity:0,transform:"translate(".concat(-b,", ").concat(-_,") ").concat(N),offset:.01},{opacity:k,transform:"translate(0, 0) ".concat(N)}],Ee(Ee({fill:"both"},t),{duration:l+c,delay:A+l-c}));return ru(Q,i),[D,Q]}function Za(r,e,t){var n={},i={};return Object.entries(e).forEach(function(a){var s=Y(a,2),o=s[0],A=s[1];if(!it(A)){var l=r.style[o]||r.parsedStyle[o]||0;l!==A&&(n[o]=l,i[o]=A)}}),t?a8(r,[n,i],Ee({fill:"both"},t)):(i8(r,i),null)}function Um(r,e){return r.style.opacity||(r.style.opacity=1),Za(r,{opacity:0},e)}var s8={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},o8={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},A8={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},gs=as({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),Ca=as({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),Nhe=(function(r){Et(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,n){var i=t.x,a=t.y,s=t.size,o=s===void 0?10:s,A=t.radius,l=A===void 0?o/4:A,c=t.orientation,u=t.classNamePrefix,h=Sn(t,["x","y","size","radius","orientation","classNamePrefix"]),g=o,p=g*2.4,v=u?"".concat(Ca.iconRect.name," ").concat(u,"handle-icon-rect"):Ca.iconRect.name,m=function(F){return u?"".concat(Ca.iconLine,"-").concat(F," ").concat(u,"handle-icon-line"):"".concat(Ca.iconLine,"-").concat(F)},w=Ye(n).maybeAppendByClassName(Ca.iconRect,"rect").attr("className",v).styles(Ee(Ee({},h),{width:g,height:p,radius:l,x:i-g/2,y:a-p/2,transformOrigin:"center"})),b=i+1/3*g-g/2,_=i+2/3*g-g/2,C=a+1/4*p-p/2,M=a+3/4*p-p/2;w.maybeAppendByClassName("".concat(Ca.iconLine,"-1"),"line").attr("className",m(1)).styles(Ee({x1:b,x2:b,y1:C,y2:M},h)),w.maybeAppendByClassName("".concat(Ca.iconLine,"-2"),"line").attr("className",m(2)).styles(Ee({x1:_,x2:_,y1:C,y2:M},h)),c==="vertical"&&(w.node().style.transform="rotate(90)")},e})(Un),Dhe=(function(r){Et(e,r);function e(t){return r.call(this,t,A8)||this}return e.prototype.renderLabel=function(t){var n=this,i=this.attributes,a=i.x,s=i.y,o=i.showLabel,A=vt(this.attributes,"label"),l=A.x,c=l===void 0?0:l,u=A.y,h=u===void 0?0:u,g=A.transform,p=A.transformOrigin,v=Sn(A,["x","y","transform","transformOrigin"]),m=Y(oo(v,[]),2),w=m[0],b=m[1],_=Ye(t).maybeAppendByClassName(Ca.labelGroup,"g").styles(b),C=Ee(Ee({},o8),w),M=C.text,F=Sn(C,["text"]);zi(!!o,_,function(k){n.label=k.maybeAppendByClassName(Ca.label,"text").styles(Ee(Ee({},F),{x:a+c,y:s+h,transform:g,transformOrigin:p,text:"".concat(M)})),n.label.on("mousedown",function(P){P.stopPropagation()}),n.label.on("touchstart",function(P){P.stopPropagation()})})},e.prototype.renderIcon=function(t){var n=this.attributes,i=n.x,a=n.y,s=n.orientation,o=n.type,A=n.classNamePrefix,l=Ee(Ee({x:i,y:a,orientation:s,classNamePrefix:A},s8),vt(this.attributes,"icon")),c=this.attributes.iconShape,u=c===void 0?function(){return new Nhe({style:l})}:c,h=Ye(t).maybeAppendByClassName(Ca.iconGroup,"g");h.selectAll(Ca.icon.class).data([u]).join(function(g){return g.append(typeof u=="string"?u:function(){return u(o)}).attr("className",Ca.icon.name)},function(g){return g.update(l)},function(g){return g.remove()})},e.prototype.render=function(t,n){this.renderIcon(n),this.renderLabel(n)},e})(Un),Rhe=(function(r){Et(e,r);function e(t){var n=r.call(this,t,Ee(Ee(Ee({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},_c(A8,"handle")),_c(s8,"handleIcon")),_c(o8,"handleLabel")))||this;return n.range=[0,1],n.onDragStart=function(i){return function(a){a.stopPropagation(),n.target=i,n.prevPos=n.getOrientVal(sR(a));var s=n.availableSpace,o=s.x,A=s.y,l=n.getBBox(),c=l.x,u=l.y;n.selectionStartPos=n.getRatio(n.prevPos-n.getOrientVal([o,A])-n.getOrientVal([+c,+u])),n.selectionWidth=0,document.addEventListener("pointermove",n.onDragging),document.addEventListener("pointerup",n.onDragEnd)}},n.onDragging=function(i){var a=n.attributes,s=a.slidable,o=a.brushable,A=a.type;i.stopPropagation();var l=n.getOrientVal(sR(i)),c=l-n.prevPos;if(c){var u=n.getRatio(c);switch(n.target){case"start":s&&n.setValuesOffset(u);break;case"end":s&&n.setValuesOffset(0,u);break;case"selection":s&&n.setValuesOffset(u,u);break;case"track":if(!o)return;n.selectionWidth+=u,A==="range"?n.innerSetValues([n.selectionStartPos,n.selectionStartPos+n.selectionWidth].sort(),!0):n.innerSetValues([0,n.selectionStartPos+n.selectionWidth],!0);break}n.prevPos=l}},n.onDragEnd=function(){document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointerup",n.onDragEnd),n.target="",n.updateHandlesPosition(!1)},n.onValueChange=function(i){var a=n.attributes,s=a.onChange,o=a.type,A=o==="range"?i:i[1],l=o==="range"?n.getValues():n.getValues()[1],c=new cr("valuechange",{detail:{oldValue:A,value:l}});n.dispatchEvent(c),s==null||s(l)},n.selectionStartPos=0,n.selectionWidth=0,n.prevPos=0,n.target="",n}return Object.defineProperty(e.prototype,"values",{get:function(){return this.attributes.values},set:function(t){this.attributes.values=this.clampValues(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparklineStyle",{get:function(){var t=this.attributes.orientation;if(t!=="horizontal")return null;var n=vt(this.attributes,"sparkline");return Ee(Ee({zIndex:0},this.availableSpace),n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var t=this.attributes,n=t.trackLength,i=t.trackSize,a=Y(this.getOrientVal([[n,i],[i,n]]),2),s=a[0],o=a[1];return{width:s,height:o}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes;t.x,t.y;var n=t.padding,i=Y($r(n),4),a=i[0],s=i[1],o=i[2],A=i[3],l=this.shape,c=l.width,u=l.height;return{x:A,y:a,width:c-(A+s),height:u-(a+o)}},enumerable:!1,configurable:!0}),e.prototype.getValues=function(){return this.values},e.prototype.setValues=function(t,n){t===void 0&&(t=[0,0]),n===void 0&&(n=!1),this.attributes.values=t;var i=n===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},e.prototype.updateSelectionArea=function(t){var n=this.calcSelectionArea();this.foregroundGroup.selectAll(gs.selection.class).each(function(i,a){Za(this,n[a],t)})},e.prototype.updateHandlesPosition=function(t){this.attributes.showHandle&&(this.startHandle&&Za(this.startHandle,this.getHandleStyle("start"),t),this.endHandle&&Za(this.endHandle,this.getHandleStyle("end"),t))},e.prototype.innerSetValues=function(t,n){t===void 0&&(t=[0,0]),n===void 0&&(n=!1);var i=this.values,a=this.clampValues(t);this.attributes.values=a,this.setValues(a),n&&this.onValueChange(i)},e.prototype.renderTrack=function(t){var n=this.attributes,i=n.x,a=n.y,s=vt(this.attributes,"track");this.trackShape=Ye(t).maybeAppendByClassName(gs.track,"rect").styles(Ee(Ee({x:i,y:a},this.shape),s))},e.prototype.renderBrushArea=function(t){var n=this.attributes,i=n.x,a=n.y,s=n.brushable;this.brushArea=Ye(t).maybeAppendByClassName(gs.brushArea,"rect").styles(Ee({x:i,y:a,fill:"transparent",cursor:s?"crosshair":"default"},this.shape))},e.prototype.renderSparkline=function(t){var n=this,i=this.attributes,a=i.x,s=i.y,o=i.orientation,A=Ye(t).maybeAppendByClassName(gs.sparklineGroup,"g");zi(o==="horizontal",A,function(l){var c=Ee(Ee({},n.sparklineStyle),{x:a,y:s});l.maybeAppendByClassName(gs.sparkline,function(){return new khe({style:c})}).update(c)})},e.prototype.renderHandles=function(){var t=this,n,i=this.attributes,a=i.showHandle,s=i.type,o=s==="range"?["start","end"]:["end"],A=a?o:[],l=this;(n=this.foregroundGroup)===null||n===void 0||n.selectAll(gs.handle.class).data(A.map(function(c){return{type:c}}),function(c){return c.type}).join(function(c){return c.append(function(u){var h=u.type;return new Dhe({style:t.getHandleStyle(h)})}).each(function(u){var h=u.type;this.attr("class","".concat(gs.handle.name," ").concat(h,"-handle"));var g="".concat(h,"Handle");l[g]=this,this.addEventListener("pointerdown",l.onDragStart(h))})},function(c){return c.each(function(u){var h=u.type;this.update(l.getHandleStyle(h))})},function(c){return c.each(function(u){var h=u.type,g="".concat(h,"Handle");l[g]=void 0}).remove()})},e.prototype.renderSelection=function(t){var n=this.attributes,i=n.x,a=n.y,s=n.type,o=n.selectionType;this.foregroundGroup=Ye(t).maybeAppendByClassName(gs.foreground,"g");var A=vt(this.attributes,"selection"),l=function(u){return u.style("visibility",function(h){return h.show?"visible":"hidden"}).style("cursor",function(h){return o==="select"?"grab":o==="invert"?"crosshair":"default"}).styles(Ee(Ee({},A),{transform:"translate(".concat(i,", ").concat(a,")")}))},c=this;this.foregroundGroup.selectAll(gs.selection.class).data(s==="value"?[]:this.calcSelectionArea().map(function(u,h){return{style:Ee({},u),index:h,show:o==="select"?h===1:h!==1}}),function(u){return u.index}).join(function(u){return u.append("rect").attr("className",gs.selection.name).call(l).each(function(h,g){var p=this;g===1?(c.selectionShape=Ye(this),this.on("pointerdown",function(v){p.attr("cursor","grabbing"),c.onDragStart("selection")(v)}),c.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),c.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),c.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){p.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){p.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){p.attr("cursor","pointer")})):this.on("pointerdown",c.onDragStart("track"))})},function(u){return u.call(l)},function(u){return u.remove()}),this.updateSelectionArea(!1),this.renderHandles()},e.prototype.render=function(t,n){this.renderTrack(n),this.renderSparkline(n),this.renderBrushArea(n),this.renderSelection(n)},e.prototype.clampValues=function(t,n){var i;n===void 0&&(n=4);var a=Y(this.range,2),s=a[0],o=a[1],A=Y(this.getValues().map(function(m){return oR(m,n)}),2),l=A[0],c=A[1],u=Array.isArray(t)?t:[l,t??c],h=Y((u||[l,c]).map(function(m){return oR(m,n)}),2),g=h[0],p=h[1];if(this.attributes.type==="value")return[0,Rn(p,s,o)];g>p&&(i=Y([p,g],2),g=i[0],p=i[1]);var v=p-g;return v>o-s?[s,o]:g<s?l===s&&c===p?[s,p]:[s,v+s]:p>o?c===o&&l===g?[g,o]:[o-v,o]:[g,p]},e.prototype.calcSelectionArea=function(t){var n=Y(this.clampValues(t),2),i=n[0],a=n[1],s=this.availableSpace,o=s.x,A=s.y,l=s.width,c=s.height;return this.getOrientVal([[{y:A,height:c,x:o,width:i*l},{y:A,height:c,x:i*l+o,width:(a-i)*l},{y:A,height:c,x:a*l,width:(1-a)*l}],[{x:o,width:l,y:A,height:i*c},{x:o,width:l,y:i*c+A,height:(a-i)*c},{x:o,width:l,y:a*c,height:(1-a)*c}]])},e.prototype.calcHandlePosition=function(t){var n=this.attributes.handleIconOffset,i=this.availableSpace,a=i.x,s=i.y,o=i.width,A=i.height,l=Y(this.clampValues(),2),c=l[0],u=l[1],h=t==="start"?-n:n,g=(t==="start"?c:u)*this.getOrientVal([o,A])+h;return{x:a+this.getOrientVal([g,o/2]),y:s+this.getOrientVal([A/2,g])}},e.prototype.inferTextStyle=function(t){var n=this.attributes.orientation;return n==="horizontal"?{}:t==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:t==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},e.prototype.calcHandleText=function(t){var n,i=this.attributes,a=i.type,s=i.orientation,o=i.formatter,A=i.autoFitLabel,l=vt(this.attributes,"handle"),c=vt(l,"label"),u=l.spacing,h=this.getHandleSize(),g=this.clampValues(),p=t==="start"?g[0]:g[1],v=o(p),m=new yS({style:Ee(Ee(Ee({},c),this.inferTextStyle(t)),{text:v})}),w=m.getBBox(),b=w.width,_=w.height;if(m.destroy(),!A){if(a==="value")return{text:v,x:0,y:-_-u};var C=u+h+(s==="horizontal"?b/2:0);return n={text:v},n[s==="horizontal"?"x":"y"]=t==="start"?-C:C,n}var M=0,F=0,k=this.availableSpace,P=k.width,N=k.height,D=this.calcSelectionArea()[1],Q=D.x,H=D.y,j=D.width,q=D.height,J=u+h;if(s==="horizontal"){var ce=J+b/2;if(t==="start"){var se=Q-J-b;M=se>0?-ce:ce}else{var W=P-Q-j-J>b;M=W?ce:-ce}}else{var le=J,fe=_+J;t==="start"?F=H-h>_?-fe:le:F=N-(H+q)-h>_?fe:-le}return{x:M,y:F,text:v}},e.prototype.getHandleLabelStyle=function(t){var n=vt(this.attributes,"handleLabel");return Ee(Ee(Ee({},n),this.calcHandleText(t)),this.inferTextStyle(t))},e.prototype.getHandleIconStyle=function(){var t=this.attributes.handleIconShape,n=vt(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),a=this.getHandleSize();return Ee({cursor:i,shape:t,size:a},n)},e.prototype.getHandleStyle=function(t){var n=this.attributes,i=n.x,a=n.y,s=n.showLabel,o=n.showLabelOnInteraction,A=n.orientation,l=this.calcHandlePosition(t),c=l.x,u=l.y,h=this.calcHandleText(t),g=s;return!s&&o&&(this.target?g=!0:g=!1),Ee(Ee(Ee({},_c(this.getHandleIconStyle(),"icon")),_c(Ee(Ee({},this.getHandleLabelStyle(t)),h),"label")),{transform:"translate(".concat(c+i,", ").concat(u+a,")"),orientation:A,showLabel:g,type:t,zIndex:3})},e.prototype.getHandleSize=function(){var t=this.attributes,n=t.handleIconSize,i=t.width,a=t.height;return n||Math.floor((this.getOrientVal([+a,+i])+4)/2.4)},e.prototype.getOrientVal=function(t){var n=Y(t,2),i=n[0],a=n[1],s=this.attributes.orientation;return s==="horizontal"?i:a},e.prototype.setValuesOffset=function(t,n){n===void 0&&(n=0);var i=this.attributes.type,a=Y(this.getValues(),2),s=a[0],o=a[1],A=i==="range"?t:0,l=[s+A,o+n].sort();this.innerSetValues(l,!0)},e.prototype.getRatio=function(t){var n=this.availableSpace,i=n.width,a=n.height;return t/this.getOrientVal([i,a])},e.prototype.dispatchCustomEvent=function(t,n,i){var a=this;t.on(n,function(s){s.stopPropagation(),a.dispatchEvent(new cr(i,{detail:s}))})},e.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var t=this.brushArea;this.dispatchCustomEvent(t,"click","trackClick"),this.dispatchCustomEvent(t,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(t,"pointerleave","trackMouseleave"),t.on("pointerdown",this.onDragStart("track"))},e.prototype.onScroll=function(t){var n=this.attributes.scrollable;if(n){var i=t.deltaX,a=t.deltaY,s=a||i,o=this.getRatio(s);this.setValuesOffset(o,o)}},e.tag="slider",e})(Un),qt={gridGroup:"grid-group",mainGroup:"main-group",lineGroup:"line-group",tickGroup:"tick-group",labelGroup:"label-group",titleGroup:"title-group",grid:"grid",line:"line",lineFirst:"line-first",lineSecond:"line-second",tick:"tick",tickItem:"tick-item",label:"label",labelItem:"label-item",title:"title"},SS={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new ci({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]};qr({},SS,{style:{type:"arc"}});qr({},SS,{style:{}});var gt=as({mainGroup:qt.mainGroup,gridGroup:qt.gridGroup,grid:qt.grid,lineGroup:qt.lineGroup,line:qt.line,tickGroup:qt.tickGroup,tick:qt.tick,tickItem:qt.tickItem,labelGroup:qt.labelGroup,label:qt.label,labelItem:qt.labelItem,titleGroup:qt.titleGroup,title:qt.title,lineFirst:qt.lineFirst,lineSecond:qt.lineSecond},"axis"),Gc=as({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function l8(r){return r.reduce(function(e,t,n){return e.push(Ze([n===0?"M":"L"],Y(t),!1)),e},[])}function Qhe(r,e,t){var n=e.connect,i=n===void 0?"line":n,a=e.center;if(i==="line")return l8(r);if(!a)return[];var s=Jd(r[0],a),o=t?0:1;return r.reduce(function(A,l,c){return c===0?A.push(Ze(["M"],Y(l),!1)):A.push(Ze(["A",s,s,0,0,o],Y(l),!1)),A},[])}function Vx(r,e,t){return e.type==="surround"?Qhe(r,e,t):l8(r)}function Uhe(r,e,t){var n=t.type,i=t.connect,a=t.center,s=t.closed,o=s?[["Z"]]:[],A=Y([Vx(r,t),Vx(e.slice().reverse(),t,!0)],2),l=A[0],c=A[1],u=Y([r[0],e.slice(-1)[0]],2),h=u[0],g=u[1],p=function(b,_){return[l,b,c,_,o].flat()};if(i==="line"||n==="surround")return p([Ze(["L"],Y(g),!1)],[Ze(["L"],Y(h),!1)]);if(!a)throw new Error("Arc grid need to specified center");var v=Y([Jd(g,a),Jd(h,a)],2),m=v[0],w=v[1];return p([Ze(["A",m,m,0,0,1],Y(g),!1),Ze(["L"],Y(g),!1)],[Ze(["A",w,w,0,0,0],Y(h),!1),Ze(["L"],Y(h),!1)])}function Hhe(r,e,t,n){var i=t.animate,a=t.isBillboard,s=e.map(function(o,A){return{id:o.id||"grid-line-".concat(A),d:Vx(o.points,t)}});return r.selectAll(Gc.line.class).data(s,function(o){return o.id}).join(function(o){return o.append("path").each(function(A,l){var c=ji(AR(Ee({d:A.d},n)),[A,l,s]);this.attr(Ee({class:Gc.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:a},c))})},function(o){return o.transition(function(A,l){var c=ji(AR(Ee({d:A.d},n)),[A,l,s]);return Za(this,c,i.update)})},function(o){return o.transition(function(){var A=this,l=Um(this,i.exit);return ru(l,function(){return A.remove()}),l})}).transitions()}function zhe(r,e,t){var n=t.animate,i=t.connect,a=t.areaFill;if(e.length<2||!a||!i)return[];for(var s=Array.isArray(a)?a:[a,"transparent"],o=function(p){return s[p%s.length]},A=[],l=0;l<e.length-1;l++){var c=Y([e[l].points,e[l+1].points],2),u=c[0],h=c[1],g=Uhe(u,h,t);A.push({d:g,fill:o(l)})}return r.selectAll(Gc.region.class).data(A,function(p,v){return v}).join(function(p){return p.append("path").each(function(v,m){var w=ji(v,[v,m,A]);this.attr(w)}).attr("className",Gc.region.name)},function(p){return p.transition(function(v,m){var w=ji(v,[v,m,A]);return Za(this,w,n.update)})},function(p){return p.transition(function(){var v=this,m=Um(this,n.exit);return ru(m,function(){return v.remove()}),m})}).transitions()}function jhe(r){var e=r.data,t=e===void 0?[]:e,n=r.closed;return n?t.map(function(i){var a=i.points,s=Y(a,1),o=s[0];return Ee(Ee({},i),{points:Ze(Ze([],Y(a),!1),[o],!1)})}):t}var Khe=(function(r){Et(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,n){t.type,t.center,t.areaFill,t.closed;var i=Sn(t,["type","center","areaFill","closed"]),a=jhe(t),s=Ye(n).maybeAppendByClassName(Gc.lineGroup,"g"),o=Ye(n).maybeAppendByClassName(Gc.regionGroup,"g"),A=Hhe(s,a,t,i),l=zhe(o,a,t);return Ze(Ze([],Y(A),!1),Y(l),!1)},e})(Un);function c8(r,e){return Object.fromEntries(Object.entries(r).map(function(t){var n=Y(t,2),i=n[0],a=n[1];return[i,ji(a,e)]}))}function TS(r,e){return e&&$e(e)?r.filter(e):r}function u8(r,e){var t=e.startAngle,n=e.endAngle;return(n-t)*r+t}function Hm(r,e){if(e.type==="linear"){var t=Y(e.startPos,2),n=t[0],i=t[1],a=Y(e.endPos,2),s=a[0],o=a[1],A=Y([s-n,o-i],2),l=A[0],c=A[1];return Z5([l,c])}var u=Kc(u8(r,e));return[-Math.sin(u),Math.cos(u)]}function MS(r,e,t){var n=Hm(r,t);return fde(n,e!=="positive")}function iu(r,e){return MS(r,e.labelDirection,e)}function vp(r,e,t){return t?"".concat(r," ").concat(t,"axis-").concat(e):r}function oa(r,e,t,n){return n&&r.attr("className",vp(e.name,t,n)),r}function Ghe(r,e){var t=Y(e.startPos,2),n=t[0],i=t[1],a=Y(e.endPos,2),s=a[0],o=a[1],A=Y([s-n,o-i],2),l=A[0],c=A[1];return[n+l*r,i+c*r]}function Vhe(r,e){var t=e.radius,n=Y(e.center,2),i=n[0],a=n[1],s=Kc(u8(r,e));return[i+t*Math.cos(s),a+t*Math.sin(s)]}function zm(r,e){return e.type==="linear"?Ghe(r,e):Vhe(r,e)}function FS(r){return Hm(0,r)[1]===0}function d8(r){return Hm(0,r)[0]===0}function h8(r,e){return e-r===360}function FR(r,e,t,n,i){var a=e-r,s=Y([i,i],2),o=s[0],A=s[1],l=Y([Kc(r),Kc(e)],2),c=l[0],u=l[1],h=function(N){return[t+i*Math.cos(N),n+i*Math.sin(N)]},g=Y(h(c),2),p=g[0],v=g[1],m=Y(h(u),2),w=m[0],b=m[1];if(h8(r,e)){var _=(u+c)/2,C=Y(h(_),2),M=C[0],F=C[1];return[["M",p,v],["A",o,A,0,1,0,M,F],["A",o,A,0,1,0,w,b]]}var k=a>180?1:0,P=r>e?0:1;return"M".concat(p,",").concat(v,",A").concat(o,",").concat(A,",0,").concat(k,",").concat(P,",").concat(w,",").concat(b)}function qhe(r){var e=r.attributes,t=e.startAngle,n=e.endAngle,i=e.center,a=e.radius;return Ze(Ze([t,n],Y(i),!1),[a],!1)}function Whe(r,e,t,n){var i=e.startAngle,a=e.endAngle,s=e.center,o=e.radius,A=e.classNamePrefix;return r.selectAll(gt.line.class).data([{d:FR.apply(void 0,Ze(Ze([i,a],Y(s),!1),[o],!1))}],function(l,c){return c}).join(function(l){var c=l.append("path").attr("className",gt.line.name).styles(e).styles({d:function(u){return u.d}});return oa(c,gt.line,qt.line,A),c},function(l){return l.transition(function(){var c=this,u=hde(this,qhe(this),Ze(Ze([i,a],Y(s),!1),[o],!1),n.update);if(u){var h=function(){var g=jr(c.attributes,"__keyframe_data__");c.style.d=FR.apply(void 0,Ze([],Y(g),!1))};u.onframe=h,u.onfinish=h}return u}).styles(e)},function(l){return l.remove()}).styles(t).transitions()}function $he(r,e){e.truncRange,e.truncShape,e.lineExtension}function Yhe(r,e,t){t===void 0&&(t=[0,0]);var n=Y([r,e,t],3),i=Y(n[0],2),a=i[0],s=i[1],o=Y(n[1],2),A=o[0],l=o[1],c=Y(n[2],2),u=c[0],h=c[1],g=Y([A-a,l-s],2),p=g[0],v=g[1],m=Math.sqrt(Math.pow(p,2)+Math.pow(v,2)),w=Y([-u/m,h/m],2),b=w[0],_=w[1];return[b*p,b*v,_*p,_*v]}function kR(r){var e=Y(r,2),t=Y(e[0],2),n=t[0],i=t[1],a=Y(e[1],2),s=a[0],o=a[1];return{x1:n,y1:i,x2:s,y2:o}}function Xhe(r,e,t,n){var i=e.showTrunc,a=e.startPos,s=e.endPos,o=e.truncRange,A=e.lineExtension,l=e.classNamePrefix,c=Y([a,s],2),u=Y(c[0],2),h=u[0],g=u[1],p=Y(c[1],2),v=p[0],m=p[1],w=Y(A?Yhe(a,s,A):new Array(4).fill(0),4),b=w[0],_=w[1],C=w[2],M=w[3],F=function(le){return r.selectAll(gt.line.class).data(le,function(fe,X){return X}).join(function(fe){var X=fe.append("line").styles(t).transition(function(ne){return Za(this,kR(ne.line),!1)});return X.attr("className",function(ne){if(!l)return"".concat(gt.line.name," ").concat(ne.className);var Ie=vp(gt.line.name,qt.line,l);if(ne.className===gt.lineFirst.name){var te=vp(gt.lineFirst.name,qt.lineFirst,l);return"".concat(Ie," ").concat(te)}if(ne.className===gt.lineSecond.name){var te=vp(gt.lineSecond.name,qt.lineSecond,l);return"".concat(Ie," ").concat(te)}return Ie}),X},function(fe){return fe.styles(t).transition(function(X){var ne=X.line;return Za(this,kR(ne),n.update)})},function(fe){return fe.remove()}).transitions()};if(!i||!o)return F([{line:[[h+b,g+_],[v+C,m+M]],className:gt.line.name}]);var k=Y(o,2),P=k[0],N=k[1],D=v-h,Q=m-g,H=Y([h+D*P,g+Q*P],2),j=H[0],q=H[1],J=Y([h+D*N,g+Q*N],2),ce=J[0],se=J[1],W=F([{line:[[h+b,g+_],[j,q]],className:gt.lineFirst.name},{line:[[ce,se],[v+C,m+M]],className:gt.lineSecond.name}]);return $he(r,e),W}function Zhe(r,e,t,n){var i=t.showArrow,a=t.showTrunc,s=t.lineArrow,o=t.lineArrowOffset,A=t.lineArrowSize,l;if(e==="arc"?l=r.select(gt.line.class):a?l=r.select(gt.lineSecond.class):l=r.select(gt.line.class),!i||!s||t.type==="arc"&&h8(t.startAngle,t.endAngle)){var c=l.node();c&&(c.style.markerEnd=void 0);return}var u=so(s);u.attr(n),bS(u,A),l.style("markerEnd",u).style("markerEndOffset",-o)}function Jhe(r,e,t){var n=e.type,i,a=vt(e,"line");return n==="linear"?i=Xhe(r,e,Kx(a,"arrow"),t):i=Whe(r,e,Kx(a,"arrow"),t),Zhe(r,n,e,a),i}function efe(r,e){return MS(r,e.gridDirection,e)}function f8(r){var e=r.type,t=r.gridCenter;return e==="linear"?t:t||r.center}function tfe(r,e){var t=e.gridLength;return r.map(function(n,i){var a=n.value,s=Y(zm(a,e),2),o=s[0],A=s[1],l=Y(Zs(efe(a,e),t),2),c=l[0],u=l[1];return{id:i,points:[[o,A],[o+c,A+u]]}})}function nfe(r,e){var t=e.gridControlAngles,n=f8(e);if(!n)throw new Error("grid center is not provide");if(r.length<2)throw new Error("Invalid grid data");if(!t||t.length===0)throw new Error("Invalid gridControlAngles");var i=Y(n,2),a=i[0],s=i[1];return r.map(function(o,A){var l=o.value,c=Y(zm(l,e),2),u=c[0],h=c[1],g=Y([u-a,h-s],2),p=g[0],v=g[1],m=[];return t.forEach(function(w){var b=Kc(w),_=Y([Math.cos(b),Math.sin(b)],2),C=_[0],M=_[1],F=p*C-v*M+a,k=p*M+v*C+s;m.push([F,k])}),{points:m,id:A}})}function rfe(r,e,t,n){var i=t.classNamePrefix,a=vt(t,"grid"),s=a.type,o=a.areaFill,A=f8(t),l=TS(e,t.gridFilter),c=s==="segment"?tfe(l,t):nfe(l,t),u=Ee(Ee({},a),{center:A,areaFill:$e(o)?l.map(function(h,g){return ji(o,[h,g,l])}):o,animate:n,data:c});return r.selectAll(gt.grid.class).data([1]).join(function(h){var g=h.append(function(){return new Khe({style:u})}).attr("className",gt.grid.name);return oa(g,gt.grid,qt.grid,i),g},function(h){return h.transition(function(){return this.update(u)})},function(h){return h.remove()}).transitions()}var qx=(function(){function r(e,t,n,i){this.set(e,t,n,i)}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),r.prototype.rotatedPoints=function(e,t,n){var i=this,a=i.x1,s=i.y1,o=i.x2,A=i.y2,l=Math.cos(e),c=Math.sin(e),u=t-t*l+n*c,h=n-t*c-n*l,g=[[l*a-c*A+u,c*a+l*A+h],[l*o-c*A+u,c*o+l*A+h],[l*a-c*s+u,c*a+l*s+h],[l*o-c*s+u,c*o+l*s+h]];return g},r.prototype.set=function(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},r.prototype.defined=function(e){return this[e]!==Number.MAX_VALUE&&this[e]!==-Number.MAX_VALUE},r})();function Wx(r,e){var t=r.getEulerAngles()||0;r.setEulerAngles(0);var n=r.getBounds(),i=Y(n.min,2),a=i[0],s=i[1],o=Y(n.max,2),A=o[0],l=o[1],c=r.getBBox(),u=c.width,h=c.height,g=h,p=0,v=0,m=a,w=s,b=Y5(r);if(b){g-=1.5;var _=b.style.textAlign,C=b.style.textBaseline;_==="center"?m=(a+A)/2:(_==="right"||_==="end")&&(m=A),C==="middle"?w=(s+l)/2:C==="bottom"&&(w=l)}var M=Y($r(e),4),F=M[0],k=F===void 0?0:F,P=M[1],N=P===void 0?0:P,D=M[2],Q=D===void 0?k:D,H=M[3],j=H===void 0?N:H,q=new qx((p+=a)-j,(v+=s)-k,p+u+N,v+g+Q);return r.setEulerAngles(t),q.rotatedPoints(Kc(t),m,w)}function wd(r,e){return e[0]<=Math.max(r[0][0],r[1][0])&&e[0]<=Math.min(r[0][0],r[1][0])&&e[1]<=Math.max(r[0][1],r[1][1])&&e[1]<=Math.min(r[0][1],r[1][1])}function bd(r,e,t){var n=(e[1]-r[1])*(t[0]-e[0])-(e[0]-r[0])*(t[1]-e[1]);return n===0?0:n<0?2:1}function ife(r,e){var t=bd(r[0],r[1],e[0]),n=bd(r[0],r[1],e[1]),i=bd(e[0],e[1],r[0]),a=bd(e[0],e[1],r[1]);return!!(t!==n&&i!==a||t===0&&wd(r,e[0])||n===0&&wd(r,e[1])||i===0&&wd(e,r[0])||a===0&&wd(e,r[1]))}function afe(r,e){var t=r.length;if(t<3)return!1;var n=[e,[9999,e[1]]],i=0,a=0;do{var s=[r[a],r[(a+1)%t]];if(ife(s,n)){if(bd(s[0],e,s[1])===0)return wd(s,e);i++}a=(a+1)%t}while(a!==0);return!!(i&1)}function sfe(r,e){return e.every(function(t){return afe(r,t)})}function ofe(r,e,t){var n=r.x1,i=r.x2,a=r.y1,s=r.y2,o=[[n,a],[i,a],[i,s],[n,s]],A=Wx(e,t);return sfe(o,A)}function Afe(r,e){var t=Y(r,4),n=t[0],i=t[1],a=t[2],s=t[3],o=Y(e,4),A=o[0],l=o[1],c=o[2],u=o[3],h=a-n,g=s-i,p=c-A,v=u-l,m=h*v-p*g;if(m===0)return!1;var w=m>0,b=n-A,_=i-l,C=h*_-g*b;if(C<0===w)return!1;var M=p*_-v*b;return!(M<0===w||C>m===w||M>m===w)}function lfe(r,e){var t=[[r[0],r[1],r[2],r[3]],[r[2],r[3],r[4],r[5]],[r[4],r[5],r[6],r[7]],[r[6],r[7],r[0],r[1]]];return t.some(function(n){return Afe(e,n)})}function cfe(r,e,t){var n,i,a=Wx(r,t).flat(1),s=Wx(e,t).flat(1),o=[[a[0],a[1],a[2],a[3]],[a[0],a[1],a[4],a[5]],[a[4],a[5],a[6],a[7]],[a[2],a[3],a[6],a[7]]];try{for(var A=rh(o),l=A.next();!l.done;l=A.next()){var c=l.value;if(lfe(s,c))return!0}}catch(u){n={error:u}}finally{try{l&&!l.done&&(i=A.return)&&i.call(A)}finally{if(n)throw n.error}}return!1}function ufe(r,e){var t=r.type,n=r.labelDirection,i=r.crossSize;if(!i)return!1;if(t==="arc"){var a=r.center,s=r.radius,o=Y(a,2),A=o[0],l=o[1],c=n==="negative"?0:i,u=-s-c,h=s+c,g=Y($r(e),4),p=g[0],v=g[1],m=g[2],w=g[3];return new qx(A+u-w,l+u-p,A+h+v,l+h+m)}var b=Y(r.startPos,2),_=b[0],C=b[1],M=Y(r.endPos,2),F=M[0],k=M[1],P=Y(d8(r)?[-e,0,e,0]:[0,e,0,-e],4),N=P[0],D=P[1],Q=P[2],H=P[3],j=iu(0,r),q=Zs(j,i),J=new qx(_,C,F,k);return J.x1+=H,J.y1+=N,J.x2+=D+q[0],J.y2+=Q+q[1],J}function jm(r,e,t){var n,i,a=e.crossPadding,s=new Set,o=null,A=ufe(e,a),l=function(p){return A?ofe(A,p):!0},c=function(p,v){return!p||!p.firstChild?!0:!cfe(p.firstChild,v.firstChild,$r(t))};try{for(var u=rh(r),h=u.next();!h.done;h=u.next()){var g=h.value;l(g)?!o||c(o,g)?o=g:(s.add(o),s.add(g)):s.add(g)}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return Array.from(s)}function yB(r,e){return e===void 0&&(e={}),it(r)?0:typeof r=="number"?r:Math.floor(sde(r,e))}function dfe(r,e,t,n){if(!(r.length<=0)){var i=e.suffix,a=i===void 0?"...":i,s=e.minLength,o=e.maxLength,A=o===void 0?1/0:o,l=e.step,c=l===void 0?" ":l,u=e.margin,h=u===void 0?[0,0,0,0]:u,g=$5(n.getTextShape(r[0])),p=yB(c,g),v=s?yB(s,g):p,m=yB(A,g);(it(m)||m===1/0)&&(m=Math.max.apply(null,r.map(function(F){return F.getBBox().width})));var w=r.slice(),b=Y(h,4);b[0],b[1],b[2],b[3];for(var _=function(F){if(w.forEach(function(k){n.ellipsis(n.getTextShape(k),F,a)}),w=jm(r,t,h),w.length<1)return{value:void 0}},C=m;C>v+p;C-=p){var M=_(C);if(typeof M=="object")return M.value}}}var hfe={parity:function(r,e){var t=e.seq,n=t===void 0?2:t;return r.filter(function(i,a){return a%n?(Xa(i),!1):!0})}},ffe=function(r){return r.filter(ade)};function gfe(r,e,t,n){var i=r.length,a=e.keepHeader,s=e.keepTail;if(!(i<=1||i===2&&a&&s)){var o=hfe.parity,A=function(_){return _.forEach(n.show),_},l=2,c=r.slice(),u=r.slice(),h=Math.min.apply(Math,Ze([1],Y(r.map(function(_){return _.getBBox().width})),!1));if(t.type==="linear"&&(FS(t)||d8(t))){var g=lR(r[0]).left,p=lR(r[i-1]).right,v=Math.abs(p-g)||1;l=Math.max(Math.floor(i*h/v),l)}var m,w;for(a&&(m=c.splice(0,1)[0]),s&&(w=c.splice(-1,1)[0],c.reverse()),A(c);l<r.length&&jm(ffe(w?Ze(Ze([w],Y(u),!1),[m],!1):Ze([m],Y(u),!1)),t,e==null?void 0:e.margin).length;){if(w&&!m&&l%2===0){var b=c.splice(0,1);b.forEach(n.hide)}else if(w&&m){var b=c.splice(0,1);b.forEach(n.hide)}u=o(A(c),{seq:l}),l++}}}function pfe(r,e,t,n){var i,a,s=e.optionalAngles,o=s===void 0?[0,45,90]:s,A=e.margin,l=e.recoverWhenFailed,c=l===void 0?!0:l,u=r.map(function(w){return w.getLocalEulerAngles()}),h=function(){return jm(r,t,A).length<1},g=function(w){return r.forEach(function(b,_){var C=Array.isArray(w)?w[_]:w;n.rotate(b,+C)})};try{for(var p=rh(o),v=p.next();!v.done;v=p.next()){var m=v.value;if(g(m),h())return}}catch(w){i={error:w}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}c&&g(u)}function vfe(r){var e=r.type,t=r.labelDirection;return e==="linear"&&FS(r)?t==="negative"?"bottom":"top":"middle"}function mfe(r,e,t,n,i){var a,s=e.maxLines,o=s===void 0?3:s,A=e.recoverWhenFailed,l=A===void 0?!0:A,c=e.margin,u=c===void 0?[0,0,0,0]:c,h=ji((a=e.wordWrapWidth)!==null&&a!==void 0?a:50,[i]),g=r.map(function(_){return _.attr("maxLines")||1}),p=Math.min.apply(Math,Ze([],Y(g),!1)),v=function(){return jm(r,t,u).length<1},m=vfe(t),w=function(_){return r.forEach(function(C,M){var F=Array.isArray(_)?_[M]:_;n.wrap(C,h,F,m)})};if(!(p>o)){if(t.type==="linear"&&FS(t)){if(w(o),v())return}else for(var b=p;b<=o;b++)if(w(b),v())return;l&&w(g)}}var yfe=new Map([["hide",gfe],["rotate",pfe],["ellipsis",dfe],["wrap",mfe]]);function wfe(r,e,t){return e.labelOverlap.length<1?!1:t==="hide"?!rde(r[0]):t==="rotate"?!r.some(function(n){var i;return!!(!((i=n.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):t==="ellipsis"||t==="wrap"?r.filter(function(n){return n.querySelector("text")}).length>=1:!0}function bfe(r,e,t,n){var i=e.labelOverlap,a=i===void 0?[]:i;a.length&&a.forEach(function(s){var o=s.type,A=yfe.get(o);wfe(r,e,o)&&(A==null||A(r,s,e,n,t))})}function _fe(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=function(n){return n==="positive"?-1:1};return r.reduce(function(n,i){return n*t(i)},1)}function IR(r){for(var e=r;e<0;)e+=360;return Math.round(e%360)}function $x(r,e){var t=Y(r,2),n=t[0],i=t[1],a=Y(e,2),s=a[0],o=a[1],A=Y([n*s+i*o,n*o-i*s],2),l=A[0],c=A[1];return Math.atan2(c,l)}function Efe(r){var e=(r+360)%180;return zr(e,-90,90)||(e+=180),e}function Cfe(r,e,t){var n,i=t.labelAlign,a=(n=e.style.transform)===null||n===void 0?void 0:n.includes("rotate");if(a)return e.getLocalEulerAngles();var s=0,o=iu(r.value,t),A=Hm(r.value,t);return i==="horizontal"?0:(i==="perpendicular"?s=$x([1,0],o):s=$x([A[0]<0?-1:1,0],A),Efe(q5(s)))}function g8(r,e,t){var n=t.type,i=t.labelAlign,a=iu(r,t),s=IR(e),o=IR(q5($x([1,0],a))),A="center",l="middle";return n==="linear"?[90,270].includes(o)&&s===0?(A="center",l=a[1]===1?"top":"bottom"):!(o%180)&&[90,270].includes(s)?A="center":o===0?(zr(s,0,90,!1,!0)||zr(s,0,90)||zr(s,270,360))&&(A="start"):o===90?zr(s,0,90,!1,!0)?A="start":(zr(s,90,180)||zr(s,270,360))&&(A="end"):o===270?zr(s,0,90,!1,!0)?A="end":(zr(s,90,180)||zr(s,270,360))&&(A="start"):o===180&&(s===90?A="start":(zr(s,0,90)||zr(s,270,360))&&(A="end")):i==="parallel"?zr(o,0,180,!0)?l="top":l="bottom":i==="horizontal"?zr(o,90,270,!1)?A="end":(zr(o,270,360,!1)||zr(o,0,90))&&(A="start"):i==="perpendicular"&&(zr(o,90,270)?A="end":A="start"),{textAlign:A,textBaseline:l}}function Bfe(r,e,t){e.setLocalEulerAngles(r);var n=e.__data__.value,i=g8(n,r,t),a=e.querySelector(gt.labelItem.class);a&&p8(a,i)}function PR(r,e,t){var n=t.showTick,i=t.tickLength,a=t.tickDirection,s=t.labelDirection,o=t.labelSpacing,A=e.indexOf(r),l=ji(o,[r,A,e]),c=Y([iu(r.value,t),_fe(s,a)],2),u=c[0],h=c[1],g=h===1?ji(n?i:0,[r,A,e]):0,p=Y(yd(Zs(u,l+g),zm(r.value,t)),2),v=p[0],m=p[1];return{x:v,y:m}}function xfe(r,e,t,n){var i=n.labelFormatter,a=$e(i)?function(){return so(ji(i,[r,e,t,iu(r.value,n)]))}:function(){return so(r.label||"")};return a}function Sfe(r,e,t,n){var i=n.labelRender,a=(jr(n,"endPos.0",400)-jr(n,"startPos.0",0))/t.length,s=$e(i)?ji(i,[r,e,t,iu(r.value,n)]):r.label||"",o=kde(s)||30;return function(){return Ade(s,{width:a,height:o})}}var Tfe={html:["fill"],text:[]};function p8(r,e){["text","html"].includes(r.nodeName)&&r.attr(Kx(e,Tfe[r.nodeName]))}function Mfe(r,e){bfe(this.node().childNodes,r,e,{hide:Xa,show:Bh,rotate:function(t,n){Bfe(+n,t,r)},ellipsis:function(t,n,i){t&&jx(t,n||1/0,i)},wrap:function(t,n,i){t&&ode(t,n,i)},getTextShape:function(t){return t.querySelector(gt.labelItem.class)}})}function OR(r,e,t,n,i){var a=t.indexOf(e),s=i.labelRender,o=i.classNamePrefix,A=Ye(r).append(s?Sfe(e,a,t,i):xfe(e,a,t,i)).attr("className",gt.labelItem.name).node();oa(Ye(A),gt.labelItem,qt.labelItem,o);var l=Y(oo(c8(n,[e,a,t])),2),c=l[0],u=l[1],h=u.transform,g=Sn(u,["transform"]);J5(A,h);var p=Cfe(e,A,i);if(A.getLocalEulerAngles()||A.setLocalEulerAngles(p),p8(A,Ee(Ee({},g8(e.value,p,i)),c)),A.nodeName==="html"){var v=A.getBBox(),m=A.style.x||0;A.attr("x",m-v.width/2)}return r.attr(g),A}function Ffe(r,e,t,n,i){var a=t.classNamePrefix,s=TS(e,t.labelFilter),o=vt(t,"label"),A,l=r.selectAll(gt.label.class).data(s,function(c,u){return u}).join(function(c){var u=c.append("g").attr("className",gt.label.name).transition(function(h){OR(this,h,e,o,t);var g=PR(h,e,t),p=g.x,v=g.y;return this.style.transform="translate(".concat(p,", ").concat(v,")"),null});return oa(u,gt.label,qt.label,a),u},function(c){return c.transition(function(u){var h=this.querySelector(gt.labelItem.class),g=OR(this,u,e,o,t),p=Lhe(h,g,n.update),v=PR(u,e,t),m=v.x,w=v.y,b=Za(this,{transform:"translate(".concat(m,", ").concat(w,")")},n.update);return Ze(Ze([],Y(p),!1),[b],!1)})},function(c){return A=c,c.transition(function(){var u=this,h=Um(this.childNodes[0],n.exit);return ru(h,function(){return Ye(u).remove()}),h}),A}).transitions();return Phe(l,function(){Mfe.call(r,t,i)}),l}function v8(r,e){return MS(r,e.tickDirection,e)}function kfe(r,e){var t=Y(r,2),n=t[0],i=t[1];return[[0,0],[n*e,i*e]]}function Ife(r,e,t,n,i){var a=i.tickLength,s=Y(kfe(n,ji(a,[r,e,t])),2),o=Y(s[0],2),A=o[0],l=o[1],c=Y(s[1],2),u=c[0],h=c[1];return{x1:A,x2:u,y1:l,y2:h}}function Pfe(r,e,t,n,i){var a=i.tickFormatter,s=i.classNamePrefix,o=v8(e.value,i),A="line";$e(a)&&(A=function(){return ji(a,[e,t,n,o])});var l=r.append(A).attr("className",gt.tickItem.name);return oa(l,gt.tickItem,qt.tickItem,s),l}function Ofe(r,e,t,n,i,a,s){var o=v8(r.value,a),A=Ife(r,e,t,o,a),l=A.x1,c=A.x2,u=A.y1,h=A.y2,g=Y(oo(c8(s,[r,e,t,o])),2),p=g[0],v=g[1];n.node().nodeName==="line"&&n.styles(Ee({x1:l,x2:c,y1:u,y2:h},p)),i.attr(v),n.styles(p)}function LR(r,e,t,n,i,a){var s=Pfe(Ye(this),r,e,t,n);Ofe(r,e,t,s,this,n,i);var o=Y(zm(r.value,n),2),A=o[0],l=o[1];return Za(this,{transform:"translate(".concat(A,", ").concat(l,")")},a)}function Lfe(r,e,t,n){var i=t.classNamePrefix,a=TS(e,t.tickFilter),s=vt(t,"tick");return r.selectAll(gt.tick.class).data(a,function(o){return o.id||o.label}).join(function(o){var A=o.append("g").attr("className",gt.tick.name).transition(function(l,c){return LR.call(this,l,c,a,t,s,!1)});return oa(A,gt.tick,qt.tick,i),A},function(o){return o.transition(function(A,l){return this.removeChildren(),LR.call(this,A,l,a,t,s,n.update)})},function(o){return o.transition(function(){var A=this,l=Um(this.childNodes[0],n.exit);return ru(l,function(){return A.remove()}),l})}).transitions()}function Nfe(r,e,t){var n=t.titlePosition,i=n===void 0?"lb":n,a=t.titleSpacing,s=Qm(i),o=r.node().getLocalBounds(),A=Y(o.min,2),l=A[0],c=A[1],u=Y(o.halfExtents,2),h=u[0],g=u[1],p=Y(e.node().getLocalBounds().halfExtents,2),v=p[0],m=p[1],w=Y([l+h,c+g],2),b=w[0],_=w[1],C=Y($r(a),4),M=C[0],F=C[1],k=C[2],P=C[3];if(["start","end"].includes(i)&&t.type==="linear"){var N=t.startPos,D=t.endPos,Q=Y(i==="start"?[N,D]:[D,N],2),H=Q[0],j=Q[1],q=Z5([-j[0]+H[0],-j[1]+H[1]]),J=Y(Zs(q,M),2),ce=J[0],se=J[1];return{x:H[0]+ce,y:H[1]+se}}return s.includes("t")&&(_-=g+m+M),s.includes("r")&&(b+=h+v+F),s.includes("l")&&(b-=h+v+P),s.includes("b")&&(_+=g+m+k),{x:b,y:_}}function Dfe(r,e,t){var n=r.getGeometryBounds().halfExtents,i=n[1]*2;if(e==="vertical"){if(t==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(t==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function NR(r,e,t,n,i){var a=vt(n,"title"),s=Y(oo(a),2),o=s[0],A=s[1],l=A.transform,c=A.transformOrigin,u=Sn(A,["transform","transformOrigin"]);e.styles(u);var h=l||Dfe(r.node(),o.direction,o.position);r.styles(Ee(Ee({},o),{transformOrigin:c})),J5(r.node(),h);var g=Nfe(Ye(t._offscreen||t.querySelector(gt.mainGroup.class)),e,n),p=g.x,v=g.y,m=Za(e.node(),{transform:"translate(".concat(p,", ").concat(v,")")},i);return m}function Rfe(r,e,t,n){var i=t.titleText,a=t.classNamePrefix;return r.selectAll(gt.title.class).data([{title:i}].filter(function(s){return!!s.title}),function(s,o){return s.title}).join(function(s){var o=s.append(function(){return so(i)}).attr("className",gt.title.name).transition(function(){return NR(Ye(this),r,e,t,n.enter)});return oa(o,gt.title,qt.title,a),o},function(s){return s.transition(function(){return NR(Ye(this),r,e,t,n.update)})},function(s){return s.remove()}).transitions()}function DR(r,e,t,n){var i=r.showLine,a=r.showTick,s=r.showLabel,o=r.classNamePrefix,A=e.maybeAppendByClassName(gt.lineGroup,"g");oa(A,gt.lineGroup,qt.lineGroup,o);var l=zi(i,A,function(p){return Jhe(p,r,n)})||[],c=e.maybeAppendByClassName(gt.tickGroup,"g");oa(c,gt.tickGroup,qt.tickGroup,o);var u=zi(a,c,function(p){return Lfe(p,t,r,n)})||[],h=e.maybeAppendByClassName(gt.labelGroup,"g");oa(h,gt.labelGroup,qt.labelGroup,o);var g=zi(s,h,function(p){return Ffe(p,t,r,n,e.node())})||[];return Ze(Ze(Ze([],Y(l),!1),Y(u),!1),Y(g),!1).filter(function(p){return!!p})}var Qfe=(function(r){Et(e,r);function e(t){return r.call(this,t,SS)||this}return e.prototype.render=function(t,n,i){var a=this,s=t.titleText,o=t.data,A=t.animate,l=t.showTitle,c=t.showGrid,u=t.dataThreshold,h=t.truncRange,g=t.classNamePrefix,p=n.className||"axis";g?n.attr("className","".concat(p," ").concat(g,"axis")):n.className||n.attr("className","axis");var v=yde(o,u).filter(function(k){var P=k.value;return!(h&&P>h[0]&&P<h[1])}),m=MR(i===void 0?A:i),w=Ye(n).maybeAppendByClassName(gt.gridGroup,"g");oa(w,gt.gridGroup,qt.gridGroup,g);var b=zi(c,w,function(k){return rfe(k,v,t,m)})||[],_=Ye(n).maybeAppendByClassName(gt.mainGroup,"g");oa(_,gt.mainGroup,qt.mainGroup,g),s&&(!this.initialized&&m.enter||this.initialized&&m.update)&&DR(t,Ye(this.offscreenGroup),v,MR(!1));var C=DR(t,Ye(_.node()),v,m),M=Ye(n).maybeAppendByClassName(gt.titleGroup,"g");oa(M,gt.titleGroup,qt.titleGroup,g);var F=zi(l,M,function(k){return Rfe(k,a,t,m)})||[];return Ze(Ze(Ze([],Y(b),!1),Y(C),!1),Y(F),!1).flat().filter(function(k){return!!k})},e})(Un);function yi(r,e,t){return t?"".concat(r," ").concat(t,"legend-").concat(e):r}function Ufe(r,e,t){var n=1.4,i=n*t;return[["M",r-t,e-i],["L",r+t,e-i],["L",r+t,e+i],["L",r-t,e+i],["Z"]]}var m8=1.4,y8=.4;function Hfe(r,e,t){var n=t,i=n*m8,a=n/2,s=n/6,o=r+i*y8;return[["M",r,e],["L",o,e+a],["L",r+i,e+a],["L",r+i,e-a],["L",o,e-a],["Z"],["M",o,e+s],["L",r+i-2,e+s],["M",o,e-s],["L",r+i-2,e-s]]}function zfe(r,e,t){var n=t,i=n*m8,a=n/2,s=n/6,o=e+i*y8;return[["M",r,e],["L",r-a,o],["L",r-a,e+i],["L",r+a,e+i],["L",r+a,o],["Z"],["M",r-s,o],["L",r-s,e+i-2],["M",r+s,o],["L",r+s,e+i-2]]}$t.registerSymbol("hiddenHandle",Ufe);$t.registerSymbol("verticalHandle",Hfe);$t.registerSymbol("horizontalHandle",zfe);function Yx(r,e,t){return r===void 0&&(r="horizontal"),r==="horizontal"?e:t}var wi={title:"title",item:"item",marker:"marker",label:"label",value:"value",focusIcon:"focus-icon",background:"background",handleMarker:"handle-marker",handleLabel:"handle-label",prevBtn:"prev-btn",nextBtn:"next-btn",pageInfo:"page-info"},KA=as({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),w8={showLabel:!0,formatter:function(r){return r.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0};(function(r){Et(e,r);function e(t){return r.call(this,t,w8)||this}return e.prototype.render=function(t,n){var i=Ye(n).maybeAppendByClassName(KA.markerGroup,"g");this.renderMarker(i);var a=Ye(n).maybeAppendByClassName(KA.labelGroup,"g");this.renderLabel(a)},e.prototype.renderMarker=function(t){var n=this,i=this.attributes,a=i.orientation,s=i.classNamePrefix,o=i.markerSymbol,A=o===void 0?Yx(a,"horizontalHandle","verticalHandle"):o;zi(!!A,t,function(l){var c=vt(n.attributes,"marker"),u=Ee({symbol:A},c),h=yi(KA.marker.name,wi.handleMarker,s);if(n.marker=l.maybeAppendByClassName(KA.marker,function(){return new $t({style:u,className:h})}).update(u),s){var g=n.marker.node().querySelector(".marker");if(g){var p=g.getAttribute("class")||"",v=p.split(" ")[0],m=yi(v,wi.handleMarker,s);g.setAttribute("class",m)}}})},e.prototype.renderLabel=function(t){var n=this,i=this.attributes,a=i.showLabel,s=i.orientation,o=i.spacing,A=o===void 0?0:o,l=i.formatter,c=i.classNamePrefix;zi(a,t,function(u){var h,g=vt(n.attributes,"label"),p=g.text,v=Sn(g,["text"]),m=((h=u.select(KA.marker.class))===null||h===void 0?void 0:h.node().getBBox())||{},w=m.width,b=w===void 0?0:w,_=m.height,C=_===void 0?0:_,M=Y(Yx(s,[0,C+A,"center","top"],[b+A,0,"start","middle"]),4),F=M[0],k=M[1],P=M[2],N=M[3],D=yi(KA.label.name,wi.handleLabel,c);u.maybeAppendByClassName(KA.label,"text").attr("className",D).styles(Ee(Ee({},v),{x:F,y:k,text:l(p).toString(),textAlign:P,textBaseline:N}))})},e})(Un);var b8={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},jfe=fr({},b8,{});fr({},b8,_c(w8,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"});var GA=as({title:"title",html:"html",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend"),wB=as({text:"text"},"title");function Kfe(r,e){var t=r.attributes,n=t.position,i=t.spacing,a=t.inset,s=t.text,o=r.getBBox(),A=e.getBBox(),l=Qm(n),c=Y($r(s?i:0),4),u=c[0],h=c[1],g=c[2],p=c[3],v=Y($r(a),4),m=v[0],w=v[1],b=v[2],_=v[3],C=Y([p+h,u+g],2),M=C[0],F=C[1],k=Y([_+w,m+b],2),P=k[0],N=k[1];if(l[0]==="l")return new Ei(o.x,o.y,A.width+o.width+M+P,Math.max(A.height+N,o.height));if(l[0]==="t")return new Ei(o.x,o.y,Math.max(A.width+P,o.width),A.height+o.height+F+N);var D=Y([e.attributes.width||A.width,e.attributes.height||A.height],2),Q=D[0],H=D[1];return new Ei(A.x,A.y,Q+o.width+M+P,H+o.height+F+N)}function Gfe(r,e){var t=Object.entries(e).reduce(function(n,i){var a=Y(i,2),s=a[0],o=a[1],A=r.node().attr(s);return A||(n[s]=o),n},{});r.styles(t)}function Vfe(r){var e,t,n,i,a=r,s=a.width,o=a.height,A=a.position,l=Y([+s/2,+o/2],2),c=l[0],u=l[1],h=Y([+c,+u,"center","middle"],4),g=h[0],p=h[1],v=h[2],m=h[3],w=Qm(A);return w.includes("l")&&(e=Y([0,"start"],2),g=e[0],v=e[1]),w.includes("r")&&(t=Y([+s,"end"],2),g=t[0],v=t[1]),w.includes("t")&&(n=Y([0,"top"],2),p=n[0],m=n[1]),w.includes("b")&&(i=Y([+o,"bottom"],2),p=i[0],m=i[1]),{x:g,y:p,textAlign:v,textBaseline:m}}var qfe=(function(r){Et(e,r);function e(t){return r.call(this,t,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return e.prototype.getAvailableSpace=function(){var t=this,n=this.attributes,i=n.width,a=n.height,s=n.position,o=n.spacing,A=n.inset,l=t.querySelector(wB.text.class);if(!l)return new Ei(0,0,+i,+a);var c=l.getBBox(),u=c.width,h=c.height,g=Y($r(o),4),p=g[0],v=g[1],m=g[2],w=g[3],b=Y([0,0,+i,+a],4),_=b[0],C=b[1],M=b[2],F=b[3],k=Qm(s);if(k.includes("i"))return new Ei(_,C,M,F);k.forEach(function(ce,se){var W,le,fe,X;ce==="t"&&(W=Y(se===0?[h+m,+a-h-m]:[0,+a],2),C=W[0],F=W[1]),ce==="r"&&(le=Y([+i-u-w],1),M=le[0]),ce==="b"&&(fe=Y([+a-h-p],1),F=fe[0]),ce==="l"&&(X=Y(se===0?[u+v,+i-u-v]:[0,+i],2),_=X[0],M=X[1])});var P=Y($r(A),4),N=P[0],D=P[1],Q=P[2],H=P[3],j=Y([H+D,N+Q],2),q=j[0],J=j[1];return new Ei(_+H,C+N,M-q,F-J)},e.prototype.getBBox=function(){return this.title?this.title.getBBox():new Ei(0,0,0,0)},e.prototype.render=function(t,n){var i=this;t.width,t.height,t.position,t.spacing;var a=t.classNamePrefix,s=Sn(t,["width","height","position","spacing","classNamePrefix"]),o=Y(oo(s),1),A=o[0],l=Vfe(t),c=l.x,u=l.y,h=l.textAlign,g=l.textBaseline;zi(!!s.text,Ye(n),function(p){var v=yi(wB.text.name,wi.title,a);i.title=p.maybeAppendByClassName(wB.text,"text").attr("className",v).styles(A).call(Gfe,{x:c,y:u,textAlign:h,textBaseline:g}).node()})},e})(Un),vi=as({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),Wfe=(function(r){Et(e,r);function e(t){var n=r.call(this,t,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:Yde(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,a){return"".concat(i,"/").concat(a)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return n.playState="idle",n.contentGroup=n.appendChild(new xr({class:vi.contentGroup.name})),n.playWindow=n.contentGroup.appendChild(new xr({class:vi.playWindow.name})),n.innerCurrPage=n.defaultPage,n}return Object.defineProperty(e.prototype,"defaultPage",{get:function(){var t=this.attributes.defaultPage;return Rn(t,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageShape",{get:function(){var t=this.pageViews,n=Y(Fde(t.map(function(u){var h=u.getBBox(),g=h.width,p=h.height;return[g,p]})).map(function(u){return Math.max.apply(Math,Ze([],Y(u),!1))}),2),i=n[0],a=n[1],s=this.attributes,o=s.pageWidth,A=o===void 0?i:o,l=s.pageHeight,c=l===void 0?a:l;return{pageWidth:A,pageHeight:c}},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(e.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var t=r.prototype.getBBox.call(this),n=t.x,i=t.y,a=this.controllerShape,s=this.pageShape,o=s.pageWidth,A=s.pageHeight;return new Ei(n,i,o+a.width,A)},e.prototype.goTo=function(t){var n=this,i=this.attributes.animate,a=this,s=a.currPage,o=a.playState,A=a.playWindow,l=a.pageViews;if(o!=="idle"||t<0||l.length<=0||t>=l.length)return null;l[s].setLocalPosition(0,0),this.prepareFollowingPage(t);var c=Y(this.getFollowingPageDiff(t),2),u=c[0],h=c[1];this.playState="running";var g=a8(A,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-u,", ").concat(-h,")")}],i);return ru(g,function(){n.innerCurrPage=t,n.playState="idle",n.setVisiblePages([t]),n.updatePageInfo()}),g},e.prototype.prev=function(){var t=this.attributes.loop,n=this.pageViews.length,i=this.currPage;if(!t&&i<=0)return null;var a=t?(i-1+n)%n:Rn(i-1,0,n);return this.goTo(a)},e.prototype.next=function(){var t=this.attributes.loop,n=this.pageViews.length,i=this.currPage;if(!t&&i>=n-1)return null;var a=t?(i+1)%n:Rn(i+1,0,n);return this.goTo(a)},e.prototype.renderClipPath=function(t){var n=this.pageShape,i=n.pageWidth,a=n.pageHeight;if(!i||!a){this.contentGroup.style.clipPath=void 0;return}this.clipPath=t.maybeAppendByClassName(vi.clipPath,"rect").styles({width:i,height:a}),this.contentGroup.attr("clipPath",this.clipPath.node())},e.prototype.setVisiblePages=function(t){this.playWindow.children.forEach(function(n,i){t.includes(i)?Bh(n):Xa(n)})},e.prototype.adjustControllerLayout=function(){var t=this,n=t.prevBtnGroup,i=t.nextBtnGroup,a=t.pageInfoGroup,s=this.attributes,o=s.orientation,A=s.controllerPadding,l=a.getBBox(),c=l.width;l.height;var u=Y(o==="horizontal"?[-180,0]:[-90,90],2),h=u[0],g=u[1];n.setLocalEulerAngles(h),i.setLocalEulerAngles(g);var p=n.getBBox(),v=p.width,m=p.height,w=i.getBBox(),b=w.width,_=w.height,C=Math.max(v,c,b),M=o==="horizontal"?{offset:[[0,0],[v/2+A,0],[v+c+A*2,0]],textAlign:"start"}:{offset:[[C/2,-m-A],[C/2,0],[C/2,_+A]],textAlign:"center"},F=Y(M.offset,3),k=Y(F[0],2),P=k[0],N=k[1],D=Y(F[1],2),Q=D[0],H=D[1],j=Y(F[2],2),q=j[0],J=j[1],ce=M.textAlign,se=a.querySelector("text");se&&(se.style.textAlign=ce),n.setLocalPosition(P,N),a.setLocalPosition(Q,H),i.setLocalPosition(q,J)},e.prototype.updatePageInfo=function(){var t,n=this,i=n.currPage,a=n.pageViews,s=n.attributes.formatter;a.length<2||((t=this.pageInfoGroup.querySelector(vi.pageInfo.class))===null||t===void 0||t.attr("text",s(i+1,a.length)),this.adjustControllerLayout())},e.prototype.getFollowingPageDiff=function(t){var n=this.currPage;if(n===t)return[0,0];var i=this.attributes.orientation,a=this.pageShape,s=a.pageWidth,o=a.pageHeight,A=t<n?-1:1;return i==="horizontal"?[A*s,0]:[0,A*o]},e.prototype.prepareFollowingPage=function(t){var n=this,i=n.currPage,a=n.pageViews;if(this.setVisiblePages([t,i]),t!==i){var s=Y(this.getFollowingPageDiff(t),2),o=s[0],A=s[1];a[t].setLocalPosition(o,A)}},e.prototype.renderController=function(t){var n=this,i=this.attributes,a=i.controllerSpacing,s=i.classNamePrefix,o=s===void 0?"":s,A=this.pageShape,l=A.pageWidth,c=A.pageHeight,u=this.pageViews.length>=2,h=t.maybeAppendByClassName(vi.controller,"g");if(Rm(h.node(),u),!!u){var g=vt(this.attributes,"button"),p=vt(this.attributes,"pageNum"),v=Y(oo(g),2),m=v[0],w=v[1],b=m.size,_=Sn(m,["size"]),C=!h.select(vi.prevBtnGroup.class).node(),M=h.maybeAppendByClassName(vi.prevBtnGroup,"g").styles(w);this.prevBtnGroup=M.node();var F=M.maybeAppendByClassName(vi.prevBtn,"path");if(o){var k=yi(vi.prevBtn.name,wi.prevBtn,o);F.node().setAttribute("class",k)}var P=h.maybeAppendByClassName(vi.nextBtnGroup,"g").styles(w);this.nextBtnGroup=P.node();var N=P.maybeAppendByClassName(vi.nextBtn,"path");if(o){var D=yi(vi.nextBtn.name,wi.nextBtn,o);N.node().setAttribute("class",D)}[F,N].forEach(function(q){q.styles(Ee(Ee({},_),{transformOrigin:"center"})),bS(q.node(),b)});var Q=h.maybeAppendByClassName(vi.pageInfoGroup,"g");this.pageInfoGroup=Q.node();var H=Q.maybeAppendByClassName(vi.pageInfo,"text");if(H.styles(p),o){var j=yi(vi.pageInfo.name,wi.pageInfo,o);H.node().setAttribute("class",j)}this.updatePageInfo(),h.node().setLocalPosition(l+a,c/2),C&&(this.prevBtnGroup.addEventListener("click",function(){n.prev()}),this.nextBtnGroup.addEventListener("click",function(){n.next()}))}},e.prototype.render=function(t,n){var i=t.x,a=i===void 0?0:i,s=t.y,o=s===void 0?0:s;this.attr("transform","translate(".concat(a,", ").concat(o,")"));var A=Ye(n);this.renderClipPath(A),this.renderController(A),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},e.prototype.bindEvents=function(){var t=this,n=nh(function(){return t.render(t.attributes,t)},50);this.playWindow.addEventListener(Ot.INSERTED,n),this.playWindow.addEventListener(Ot.REMOVED,n)},e})(Un),Mt,$fe="component-poptip",_t={CONTAINER:"component-poptip",ARROW:"component-poptip-arrow",TEXT:"component-poptip-text"},RR=(Mt={},Mt[".".concat(_t.CONTAINER)]={visibility:"visible",position:"absolute","background-color":"rgba(0, 0, 0)","box-shadow":"0px 0px 10px #aeaeae","border-radius":"3px",color:"#fff",opacity:.8,"font-size":"12px",padding:"4px 6px",display:"flex","justify-content":"center","align-items":"center","z-index":8,transition:"visibility 50ms"},Mt[".".concat(_t.TEXT)]={"text-align":"center"},Mt[".".concat(_t.CONTAINER,"[data-position='top']")]={transform:"translate(-50%, -100%)"},Mt[".".concat(_t.CONTAINER,"[data-position='left']")]={transform:"translate(-100%, -50%)"},Mt[".".concat(_t.CONTAINER,"[data-position='right']")]={transform:"translate(0, -50%)"},Mt[".".concat(_t.CONTAINER,"[data-position='bottom']")]={transform:"translate(-50%, 0)"},Mt[".".concat(_t.CONTAINER,"[data-position='top-left']")]={transform:"translate(0,-100%)"},Mt[".".concat(_t.CONTAINER,"[data-position='top-right']")]={transform:"translate(-100%,-100%)"},Mt[".".concat(_t.CONTAINER,"[data-position='left-top']")]={transform:"translate(-100%, 0)"},Mt[".".concat(_t.CONTAINER,"[data-position='left-bottom']")]={transform:"translate(-100%, -100%)"},Mt[".".concat(_t.CONTAINER,"[data-position='right-top']")]={transform:"translate(0, 0)"},Mt[".".concat(_t.CONTAINER,"[data-position='right-bottom']")]={transform:"translate(0, -100%)"},Mt[".".concat(_t.CONTAINER,"[data-position='bottom-left']")]={transform:"translate(0, 0)"},Mt[".".concat(_t.CONTAINER,"[data-position='bottom-right']")]={transform:"translate(-100%, 0)"},Mt[".".concat(_t.ARROW)]={width:"4px",height:"4px",transform:"rotate(45deg)","background-color":"rgba(0, 0, 0)",position:"absolute","z-index":-1},Mt[".".concat(_t.CONTAINER,"[data-position='top']")]={transform:"translate(-50%, calc(-100% - 5px))"},Mt["[data-position='top'] .".concat(_t.ARROW)]={bottom:"-2px"},Mt[".".concat(_t.CONTAINER,"[data-position='left']")]={transform:"translate(calc(-100% - 5px), -50%)"},Mt["[data-position='left'] .".concat(_t.ARROW)]={right:"-2px"},Mt[".".concat(_t.CONTAINER,"[data-position='right']")]={transform:"translate(5px, -50%)"},Mt["[data-position='right'] .".concat(_t.ARROW)]={left:"-2px"},Mt[".".concat(_t.CONTAINER,"[data-position='bottom']")]={transform:"translate(-50%, 5px)"},Mt["[data-position='bottom'] .".concat(_t.ARROW)]={top:"-2px"},Mt[".".concat(_t.CONTAINER,"[data-position='top-left']")]={transform:"translate(0, calc(-100% - 5px))"},Mt["[data-position='top-left'] .".concat(_t.ARROW)]={left:"10px",bottom:"-2px"},Mt[".".concat(_t.CONTAINER,"[data-position='top-right']")]={transform:"translate(-100%, calc(-100% - 5px))"},Mt["[data-position='top-right'] .".concat(_t.ARROW)]={right:"10px",bottom:"-2px"},Mt[".".concat(_t.CONTAINER,"[data-position='left-top']")]={transform:"translate(calc(-100% - 5px), 0)"},Mt["[data-position='left-top'] .".concat(_t.ARROW)]={right:"-2px",top:"8px"},Mt[".".concat(_t.CONTAINER,"[data-position='left-bottom']")]={transform:"translate(calc(-100% - 5px), -100%)"},Mt["[data-position='left-bottom'] .".concat(_t.ARROW)]={right:"-2px",bottom:"8px"},Mt[".".concat(_t.CONTAINER,"[data-position='right-top']")]={transform:"translate(5px, 0)"},Mt["[data-position='right-top'] .".concat(_t.ARROW)]={left:"-2px",top:"8px"},Mt[".".concat(_t.CONTAINER,"[data-position='right-bottom']")]={transform:"translate(5px, -100%)"},Mt["[data-position='right-bottom'] .".concat(_t.ARROW)]={left:"-2px",bottom:"8px"},Mt[".".concat(_t.CONTAINER,"[data-position='bottom-left']")]={transform:"translate(0, 5px)"},Mt["[data-position='bottom-left'] .".concat(_t.ARROW)]={top:"-2px",left:"8px"},Mt[".".concat(_t.CONTAINER,"[data-position='bottom-right']")]={transform:"translate(-100%, 5px)"},Mt["[data-position='bottom-right'] .".concat(_t.ARROW)]={top:"-2px",right:"8px"},Mt),Yfe=void 0;function Xfe(r,e,t,n,i,a){if(i===void 0&&(i=!1),a===void 0&&(a=!1),a)return[r,e];var s=t.getBoundingClientRect(),o=s.x,A=s.y,l=s.width,c=s.height;switch(n){case"top":return i?[o+l/2,A]:[r,A];case"left":return i?[o,A+c/2]:[o,e];case"bottom":return i?[o+l/2,A+c]:[r,A+c];case"right":return i?[o+l,A+c/2]:[o+l,e];case"top-right":case"right-top":return[o+l,A];case"left-bottom":case"bottom-left":return[o,A+c];case"right-bottom":case"bottom-right":return[o+l,A+c];case"top-left":case"left-top":default:return[o,A]}}var Zfe=function(r){var e;return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e||(e=r.apply(Yfe,t)),e}};function Jfe(r){var e=r&&document.getElementById(r);return e||(e=document.createElement("div"),e.setAttribute("id",r),document.body.appendChild(e)),e}function ege(r){var e=Zfe(Jfe)(r);return e}var tge=(function(r){Et(e,r);function e(t){var n=r.call(this,qr({style:{id:$fe}},e.defaultOptions,t))||this;return n.visibility="visible",n.map=new Map,n.domStyles="",n.initShape(),n.render(n.attributes,n),n}return Object.defineProperty(e.prototype,"visible",{get:function(){return this.visibility==="visible"},enumerable:!1,configurable:!0}),e.prototype.render=function(t,n){this.visibility=this.style.visibility,this.updatePoptipElement()},e.prototype.update=function(t){this.attr(qr({},this.style,t)),this.render(this.attributes,this)},e.prototype.bind=function(t,n){var i=this;if(t){var a=this.style.text,s=function(A){var l=t,c=i.style,u=a;if(n){var h=typeof n=="function"?n.call(null,A):n,g=h.html,p=h.target,v=Sn(h,["html","target"]);c=RK({},i.style,v),(p||p===!1)&&(l=p),typeof g=="string"&&(u=g)}var m=c.position,w=c.arrowPointAtCenter,b=c.follow,_=c.offset;if(l){var C=A,M=C.clientX,F=C.clientY,k=Y(Xfe(M,F,l,m,w,b),2),P=k[0],N=k[1];i.showTip(P,N,{text:u,position:m,offset:_})}else i.hideTip()},o=function(){i.hideTip()};t.addEventListener("mousemove",s),t.addEventListener("mouseleave",o),this.map.set(t,[s,o])}},e.prototype.unbind=function(t){if(this.map.has(t)){var n=Y(this.map.get(t)||[],2),i=n[0],a=n[1];i&&t.removeEventListener("mousemove",i),a&&t.removeEventListener("mouseleave",a),this.map.delete(t)}},e.prototype.clear=function(){this.container.innerHTML=""},e.prototype.destroy=function(){var t=this,n;Ze([],Y(this.map.keys()),!1).forEach(function(i){return t.unbind(i)}),(n=this.container)===null||n===void 0||n.remove(),r.prototype.destroy.call(this)},e.prototype.showTip=function(t,n,i){var a=jr(i,"text");if(!(a&&typeof a!="string")&&(this.applyStyles(),t&&n&&i)){var s=i.offset,o=i.position;if(o&&this.container.setAttribute("data-position",o),this.setOffsetPosition(t,n,s),typeof a=="string"){var A=this.container.querySelector(".".concat(_t.TEXT));A&&(A.innerHTML=a)}this.visibility="visible",this.container.style.visibility="visible"}},e.prototype.hideTip=function(){this.visibility="hidden",this.container.style.visibility="hidden"},e.prototype.getContainer=function(){return this.container},e.prototype.getClassName=function(){var t=this.style.containerClassName;return"".concat(_t.CONTAINER).concat(t?" ".concat(t):"")},e.prototype.initShape=function(){var t=this,n=this.style.id;this.container=ege(n),this.container.className=this.getClassName(),this.container.addEventListener("mousemove",function(){return t.showTip()}),this.container.addEventListener("mouseleave",function(){return t.hideTip()})},e.prototype.updatePoptipElement=function(){var t=this.container;this.clear();var n=this.style,i=n.id,a=n.template,s=n.text;this.container.setAttribute("id",i),this.container.className=this.getClassName();var o='<span class="'.concat(_t.ARROW,'"></span>');t.innerHTML=o,Rt(a)?t.innerHTML+=a:a&&DK(a)&&t.appendChild(a),s&&(t.getElementsByClassName(_t.TEXT)[0].textContent=s),this.applyStyles(),this.container.style.visibility=this.visibility},e.prototype.applyStyles=function(){var t=fr({},RR,this.style.domStyles),n=Object.entries(t).reduce(function(a,s){var o=Y(s,2),A=o[0],l=o[1],c=Object.entries(l).reduce(function(u,h){var g=Y(h,2),p=g[0],v=g[1];return"".concat(u).concat(p,": ").concat(v,";")},"");return"".concat(a).concat(A,"{").concat(c,"}")},"");if(this.domStyles!==n){this.domStyles=n;var i=this.container.querySelector("style");i&&this.container.removeChild(i),i=document.createElement("style"),i.innerHTML=n,this.container.appendChild(i)}},e.prototype.setOffsetPosition=function(t,n,i){i===void 0&&(i=this.style.offset);var a=Y(i,2),s=a[0],o=s===void 0?0:s,A=a[1],l=A===void 0?0:A;this.container.style.left="".concat(t+o,"px"),this.container.style.top="".concat(n+l,"px")},e.tag="poptip",e.defaultOptions={style:{x:0,y:0,width:0,height:0,target:null,visibility:"hidden",text:"",position:"top",follow:!1,offset:[0,0],domStyles:RR,template:'<div class="'.concat(_t.TEXT,'"></div>')}},e})(Un),sr=as({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",focusGroup:"focus-group",focus:"focus",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item"),nge={offset:[0,20],domStyles:{".component-poptip":{opacity:"1",padding:"8px 12px",background:"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},".component-poptip-arrow":{display:"none"},".component-poptip-text":{color:"#000",lineHeight:"20px"}}};function rge(r){var e=r.querySelector(sr.marker.class);return e?e.style:{}}var ige=(function(r){Et(e,r);function e(t,n){var i=r.call(this,t,{span:[1,1],marker:function(){return new xs({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this;return i.keyFields={},i.keyFields=n||{},i}return Object.defineProperty(e.prototype,"showValue",{get:function(){var t=this.attributes.valueText;return t?typeof t=="string"||typeof t=="number"?t!=="":typeof t=="function"?!0:t.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualSpace",{get:function(){var t=this.labelGroup,n=this.valueGroup,i=this.attributes,a=i.markerSize,s=i.focus,o=i.focusMarkerSize,A=t.node().getBBox(),l=A.width,c=A.height,u=n.node().getBBox(),h=u.width,g=u.height,p=s?o??12:0;return{markerWidth:a,labelWidth:l,valueWidth:h,focusWidth:p,height:Math.max(a,c,g)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){var t=this.attributes.span;if(!t)return[1,1];var n=Y($r(t),2),i=n[0],a=n[1],s=this.showValue?a:0,o=i+s;return[i/o,s/o]},enumerable:!1,configurable:!0}),e.prototype.setAttribute=function(t,n){r.prototype.setAttribute.call(this,t,n)},Object.defineProperty(e.prototype,"shape",{get:function(){var t,n=this.attributes,i=n.markerSize,a=n.width,s=this.actualSpace,o=s.markerWidth,A=s.focusWidth,l=s.height,c=this.actualSpace,u=c.labelWidth,h=c.valueWidth,g=Y(this.spacing,3),p=g[0],v=g[1],m=g[2];if(a){var w=a-i-p-v-A-m,b=Y(this.span,2),_=b[0],C=b[1];t=Y([_*w,C*w],2),u=t[0],h=t[1]}var M=o+u+h+p+v+A+m;return{width:M,height:l,markerWidth:o,labelWidth:u,valueWidth:h,focusWidth:A}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){var t=this.attributes,n=t.spacing,i=t.focus;if(!n)return[0,0,0];var a=Y($r(n),3),s=a[0],o=a[1],A=a[2];return[s,this.showValue?o:0,i?A:0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){var t=this.shape,n=t.markerWidth,i=t.labelWidth,a=t.valueWidth,s=t.focusWidth,o=t.width,A=t.height,l=Y(this.spacing,3),c=l[0],u=l[1],h=l[2];return{height:A,width:o,markerWidth:n,labelWidth:i,valueWidth:a,focusWidth:s,position:[n/2,n+c,n+i+c+u,n+i+a+c+u+h+s/2]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleSize",{get:function(){var t=rge(this.markerGroup.node()),n=this.attributes,i=n.markerSize,a=n.markerStrokeWidth,s=a===void 0?t.strokeWidth:a,o=n.markerLineWidth,A=o===void 0?t.lineWidth:o,l=n.markerStroke,c=l===void 0?t.stroke:l,u=+(s||A||(c?1:0))*Math.sqrt(2),h=this.markerGroup.node().getBBox(),g=h.width,p=h.height;return(1-u/Math.max(g,p))*i},enumerable:!1,configurable:!0}),e.prototype.renderMarker=function(t){var n=this,i=this.attributes,a=i.marker,s=i.classNamePrefix,o=vt(this.attributes,"marker");this.markerGroup=t.maybeAppendByClassName(sr.markerGroup,"g").style("zIndex",0),zi(!!a,this.markerGroup,function(){var A,l=n.markerGroup.node(),c=(A=l.childNodes)===null||A===void 0?void 0:A[0],u=yi(sr.marker.name,wi.marker,s),h=typeof a=="string"?new $t({style:{symbol:a},className:u}):a();if(c)if(h.nodeName===c.nodeName)c instanceof $t?c.update(Ee(Ee({},o),{symbol:a})):(Bde(c,h),Ye(c).styles(o));else{if(c.remove(),!(h instanceof $t)){var p=yi(sr.marker.name,wi.marker,s);h.className=p}Ye(h).styles(o),l.appendChild(h)}else{if(!(h instanceof $t)){var g=yi(sr.marker.name,wi.marker,s);h.className=g,Ye(h).styles(o)}l.appendChild(h)}n.markerGroup.node().scale(1/n.markerGroup.node().getScale()[0]);var v=bS(n.markerGroup.node(),n.scaleSize);n.markerGroup.node().style._transform="scale(".concat(v,")")})},e.prototype.renderLabel=function(t){var n=vt(this.attributes,"label"),i=n.text,a=Sn(n,["text"]),s=this.attributes.classNamePrefix;this.labelGroup=t.maybeAppendByClassName(sr.labelGroup,"g").style("zIndex",0);var o=yi(sr.label.name,wi.label,s),A=this.labelGroup.maybeAppendByClassName(sr.label,function(){return so(i)});A.node().setAttribute("class",o),A.styles(a)},e.prototype.renderValue=function(t){var n=this,i=vt(this.attributes,"value"),a=i.text,s=Sn(i,["text"]),o=this.attributes.classNamePrefix;this.valueGroup=t.maybeAppendByClassName(sr.valueGroup,"g").style("zIndex",0),zi(this.showValue,this.valueGroup,function(){var A=yi(sr.value.name,wi.value,o),l=n.valueGroup.maybeAppendByClassName(sr.value,function(){return so(a)});l.node().setAttribute("class",A),l.styles(s)})},e.prototype.createPoptip=function(){var t=this.attributes.poptip,n=t||{};n.render;var i=Sn(n,["render"]),a=new tge({style:fr(nge,i)});return this.poptipGroup=a,a},e.prototype.bindPoptip=function(t){var n=this,i=this.attributes.poptip;if(i){var a=this.poptipGroup||this.createPoptip();a.bind(t,function(){var s=n.attributes,o=s.labelText,A=s.valueText,l=s.markerFill,c=typeof o=="string"?o:o==null?void 0:o.attr("text"),u=typeof A=="string"?A:A==null?void 0:A.attr("text");if(typeof i.render=="function")return{html:i.render(Ee(Ee({},n.keyFields),{label:c,value:u,color:l}))};var h="";return(typeof c=="string"||typeof c=="number")&&(h+='<div class="component-poptip-label">'.concat(c,"</div>")),(typeof u=="string"||typeof u=="number")&&(h+='<div class="component-poptip-value">'.concat(u,"</div>")),{html:h}})}},e.prototype.renderFocus=function(t){var n=this,i=this.attributes,a=i.focus,s=i.focusMarkerSize,o=i.classNamePrefix,A={x:0,y:0,size:s,opacity:.6,symbol:"focus",stroke:"#aaaaaa",lineWidth:1};ft(a)||(this.focusGroup=t.maybeAppendByClassName(sr.focusGroup,"g").style("zIndex",0),zi(a,this.focusGroup,function(){var l=yi(sr.focus.name,wi.focusIcon,o),c=new $t({style:Ee(Ee({},A),{symbol:"focus"}),className:l}),u=new xs({style:{r:A.size/2,fill:"transparent"}}),h=n.focusGroup.node();h.appendChild(u),h.appendChild(c),c.update({opacity:0}),t.node().addEventListener("pointerenter",function(){c.update({opacity:1})}),t.node().addEventListener("pointerleave",function(){c.update({opacity:0})})}))},e.prototype.renderPoptip=function(t){var n=this,i=this.attributes.poptip;if(i){var a=t.maybeAppendByClassName(sr.value,"g").node(),s=t.maybeAppendByClassName(sr.label,"g").node();[a,s].forEach(function(o){o&&n.bindPoptip(o)})}},e.prototype.renderBackground=function(t){var n=this.shape,i=n.width,a=n.height,s=vt(this.attributes,"background");this.background=t.maybeAppendByClassName(sr.backgroundGroup,"g").style("zIndex",-1);var o=this.background.maybeAppendByClassName(sr.background,"rect");o.styles(Ee({width:i,height:a},s));var A=this.attributes.classNamePrefix,l=A===void 0?"":A;if(l){var c=yi(sr.background.name,wi.background,l);o.node().setAttribute("class",c)}},e.prototype.adjustLayout=function(){var t=this.layout,n=t.labelWidth,i=t.valueWidth,a=t.height,s=Y(t.position,4),o=s[0],A=s[1],l=s[2],c=s[3],u=a/2;this.markerGroup.styles({transform:"translate(".concat(o,", ").concat(u,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(A,", ").concat(u,")")}),this.focusGroup&&this.focusGroup.styles({transform:"translate(".concat(c,", ").concat(u,")")}),jx(this.labelGroup.select(sr.label.class).node(),Math.ceil(n)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(l,", ").concat(u,")")}),jx(this.valueGroup.select(sr.value.class).node(),Math.ceil(i)))},e.prototype.render=function(t,n){var i=Ye(n),a=t.x,s=a===void 0?0:a,o=t.y,A=o===void 0?0:o;i.styles({transform:"translate(".concat(s,", ").concat(A,")")}),this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.renderPoptip(i),this.renderFocus(i),this.adjustLayout()},e})(Un),VA=as({page:"item-page",navigator:"navigator",item:"item"},"items"),QR=function(r,e,t){return t===void 0&&(t=!0),r?e(r):t},age=(function(r){Et(e,r);function e(t){var n=r.call(this,t,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:Gy,mouseenter:Gy,mouseleave:Gy})||this;return n.navigatorShape=[0,0],n}return Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){var t=this.attributes,n=t.gridRow,i=t.gridCol,a=t.data;if(!n&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return n&&i?[n,i]:n?[n,a.length]:[a.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderData",{get:function(){var t=this.attributes,n=t.data,i=t.layout,a=t.poptip,s=t.focus,o=t.focusMarkerSize,A=t.classNamePrefix,l=vt(this.attributes,"item"),c=n.map(function(u,h){var g=u.id,p=g===void 0?h:g,v=u.label,m=u.value;return{id:"".concat(p),index:h,style:Ee({layout:i,labelText:v,valueText:m,poptip:a,focus:s,focusMarkerSize:o,classNamePrefix:A},Object.fromEntries(Object.entries(l).map(function(w){var b=Y(w,2),_=b[0],C=b[1];return[_,ji(C,[u,h,n])]})))}});return c},enumerable:!1,configurable:!0}),e.prototype.getGridLayout=function(){var t=this,n=this.attributes,i=n.orientation,a=n.width,s=n.rowPadding,o=n.colPadding,A=Y(this.navigatorShape,1),l=A[0],c=Y(this.grid,2),u=c[0],h=c[1],g=h*u,p=0;return this.pageViews.children.map(function(v,m){var w,b,_=Math.floor(m/g),C=m%g,M=t.ifHorizontal(h,u),F=[Math.floor(C/M),C%M];i==="vertical"&&F.reverse();var k=Y(F,2),P=k[0],N=k[1],D=(a-l-(h-1)*o)/h,Q=v.getBBox().height,H=Y([0,0],2),j=H[0],q=H[1];return i==="horizontal"?(w=Y([p,P*(Q+s)],2),j=w[0],q=w[1],p=N===h-1?0:p+D+o):(b=Y([N*(D+o),p],2),j=b[0],q=b[1],p=P===u-1?0:p+Q+s),{page:_,index:m,row:P,col:N,pageIndex:C,width:D,height:Q,x:j,y:q}})},e.prototype.getFlexLayout=function(){var t=this.attributes,n=t.width,i=t.height,a=t.rowPadding,s=t.colPadding,o=Y(this.navigatorShape,1),A=o[0],l=Y(this.grid,2),c=l[0],u=l[1],h=Y([n-A,i],2),g=h[0],p=h[1],v=Y([0,0,0,0,0,0,0,0],8),m=v[0],w=v[1],b=v[2],_=v[3],C=v[4],M=v[5],F=v[6],k=v[7];return this.pageViews.children.map(function(P,N){var D,Q,H,j,q=P.getBBox(),J=q.width,ce=q.height,se=F===0?0:s,W=F+se+J;if(W<=g&&QR(C,function(fe){return fe<u}))return D=Y([F+se,k,W],3),m=D[0],w=D[1],F=D[2],{width:J,height:ce,x:m,y:w,page:b,index:N,pageIndex:_++,row:M,col:C++};Q=Y([M+1,0,0,k+ce+a],4),M=Q[0],C=Q[1],F=Q[2],k=Q[3];var le=k+ce;return le<=p&&QR(M,function(fe){return fe<c})?(H=Y([F,k,J],3),m=H[0],w=H[1],F=H[2],{width:J,height:ce,x:m,y:w,page:b,index:N,pageIndex:_++,row:M,col:C++}):(j=Y([0,0,J,0,b+1,0,0,0],8),m=j[0],w=j[1],F=j[2],k=j[3],b=j[4],_=j[5],M=j[6],C=j[7],{width:J,height:ce,x:m,y:w,page:b,index:N,pageIndex:_++,row:M,col:C++})})},Object.defineProperty(e.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var t=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,n=t.call(this);return n.slice(-1)[0].page>0?(this.navigatorShape=[55,0],t.call(this)):n},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(t,n){var i=this.attributes.orientation;return Yx(i,t,n)},e.prototype.flattenPage=function(t){t.querySelectorAll(VA.item.class).forEach(function(n){t.appendChild(n)}),t.querySelectorAll(VA.page.class).forEach(function(n){var i=t.removeChild(n);i.destroy()})},e.prototype.renderItems=function(t){var n=this.attributes,i=n.click,a=n.mouseenter,s=n.mouseleave,o=n.classNamePrefix;this.flattenPage(t);var A=this.dispatchCustomEvent.bind(this),l=yi(VA.item.name,wi.item,o);Ye(t).selectAll(VA.item.class).data(this.renderData,function(c){return c.id}).join(function(c){return c.append(function(u){var h=u.style,g=Sn(u,["style"]);return new ige({style:h},g)}).attr("className",l).on("click",function(){i==null||i(this),A("itemClick",{item:this})}).on("pointerenter",function(){a==null||a(this),A("itemMouseenter",{item:this})}).on("pointerleave",function(){s==null||s(this),A("itemMouseleave",{item:this})})},function(c){return c.each(function(u){var h=u.style;this.update(h)})},function(c){return c.remove()})},e.prototype.relayoutNavigator=function(){var t,n=this.attributes,i=n.layout,a=n.width,s=((t=this.pageViews.children[0])===null||t===void 0?void 0:t.getBBox().height)||0,o=Y(this.navigatorShape,2),A=o[0],l=o[1];this.navigator.update(i==="grid"?{pageWidth:a-A,pageHeight:s-l}:{})},e.prototype.adjustLayout=function(){var t=this,n=Object.entries(lde(this.itemsLayout,"page")).map(function(a){var s=Y(a,2),o=s[0],A=s[1];return{page:o,layouts:A}}),i=Ze([],Y(this.navigator.getContainer().children),!1);n.forEach(function(a){var s=a.layouts,o=t.pageViews.appendChild(new xr({className:VA.page.name}));s.forEach(function(A){var l=A.x,c=A.y,u=A.index,h=A.width,g=A.height,p=i[u];o.appendChild(p),Nd(p,"__layout__",A),p.update({x:l,y:c,width:h,height:g})})}),this.relayoutNavigator()},e.prototype.renderNavigator=function(t){var n=this.attributes,i=n.orientation,a=n.classNamePrefix,s=vt(this.attributes,"nav"),o=fr({orientation:i,classNamePrefix:a},s),A=this;return t.selectAll(VA.navigator.class).data(["nav"]).join(function(l){return l.append(function(){return new Wfe({style:o})}).attr("className",VA.navigator.name).each(function(){A.navigator=this})},function(l){return l.each(function(){this.update(o)})},function(l){return l.remove()}),this.navigator},e.prototype.getBBox=function(){return this.navigator.getBBox()},e.prototype.render=function(t,n){var i=this.attributes.data;if(!(!i||i.length===0)){var a=this.renderNavigator(Ye(n));this.renderItems(a.getContainer()),this.adjustLayout()}},e.prototype.dispatchCustomEvent=function(t,n){var i=new cr(t,{detail:n});this.dispatchEvent(i)},e})(Un),sge=(function(r){Et(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.update=function(t){this.attr(t)},e})(wl),oge=(function(r){Et(e,r);function e(t){return r.call(this,t,jfe)||this}return e.prototype.renderTitle=function(t,n,i){var a=this.attributes,s=a.showTitle,o=a.titleText,A=a.classNamePrefix,l=vt(this.attributes,"title"),c=Y(oo(l),2),u=c[0],h=c[1];this.titleGroup=t.maybeAppendByClassName(GA.titleGroup,"g").styles(h);var g=Ee(Ee({width:n,height:i},u),{text:s?o:"",classNamePrefix:A});this.title=this.titleGroup.maybeAppendByClassName(GA.title,function(){return new qfe({style:g})}).update(g)},e.prototype.renderCustom=function(t){var n=this.attributes.data,i={innerHTML:this.attributes.render(n),pointerEvents:"auto"};t.maybeAppendByClassName(GA.html,function(){return new sge({className:GA.html.name,style:i})}).update(i)},e.prototype.renderItems=function(t,n){var i=n.x,a=n.y,s=n.width,o=n.height,A=vt(this.attributes,"title",!0),l=Y(oo(A),2),c=l[0],u=l[1],h=Ee(Ee({},c),{width:s,height:o,x:0,y:0});this.itemsGroup=t.maybeAppendByClassName(GA.itemsGroup,"g").styles(Ee(Ee({},u),{transform:"translate(".concat(i,", ").concat(a,")")}));var g=this;this.itemsGroup.selectAll(GA.items.class).data(["items"]).join(function(p){return p.append(function(){return new age({style:h})}).attr("className",GA.items.name).each(function(){g.items=Ye(this)})},function(p){return p.update(h)},function(p){return p.remove()})},e.prototype.adjustLayout=function(){var t=this.attributes.showTitle;if(t){var n=this.title.node().getAvailableSpace(),i=n.x,a=n.y;this.itemsGroup.node().style.transform="translate(".concat(i,", ").concat(a,")")}},Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes,n=t.showTitle,i=t.width,a=t.height;return n?this.title.node().getAvailableSpace():new Ei(0,0,i,a)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var t,n,i=(t=this.title)===null||t===void 0?void 0:t.node(),a=(n=this.items)===null||n===void 0?void 0:n.node();return!i||!a?r.prototype.getBBox.call(this):Kfe(i,a)},e.prototype.render=function(t,n){var i=this.attributes,a=i.width,s=i.height,o=i.x,A=o===void 0?0:o,l=i.y,c=l===void 0?0:l,u=i.classNamePrefix,h=i.render,g=Ye(n),p=n.className||"legend-category";u?n.attr("className","".concat(p," ").concat(u,"legend")):n.className||n.attr("className","legend-category"),n.style.transform="translate(".concat(A,", ").concat(c,")"),h?this.renderCustom(g):(this.renderTitle(g,a,s),this.renderItems(g,this.availableSpace),this.adjustLayout())},e})(Un),Age={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(r){return r.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},bB=as({background:"background",labelGroup:"label-group",label:"label"},"indicator"),lge=(function(r){Et(e,r);function e(t){var n=r.call(this,t,Age)||this;return n.point=[0,0],n.group=n.appendChild(new xr({})),n.isMutationObserved=!0,n}return e.prototype.renderBackground=function(){if(this.label){var t=this.attributes,n=t.position,i=t.padding,a=Y($r(i),4),s=a[0],o=a[1],A=a[2],l=a[3],c=this.label.node().getLocalBounds(),u=c.min,h=c.max,g=new Ei(u[0]-l,u[1]-s,h[0]+o-u[0]+l,h[1]+A-u[1]+s),p=this.getPath(n,g),v=vt(this.attributes,"background");this.background=Ye(this.group).maybeAppendByClassName(bB.background,"path").styles(Ee(Ee({},v),{d:p})),this.group.appendChild(this.label.node())}},e.prototype.renderLabel=function(){var t=this.attributes,n=t.formatter,i=t.labelText,a=vt(this.attributes,"label"),s=Y(oo(a),2),o=s[0],A=s[1];o.text;var l=Sn(o,["text"]);if(this.label=Ye(this.group).maybeAppendByClassName(bB.labelGroup,"g").styles(A),!!i){var c=this.label.maybeAppendByClassName(bB.label,function(){return so(n(i))}).style("text",n(i).toString());c.selectAll("text").styles(l)}},e.prototype.adjustLayout=function(){var t=Y(this.point,2),n=t[0],i=t[1],a=this.attributes,s=a.x,o=a.y;this.group.attr("transform","translate(".concat(s-n,", ").concat(o-i,")"))},e.prototype.getPath=function(t,n){var i=this.attributes.radius,a=n.x,s=n.y,o=n.width,A=n.height,l=[["M",a+i,s],["L",a+o-i,s],["A",i,i,0,0,1,a+o,s+i],["L",a+o,s+A-i],["A",i,i,0,0,1,a+o-i,s+A],["L",a+i,s+A],["A",i,i,0,0,1,a,s+A-i],["L",a,s+i],["A",i,i,0,0,1,a+i,s],["Z"]],c={top:4,right:6,bottom:0,left:2},u=c[t],h=this.createCorner([l[u].slice(-2),l[u+1].slice(-2)]);return l.splice.apply(l,Ze([u+1,1],Y(h),!1)),l[0][0]="M",l},e.prototype.createCorner=function(t,n){n===void 0&&(n=10);var i=.8,a=Cde.apply(void 0,Ze([],Y(t),!1)),s=Y(t,2),o=Y(s[0],2),A=o[0],l=o[1],c=Y(s[1],2),u=c[0],h=c[1],g=Y(a?[u-A,[A,u]]:[h-l,[l,h]],2),p=g[0],v=Y(g[1],2),m=v[0],w=v[1],b=p/2,_=p/Math.abs(p),C=n*_,M=C/2,F=C*Math.sqrt(3)/2*i,k=Y([m,m+b-M,m+b,m+b+M,w],5),P=k[0],N=k[1],D=k[2],Q=k[3],H=k[4];return a?(this.point=[D,l-F],[["L",P,l],["L",N,l],["L",D,l-F],["L",Q,l],["L",H,l]]):(this.point=[A+F,D],[["L",A,P],["L",A,N],["L",A+F,D],["L",A,Q],["L",A,H]])},e.prototype.applyVisibility=function(){var t=this.attributes.visibility;t==="hidden"?Xa(this):Bh(this)},e.prototype.bindEvents=function(){this.label.on(Ot.BOUNDS_CHANGED,this.renderBackground)},e.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},e})(Un);function Xx(r){return r===void 0&&(r=""),{CONTAINER:"".concat(r,"tooltip"),TITLE:"".concat(r,"tooltip-title"),LIST:"".concat(r,"tooltip-list"),LIST_ITEM:"".concat(r,"tooltip-list-item"),NAME:"".concat(r,"tooltip-list-item-name"),MARKER:"".concat(r,"tooltip-list-item-marker"),NAME_LABEL:"".concat(r,"tooltip-list-item-name-label"),VALUE:"".concat(r,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(r,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(r,"tooltip-crosshair-y")}}var UR={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function cge(r){var e;r===void 0&&(r="");var t=Xx(r);return e={},e[".".concat(t.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},e[".".concat(t.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},e[".".concat(t.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},e[".".concat(t.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},e[".".concat(t.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},e[".".concat(t.NAME)]={display:"flex","align-items":"center","max-width":"216px"},e[".".concat(t.NAME_LABEL)]=Ee({flex:1},UR),e[".".concat(t.VALUE)]=Ee({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},UR),e[".".concat(t.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e[".".concat(t.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e}var uge=(function(r){Et(e,r);function e(t){var n=this,i,a,s=(a=(i=t.style)===null||i===void 0?void 0:i.template)===null||a===void 0?void 0:a.prefixCls,o=Xx(s);return n=r.call(this,t,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(o.CONTAINER,'"></div>'),title:'<div class="'.concat(o.TITLE,'"></div>'),item:'<li class="'.concat(o.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(o.NAME,`">
          <span class="`).concat(o.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(o.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(o.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:cge(s)})||this,n.timestamp=-1,n.prevCustomContentKey=n.attributes.contentKey,n.initShape(),n.render(n.attributes,n),n}return Object.defineProperty(e.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.element},Object.defineProperty(e.prototype,"elementSize",{get:function(){var t=this.element.offsetWidth,n=this.element.offsetHeight;return{width:t,height:n}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HTMLTooltipItemsElements",{get:function(){var t=this.attributes,n=t.data,i=t.template;return n.map(function(a,s){var o=a.name,A=o===void 0?"":o,l=a.color,c=l===void 0?"black":l,u=a.index,h=Sn(a,["name","color","index"]),g=Ee({name:A,color:c,index:u??s},h);return RB(FK(i.item,g))})},enumerable:!1,configurable:!0}),e.prototype.render=function(t,n){this.renderHTMLTooltipElement(),this.updatePosition()},e.prototype.destroy=function(){var t;(t=this.element)===null||t===void 0||t.remove(),r.prototype.destroy.call(this)},e.prototype.show=function(t,n){var i=this;if(t!==void 0&&n!==void 0){var a=this.element.style.visibility==="hidden",s=function(){i.attributes.x=t??i.attributes.x,i.attributes.y=n??i.attributes.y,i.updatePosition()};a?this.closeTransition(s):s()}this.element.style.visibility="visible"},e.prototype.hide=function(t,n){t===void 0&&(t=0),n===void 0&&(n=0);var i=this.attributes.enterable;i&&this.isCursorEntered(t,n)||(this.element.style.visibility="hidden")},e.prototype.initShape=function(){var t=this.attributes.template;this.element=RB(t.container),this.id&&this.element.setAttribute("id",this.id)},e.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var t=this.attributes.content;t&&(typeof t=="string"?this.element.innerHTML=t:uR(this.element,t))}},e.prototype.renderHTMLTooltipElement=function(){var t,n,i=this.attributes,a=i.template,s=i.title,o=i.enterable,A=i.style,l=i.content,c=Xx(a.prefixCls),u=this.element;if(this.element.style.pointerEvents=o?"auto":"none",l)this.renderCustomContent();else{s?(u.innerHTML=a.title,u.getElementsByClassName(c.TITLE)[0].innerHTML=s):(n=(t=u.getElementsByClassName(c.TITLE))===null||t===void 0?void 0:t[0])===null||n===void 0||n.remove();var h=this.HTMLTooltipItemsElements,g=document.createElement("ul");g.className=c.LIST,uR(g,h);var p=this.element.querySelector(".".concat(c.LIST));p?p.replaceWith(g):u.appendChild(g)}Tde(u,A)},e.prototype.getRelativeOffsetFromCursor=function(t){var n=this.attributes,i=n.position,a=n.offset,s=t||i,o=s.split("-"),A={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},l=this.elementSize,c=l.width,u=l.height,h=[-c/2,-u/2];return o.forEach(function(g){var p=Y(h,2),v=p[0],m=p[1],w=Y(A[g],2),b=w[0],_=w[1];h=[v+(c/2+a[0])*b,m+(u/2+a[1])*_]}),h},e.prototype.setOffsetPosition=function(t){var n=Y(t,2),i=n[0],a=n[1],s=this.attributes,o=s.x,A=o===void 0?0:o,l=s.y,c=l===void 0?0:l,u=s.container,h=u.x,g=u.y;this.element.style.left="".concat(+A+h+i,"px"),this.element.style.top="".concat(+c+g+a,"px")},e.prototype.updatePosition=function(){var t=this.attributes.showDelay,n=t===void 0?60:t,i=Date.now();this.timestamp>0&&i-this.timestamp<n||(this.timestamp=i,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},e.prototype.autoPosition=function(t){var n=Y(t,2),i=n[0],a=n[1],s=this.attributes,o=s.x,A=s.y,l=s.bounding,c=s.position;if(!l)return[i,a];var u=this.element,h=u.offsetWidth,g=u.offsetHeight,p=Y([+o+i,+A+a],2),v=p[0],m=p[1],w={left:"right",right:"left",top:"bottom",bottom:"top"},b=l.x,_=l.y,C=l.width,M=l.height,F={left:v<b,right:v+h>b+C,top:m<_,bottom:m+g>_+M},k=[];c.split("-").forEach(function(N){F[N]?k.push(w[N]):k.push(N)});var P=k.join("-");return this.getRelativeOffsetFromCursor(P)},e.prototype.isCursorEntered=function(t,n){if(this.element){var i=this.element.getBoundingClientRect(),a=i.x,s=i.y,o=i.width,A=i.height;return new Ei(a,s,o,A).isPointIn(t,n)}return!1},e.prototype.closeTransition=function(t){var n=this,i=this.element.style.transition;this.element.style.transition="none",t(),setTimeout(function(){n.element.style.transition=i},10)},e.tag="tooltip",e})(Un),dge=(function(r){Et(e,r);function e(t){var n=r.call(this,fr({},e.defaultOptions,t))||this;return n.hoverColor="#f5f5f5",n.selectedColor="#e6f7ff",n.background=n.appendChild(new Wr({})),n.label=n.background.appendChild(new xr({})),n}return Object.defineProperty(e.prototype,"padding",{get:function(){return $r(this.style.padding)},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(){var t=this.style,n=t.label,i=t.value,a=vt(this.attributes,"label");Ye(this.label).maybeAppend(".label",function(){return so(n)}).attr("className","label").styles(a),this.label.attr("__data__",i)},e.prototype.renderBackground=function(){var t=this.label.getBBox(),n=Y(this.padding,4),i=n[0],a=n[1],s=n[2],o=n[3],A=t.width,l=t.height,c=A+o+a,u=l+i+s,h=vt(this.attributes,"background"),g=this.style,p=g.width,v=p===void 0?0:p,m=g.height,w=m===void 0?0:m,b=g.selected;this.background.attr(Ee(Ee({},h),{width:Math.max(c,v),height:Math.max(u,w),fill:b?this.selectedColor:"#fff"})),this.label.attr({transform:"translate(".concat(o,", ").concat((u-l)/2,")")})},e.prototype.render=function(){this.renderLabel(),this.renderBackground()},e.prototype.bindEvents=function(){var t=this;this.addEventListener("pointerenter",function(){t.style.selected||t.background.attr("fill",t.hoverColor)}),this.addEventListener("pointerleave",function(){t.style.selected||t.background.attr("fill",t.style.backgroundFill)});var n=this;this.addEventListener("click",function(){var i=t.style,a=i.label,s=i.value,o=i.onClick;o==null||o(s,{label:a,value:s},n)})},e.defaultOptions={style:{value:"",label:"",cursor:"pointer"}},e})(Un),hge=(function(r){Et(e,r);function e(t){var n,i,a=r.call(this,fr({},e.defaultOptions,t))||this;a.currentValue=(n=e.defaultOptions.style)===null||n===void 0?void 0:n.defaultValue,a.isPointerInSelect=!1,a.select=a.appendChild(new Wr({className:"select",style:{cursor:"pointer",width:0,height:0}})),a.dropdown=a.appendChild(new Wr({className:"dropdown"}));var s=a.style.defaultValue;return s&&(!((i=a.style.options)===null||i===void 0)&&i.some(function(o){return o.value===s}))&&(a.currentValue=s),a}return e.prototype.setValue=function(t){this.currentValue=t,this.render()},e.prototype.getValue=function(){return this.currentValue},Object.defineProperty(e.prototype,"dropdownPadding",{get:function(){return $r(this.style.dropdownPadding)},enumerable:!1,configurable:!0}),e.prototype.renderSelect=function(){var t=this,n,i=this.style,a=i.x,s=i.y,o=i.width,A=i.height,l=i.bordered,c=i.showDropdownIcon,u=vt(this.attributes,"select"),h=vt(this.attributes,"placeholder");this.select.attr(Ee(Ee({x:a,y:s,width:o,height:A},u),{fill:"#fff",strokeWidth:l?1:0}));var g=this.dropdownPadding,p=10;c&&Ye(this.select).maybeAppend(".dropdown-icon","path").style("d","M-5,-3.5 L0,3.5 L5,-3.5").style("transform","translate(".concat(a+o-p-g[1]-g[3],", ").concat(s+A/2,")")).style("lineWidth",1).style("stroke",this.select.style.stroke);var v=(n=this.style.options)===null||n===void 0?void 0:n.find(function(_){return _.value===t.currentValue}),m=Ee({x:a+g[3]},h);Ye(this.select).selectAll(".placeholder").data(v?[]:[1]).join(function(_){return _.append("text").attr("className","placeholder").styles(m).style("y",function(){var C=this.getBBox();return s+(A-C.height)/2})},function(_){return _.styles(m)},function(_){return _.remove()});var w=vt(this.attributes,"optionLabel"),b=Ee({x:a+g[3]},w);Ye(this.select).selectAll(".value").data(v?[v]:[]).join(function(_){return _.append(function(C){return so(C.label)}).attr("className","value").styles(b).style("y",function(){var C=this.getBBox();return s+(A-C.height)/2})},function(_){return _.styles(b)},function(_){return _.remove()})},e.prototype.renderDropdown=function(){var t=this,n,i,a=this.style,s=a.x,o=a.y,A=a.width,l=a.height,c=a.options,u=a.onSelect,h=a.open,g=vt(this.attributes,"dropdown"),p=vt(this.attributes,"option"),v=this.dropdownPadding;Ye(this.dropdown).maybeAppend(".dropdown-container","g").attr("className","dropdown-container").selectAll(".dropdown-item").data(c,function(b){return b.value}).join(function(b){return b.append(function(_){return new dge({className:"dropdown-item",style:Ee(Ee(Ee({},_),p),{width:A-v[1]-v[3],selected:_.value===t.currentValue,onClick:function(C,M,F){t.setValue(C),u==null||u(C,M,F),t.dispatchEvent(new cr("change",{detail:{value:C,option:M,item:F}})),Xa(t.dropdown)}})})}).each(function(_,C){var M,F=(M=this.parentNode)===null||M===void 0?void 0:M.children,k=F.reduce(function(P,N,D){return D<C&&(P+=N.getBBox().height),P},0);this.attr("transform","translate(".concat(v[3],", ").concat(v[0]+k,")"))})},function(b){return b.update(function(_){return{selected:_.value===t.currentValue}})},function(b){return b.remove()});var m=(i=(n=this.dropdown.getElementsByClassName("dropdown-container"))===null||n===void 0?void 0:n[0])===null||i===void 0?void 0:i.getBBox(),w=g.spacing;this.dropdown.attr(Ee({transform:"translate(".concat(s,", ").concat(o+l+w,")"),width:m.width+v[1]+v[3],height:m.height+v[0]+v[2]},g)),!h&&Xa(this.dropdown)},e.prototype.render=function(){this.renderSelect(),this.renderDropdown()},e.prototype.bindEvents=function(){var t=this;this.addEventListener("click",function(n){n.stopPropagation()}),this.select.addEventListener("click",function(){t.dropdown.style.visibility==="visible"?Xa(t.dropdown):Bh(t.dropdown)}),this.addEventListener("pointerenter",function(){t.isPointerInSelect=!0}),this.addEventListener("pointerleave",function(){t.isPointerInSelect=!1}),document==null||document.addEventListener("click",function(){t.isPointerInSelect||Xa(t.dropdown)})},e.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:"",selectRadius:8,selectStroke:"#d9d9d9",showDropdownIcon:!0,placeholderText:"",placeholderFontSize:12,placeholderTextBaseline:"top",placeholderFill:"#c2c2c2",dropdownFill:"#fff",dropdownStroke:"#d9d9d9",dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:"rgba(0, 0, 0, 0.08)",dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:"top",optionBackgroundFill:"#fff",optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:"top"}},e})(Un),ss=(function(r){Et(e,r);function e(t){var n=r.call(this,fr({},{style:{backgroundOpacity:e.backgroundOpacities.default}},e.defaultOptions,t))||this;return n.showBackground=!0,n.background=n.appendChild(new Wr({})),n.icon=n.appendChild(new xr({})),n}return Object.defineProperty(e.prototype,"label",{get:function(){return"BaseIcon"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return Math.log10(this.attributes.size)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return $r(this.attributes.size/5)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconSize",{get:function(){var t=this.attributes.size,n=Y(this.padding,4),i=n[0],a=n[1],s=n[2],o=n[3];return Math.max(t-Math.max(o+a,i+s),this.lineWidth*2+1)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var t=this.attributes,n=t.x,i=t.y,a=t.size,s=a/2,o=vt(this.attributes,"background");this.background.attr(Ee({x:n-s,y:i-s,width:a,height:a},o))},e.prototype.showIndicator=function(){if(this.label){var t=this.attributes.size,n=this.background.getBBox(),i=n.x,a=n.y;this.indicator.update({x:i+t/2,y:a-5,labelText:this.label,visibility:"visible"})}},e.prototype.hideIndicator=function(){this.indicator.update({visibility:"hidden"})},e.prototype.connectedCallback=function(){var t;r.prototype.connectedCallback.call(this);var n=this.attributes.size,i=this.background.getBBox(),a=i.x,s=i.y,o=(t=this.ownerDocument)===null||t===void 0?void 0:t.defaultView;o&&(this.indicator=o.appendChild(new lge({style:{x:a+n/2,y:s-n/2,visibility:"hidden",position:"top",radius:3,zIndex:100}})))},e.prototype.disconnectedCallback=function(){this.indicator.destroy()},e.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground()},e.prototype.bindEvents=function(){var t=this,n=this.attributes.onClick;if(this.addEventListener("click",function(){n==null||n(t)}),this.showBackground){var i=function(){return t.background.attr({opacity:e.backgroundOpacities.default})},a=function(){return t.background.attr({opacity:e.backgroundOpacities.hover})},s=function(){return t.background.attr({opacity:e.backgroundOpacities.active})};this.addEventListener("pointerenter",function(){a(),t.showIndicator()}),this.addEventListener("pointerleave",function(){i(),t.hideIndicator()}),this.addEventListener("pointerdown",function(){s()}),this.addEventListener("pointerup",function(){i()})}},e.tag="IconBase",e.defaultOptions={style:{x:0,y:0,size:10,color:"#565758",backgroundRadius:4,backgroundFill:"#e2e2e2"}},e.backgroundOpacities={default:0,hover:.8,active:1},e})(Un),th=function(r,e){return e===void 0&&(e="#565758"),new ci({style:{fill:e,d:"M ".concat(r,",").concat(r," L -").concat(r,",0 L ").concat(r,",-").concat(r," Z"),transformOrigin:"center"}})},fge=(function(r){Et(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.arcPath=function(t,n,i){var a=Y([i,i],2),s=a[0],o=a[1],A=function(v){return[t+i*Math.cos(v),n+i*Math.sin(v)]},l=Y(A(-5/4*Math.PI),2),c=l[0],u=l[1],h=Y(A(1/4*Math.PI),2),g=h[0],p=h[1];return"M".concat(c,",").concat(u,",A").concat(s,",").concat(o,",0,1,1,").concat(g,",").concat(p)},Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this.iconSize,o=this.lineWidth,A=o+.5;Ye(this.icon).maybeAppend(".reset","path").styles({stroke:a,lineWidth:o,d:this.arcPath(n,i,s/2-o),markerStart:th(A,a)})},e})(ss),gge=(function(r){Et(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this.iconSize,o=s/2,A=s/2/Math.pow(3,.5),l=[[n,i],[n,i-A],[n-o,i],[n,i+A],[n,i],[n+o,i-A],[n+o,i+A],[n,i]];Ye(this.icon).maybeAppend(".backward","polygon").styles({points:l,fill:a})},e})(ss),pge=(function(r){Et(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this.iconSize,o=s/2,A=s/2/Math.pow(3,.5),l=[[n,i],[n,i-A],[n+o,i],[n,i+A],[n,i],[n-o,i-A],[n-o,i+A],[n,i]];Ye(this.icon).maybeAppend(".forward","polygon").styles({points:l,fill:a})},e})(ss),vge=(function(r){Et(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this.iconSize,o=s/3*Math.pow(3,.5)*.8,A=[[n+o,i],[n-o/2,i-s/2*.8],[n-o/2,i+s/2*.8],[n+o,i]];Ye(this.icon).maybeAppend(".play","polygon").styles({points:A,fill:a})},e})(ss),mge=(function(r){Et(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this.iconSize,o=s/3,A=[[n-o,i-s/2],[n-o,i+s/2],[n-o/2,i+s/2],[n-o/2,i-s/2],[n-o,i-s/2],[n+o/2,i-s/2],[n+o/2,i+s/2],[n+o,i+s/2],[n+o,i-s/2]];Ye(this.icon).maybeAppend(".pause","polygon").styles({points:A,fill:a})},e})(ss),yge=(function(r){Et(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this,o=s.iconSize,A=s.lineWidth,l=A;Ye(this.icon).maybeAppend(".left-line","line").styles({x1:n-o/2,y1:i-o/2,x2:n-o/2,y2:i+o/2,stroke:a,lineWidth:A}),Ye(this.icon).maybeAppend(".right-line","line").styles({x1:n+o/2,y1:i-o/2,x2:n+o/2,y2:i+o/2,stroke:a,lineWidth:A}),Ye(this.icon).maybeAppend(".left-arrow","line").styles({x1:n,y1:i,x2:n-o/2+l*2,y2:i,stroke:a,lineWidth:A,markerEnd:th(A*2,a)}),Ye(this.icon).maybeAppend(".right-arrow","line").styles({x1:n,y1:i,x2:n+o/2-l*2,y2:i,stroke:a,lineWidth:A,markerEnd:th(A*2,a)})},e})(ss),wge=(function(r){Et(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this,o=s.iconSize,A=s.lineWidth;Ye(this.icon).maybeAppend(".line","line").styles({x1:n,y1:i-o/2,x2:n,y2:i+o/2,stroke:a,lineWidth:A});var l=A;Ye(this.icon).maybeAppend(".left-arrow","line").styles({x1:n-o/2-l*2,y1:i,x2:n-l*2,y2:i,stroke:a,lineWidth:A,markerEnd:th(A*2,a)}),Ye(this.icon).maybeAppend(".right-arrow","line").styles({x1:n+o/2+l*2,y1:i,x2:n+l*2,y2:i,stroke:a,lineWidth:A,markerEnd:th(A*2,a)})},e})(ss),_8=function(r){return[[-r/2,-r/2],[-r/2,r/2],[r/2,r/2]]},bge=(function(r){Et(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this,o=s.iconSize,A=s.lineWidth,l=A,c=(o-l*2-A)/4,u=(o-l*2-A)/2,h=Y([n-o/2+l,i+o/2-l*2],2),g=h[0],p=h[1];Ye(this.icon).maybeAppend(".coordinate","polyline").styles({points:_8(o).map(function(v){var m=Y(v,2),w=m[0],b=m[1];return[w+n,b+i]}),stroke:a,lineWidth:A}),Ye(this.icon).maybeAppend(".line","polyline").styles({points:[[g,p],[g+c,p-u],[g+c*2,p],[g+c*4,p-u*2]],stroke:a,lineWidth:A})},e})(ss),_ge=(function(r){Et(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return[1,4,2,4,3]},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.data,n=this.attributes,i=n.x,a=n.y,s=n.color,o=this,A=o.iconSize,l=o.lineWidth,c=l,u=(A-c)/t.length,h=(A-c*2)/4,g=Y([i-A/2+c*2,a+A/2-c],2),p=g[0],v=g[1];Ye(this.icon).maybeAppend(".coordinate","polyline").styles({points:_8(A).map(function(m){var w=Y(m,2),b=w[0],_=w[1];return[b+i,_+a]}),stroke:s,lineWidth:l}),Ye(this.icon).maybeAppend(".bars","g").selectAll(".column").data(this.data.map(function(m,w){return{value:m,index:w}})).join(function(m){return m.append("line").attr("className","column").style("x1",function(w){var b=w.index;return p+u*b}).style("y1",v).style("x2",function(w){var b=w.index;return p+u*b}).style("y2",function(w){var b=w.value;return v-h*b}).styles({y1:v,stroke:s,lineWidth:l})})},e})(ss),Ege=(function(r){Et(e,r);function e(t){var n=r.call(this,fr({},{style:{color:"#d8d9d9"}},t))||this;return n.showBackground=!1,n}return e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.color,s=this,o=s.iconSize,A=s.lineWidth;Ye(this.icon).maybeAppend(".split","line").styles({x1:n,y1:i-o/2,x2:n,y2:i+o/2,stroke:a,lineWidth:A})},e})(ss),Zx=(function(r){Et(e,r);function e(){var t=r.apply(this,Ze([],Y(arguments),!1))||this;return t.showBackground=!1,t}return Object.defineProperty(e.prototype,"padding",{get:function(){return $r(0)},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.iconSize,n=this.attributes,i=n.x,a=n.y,s=n.speed,o=s===void 0?1:s,A=s2(this.attributes,["x","y","transform","transformOrigin","width","height","size","color","speed"]),l=Rn(t,20,1/0),c=20,u=Ee(Ee({},A),{x:i-l/2,y:a-c/2,width:l,height:c,defaultValue:o,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:t/5,placeholderFontSize:t/2,optionPadding:0,optionLabelFontSize:t/2,optionBackgroundRadius:1,options:[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}]});Ye(this.icon).maybeAppend(".speed",function(){return new hge({style:u})}).attr("className","speed").each(function(){this.update(u)})},e.tag="SpeedSelect",e})(ss),kS=(function(r){Et(e,r);function e(t){var n=r.call(this,t)||this;return n.icon=n.appendChild(new xr({})),n.currentType=n.attributes.type,n}return e.prototype.getType=function(){return this.currentType},e.prototype.render=function(){var t=this,n=this.attributes;n.onChange;var i=Sn(n,["onChange"]);Ye(this.icon).selectAll(".icon").data([this.currentType]).join(function(a){return a.append(function(s){var o,A=(o=t.toggles.find(function(l){var c=Y(l,1),u=c[0];return u===s}))===null||o===void 0?void 0:o[1];if(!A)throw new Error("Invalid type: ".concat(s));return new A({})}).attr("className","icon").styles(i,!1).update({})},function(a){return a.styles({restStyles:i}).update({})},function(a){return a.remove()})},e.prototype.bindEvents=function(){var t=this,n=this.attributes.onChange;this.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation();var a=(t.toggles.findIndex(function(o){var A=Y(o,1),l=A[0];return l===t.currentType})+1)%t.toggles.length,s=t.toggles[a][0];n==null||n(t.currentType),t.currentType=s,t.render()})},e.tag="ToggleIcon",e})(Un),Jx=(function(r){Et(e,r);function e(t){var n=r.call(this,fr({},{style:{type:"play"}},t))||this;return n.toggles=[["play",vge],["pause",mge]],n}return e})(kS),e2=(function(r){Et(e,r);function e(t){var n=r.call(this,fr({},{style:{type:"range"}},t))||this;return n.toggles=[["range",yge],["value",wge]],n}return e})(kS),t2=(function(r){Et(e,r);function e(t){var n=r.call(this,fr({},{style:{type:"column"}},t))||this;return n.toggles=[["line",bge],["column",_ge]],n}return e})(kS),Cge={reset:fge,speed:Zx,backward:gge,playPause:Jx,forward:pge,selectionType:e2,chartType:t2,split:Ege},Bge=(function(r){Et(e,r);function e(t){var n=r.call(this,fr({},e.defaultOptions,t))||this;return n.background=n.appendChild(new Wr({})),n.functions=n.appendChild(new xr({})),n}return Object.defineProperty(e.prototype,"padding",{get:function(){return $r(this.attributes.padding)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var t=this.style,n=t.x,i=t.y,a=t.width,s=t.height,o=vt(this.attributes,"background");this.background.attr(Ee({x:n,y:i,width:a,height:s},o))},e.prototype.renderFunctions=function(){var t=this,n,i=this.attributes,a=i.functions,s=i.iconSize,o=i.iconSpacing,A=i.x,l=i.y,c=i.width,u=i.height,h=i.align,g=Y(this.padding,4),p=g[1],v=g[3],m=a.reduce(function(_,C){return _.length&&C.length?_.concat.apply(_,Ze(["split"],Y(C),!1)):_.concat.apply(_,Ze([],Y(C),!1))},[]),w=m.length*(s+o)-o,b={left:v+s/2,center:(c-w)/2+s/2,right:c-w-v-p+s/2}[h]||0;(n=this.speedSelect)===null||n===void 0||n.destroy(),this.functions.removeChildren(),m.forEach(function(_,C){var M,F=Cge[_],k={x:A+C*(s+o)+b,y:l+u/2,size:s};if(F===Zx?(k.speed=t.attributes.speed,k.onSelect=function(N){return t.handleFunctionChange(_,{value:N})}):[Jx,e2,t2].includes(F)?(k.onChange=function(N){return t.handleFunctionChange(_,{value:N})},F===Jx&&(k.type=t.attributes.state==="play"?"pause":"play"),F===e2&&(k.type=t.attributes.selectionType==="range"?"value":"range"),F===t2&&(k.type=t.attributes.chartType==="line"?"column":"line")):k.onClick=function(){return t.handleFunctionChange(_,{value:_})},F===Zx){var P=(M=t.ownerDocument)===null||M===void 0?void 0:M.defaultView;P&&(t.speedSelect=new F({style:Ee(Ee({},k),{zIndex:100})}),P.appendChild(t.speedSelect))}else t.functions.appendChild(new F({style:k}))})},e.prototype.disconnectedCallback=function(){var t;r.prototype.disconnectedCallback.call(this),(t=this.speedSelect)===null||t===void 0||t.destroy()},e.prototype.render=function(){this.renderBackground(),this.renderFunctions()},e.prototype.handleFunctionChange=function(t,n){var i=this.attributes.onChange;i==null||i(t,n)},e.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:"center",iconSize:25,iconSpacing:0,speed:1,state:"pause",chartType:"line",selectionType:"range",backgroundFill:"#fbfdff",backgroundStroke:"#ebedf0",functions:[["reset","speed"],["backward","playPause","forward"],["selectionType","chartType"]]}},e})(Un),xge=(function(r){Et(e,r);function e(t){var n=r.call(this,fr({},e.defaultOptions,t))||this;return n.bindEvents(),n}return e.prototype.bindEvents=function(){var t=this;this.addEventListener("mouseenter",function(){t.attr("lineWidth",Math.ceil(+(t.style.r||0)/2))}),this.addEventListener("mouseleave",function(){t.attr("lineWidth",0)})},e.defaultOptions={style:{r:5,fill:"#3f7cf7",lineWidth:0,stroke:"#3f7cf7",strokeOpacity:.5,cursor:"pointer"}},e})(xs),Sge=(function(r){Et(e,r);function e(t){return r.call(this,fr({},e.defaultOptions,t))||this}return e.prototype.renderBackground=function(){var t=this.attributes,n=t.x,i=t.y,a=t.width,s=t.height,o=vt(this.attributes,"background");Ye(this).maybeAppend("background","rect").attr("className","background").styles(Ee({x:n-a/2,y:i-s/2,width:a,height:s},o))},e.prototype.renderIcon=function(){var t=this.attributes,n=t.x,i=t.y,a=t.iconSize,s=vt(this.attributes,"icon"),o=1,A=a/2;Ye(this).maybeAppend("icon-left-line","line").attr("className","icon-left-line").styles(Ee({x1:n-o,y1:i-A,x2:n-o,y2:i+A},s)),Ye(this).maybeAppend("icon-right-line","line").attr("className","icon-right-line").styles(Ee({x1:n+o,y1:i-A,x2:n+o,y2:i+A},s))},e.prototype.renderBorder=function(){var t=this.attributes,n=t.x,i=t.y,a=t.width,s=t.height,o=t.type,A=vt(this.attributes,"border"),l=o==="start"?+a/2:-a/2;Ye(this).maybeAppend("border","line").attr("className","border").styles(Ee({x1:l+n,y1:i-s/2,x2:l+n,y2:i+s/2},A))},e.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder()},e.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:"start",backgroundFill:"#fff",backgroundFillOpacity:.5,iconStroke:"#9a9a9a",iconLineWidth:1,borderStroke:"#e8e8e8",borderLineWidth:1}},e})(Un);function Tge(r,e){return typeof r=="number"?E8(r):Mge(r,e)}function Mge(r,e){var t=new Date(r);switch(e){case"half-hour":case"hour":case"four-hour":return[0,6,12,18].includes(t.getHours())&&t.getMinutes()===0?Pi(t,`HH:mm
YYYY-MM-DD`):Pi(t,"HH:mm");case"half-day":return t.getHours()<12?`AM
`.concat(Pi(t,"YYYY-MM-DD")):"PM";case"day":return[1,10,20].includes(t.getDate())?Pi(t,`DD
YYYY-MM`):Pi(t,"DD");case"week":return t.getDate()<=7?Pi(t,`DD
YYYY-MM`):Pi(t,"DD");case"month":return[0,6].includes(t.getMonth())?Pi(t,`MM
YYYY`):Pi(t,"MM");case"season":return[0].includes(t.getMonth())?Pi(t,`MM
YYYY`):Pi(t,"MM");case"year":return Pi(t,"YYYY");default:return Pi(t,"YYYY-MM-DD HH:mm")}}function E8(r){var e=String(Math.floor(r/3600)).padStart(2,"0"),t=String(Math.floor(r%3600/60)).padStart(2,"0"),n=String(Math.floor(r%60)).padStart(2,"0");return r<3600?"".concat(t,":").concat(n):"".concat(e,":").concat(t,":").concat(n)}var Fge=(function(r){Et(e,r);function e(t){var n=r.call(this,fr({},e.defaultOptions,t))||this;n.axis=n.appendChild(new Qfe({style:{type:"linear",startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),n.timeline=n.appendChild(new Rhe({style:{onChange:function(u){n.handleSliderChange(u)}}})),n.controller=n.appendChild(new Bge({})),n.states={},n.handleSliderChange=function(u){var h=(function(){var g=n.states.values;return Array.isArray(g)?Ze([],Y(g),!1):g})();n.setBySliderValues(u),n.dispatchOnChange(h)};var i=n.attributes,a=i.selectionType,s=i.chartType,o=i.speed,A=i.state,l=i.playMode,c=i.values;return n.states={chartType:s,playMode:l,selectionType:a,speed:o,state:A},n.setByTimebarValues(c),n}return Object.defineProperty(e.prototype,"data",{get:function(){var t=this.attributes.data,n=function(i,a){return i.time<a.time?-1:i.time>a.time?1:0};return t.sort(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"space",{get:function(){var t=this.attributes,n=t.x,i=t.y,a=t.width,s=t.height,o=t.type,A=t.controllerHeight,l=Rn(+s-A,0,+s),c=new Ei(n,i+ +s-A,+a,A),u,h=0;o==="chart"?(h=35,u=new Ei(n,i+l-h,+a,h)):u=new Ei;var g=o==="time"?10:l,p=new Ei(n,i+(o==="time"?l:l-g),+a,g-h);return{axisBBox:u,controllerBBox:c,timelineBBox:p}},enumerable:!1,configurable:!0}),e.prototype.setBySliderValues=function(t){var n,i,a=this.data,s=Y(Array.isArray(t)?t:[0,t],2),o=s[0],A=s[1],l=a.length,c=a[Math.floor(o*l)],u=a[Math.ceil(A*l)-(Array.isArray(t)?0:1)];this.states.values=[(n=c==null?void 0:c.time)!==null&&n!==void 0?n:a[0].time,(i=u==null?void 0:u.time)!==null&&i!==void 0?i:1/0]},e.prototype.setByTimebarValues=function(t){var n,i,a,s=this.data,o=Y(Array.isArray(t)?t:[void 0,t],2),A=o[0],l=o[1],c=s.find(function(h){var g=h.time;return g===A}),u=s.find(function(h){var g=h.time;return g===l});this.states.values=[(n=c==null?void 0:c.time)!==null&&n!==void 0?n:(i=s[0])===null||i===void 0?void 0:i.time,(a=u==null?void 0:u.time)!==null&&a!==void 0?a:1/0]},e.prototype.setByIndex=function(t){var n,i,a,s,o=this.data,A=Y(t,2),l=A[0],c=A[1];this.states.values=[(i=(n=o[l])===null||n===void 0?void 0:n.time)!==null&&i!==void 0?i:o[0].time,(s=(a=this.data[c])===null||a===void 0?void 0:a.time)!==null&&s!==void 0?s:1/0]},Object.defineProperty(e.prototype,"sliderValues",{get:function(){var t=this.states,n=t.values,i=t.selectionType,a=Y(Array.isArray(n)?n:[void 0,n],2),s=a[0],o=a[1],A=this.data,l=A.length,c=i==="value",u=function(){var g=A.findIndex(function(p){var v=p.time;return v===s});return c?0:g>-1?g/l:0},h=function(){if(o===1/0)return 1;var g=A.findIndex(function(p){var v=p.time;return v===o});return g>-1?g/l:c?.5:1};return[u(),h()]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var t=this.states,n=t.values,i=t.selectionType,a=Y(Array.isArray(n)?n:[this.data[0].time,n],2),s=a[0],o=a[1];return i==="value"?o:[s,o]},enumerable:!1,configurable:!0}),e.prototype.getDatumByRatio=function(t){var n=this.data,i=n.length,a=Math.floor(t*(i-1));return n[a]},Object.defineProperty(e.prototype,"chartHandleIconShape",{get:function(){var t=this.states.selectionType,n=this.space.timelineBBox.height;return t==="range"?function(i){return new Sge({style:{type:i,height:n,iconSize:n/6}})}:function(){return new hl({style:{x1:0,y1:-n/2,x2:0,y2:n/2,lineWidth:2,stroke:"#c8c8c8"}})}},enumerable:!1,configurable:!0}),e.prototype.getChartStyle=function(t){var n=this,i=t.x,a=t.y,s=t.width,o=t.height,A=this.states,l=A.selectionType,c=A.chartType,u=this.data,h=this.attributes,g=h.type,p=h.labelFormatter,v=vt(this.attributes,"chart");v.type;var m=Sn(v,["type"]),w=l==="range";if(g==="time")return Ee({handleIconShape:function(){return new xge({})},selectionFill:"#2e7ff8",selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:w?-15:0,autoFitLabel:w,handleSpacing:w?-15:0,trackFill:"#edeeef",trackLength:s,trackOpacity:.5,trackRadius:o/2,trackSize:o/2,type:l,values:this.sliderValues,formatter:function(C){if(p)return p(C);var M=n.getDatumByRatio(C).time;return typeof M=="number"?E8(M):Pi(M,"YYYY-MM-DD HH:mm:ss")},transform:"translate(".concat(i,", ").concat(a,")"),zIndex:1},m);var b=l==="range"?5:0,_=u.map(function(C){var M=C.value;return M});return Ee({handleIconOffset:b,handleIconShape:this.chartHandleIconShape,selectionFill:"#fff",selectionFillOpacity:.5,selectionType:"invert",sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:"#d4e5fd",sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:_,sparklineType:c,sparklineScale:.8,trackLength:s,trackSize:o,type:l,values:this.sliderValues,transform:"translate(".concat(i,", ").concat(a,")"),zIndex:1},m)},e.prototype.renderChart=function(t){t===void 0&&(t=this.space.timelineBBox),this.timeline.update(this.getChartStyle(t))},e.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues)},e.prototype.getAxisStyle=function(t){var n=this.data,i=this.attributes,a=i.interval,s=i.labelFormatter,o=vt(this.attributes,"axis"),A=t.x,l=t.y,c=t.width,u=Ze(Ze([],Y(n),!1),[{time:0}],!1).map(function(g,p,v){var m=g.time;return{label:"".concat(m),value:p/(v.length-1),time:m}}),h=Ee({startPos:[A,l],endPos:[A+c,l],data:u,labelFilter:function(g,p){return p<u.length-1},labelFormatter:function(g){var p=g.time;return s?s(p):Tge(p,a)}},o);return h},e.prototype.renderAxis=function(t){t===void 0&&(t=this.space.axisBBox);var n=this.attributes.type;n==="chart"&&this.axis.update(this.getAxisStyle(t))},e.prototype.renderController=function(t){t===void 0&&(t=this.space.controllerBBox);var n=this.attributes.type,i=this.states,a=i.state,s=i.speed,o=i.selectionType,A=i.chartType,l=vt(this.attributes,"controller"),c=this,u=Ee(Ee(Ee({},t),{iconSize:20,speed:s,state:a,selectionType:o,chartType:A,onChange:function(h,g){var p=g.value;switch(h){case"reset":c.internalReset();break;case"speed":c.handleSpeedChange(p);break;case"backward":c.internalBackward();break;case"playPause":p==="play"?c.internalPlay():c.internalPause();break;case"forward":c.internalForward();break;case"selectionType":c.handleSelectionTypeChange(p);break;case"chartType":c.handleChartTypeChange(p);break}}}),l);n==="time"&&(u.functions=[["reset","speed"],["backward","playPause","forward"],["selectionType"]]),this.controller.update(u)},e.prototype.dispatchOnChange=function(t){var n=this.data,i=this.attributes.onChange,a=this.states,s=a.values,o=a.selectionType,A=Y(s,2),l=A[0],c=A[1],u=c===1/0?n.at(-1).time:c,h=o==="range"?[l,u]:u,g=function(p,v){return Array.isArray(p)?Array.isArray(v)?p[0]===v[0]&&(p[1]===v[1]||p[1]===1/0||v[1]===1/0):!1:Array.isArray(v)?!1:p===v};(!t||!g(t,h))&&(i==null||i(o==="range"?[l,u]:u))},e.prototype.internalReset=function(t){var n,i,a=this.states.selectionType;this.internalPause(),this.setBySliderValues(a==="range"?[0,1]:[0,0]),this.renderController(),this.updateSelection(),t||((i=(n=this.attributes)===null||n===void 0?void 0:n.onReset)===null||i===void 0||i.call(n),this.dispatchOnChange())},e.prototype.reset=function(){this.internalReset()},e.prototype.moveSelection=function(t,n){var i=this.data,a=i.length,s=this.states,o=s.values,A=s.selectionType,l=s.playMode,c=Y(o,2),u=c[0],h=c[1],g=i.findIndex(function(_){var C=_.time;return C===u}),p=i.findIndex(function(_){var C=_.time;return C===h});p===-1&&(p=a);var v=t==="backward"?-1:1,m;A==="range"?l==="acc"?(m=[g,p+v],v===-1&&g===p&&(m=[g,a])):m=[g+v,p+v]:m=[g,p+v];var w=function(_){var C=Y(_.sort(function(P,N){return P-N}),2),M=C[0],F=C[1],k=function(P){return Rn(P,0,a)};return F>a?A==="value"?[0,0]:l==="acc"?[k(M),k(M)]:[0,k(F-M)]:M<0?l==="acc"?[0,k(F)]:[k(M+a-F),a]:[k(M),k(F)]},b=w(m);return this.setByIndex(b),this.updateSelection(),b},e.prototype.internalBackward=function(t){var n,i,a=this.moveSelection("backward",t);return t||((i=(n=this.attributes)===null||n===void 0?void 0:n.onBackward)===null||i===void 0||i.call(n),this.dispatchOnChange()),a},e.prototype.backward=function(){this.internalBackward()},e.prototype.internalPlay=function(t){var n=this,i,a,s=this.data,o=this.attributes.loop,A=this.states.speed,l=A===void 0?1:A;this.playInterval=window.setInterval(function(){var c=n.internalForward();c[1]===s.length&&!o&&(n.internalPause(),n.renderController())},1e3/l),this.states.state="play",!t&&((a=(i=this.attributes)===null||i===void 0?void 0:i.onPlay)===null||a===void 0||a.call(i))},e.prototype.play=function(){this.internalPlay()},e.prototype.internalPause=function(t){var n,i;clearInterval(this.playInterval),this.states.state="pause",!t&&((i=(n=this.attributes)===null||n===void 0?void 0:n.onPause)===null||i===void 0||i.call(n))},e.prototype.pause=function(){this.internalPause()},e.prototype.internalForward=function(t){var n,i,a=this.moveSelection("forward",t);return t||((i=(n=this.attributes)===null||n===void 0?void 0:n.onForward)===null||i===void 0||i.call(n),this.dispatchOnChange()),a},e.prototype.forward=function(){this.internalForward()},e.prototype.handleSpeedChange=function(t){var n,i;this.states.speed=t;var a=this.states.state;a==="play"&&(this.internalPause(!0),this.internalPlay(!0)),(i=(n=this.attributes)===null||n===void 0?void 0:n.onSpeedChange)===null||i===void 0||i.call(n,t)},e.prototype.handleSelectionTypeChange=function(t){var n,i;this.states.selectionType=t,this.renderChart(),(i=(n=this.attributes)===null||n===void 0?void 0:n.onSelectionTypeChange)===null||i===void 0||i.call(n,t)},e.prototype.handleChartTypeChange=function(t){var n,i;this.states.chartType=t,this.renderChart(),(i=(n=this.attributes)===null||n===void 0?void 0:n.onChartTypeChange)===null||i===void 0||i.call(n,t)},e.prototype.render=function(){var t=this.space,n=t.axisBBox,i=t.controllerBBox,a=t.timelineBBox;this.renderController(i),this.renderAxis(n),this.renderChart(a),this.states.state==="play"&&this.internalPlay()},e.prototype.destroy=function(){r.prototype.destroy.call(this),this.internalPause(!0)},e.defaultOptions={style:{x:0,y:0,axisLabelFill:"#6e6e6e",axisLabelTextAlign:"left",axisLabelTextBaseline:"top",axisLabelTransform:"translate(5, -12)",axisLineLineWidth:1,axisLineStroke:"#cacdd1",axisTickLength:15,axisTickLineWidth:1,axisTickStroke:"#cacdd1",chartShowLabel:!1,chartType:"line",controllerAlign:"center",controllerHeight:40,data:[],interval:"day",loop:!1,playMode:"acc",selectionType:"range",type:"time"}},e})(Un);function Km(r){const{width:e,height:t,renderer:n}=r,i=kge(r),a=new ex({width:e,height:t,container:i,renderer:n||new Vd});return[i,a]}function kge(r){var e;const{container:t,className:n,graphCanvas:i}=r;if(t)return typeof t=="string"?document.getElementById(t):t;const a=tu(n,!1),{width:s,height:o,containerStyle:A}=r,[l,c]=Ige(r);return Object.assign(a.style,Object.assign({position:"absolute",left:l+"px",top:c+"px",width:s+"px",height:o+"px"},A)),(e=i.getContainer())===null||e===void 0||e.appendChild(a),a}function Ige(r){const{width:e,height:t,placement:n,graphCanvas:i}=r,[a,s]=i.getSize(),[o,A]=lH(n);return[o*(a-e),A*(s-t)]}var Pge=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class Gm extends Dr{constructor(e,t){super(e,Object.assign({},Gm.defaultOptions,t)),this.typePrefix="__data__",this.draw=!1,this.fieldMap={node:new Map,edge:new Map,combo:new Map},this.selectedItems=[],this.bindEvents=()=>{const{graph:n}=this.context;n.on(Pe.AFTER_DRAW,this.createElement)},this.changeState=(n,i)=>{const{graph:a}=this.context,{typePrefix:s}=this,o=jr(n,[s,"id"]),A=jr(n,[s,"style","labelText"]),[l]=o.split("__"),c=this.fieldMap[l].get(A)||[];a.setElementState(Object.fromEntries(c==null?void 0:c.map(u=>[u,i])))},this.click=n=>{if(this.options.trigger==="hover")return;const i=jr(n,[this.typePrefix,"id"]);this.selectedItems.includes(i)?(this.selectedItems=this.selectedItems.filter(a=>a!==i),this.changeState(n,[])):(this.selectedItems.push(i),this.changeState(n,"selected"))},this.mouseleave=n=>{this.options.trigger!=="click"&&(this.selectedItems=[],this.changeState(n,[]))},this.mouseenter=n=>{if(this.options.trigger==="click")return;const i=jr(n,[this.typePrefix,"id"]);this.selectedItems.includes(i)?this.selectedItems=this.selectedItems.filter(a=>a!==i):(this.selectedItems.push(i),this.changeState(n,"active"))},this.setFieldMap=(n,i,a)=>{if(!n)return;const s=this.fieldMap[a];if(s)if(!s.has(n))s.set(n,[i]);else{const o=s.get(n);o&&(o.push(i),s.set(n,o))}},this.getEvents=()=>({mouseenter:this.mouseenter,mouseleave:this.mouseleave,click:this.click}),this.getMarkerData=(n,i)=>{if(!n)return[];const{model:a,element:s}=this.context,{nodes:o,edges:A,combos:l}=a.getData(),c={},u=m=>$e(n)?n(m):n,h={node:"circle",edge:"line",combo:"rect"},g={circle:"circle",ellipse:"circle",image:"bowtie",rect:"square",star:"cross",triangle:"triangle",diamond:"diamond",cubic:"dot",line:"hyphen",polyline:"hyphen",quadratic:"hv","cubic-horizontal":"hyphen","cubic-vertical":"line"},p=(m,w)=>s==null?void 0:s.getElementComputedStyle(m,w),v=(m,w)=>{m.forEach(b=>{const{id:_}=b,C=jr(b,["data",u(b)]),M=(s==null?void 0:s.getElementType(w,b))||"circle",F=p(w,b),k=(w==="edge"?F==null?void 0:F.stroke:F==null?void 0:F.fill)||"#1783ff";_&&C&&C.replace(/\s+/g,"")&&(this.setFieldMap(C,_,w),c[C]||(c[C]={id:`${w}__${_}`,label:C,marker:g[M]||h[w],elementType:w,lineWidth:1,stroke:k,fill:k}))})};switch(i){case"node":v(o,"node");break;case"edge":v(A,"edge");break;case"combo":v(l,"combo");break;default:return[]}return Object.values(c)},this.createElement=()=>{if(this.draw){this.updateElement();return}const n=this.options,{width:i,height:a,nodeField:s,edgeField:o,comboField:A,trigger:l,position:c,container:u,containerStyle:h,className:g}=n,p=Pge(n,["width","height","nodeField","edgeField","comboField","trigger","position","container","containerStyle","className"]),v=this.getMarkerData(s,"node"),m=this.getMarkerData(o,"edge"),w=this.getMarkerData(A,"combo"),b=[...v,...w,...m],_=Object.assign({width:i,height:a,data:b,itemMarkerLineWidth:({lineWidth:F})=>F,itemMarker:({marker:F})=>F,itemMarkerStroke:({stroke:F})=>F,itemMarkerFill:({fill:F})=>F,gridCol:v.length},p,this.getEvents()),C=new oge({className:"legend",style:_});this.category=C,this.upsertCanvas().appendChild(C),this.draw=!0},this.bindEvents()}update(e){super.update(e),this.clear(),this.createElement()}clear(){var e,t;(e=this.canvas)===null||e===void 0||e.destroy(),(t=this.container)===null||t===void 0||t.remove(),this.canvas=void 0,this.container=void 0,this.draw=!1}updateElement(){this.category&&this.category.update({itemMarkerOpacity:({id:e})=>!this.selectedItems.length||this.selectedItems.includes(e)?1:.5,itemLabelOpacity:({id:e})=>!this.selectedItems.length||this.selectedItems.includes(e)?1:.5})}upsertCanvas(){if(this.canvas)return this.canvas;const e=this.context.canvas,[t,n]=e.getSize(),{width:i=t,height:a=n,position:s,container:o,containerStyle:A,className:l}=this.options,[c,u]=Km({width:i,height:a,graphCanvas:e,container:o,containerStyle:A,placement:s,className:"legend"});return this.container=c,l&&c.classList.add(l),this.canvas=u,this.canvas}destroy(){this.clear(),this.context.graph.off(Pe.AFTER_DRAW,this.createElement),super.destroy()}}Gm.defaultOptions={position:"bottom",trigger:"hover",orientation:"horizontal",layout:"flex",itemSpacing:4,rowPadding:10,colPadding:10,itemMarkerSize:16,itemLabelFontSize:16,width:240,height:160};class Vm extends Dr{constructor(e,t){super(e,Object.assign({},Vm.defaultOptions,t)),this.onDraw=n=>{var i;!((i=n==null?void 0:n.data)===null||i===void 0)&&i.render||this.onRender()},this.landmarkMap=new Map,this.mask=null,this.isMaskDragging=!1,this.onMaskDragStart=n=>{this.mask&&(this.isMaskDragging=!0,this.mask.setPointerCapture(n.pointerId),this.mask.addEventListener("pointermove",this.onMaskDrag),this.mask.addEventListener("pointerup",this.onMaskDragEnd),this.mask.addEventListener("pointercancel",this.onMaskDragEnd))},this.onMaskDrag=n=>{if(!this.mask||!this.isMaskDragging)return;const{size:[i,a]}=this.options,{movementX:s,movementY:o}=n,{left:A,top:l,width:c,height:u}=this.mask.style,[,,h,g]=this.maskBBox;let p=parseInt(A)+s,v=parseInt(l)+o,m=parseInt(c),w=parseInt(u);p<0&&(p=0),v<0&&(v=0),p+m>i&&(p=No(i-m,0)),v+w>a&&(v=No(a-w,0)),m<h&&(s>0?(p=No(p-s,0),m=Lo(m+s,i)):s<0&&(m=Lo(m-s,i))),w<g&&(o>0?(v=No(v-o,0),w=Lo(w+o,a)):o<0&&(w=Lo(w-o,a))),Object.assign(this.mask.style,{left:p+"px",top:v+"px",width:m+"px",height:w+"px"});const b=parseInt(A)-p,_=parseInt(l)-v;if(b===0&&_===0)return;const C=this.context.canvas.getCamera().getZoom(),M=this.canvas.getCamera().getZoom(),F=C/M;this.context.graph.translateBy([b*F,_*F],!1)},this.onMaskDragEnd=n=>{this.mask&&(this.isMaskDragging=!1,this.mask.releasePointerCapture(n.pointerId),this.mask.removeEventListener("pointermove",this.onMaskDrag),this.mask.removeEventListener("pointerup",this.onMaskDragEnd),this.mask.removeEventListener("pointercancel",this.onMaskDragEnd))},this.onTransform=zQ(()=>{this.isMaskDragging||(this.updateMask(),this.setCamera())},32,{leading:!0}),this.setOnRender(),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),"delay"in e&&this.setOnRender(),this.bindEvents()}setOnRender(){this.onRender=nh(()=>{this.renderMinimap(),this.renderMask()},this.options.delay)}bindEvents(){const{graph:e}=this.context;e.on(Pe.AFTER_DRAW,this.onDraw),e.on(Pe.AFTER_RENDER,this.onRender),e.on(Pe.AFTER_ANIMATE,this.onRender),e.on(Pe.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:e}=this.context;e.off(Pe.AFTER_DRAW,this.onDraw),e.off(Pe.AFTER_RENDER,this.onRender),e.off(Pe.AFTER_ANIMATE,this.onRender),e.off(Pe.AFTER_TRANSFORM,this.onTransform)}renderMinimap(){const e=this.getElements(),t=this.initCanvas();this.setShapes(t,e)}getElements(){const{filter:e}=this.options,{model:t,element:n}=this.context,i=t.getData(),a={nodes:i.nodes.filter(l=>n==null?void 0:n.getElement(he(l))),edges:i.edges.filter(l=>{const c=n==null?void 0:n.getElement(he(l));return c&&HH(c)}),combos:i.combos.filter(l=>n==null?void 0:n.getElement(he(l)))};if(!e)return a;const{nodes:s,edges:o,combos:A}=a;return{nodes:s.filter(l=>e(he(l),"node")),edges:o.filter(l=>e(he(l),"edge")),combos:A.filter(l=>e(he(l),"combo"))}}setShapes(e,t){const{nodes:n,edges:i,combos:a}=t,{shape:s}=this.options,{element:o}=this.context,A=(l,c)=>{const u=he(l),h=o==null?void 0:o.getElement(u);if(!h)return;const g=h.getShape("key");let p;if(typeof s=="string"){const v=s;p=h.getShape(v).cloneNode()}else{const v=s(u,c,h);v===h?p=v.cloneNode(!0):p=v}p.setPosition(g.getPosition()),h.style.zIndex&&(p.style.zIndex=h.style.zIndex),p.id=h.id,e.appendChild(p)};e.removeChildren(),i.forEach(l=>A(l,"edge")),a.forEach(l=>A(l,"combo")),n.forEach(l=>A(l,"node"))}initCanvas(){const{renderer:e,size:[t,n]}=this.options;if(this.canvas){const{width:i,height:a}=this.canvas.getConfig();(t!==i||n!==a)&&this.canvas.resize(t,n),e&&this.canvas.setRenderer(e)}else{const{className:i,position:a,container:s,containerStyle:o}=this.options,[A,l]=Km({renderer:e,width:t,height:n,placement:a,className:"minimap",container:s,containerStyle:o,graphCanvas:this.context.canvas});i&&A.classList.add(i),this.container=A,this.canvas=l}return this.setCamera(),this.canvas}createLandmark(e,t,n){const i=`${e.join(",")}-${t.join(",")}-${n}`;if(this.landmarkMap.has(i))return this.landmarkMap.get(i);const s=this.canvas.getCamera().createLandmark(i,{position:e,focalPoint:t,zoom:n});return this.landmarkMap.set(i,s),s}setCamera(){var e;const{canvas:t}=this.context,n=(e=this.canvas)===null||e===void 0?void 0:e.getCamera();if(!n)return;const{size:[i,a],padding:s}=this.options,[o,A,l,c]=Fa(s),{min:u,max:h,center:g}=t.getBounds("elements"),p=h[0]-u[0],v=h[1]-u[1],m=i-c-A,w=a-o-l,b=m/p,_=w/v,C=Math.min(b,_),M=this.createLandmark(g,g,C);n.gotoLandmark(M,0)}get maskBBox(){const{canvas:e}=this.context,t=e.getSize(),n=e.getCanvasByViewport([0,0]),i=e.getCanvasByViewport(t),a=this.canvas.canvas2Viewport(Ya(n)),s=this.canvas.canvas2Viewport(Ya(i)),o=s.x-a.x,A=s.y-a.y;return[a.x,a.y,o,A]}calculateMaskBBox(){const{size:[e,t]}=this.options;let[n,i,a,s]=this.maskBBox;return n<0&&(a=Lo(a+n,e),n=0),i<0&&(s=Lo(s+i,t),i=0),n+a>e&&(a=No(e-n,0)),i+s>t&&(s=No(t-i,0)),[Lo(n,e),Lo(i,t),No(a,0),No(s,0)]}renderMask(){const{maskStyle:e}=this.options;this.mask||(this.mask=document.createElement("div"),this.mask.addEventListener("pointerdown",this.onMaskDragStart),this.mask.draggable=!0,this.mask.addEventListener("dragstart",t=>t.preventDefault&&t.preventDefault())),this.container.appendChild(this.mask),Object.assign(this.mask.style,Object.assign(Object.assign({},e),{cursor:"move",position:"absolute",pointerEvents:"auto"})),this.updateMask()}updateMask(){if(!this.mask)return;const[e,t,n,i]=this.calculateMaskBBox();Object.assign(this.mask.style,{top:t+"px",left:e+"px",width:n+"px",height:i+"px"})}destroy(){var e,t,n;this.unbindEvents(),(e=this.canvas)===null||e===void 0||e.destroy(),(t=this.mask)===null||t===void 0||t.remove(),(n=this.container)===null||n===void 0||n.remove(),super.destroy()}}Vm.defaultOptions={size:[240,160],shape:"key",padding:10,position:"right-bottom",maskStyle:{border:"1px solid #ddd",background:"rgba(0, 0, 0, 0.1)"},containerStyle:{border:"1px solid #ddd",background:"#fff"},delay:128};const Lo=(r,e)=>Math.min(r,e),No=(r,e)=>Math.max(r,e);var _B=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};const EB={x1:0,y1:0,x2:0,y2:0,visibility:"hidden"};class qm extends Dr{constructor(e,t){super(e,Object.assign({},qm.defaultOptions,t)),this.initSnapline=()=>{const n=this.context.canvas.getLayer("transient");this.horizontalLine||(this.horizontalLine=n.appendChild(new hl({style:Object.assign(Object.assign({},EB),this.options.horizontalLineStyle)}))),this.verticalLine||(this.verticalLine=n.appendChild(new hl({style:Object.assign(Object.assign({},EB),this.options.verticalLineStyle)})))},this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!0,this.autoSnapToLine=(n,i,a)=>_B(this,void 0,void 0,function*(){const{verticalX:s,horizontalY:o}=a,{tolerance:A}=this.options,{min:[l,c],max:[u,h],center:[g,p]}=i;let v=0,m=0;s!==null&&(ri(u,s)<A&&(v=s-u),ri(l,s)<A&&(v=s-l),ri(g,s)<A&&(v=s-g),v!==0&&(this.isVerticalSticking=!0)),o!==null&&(ri(h,o)<A&&(m=o-h),ri(c,o)<A&&(m=o-c),ri(p,o)<A&&(m=o-p),m!==0&&(this.isHorizontalSticking=!0)),(v!==0||m!==0)&&(yield this.context.graph.translateElementBy({[n]:[v,m]},!1))}),this.enableSnap=n=>{const{target:i}=n,a=.5;if(this.isHorizontalSticking||this.isVerticalSticking){const[s,o]=this.getDelta(n);if(this.isHorizontalSticking&&this.isVerticalSticking&&Math.abs(s)<=a&&Math.abs(o)<=a)return this.context.graph.translateElementBy({[i.id]:[-s,-o]},!1),!1;if(this.isHorizontalSticking&&Math.abs(o)<=a)return this.context.graph.translateElementBy({[i.id]:[0,-o]},!1),!1;if(this.isVerticalSticking&&Math.abs(s)<=a)return this.context.graph.translateElementBy({[i.id]:[-s,0]},!1),!1;this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!1,setTimeout(()=>{this.enableStick=!0},200)}return this.enableStick},this.calcSnaplineMetadata=(n,i)=>{const{tolerance:a,shape:s}=this.options,{min:[o,A],max:[l,c],center:[u,h]}=i;let g=null,p=null,v=null,m=null,w=null,b=null;return this.getNodes().some(_=>{if(Qn(n.id,_.id))return!1;const C=HR(_,s).getRenderBounds(),{min:[M,F],max:[k,P],center:[N,D]}=C;return g===null&&(ri(N,u)<a?g=N:ri(M,o)<a||ri(M,l)<a?g=M:(ri(k,l)<a||ri(k,o)<a)&&(g=k),g!==null&&(p=Math.min(F,A),v=Math.max(P,c))),m===null&&(ri(D,h)<a?m=D:ri(F,A)<a||ri(F,c)<a?m=F:(ri(P,c)<a||ri(P,A)<a)&&(m=P),m!==null&&(w=Math.min(M,o),b=Math.max(k,l))),g!==null&&m!==null}),{verticalX:g,verticalMinY:p,verticalMaxY:v,horizontalY:m,horizontalMinX:w,horizontalMaxX:b}},this.onDragStart=()=>{this.initSnapline()},this.onDrag=n=>_B(this,void 0,void 0,function*(){const{target:i}=n;if(this.options.autoSnap&&!this.enableSnap(n))return;const a=HR(i,this.options.shape).getRenderBounds(),s=this.calcSnaplineMetadata(i,a);this.hideSnapline(),(s.verticalX!==null||s.horizontalY!==null)&&this.updateSnapline(s),this.options.autoSnap&&(yield this.autoSnapToLine(i.id,a,s))}),this.onDragEnd=()=>{this.hideSnapline()},this.bindEvents()}getNodes(){var e;const{filter:t}=this.options,i=(((e=this.context.element)===null||e===void 0?void 0:e.getNodes())||[]).filter(a=>{var s;return HH(a)&&((s=this.context.viewport)===null||s===void 0?void 0:s.isInViewport(a.getRenderBounds()))});return t?i.filter(a=>t(a)):i}hideSnapline(){this.horizontalLine.style.visibility="hidden",this.verticalLine.style.visibility="hidden"}getLineWidth(e){const{lineWidth:t}=this.options[`${e}LineStyle`];return+(t||EB.lineWidth||1)/this.context.graph.getZoom()}updateSnapline(e){const{verticalX:t,verticalMinY:n,verticalMaxY:i,horizontalY:a,horizontalMinX:s,horizontalMaxX:o}=e,[A,l]=this.context.canvas.getSize(),{offset:c}=this.options;a!==null?Object.assign(this.horizontalLine.style,{x1:c===1/0?0:s-c,y1:a,x2:c===1/0?A:o+c,y2:a,visibility:"visible",lineWidth:this.getLineWidth("horizontal")}):this.horizontalLine.style.visibility="hidden",t!==null?Object.assign(this.verticalLine.style,{x1:t,y1:c===1/0?0:n-c,x2:t,y2:c===1/0?l:i+c,visibility:"visible",lineWidth:this.getLineWidth("vertical")}):this.verticalLine.style.visibility="hidden"}getDelta(e){const t=this.context.graph.getZoom();return es([e.dx,e.dy],t)}bindEvents(){return _B(this,void 0,void 0,function*(){const{graph:e}=this.context;e.on(xa.DRAG_START,this.onDragStart),e.on(xa.DRAG,this.onDrag),e.on(xa.DRAG_END,this.onDragEnd)})}unbindEvents(){const{graph:e}=this.context;e.off(xa.DRAG_START,this.onDragStart),e.off(xa.DRAG,this.onDrag),e.off(xa.DRAG_END,this.onDragEnd)}destroyElements(){var e,t;(e=this.horizontalLine)===null||e===void 0||e.destroy(),(t=this.verticalLine)===null||t===void 0||t.destroy()}destroy(){this.destroyElements(),this.unbindEvents(),super.destroy()}}qm.defaultOptions={tolerance:5,offset:20,autoSnap:!0,shape:"key",verticalLineStyle:{stroke:"#1783FF"},horizontalLineStyle:{stroke:"#1783FF"},filter:()=>!0};const ri=(r,e)=>Math.abs(r-e),HR=(r,e)=>typeof e=="function"?e(r):r.getShape(e);var Oge=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})},Lge=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const Nge=["timestamp","time","date","datetime"];class Wm extends Dr{get padding(){return Fa(this.options.padding)}constructor(e,t){super(e,Object.assign({},Wm.defaultOptions,t)),this.backup(),this.upsertTimebar()}play(){var e;(e=this.timebar)===null||e===void 0||e.play()}pause(){var e;(e=this.timebar)===null||e===void 0||e.pause()}forward(){var e;(e=this.timebar)===null||e===void 0||e.forward()}backward(){var e;(e=this.timebar)===null||e===void 0||e.backward()}reset(){var e;(e=this.timebar)===null||e===void 0||e.reset()}update(e){super.update(e),this.backup(),this.upsertTimebar()}backup(){this.originalData=zR(this.context.graph.getData())}upsertTimebar(){const{canvas:e}=this.context,t=this.options,{onChange:n,timebarType:i,data:a,x:s,y:o,width:A,height:l,mode:c}=t,u=Lge(t,["onChange","timebarType","data","x","y","width","height","mode"]),h=e.getSize(),[g]=this.padding;this.upsertCanvas().ready.then(()=>{var p;const v=Object.assign(Object.assign({x:h[0]/2-A/2,y:g,onChange:m=>{const w=(Ki(m)?m:[m,m]).map(b=>PK(b)?b.getTime():b);this.options.mode==="modify"?this.filterElements(w):this.hiddenElements(w),n==null||n(w)}},u),{data:a.map(m=>je(m)?{time:m,value:0}:m),width:A,height:l,type:i});this.timebar?this.timebar.update(v):(this.timebar=new Fge({style:v}),(p=this.canvas)===null||p===void 0||p.appendChild(this.timebar))})}upsertCanvas(){if(this.canvas)return this.canvas;const{className:e,height:t,position:n}=this.options,i=this.context.canvas,[a]=i.getSize(),[s,,o]=this.padding,[A,l]=Km({width:a,height:t+s+o,graphCanvas:i,className:"timebar",placement:n});return this.container=A,e&&A.classList.add(e),this.canvas=l,this.canvas}filterElements(e){return Oge(this,void 0,void 0,function*(){var t;if(!this.originalData)return;const{elementTypes:n,getTime:i}=this.options,{graph:a,element:s}=this.context,o=zR(this.originalData);n.forEach(l=>{const c=`${l}s`;o[c]=(this.originalData[c]||[]).filter(u=>{const h=i(u);return!!jR(h,e)})});const A=[...o.nodes,...o.combos].map(l=>he(l));o.edges=o.edges.filter(l=>{const c=l.source,u=l.target;return A.includes(c)&&A.includes(u)}),a.setData(o),yield(t=s.draw({animation:!1,silence:!0}))===null||t===void 0?void 0:t.finished})}hiddenElements(e){const{graph:t}=this.context,{elementTypes:n,getTime:i}=this.options,a=[],s=[];n.forEach(o=>{var A;const l=`${o}s`;(((A=this.originalData)===null||A===void 0?void 0:A[l])||[]).forEach(u=>{const h=he(u),g=i(u);jR(g,e)?s.push(h):a.push(h)})}),t.hideElement(a,!1),t.showElement(s,!1)}destroy(){var e,t,n;const{graph:i}=this.context;this.originalData&&i.setData(Object.assign({},this.originalData)),(e=this.timebar)===null||e===void 0||e.destroy(),(t=this.canvas)===null||t===void 0||t.destroy(),(n=this.container)===null||n===void 0||n.remove(),this.originalData=void 0,this.container=void 0,this.timebar=void 0,this.canvas=void 0,super.destroy()}}Wm.defaultOptions={position:"bottom",enable:!0,timebarType:"time",className:"g6-timebar",width:450,height:60,zIndex:3,elementTypes:["node"],padding:10,mode:"modify",getTime:r=>Dge(r,Nge,void 0),loop:!1};const zR=r=>{const{nodes:e=[],edges:t=[],combos:n=[]}=r;return{nodes:[...e],edges:[...t],combos:[...n]}},jR=(r,e)=>{if(je(e))return r===e;const[t,n]=e;return r>=t&&r<=n},Dge=(r,e,t)=>{var n;for(let i=0;i<e.length;i++){const a=e[i],s=(n=r.data)===null||n===void 0?void 0:n[a];if(s)return s}return t};var Rge=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const C8={fill:"#1D2129",wordWrap:!0,maxLines:1,textOverflow:"ellipsis",textBaseline:"top",textAlign:"start",x:0},Qge=Object.assign(Object.assign({},C8),{fillOpacity:.9,fontSize:16,fontWeight:"bold"}),Uge=Object.assign(Object.assign({},C8),{fillOpacity:.65,fontSize:12,fontWeight:"normal"}),Hge={align:"left",spacing:8,size:44,padding:[16,24,0,24]},CB="title",KR="subtitle";class zge extends Dr{get padding(){return Fa(this.options.padding)}constructor(e,t){const n=Object.assign({},Hge,t);super(e,n),this.onRender=()=>{const i=this.updateCanvas();this.renderTitle(i)},this.bindEvents()}bindEvents(){const{graph:e}=this.context;e.on(Pe.AFTER_RENDER,this.onRender),e.on(Pe.AFTER_ANIMATE,this.onRender)}unbindEvents(){const{graph:e}=this.context;e.off(Pe.AFTER_RENDER,this.onRender),e.off(Pe.AFTER_ANIMATE,this.onRender)}destroy(){var e,t;this.unbindEvents(),(e=this.canvas)===null||e===void 0||e.destroy(),(t=this.container)===null||t===void 0||t.remove(),super.destroy()}updateCanvas(){const{size:e,className:t,align:n}=this.options,[i]=this.context.canvas.getSize(),[a=0,,s=0]=this.padding,o=e+a+s;if(this.canvas){const{width:A,height:l}=this.canvas.getConfig();(i!==A||o!==l)&&this.canvas.resize(i,o)}else{const A={left:"left-top",center:"top",right:"right-top"},[l,c]=Km({width:i,height:o,placement:A[n]||A.left,className:"title-canvas",graphCanvas:this.context.canvas});t&&l.classList.add(t),this.container=l,this.canvas=c}return this.canvas}renderTitle(e){const t=new jge({options:this.options,ctx:this.context});e.removeChildren(),t.getTitle().forEach(n=>{n&&e.appendChild(n)})}}class jge{get padding(){return Fa(this.options.padding)}constructor(e){const{options:t,ctx:n}=e;this.options=t,this.context=n}getTitle(){const e=this.options,t=CB,n=e[t],i=KR,a=e[i],{spacing:s=44,padding:o,align:A}=e,l=Rge(e,[t+"",i+"","spacing","padding","align"]),c=n,u=a,h=Gn(l,CB),g=Gn(l,KR),[p]=this.context.graph.getSize(),[v=0,m=0,,w=0]=this.padding,b=p,_=b-w-m;let C=null,M=w,F="left";switch(A){case"left":M=w,F="left";break;case"center":M=b/2,F="center";break;case"right":M=b-m,F="right";break;default:M=w,F="left"}const k=new Ts({className:CB,style:Object.assign(Object.assign(Object.assign(Object.assign({},Qge),{wordWrapWidth:_-5,x:M,y:v,textAlign:F}),h),{text:c})}),P=k.getBBox();return u&&(C=new Ts({className:"subTitle",style:Object.assign(Object.assign(Object.assign(Object.assign({},Uge),{wordWrapWidth:_-5,x:M,y:P.height+s+v,textAlign:F}),g),{text:u})})),[k,C]}}function Kge(r){const e={top:"unset",right:"unset",bottom:"unset",left:"unset"};return r.split("-").forEach(n=>{e[n]="8px"}),e.flexDirection=r.startsWith("top")||r.startsWith("bottom")?"row":"column",e}const Gge=`
  .g6-toolbar {
    position: absolute;
    z-index: 100;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);
    opacity: 0.65;
  }
  .g6-toolbar .g6-toolbar-item {
    display: inline-block;
    width: 16px;
    height: 16px;
    padding: 4px;
    cursor: pointer;
    box-sizing: content-box;
  }

  .g6-toolbar .g6-toolbar-item:hover {
    background-color: #f0f0f0;
  }

  .g6-toolbar .g6-toolbar-item svg {
    display: inline-block;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }
`,Vge=`
  <svg>
    <symbol id="zoom-in" viewBox="64 64 896 896">
      <path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="zoom-out" viewBox="64 64 896 896">
      <path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="edit" viewBox="64 64 896 896">
      <path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"></path>
    </symbol>
    <symbol id="delete" viewBox="64 64 896 896">
      <path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"></path>
    </symbol>
    <symbol id="redo" viewBox="64 64 896 896">
      <path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"></path>
    </symbol>
    <symbol id="undo" viewBox="64 64 896 896">
      <path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"></path>
    </symbol>
    <symbol id="export" viewBox="64 64 896 896">
      <path d="M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"></path>
    </symbol>
    <symbol id="auto-fit" viewBox="64 64 896 896">
      <path d="M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"></path>
      <path d="M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"></path>
    </symbol>
    <symbol id="reset" viewBox="64 64 896 896">
      <path d="M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"></path>
    </symbol>
    <symbol id="exit-fullscreen" viewBox="0 0 1024 1024">
      <path d="M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z"  ></path></symbol>
    <symbol id="request-fullscreen" viewBox="0 0 1024 1024">
      <path d="M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z"  ></path></symbol>
  </svg>
`;var GR=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};let B8=class x8 extends Dr{constructor(e,t){super(e,Object.assign({},x8.defaultOptions,t)),this.$element=tu("toolbar",!1),this.onToolbarItemClick=i=>{const{onClick:a}=this.options;if(i.target instanceof Element&&i.target.className.includes("g6-toolbar-item")){const s=i.target.getAttribute("value");a==null||a(s,i.target)}};const n=this.context.canvas.getContainer();this.$element.style.display="flex",n.appendChild(this.$element),Hx("g6-toolbar-css","style",{},Gge,document.head),Hx("g6-toolbar-svgicon","div",{display:"none"},Vge),this.$element.addEventListener("click",this.onToolbarItemClick),this.update(t)}update(e){const t=Object.create(null,{update:{get:()=>super.update}});return GR(this,void 0,void 0,function*(){t.update.call(this,e);const{className:n,position:i,style:a}=this.options;this.$element.className=`g6-toolbar ${n||""}`,Object.assign(this.$element.style,a,Kge(i)),this.$element.innerHTML=yield this.getDOMContent()})}destroy(){this.$element.removeEventListener("click",this.onToolbarItemClick),this.$element.remove(),super.destroy()}getDOMContent(){return GR(this,void 0,void 0,function*(){return(yield this.options.getItems()).map(t=>{var n;return`
          <div class="g6-toolbar-item" value="${t.value}" title="${(n=t.title)!==null&&n!==void 0?n:""}">
            <svg aria-hidden="true" focusable="false">
              <use xlink:href="#${t.id}"></use>
            </svg>
          </div>`}).join("")})}};B8.defaultOptions={position:"top-left"};var VR=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class $m extends Dr{constructor(e,t){super(e,Object.assign({},$m.defaultOptions,t)),this.currentTarget=null,this.tooltipElement=null,this.container=null,this.isEnable=(n,i)=>{const{enable:a}=this.options;return typeof a=="function"?a(n,i):a},this.onClick=n=>{const{target:{id:i}}=n;this.currentTarget===i?this.hide(n):this.show(n)},this.onPointerMove=n=>{const{target:i}=n;!this.currentTarget||i.id===this.currentTarget||this.show(n)},this.onPointerLeave=n=>{this.hide(n)},this.onCanvasMove=n=>{this.hide(n)},this.onPointerOver=n=>{this.show(n)},this.showById=n=>VR(this,void 0,void 0,function*(){const i={target:{id:n}};yield this.show(i)}),this.getElementData=(n,i)=>{const{model:a}=this.context;switch(i){case"node":return a.getNodeData([n]);case"edge":return a.getEdgeData([n]);case"combo":return a.getComboData([n]);default:return[]}},this.show=n=>VR(this,void 0,void 0,function*(){var i,a;const{client:s,target:{id:o}}=n;if(vh(n.target))return;const A=this.context.graph.getElementType(o),{getContent:l,title:c}=this.options,u=this.getElementData(o,A);if(!this.tooltipElement)return;if(!this.isEnable(n,u)){this.hide(n);return}let h={};if(l){if(h.content=yield l(n,u),!h.content)return}else{const v=this.context.graph.getElementRenderStyle(o),m=A==="node"?v.fill:v.stroke;h={title:c||A,data:u.map(w=>({name:"ID",value:w.id||`${w.source} -> ${w.target}`,color:m}))}}this.currentTarget=o;let g,p;if(s)g=s.x,p=s.y;else{const v=jr(u,"0.style",{x:0,y:0});g=v.x,p=v.y}(a=(i=this.options).onOpenChange)===null||a===void 0||a.call(i,!0),this.tooltipElement.update(Object.assign(Object.assign(Object.assign({},this.tooltipStyleProps),{x:g,y:p,style:{".tooltip":{visibility:"visible"}}}),h))}),this.hide=n=>{var i,a,s,o,A;if(!n){(a=(i=this.options).onOpenChange)===null||a===void 0||a.call(i,!1),(s=this.tooltipElement)===null||s===void 0||s.hide(),this.currentTarget=null;return}if(!this.tooltipElement||!this.currentTarget)return;const{client:{x:l,y:c}}=n;(A=(o=this.options).onOpenChange)===null||A===void 0||A.call(o,!1),this.tooltipElement.hide(l,c),this.currentTarget=null},this.initTooltip=()=>{var n;const i=new uge({className:"tooltip",style:this.tooltipStyleProps});return(n=this.container)===null||n===void 0||n.appendChild(i.HTMLTooltipElement),i},this.render(),this.bindEvents()}getEvents(){return this.options.trigger==="click"?{"node:click":this.onClick,"edge:click":this.onClick,"combo:click":this.onClick,"canvas:click":this.onPointerLeave,contextmenu:this.onPointerLeave,drag:this.onPointerLeave}:{"node:pointerover":this.onPointerOver,"node:pointermove":this.onPointerMove,"canvas:pointermove":this.onCanvasMove,"edge:pointerover":this.onPointerOver,"edge:pointermove":this.onPointerMove,"combo:pointerover":this.onPointerOver,"combo:pointermove":this.onPointerMove,contextmenu:this.onPointerLeave,"node:drag":this.onPointerLeave}}update(e){var t;this.unbindEvents(),super.update(e),this.tooltipElement&&((t=this.container)===null||t===void 0||t.removeChild(this.tooltipElement.HTMLTooltipElement)),this.tooltipElement=this.initTooltip(),this.bindEvents()}render(){const{canvas:e}=this.context,t=e.getContainer();t&&(this.container=t,this.tooltipElement=this.initTooltip())}unbindEvents(){const{graph:e}=this.context,t=this.getEvents();Object.keys(t).forEach(n=>{e.off(n,t[n])})}bindEvents(){const{graph:e}=this.context,t=this.getEvents();Object.keys(t).forEach(n=>{e.on(n,t[n])})}get tooltipStyleProps(){const{canvas:e}=this.context,{center:t}=e.getBounds(),n=e.getContainer(),{top:i,left:a}=n.getBoundingClientRect(),{style:s,position:o,enterable:A,container:l={x:-a,y:-i},title:c,offset:u}=this.options,[h,g]=t,[p,v]=e.getSize();return{x:h,y:g,container:l,title:c,bounding:{x:0,y:0,width:p,height:v},position:o,enterable:A,offset:u,style:s}}destroy(){var e;this.unbindEvents(),this.tooltipElement&&((e=this.container)===null||e===void 0||e.removeChild(this.tooltipElement.HTMLTooltipElement)),super.destroy()}}$m.defaultOptions={trigger:"hover",position:"top-right",enterable:!1,enable:!0,offset:[10,10],style:{".tooltip":{visibility:"hidden"}}};var S8=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};let dc;function T8(r,e){return dc||(dc=document.createElement("canvas")),dc.width=r,dc.height=e,dc.getContext("2d").clearRect(0,0,r,e),dc}function qge(r,e,t,n){return S8(this,void 0,void 0,function*(){const i=T8(r,e),a=i.getContext("2d"),{rotate:s,opacity:o,textFill:A,textFontSize:l,textFontFamily:c,textFontVariant:u,textFontWeight:h,textAlign:g,textBaseline:p}=n;return a.textAlign=g,a.textBaseline=p,a.translate(r/2,e/2),a.font=`${l}px ${c} ${u} ${h}`,s&&a.rotate(s),o&&(a.globalAlpha=o),A&&(a.fillStyle=A,a.fillText(`${t}`,0,0)),i.toDataURL()})}function Wge(r,e,t,n){return S8(this,void 0,void 0,function*(){const i=T8(r,e),a=i.getContext("2d"),{rotate:s,opacity:o}=n;s&&a.rotate(s),o&&(a.globalAlpha=o);const A=new Image;return A.crossOrigin="anonymous",A.src=t,new Promise(l=>{A.onload=function(){const c=r>A.width?(r-A.width)/2:0,u=e>A.height?(e-A.height)/2:0;a.drawImage(A,0,0,A.width,A.height,c,u,r-c*2,e-u*2),l(i.toDataURL())}})})}var $ge=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})},Yge=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class Ym extends Dr{constructor(e,t){super(e,Object.assign({},Ym.defaultOptions,t)),this.$element=tu("watermark"),this.context.canvas.getContainer().appendChild(this.$element),this.update(t)}update(e){const t=Object.create(null,{update:{get:()=>super.update}});return $ge(this,void 0,void 0,function*(){t.update.call(this,e);const n=this.options,{width:i,height:a,text:s,imageURL:o}=n,A=Yge(n,["width","height","text","imageURL"]);Object.keys(A).forEach(c=>{c.startsWith("background")&&(this.$element.style[c]=e[c])});const l=o?yield Wge(i,a,o,A):yield qge(i,a,s,A);this.$element.style.backgroundImage=`url(${l})`})}destroy(){super.destroy(),this.$element.remove()}}Ym.defaultOptions={width:200,height:100,opacity:.2,rotate:Math.PI/12,text:"",textFill:"#000",textFontSize:16,textAlign:"center",textBaseline:"middle",backgroundRepeat:"repeat"};const Xge=["#7E92B5","#F4664A","#FFBE3A"],Zge={type:"group",color:["#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]},Jge={type:"group",color:["#99ADD1","#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]};function M8(r){const{bgColor:e,textColor:t,nodeColor:n,nodeColorDisabled:i,nodeStroke:a,nodeHaloStrokeOpacityActive:s=.15,nodeHaloStrokeOpacitySelected:o=.25,nodeOpacityDisabled:A=.06,nodeIconOpacityInactive:l=.85,nodeOpacityInactive:c=.25,nodeBadgePalette:u=Xge,nodePaletteOptions:h=Zge,edgeColor:g,edgeColorDisabled:p,edgePaletteOptions:v=Jge,comboColor:m,comboColorDisabled:w,comboStroke:b,comboStrokeDisabled:_,edgeColorInactive:C}=r;return{background:e,node:{palette:h,style:{donutOpacity:1,badgeBackgroundOpacity:1,badgeFill:"#fff",badgeFontSize:8,badgePadding:[0,4],badgePalette:u,fill:n,fillOpacity:1,halo:!1,iconFill:"#fff",iconOpacity:1,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelFill:t,labelFillOpacity:.85,labelLineHeight:16,labelPadding:[0,2],labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelOffsetY:2,lineWidth:0,portFill:n,portLineWidth:1,portStroke:a,portStrokeOpacity:.65,size:32,stroke:a,strokeOpacity:1,zIndex:2},state:{selected:{halo:!0,haloLineWidth:24,haloStrokeOpacity:o,labelFontSize:12,labelFontWeight:"bold",lineWidth:4,stroke:a},active:{halo:!0,haloLineWidth:12,haloStrokeOpacity:s},highlight:{labelFontWeight:"bold",lineWidth:4,stroke:a,strokeOpacity:.85},inactive:{badgeBackgroundOpacity:c,donutOpacity:c,fillOpacity:c,iconOpacity:l,labelFill:t,labelFillOpacity:c,strokeOpacity:c},disabled:{badgeBackgroundOpacity:.25,donutOpacity:A,fill:i,fillOpacity:A,iconFill:i,iconOpacity:.25,labelFill:t,labelFillOpacity:.25,strokeOpacity:A}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"node-expand",collapse:"node-collapse",update:[{fields:["x","y","fill","stroke"]}],translate:[{fields:["x","y"]}]}},edge:{palette:v,style:{badgeBackgroundFill:g,badgeFill:"#fff",badgeFontSize:8,badgeOffsetX:10,badgeBackgroundOpacity:1,fillOpacity:1,halo:!1,haloLineWidth:12,haloStrokeOpacity:1,increasedLineWidthForHitTesting:2,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[4,4,4,4],labelFill:t,labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelPlacement:"center",labelTextBaseline:"middle",lineWidth:1,stroke:g,strokeOpacity:1,zIndex:1},state:{selected:{halo:!0,haloStrokeOpacity:.25,labelFontSize:14,labelFontWeight:"bold",lineWidth:3},active:{halo:!0,haloStrokeOpacity:.15},highlight:{labelFontWeight:"bold",lineWidth:3},inactive:{stroke:C,fillOpacity:.08,labelOpacity:.25,strokeOpacity:.08,badgeBackgroundOpacity:.25},disabled:{stroke:p,fillOpacity:.45,strokeOpacity:.45,labelOpacity:.25,badgeBackgroundOpacity:.45}},animation:{enter:"fade",exit:"fade",expand:"path-in",collapse:"path-out",show:"fade",hide:"fade",update:[{fields:["sourceNode","targetNode"]},{fields:["stroke"],shape:"key"}],translate:[{fields:["sourceNode","targetNode"]}]}},combo:{style:{collapsedMarkerFill:e,collapsedMarkerFontSize:12,collapsedMarkerFillOpacity:1,collapsedSize:32,collapsedFillOpacity:1,fill:m,halo:!1,haloLineWidth:12,haloStroke:b,haloStrokeOpacity:.25,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[2,4,2,4],labelFill:t,labelFontSize:12,labelFontWeight:400,labelOpacity:1,lineDash:0,lineWidth:1,fillOpacity:.04,strokeOpacity:1,padding:10,stroke:b},state:{selected:{halo:!0,labelFontSize:14,labelFontWeight:700,lineWidth:4},active:{halo:!0},highlight:{labelFontWeight:700,lineWidth:4},inactive:{fillOpacity:.65,labelOpacity:.25,strokeOpacity:.65},disabled:{fill:w,fillOpacity:.25,labelOpacity:.25,stroke:_,strokeOpacity:.25}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"combo-expand",collapse:"combo-collapse",update:[{fields:["x","y"]},{fields:["fill","stroke","lineWidth"],shape:"key"}],translate:[{fields:["x","y"]}]}}}}const epe={type:"group",color:["#637088","#0F55A6","#008383","#9C5D38","#8B53A6","#4E40A6","#8F6608","#3E801D","#A65383","#175E75","#0F8248"]},tpe={bgColor:"#000000",comboColor:"#fdfdfd",comboColorDisabled:"#d0e4ff",comboStroke:"#99add1",comboStrokeDisabled:"#969696",edgeColor:"#637088",edgeColorDisabled:"#637088",edgeColorInactive:"#D0E4FF",edgePaletteOptions:epe,nodeColor:"#1783ff",nodeColorDisabled:"#D0E4FF",nodeHaloStrokeOpacityActive:.25,nodeHaloStrokeOpacitySelected:.45,nodeIconOpacityInactive:.45,nodeOpacityDisabled:.25,nodeOpacityInactive:.45,nodeStroke:"#d0e4ff",textColor:"#ffffff"},npe=M8(tpe),rpe={bgColor:"#ffffff",comboColor:"#99ADD1",comboColorDisabled:"#f0f0f0",comboStroke:"#99add1",comboStrokeDisabled:"#d9d9d9",edgeColor:"#99add1",edgeColorDisabled:"#d9d9d9",edgeColorInactive:"#1B324F",nodeColor:"#1783ff",nodeColorDisabled:"#1B324F",nodeHaloStrokeOpacityActive:.15,nodeHaloStrokeOpacitySelected:.25,nodeIconOpacityInactive:.85,nodeOpacityDisabled:.06,nodeOpacityInactive:.25,nodeStroke:"#000000",textColor:"#000000"},ipe=M8(rpe);class yA extends O2{beforeDraw(e,t){return e}afterLayout(e,t){}}class ape extends yA{beforeDraw(e){const{model:t}=this.context,n=e.add.combos,i=a=>{const s=[];return a.forEach((o,A)=>{const c=t.getAncestorsData(A,"combo").map(u=>he(u)).reverse();s.push([A,o,c.length])}),new Map(s.sort(([,,o],[,,A])=>A-o).map(([o,A])=>[o,A]))};return e.add.combos=i(n),e.update.combos=i(e.update.combos),e}}function aa(r,e,t,n,i){const a=he(n),s=`${t}s`,o=i?n:r.add[s].get(a)||r.update[s].get(a)||r.remove[s].get(a)||n;Object.entries(r).forEach(([A,l])=>{e===A?l[s].set(a,o):l[s].delete(a)})}function mp(r,e){return Object.keys(r).every(t=>r[t]===e[t])}class spe extends yA{beforeDraw(e,t){if(t.stage==="visibility"||!this.context.model.model.hasTreeStructure(an))return e;const{model:n}=this.context,{add:i,update:a}=e,s=[...e.update.combos.entries(),...e.add.combos.entries()];for(;s.length;){const[o,A]=s.pop();if(Qi(A)){const l=n.getDescendantsData(o),c=l.map(he),{internal:u,external:h}=xx(c,g=>n.getRelatedEdgesData(g));l.forEach(g=>{const p=he(g),v=s.findIndex(([w])=>w===p);v!==-1&&s.splice(v,1);const m=n.getElementType(p);aa(e,"remove",m,g)}),u.forEach(g=>aa(e,"remove","edge",g)),h.forEach(g=>{var p;const v=he(g);((p=this.context.element)===null||p===void 0?void 0:p.getElement(v))?a.edges.set(v,g):i.edges.set(v,g)})}else{const l=n.getChildrenData(o),c=l.map(he),{edges:u}=xx(c,h=>n.getRelatedEdgesData(h));[...l,...u].forEach(h=>{var g;const p=he(h),v=n.getElementType(p);((g=this.context.element)===null||g===void 0?void 0:g.getElement(p))?aa(e,"update",v,h):aa(e,"add",v,h),v==="combo"&&s.push([p,h])})}}return e}}const qR=(r,e,t,n)=>{const i=`${t}s`,a=he(n);!r.add[i].has(a)&&!r.update[i].has(a)&&r[e][i].set(he(n),n)};class ope extends yA{getElement(e){return this.context.element.getElement(e)}handleExpand(e,t){if(qR(t,"add","node",e),Qi(e))return;const n=he(e);qR(t,"add","node",e),this.context.model.getRelatedEdgesData(n).forEach(s=>{aa(t,"add","edge",s)}),this.context.model.getChildrenData(n).forEach(s=>{this.handleExpand(s,t)})}beforeDraw(e){const{graph:t,model:n}=this.context;if(!n.model.hasTreeStructure(ra))return e;const{add:{nodes:i,edges:a},update:{nodes:s}}=e,o=new Map,A=new Map;i.forEach((c,u)=>{Qi(c)&&o.set(u,c)}),a.forEach(c=>{if(t.getElementType(c.source)!=="node")return;const u=t.getNodeData(c.source);Qi(u)&&o.set(c.source,u)}),s.forEach((c,u)=>{const h=this.getElement(u);if(!h)return;const g=h.attributes.collapsed;Qi(c)?g||o.set(u,c):g&&A.set(u,c)});const l=new Set;return o.forEach((c,u)=>{n.getDescendantsData(u).forEach(g=>{const p=he(g);if(l.has(p))return;aa(e,"remove","node",g),n.getRelatedEdgesData(p).forEach(m=>{aa(e,"remove","edge",m)}),l.add(p)})}),A.forEach((c,u)=>{if(n.getAncestorsData(u,ra).some(Qi)){aa(e,"remove","node",c);return}this.handleExpand(c,e)}),e}}function Ape(r,e,t){yx[r][e]&&ks.warn(`The extension ${e} of ${r} has been registered before, and will be overridden.`),Object.assign(yx[r],{[e]:t})}/*!
 * @antv/g-plugin-dragndrop
 * @description A G plugin for Drag n Drop implemented with PointerEvents
 * @version 2.1.1
 * @date 12/24/2025, 11:56:44 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var F8=(function(){function r(e){Be(this,r),this.dragndropPluginOptions=e}return xe(r,[{key:"apply",value:function(t){var n=this,i=t.renderingService,a=t.renderingContext,s=a.root.ownerDocument,o=s.defaultView,A=function(c){var u=c.target,h=u===s,g=h&&n.dragndropPluginOptions.isDocumentDraggable?s:u.closest&&u.closest("[draggable=true]");if(g){var p=!1,v=c.timeStamp,m=[c.clientX,c.clientY],w=null,b=[c.clientX,c.clientY],_=(function(){var M=lA(Or().mark(function F(k){var P,N,D,Q,H,j;return Or().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(p){q.next=2;break}if(P=k.timeStamp-v,N=Li([k.clientX,k.clientY],m),!(P<=n.dragndropPluginOptions.dragstartTimeThreshold||N<=n.dragndropPluginOptions.dragstartDistanceThreshold)){q.next=1;break}return q.abrupt("return");case 1:k.type="dragstart",g.dispatchEvent(k),p=!0;case 2:if(k.type="drag",k.dx=k.clientX-b[0],k.dy=k.clientY-b[1],g.dispatchEvent(k),b=[k.clientX,k.clientY],h){q.next=4;break}return D=n.dragndropPluginOptions.overlap==="pointer"?[k.canvasX,k.canvasY]:u.getBounds().center,q.next=3,s.elementsFromPoint(D[0],D[1]);case 3:Q=q.sent,H=Q[Q.indexOf(u)+1],j=(H==null?void 0:H.closest("[droppable=true]"))||(n.dragndropPluginOptions.isDocumentDroppable?s:null),w!==j&&(w&&(k.type="dragleave",k.target=w,w.dispatchEvent(k)),j&&(k.type="dragenter",k.target=j,j.dispatchEvent(k)),w=j,w&&(k.type="dragover",k.target=w,w.dispatchEvent(k)));case 4:case"end":return q.stop()}},F)}));return function(k){return M.apply(this,arguments)}})();o.addEventListener("pointermove",_);var C=function(F){if(p){F.detail={preventClick:!0};var k=F.clone();w&&(k.type="drop",k.target=w,w.dispatchEvent(k)),k.type="dragend",g.dispatchEvent(k),p=!1}o.removeEventListener("pointermove",_)};u.addEventListener("pointerup",C,{once:!0}),u.addEventListener("pointerupoutside",C,{once:!0})}};i.hooks.init.tap(r.tag,function(){o.addEventListener("pointerdown",A)}),i.hooks.destroy.tap(r.tag,function(){o.removeEventListener("pointerdown",A)})}}])})();F8.tag="Dragndrop";var lpe=(function(r){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Be(this,e),t=wt(this,e),t.name="dragndrop",t.options=n,t}return bt(e,r),xe(e,[{key:"init",value:function(){this.addRenderingPlugin(new F8(dt({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(n){Object.assign(this.plugins[0].dragndropPluginOptions,n)}}])})(hA),WR=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})},$R=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const YR=["main"],XR=["background","main","label","transient"];function cpe(r){return r.main}class ZR{getConfig(){return this.config}getLayer(e="main"){return this.extends.layers[e]||cpe(this.getLayers())}getLayers(){return this.extends.layers}getRenderer(e){return this.extends.renderers[e]}getCamera(e="main"){return this.getLayer(e).getCamera()}getRoot(e="main"){return this.getLayer(e).getRoot()}getContextService(e="main"){return this.getLayer(e).getContextService()}setCursor(e){this.config.cursor=e,this.getLayer().setCursor(e)}get document(){return this.getLayer().document}get context(){return this.getLayer().context}constructor(e){this.config={enableMultiLayer:!0},Object.assign(this.config,e);const t=this.config,{renderer:n,background:i,cursor:a,enableMultiLayer:s}=t,o=$R(t,["renderer","background","cursor","enableMultiLayer"]),A=s?XR:YR,l=JR(n,A),c=Object.fromEntries(A.map(u=>{const h=new ex(Object.assign(Object.assign({},o),{supportsMutipleCanvasesInOneContainer:s,renderer:l[u],background:s?u==="background"?i:void 0:i}));return[u,h]}));eQ(c),this.extends={config:this.config,renderer:n,renderers:l,layers:c}}get ready(){return Promise.all(Object.entries(this.getLayers()).map(([,e])=>e.ready))}resize(e,t){Object.assign(this.extends.config,{width:e,height:t}),Object.values(this.getLayers()).forEach(n=>{const i=n.getCamera(),a=i.getPosition(),s=i.getFocalPoint();n.resize(e,t),i.setPosition(a),i.setFocalPoint(s)})}getBounds(e){return uh(Object.values(this.getLayers()).map(t=>e?t.getRoot().childNodes.find(i=>i.classList.includes(e)):t.getRoot()).filter(t=>(t==null?void 0:t.childNodes.length)>0).map(t=>t.getBounds()))}getContainer(){const e=this.extends.config.container;return typeof e=="string"?document.getElementById(e):e}getSize(){return[this.extends.config.width||0,this.extends.config.height||0]}appendChild(e,t){var n;const i=((n=e.style)===null||n===void 0?void 0:n.$layer)||"main";return this.getLayer(i).appendChild(e,t)}setRenderer(e){if(e===this.extends.renderer)return;const t=JR(e,this.config.enableMultiLayer?XR:YR);this.extends.renderers=t,Object.entries(t).forEach(([n,i])=>this.getLayer(n).setRenderer(i)),eQ(this.getLayers())}getCanvasByViewport(e){return Gr(this.getLayer().viewport2Canvas(Ya(e)))}getViewportByCanvas(e){return Gr(this.getLayer().canvas2Viewport(Ya(e)))}getViewportByClient(e){return Gr(this.getLayer().client2Viewport(Ya(e)))}getClientByViewport(e){return Gr(this.getLayer().viewport2Client(Ya(e)))}getClientByCanvas(e){return this.getClientByViewport(this.getViewportByCanvas(e))}getCanvasByClient(e){const t=this.getLayer(),n=t.client2Viewport(Ya(e));return Gr(t.viewport2Canvas(n))}toDataURL(){return WR(this,arguments,void 0,function*(e={}){const t=globalThis.devicePixelRatio||1,{mode:n="viewport"}=e,i=$R(e,["mode"]);let[a,s,o,A]=[0,0,0,0];if(n==="viewport")[o,A]=this.getSize();else if(n==="overall"){const w=this.getBounds(),b=fA(w);[a,s]=w.min,[o,A]=b}const l=RB('<div id="virtual-image"></div>'),c=new ex({width:o,height:A,renderer:new Vd,devicePixelRatio:t,container:l,background:this.extends.config.background});yield c.ready,c.appendChild(this.getLayer("background").getRoot().cloneNode(!0)),c.appendChild(this.getRoot().cloneNode(!0));const u=this.getLayer("label").getRoot().cloneNode(!0),h=c.viewport2Canvas({x:0,y:0}),g=this.getCanvasByViewport([0,0]);u.translate([g[0]-h.x,g[1]-h.y]),u.scale(1/this.getCamera().getZoom()),c.appendChild(u),c.appendChild(this.getLayer("transient").getRoot().cloneNode(!0));const p=this.getCamera(),v=c.getCamera();if(n==="viewport")v.setZoom(p.getZoom()),v.setPosition(p.getPosition()),v.setFocalPoint(p.getFocalPoint());else if(n==="overall"){const[w,b,_]=v.getPosition(),[C,M,F]=v.getFocalPoint();v.setPosition([w+a,b+s,_]),v.setFocalPoint([C+a,M+s,F])}const m=c.getContextService();return new Promise(w=>{c.addEventListener(na.RERENDER,()=>WR(this,void 0,void 0,function*(){yield new Promise(_=>setTimeout(_,300));const b=yield m.toDataURL(i);w(b)}))})})}destroy(){Object.values(this.getLayers()).forEach(e=>{e.getCamera().cancelLandmarkAnimation(),e.destroy()})}}function JR(r,e){return Object.fromEntries(e.map(t=>{const n=(r==null?void 0:r(t))||new Vd;return n instanceof Vd&&n.setConfig({enableDirtyRectangleRendering:!1}),t==="main"?n.registerPlugin(new lpe({isDocumentDraggable:!0,isDocumentDroppable:!0,dragstartDistanceThreshold:10,dragstartTimeThreshold:100})):n.unregisterPlugin(n.getPlugin("dom-interaction")),[t,n]}))}function eQ(r){Object.entries(r).forEach(([e,t])=>{const n=t.getContextService().getDomElement();n!=null&&n.style&&(n.style.gridArea="1 / 1 / 2 / 2",n.style.outline="none",n.tabIndex=1,e!=="main"&&(n.style.pointerEvents="none")),n!=null&&n.parentElement&&(n.parentElement.style.display="grid",n.parentElement.style.isolation="isolate")})}const hc=r=>r?parseInt(r):0;function upe(r){const e=getComputedStyle(r),t=r.clientWidth||hc(e.width),n=r.clientHeight||hc(e.height),i=hc(e.paddingLeft)+hc(e.paddingRight),a=hc(e.paddingTop)+hc(e.paddingBottom);return[t-i,n-a]}function tQ(r){if(!r)return[0,0];let e=640,t=480;const[n,i]=upe(r);e=n||e,t=i||t;const a=1,s=1;return[Math.max(je(e)?e:a,a),Math.max(je(t)?t:s,s)]}class Xm{constructor(e){this.type=e}}class dr extends Xm{constructor(e,t){super(e),this.data=t}}class _a extends Xm{constructor(e,t,n,i){super(e),this.animationType=t,this.animation=n,this.data=i}}class fc extends Xm{constructor(e,t,n){super(e),this.elementType=t,this.data=n}}class ep extends Xm{constructor(e,t){super(e),this.data=t}}function Er(r,e){r.emit(e.type,e)}function dpe(r){if(!r)return null;if(r instanceof IU)return{type:"canvas",element:r};let e=r;for(;e;){if(ph(e))return{type:"node",element:e};if(QH(e))return{type:"edge",element:e};if(j2(e))return{type:"combo",element:e};e=e.parentElement}return null}function nQ(r){var e;return((e=r==null?void 0:r.style)===null||e===void 0?void 0:e.zIndex)||0}const Id="cachedStyle",IS=r=>`__${r}__`;function hpe(r,e){const t=Array.isArray(e)?e:[e];jr(r,Id)||Nd(r,Id,{}),t.forEach(n=>{Nd(jr(r,Id),IS(n),r.attributes[n])})}function rQ(r,e){return jr(r,[Id,IS(e)])}function fpe(r,e){return IS(e)in(jr(r,Id)||{})}class gpe{constructor(e){this.tasks=[],this.animations=new Set,this.context=e}getTasks(){const e=[...this.tasks];return this.tasks=[],e}add(e,t){this.tasks.push([e,t])}animate(e,t,n){var i,a,s;(i=t==null?void 0:t.before)===null||i===void 0||i.call(t);const o=this.getTasks().map(([l,c])=>{var u,h,g;const{element:p,elementType:v,stage:m}=l,w=xJ(this.context.options,v,m,e);(u=c==null?void 0:c.before)===null||u===void 0||u.call(c);const b=w.length?TJ(p,this.inferStyle(l,n),w):null;return b?((h=c==null?void 0:c.beforeAnimate)===null||h===void 0||h.call(c,b),b.finished.then(()=>{var _,C;(_=c==null?void 0:c.afterAnimate)===null||_===void 0||_.call(c,b),(C=c==null?void 0:c.after)===null||C===void 0||C.call(c),this.animations.delete(b)})):(g=c==null?void 0:c.after)===null||g===void 0||g.call(c),b}).filter(Boolean);o.forEach(l=>this.animations.add(l));const A=F2(o);return A?((a=t==null?void 0:t.beforeAnimate)===null||a===void 0||a.call(t,A),A.finished.then(()=>{var l,c;(l=t==null?void 0:t.afterAnimate)===null||l===void 0||l.call(t,A),(c=t==null?void 0:t.after)===null||c===void 0||c.call(t),this.release()})):(s=t==null?void 0:t.after)===null||s===void 0||s.call(t),A}inferStyle(e,t){var n,i;const{element:a,elementType:s,stage:o,originalStyle:A,updatedStyle:l={}}=e;e.modifiedStyle||(e.modifiedStyle=Object.assign(Object.assign({},A),l));const{modifiedStyle:c}=e,u={},h={};if(o==="enter")Object.assign(u,{opacity:0});else if(o==="exit")Object.assign(h,{opacity:0});else if(o==="show")Object.assign(u,{opacity:0}),Object.assign(h,{opacity:(n=rQ(a,"opacity"))!==null&&n!==void 0?n:Kd("opacity")});else if(o==="hide")Object.assign(u,{opacity:(i=rQ(a,"opacity"))!==null&&i!==void 0?i:Kd("opacity")}),Object.assign(h,{opacity:0});else if(o==="collapse"){const{collapse:g}=t||{},{target:p,descendants:v,position:m}=g;if(s==="node"){if(v.includes(a.id)){const[w,b,_]=m;Object.assign(h,{x:w,y:b,z:_})}}else if(s==="combo"){if(a.id===p||v.includes(a.id)){const[w,b]=m;Object.assign(h,{x:w,y:b,childrenNode:A.childrenNode})}}else s==="edge"&&Object.assign(h,{sourceNode:c.sourceNode,targetNode:c.targetNode})}else if(o==="expand"){const{expand:g}=t||{},{target:p,descendants:v,position:m}=g;if(s==="node"){if(a.id===p||v.includes(a.id)){const[w,b,_]=m;Object.assign(u,{x:w,y:b,z:_})}}else if(s==="combo"){if(a.id===p||v.includes(a.id)){const[w,b,_]=m;Object.assign(u,{x:w,y:b,z:_,childrenNode:c.childrenNode})}}else s==="edge"&&Object.assign(u,{sourceNode:c.sourceNode,targetNode:c.targetNode})}return[Object.keys(u).length>0?Object.assign({},A,u):A,Object.keys(h).length>0?Object.assign({},c,h):c]}stop(){this.animations.forEach(e=>e.cancel())}clear(){this.tasks=[]}release(){var e,t;const{canvas:n}=this.context,i=(t=(e=n.document)===null||e===void 0?void 0:e.timeline)===null||t===void 0?void 0:t.animationsWithPromises;i&&(n.document.timeline.animationsWithPromises=i.filter(a=>a.playState!=="finished"))}destroy(){this.stop(),this.animations.clear(),this.tasks=[]}}class ppe{constructor(e){this.batchCount=0,this.context=e}emit(e){const{graph:t}=this.context;t.emit(e.type,e)}startBatch(e=!0){this.batchCount++,this.batchCount===1&&this.emit(new dr(Pe.BATCH_START,{initiate:e}))}endBatch(){this.batchCount--,this.batchCount===0&&this.emit(new dr(Pe.BATCH_END))}get isBatching(){return this.batchCount>0}destroy(){this.context=null}}class vpe extends P2{constructor(e){super(e),this.currentTarget=null,this.currentTargetType=null,this.category="behavior",this.forwardCanvasEvents=t=>{const{target:n}=t,i=dpe(n);if(!i)return;const{graph:a,canvas:s}=this.context,{type:o,element:A}=i;if("destroyed"in A&&(vh(A)||A.destroyed))return;const{type:l,detail:c,button:u}=t,h=Object.assign(Object.assign({},t),{target:A,targetType:o,originalTarget:n});l===_e.POINTER_MOVE&&(this.currentTarget!==A&&(this.currentTarget&&a.emit(`${this.currentTargetType}:${_e.POINTER_LEAVE}`,Object.assign(Object.assign({},h),{type:_e.POINTER_LEAVE,target:this.currentTarget,targetType:this.currentTargetType})),A&&(Object.assign(h,{type:_e.POINTER_ENTER}),a.emit(`${o}:${_e.POINTER_ENTER}`,h))),this.currentTarget=A,this.currentTargetType=o),l===_e.CLICK&&u===2||(a.emit(`${o}:${l}`,h),a.emit(l,h)),l===_e.CLICK&&c===2&&(Object.assign(h,{type:_e.DBLCLICK}),a.emit(`${o}:${_e.DBLCLICK}`,h),a.emit(_e.DBLCLICK,h)),l===_e.POINTER_DOWN&&u===2&&(Object.assign(h,{type:_e.CONTEXT_MENU,preventDefault:()=>{var g;(g=s.getContainer())===null||g===void 0||g.addEventListener(_e.CONTEXT_MENU,p=>p.preventDefault(),{once:!0})}}),a.emit(`${o}:${_e.CONTEXT_MENU}`,h),a.emit(_e.CONTEXT_MENU,h))},this.forwardContainerEvents=t=>{this.context.graph.emit(t.type,t)},this.forwardEvents(),this.setBehaviors(this.context.options.behaviors||[])}setBehaviors(e){this.setExtensions(e)}forwardEvents(){const e=this.context.canvas.getContainer();e&&[Ec.KEY_DOWN,Ec.KEY_UP].forEach(n=>{e.addEventListener(n,this.forwardContainerEvents)});const t=this.context.canvas.document;t&&[_e.CLICK,_e.DBLCLICK,_e.POINTER_OVER,_e.POINTER_LEAVE,_e.POINTER_ENTER,_e.POINTER_MOVE,_e.POINTER_OUT,_e.POINTER_DOWN,_e.POINTER_UP,_e.CONTEXT_MENU,_e.DRAG_START,_e.DRAG,_e.DRAG_END,_e.DRAG_ENTER,_e.DRAG_OVER,_e.DRAG_LEAVE,_e.DROP,_e.WHEEL].forEach(n=>{t.addEventListener(n,this.forwardCanvasEvents)})}destroy(){const e=this.context.canvas.getContainer();e&&[Ec.KEY_DOWN,Ec.KEY_UP].forEach(t=>{e.removeEventListener(t,this.forwardContainerEvents)}),this.context.canvas.document.removeAllEventListeners(),super.destroy()}}var mpe=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function BB(r){const{id:e=he(r),style:t,data:n}=r,i=mpe(r,["id","style","data"]),a=Object.assign(Object.assign({},r),{style:Object.assign({},t),data:Object.assign({},n)});return OJ(r)?Object.assign({id:e,data:a},i):{id:e,data:a}}function Ir(r){return r.data}function ype(r){if(r.hasTreeStructure(ra))return;r.attachTreeStructure(ra);const e=r.getAllEdges();for(const t of e){const{source:n,target:i}=t;r.setParent(i,n,ra)}}class wpe{constructor(){this.latestRemovedComboIds=new Set,this.comboIds=new Set,this.changes=[],this.batchCount=0,this.isTraceless=!1,this.enableUpdateNodeLikeHierarchy=!0,this.model=new Sr}pushChange(e){if(this.isTraceless)return;const{type:t}=e;if(t===Cn.NodeUpdated||t===Cn.EdgeUpdated||t===Cn.ComboUpdated){const{value:n,original:i}=e;this.changes.push({value:N1(n),original:N1(i),type:t})}else this.changes.push({value:N1(e.value),type:t})}getChanges(){return this.changes}clearChanges(){this.changes=[]}batch(e){this.batchCount++,this.model.batch(e),this.batchCount--}isBatching(){return this.batchCount>0}silence(e){this.isTraceless=!0,e(),this.isTraceless=!1}isCombo(e){return this.comboIds.has(e)||this.latestRemovedComboIds.has(e)}getData(){return{nodes:this.getNodeData(),edges:this.getEdgeData(),combos:this.getComboData()}}getNodeData(e){return this.model.getAllNodes().reduce((t,n)=>{const i=Ir(n);return this.isCombo(he(i))||(e===void 0||e.includes(he(i)))&&t.push(i),t},[])}getEdgeDatum(e){return Ir(this.model.getEdge(e))}getEdgeData(e){return this.model.getAllEdges().reduce((t,n)=>{const i=Ir(n);return(e===void 0||e.includes(he(i)))&&t.push(i),t},[])}getComboData(e){return this.model.getAllNodes().reduce((t,n)=>{const i=Ir(n);return this.isCombo(he(i))&&(e===void 0||e.includes(he(i)))&&t.push(i),t},[])}getRootsData(e=ra){return this.model.getRoots(e).map(Ir)}getAncestorsData(e,t){const{model:n}=this;return!n.hasNode(e)||!n.hasTreeStructure(t)?[]:n.getAncestors(e,t).map(Ir)}getDescendantsData(e){const t=this.getElementDataById(e),n=[];return Oc(t,i=>{i!==t&&n.push(i)},i=>this.getChildrenData(he(i)),"TB"),n}getParentData(e,t){const{model:n}=this;if(!t){ks.warn("The hierarchy structure key is not specified");return}if(!n.hasNode(e)||!n.hasTreeStructure(t))return;const i=n.getParent(e,t);return i?Ir(i):void 0}getChildrenData(e){const t=this.getElementType(e)==="node"?ra:an,{model:n}=this;return!n.hasNode(e)||!n.hasTreeStructure(t)?[]:n.getChildren(e,t).map(Ir)}getElementsDataByType(e){return e==="node"?this.getNodeData():e==="edge"?this.getEdgeData():e==="combo"?this.getComboData():[]}getElementDataById(e){return this.getElementType(e)==="edge"?this.getEdgeDatum(e):this.getNodeLikeDatum(e)}getNodeLikeDatum(e){const t=this.model.getNode(e);return Ir(t)}getNodeLikeData(e){return this.model.getAllNodes().reduce((t,n)=>{const i=Ir(n);return e?e.includes(he(i))&&t.push(i):t.push(i),t},[])}getElementDataByState(e,t){return this.getElementsDataByType(e).filter(i=>{var a;return(a=i.states)===null||a===void 0?void 0:a.includes(t)})}getElementState(e){var t;return((t=this.getElementDataById(e))===null||t===void 0?void 0:t.states)||[]}hasNode(e){return this.model.hasNode(e)&&!this.isCombo(e)}hasEdge(e){return this.model.hasEdge(e)}hasCombo(e){return this.model.hasNode(e)&&this.isCombo(e)}getRelatedEdgesData(e,t="both"){return this.model.getRelatedEdges(e,t).map(Ir)}getNeighborNodesData(e){return this.model.getNeighbors(e).map(Ir)}setData(e){const{nodes:t=[],edges:n=[],combos:i=[]}=e,{nodes:a,edges:s,combos:o}=this.getData(),A=aA(a,t,u=>he(u),cc),l=aA(s,n,u=>he(u),cc),c=aA(o,i,u=>he(u),cc);this.batch(()=>{const u={nodes:A.enter,edges:l.enter,combos:c.enter};this.addData(u),this.computeZIndex(u,"add",!0);const h={nodes:A.update,edges:l.update,combos:c.update};this.updateData(h),this.computeZIndex(h,"update",!0);const g={nodes:A.exit.map(he),edges:l.exit.map(he),combos:c.exit.map(he)};this.removeData(g)})}addData(e){const{nodes:t,edges:n,combos:i}=e;this.batch(()=>{this.addComboData(i),this.addNodeData(t),this.addEdgeData(n)}),this.computeZIndex(e,"add")}addNodeData(e=[]){e.length&&(this.model.addNodes(e.map(t=>(this.pushChange({value:t,type:Cn.NodeAdded}),BB(t)))),this.updateNodeLikeHierarchy(e),this.computeZIndex({nodes:e},"add"))}addEdgeData(e=[]){e.length&&(this.model.addEdges(e.map(t=>(this.pushChange({value:t,type:Cn.EdgeAdded}),BB(t)))),this.computeZIndex({edges:e},"add"))}addComboData(e=[]){if(!e.length)return;const{model:t}=this;t.hasTreeStructure(an)||t.attachTreeStructure(an),t.addNodes(e.map(n=>(this.comboIds.add(he(n)),this.pushChange({value:n,type:Cn.ComboAdded}),BB(n)))),this.updateNodeLikeHierarchy(e),this.computeZIndex({combos:e},"add")}addChildrenData(e,t){const n=this.getNodeLikeDatum(e),i=t.map(he);this.addNodeData(t),this.updateNodeData([{id:e,children:[...n.children||[],...i]}]),this.addEdgeData(i.map(a=>({source:e,target:a})))}computeZIndex(e,t,n=!1){!n&&this.isBatching()||this.batch(()=>{const{nodes:i=[],edges:a=[],combos:s=[]}=e;s.forEach(o=>{var A,l,c;const u=he(o);if(t==="add"&&je((A=o.style)===null||A===void 0?void 0:A.zIndex)||t==="update"&&!("combo"in o))return;const h=this.getParentData(u,an),g=h?((c=(l=h.style)===null||l===void 0?void 0:l.zIndex)!==null&&c!==void 0?c:0)+1:0;this.preventUpdateNodeLikeHierarchy(()=>{this.updateComboData([{id:u,style:{zIndex:g}}])})}),i.forEach(o=>{var A,l,c;const u=he(o);if(t==="add"&&je((A=o.style)===null||A===void 0?void 0:A.zIndex)||t==="update"&&!("combo"in o)&&!("children"in o))return;let h=0;const g=this.getParentData(u,an);if(g)h=(((l=g.style)===null||l===void 0?void 0:l.zIndex)||0)+1;else{const p=this.getParentData(u,ra);p&&(h=((c=p==null?void 0:p.style)===null||c===void 0?void 0:c.zIndex)||0)}this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:u,style:{zIndex:h}}])})}),a.forEach(o=>{var A,l,c,u,h;if(je((A=o.style)===null||A===void 0?void 0:A.zIndex))return;let{id:g,source:p,target:v}=o;if(!g)g=he(o);else{const b=this.getEdgeDatum(g);p=b.source,v=b.target}if(!p||!v)return;const m=((c=(l=this.getNodeLikeDatum(p))===null||l===void 0?void 0:l.style)===null||c===void 0?void 0:c.zIndex)||0,w=((h=(u=this.getNodeLikeDatum(v))===null||u===void 0?void 0:u.style)===null||h===void 0?void 0:h.zIndex)||0;this.updateEdgeData([{id:he(o),style:{zIndex:Math.max(m,w)-1}}])})})}getFrontZIndex(e){var t;const n=this.getElementType(e),i=this.getElementDataById(e),a=this.getData();if(Object.assign(a,{[`${n}s`]:a[`${n}s`].filter(s=>he(s)!==e)}),n==="combo"&&!Qi(i)){const s=new Set(this.getAncestorsData(e,an).map(he));a.nodes=a.nodes.filter(o=>!s.has(he(o))),a.combos=a.combos.filter(o=>!s.has(he(o))),a.edges=a.edges.filter(({source:o,target:A})=>!s.has(o)&&!s.has(A))}return Math.max(((t=i.style)===null||t===void 0?void 0:t.zIndex)||0,0,...Object.values(a).flat().map(s=>{var o;return(((o=s==null?void 0:s.style)===null||o===void 0?void 0:o.zIndex)||0)+1}))}updateNodeLikeHierarchy(e){if(!this.enableUpdateNodeLikeHierarchy)return;const{model:t}=this;e.forEach(n=>{const i=he(n),a=Pg(n);a!==void 0&&(t.hasTreeStructure(an)||t.attachTreeStructure(an),a===null&&this.refreshComboData(i),this.setParent(i,Pg(n),an));const s=n.children||[];if(s.length){t.hasTreeStructure(ra)||t.attachTreeStructure(ra);const o=s.filter(A=>t.hasNode(A));o.forEach(A=>this.setParent(A,i,ra)),o.length!==s.length&&this.updateNodeData([{id:i,children:o}])}})}preventUpdateNodeLikeHierarchy(e){this.enableUpdateNodeLikeHierarchy=!1,e(),this.enableUpdateNodeLikeHierarchy=!0}updateData(e){const{nodes:t,edges:n,combos:i}=e;this.batch(()=>{this.updateNodeData(t),this.updateComboData(i),this.updateEdgeData(n)}),this.computeZIndex(e,"update")}updateNodeData(e=[]){if(!e.length)return;const{model:t}=this;this.batch(()=>{const n=[];e.forEach(i=>{const a=he(i),s=Ir(t.getNode(a));if(cc(s,i))return;const o=Po(s,i);this.pushChange({value:o,original:s,type:Cn.NodeUpdated}),t.mergeNodeData(a,o),n.push(o)}),this.updateNodeLikeHierarchy(n)}),this.computeZIndex({nodes:e},"update")}refreshData(){const{nodes:e,edges:t,combos:n}=this.getData();e.forEach(i=>{this.pushChange({value:i,original:i,type:Cn.NodeUpdated})}),t.forEach(i=>{this.pushChange({value:i,original:i,type:Cn.EdgeUpdated})}),n.forEach(i=>{this.pushChange({value:i,original:i,type:Cn.ComboUpdated})})}syncNodeLikeDatum(e){const{model:t}=this,n=he(e);if(!t.hasNode(n))return;const i=Ir(t.getNode(n)),a=Po(i,e);t.mergeNodeData(n,a)}syncEdgeDatum(e){const{model:t}=this,n=he(e);if(!t.hasEdge(n))return;const i=Ir(t.getEdge(n)),a=Po(i,e);t.mergeEdgeData(n,a)}updateEdgeData(e=[]){if(!e.length)return;const{model:t}=this;this.batch(()=>{e.forEach(n=>{const i=he(n),a=Ir(t.getEdge(i));if(cc(a,n))return;n.source&&a.source!==n.source&&t.updateEdgeSource(i,n.source),n.target&&a.target!==n.target&&t.updateEdgeTarget(i,n.target);const s=Po(a,n);this.pushChange({value:s,original:a,type:Cn.EdgeUpdated}),t.mergeEdgeData(i,s)})}),this.computeZIndex({edges:e},"update")}updateComboData(e=[]){if(!e.length)return;const{model:t}=this;t.batch(()=>{const n=[];e.forEach(i=>{const a=he(i),s=Ir(t.getNode(a));if(cc(s,i))return;const o=Po(s,i);this.pushChange({value:o,original:s,type:Cn.ComboUpdated}),t.mergeNodeData(a,o),n.push(o)}),this.updateNodeLikeHierarchy(n)}),this.computeZIndex({combos:e},"update")}setParent(e,t,n,i=!0){if(e===t)return;const a=this.getNodeLikeDatum(e),s=Pg(a);if(s!==t&&n===an){const o={id:e,combo:t};this.isCombo(e)?this.syncNodeLikeDatum(o):this.syncNodeLikeDatum(o)}this.model.setParent(e,t,n),i&&n===an&&CK([s,t]).forEach(o=>{o!==void 0&&this.refreshComboData(o)})}refreshComboData(e){const t=this.getComboData([e])[0],n=this.getAncestorsData(e,an);t&&this.pushChange({value:t,original:t,type:Cn.ComboUpdated}),n.forEach(i=>{this.pushChange({value:i,original:i,type:Cn.ComboUpdated})})}getElementPosition(e){const t=this.getElementDataById(e);return Cr(t)}translateNodeLikeBy(e,t){this.isCombo(e)?this.translateComboBy(e,t):this.translateNodeBy(e,t)}translateNodeLikeTo(e,t){this.isCombo(e)?this.translateComboTo(e,t):this.translateNodeTo(e,t)}translateNodeBy(e,t){const n=this.getElementPosition(e),i=mt(n,[...t,0].slice(0,3));this.translateNodeTo(e,i)}translateNodeTo(e,t){const[n=0,i=0,a=0]=t;this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:e,style:{x:n,y:i,z:a}}])})}translateComboBy(e,t){const[n=0,i=0,a=0]=t;if([n,i,a].some(isNaN)||[n,i,a].every(A=>A===0))return;const s=this.getComboData([e])[0];if(!s)return;const o=new Set;Oc(s,A=>{const l=he(A);if(o.has(l))return;o.add(l);const[c,u,h]=Cr(A),g=Po(A,{style:{x:c+n,y:u+i,z:h+a}});this.pushChange({value:g,original:A,type:this.isCombo(l)?Cn.ComboUpdated:Cn.NodeUpdated}),this.model.mergeNodeData(l,g)},A=>this.getChildrenData(he(A)),"BT")}translateComboTo(e,t){var n;if(t.some(isNaN))return;const[i=0,a=0,s=0]=t,o=(n=this.getComboData([e]))===null||n===void 0?void 0:n[0];if(!o)return;const[A,l,c]=Cr(o),u=i-A,h=a-l,g=s-c;Oc(o,p=>{const v=he(p),[m,w,b]=Cr(p),_=Po(p,{style:{x:m+u,y:w+h,z:b+g}});this.pushChange({value:_,original:p,type:this.isCombo(v)?Cn.ComboUpdated:Cn.NodeUpdated}),this.model.mergeNodeData(v,_)},p=>this.getChildrenData(he(p)),"BT")}removeData(e){const{nodes:t,edges:n,combos:i}=e;this.batch(()=>{this.removeEdgeData(n),this.removeNodeData(t),this.removeComboData(i),this.latestRemovedComboIds=new Set(i)})}removeNodeData(e=[]){e.length&&this.batch(()=>{e.forEach(t=>{this.removeEdgeData(this.getRelatedEdgesData(t).map(he)),this.pushChange({value:this.getNodeData([t])[0],type:Cn.NodeRemoved}),this.removeNodeLikeHierarchy(t)}),this.model.removeNodes(e)})}removeEdgeData(e=[]){e.length&&(e.forEach(t=>this.pushChange({value:this.getEdgeData([t])[0],type:Cn.EdgeRemoved})),this.model.removeEdges(e))}removeComboData(e=[]){e.length&&this.batch(()=>{e.forEach(t=>{this.pushChange({value:this.getComboData([t])[0],type:Cn.ComboRemoved}),this.removeNodeLikeHierarchy(t),this.comboIds.delete(t)}),this.model.removeNodes(e)})}removeNodeLikeHierarchy(e){if(this.model.hasTreeStructure(an)){const t=Pg(this.getNodeLikeDatum(e));this.setParent(e,void 0,an,!1),this.model.getChildren(e,an).forEach(n=>{const i=Ir(n),a=he(i);this.setParent(he(i),t,an,!1);const s=Po(i,{id:he(i),combo:t});this.pushChange({value:s,original:i,type:this.isCombo(a)?Cn.ComboUpdated:Cn.NodeUpdated}),this.model.mergeNodeData(he(i),s)}),it(t)||this.refreshComboData(t)}}getElementType(e){if(this.model.hasNode(e))return this.isCombo(e)?"combo":"node";if(this.model.hasEdge(e))return"edge";throw new Error(eo(`Unknown element type of id: ${e}`))}destroy(){const{model:e}=this,t=e.getAllNodes(),n=e.getAllEdges();e.removeEdges(n.map(i=>i.id)),e.removeNodes(t.map(i=>i.id)),this.context={}}}var gc=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class bpe{constructor(e){this.elementMap={},this.shapeTypeMap={},this.paletteStyle={},this.defaultStyle={},this.stateStyle={},this.visibilityCache=new WeakMap,this.context=e}init(){this.initContainer()}initContainer(){if(!this.container||this.container.destroyed){const{canvas:e}=this.context;this.container=e.appendChild(new xr({className:"elements"}))}}emit(e,t){t.silence||Er(this.context.graph,e)}forEachElementData(e){vl.forEach(t=>{const n=this.context.model.getElementsDataByType(t);e(t,n)})}getElementType(e,t){var n;const{options:i,graph:a}=this.context,s=NI(t)&&((n=i[e])===null||n===void 0?void 0:n.type)||t.type;return s?typeof s=="string"?s:s.call(a,t):e==="edge"?"line":"circle"}getTheme(e){return V4(this.context.options)[e]||{}}getThemeStyle(e){return this.getTheme(e).style||{}}getThemeStateStyle(e,t){const{state:n={}}=this.getTheme(e);return Object.assign({},...t.map(i=>n[i]||{}))}computePaletteStyle(){const{options:e}=this.context;this.paletteStyle={},this.forEachElementData((t,n)=>{var i,a;const s=Object.assign({},vI((i=this.getTheme(t))===null||i===void 0?void 0:i.palette),vI((a=e[t])===null||a===void 0?void 0:a.palette));s!=null&&s.field&&Object.assign(this.paletteStyle,Tee(n,s))})}getPaletteStyle(e,t){const n=this.paletteStyle[t];return n?e==="edge"?{stroke:n}:{fill:n}:{}}computeElementDefaultStyle(e,t){var n;const{options:i}=this.context,a=((n=i[e])===null||n===void 0?void 0:n.style)||{};"transform"in a&&Array.isArray(a.transform)&&(a.transform=[...a.transform]),this.defaultStyle[he(t.datum)]=pI(a,t)}computeElementsDefaultStyle(e){const{graph:t}=this.context;this.forEachElementData((n,i)=>{const a=i.length;for(let s=0;s<a;s++){const o=i[s];(e===void 0||e.includes(he(o)))&&this.computeElementDefaultStyle(n,{datum:o,graph:t})}})}getDefaultStyle(e){return this.defaultStyle[e]||{}}getElementState(e){try{const{model:t}=this.context;return t.getElementState(e)}catch{return[]}}getElementStateStyle(e,t,n){var i,a;const{options:s}=this.context,o=((a=(i=s[e])===null||i===void 0?void 0:i.state)===null||a===void 0?void 0:a[t])||{};return pI(o,n)}computeElementStatesStyle(e,t,n){this.stateStyle[he(n.datum)]=Object.assign({},...t.map(i=>this.getElementStateStyle(e,i,n)))}computeElementsStatesStyle(e){const{graph:t}=this.context;this.forEachElementData((n,i)=>{const a=i.length;for(let s=0;s<a;s++){const o=i[s];if(e===void 0||e.includes(he(o))){const A=this.getElementState(he(o));this.computeElementStatesStyle(n,A,{datum:o,graph:t})}}})}getStateStyle(e){return this.stateStyle[e]||{}}computeStyle(e,t){e&&["translate","zIndex"].includes(e)||(this.computePaletteStyle(),this.computeElementsDefaultStyle(t),this.computeElementsStatesStyle(t))}getElement(e){return this.elementMap[e]}getNodes(){return this.context.model.getNodeData().map(({id:e})=>this.elementMap[e])}getEdges(){return this.context.model.getEdgeData().map(e=>this.elementMap[he(e)])}getCombos(){return this.context.model.getComboData().map(({id:e})=>this.elementMap[e])}getElementComputedStyle(e,t){const n=he(t),i=this.getThemeStyle(e),a=this.getPaletteStyle(e,n),s=t.style||{},o=this.getDefaultStyle(n),A=this.getThemeStateStyle(e,this.getElementState(n)),l=this.getStateStyle(n),c=NI(t)?Object.assign({},i,a,s,o,A,l):Object.assign({},s);if(e==="combo"){const u=this.context.model.getChildrenData(n),g=!!c.collapsed?[]:u.map(he).filter(p=>this.getElement(p));Object.assign(c,{childrenNode:g,childrenData:u})}return c}getDrawData(e){this.init();const t=this.computeChangesAndDrawData(e);if(!t)return null;const{type:n="draw",stage:i=n}=e;return this.markDestroyElement(t.drawData),this.computeStyle(i),{type:n,stage:i,data:t}}draw(e={animation:!0}){const t=this.getDrawData(e);if(!t)return;const{data:{drawData:{add:n,update:i,remove:a}}}=t;return this.destroyElements(a,e),this.createElements(n,e),this.updateElements(i,e),this.setAnimationTask(e,t)}preLayoutDraw(){return gc(this,arguments,void 0,function*(e={animation:!0}){var t,n;const i=this.getDrawData(e);if(!i)return;const{data:{drawData:a}}=i;yield(n=(t=this.context.layout)===null||t===void 0?void 0:t.preLayout)===null||n===void 0?void 0:n.call(t,a);const{add:s,update:o,remove:A}=a;return this.destroyElements(A,e),this.createElements(s,e),this.updateElements(o,e),this.setAnimationTask(e,i)})}setAnimationTask(e,t){const{animation:n,silence:i}=e,{data:{dataChanges:a,drawData:s},stage:o,type:A}=t;return this.context.animation.animate(n,i?{}:{before:()=>this.emit(new dr(Pe.BEFORE_DRAW,{dataChanges:a,animation:n,stage:o,render:A==="render"}),e),beforeAnimate:l=>this.emit(new _a(Pe.BEFORE_ANIMATE,Oi.DRAW,l,s),e),afterAnimate:l=>this.emit(new _a(Pe.AFTER_ANIMATE,Oi.DRAW,l,s),e),after:()=>this.emit(new dr(Pe.AFTER_DRAW,{dataChanges:a,animation:n,stage:o,render:A==="render",firstRender:this.context.graph.rendered===!1}),e)})}computeChangesAndDrawData(e){const{model:t}=this.context,n=t.getChanges(),i=mS(n);if(i.length===0)return null;const{NodeAdded:a=[],NodeUpdated:s=[],NodeRemoved:o=[],EdgeAdded:A=[],EdgeUpdated:l=[],EdgeRemoved:c=[],ComboAdded:u=[],ComboUpdated:h=[],ComboRemoved:g=[]}=fv(i,M=>M.type),p=(M,F)=>{const k=[];return M.forEach(P=>{const N=he(P.value);this.getElement(N)?k.push(P):F.push(P)}),k},v=p(s,a),m=p(l,A),w=p(h,u),b=M=>new Map(M.map(F=>{const k=F.value;return[he(k),k]})),_={add:{nodes:b(a),edges:b(A),combos:b(u)},update:{nodes:b(v),edges:b(m),combos:b(w)},remove:{nodes:b(o),edges:b(c),combos:b(g)}},C=this.transformData(_,e);return t.clearChanges(),{dataChanges:n,drawData:C}}transformData(e,t){const n=this.context.transform.getTransformInstance();return Object.values(n).reduce((i,a)=>a.beforeDraw(i,t),e)}createElement(e,t,n){var i;const a=he(t);if(this.getElement(a))return;const o=this.getElementType(e,t),A=this.getElementComputedStyle(e,t),l=io(e,o);if(!l)return ks.warn(`The element ${o} of ${e} is not registered.`);this.emit(new fc(Pe.BEFORE_ELEMENT_CREATE,e,t),n);const c=this.container.appendChild(new l({id:a,context:this.context,style:A}));this.shapeTypeMap[a]=o,this.elementMap[a]=c;const{stage:u="enter"}=n;(i=this.context.animation)===null||i===void 0||i.add({element:c,elementType:e,stage:u,originalStyle:Object.assign({},c.attributes),updatedStyle:A},{after:()=>{var h;this.emit(new fc(Pe.AFTER_ELEMENT_CREATE,e,t),n),(h=c.onCreate)===null||h===void 0||h.call(c)}})}createElements(e,t){const{nodes:n,edges:i,combos:a}=e;[["node",n],["combo",a],["edge",i]].forEach(([o,A])=>{A.forEach(l=>this.createElement(o,l,t))})}getUpdateStageStyle(e,t,n){const{stage:i="update"}=n;if(i==="translate")if(e==="node"||e==="combo"){const{style:{x:a=0,y:s=0,z:o=0}={}}=t;return{x:a,y:s,z:o}}else return{};return this.getElementComputedStyle(e,t)}updateElement(e,t,n){var i;const a=he(t),{stage:s="update"}=n,o=this.getElement(a);if(!o)return()=>null;this.emit(new fc(Pe.BEFORE_ELEMENT_UPDATE,e,t),n);const A=this.getElementType(e,t),l=this.getUpdateStageStyle(e,t,n);this.shapeTypeMap[a]!==A&&(o.destroy(),delete this.shapeTypeMap[a],delete this.elementMap[a],this.createElement(e,t,{animation:!1,silence:!0}));const c=s!=="visibility"?s:l.visibility==="hidden"?"hide":"show";c==="hide"&&delete l.visibility,(i=this.context.animation)===null||i===void 0||i.add({element:o,elementType:e,stage:c,originalStyle:Object.assign({},o.attributes),updatedStyle:l},{before:()=>{const u=this.elementMap[a];s!=="collapse"&&Tx(u,l),s==="visibility"&&(fpe(u,"opacity")||hpe(u,"opacity"),this.visibilityCache.set(u,c==="show"?"visible":"hidden"),c==="show"&&gl(u,"visible"))},after:()=>{var u;const h=this.elementMap[a];s==="collapse"&&Tx(h,l),c==="hide"&&gl(h,this.visibilityCache.get(h)),this.emit(new fc(Pe.AFTER_ELEMENT_UPDATE,e,t),n),(u=h.onUpdate)===null||u===void 0||u.call(h)}})}updateElements(e,t){const{nodes:n,edges:i,combos:a}=e;[["node",n],["combo",a],["edge",i]].forEach(([o,A])=>{A.forEach(l=>this.updateElement(o,l,t))})}markDestroyElement(e){Object.values(e.remove).forEach(t=>{t.forEach(n=>{const i=he(n),a=this.getElement(i);a&&wne(a)})})}destroyElement(e,t,n){var i;const{stage:a="exit"}=n,s=he(t),o=this.elementMap[s];if(!o)return()=>null;this.emit(new fc(Pe.BEFORE_ELEMENT_DESTROY,e,t),n),(i=this.context.animation)===null||i===void 0||i.add({element:o,elementType:e,stage:a,originalStyle:Object.assign({},o.attributes),updatedStyle:{}},{after:()=>{var A;this.clearElement(s),o.destroy(),(A=o.onDestroy)===null||A===void 0||A.call(o),this.emit(new fc(Pe.AFTER_ELEMENT_DESTROY,e,t),n)}})}destroyElements(e,t){const{nodes:n,edges:i,combos:a}=e;[["combo",a],["edge",i],["node",n]].forEach(([o,A])=>{A.forEach(l=>this.destroyElement(o,l,t))})}clearElement(e){delete this.paletteStyle[e],delete this.defaultStyle[e],delete this.stateStyle[e],delete this.elementMap[e],delete this.shapeTypeMap[e]}alignLayoutResultToElement(e,t){var n,i;const a=(n=e.nodes)===null||n===void 0?void 0:n.find(s=>he(s)===t);if(a){const s=Cr(this.context.model.getNodeLikeDatum(t)),o=Cr(a),A=rn(s,o);(i=e.nodes)===null||i===void 0||i.forEach(l=>{var c,u,h;!((c=l.style)===null||c===void 0)&&c.x&&(l.style.x+=A[0]),!((u=l.style)===null||u===void 0)&&u.y&&(l.style.y+=A[1]),!((h=l.style)===null||h===void 0)&&h.z&&(l.style.z+=A[2]||0)})}}syncLayoutResult(e,t){return gc(this,void 0,void 0,function*(){const{layout:n,model:i}=this.context;if(!n)return;const a=this.context.options.layout,s=A=>Array.isArray(A)?A.map(l=>Object.assign(Object.assign({},l),{preLayout:!0})):Object.assign(Object.assign({},A),{preLayout:!0}),o=yield n.simulate(a?s(a):void 0);t&&this.alignLayoutResultToElement(o,e),i.updateData(o)})}collapseNode(e,t){return gc(this,void 0,void 0,function*(){var n;const{animation:i,align:a}=t;yield this.syncLayoutResult(e,a);const s=this.computeChangesAndDrawData({stage:"collapse",animation:i});if(!s)return;const{drawData:o}=s,{add:A,remove:l,update:c}=o;this.markDestroyElement(o);const u={animation:i,stage:"collapse",data:o};this.destroyElements(l,u),this.createElements(A,u),this.updateElements(c,u),yield(n=this.context.animation.animate(i,{beforeAnimate:h=>this.emit(new _a(Pe.BEFORE_ANIMATE,Oi.COLLAPSE,h,o),u),afterAnimate:h=>this.emit(new _a(Pe.AFTER_ANIMATE,Oi.COLLAPSE,h,o),u)},{collapse:{target:e,descendants:Array.from(l.nodes).map(([,h])=>he(h)),position:Cr(c.nodes.get(e))}}))===null||n===void 0?void 0:n.finished})}expandNode(e,t){return gc(this,void 0,void 0,function*(){var n;const{model:i}=this.context,{animation:a,align:s}=t,o=Cr(i.getNodeData([e])[0]);yield this.syncLayoutResult(e,s);const A=this.computeChangesAndDrawData({stage:"expand",animation:a});if(this.createElements(A.drawData.add,{animation:!1,stage:"expand",target:e}),this.context.animation.clear(),this.computeStyle("expand"),!A)return;const{drawData:l}=A,{update:c,add:u}=l,h={animation:a,stage:"expand",data:l};u.edges.forEach(g=>c.edges.set(he(g),g)),u.nodes.forEach(g=>c.nodes.set(he(g),g)),this.updateElements(c,h),yield(n=this.context.animation.animate(a,{beforeAnimate:g=>this.emit(new _a(Pe.BEFORE_ANIMATE,Oi.EXPAND,g,l),h),afterAnimate:g=>this.emit(new _a(Pe.AFTER_ANIMATE,Oi.EXPAND,g,l),h)},{expand:{target:e,descendants:Array.from(u.nodes).map(([,g])=>he(g)),position:o}}))===null||n===void 0?void 0:n.finished})}collapseCombo(e,t){return gc(this,void 0,void 0,function*(){var n;const{model:i,element:a}=this.context;if(i.getAncestorsData(e,an).some(v=>Qi(v)))return;const s=a.getElement(e),o=s.getComboPosition(Object.assign(Object.assign({},s.attributes),{collapsed:!0})),A=this.computeChangesAndDrawData({stage:"collapse",animation:t});if(!A)return;const{dataChanges:l,drawData:c}=A;this.markDestroyElement(c);const{update:u,remove:h}=c,g={animation:t,stage:"collapse",data:c};this.destroyElements(h,g),this.updateElements(u,g);const p=v=>Array.from(v).map(([,m])=>he(m));yield(n=this.context.animation.animate(t,{before:()=>this.emit(new dr(Pe.BEFORE_DRAW,{dataChanges:l,animation:t}),g),beforeAnimate:v=>this.emit(new _a(Pe.BEFORE_ANIMATE,Oi.COLLAPSE,v,c),g),afterAnimate:v=>this.emit(new _a(Pe.AFTER_ANIMATE,Oi.COLLAPSE,v,c),g),after:()=>this.emit(new dr(Pe.AFTER_DRAW,{dataChanges:l,animation:t}),g)},{collapse:{target:e,descendants:[...p(h.nodes),...p(h.combos)],position:o}}))===null||n===void 0?void 0:n.finished})}expandCombo(e,t){return gc(this,void 0,void 0,function*(){var n;const{model:i}=this.context,a=Cr(i.getComboData([e])[0]);this.computeStyle("expand");const s=this.computeChangesAndDrawData({stage:"expand",animation:t});if(!s)return;const{dataChanges:o,drawData:A}=s,{add:l,update:c}=A,u={animation:t,stage:"expand",data:A,target:e};this.createElements(l,u),this.updateElements(c,u);const h=g=>Array.from(g).map(([,p])=>he(p));yield(n=this.context.animation.animate(t,{before:()=>this.emit(new dr(Pe.BEFORE_DRAW,{dataChanges:o,animation:t}),u),beforeAnimate:g=>this.emit(new _a(Pe.BEFORE_ANIMATE,Oi.EXPAND,g,A),u),afterAnimate:g=>this.emit(new _a(Pe.AFTER_ANIMATE,Oi.EXPAND,g,A),u),after:()=>this.emit(new dr(Pe.AFTER_DRAW,{dataChanges:o,animation:t}),u)},{expand:{target:e,descendants:[...h(l.nodes),...h(l.combos)],position:a}}))===null||n===void 0?void 0:n.finished})}clear(){this.container.destroy(),this.initContainer(),this.elementMap={},this.shapeTypeMap={},this.defaultStyle={},this.stateStyle={},this.paletteStyle={}}destroy(){this.clear(),this.container.destroy(),this.context={}}}var pc=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})},_pe=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class Epe{get presetOptions(){return{animation:!!q4(this.context.options,!0)}}get options(){const{options:e}=this.context;return e.layout}constructor(e){this.instances=[],this.context=e}getLayoutInstance(){return this.instances}preLayout(e){return pc(this,void 0,void 0,function*(){var t,n,i,a;const{graph:s,model:o}=this.context,{add:A}=e;Er(s,new dr(Pe.BEFORE_LAYOUT,{type:"pre"}));const l=yield(t=this.context.layout)===null||t===void 0?void 0:t.simulate();(n=l==null?void 0:l.nodes)===null||n===void 0||n.forEach(c=>{const u=he(c),h=A.nodes.get(u);o.syncNodeLikeDatum(c),h&&Object.assign(h.style,c.style)}),(i=l==null?void 0:l.edges)===null||i===void 0||i.forEach(c=>{const u=he(c),h=A.edges.get(u);o.syncEdgeDatum(c),h&&Object.assign(h.style,c.style)}),(a=l==null?void 0:l.combos)===null||a===void 0||a.forEach(c=>{const u=he(c),h=A.combos.get(u);o.syncNodeLikeDatum(c),h&&Object.assign(h.style,c.style)}),Er(s,new dr(Pe.AFTER_LAYOUT,{type:"pre"})),this.transformDataAfterLayout("pre",e)})}postLayout(){return pc(this,arguments,void 0,function*(e=this.options){if(!e)return;const t=Array.isArray(e)?e:[e],{graph:n}=this.context;Er(n,new dr(Pe.BEFORE_LAYOUT,{type:"post"}));for(let i=0;i<t.length;i++){const a=t[i],s=this.getLayoutData(a),o=Object.assign(Object.assign({},this.presetOptions),a);Er(n,new dr(Pe.BEFORE_STAGE_LAYOUT,{options:o,index:i}));const A=yield this.stepLayout(s,o,i);Er(n,new dr(Pe.AFTER_STAGE_LAYOUT,{options:o,index:i})),a.animation||this.updateElementPosition(A,!1)}Er(n,new dr(Pe.AFTER_LAYOUT,{type:"post"})),this.transformDataAfterLayout("post")})}transformDataAfterLayout(e,t){const n=this.context.transform.getTransformInstance();Object.values(n).forEach(i=>i.afterLayout(e,t))}simulate(){return pc(this,arguments,void 0,function*(e=this.options){if(!e)return{};const t=Array.isArray(e)?e:[e];let n={};for(let i=0;i<t.length;i++){const a=t[i],s=this.getLayoutData(a);n=yield this.stepLayout(s,Object.assign(Object.assign(Object.assign({},this.presetOptions),a),{animation:!1}),i)}return n})}stepLayout(e,t,n){return pc(this,void 0,void 0,function*(){return Sne(t)?yield this.treeLayout(e,t,n):yield this.graphLayout(e,t,n)})}graphLayout(e,t,n){return pc(this,void 0,void 0,function*(){const{animation:i,enableWorker:a,iterations:s=300}=t,o=this.initGraphLayout(t);if(!o)return{};if(this.instances[n]=o,this.instance=o,a){const l=o;return this.supervisor=new Fce(l.graphData2LayoutModel(e),l.instance,{iterations:s}),cp(yield this.supervisor.execute())}if(Nx(o))return i?yield o.execute(e,{onTick:l=>{this.updateElementPosition(l,!1)}}):(o.execute(e),o.stop(),o.tick(s));const A=yield o.execute(e);if(i){const l=this.updateElementPosition(A,i);yield l==null?void 0:l.finished}return A})}treeLayout(e,t,n){return pc(this,void 0,void 0,function*(){const{type:i,animation:a}=t,s=io("layout",i);if(!s)return{};const{nodes:o=[],edges:A=[]}=e,l=new Sr({nodes:o.map(p=>({id:he(p),data:p.data||{}})),edges:A.map(p=>({id:he(p),source:p.source,target:p.target,data:p.data||{}}))});ype(l);const c={nodes:[],edges:[]},u={nodes:[],edges:[]};l.getRoots(ra).forEach(p=>{Oc(p,_=>{_.children=l.getSuccessors(_.id)},_=>l.getSuccessors(_.id),"TB");const v=s(p,t),{x:m,y:w,z:b=0}=v;Oc(v,_=>{const{id:C,x:M,y:F,z:k=0}=_;c.nodes.push({id:C,style:{x:m,y:w,z:b}}),u.nodes.push({id:C,style:{x:M,y:F,z:k}})},_=>_.children,"TB")});const g=this.inferTreeLayoutOffset(u);if(iQ(u,g),a){iQ(c,g),this.updateElementPosition(c,!1);const p=this.updateElementPosition(u,a);yield p==null?void 0:p.finished}return u})}inferTreeLayoutOffset(e){var t;let[n,i]=[1/0,-1/0],[a,s]=[1/0,-1/0];(t=e.nodes)===null||t===void 0||t.forEach(v=>{const{x:m=0,y:w=0}=v.style||{};n=Math.min(n,m),i=Math.max(i,m),a=Math.min(a,w),s=Math.max(s,w)});const{canvas:o}=this.context,A=o.getSize(),[l,c]=o.getCanvasByViewport([0,0]),[u,h]=o.getCanvasByViewport(A);if(n>=l&&i<=u&&a>=c&&s<=h)return[0,0];const g=(l+u)/2,p=(c+h)/2;return[g-(n+i)/2,p-(a+s)/2]}stopLayout(){this.instance&&Nx(this.instance)&&(this.instance.stop(),this.instance=void 0),this.supervisor&&(this.supervisor.stop(),this.supervisor=void 0),this.animationResult&&(this.animationResult.finish(),this.animationResult=void 0)}getLayoutData(e){const{nodeFilter:t=()=>!0,comboFilter:n=()=>!0,preLayout:i=!1,isLayoutInvisibleNodes:a=!1}=e,{nodes:s,edges:o,combos:A}=this.context.model.getData(),{element:l,model:c}=this.context,u=w=>l.getElement(w),h=i?w=>{var b;return!a&&(((b=w.style)===null||b===void 0?void 0:b.visibility)==="hidden"||c.getAncestorsData(w.id,ra).some(Qi)||c.getAncestorsData(w.id,an).some(Qi))?!1:t(w)}:w=>{const b=he(w),_=u(b);return!_||vh(_)?!1:t(w)},g=s.filter(h),p=A.filter(n),v=new Map(g.map(w=>[he(w),w]));p.forEach(w=>v.set(he(w),w));const m=o.filter(({source:w,target:b})=>v.has(w)&&v.has(b));return{nodes:g,edges:m,combos:p}}initGraphLayout(e){var t;const{element:n,viewport:i}=this.context,{type:a,enableWorker:s,animation:o,iterations:A}=e,l=_pe(e,["type","enableWorker","animation","iterations"]),[c,u]=i.getCanvasSize(),h=[c/2,u/2],g=(t=e==null?void 0:e.nodeSize)!==null&&t!==void 0?t:(b=>{const _=n==null?void 0:n.getElement(b.id);return _?_.attributes.size:n==null?void 0:n.getElementComputedStyle("node",b).size}),p=io("layout",a);if(!p)return ks.warn(`The layout of ${a} is not registered.`);const v=Object.getPrototypeOf(p.prototype)===$v.prototype?p:Mne(p,this.context),m=new v(this.context),w={nodeSize:g,width:c,height:u,center:h};switch(m.id){case"d3-force":case"d3-force-3d":Object.assign(w,{center:{x:c/2,y:u/2,z:0}});break}return qr(m.options,w,l),m}updateElementPosition(e,t){const{model:n,element:i}=this.context;return i?(n.updateData(e),i.draw({animation:t,silence:!0})):null}destroy(){var e;this.stopLayout(),this.context={},(e=this.supervisor)===null||e===void 0||e.kill(),this.supervisor=void 0,this.instance=void 0,this.instances=[],this.animationResult=void 0}}const iQ=(r,e)=>{var t;const[n,i]=e;(t=r.nodes)===null||t===void 0||t.forEach(a=>{if(a.style){const{x:s=0,y:o=0}=a.style;a.style.x=s+n,a.style.y=o+i}else a.style={x:n,y:i}})};function Cpe(r){return[Bpe].reduce((t,n)=>n(t),r)}function Bpe(r){return!r.layout||Array.isArray(r.layout)||"preLayout"in r.layout||["antv-dagre","combo-combined","compact-box","circular","concentric","dagre","fishbone","grid","indented","mds","radial","random","snake","dendrogram","mindmap"].includes(r.layout.type)&&(r.layout.preLayout=!0),r}class xpe extends P2{constructor(e){super(e),this.category="plugin",this.setPlugins(this.context.options.plugins||[])}setPlugins(e){this.setExtensions(e)}getPluginInstance(e){const t=this.extensionMap[e];if(t)return t;ks.warn(`Cannot find the plugin ${e}, will try to find it by type.`);const n=this.extensions.find(i=>i.type===e);if(n)return this.extensionMap[n.key]}}const tp=["update-related-edges","collapse-expand-node","collapse-expand-combo","get-edge-actual-ends","arrange-draw-order"];class Spe extends P2{constructor(e){super(e),this.category="transform",this.setTransforms(this.context.options.transforms||[])}getTransforms(){}setTransforms(e){this.setExtensions([...tp.slice(0,tp.length-1),...e,tp[tp.length-1]])}getTransformInstance(e){return e?this.extensionMap[e]:this.extensionMap}}var td=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class Tpe{get padding(){return Fa(this.context.options.padding)}get paddingOffset(){const[e,t,n,i]=this.padding,[a,s,o]=[(i-t)/2,(e-n)/2,0];return[a,s,o]}constructor(e){this.landmarkCounter=0,this.context=e;const[t,n]=this.paddingOffset,{zoom:i,rotation:a,x:s=t,y:o=n}=e.options;this.transform({mode:"absolute",scale:i,translate:[s,o],rotate:a},!1)}get camera(){const{canvas:e}=this.context;return new Proxy(e.getCamera(),{get:(t,n)=>{const a=Object.entries(e.getLayers()).filter(([o])=>!["main"].includes(o)).map(([,o])=>o.getCamera()),s=t[n];if(typeof s=="function")return(...o)=>{const A=s.apply(t,o);return a.forEach(l=>{l[n].apply(l,o)}),A}}})}createLandmark(e){return this.camera.createLandmark(`landmark-${this.landmarkCounter++}`,e)}getAnimation(e){const t=q4(this.context.options,e);return t?cl(Object.assign({},t),["easing","duration"]):!1}getCanvasSize(){const{canvas:e}=this.context,{width:t=0,height:n=0}=e.getConfig();return[t,n]}getCanvasCenter(){const{canvas:e}=this.context,{width:t=0,height:n=0}=e.getConfig();return[t/2,n/2,0]}getViewportCenter(){const[e,t]=this.camera.getPosition();return[e,t,0]}getGraphCenter(){return this.context.graph.getViewportByCanvas(this.getCanvasCenter())}getZoom(){return this.camera.getZoom()}getRotation(){return this.camera.getRoll()}getTranslateOptions(e){const{camera:t}=this,{mode:n,translate:i=[]}=e,a=this.getZoom(),s=t.getPosition(),o=t.getFocalPoint(),[A,l]=this.getCanvasCenter(),[c=0,u=0,h=0]=i,g=es([-c,-u,-h],a);return n==="relative"?{position:mt(s,g),focalPoint:mt(o,g)}:{position:mt([A,l,s[2]],g),focalPoint:mt([A,l,o[2]],g)}}getRotateOptions(e){const{mode:t,rotate:n=0}=e;return{roll:t==="relative"?this.camera.getRoll()+n:n}}getZoomOptions(e){const{zoomRange:t}=this.context.options,n=this.camera.getZoom(),{mode:i,scale:a=1}=e;return Rn(i==="relative"?n*a:a,...t)}transform(e,t){return td(this,void 0,void 0,function*(){const{graph:n}=this.context,{translate:i,rotate:a,scale:s,origin:o}=e;this.cancelAnimation();const A=this.getAnimation(t);if(Er(n,new ep(Pe.BEFORE_TRANSFORM,e)),!a&&s&&!i&&o&&!A){this.camera.setZoomByViewportPoint(this.getZoomOptions(e),o),Er(n,new ep(Pe.AFTER_TRANSFORM,e));return}const l={};if(i&&Object.assign(l,this.getTranslateOptions(e)),je(a)&&Object.assign(l,this.getRotateOptions(e)),je(s)&&Object.assign(l,{zoom:this.getZoomOptions(e)}),A)return Er(n,new _a(Pe.BEFORE_ANIMATE,Oi.TRANSFORM,null,e)),new Promise(c=>{this.transformResolver=c,this.camera.gotoLandmark(this.createLandmark(l),Object.assign(Object.assign({},A),{onfinish:()=>{Er(n,new _a(Pe.AFTER_ANIMATE,Oi.TRANSFORM,null,e)),Er(n,new ep(Pe.AFTER_TRANSFORM,e)),this.transformResolver=void 0,c()}}))});this.camera.gotoLandmark(this.createLandmark(l),{duration:0}),Er(n,new ep(Pe.AFTER_TRANSFORM,e))})}fitView(e,t){return td(this,void 0,void 0,function*(){const[n,i,a,s]=this.padding,{when:o="always",direction:A="both"}=e||{},[l,c]=this.context.canvas.getSize(),u=l-s-i,h=c-n-a,g=this.context.canvas.getBounds(),p=this.getBBoxInViewport(g),[v,m]=fA(p),w=A==="x"&&v>=u||A==="y"&&m>=h||A==="both"&&v>=u&&m>=h;if(o==="overflow"&&!w)return yield this.fitCenter({animation:t});const b=u/v,_=h/m,C=A==="x"?b:A==="y"?_:Math.min(b,_),M=this.getAnimation(t);Number.isFinite(C)&&(yield this.transform({mode:"relative",scale:C,translate:mt(rn(this.getCanvasCenter(),this.getBBoxInViewport(g).center),es(this.paddingOffset,C))},M))})}fitCenter(e){return td(this,void 0,void 0,function*(){const t=this.context.canvas.getBounds();yield this.focus(t,e)})}focusElements(e){return td(this,arguments,void 0,function*(t,n={}){const{element:i}=this.context;if(!i)return;const a=o=>n.shapes?o.getShape(n.shapes).getRenderBounds():o.getRenderBounds(),s=uh(t.map(o=>a(i.getElement(o))));yield this.focus(s,n)})}focus(e,t){return td(this,void 0,void 0,function*(){const n=this.context.graph.getViewportByCanvas(e.center),i=t.position||this.getCanvasCenter(),a=rn(i,n);yield this.transform({mode:"relative",translate:mt(a,this.paddingOffset)},t.animation)})}getBBoxInViewport(e){const{min:t,max:n}=e,{graph:i}=this.context,[a,s]=i.getViewportByCanvas(t),[o,A]=i.getViewportByCanvas(n),l=new vn;return l.setMinMax([a,s,0],[o,A,0]),l}isInViewport(e,t=!1,n=0){const{graph:i}=this.context,a=this.getCanvasSize(),[s,o]=i.getCanvasByViewport([0,0]),[A,l]=i.getCanvasByViewport(a);let c=new vn;return c.setMinMax([s,o,0],[A,l,0]),n&&(c=gA(c,n)),zc(e)?Ja(e,c):t?DJ(e,c):c.intersects(e)}cancelAnimation(){var e,t;!((e=this.camera.landmarks)===null||e===void 0)&&e.length&&this.camera.cancelLandmarkAnimation(),(t=this.transformResolver)===null||t===void 0||t.call(this)}}var un=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function A(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){c.done?a(c.value):i(c.value).then(o,A)}l((n=n.apply(r,e||[])).next())})};class Zm extends Wv{constructor(e){var t;super(),this.options={},this.rendered=!1,this.destroyed=!1,this.context={model:new wpe},this.isCollapsingExpanding=!1,this.onResize=nh(()=>{this.resize()},300),this._setOptions(Object.assign({},Zm.defaultOptions,e),!0),this.context.graph=this,this.options.autoResize&&((t=globalThis.addEventListener)===null||t===void 0||t.call(globalThis,"resize",this.onResize))}getOptions(){return this.options}setOptions(e){this._setOptions(e,!1)}_setOptions(e,t){if(this.updateCanvas(e),Object.assign(this.options,Cpe(e)),t){const{data:h}=e;h&&this.addData(h);return}const{behaviors:n,combo:i,data:a,edge:s,layout:o,node:A,plugins:l,theme:c,transforms:u}=e;n&&this.setBehaviors(n),a&&this.setData(a),A&&this.setNode(A),s&&this.setEdge(s),i&&this.setCombo(i),o&&this.setLayout(o),c&&this.setTheme(c),l&&this.setPlugins(l),u&&this.setTransforms(u)}getSize(){return this.context.canvas?this.context.canvas.getSize():[this.options.width||0,this.options.height||0]}setSize(e,t){e&&(this.options.width=e),t&&(this.options.height=t),this.resize(e,t)}setZoomRange(e){this.options.zoomRange=e}getZoomRange(){return this.options.zoomRange}setNode(e){this.options.node=e,this.context.model.refreshData()}setEdge(e){this.options.edge=e,this.context.model.refreshData()}setCombo(e){this.options.combo=e,this.context.model.refreshData()}getTheme(){return this.options.theme}setTheme(e){this.options.theme=$e(e)?e(this.getTheme()):e}setLayout(e){this.options.layout=$e(e)?e(this.getLayout()):e}getLayout(){return this.options.layout}setBehaviors(e){var t;this.options.behaviors=$e(e)?e(this.getBehaviors()):e,(t=this.context.behavior)===null||t===void 0||t.setBehaviors(this.options.behaviors)}updateBehavior(e){this.setBehaviors(t=>t.map(n=>typeof n=="object"&&n.key===e.key?Object.assign(Object.assign({},n),e):n))}getBehaviors(){return this.options.behaviors||[]}setPlugins(e){var t;this.options.plugins=$e(e)?e(this.getPlugins()):e,(t=this.context.plugin)===null||t===void 0||t.setPlugins(this.options.plugins)}updatePlugin(e){this.setPlugins(t=>t.map(n=>typeof n=="object"&&n.key===e.key?Object.assign(Object.assign({},n),e):n))}getPlugins(){return this.options.plugins||[]}getPluginInstance(e){return this.context.plugin.getPluginInstance(e)}setTransforms(e){var t;this.options.transforms=$e(e)?e(this.getTransforms()):e,(t=this.context.transform)===null||t===void 0||t.setTransforms(this.options.transforms)}updateTransform(e){this.setTransforms(t=>t.map(n=>typeof n=="object"&&n.key===e.key?Object.assign(Object.assign({},n),e):n)),this.context.model.refreshData()}getTransforms(){return this.options.transforms||[]}getData(){return this.context.model.getData()}hasNode(e){return this.context.model.hasNode(e)}hasEdge(e){return this.context.model.hasEdge(e)}hasCombo(e){return this.context.model.hasCombo(e)}getElementData(e){return Array.isArray(e)?e.map(t=>this.context.model.getElementDataById(t)):this.context.model.getElementDataById(e)}getNodeData(e){return e===void 0?this.context.model.getNodeData():Array.isArray(e)?this.context.model.getNodeData(e):this.context.model.getNodeLikeDatum(e)}getEdgeData(e){return e===void 0?this.context.model.getEdgeData():Array.isArray(e)?this.context.model.getEdgeData(e):this.context.model.getEdgeDatum(e)}getComboData(e){return e===void 0?this.context.model.getComboData():Array.isArray(e)?this.context.model.getComboData(e):this.context.model.getNodeLikeDatum(e)}setData(e){this.context.model.setData($e(e)?e(this.getData()):e)}addData(e){this.context.model.addData($e(e)?e(this.getData()):e)}addNodeData(e){this.context.model.addNodeData($e(e)?e(this.getNodeData()):e)}addEdgeData(e){this.context.model.addEdgeData($e(e)?e(this.getEdgeData()):e)}addComboData(e){this.context.model.addComboData($e(e)?e(this.getComboData()):e)}addChildrenData(e,t){this.context.model.addChildrenData(e,t)}updateData(e){this.context.model.updateData($e(e)?e(this.getData()):e)}updateNodeData(e){this.context.model.updateNodeData($e(e)?e(this.getNodeData()):e)}updateEdgeData(e){this.context.model.updateEdgeData($e(e)?e(this.getEdgeData()):e)}updateComboData(e){this.context.model.updateComboData($e(e)?e(this.getComboData()):e)}removeData(e){this.context.model.removeData($e(e)?e(this.getData()):e)}removeNodeData(e){this.context.model.removeNodeData($e(e)?e(this.getNodeData()):e)}removeEdgeData(e){this.context.model.removeEdgeData($e(e)?e(this.getEdgeData()):e)}removeComboData(e){this.context.model.removeComboData($e(e)?e(this.getComboData()):e)}getElementType(e){return this.context.model.getElementType(e)}getRelatedEdgesData(e,t="both"){return this.context.model.getRelatedEdgesData(e,t)}getNeighborNodesData(e){return this.context.model.getNeighborNodesData(e)}getAncestorsData(e,t){return this.context.model.getAncestorsData(e,t)}getParentData(e,t){return this.context.model.getParentData(e,t)}getChildrenData(e){return this.context.model.getChildrenData(e)}getDescendantsData(e){return this.context.model.getDescendantsData(e)}getElementDataByState(e,t){return this.context.model.getElementDataByState(e,t)}initCanvas(){return un(this,void 0,void 0,function*(){var e;if(this.context.canvas)return yield this.context.canvas.ready;const{container:t="container",width:n,height:i,renderer:a,cursor:s,background:o,canvas:A,devicePixelRatio:l=(e=globalThis.devicePixelRatio)!==null&&e!==void 0?e:1}=this.options;if(t instanceof ZR)this.context.canvas=t,s&&t.setCursor(s),a&&t.setRenderer(a),yield t.ready;else{const c=Rt(t)?document.getElementById(t):t,u=tQ(c);this.emit(Pe.BEFORE_CANVAS_INIT,{container:c,width:n,height:i});const h=Object.assign(Object.assign({},A),{container:c,width:n||u[0],height:i||u[1],background:o,renderer:a,cursor:s,devicePixelRatio:l}),g=new ZR(h);this.context.canvas=g,yield g.ready,this.emit(Pe.AFTER_CANVAS_INIT,{canvas:g})}})}updateCanvas(e){var t,n;const{renderer:i,cursor:a,height:s,width:o}=e,A=this.context.canvas;A&&(i&&(this.emit(Pe.BEFORE_RENDERER_CHANGE,{renderer:this.options.renderer}),A.setRenderer(i),this.emit(Pe.AFTER_RENDERER_CHANGE,{renderer:i})),a&&A.setCursor(a),(je(o)||je(s))&&this.setSize((t=o??this.options.width)!==null&&t!==void 0?t:0,(n=s??this.options.height)!==null&&n!==void 0?n:0))}initRuntime(){this.context.options=this.options,this.context.batch||(this.context.batch=new ppe(this.context)),this.context.plugin||(this.context.plugin=new xpe(this.context)),this.context.viewport||(this.context.viewport=new Tpe(this.context)),this.context.transform||(this.context.transform=new Spe(this.context)),this.context.element||(this.context.element=new bpe(this.context)),this.context.animation||(this.context.animation=new gpe(this.context)),this.context.layout||(this.context.layout=new Epe(this.context)),this.context.behavior||(this.context.behavior=new vpe(this.context))}prepare(){return un(this,void 0,void 0,function*(){if(yield Promise.resolve(),this.destroyed){console.error(eo("The graph instance has been destroyed"));return}yield this.initCanvas(),this.initRuntime()})}render(){return un(this,void 0,void 0,function*(){if(yield this.prepare(),Er(this,new dr(Pe.BEFORE_RENDER)),this.options.layout)if(!this.rendered&&Tne(this.options.layout)){const e=yield this.context.element.preLayoutDraw({type:"render"});yield Promise.all([e==null?void 0:e.finished,this.autoFit()])}else{const e=this.context.element.draw({type:"render"});yield Promise.all([e==null?void 0:e.finished,this.context.layout.postLayout()]),yield this.autoFit()}else{const e=this.context.element.draw({type:"render"});yield Promise.all([e==null?void 0:e.finished,this.autoFit()])}this.rendered=!0,Er(this,new dr(Pe.AFTER_RENDER))})}draw(){return un(this,void 0,void 0,function*(){var e;yield this.prepare(),yield(e=this.context.element.draw())===null||e===void 0?void 0:e.finished})}layout(e){return un(this,void 0,void 0,function*(){yield this.context.layout.postLayout(e)})}stopLayout(){this.context.layout.stopLayout()}clear(){return un(this,void 0,void 0,function*(){const{model:e,element:t}=this.context;e.setData({}),e.clearChanges(),t==null||t.clear()})}destroy(){var e;Er(this,new dr(Pe.BEFORE_DESTROY));const{layout:t,animation:n,element:i,model:a,canvas:s,behavior:o,plugin:A}=this.context;A==null||A.destroy(),o==null||o.destroy(),t==null||t.destroy(),n==null||n.destroy(),i==null||i.destroy(),a.destroy(),s==null||s.destroy(),this.options={},this.context={},this.off(),(e=globalThis.removeEventListener)===null||e===void 0||e.call(globalThis,"resize",this.onResize),this.destroyed=!0,Er(this,new dr(Pe.AFTER_DESTROY))}getCanvas(){return this.context.canvas}resize(e,t){var n;const i=tQ((n=this.context.canvas)===null||n===void 0?void 0:n.getContainer()),a=[e||i[0],t||i[1]];if(!this.context.canvas)return;const s=this.context.canvas.getSize();Qn(a,s)||(Er(this,new dr(Pe.BEFORE_SIZE_CHANGE,{size:a})),this.context.canvas.resize(...a),Er(this,new dr(Pe.AFTER_SIZE_CHANGE,{size:a})))}fitView(e,t){return un(this,void 0,void 0,function*(){var n;yield(n=this.context.viewport)===null||n===void 0?void 0:n.fitView(e,t)})}fitCenter(e){return un(this,void 0,void 0,function*(){var t;yield(t=this.context.viewport)===null||t===void 0?void 0:t.fitCenter({animation:e})})}autoFit(){return un(this,void 0,void 0,function*(){const{autoFit:e}=this.context.options;if(e)if(Rt(e))e==="view"?yield this.fitView():e==="center"&&(yield this.fitCenter());else{const{type:t,animation:n}=e;t==="view"?yield this.fitView(e.options,n):t==="center"&&(yield this.fitCenter(n))}})}focusElement(e,t){return un(this,void 0,void 0,function*(){var n;yield(n=this.context.viewport)===null||n===void 0?void 0:n.focusElements(Array.isArray(e)?e:[e],{animation:t})})}zoomBy(e,t,n){return un(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",scale:e,origin:n},t)})}zoomTo(e,t,n){return un(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",scale:e,origin:n},t)})}getZoom(){return this.context.viewport.getZoom()}rotateBy(e,t,n){return un(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",rotate:e,origin:n},t)})}rotateTo(e,t,n){return un(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",rotate:e,origin:n},t)})}getRotation(){return this.context.viewport.getRotation()}translateBy(e,t){return un(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",translate:e},t)})}translateTo(e,t){return un(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",translate:e},t)})}getPosition(){return rn([0,0],this.getCanvasByViewport([0,0]))}translateElementBy(e,t){return un(this,arguments,void 0,function*(n,i,a=!0){var s,o;const[A,l]=nr(n)?[n,(s=i)!==null&&s!==void 0?s:!0]:[{[n]:i},a];Object.entries(A).forEach(([c,u])=>this.context.model.translateNodeLikeBy(c,u)),yield(o=this.context.element.draw({animation:l,stage:"translate"}))===null||o===void 0?void 0:o.finished})}translateElementTo(e,t){return un(this,arguments,void 0,function*(n,i,a=!0){var s,o;const[A,l]=nr(n)?[n,(s=i)!==null&&s!==void 0?s:!0]:[{[n]:i},a];Object.entries(A).forEach(([c,u])=>this.context.model.translateNodeLikeTo(c,u)),yield(o=this.context.element.draw({animation:l,stage:"translate"}))===null||o===void 0?void 0:o.finished})}getElementPosition(e){return this.context.model.getElementPosition(e)}getElementRenderStyle(e){return s2(this.context.element.getElement(e).attributes,["context"])}setElementVisibility(e,t){return un(this,arguments,void 0,function*(n,i,a=!0){var s,o;const[A,l]=nr(n)?[n,(s=i)!==null&&s!==void 0?s:!0]:[{[n]:i},a],c={nodes:[],edges:[],combos:[]};Object.entries(A).forEach(([g,p])=>{const v=this.getElementType(g);c[`${v}s`].push({id:g,style:{visibility:p}})});const{model:u,element:h}=this.context;u.preventUpdateNodeLikeHierarchy(()=>{u.updateData(c)}),yield(o=h.draw({animation:l,stage:"visibility"}))===null||o===void 0?void 0:o.finished})}showElement(e,t){return un(this,void 0,void 0,function*(){const n=Array.isArray(e)?e:[e];yield this.setElementVisibility(Object.fromEntries(n.map(i=>[i,"visible"])),t)})}hideElement(e,t){return un(this,void 0,void 0,function*(){const n=Array.isArray(e)?e:[e];yield this.setElementVisibility(Object.fromEntries(n.map(i=>[i,"hidden"])),t)})}getElementVisibility(e){var t,n;const i=this.context.element.getElement(e);return(n=(t=i==null?void 0:i.style)===null||t===void 0?void 0:t.visibility)!==null&&n!==void 0?n:"visible"}setElementZIndex(e,t){return un(this,void 0,void 0,function*(){var n;const i={nodes:[],edges:[],combos:[]},a=nr(e)?e:{[e]:t};Object.entries(a).forEach(([A,l])=>{const c=this.getElementType(A);i[`${c}s`].push({id:A,style:{zIndex:l}})});const{model:s,element:o}=this.context;s.preventUpdateNodeLikeHierarchy(()=>s.updateData(i)),yield(n=o.draw({animation:!1,stage:"zIndex"}))===null||n===void 0?void 0:n.finished})}frontElement(e){return un(this,void 0,void 0,function*(){const t=Array.isArray(e)?e:[e],{model:n}=this.context,i={};t.map(a=>{const s=n.getFrontZIndex(a);if(n.getElementType(a)==="combo"){const A=n.getAncestorsData(a,an).at(-1)||this.getComboData(a),l=[A,...n.getDescendantsData(he(A))],c=s-nQ(A);l.forEach(h=>{i[he(h)]=this.getElementZIndex(he(h))+c});const{internal:u}=xx(l.map(he),h=>n.getRelatedEdgesData(h));u.forEach(h=>{const g=he(h);i[g]=this.getElementZIndex(g)+c})}else i[a]=s}),yield this.setElementZIndex(i)})}getElementZIndex(e){return nQ(this.context.model.getElementDataById(e))}setElementState(e,t){return un(this,arguments,void 0,function*(n,i,a=!0){var s,o;const[A,l]=nr(n)?[n,(s=i)!==null&&s!==void 0?s:!0]:[{[n]:i},a],c=h=>h?Array.isArray(h)?h:[h]:[],u={nodes:[],edges:[],combos:[]};Object.entries(A).forEach(([h,g])=>{const p=this.getElementType(h);u[`${p}s`].push({id:h,states:c(g)})}),this.updateData(u),yield(o=this.context.element.draw({animation:l,stage:"state"}))===null||o===void 0?void 0:o.finished})}getElementState(e){return this.context.model.getElementState(e)}getElementRenderBounds(e){return this.context.element.getElement(e).getRenderBounds()}collapseElement(e){return un(this,arguments,void 0,function*(t,n=!0){const{model:i,element:a}=this.context;if(Qi(i.getNodeLikeData([t])[0])||this.isCollapsingExpanding)return;typeof n=="boolean"&&(n={animation:n,align:!1});const s=i.getElementType(t);yield this.frontElement(t),this.isCollapsingExpanding=!0,i.updateData(s==="node"?{nodes:[{id:t,style:{collapsed:!0}}]}:{combos:[{id:t,style:{collapsed:!0}}]}),s==="node"?yield a.collapseNode(t,n):s==="combo"&&(yield a.collapseCombo(t,!!n.animation)),this.isCollapsingExpanding=!1})}expandElement(e){return un(this,arguments,void 0,function*(t,n=!0){const{model:i,element:a}=this.context;if(!Qi(i.getNodeLikeData([t])[0])||this.isCollapsingExpanding)return;typeof n=="boolean"&&(n={animation:n,align:!1});const s=i.getElementType(t);this.isCollapsingExpanding=!0,i.updateData(s==="node"?{nodes:[{id:t,style:{collapsed:!1}}]}:{combos:[{id:t,style:{collapsed:!1}}]}),s==="node"?yield a.expandNode(t,n):s==="combo"&&(yield a.expandCombo(t,!!n.animation)),this.isCollapsingExpanding=!1})}setElementCollapsibility(e,t){const n=this.getElementType(e);n==="node"?this.updateNodeData([{id:e,style:{collapsed:t}}]):n==="combo"&&this.updateComboData([{id:e,style:{collapsed:t}}])}toDataURL(){return un(this,arguments,void 0,function*(e={}){return this.context.canvas.toDataURL(e)})}getCanvasByViewport(e){return this.context.canvas.getCanvasByViewport(e)}getViewportByCanvas(e){return this.context.canvas.getViewportByCanvas(e)}getClientByCanvas(e){return this.context.canvas.getClientByCanvas(e)}getCanvasByClient(e){return this.context.canvas.getCanvasByClient(e)}getViewportCenter(){return this.context.viewport.getViewportCenter()}getCanvasCenter(){return this.context.viewport.getCanvasCenter()}on(e,t,n){return super.on(e,t,n)}once(e,t){return super.once(e,t)}off(e,t){return super.off(e,t)}}Zm.defaultOptions={autoResize:!1,theme:"light",rotation:0,zoom:1,zoomRange:[.01,10]};class Mpe extends yA{beforeDraw(e){const{add:t,update:n}=e,{model:i}=this.context;return[...t.edges.entries(),...n.edges.entries()].forEach(([,a])=>{k8(i,a)}),e}}const k8=(r,e)=>{const{source:t,target:n}=e,i=r.getElementDataById(t),a=r.getElementDataById(n),s=MI(i,u=>r.getParentData(u,an)),o=MI(a,u=>r.getParentData(u,an)),A=he(s),l=he(o),c={sourceNode:A,targetNode:l};return e.style?Object.assign(e.style,c):e.style=c,e},Fpe=(r,e,t)=>{const[n,i]=e,[a,s]=t;if(i===n)return a;const o=(r-n)/(i-n);return a+o*(s-a)},kpe=(r,e,t)=>{const[n,i]=e,[a,s]=t,o=Math.log(r-n+1)/Math.log(i-n+1);return a+o*(s-a)},Ipe=(r,e,t,n=2)=>{const[i,a]=e,[s,o]=t,A=Math.pow((r-i)/(a-i),n);return s+A*(o-s)},Ppe=(r,e,t)=>{const[n,i]=e,[a,s]=t,o=Math.sqrt((r-n)/(i-n));return a+o*(s-a)};class Jm extends yA{constructor(e,t){super(e,qr({},Jm.defaultOptions,t)),this.assignSizeByCentrality=(n,i,a,s,o,A)=>{const l=[i,a],c=[s[0],o[0]],u=[s[1],o[1]],h=[s[2],o[2]],g=(p,v)=>{if(typeof A=="function")return A(p,l,v);switch(A){case"linear":return Fpe(p,l,v);case"log":return kpe(p,l,v);case"pow":return Ipe(p,l,v,2);case"sqrt":return Ppe(p,l,v);default:return v[0]}};return[g(n,c),g(n,u),g(n,h)]}}beforeDraw(e){const{model:t}=this.context,n=t.getNodeData(),i=sa(this.options.maxSize),a=sa(this.options.minSize),s=this.getCentralities(this.options.centrality),o=s.size>0?Math.max(...s.values()):0,A=s.size>0?Math.min(...s.values()):0;return n.forEach(l=>{var c;const u=this.assignSizeByCentrality(s.get(he(l))||0,A,o,a,i,this.options.scale),h=(c=this.context.element)===null||c===void 0?void 0:c.getElement(he(l)),g={size:u};this.assignLabelStyle(g,u,l,h),(!h||!mp(g,h.attributes))&&aa(e,h?"update":"add","node",qr(l,{style:g}),!0)}),e}assignLabelStyle(e,t,n,i){var a;const s=i?i.config.style:(a=this.context.element)===null||a===void 0?void 0:a.getElementComputedStyle("node",n);if(Object.assign(e,cl(s,["labelFontSize","labelLineHeight"])),this.options.mapLabelSize){const o=this.getLabelSizeByNodeSize(t,1/0,Number(e.labelFontSize));Object.assign(e,{labelFontSize:o,labelLineHeight:o+NJ(e.labelPadding)})}return e}getLabelSizeByNodeSize(e,t,n){const i=Math.min(...e)/2,[a,s]=Array.isArray(this.options.mapLabelSize)?this.options.mapLabelSize:[n,t];return Math.min(s,Math.max(i,a))}getCentralities(e){const{model:t}=this.context,n=t.getData();if(typeof e=="function")return e(n);const i=t.getRelatedEdgesData.bind(t);return iH(n,i,e)}}Jm.defaultOptions={centrality:{type:"degree"},maxSize:80,minSize:20,scale:"linear",mapLabelSize:!1};class e0 extends yA{constructor(e,t){super(e,Object.assign({},e0.defaultOptions,t))}get ref(){return this.context.model.getRootsData()[0]}afterLayout(){var e;const t=Cr(this.ref),{graph:n,model:i}=this.context;(e=i.getData().nodes)===null||e===void 0||e.forEach(s=>{var o;if(he(s)===he(this.ref))return;const A=sH(rn(Cr(s),t)),l=Math.abs(A)>Math.PI/2,c=!s.children||s.children.length===0,u=he(s),h=(o=this.context.element)===null||o===void 0?void 0:o.getElement(u);if(!h||!h.isVisible())return;const g=sa(n.getElementRenderStyle(u).size)[0]/2,p=(c?1:-1)*(g+this.options.offset),v=[["translate",p*Math.cos(A),p*Math.sin(A)],["rotate",l?Ni(A)+180:Ni(A)]];i.updateNodeData([{id:he(s),style:{labelTextAlign:l===c?"right":"left",labelTextBaseline:"middle",labelTransform:v}}])}),n.draw()}}e0.defaultOptions={offset:5};const Ope="quadratic",aQ=["top","top-right","right","right-bottom","bottom","bottom-left","left","left-top"];class t0 extends yA{constructor(e,t){super(e,Object.assign({},t0.defaultOptions,t)),this.cacheMergeStyle=new Map,this.getAffectedParallelEdges=n=>{const{add:{edges:i},update:{nodes:a,edges:s,combos:o},remove:{edges:A}}=n,{model:l}=this.context,c=new Map,u=(p,v)=>{l.getRelatedEdgesData(v).forEach(w=>!c.has(he(w))&&c.set(he(w),w))};a.forEach(u),o.forEach(u);const h=p=>{const v=new Set(n.remove.edges.keys()),m=l.getEdgeData().filter(w=>!v.has(he(w))).map(w=>k8(l,w));Lpe(p,m).forEach(w=>{const b=he(w);c.has(b)||c.set(b,w)})};if(A.size&&A.forEach(h),i.size&&i.forEach(h),s.size){const p=z5(mS(l.getChanges())).update.edges;s.forEach(v=>{var m;h(v);const w=(m=p.find(b=>he(b.value)===he(v)))===null||m===void 0?void 0:m.original;w&&!PS(v,w)&&h(w)})}vs(this.options.edges)||c.forEach((p,v)=>!this.options.edges.includes(v)&&c.delete(v));const g=l.getEdgeData().map(he);return new Map([...c].sort((p,v)=>g.indexOf(p[0])-g.indexOf(v[0])))},this.applyBundlingStyle=(n,i,a)=>{const{edgeMap:s,reverses:o}=sQ(i);s.forEach(A=>{A.forEach((l,c,u)=>{var h;const g=u.length,p=l.style||{};if(l.source===l.target){const w=aQ.length;p.loopPlacement=aQ[c%w],p.loopDist=Math.floor(c/w)*a+50}else if(g===1)p.curveOffset=0;else{const w=(c%2===0?1:-1)*(o[`${l.source}|${l.target}|${c}`]?-1:1);p.curveOffset=g%2===1?w*Math.ceil(c/2)*a*2:w*(Math.floor(c/2)*a*2+a)}const v=Object.assign(l,{type:Ope,style:p}),m=(h=this.context.element)===null||h===void 0?void 0:h.getElement(he(l));(!m||!mp(v.style,m.attributes))&&aa(n,m?"update":"add","edge",v,!0)})})},this.resetEdgeStyle=n=>{const i=n.style||{},a=this.cacheMergeStyle.get(he(n))||{};return Object.keys(a).forEach(s=>{Qn(i[s],a[s])&&(n[s]?i[s]=n[s]:delete i[s])}),Object.assign(n,{style:i})},this.applyMergingStyle=(n,i)=>{const{edgeMap:a,reverses:s}=sQ(i);a.forEach(o=>{var A;if(o.length===1){const c=o[0],u=(A=this.context.element)===null||A===void 0?void 0:A.getElement(he(c)),h=this.resetEdgeStyle(c);(!u||!mp(h,u.attributes))&&aa(n,u?"update":"add","edge",h);return}const l=o.map(({source:c,target:u,style:h={}},g)=>{const{startArrow:p,endArrow:v}=h,m={},[w,b]=s[`${c}|${u}|${g}`]?["endArrow","startArrow"]:["startArrow","endArrow"];return Ld(p)&&(m[w]=p),Ld(v)&&(m[b]=v),m}).reduce((c,u)=>Object.assign(Object.assign({},c),u),{});o.forEach((c,u,h)=>{var g;if(u!==0){aa(n,"remove","edge",c);return}const p=Object.assign({},$e(this.options.style)?this.options.style(h):this.options.style,{childrenData:h});this.cacheMergeStyle.set(he(c),p);const v=Object.assign(Object.assign({},c),{type:"line",style:Object.assign(Object.assign(Object.assign({},c.style),l),p)}),m=(g=this.context.element)===null||g===void 0?void 0:g.getElement(he(c));(!m||!mp(v.style,m.attributes))&&aa(n,m?"update":"add","edge",v,!0)})})}}beforeDraw(e){const t=this.getAffectedParallelEdges(e);return t.size===0||(this.options.mode==="bundle"?this.applyBundlingStyle(e,t,this.options.distance):this.applyMergingStyle(e,t)),e}}t0.defaultOptions={mode:"bundle",distance:15};const sQ=r=>{const e=new Map,t=new Set,n={},i=new Map;for(const[a,s]of r){if(t.has(a))continue;const{source:o,target:A}=s,l=`${o}-${A}`;e.has(l)||(e.set(l,[]),i.set(l,new Set));const c=e.get(l),u=i.get(l);c&&u&&!u.has(a)&&(c.push(s),u.add(a),t.add(a));for(const[h,g]of r)if(!(t.has(h)||h===a)&&PS(s,g)){const p=e.get(l),v=i.get(l);p&&v&&!v.has(h)&&(p.push(g),v.add(h),o===g.target&&A===g.source&&(n[`${g.source}|${g.target}|${p.length-1}`]=!0),t.add(h))}}return{edgeMap:e,reverses:n}},Lpe=(r,e,t)=>e.filter(n=>PS(n,r)),PS=(r,e)=>{const{sourceNode:t,targetNode:n}=r.style||{},{sourceNode:i,targetNode:a}=e.style||{};return t===i&&n===a||t===a&&n===i};class Npe extends yA{beforeDraw(e,t){const{stage:n}=t;if(n==="visibility")return e;const{model:i}=this.context,{update:{nodes:a,edges:s,combos:o}}=e,A=(l,c)=>{i.getRelatedEdgesData(c).forEach(h=>!s.has(he(h))&&s.set(he(h),h))};return a.forEach(A),o.forEach(A),e}}const Dpe={animation:{"combo-collapse":X4,"combo-expand":PJ,"node-collapse":$4,"node-expand":kJ,"path-in":Y4,"path-out":IJ,fade:MJ,translate:FJ},behavior:{"brush-select":dh,"click-select":Ov,"collapse-expand":Gv,"create-edge":Vv,"drag-canvas":qv,"drag-element-force":kne,"drag-element":mh,"fix-element-size":Yv,"focus-element":Xv,"hover-activate":Zv,"lasso-select":Pne,"auto-adapt-label":kv,"optimize-viewport-transform":Jv,"scroll-canvas":em,"zoom-canvas":tm},combo:{circle:kte,rect:Ite},edge:{cubic:El,line:NH,polyline:jv,quadratic:Kv,"cubic-horizontal":Uv,"cubic-radial":Hv,"cubic-vertical":zv},layout:{"antv-dagre":Yie,"combo-combined":ose,"compact-box":zne,"d3-force":Pse,"force-atlas2":Xle,circular:Jie,concentric:Ox,dagre:Em,dendrogram:Wne,fishbone:Cm,force:m6,fruchterman:ece,grid:nce,indented:Zne,mds:w6,mindmap:rre,radial:uce,random:mce,snake:Bm},node:{circle:gh,diamond:Qee,ellipse:Dv,hexagon:Kee,html:Rv,image:MH,rect:Mte,star:Fte,donut:Nv,triangle:Qv},palette:{spectral:Oce,tableau:Lce,oranges:Nce,greens:Dce,blues:Rce},theme:{dark:npe,light:ipe},plugin:{"bubble-sets":Tm,"edge-bundling":Fm,"edge-filter-lens":km,"grid-line":Om,background:xm,contextmenu:Mm,fisheye:Im,fullscreen:Pm,history:Lm,hull:Dm,legend:Gm,minimap:Vm,snapline:qm,timebar:Wm,title:zge,toolbar:B8,tooltip:$m,watermark:Ym},transform:{"arrange-draw-order":ape,"collapse-expand-combo":spe,"collapse-expand-node":ope,"get-edge-actual-ends":Mpe,"map-node-size":Jm,"place-radial-labels":e0,"process-parallel-edges":t0,"update-related-edges":Npe},shape:{circle:xs,ellipse:oh,group:xr,html:wl,image:R2,line:hl,path:ci,polygon:bl,polyline:mv,rect:Wr,text:_l,label:Ts,badge:qc}};function Rpe(){Object.entries(Dpe).forEach(([r,e])=>{Object.entries(e).forEach(([t,n])=>{Ape(r,t,n)})})}Rpe();const Qpe=JSON.parse(`[{"id":"FP03","type":"problem","label":"Time Estimation and Time Blindness","yamlKey":"Time Estimation and Time Blindness","data":{"id":"FP03","plain_language":"Cannot perceive how much time has passed or accurately estimate how long things will take. Loses hours without noticing. Plans that assume a working sense of time fail consistently.\\n","scores":{"frequency":4,"differentiation":5,"connectedness":5,"total":14},"evidence_tier":1.3,"mechanisms":["Time Perception Distortion"],"cluster":"A  Time-Perception Cascade","role":"hub","claims":["C008","C009","C010"],"derived_from":"Our_S3"},"comboId":"CL_A"},{"id":"FP04","type":"problem","label":"Deadline Misses","yamlKey":"Deadline Misses","data":{"id":"FP04","plain_language":"Consistently fails to deliver work by agreed deadlines. Not from lack of effort but from misjudged time, focus lapses, and accumulated delays from upstream problems.\\n","scores":{"frequency":4,"differentiation":3,"connectedness":3,"total":10},"evidence_tier":1,"mechanisms":["Time Perception Distortion","Attention Allocation Dysfunction"],"cluster":"A and C (convergence point)","role":"receiver","claims":["C002","C003"],"derived_from":"Our_S3"},"comboId":"CL_A","isConvergencePoint":true,"secondaryClusters":["CL_C"]},{"id":"FP12","type":"problem","label":"Chronic Lateness","yamlKey":"Chronic Lateness","data":{"id":"FP12","plain_language":"Persistently late to work, meetings, and commitments despite consequences, warnings, and genuine effort. Driven by inability to perceive preparation time accurately.\\n","scores":{"frequency":4,"differentiation":4,"connectedness":2,"total":10},"evidence_tier":1,"mechanisms":["Time Perception Distortion"],"cluster":"A  Time-Perception Cascade","role":"receiver","claims":["C008"],"derived_from":"Our_S3"},"comboId":"CL_A"},{"id":"FP01","type":"problem","label":"Task Initiation Failure","yamlKey":"Task Initiation Failure","data":{"id":"FP01","plain_language":"Knows exactly what to do but cannot start. An \\"invisible barrier\\" that effort alone cannot overcome. Qualitatively different from procrastination  not avoidance of unpleasant work, but a neurological gate that blocks action regardless of intent.\\n","scores":{"frequency":5,"differentiation":5,"connectedness":4,"total":14},"evidence_tier":1.7,"mechanisms":["Reward and Activation Processing"],"cluster":"B  Initiation-Execution Bottleneck","role":"hub","claims":["C011","C012"],"derived_from":"Our_S3"},"comboId":"CL_B"},{"id":"FP11","type":"problem","label":"Documentation and Administrative Paralysis","yamlKey":"Documentation and Administrative Paralysis","data":{"id":"FP11","plain_language":"Complete inability to start documentation tasks  timesheets, reports, meeting notes, evaluations. Low-stimulation plus high-effort creates the maximum initiation barrier. \\"Nothing makes it NOT paperwork.\\"\\n","scores":{"frequency":4,"differentiation":4,"connectedness":2,"total":10},"evidence_tier":3,"mechanisms":["Reward and Activation Processing"],"cluster":"B  Initiation-Execution Bottleneck","role":"receiver","claims":["C011"],"derived_from":"Our_S3"},"comboId":"CL_B"},{"id":"FP02","type":"problem","label":"Inconsistent Focus","yamlKey":"Inconsistent Focus","data":{"id":"FP02","plain_language":"Unpredictable oscillation between near-zero productivity and hyperfocus. Not uniformly poor attention  the variability itself is the problem. What works Monday may fail Tuesday. Standard focus tools assume a consistent baseline that does not exist.\\n","scores":{"frequency":5,"differentiation":4,"connectedness":4,"total":13},"evidence_tier":1,"mechanisms":["Attention Allocation Dysfunction","Reward and Activation Processing"],"cluster":"C  Attention-Quality Chain","role":"hub","claims":["C001","C002","C006","C007"],"derived_from":"Our_S3"},"comboId":"CL_C"},{"id":"FP06","type":"problem","label":"Attention-to-Detail Errors","yamlKey":"Attention-to-Detail Errors","data":{"id":"FP06","plain_language":"Persistent errors of oversight that survive repeated self-checking. Forgetting files, leaving debug code, sending incomplete work. The errors are identical to neurotypical mistakes but far more frequent and resistant to quality processes.\\n","scores":{"frequency":4,"differentiation":3,"connectedness":3,"total":10},"evidence_tier":1,"mechanisms":["Attention Allocation Dysfunction"],"cluster":"C  Attention-Quality Chain","role":"receiver","claims":["C006"],"derived_from":"Our_S3"},"comboId":"CL_C"},{"id":"FP05","type":"problem","label":"Prioritisation Failure","yamlKey":"Prioritisation Failure","data":{"id":"FP05","plain_language":"Cannot use importance as a prioritisation criterion. Responds to interest, novelty, and urgency instead. \\"Procrastivity\\"  doing interesting low-priority tasks while important tasks stagnate.\\n","scores":{"frequency":5,"differentiation":4,"connectedness":4,"total":13},"evidence_tier":1.7,"mechanisms":["Reward and Activation Processing","Attention Allocation Dysfunction"],"cluster":"Cross-cluster amplifier","role":"amplifier","claims":["C012","C013"],"derived_from":"Our_S3"}},{"id":"FP08","type":"problem","label":"Long-Term Project Neglect","yamlKey":"Long-Term Project Neglect","data":{"id":"FP08","plain_language":"Strategic projects are abandoned or starved while daily operational work gets done. Driven by delay discounting (distant deadlines create zero urgency) and initiation failure (low-stimulation strategic work is hardest to start).\\n","scores":{"frequency":4,"differentiation":5,"connectedness":3,"total":12},"evidence_tier":1.7,"mechanisms":["Reward and Activation Processing","Time Perception Distortion"],"cluster":"A and B (receives from both)","role":"receiver","claims":["C013"],"derived_from":"Our_S3"},"comboId":"CL_A","isConvergencePoint":true,"secondaryClusters":["CL_B"]},{"id":"FP07","type":"problem","label":"Meeting and Instruction Memory Failure","yamlKey":"Meeting and Instruction Memory Failure","data":{"id":"FP07","plain_language":"Understands everything during a meeting but cannot recall it afterward. Not an attention problem  an encoding problem. Information is processed in real time but never reaches long-term storage. Standard note-taking creates a dual-task problem that worsens it.\\n","scores":{"frequency":4,"differentiation":5,"connectedness":2,"total":11},"evidence_tier":1.7,"mechanisms":["Encoding Deficit"],"cluster":"Standalone","role":"standalone","claims":["C014","C015","C016"],"derived_from":"Our_S3"}},{"id":"FP09","type":"problem","label":"Email and Communication Management Failure","yamlKey":"Email and Communication Management Failure","data":{"id":"FP09","plain_language":"Reads emails, forms intention to reply, then the intention vanishes. Not inbox overwhelm  prospective memory failure. The \\"read and forgot\\" pattern. Standard email tools address volume and speed; none address forgotten reply intentions.\\n","scores":{"frequency":4,"differentiation":4,"connectedness":3,"total":11},"evidence_tier":1.7,"mechanisms":["Prospective Memory Failure","Emotional Dysregulation"],"cluster":"Standalone","role":"standalone","claims":["C017","C018","C019"],"derived_from":"Our_S3"}},{"id":"FP10","type":"problem","label":"Context Switching Cost","yamlKey":"Context Switching Cost","data":{"id":"FP10","plain_language":"Recovery from interruptions takes 30+ minutes. Not just losing focus  losing the entire mental context that was built up during focused work. An environmental/workload interaction more than a core EF failure.\\n","scores":{"frequency":4,"differentiation":3,"connectedness":2,"total":9},"evidence_tier":3.3,"mechanisms":["Attention Allocation Dysfunction"],"cluster":"Standalone","role":"standalone","claims":["C021"],"derived_from":"Our_S3"}},{"id":"FP18","type":"problem","label":"Workspace Disorganisation","yamlKey":"Workspace Disorganisation","data":{"id":"FP18","plain_language":"Cannot maintain organisation systems after initial setup. Desks, files, folders decay to disorder within days. The problem is sustained maintenance, not the initial sort.\\n","scores":{"frequency":3,"differentiation":3,"connectedness":2,"total":8},"evidence_tier":2,"mechanisms":["Attention Allocation Dysfunction"],"cluster":"Standalone","role":"standalone","claims":["C001"],"derived_from":"Our_S3"}},{"id":"MECH01","type":"mechanism","label":"Time Perception Distortion","yamlKey":"Time Perception Distortion","data":{"id":"MECH01","plain_language":"The inability to sense how much time has passed or how much time something will take. Not poor planning  the internal clock runs differently. An hour can feel like ten minutes. A deadline three days away feels as distant as one three months away.\\n","affects_problems":["Time Blindness (primary)","Deadline Misses","Chronic Lateness"],"underlies_challenges":["Notification Desensitisation (partially  timing of notifications relative to perceived urgency)"],"favours_models":["Ambient Monitor and Intervene (real-time time awareness)","Calibration Feedback Loop (estimation vs actual)"],"disfavours_models":["On-Demand Scaffolding (requires user to notice time has passed, which is the deficit)","Modality Shift (changes input channel, not time perception)"],"variability":"Moderate. Some individuals experience more stable time distortion; others see meaningful variation by day or context.\\n","evidence":["C008","C009","C010"],"does_not_explain":"Task initiation failure  a person can be aware that time is passing and still not start. Initiation is primarily a reward/activation problem, not a time-perception problem.\\n"}},{"id":"MECH02","type":"mechanism","label":"Reward and Activation Processing","yamlKey":"Reward and Activation Processing","data":{"id":"MECH02","plain_language":"The brain's activation system runs on interest, novelty, urgency, and challenge  not importance. Tasks that lack these qualities cannot generate the activation energy needed to start or sustain work. Distant deadlines create near-zero urgency. Familiar tasks create near-zero novelty. The result: the important-but-boring thing never gets done.\\n","affects_problems":["Task Initiation Failure (primary)","Long-Term Project Neglect","Documentation Paralysis","Prioritisation Failure (partially  interest overrides importance in task selection)"],"underlies_challenges":["Novelty Decay (directly  the product itself is subject to the same habituation)","Notification Desensitisation (partially  notifications lose novelty)"],"favours_models":["Ambient Monitor and Intervene (bypasses the need for self-initiated activation)","Intelligent Reordering (matches tasks to current activation state)","Periodic Injection (creates artificial entry points)"],"disfavours_models":["Structured Check-In (requires self-initiated daily engagement  competing against the deficit)","On-Demand Scaffolding (requires user to notice and seek help  a meta-initiation problem)"],"variability":"Highly variable. Medication, sleep, novelty of current context, and mood all modulate activation thresholds. What a person can start on Monday may be impossible on Tuesday.\\n","evidence":["C011","C012","C013"],"does_not_explain":"Meeting memory failure  a person can be fully activated and engaged in a meeting but still fail to encode or remember commitments. Encoding is a separate mechanism.\\n"}},{"id":"MECH03","type":"mechanism","label":"Prospective Memory Failure","yamlKey":"Prospective Memory Failure","data":{"id":"MECH03","plain_language":"Forgetting to do things you intended to do. Not forgetting facts  forgetting intentions. You read the email and decided to reply after lunch. After lunch, the intention is gone. You left the meeting knowing you committed to send a document. By the time you reach your desk, the commitment has vanished. \\"Out of sight, out of mind\\" is the defining experience.\\n","affects_problems":["Meeting Memory Failure (partially  the commitment follow-through component)","Email Management Failure (the \\"read and forgot\\" pattern)","Long-Term Project Neglect (partially  forgetting to check on distant projects)"],"underlies_challenges":["Circular Dependency (directly  forgetting to use the tool is a prospective memory failure)"],"favours_models":["Passive Capture and Structured Delivery (captures commitments the user will forget)","Periodic Injection (resurfaces neglected commitments)"],"disfavours_models":["Structured Check-In (user must remember to attend)","On-Demand Scaffolding (user must remember the tool exists at the moment of need)","Calibration Feedback Loop (user must remember to estimate)"],"variability":"Relatively stable. Prospective memory failure is one of the more consistent ADHD deficits  less variable across days and contexts than activation or attention.\\n","evidence":["C016","C017","C019"],"does_not_explain":"Why users cannot start tasks they are looking directly at. Prospective memory is about absent cues  the intention is not in front of you. When the task IS in front of you and you still can't start, that is activation, not memory.\\n"}},{"id":"MECH04","type":"mechanism","label":"Encoding Deficit","yamlKey":"Encoding Deficit","data":{"id":"MECH04","plain_language":"Information does not get stored during real-time processing, even when the person is engaged and comprehending. You understood everything in the meeting. You were paying attention. But the information never made it into memory. This is not a retrieval problem  the information was never encoded in the first place.\\n","affects_problems":["Meeting Memory Failure (primarily  the encoding component)","Attention-to-Detail Errors (partially  details not encoded during processing lead to errors in output)"],"underlies_challenges":[],"favours_models":["Passive Capture and Structured Delivery (creates external record of what encoding failed to capture)"],"disfavours_models":["Any model that assumes the user retained information from a meeting, conversation, or reading session"],"variability":"Relatively stable. Encoding deficit is a consistent impairment, less affected by day-to-day variation than attention or activation.\\n","evidence":["C014","C015","C016"],"does_not_explain":"Task initiation or prioritisation. Encoding deficit affects information retention, not decision-making or activation. A person can have perfect encoding and still not start work.\\n"}},{"id":"MECH05","type":"mechanism","label":"Attention Allocation Dysfunction","yamlKey":"Attention Allocation Dysfunction","data":{"id":"MECH05","plain_language":"The inability to voluntarily direct and sustain focus where you choose. This produces BOTH hypofocus (attention drifts without awareness) AND hyperfocus (attention locks onto something stimulating and cannot be redirected). The same mechanism  dysregulated allocation  creates opposite presentations depending on the stimulus.\\n","affects_problems":["Inconsistent Focus (primary)","Attention-to-Detail Errors","Context Switching Cost"],"underlies_challenges":["Novelty Decay (partially  focus tools themselves habituate as stimuli)","Notification Desensitisation (notifications must break through dysregulated attention to have effect)"],"favours_models":["Ambient Monitor and Intervene (detects focus drift in real time)","Intelligent Reordering (matches tasks to current focus/energy state)"],"disfavours_models":["Modality Shift (changing input mode does not fix attention allocation)","Periodic Injection (operates between tasks; attention dysfunction is within-task)"],"variability":"Highly variable. Medication, environment, interest level, and fatigue all substantially modulate attention allocation.\\n","evidence":["C006","C007"],"does_not_explain":"Email or meeting memory failure. A person can be fully focused during a meeting (attention allocated correctly) and still fail to encode or remember commitments. Attention and encoding are separable deficits.\\n","note_on_distinction":"There is a risk that this mechanism restates the problem it explains (Inconsistent Focus). The distinction drawn: the problem is the functional manifestation at work; the mechanism is the underlying process that also produces hyperfocus. Hyperfocus is not a problem  it is the same mechanism in a different mode. This distinction may be thin.\\n"}},{"id":"MECH06","type":"mechanism","label":"Emotional Dysregulation","yamlKey":"Emotional Dysregulation","data":{"id":"MECH06","plain_language":"Heightened sensitivity to criticism, rejection, failure, and frustration. Shame responses that are faster and more intense than neurotypical. Fear of doing something wrong can prevent starting. Missing a day creates a shame spiral that prevents returning. Negative feedback hits harder and lasts longer.\\n","affects_problems":["Task Initiation Failure (the fear component  some initiation failure is driven by fear of doing it wrong, not insufficient activation)","Documentation Paralysis (anxiety about producing inadequate work)"],"underlies_challenges":["Shame-Avoidance Spiral (directly  the spiral IS emotional dysregulation applied to product engagement)","Disclosure Constraint (disclosure anxiety is emotional dysregulation in the social domain)"],"favours_models":["Passive Capture and Structured Delivery (works during absence  no shame for not showing up)","Ambient Monitor and Intervene (non-judgmental, graded intervention)"],"disfavours_models":["Structured Check-In (missed sessions trigger shame; accumulated overdue items visible)","Calibration Feedback Loop (revealing estimation errors could trigger shame response)"],"variability":"Highly variable. Stress, sleep deprivation, social context, and recent experiences of rejection or criticism all substantially modulate emotional reactivity.\\n","evidence":["C020","C021"],"does_not_explain":"Time perception or encoding. Emotional dysregulation amplifies the consequences of other deficits (missing a deadline feels catastrophic, which drives avoidance) but does not cause the underlying time or memory impairment.\\n","evidence_note":"Emotional dysregulation appears in practitioner evidence (P2C) and in the shame-spiral meta-challenge data, but is not directly included in the EF mediation analysis (P1C) which identified self-management-to-time and self- organisation as key mediators. This mechanism is supported by the evidence base but less established than Time Perception or Encoding Deficit.\\n"}},{"id":"M1","type":"engagement_model","label":"Ambient Monitor and Intervene","yamlKey":"Ambient Monitor and Intervene","data":{"id":"M1","plain_language":"The product watches your work in the background. When it detects you're stuck  stalling, switching tabs, overrunning time  it intervenes. You don't ask for help; it notices and acts. Intervention is graded: lightest touch first, escalating only if the problem persists.\\n","dimensions":{"initiation":"Strongly product-initiated","effort":"Near-zero","timing":"During problem","continuity":"Embedded (desktop agent or browser extension)"},"retention_risk":"Does not depend on habit formation. Risk is nudge fatigue  if interventions become ignorable, the tool degrades into another notification to dismiss.\\n","habit_burden":"Minimal","primary_problems":["Task Initiation Failure (FP01)"],"secondary_problems":["Inconsistent Focus (FP02)","Time Estimation and Time Blindness (FP03)"],"meta_challenge_vulnerability":{"MC1_novelty_decay":"Moderate  interventions may habituate","MC2_circular_dependency":"Low  always-on, no initiation needed","MC3_shame_spiral":"Low  no visible failure accumulation","MC4_disclosure":"Moderate  desktop agent visible in taskbar","MC5_notification":"High  depends on notifications landing"},"claims":["C011","C027"],"derived_from":"Our_L2"}},{"id":"M2","type":"engagement_model","label":"Passive Capture and Structured Delivery","yamlKey":"Passive Capture and Structured Delivery","data":{"id":"M2","plain_language":"The product automatically captures information from your meetings, emails, and chats  information you'd otherwise forget. You change nothing about how you work. It processes what it captures and delivers structured summaries and extracted commitments at the moment you need them.\\n","dimensions":{"initiation":"Strongly product-initiated","effort":"Zero","timing":"After problem (captures during, delivers later)","continuity":"Embedded (meeting platform, email client)"},"retention_risk":"Strongest retention of any model. Value compounds over time as the knowledge graph grows. Does not depend on habit formation  scored 5/5 on behavioural change. The only architecture where \\"app graveyard\\" may be structurally mitigated.\\n","habit_burden":"None","primary_problems":["Meeting and Instruction Memory Failure (FP07)","Email and Communication Management Failure (FP09)"],"secondary_problems":[],"meta_challenge_vulnerability":{"MC1_novelty_decay":"Low  compounding value creates switching cost","MC2_circular_dependency":"Low  zero user initiation required","MC3_shame_spiral":"Low  continues working during absence","MC4_disclosure":"Moderate  meeting bot may be visible","MC5_notification":"Low  value delivery, not interruption"},"claims":["C014","C015","C017","C018","C028"],"derived_from":"Our_L2"}},{"id":"M3","type":"engagement_model","label":"Modality Shift","yamlKey":"Modality Shift","data":{"id":"M3","plain_language":"Changes the input channel from writing (high activation barrier) to speaking (low barrier). You talk through your work; the product transforms it into professional output. Same cognitive work, different channel. Addresses the blank page problem directly.\\n","dimensions":{"initiation":"User-initiated (optionally product-prompted)","effort":"Moderate","timing":"During problem","continuity":"Separate surface (mostly standalone)"},"retention_risk":"Moderate. Per-use value  each use is independent, no compounding. Risk is that editing AI output re-triggers the same paralysis the tool was meant to avoid.\\n","habit_burden":"Moderate","primary_problems":["Documentation and Administrative Paralysis (FP11)"],"secondary_problems":[],"meta_challenge_vulnerability":{"MC1_novelty_decay":"Moderate  per-use tool, no habituation loop","MC2_circular_dependency":"Moderate  user must remember it exists","MC3_shame_spiral":"Low  no state to accumulate failure","MC4_disclosure":"Low  voice input is commonplace","MC5_notification":"Low  not notification-dependent"},"claims":[],"derived_from":"Our_L2"}},{"id":"M4","type":"engagement_model","label":"Intelligent Reordering and Decision Reduction","yamlKey":"Intelligent Reordering and Decision Reduction","data":{"id":"M4","plain_language":"Sits on top of your existing task system and decides what to show you based on what you're likely to actually do right now  not just what's \\"important.\\" Reduces your decision from \\"pick from 50 items\\" to \\"do this one thing.\\" Bridges the gap between neurologically accessible and genuinely important.\\n","dimensions":{"initiation":"Balanced  user opens, product decides what to show","effort":"Low","timing":"Before problem","continuity":"Embedded (layer on existing task tool)"},"retention_risk":"Moderate to good. Algorithm improves with use, creating mild switching cost. Risk is \\"out of sight, out of mind\\"  user must open or check the tool. Mitigated by pushing top task via notification.\\n","habit_burden":"Low","primary_problems":["Prioritisation Failure (FP05)"],"secondary_problems":["Task Initiation Failure (FP01)"],"meta_challenge_vulnerability":{"MC1_novelty_decay":"Moderate  algorithm learning creates some stickiness","MC2_circular_dependency":"Moderate  user must open the tool","MC3_shame_spiral":"Moderate  task list can accumulate","MC4_disclosure":"Low  appears as general productivity layer","MC5_notification":"Moderate  depends on push if used"},"claims":["C012","C013"],"derived_from":"Our_L2"}},{"id":"M5","type":"engagement_model","label":"Calibration Feedback Loop","yamlKey":"Calibration Feedback Loop","data":{"id":"M5","plain_language":"Collects data on how long things actually take versus your estimates, then feeds back the discrepancy. Holds up a mirror that the ADHD brain cannot hold for itself. Over time, calibrates your internal model against reality.\\n","dimensions":{"initiation":"Balanced  user estimates, product feeds back","effort":"Moderate","timing":"Before and during problem","continuity":"Partially embedded (calendar integration + own surface)"},"retention_risk":"Compounding value as calibration data accumulates. But breaks entirely if the user stops estimating  the loop depends on a micro-habit. Cold start problem is real.\\n","habit_burden":"Moderate","primary_problems":["Time Estimation and Time Blindness (FP03)"],"secondary_problems":[],"meta_challenge_vulnerability":{"MC1_novelty_decay":"Moderate  value compounds but requires active use","MC2_circular_dependency":"High  user must estimate to get value","MC3_shame_spiral":"High  calibration data shows failures","MC4_disclosure":"Low  looks like a productivity timer","MC5_notification":"Moderate  overrun alerts may habituate"},"claims":["C008","C009"],"derived_from":"Our_L2"}},{"id":"M6","type":"engagement_model","label":"Periodic Injection into Existing Workflow","yamlKey":"Periodic Injection into Existing Workflow","data":{"id":"M6","plain_language":"Monitors your long-term projects for engagement decay. When a project is being neglected, injects small concrete tasks into your existing daily workflow. You don't go to the product  it comes to you with a 15-minute action that bridges present you and the neglected obligation.\\n","dimensions":{"initiation":"Strongly product-initiated","effort":"Low per interaction","timing":"Before problem (preventive)","continuity":"Embedded (injects into existing task flow)"},"retention_risk":"Does not depend on habit formation. Risk is quality of injected tasks  if generic (\\"check on Project X\\"), the tool becomes another ignored reminder. Must be specific and genuinely useful.\\n","habit_burden":"Minimal","primary_problems":["Long-Term Project Neglect (FP08)"],"secondary_problems":[],"meta_challenge_vulnerability":{"MC1_novelty_decay":"Moderate  injected tasks may habituate","MC2_circular_dependency":"Low  product pushes to user","MC3_shame_spiral":"Low  tasks appear fresh, not as backlog","MC4_disclosure":"Low  tasks appear in existing tool","MC5_notification":"Moderate  depends on task notifications"},"claims":["C013"],"derived_from":"Our_L2"}},{"id":"M7","type":"engagement_model","label":"Structured Check-In and Guided Routine","yamlKey":"Structured Check-In and Guided Routine","data":{"id":"M7","plain_language":"Walks you through a daily planning ritual: review commitments, estimate durations, pick priorities, reflect at end of day. The structure is external  the product provides scaffolding that the ADHD brain cannot generate. Mirrors the coaching model. The paradox: most recommended by practitioners, most abandoned by users.\\n","dimensions":{"initiation":"Product-prompted, user-executed","effort":"Moderate","timing":"Before problem (preventive planning)","continuity":"Separate surface (dedicated check-in view)"},"retention_risk":"Highest risk of any model. Critically dependent on habit formation. If the user misses a few days, overdue items accumulate and trigger the shame spiral. The \\"app graveyard\\" is largely a Structured Check-In graveyard.\\n","habit_burden":"Highest","primary_problems":["Task Initiation Failure (FP01)","Time Estimation and Time Blindness (FP03)","Prioritisation Failure (FP05)"],"secondary_problems":[],"meta_challenge_vulnerability":{"MC1_novelty_decay":"Very high  fixed routine habituates","MC2_circular_dependency":"Very high  user must show up","MC3_shame_spiral":"Very high  missed days accumulate visibly","MC4_disclosure":"Moderate  ADHD-branded planners are visible","MC5_notification":"High  depends on check-in reminders"},"claims":["C029","C030","C031"],"derived_from":"Our_L2"}},{"id":"M8","type":"engagement_model","label":"On-Demand Cognitive Scaffolding","yamlKey":"On-Demand Cognitive Scaffolding","data":{"id":"M8","plain_language":"Available when you're stuck. You bring a complex task; it breaks it into micro-steps, drafts a starting point, or generates a decision framework. The executive function support your brain cannot provide at that moment, on demand.\\n","dimensions":{"initiation":"User-initiated","effort":"Low to moderate","timing":"During problem","continuity":"Either separate or embedded"},"retention_risk":"Moderate. Episodic use  no degradation without use but no compounding either. Risk is the user forgetting the tool exists when stuck, which is precisely the \\"out of sight, out of mind\\" problem.\\n","habit_burden":"Low","primary_problems":["Task Initiation Failure (FP01)","Documentation and Administrative Paralysis (FP11)"],"secondary_problems":[],"meta_challenge_vulnerability":{"MC1_novelty_decay":"Low  per-use, no routine to decay","MC2_circular_dependency":"High  user must self-identify stuck state","MC3_shame_spiral":"Low  no state, no failure accumulation","MC4_disclosure":"Low  looks like any AI assistant","MC5_notification":"Low  not notification-dependent"},"claims":["C011"],"derived_from":"Our_L2"}},{"id":"MC1","type":"meta_challenge","label":"Novelty Decay and Intervention Habituation","yamlKey":"Novelty Decay and Intervention Habituation","data":{"id":"MC1","plain_language":"ADHD brains habituate to interventions as novelty fades. The tool that works brilliantly in week one may be invisible by week four  not because it stopped being useful, but because the brain stopped registering it as stimulating. This is neurological, not a UX failure.\\n","severity":"Critical","evidence_tier":"Tier 1-2","clusters_affected":["A","B","C"],"claims":["C022","C024","C025"],"favours_models":["Passive Capture and Structured Delivery","Ambient Monitor and Intervene","Periodic Injection"],"disfavours_models":["Structured Check-In","On-Demand Scaffolding"],"key_evidence":"Medication adherence averages 56% (n=4,011); 50-70% discontinue within 1 year (n=1.2M); 77% do not complete self-guided digital interventions; app graveyard is universal across all tool categories.\\n","compound_effects":{"amplifies":["MC2","MC3","MC5"],"amplified_by":[]},"derived_from":"Our_Meta_Challenges"}},{"id":"MC2","type":"meta_challenge","label":"Circular Dependency","yamlKey":"Circular Dependency","data":{"id":"MC2","plain_language":"Every ADHD tool requires the user to engage with it using the very cognitive functions the tool compensates for. You need to remember to use the tool that helps you remember. You need to initiate use of the tool that helps you initiate. This is structural and irreducible  it can only be asymptotically reduced.\\n","severity":"Critical","evidence_tier":"Tier 1-2","clusters_affected":["A","B","C"],"claims":["C019","C025"],"favours_models":["Passive Capture and Structured Delivery","Ambient Monitor and Intervene","Periodic Injection"],"disfavours_models":["Structured Check-In","On-Demand Scaffolding","Calibration Feedback Loop"],"key_evidence":"Prospective memory: 52% of ADHD participants forgot a naturalistic task vs 21% controls. Task initiation: 40.7% report problems often/very often. SMS reminders increased login at module 2 only  the reminder itself habituates. \\"Those apps will NEVER WORK because you have to remember to look at them, which you won't.\\"\\n","compound_effects":{"amplifies":["MC3"],"amplified_by":["MC1","MC5"]},"derived_from":"Our_Meta_Challenges"}},{"id":"MC3","type":"meta_challenge","label":"Shame-Avoidance Spiral","yamlKey":"Shame-Avoidance Spiral","data":{"id":"MC3","plain_language":"When the user falls behind, the tool generates visible evidence of failure  overdue counts, broken streaks, unprocessed queues. This triggers shame that makes re-engagement less likely, not more. The tool designed to help becomes a source of pain. Distinct from novelty decay: this operates even when the user wants to return.\\n","severity":"High","evidence_tier":"Tier 2-3","clusters_affected":["A","B","C"],"claims":["C020","C021","C022"],"favours_models":["Passive Capture and Structured Delivery","Ambient Monitor and Intervene"],"disfavours_models":["Structured Check-In","Calibration Feedback Loop"],"key_evidence":"\\"73 overdue tasks glaring at me  I'd rather uninstall the app than confront the reality.\\" Pre-formatted planners create shame from blank pages. Non-adapted CBT worsened self-esteem, increased sense of failure. Users who praised sustained tools (plain notebooks, Amazing Marvin) cited \\"no judgment for missed days.\\"\\n","compound_effects":{"amplifies":[],"amplified_by":["MC1","MC2"]},"derived_from":"Our_Meta_Challenges"}},{"id":"MC4","type":"meta_challenge","label":"Disclosure and Workplace Visibility Constraint","yamlKey":"Disclosure and Workplace Visibility Constraint","data":{"id":"MC4","plain_language":"Using an ADHD-specific tool in a workplace creates disclosure risk  an \\"ADHD Planner\\" visible during screen-share, a bot with a neurodivergent brand. Many ADHD adults have not disclosed at work and fear discrimination. The tool must serve ADHD-specific needs while being invisible or neutral in workplace contexts.\\n","severity":"High","evidence_tier":"Tier 2-3","clusters_affected":["A","B","C"],"claims":["C026"],"favours_models":["Passive Capture and Structured Delivery","Ambient Monitor and Intervene","Periodic Injection"],"disfavours_models":["Structured Check-In"],"key_evidence":"Practitioners report consistent disclosure dilemma across clients: fear of discrimination, uncertainty, managers who don't know how to respond. Most successful ADHD- adjacent tools (Motion, Sunsama, Reclaim) brand as general productivity. Granola's bot-free approach is commercially validated partly by removing the social signal.\\n","compound_effects":{"amplifies":["MC3"],"amplified_by":[]},"derived_from":"Our_Meta_Challenges"}},{"id":"MC5","type":"meta_challenge","label":"Notification Desensitisation","yamlKey":"Notification Desensitisation","data":{"id":"MC5","plain_language":"ADHD brains desensitise to repeated notifications faster than neurotypical brains. Alarms, push notifications, and email reminders lose effectiveness within weeks as the brain filters them as non-novel. Even a perfectly designed intervention fails if the notification that delivers it is no longer perceived.\\n","severity":"Moderate-High","evidence_tier":"Tier 2-3","clusters_affected":["A","B"],"claims":["C022","C021"],"favours_models":["Passive Capture and Structured Delivery","Ambient Monitor and Intervene"],"disfavours_models":["Structured Check-In","Calibration Feedback Loop"],"key_evidence":"SMS reminders for ADHD interventions increased login at module 2 only  no effect on remaining modules. Pomodoro failure is the canonical example. \\"I soon become desensitised to them and stop paying attention.\\" Alarm fatigue documented across every time-management tool category.\\n","compound_effects":{"amplifies":["MC2"],"amplified_by":["MC1"]},"derived_from":"Our_Meta_Challenges"}},{"id":"FDN01","type":"foundation","label":"Calendar Integration","yamlKey":"Calendar Integration","data":{"id":"FDN01","technology_ref":"TECH_01","required_by":{"required":["M1","M2","M4","M5","M6","M7"],"optional":["M3","M8"]},"purpose":"Knowing what the user should be working on, when meetings are, and where time conflicts exist. Used for context in interventions (M1), resurfacing timing (M2), time-aware reordering (M4), conflict detection (M5), injection timing (M6), and check-in content (M7).\\n"}},{"id":"FDN02","type":"foundation","label":"Task Tool Integration","yamlKey":"Task Tool Integration","data":{"id":"FDN02","technology_ref":"TECH_02","required_by":{"required":["M1","M4","M6","M7"],"optional":["M2","M8"]},"purpose":"Read access to task lists from external tools. Some models (M4, M6) also need write access to reorder or inject tasks. No universal task API exists  each platform requires separate integration.\\n"}},{"id":"FDN03","type":"foundation","label":"Non-Shaming Tone and Language Framework","yamlKey":"Non-Shaming Tone and Language Framework","data":{"id":"FDN03","required_by":{"required":["M1","M2","M3","M4","M5","M6","M7","M8"],"optional":[]},"purpose":"Any user-facing text must follow ADHD-appropriate tone guidelines. This is not a feature  it is a constraint on every surface that generates or displays text. Includes AI- generated content (nudges, summaries, scaffolds, prompts).\\n","note":"Design constraint, not a technology area. No technology_ref. Implementation is through prompt engineering, content review processes, and tone guidelines applied to all AI-generated output.\\n","claims":["C020","C021","C022"]}},{"id":"FDN04","type":"foundation","label":"Variability Engine","yamlKey":"Variability Engine","data":{"id":"FDN04","technology_ref":"TECH_09","required_by":{"required":["M1","M2","M4","M5","M6","M7"],"optional":[]},"note":"M3 and M8 are episodic/on-demand and exempt","purpose":"Required by MC1 (Novelty Decay) as a universal architectural requirement. Any model that delivers recurring interventions must vary what it does, when, and how. This is not a feature  it is an architectural requirement affecting the entire notification and delivery pipeline.\\n","claims":["C022","C024","C025"]}},{"id":"FDN05","type":"foundation","label":"On-Device Processing","yamlKey":"On-Device Processing","data":{"id":"FDN05","technology_ref":"TECH_04","required_by":{"required":["M1","M2","M6"],"optional":["M3","M4","M5","M7","M8"]},"purpose":"Privacy-critical for models that monitor activity (M1), read communications (M2), or access project tools broadly (M6). On-device processing prevents sensitive work data from leaving the user's machine.\\n"}},{"id":"FDN06","type":"foundation","label":"MCP Integration Backbone","yamlKey":"MCP Integration Backbone","data":{"id":"FDN06","technology_ref":"TECH_03","required_by":{"required":["M1","M2","M4","M6"],"optional":["M3","M5","M7","M8"]},"purpose":"Standardised tool connectivity. Reduces the N-by-M integration problem to N MCP servers. Essential for multi-channel capture (M2) and multi-tool project monitoring (M6).\\n"}},{"id":"FDN07","type":"foundation","label":"Knowledge Graph and Structured Memory","yamlKey":"Knowledge Graph and Structured Memory","data":{"id":"FDN07","technology_ref":"TECH_05","required_by":{"required":["M2","M6"],"optional":["M4","M5"]},"purpose":"Automatic entity extraction and relationship mapping from unstructured text. Enables contextual resurfacing, multi- hop reasoning, and compound value over time. The primary defence against MC1 (Novelty Decay) through compounding switching cost.\\n"}},{"id":"TECH_01","type":"technology","label":"Calendar Integration","yamlKey":"TECH_01","data":{"name":"Calendar Integration","serves_capability":"workplace_data_access","research_source":"none (commodity)","approaches":[{"name":"Platform-Specific APIs (Google Calendar, Microsoft Graph)","known_requirements":["OAuth 2.0 authentication per provider","Webhook or polling for change detection"],"known_challenges":["Two separate integrations minimum (Google + Microsoft covers ~90% of market)","Rate limiting on frequent polling; webhook delivery not guaranteed"],"accelerators":["Google Calendar API","Microsoft Graph API"]},{"name":"Middleware Abstraction (Nylas, Cronofy)","known_requirements":["Subscription cost per user","OAuth proxy through middleware provider"],"known_challenges":["Vendor dependency on critical data path","Latency through additional layer"],"accelerators":["Nylas Calendar API","Cronofy Scheduling API"]},{"name":"CalDAV / Open Protocol","known_requirements":["RFC 4791 compliance","Server-side CalDAV support from provider"],"known_challenges":["Inconsistent provider implementation","No real-time change notification standard"],"accelerators":["python-caldav","ical.js"]}],"architectural_scope":"isolated","integration_surface":"multi-system","data_architecture":"stateless","min_integration_before_signal":"single_component","serves_foundations":["FDN01"],"needed_by_models":{"required":["M1","M2","M4","M5","M6","M7"],"optional":["M3","M8"]},"relevant_claims":[],"relevant_caveats":[],"technology_stake":"low","remaining_uncertainty":"very_low","investigation_accessibility":"trivial"}},{"id":"TECH_02","type":"technology","label":"Task Tool Integration","yamlKey":"TECH_02","data":{"name":"Task Tool Integration","serves_capability":"workplace_data_access","research_source":"none (partially covered by Multi-Tool Integration research)","approaches":[{"name":"Direct API Per Platform","known_requirements":["Per-platform OAuth and schema mapping","Read + write access for reordering/injection models (M4, M6)"],"known_challenges":["O(N) maintenance burden; each platform has unique data model","Schema drift across platform versions"],"accelerators":["Todoist API","Notion API","Asana API","Linear API","Jira API","ClickUp API"]},{"name":"Unified API Layer","known_requirements":["Middleware subscription","Mapping custom fields through normalised schema"],"known_challenges":["Custom field loss in unified schema","Background sync staleness for near-real-time needs"],"accelerators":["Nango (600+ APIs)","Merge.dev"]},{"name":"MCP Server Per Platform","known_requirements":["MCP server implementation per tool","OAuth 2.1 per MCP specification"],"known_challenges":["Community server quality varies significantly","Write operations less mature than read across community servers"],"accelerators":["MCP SDK","community servers (GitHub ecosystem)","Nango MCP bridge"]}],"architectural_scope":"moderate","integration_surface":"multi-system","data_architecture":"stateless_to_light_cache","min_integration_before_signal":"single_component","serves_foundations":["FDN02"],"needed_by_models":{"required":["M1","M4","M6","M7"],"optional":["M2","M8"]},"relevant_claims":["C012","C013"],"relevant_caveats":[],"technology_stake":"moderate","remaining_uncertainty":"low","investigation_accessibility":"easy"}},{"id":"TECH_03","type":"technology","label":"Multi-Tool Integration Architecture","yamlKey":"TECH_03","data":{"name":"Multi-Tool Integration Architecture","serves_capability":"integration_infrastructure","research_source":"Multi-Tool Integration Architectures.md","approaches":[{"name":"Direct API Integration","known_requirements":["O(N) custom connectors in application","Per-API OAuth implementation (100+ documented quirks)"],"known_challenges":["Rate-limit cascades across providers","OAuth token expiry storms at scale","Schema drift across API versions"],"accelerators":["Platform SDKs","OpenAPI code generators"]},{"name":"Middleware / Unified API","known_requirements":["O(1) consumer interface; O(N) on middleware side","Centralised auth management"],"known_challenges":["Single point of failure for all tool access","Background sync staleness","Unified schema loses custom fields"],"accelerators":["Nango (600+ APIs)","Merge.dev","Unified.to"]},{"name":"Protocol-Based (MCP)","known_requirements":["M+N additive integration cost (any client talks any server)","OAuth 2.1 mandatory per specification"],"known_challenges":["Context window exhaustion  75-100K tokens for tool definitions alone (5 servers  50 tools  400-600 tokens each)","Tool selection accuracy degrades beyond ~15 visible tools","SSE statefulness complicates horizontal scaling"],"accelerators":["MCP SDK","community servers","Nango MCP bridge"]},{"name":"Agent-Based (A2A Protocol)","known_requirements":["Agent Cards with OpenAPI security schemes","Task-based delegation model"],"known_challenges":["Development slowed as of Sept 2025 while MCP became de facto standard","Delegation chain latency","Protocol fragmentation risk"],"accelerators":["Google A2A SDK"]}],"architectural_scope":"cross-cutting","integration_surface":"multi-system","data_architecture":"stateless","min_integration_before_signal":"single_component","serves_foundations":["FDN06"],"needed_by_models":{"required":["M1","M2","M4","M6"],"optional":["M3","M5","M7","M8"]},"relevant_claims":[],"relevant_caveats":[],"technology_stake":"high","remaining_uncertainty":"moderate","investigation_accessibility":"moderate"}},{"id":"TECH_04","type":"technology","label":"Local AI Inference","yamlKey":"TECH_04","data":{"name":"Local AI Inference","serves_capability":"processing_infrastructure","research_source":"Local AI Inference Architectures.md","approaches":[{"name":"Full On-Device (llama.cpp / Ollama / MLX)","known_requirements":["3-14B quantized models practical limit on consumer hardware","4-bit quantization for memory-constrained devices"],"known_challenges":["1-3% accuracy drop at 4-bit quantization (negligible at 8-bit)","Long-context tasks (>4K tokens) degrade on smaller models"],"accelerators":["llama.cpp","Ollama","Apple MLX","LocalAI"]},{"name":"Attested Confidential Cloud (Apple PCC model)","known_requirements":["Encrypted transit; stateless server-side processing","Cryptographic verification of server behaviour"],"known_challenges":["Platform dependency (Apple ecosystem)","Requires trust in attestation infrastructure"],"accelerators":["Apple Private Cloud Compute"]},{"name":"TEE-GPU Hybrid","known_requirements":["Partitioning between SGX enclave (privacy-critical) and GPU (compute)","Activation perturbation for privacy guarantee"],"known_challenges":["4.7x speedup vs full-TEE but still overhead vs unprotected","BLEU degradation <0.12 under black-box attacks"],"accelerators":["Intel SGX","NVIDIA Confidential Computing"]},{"name":"Split Edge-Cloud","known_requirements":["Well-chosen partition point between local and cloud inference","Differential privacy option for intermediate representations"],"known_challenges":["1.4-2.8x latency reduction vs pure cloud, but still has cloud dependency","Privacy of intermediate representations depends on partition design"],"accelerators":["ONNX Runtime","TensorRT for edge inference"]},{"name":"Fully Homomorphic Encryption (FHE)","known_requirements":["FHE library integration; encryption of model inputs"],"known_challenges":["~2.4 min first token, ~1.7 min/token subsequent (3000x slower than plaintext)","Not viable for interactive use today"],"accelerators":["Zama Concrete ML","Microsoft SEAL"]},{"name":"Federated Learning (model updates, not inference)","known_requirements":["Local training on device; only parameter updates transmitted","Differential privacy noise injection"],"known_challenges":["Convergence quality with DP noise vs centralised training","FwdLLM enables billion-param fine-tuning on mobile but is early"],"accelerators":["FwdLLM (USENIX ATC 2024)","Flower framework"]}],"architectural_scope":"cross-cutting","integration_surface":"standalone","data_architecture":"stateless","min_integration_before_signal":"single_component","serves_foundations":["FDN05"],"needed_by_models":{"required":["M1","M2","M6"],"optional":["M3","M4","M5","M7","M8"]},"relevant_claims":[],"relevant_caveats":[],"technology_stake":"high","remaining_uncertainty":"low","investigation_accessibility":"easy"}},{"id":"TECH_05","type":"technology","label":"Knowledge Extraction and Structured Memory","yamlKey":"TECH_05","data":{"name":"Knowledge Extraction and Structured Memory","serves_capability":"knowledge_accumulation","research_source":"Knowledge Extraction Architectures.md","approaches":[{"name":"GraphRAG (Hierarchical Community-Based)","known_requirements":["Batch LLM extraction of entities and relationships","Leiden clustering into communities; hierarchical report generation"],"known_challenges":["Requires full graph reconstruction on updates; no incremental path","40-60% of enterprise RAG implementations fail to reach production","Extraction drift degrades quality over time"],"accelerators":["Microsoft GraphRAG (open source)","Neo4j"]},{"name":"LightRAG (Incremental Dual-Level)","known_requirements":["Incremental insertion without full reconstruction","Dual-level retrieval (local subgraph + community concepts)"],"known_challenges":["Entity deduplication unaddressed at scale","Format sensitivity when using small local LLMs for extraction"],"accelerators":["LightRAG (open source)"]},{"name":"TG-RAG (Temporal Graph)","known_requirements":["Timestamped relationships in knowledge graph","Hierarchical time index for temporal queries"],"known_challenges":["Temporal extraction errors (implicit references like \\"last Friday\\")","Bottom-up report regeneration scales with time hierarchy depth"],"accelerators":["TG-RAG (research code)"]},{"name":"Mem0 (Memory-Centric Incremental)","known_requirements":["Per-message LLM extraction with ADD/UPDATE/DELETE/NOOP decisions","Conflict resolution via marking superseded rather than deleting"],"known_challenges":["Single-hop vs relational reasoning tradeoff","Mem0g (graph variant) has 2x token overhead","LLM-dependent operation classification lacks verification"],"accelerators":["Mem0 (open source)","Mem0g graph variant"]},{"name":"AutoSchemaKG (Schema-Free Autonomous)","known_requirements":["Zero predefined schema; automated conceptualisation","Triple extraction from unstructured text"],"known_challenges":["Batch-oriented only; no incremental update path","Entity resolution quality degrades on domain jargon"],"accelerators":["KGGen (open source","900M+ nodes production scale)"]},{"name":"Instructor / Pydantic (Schema-Validated Extraction)","known_requirements":["Pre-defined Pydantic schemas for target data structures","LLM fill-in with auto-validation and retry on failure"],"known_challenges":["68% of extraction errors are hallucinated numbers; 32% incorrect relationships","12% error rate difference between GPT-4 and LLaMA-2","Small models frequently violate format constraints"],"accelerators":["Instructor (Python)","Pydantic","Outlines (constrained generation)"]}],"architectural_scope":"cross-cutting","integration_surface":"multi-system","data_architecture":"accreting","min_integration_before_signal":"multi-component","serves_foundations":["FDN07"],"needed_by_models":{"required":["M2","M6"],"optional":["M4","M5"]},"relevant_claims":["C014","C015","C017","C018","C028"],"relevant_caveats":["C033","C034"],"technology_stake":"very_high","remaining_uncertainty":"high","investigation_accessibility":"moderate"}},{"id":"TECH_06","type":"technology","label":"Digital State Inference","yamlKey":"TECH_06","data":{"name":"Digital State Inference","serves_capability":"state_sensing","research_source":"Digital State Inference Architectures.md","approaches":[{"name":"Smartphone Digital Phenotyping (Sensor-Feature-ML)","known_requirements":["GPS, accelerometer, screen, calls, app usage data","RAPIDS feature extraction pipeline"],"known_challenges":["AUROC 0.54-0.59 for affective states (marginal for real-time decisions)","Only 14% of studies anonymise data; 76% use single-device designs","No external validation in 98% of studies"],"accelerators":["RAPIDS (open source feature extraction)","LAMP platform"]},{"name":"Keystroke Dynamics","known_requirements":["Key hold/flight time capture; LSTM embeddings or statistics","Within-subject calibration period"],"known_challenges":["EER 2.2% biometric but stress discrimination less validated","Generalisation across devices and input methods unproven"],"accelerators":["NeuroKeys (research)","TypeNet"]},{"name":"LLM-as-Interpreter","known_requirements":["RAPIDS features serialised to natural language",{"Few-shot examples for calibration (10-shot":"MAE 0.75/5)"}],"known_challenges":["Single study (10 participants)","Zero-shot performance poor (MAE 1.65/5)","Worst privacy model  transmits detailed behavioural summaries to cloud"],"accelerators":["Gemini 1.5 Pro","RAPIDS"]},{"name":"Ambient Binary Sensors (Inactivity Detection)","known_requirements":["PIR motion, door contacts, pressure sensors","Edge compute for on-device processing"],"known_challenges":["Detection latency 5-7 hours for state change","Designed for absence detection, not nuanced state inference"],"accelerators":["CASAS smart home platform (18 years of data)"]},{"name":"Federated On-Device Learning","known_requirements":["GRU/LSTM trained locally per device","Gradient-only transmission for privacy"],"known_challenges":["Comparable to centralised models on depression detection, but limited evidence for fine-grained workplace state inference"],"accelerators":["Flower federated framework","PySyft"]},{"name":"LLM Clinical Navigator","known_requirements":["LAMP-cortex structured features as input","GPT-4o pattern matching"],"known_challenges":["52% pattern accuracy overall (below 75% certification threshold)","100% on worsening detection but 6% on improving detection (floor)","Requires proprietary cloud LLM APIs"],"accelerators":["LAMP-cortex","GPT-4o"]}],"architectural_scope":"moderate","integration_surface":"standalone_to_moderate","data_architecture":"streaming_with_light_accumulation","min_integration_before_signal":"multi-component","serves_foundations":[],"needed_by_models":{"required":["M1"],"optional":["M4","M5"]},"relevant_claims":["C011","C027"],"relevant_caveats":["C033"],"technology_stake":"moderate","remaining_uncertainty":"high","investigation_accessibility":"hard"}},{"id":"TECH_07","type":"technology","label":"Passive Time Attribution","yamlKey":"TECH_07","data":{"name":"Passive Time Attribution","serves_capability":"state_sensing","research_source":"Passive Time Attribution Architectures.md","approaches":[{"name":"Heartbeat/Timeout (WakaTime / Wakapi)","known_requirements":["Editor keystroke events with file path  project mapping","Configurable timeout value (critical tuning parameter)"],"known_challenges":["Timeout value tradeoff  too short misses thinking time, too long overcounts breaks","WakaTime restricted to 5-240 min; Wakapi initially 30-300 seconds (too short for research workflows)"],"accelerators":["WakaTime (cloud)","Wakapi (self-hosted","OSS)"]},{"name":"OS Watcher / Bucket (ActivityWatch)","known_requirements":["Active window title capture + idle detection","User-defined regex rules for categorisation"],"known_challenges":["Window title alone insufficient for accurate project attribution","Manual rule maintenance as tools/projects change"],"accelerators":["ActivityWatch (100% local","OSS)","ActivityWatch MCP server"]},{"name":"Screen Capture / OCR (Screenpipe)","known_requirements":["Continuous screen frames (1 FPS default) + optional audio STT","AI pipe agents for classification"],"known_challenges":["Privacy risk from comprehensive content capture (passwords, private messages visible)","Storage requirements for continuous screen capture"],"accelerators":["Screenpipe (100% local default","OSS)"]},{"name":"Sensor Fusion / LLM (DailyLLM)","known_requirements":["Phone/watch sensors (GPS, IMU, audio, PPG)","Locally fine-tuned LLM for activity classification"],"known_challenges":["Physical activity focus  not designed for digital project attribution","Niche application vs general workplace time tracking"],"accelerators":["DailyLLM (6-bit quantisation","runs on Raspberry Pi)"]},{"name":"Terminal Logger (CodeChrono)","known_requirements":["Terminal commands, git diffs, app focus capture","Explicit session boundary declaration (semi-passive)"],"known_challenges":["Developer-only applicability","Semi-passive requires session start/stop"],"accelerators":["CodeChrono (OSS)","Ollama + SQLite"]}],"architectural_scope":"moderate","integration_surface":"standalone","data_architecture":"accreting","min_integration_before_signal":"single_component","serves_foundations":[],"needed_by_models":{"required":["M5"],"optional":["M1","M4"]},"relevant_claims":["C008","C009"],"relevant_caveats":["C034"],"technology_stake":"moderate","remaining_uncertainty":"moderate","investigation_accessibility":"easy"}},{"id":"TECH_08","type":"technology","label":"AI Task Decomposition","yamlKey":"TECH_08","data":{"name":"AI Task Decomposition","serves_capability":"task_intelligence","research_source":"AI Task Decomposition Architectures.md","approaches":[{"name":"ReAct (Reason-Act Loops)","known_requirements":["LLM with tool-use capability","Environment that returns observations per action"],"known_challenges":["Myopic  local optimization only; error propagation across long chains","Inefficient for tasks requiring >10 steps"],"accelerators":["LangChain","LangGraph (production-ready)"]},{"name":"Plan-and-Execute","known_requirements":["Planner LLM generates upfront strategy","Executor handles environment; Planner replans after each step","Domain-specific training data (106K+ synthetic samples for Plan-and-Act)"],"known_challenges":["Off-the-shelf LLMs achieve ~14% success without domain training","Replanning overhead expensive for real-time use"],"accelerators":["LangGraph (mature)","Plan-and-Act (paper + code)"]},{"name":"ChatHTN (Hybrid Symbolic-LLM)","known_requirements":["Classical HTN planning library with method definitions","LLM fallback for cases outside method library","Verifier ensures soundness of generated plans"],"known_challenges":["Knowledge engineering overhead for method library","Limited to domains with clear preconditions/effects"],"accelerators":["ChatHTN (released NeuS 2025)"]},{"name":"AFlow (MCTS Search over Workflows)","known_requirements":["Monte Carlo Tree Search over workflow configuration space","Benchmark suite for evaluation"],"known_challenges":["Computationally expensive meta-optimization","Benchmark-dependent; transfers poorly across domains"],"accelerators":["AFlow (GitHub","ICLR 2025 oral)"]},{"name":"Decomposed Prompting","known_requirements":["Modular library of specialised sub-task handlers","Top-level decomposer routes to handlers"],"known_challenges":["Static decomposition; no runtime adaptation","Library engineering burden; careful handler interface design required"],"accelerators":["Allen AI code","DSPy (production-ready)"]},{"name":"Cognitive Scaffolding (user-guided, not AI-solved)","known_requirements":["Metacognitive tracking and reflection pauses","Self-explanation prompts"],"known_challenges":["Motivation challenge  adds friction by design","Least mature; no production implementations","Addresses \\"thinking better\\" not \\"doing faster\\""],"accelerators":["Research prototypes only"]}],"architectural_scope":"moderate","integration_surface":"moderate","data_architecture":"stateless_to_light_accumulation","min_integration_before_signal":"multi-component","serves_foundations":[],"needed_by_models":{"required":["M6","M8"],"optional":["M4"]},"relevant_claims":["C011","C013"],"relevant_caveats":["C033"],"technology_stake":"moderate","remaining_uncertainty":"moderate_high","investigation_accessibility":"moderate"}},{"id":"TECH_09","type":"technology","label":"Anti-Habituation / Intervention Variability","yamlKey":"TECH_09","data":{"name":"Anti-Habituation / Intervention Variability","serves_capability":"intervention_delivery","research_source":"Anti-Habituation Architectures.md","approaches":[{"name":"Contextual Bandit JITAI (Just-In-Time Adaptive Interventions)","known_requirements":["Thompson sampling at repeated micro-decision points","Pooled priors for cold-start; individual learning over time"],"known_challenges":["Content library exhaustion  bandit can only select from available arms","Cold-start requires full population pooling"],"accelerators":["Oralytics codebase","HeartSteps (open MRT platform)"]},{"name":"Sleeping / Recovering Bandit","known_requirements":["Recovery function per message arm (recent use penalises; recovery over time)","Large content library to rotate through"],"known_challenges":["Second-order habituation  users learn the meta-pattern of rotation","Library size ceiling limits rotation diversity"],"accelerators":["Duolingo (population-scale production system)"]},{"name":"Restless Multi-Armed Bandit (RMAB  population-level scheduling)","known_requirements":["2-state Markov model per beneficiary","Whittle Index computation for intervention scheduling","Budget constraint (limited intervention capacity)"],"known_challenges":["No content variability  only selects WHO gets intervention, not WHAT","Budget sensitivity; degrades outside calibrated range"],"accelerators":["ARMMAN platform"]},{"name":"Generative AI Content Factory","known_requirements":["LLM generates unique messages per behaviour-change-technique parameter","Quality validation per generated message"],"known_challenges":["Untested in actual delivery context  generation proven, engagement not","Hallucination risk in health/productivity messaging","BCT faithfulness unvalidated at scale"],"accelerators":["GPT-4 / Claude for generation","BERT/ADA for diversity analysis"]},{"name":"Multi-Agent Generative (CTC Coach-Teacher-Companion model)","known_requirements":["Multiple LLM personas with distinct communication styles","Multimodal sensing for context","Item response theory for difficulty adaptation"],"known_challenges":["Hallucination in vulnerable populations","Agent-switching confusion","Whether generative variability resists meta-habituation is the fundamental open question"],"accelerators":["ElliQ (related production system","80% sustained engagement)"]}],"architectural_scope":"cross-cutting","integration_surface":"multi-system","data_architecture":"accreting","min_integration_before_signal":"multi-component","serves_foundations":["FDN04"],"needed_by_models":{"required":["M1","M2","M4","M5","M6","M7"],"optional":[]},"relevant_claims":["C022","C024","C025"],"relevant_caveats":["C034"],"technology_stake":"high","remaining_uncertainty":"high","investigation_accessibility":"hard"}},{"id":"TECH_10","type":"technology","label":"Speech-to-Structured Output","yamlKey":"TECH_10","data":{"name":"Speech-to-Structured Output","serves_capability":"input_modality","research_source":"Speech-to-Structured-Output Architectures.md","approaches":[{"name":"Cascaded ASR  LLM Pipeline","known_requirements":["Whisper/Conformer for ASR + WhisperX/pyannote for diarisation","LLM post-processing for disfluency removal and restructuring"],"known_challenges":["Error propagation between cascade stages","Disfluency removal tradeoff  over-deletion (reasoning models) vs under-deletion (conservative models)"],"accelerators":["Whisper (OSS)","WhisperX","pyannote","Faster-Whisper"]},{"name":"Multimodal LLM (Gemini-class native audio)","known_requirements":["Native audio processing capability (no explicit ASR stage)","Sufficient context window for full conversation"],"known_challenges":["Diarisation quality not independently evaluable (implicit in model)","Platform dependency on provider"],"accelerators":["Gemini 2.5 Flash (sub-800ms)","GPT-4o audio"]},{"name":"End-to-End Speech LLM","known_requirements":["Speech encoder + LLM backbone; joint diarisation","Training data for domain adaptation"],"known_challenges":["Limited to 2 speakers in current implementations","No native structuring  requires downstream system for output formatting"],"accelerators":["MLC-SLM Challenge models","Speech ReaLLM (real-time)"]},{"name":"DiarizationLM (Post-Processing Correction)","known_requirements":["Frozen ASR + frozen diarisation as input","LLM corrects diarisation labels and merges disfluent fragments"],"known_challenges":["Post-processing only (batch, not streaming)","No native output structuring"],"accelerators":["DiarizationLM (Google)"]}],"architectural_scope":"isolated","integration_surface":"standalone","data_architecture":"stateless","min_integration_before_signal":"single_component","serves_foundations":[],"needed_by_models":{"required":["M3"],"optional":["M2"]},"relevant_claims":[],"relevant_caveats":[],"technology_stake":"low","remaining_uncertainty":"low","investigation_accessibility":"easy"}},{"id":"IMP01","type":"implication","label":"No single model covers the full problem space","yamlKey":"IMP01","data":{"name":"No single model covers the full problem space","type":"structural_constraint","statement":"No engagement model is \\"strongly compatible\\" with all six problem areas. Any product addressing the full problem space requires combining multiple engagement models. A single- model product will likely leave gaps in coverage.\\n","evidence":["C032"],"derived_from":"compatibility.yaml","affects":["Product architecture decisions","Scope and sequencing decisions"]}},{"id":"IMP02","type":"implication","label":"Product-initiated models are structurally advantaged","yamlKey":"IMP02","data":{"name":"Product-initiated models are structurally advantaged","type":"structural_constraint","statement":"Models where the product comes to the user (M1, M2, M6) are consistently less vulnerable to bootstrapping (MC2) and notification desensitisation (MC5) than models requiring user initiation (M3, M5, M7, M8). In our analysis, this appears to be a structural characteristic rather than a design detail  it may not be easily mitigated by UX improvements on user-initiated models.\\n","evidence":["C019","C022","C025","C027"],"derived_from":"compatibility.yaml (meta-challenge matrix)","affects":["Engagement model prioritisation","Architecture decisions (push vs pull)"]}},{"id":"IMP03","type":"implication","label":"Compounding value creates retention","yamlKey":"IMP03","data":{"name":"Compounding value creates retention","type":"structural_constraint","statement":"Models that become more valuable over time (M2's knowledge graph, M5's calibration data, M4's pattern learning) are more resistant to novelty decay (MC1) than models delivering fixed-value interactions (M7's check-in, M3's recording). Compounding value may create switching cost that counteracts the tendency toward disengagement.\\n","evidence":["C022","C024","C028"],"derived_from":"compatibility.yaml (meta-challenge matrix)","affects":["Retention strategy","Build sequencing (compound-value components first)"]}},{"id":"IMP04","type":"implication","label":"Background operation resolves shame and disclosure simultaneously","yamlKey":"IMP04","data":{"name":"Background operation resolves shame and disclosure simultaneously","type":"structural_constraint","statement":"Models that operate in the background (M1, M2, M6) are simultaneously resistant to shame (nothing to fall behind on) and disclosure (nothing visible to colleagues). Foreground models (M3, M5, M7) generate both shame artefacts and workplace visibility. This suggests both constraints may be addressable through a single architectural choice.\\n","evidence":["C020","C022","C026"],"derived_from":"compatibility.yaml (meta-challenge matrix)","affects":["Architecture decisions (background vs foreground)","Enterprise and workplace deployment strategy"]}},{"id":"IMP05","type":"implication","label":"The push-pull tension may not have a clean resolution","yamlKey":"IMP05","data":{"name":"The push-pull tension may not have a clean resolution","type":"structural_constraint","statement":"Push-based delivery mitigates bootstrapping (MC2) but creates notification desensitisation vulnerability (MC5). Pull-based delivery avoids MC5 but creates MC2 vulnerability. One potential resolution identified in our analysis is embedding in existing workflows rather than using either push or pull as primary delivery  the \\"ambient presence\\" pattern (M2, M6).\\n","evidence":["C019","C025"],"derived_from":"compatibility.yaml (meta-challenge matrix)","affects":["Notification and delivery architecture","Integration strategy"]}},{"id":"IMP06","type":"implication","label":"The practitioner-product paradox","yamlKey":"IMP06","data":{"name":"The practitioner-product paradox","type":"paradox","statement":"Structured Check-In (M7) has strong practitioner endorsement alongside the weakest meta-challenge profile in our analysis. Practitioners provide external accountability that makes check-ins work  the practitioner IS the bootstrapping mechanism, the shame regulator, and the novelty source. These functions may be difficult to replicate in software alone. M7 may be most effective when combined with human elements (coaching, community) or layered on a passive foundation that handles the meta- challenges.\\n","evidence":["C029","C030","C031"],"derived_from":"compatibility.yaml, engagement_models.yaml","affects":["Whether to include structured check-in at all","Human-in-loop vs pure software decisions"]}},{"id":"IMP07","type":"implication","label":"Strongest evidence matches narrowest applicability","yamlKey":"IMP07","data":{"name":"Strongest evidence matches narrowest applicability","type":"tension","statement":"Passive Capture (M2) shows fewer high vulnerabilities in our analysis and strong clinical evidence (Tier 1 encoding/PM data), but is strongly compatible with only 2 of 6 problem areas (FP07, FP09). The broadest model (M1 Ambient Monitor) has weaker evidence and high privacy requirements. In our analysis, the models with stronger evidence tend to address fewer problem areas.\\n","evidence":["C014","C015","C017","C028"],"derived_from":"compatibility.yaml","affects":["Product scope decisions","Evidence-based vs coverage-based prioritisation"]}},{"id":"IMP08","type":"implication","label":"The medication baseline","yamlKey":"IMP08","data":{"name":"The medication baseline","type":"tension","statement":"If 56% medication adherence and 50-70% first-year discontinuation are the baseline for the gold-standard intervention, digital tools may face similar or worse retention challenges. Any retention claim for a digital product that assumes better retention than medication needs strong justification. This reframes \\"how do we achieve retention\\" as \\"how do we deliver value assuming poor retention.\\"\\n","evidence":["C024","C025"],"derived_from":"meta_challenges.yaml (MC1)","affects":["Retention strategy","Value delivery architecture (front-load vs compound)"]}},{"id":"IMP09","type":"implication","label":"Seven foundations are direction-independent","yamlKey":"IMP09","data":{"name":"Seven foundations are direction-independent","type":"decision_boundary","statement":"Seven shared capabilities appear across 3+ engagement models and appear needed regardless of product direction: calendar integration, task tool integration, non-shaming tone framework, variability engine, on-device processing, MCP backbone, and knowledge graph. Whether to develop these before direction is finalised is a sequencing decision the team can assess.\\n","evidence":[],"derived_from":"foundations.yaml","affects":["Build sequencing","Resource allocation","\\"What to build now\\" decisions"]}},{"id":"IMP10","type":"implication","label":"Meeting memory and email have a favourable risk profile in our analysis","yamlKey":"IMP10","data":{"name":"Meeting memory and email have a favourable risk profile in our analysis","type":"decision_boundary","statement":"FP07 (meeting memory) and FP09 (email) have the strongest clinical evidence (Tier 1), no ADHD-specific tools identified in our research, an engagement model with no high vulnerabilities in our analysis (M2), and minimal user behaviour requirements (passive capture). If risk minimisation is a priority, this cluster appears favourable in our analysis. The tradeoff is narrow applicability  only 2 of 13 problems are addressed.\\n","evidence":["C014","C015","C017","C018","C028"],"derived_from":"compatibility.yaml, engagement_models.yaml","affects":["Product scope decisions","MVP definition"]}},{"id":"IMP11","type":"implication","label":"Task initiation combines high demand with high complexity","yamlKey":"IMP11","data":{"name":"Task initiation combines high demand with high complexity","type":"decision_boundary","statement":"FP01 (task initiation) scores highest on frequency (5/5) and is among the most-discussed problems in our sources. But the most compatible model (M1 Ambient Monitor) has high privacy requirements, significant build complexity, and an unresolved \\"stuck vs thinking\\" detection problem. High demand, high risk. The alternative path through M4 (Intelligent Reordering) is lower-risk but addresses initiation only partially.\\n","evidence":["C011","C012","C027"],"derived_from":"compatibility.yaml, problems.yaml","affects":["Product scope decisions","Technical risk assessment"]}},{"id":"IMP12","type":"implication","label":"ADHD heterogeneity limits universal claims","yamlKey":"IMP12","data":{"name":"ADHD heterogeneity limits universal claims","type":"decision_boundary","statement":"ADHD is heterogeneous. Engagement patterns, problem severity, and intervention response vary by subtype (inattentive, hyperactive/impulsive, combined), comorbidity profile, medication status, and job type. The research does not differentiate by these factors. All claims in this system are averages across a heterogeneous population. Any product must account for this variability or narrow its target.\\n","evidence":["C033","C035"],"derived_from":"claims.yaml (caveats)","affects":["Target user definition","Personalisation requirements","Confidence in universal claims"]}},{"id":"IMP13","type":"implication","label":"Retention predictions are untested","yamlKey":"IMP13","data":{"name":"Retention predictions are untested","type":"decision_boundary","statement":"Engagement model retention profiles are hypothesised from structural characteristics, not observed in longitudinal data. The only empirically supported retention finding in our reviewed literature is negative: Structured Check-In models are abandoned. Positive retention claims for other models (especially M2's \\"strongest retention\\") are structural inferences that need testing.\\n","evidence":["C034"],"derived_from":"claims.yaml (caveats)","affects":["Confidence in retention claims","Test design priorities","What to validate first"]}}]`),Upe=JSON.parse(`[{"id":"C001","type":"claim","label":"Adults with ADHD show clusters of observable problems acr...","yamlKey":"C001","data":{"statement":"Adults with ADHD show clusters of observable problems across productivity, time management, reliability, interpersonal behaviour and safety simultaneously, with more than 80% reporting at least one significant work problem and ~60% reporting three or more distinct problems.\\n","type":"observation","sources":["Fuermaier_2021"],"relationships":{"supports":["FP01","FP02","FP03","FP05"]},"comments":"German outpatient sample (n=134) using WFIRS scale. Foundational claim establishing multi-domain impairment.\\n"}},{"id":"C002","type":"claim","label":"Workers with ADHD lose 22.1 extra days per year of role p...","yamlKey":"C002","data":{"statement":"Workers with ADHD lose 22.1 extra days per year of role performance versus similar workers without ADHD, with more than half the total loss occurring on days the worker is present (presenteeism), not absent.\\n","type":"observation","sources":["deGraaf_2008"],"relationships":{"supports":["FP02","FP03"]},"comments":"WHO World Mental Health Survey, 7,075 workers across 10 countries. The presenteeism finding is significant  the problem is not absence but reduced output while present.\\n"}},{"id":"C003","type":"claim","label":"Adults with ADHD have a 10-fold higher risk of disability...","yamlKey":"C003","data":{"statement":"Adults with ADHD have a 10-fold higher risk of disability pension and only 22-24% employment rates versus 72-79% in control populations, consistent across Norwegian and Swedish population cohorts.\\n","type":"observation","sources":["Swedish_Population_2021","Norwegian_Employment_Study"],"relationships":{"supports":[],"challenged_by":["C004"]},"comments":"Swedish cohort N=~64,000 (including 9,718 ADHD); Norwegian clinical sample. These are endpoint data showing labour market exit, not just difficulty.\\n"}},{"id":"C004","type":"claim","label":"The most common self-reported work impairment (69%) is \\"p...","yamlKey":"C004","data":{"statement":"The most common self-reported work impairment (69%) is \\"problems working to your potential\\"  an internal sense of underperformance  while actual termination rates are lower (20-23%), suggesting many ADHD adults experience their performance as worse than employers perceive it.\\n","type":"interpretation","sources":["Fuermaier_2021","Barkley_Murphy_2010"],"relationships":{"challenged_by":["C005"]},"comments":"WFIRS item #10 from Fuermaier; termination data from Barkley & Murphy occupational history. The gap between subjective distress and objective job loss matters for product design.\\n"}},{"id":"C005","type":"claim","label":"Even when blinded to ADHD diagnosis, employers rate ADHD...","yamlKey":"C005","data":{"statement":"Even when blinded to ADHD diagnosis, employers rate ADHD employees as having significantly greater inattentiveness, poor punctuality, time management problems, and overall poorer work performance than controls.\\n","type":"observation","sources":["Barkley_Murphy_2010"],"relationships":{"challenged_by":[]},"comments":"Validates that impairment is observable, not just self- perceived. Partially qualifies C004  the gap between self-report and employer perception may be smaller than the internal/external framing suggests.\\n"}},{"id":"C006","type":"claim","label":"Inattention symptoms show the strongest correlations (r=0...","yamlKey":"C006","data":{"statement":"Inattention symptoms show the strongest correlations (r=0.40-0.60) with work problems across both community and clinical samples. Inattention significantly predicts employment status while hyperactivity/impulsivity, comorbidities, and demographics do not.\\n","type":"observation","sources":["Norwegian_Employment_Study"],"relationships":{"supports":["Attention Allocation Dysfunction"]},"comments":"N=149, multivariate analysis. This is why the mechanism layer focuses on attention allocation, not hyperactivity.\\n"}},{"id":"C007","type":"claim","label":"Objective cognitive tests account for little variance in...","yamlKey":"C007","data":{"statement":"Objective cognitive tests account for little variance in workplace functioning; self-reported everyday behaviours predict work outcomes much better.\\n","type":"observation","sources":["Barkley_Murphy_2010"],"relationships":{},"comments":"Drawn from occupational history comparison of neuropsych measures versus structured interview data. General finding replicated across the ADHD workplace literature  ecological validity of laboratory tests is poor.\\n"}},{"id":"C008","type":"claim","label":"Time blindness in ADHD is a fundamental difference in tim...","yamlKey":"C008","data":{"statement":"Time blindness in ADHD is a fundamental difference in time perception, not merely poor planning. Standard time management tools (calendars, to-do lists) consistently fail for ADHD users because they assume an internal time sense that does not exist.\\n","type":"interpretation","sources":["Burnout_Mediation_2024","Fuermaier_2021","P2A_Community_Reports"],"relationships":{"supports":["Time Perception Distortion"],"depends_on":["C009"]},"comments":"Burnout mediation study identified time management as key EF deficit; Fuermaier WFIRS data quantified the impairment; community reports document consistent tool failure. The \\"assume an internal time sense\\" framing is our analytical interpretation of why tools fail, hence typed as interpretation.\\n"}},{"id":"C009","type":"claim","label":"Self-management to time was identified as the most signif...","yamlKey":"C009","data":{"statement":"Self-management to time was identified as the most significant executive function deficit mediating the relationship between ADHD and job burnout.\\n","type":"observation","sources":["Burnout_Mediation_2024"],"relationships":{"supports":["Time Perception Distortion"]},"comments":"Field study of 171 employees. Mediation analysis identifying time management as the strongest EF pathway from ADHD to occupational failure.\\n"}},{"id":"C010","type":"claim","label":"Coaches and occupational therapists consistently prioriti...","yamlKey":"C010","data":{"statement":"Coaches and occupational therapists consistently prioritise time management as the foundation for intervention because it creates cascading effects: missed deadlines, incomplete projects, chronic lateness, and job instability all follow from time management deficits.\\n","type":"observation","sources":["ADHD_Coaching_Survey","Burnout_Mediation_2024"],"relationships":{"supports":["Time Perception Distortion"],"depends_on":["C009"]},"comments":"Practitioner consensus on causal ordering, corroborated by the mediation study's quantitative identification of time management as primary EF mediator.\\n"}},{"id":"C011","type":"claim","label":"Task initiation failure in ADHD is qualitatively differen...","yamlKey":"C011","data":{"statement":"Task initiation failure in ADHD is qualitatively different from procrastination. Users describe an \\"invisible barrier\\" where they know exactly what to do but cannot start, due to altered reward-processing systems. Standard productivity advice (\\"just start\\") fails because it assumes a functioning initiation system.\\n","type":"interpretation","sources":["P2A_Community_Reports","ADDitude_Poll"],"relationships":{"supports":["Reward and Activation Processing"]},"comments":"Community self-reports (Reddit threads) and ADDitude poll data on task initiation. The phenomenology (\\"invisible barrier\\") is directly reported. The causal attribution to reward processing is our interpretation, hence the type.\\n"}},{"id":"C012","type":"claim","label":"The ADHD brain activates on urgency, novelty, interest, c...","yamlKey":"C012","data":{"statement":"The ADHD brain activates on urgency, novelty, interest, challenge, and passion (the INCUP framework) rather than importance. Standard importance-based appeals (long-term consequences, obligation) are structurally mismatched to ADHD activation patterns.\\n","type":"interpretation","sources":["P2A_Community_Reports","ADHD_Coaching_Survey"],"relationships":{"supports":["Reward and Activation Processing"]},"comments":"INCUP framework originates from Dodson's clinical work (not a formal study in our bibliography  established clinical knowledge). Community reports and practitioner data provide the evidence that importance-based tools fail in practice. Our contribution is applying the framework to product design implications.\\n"}},{"id":"C013","type":"claim","label":"Delay discounting is a documented mechanism in ADHD where...","yamlKey":"C013","data":{"statement":"Delay discounting is a documented mechanism in ADHD where distant rewards lose motivational value exponentially, directly causing long-term project neglect despite intellectual understanding of importance.\\n","type":"observation","sources":["P2A_Community_Reports"],"relationships":{"supports":["Reward and Activation Processing"]},"comments":"Delay discounting is well-established in ADHD neuroscience literature but no specific delay discounting study is in our bibliography. The project neglect manifestation is evidenced by community reports of long-term task abandonment patterns. Consider adding a primary delay discounting study if this claim needs strengthening.\\n"}},{"id":"C014","type":"claim","label":"Working memory impairment in ADHD shows effect sizes of d...","yamlKey":"C014","data":{"statement":"Working memory impairment in ADHD shows effect sizes of d=1.63-2.03 with 75-81% of individuals showing measurable impairment. Neurophysiological evidence shows lower P3 amplitude during encoding, indicating ineffective attentional resource allocation at the encoding stage.\\n","type":"observation","sources":["Alderson_2020","Missonnier_2013"],"relationships":{"supports":["Encoding Deficit"]},"comments":"Tier 1 clinical evidence. Alderson meta-analysis (effect sizes and prevalence), Missonnier study (P3 neural evidence). Separates encoding deficit from retrieval failure  information never reaches storage.\\n"}},{"id":"C015","type":"claim","label":"Meeting memory failure occurs despite active engagement a...","yamlKey":"C015","data":{"statement":"Meeting memory failure occurs despite active engagement and comprehension during the meeting. Users understand content in real time but encoding fails silently  users cannot recall even the gist afterward.\\n","type":"observation","sources":["Missonnier_2013","Bonilla_2020","P2A_Community_Reports"],"relationships":{"supports":["Encoding Deficit"],"depends_on":["C014"]},"comments":"Neural evidence (Missonnier, Bonilla) combined with user self-reports of the lived experience. The \\"despite active engagement\\" qualifier is critical  this is not an attention problem but an encoding problem.\\n"}},{"id":"C016","type":"claim","label":"Medication improves memory performance but leaves conside...","yamlKey":"C016","data":{"statement":"Medication improves memory performance but leaves considerable impairments compared to normal functioning, with large deficits persisting in story recall and prospective memory even in treated adults with ADHD.\\n","type":"observation","sources":["Fuermaier_2016"],"relationships":{"supports":["Encoding Deficit","Prospective Memory Failure"]},"comments":"Methylphenidate study. Key caveat: medication does not normalise these deficits. Tools addressing encoding and prospective memory are necessary even for medicated populations.\\n"}},{"id":"C017","type":"claim","label":"Email management failure manifests as reading emails, for...","yamlKey":"C017","data":{"statement":"Email management failure manifests as reading emails, forming intention to reply, then the intention vanishing from awareness entirely  the \\"read and forgot\\" pattern. One user was terminated specifically for failing to send a calendar invite.\\n","type":"observation","sources":["Fuermaier_2013","P2A_Community_Reports"],"relationships":{"supports":["Prospective Memory Failure"]},"comments":"Fuermaier 2013 documents the prospective memory impairment mechanism (d=large, n=90); community reports provide the workplace manifestation and employment consequences.\\n"}},{"id":"C018","type":"claim","label":"No existing email tool addresses the core ADHD email fail...","yamlKey":"C018","data":{"statement":"No existing email tool addresses the core ADHD email failure mechanism: prospective memory failure for reply intentions. All tools focus on inbox volume, processing speed, search, or visual overwhelm, but none proactively resurface forgotten reply intentions.\\n","type":"interpretation","sources":["Fuermaier_2013","P2A_Community_Reports"],"relationships":{"supports":[]},"comments":"Gap analysis: Fuermaier 2013 establishes the prospective memory mechanism; community reports document which tool features users actually encounter (none addressing PM). Typed as interpretation because \\"no tool\\" is based on our review's coverage, which may not be exhaustive.\\n"}},{"id":"C019","type":"claim","label":"The \\"out of sight, out of mind\\" pattern is described as f...","yamlKey":"C019","data":{"statement":"The \\"out of sight, out of mind\\" pattern is described as fundamental by users: \\"Those apps will NEVER WORK because you have to remember to look at them, which you won't.\\"\\n","type":"observation","sources":["P2A_Community_Reports"],"relationships":{"supports":["Prospective Memory Failure"]},"comments":"Direct user quote from r/ADHD_Programmers. This is the circular dependency expressed as a prospective memory problem  the tool itself becomes subject to the deficit it addresses.\\n"}},{"id":"C020","type":"claim","label":"The overwhelm-burnout cycle follows a documented pattern:...","yamlKey":"C020","data":{"statement":"The overwhelm-burnout cycle follows a documented pattern: time management difficulties  missed deadlines  overtime compensation  energy depletion  stress  emotional dysregulation increases  performance decline  negative feedback  job instability  repeat.\\n","type":"observation","sources":["ADHD_Coaching_Survey"],"relationships":{"supports":["Emotional Dysregulation"]},"comments":"Practitioner-documented cascade pattern reported by coaches and occupational therapists. Emotional dysregulation is both a component and an amplifier.\\n"}},{"id":"C021","type":"claim","label":"Users report standard ADHD strategies as explicitly count...","yamlKey":"C021","data":{"statement":"Users report standard ADHD strategies as explicitly counterproductive: Pomodoro technique interrupts hyperfocus and creates \\"2 opportunities for failure an hour\\"; starting with hardest task requires warm-up that doesn't exist; increased pressure causes \\"brain shutdown.\\"\\n","type":"observation","sources":["P2A_Community_Reports"],"relationships":{"supports":["Emotional Dysregulation","Reward and Activation Processing"]},"comments":"The \\"brain shutdown\\" under pressure is an emotional dysregulation response. The Pomodoro/hardest-task failures are reward-processing mismatches. Both are active harm from neurotypical-designed tools.\\n"}},{"id":"C022","type":"claim","label":"No productivity tool tested by ADHD users shows sustained...","yamlKey":"C022","data":{"statement":"No productivity tool tested by ADHD users shows sustained success. Users report setup hyperfocus (spending days configuring), followed by abandonment within 3-14 days, creating an \\"app graveyard.\\" Not a single tool shows >90-day sustained use in community reports.\\n","type":"observation","sources":["P2A_Community_Reports"],"relationships":{"supports":["Novelty Decay"]},"comments":"Universal pattern across Notion, Todoist, Trello, ClickUp, Asana, Habitica, Finch. Structural failure, not incidental.\\n"}},{"id":"C023","type":"claim","label":"Five meta-challenges apply universally to any ADHD produc...","yamlKey":"C023","data":{"statement":"Five meta-challenges apply universally to any ADHD product: Novelty Decay, Circular Dependency, Shame-Avoidance Spiral, Disclosure Constraint, and Notification Desensitisation.\\n","type":"synthesis","sources":["P2A_Community_Reports","ADHD_Coaching_Survey","Medication_Adherence_2024","Medication_Discontinuation_2024","Digital_Intervention_Dropout"],"relationships":{"supports":[]},"comments":"Our analytical framework, constructed from five evidence streams: community reports (novelty decay, circular dependency), practitioner data (shame-avoidance, disclosure constraint), and clinical studies (medication adherence and digital intervention dropout as baseline comparators for notification desensitisation and novelty decay). The grouping into five named challenges is our construction; each individual challenge traces to specific evidence.\\n"}},{"id":"C024","type":"claim","label":"ADHD medication adherence averages 56%, with only 27.5% m...","yamlKey":"C024","data":{"statement":"ADHD medication adherence averages 56%, with only 27.5% meeting the 80% coverage threshold, and 50-70% discontinuing within the first year. If the gold-standard intervention fails retention, digital tools should expect equal or worse.\\n","type":"observation","sources":["Medication_Adherence_2024","Medication_Discontinuation_2024"],"relationships":{"supports":["Novelty Decay"]},"comments":"Two studies: adherence study (n=4,011) for the 56% and 27.5% figures; Karolinska multinational study (1.2M patients, 9 countries) for the 50-70% discontinuation figure. The final sentence is our interpretation.\\n"}},{"id":"C025","type":"claim","label":"77% of ADHD adults did not complete self-guided digital i...","yamlKey":"C025","data":{"statement":"77% of ADHD adults did not complete self-guided digital interventions in a meta-analysis of treatment dropout. More than 90% drop out after 2 modules in open-distribution self-guided interventions.\\n","type":"observation","sources":["Digital_Intervention_Dropout"],"relationships":{"supports":["Novelty Decay","Circular Dependency"]},"comments":"Pettersson et al. 2017 / Nordby et al. 2022. The >90% figure is from broader self-guided interventions (not ADHD-specific). This distinction matters for applying the dropout rate to ADHD-specific products.\\n"}},{"id":"C026","type":"claim","label":"Both coaches and OTs report that ADHD adults face a consi...","yamlKey":"C026","data":{"statement":"Both coaches and OTs report that ADHD adults face a consistent disclosure dilemma at work: fear of discrimination, uncertainty about whether disclosure helps, managers who don't know how to respond, and lack of organisational ADHD understanding.\\n","type":"observation","sources":["ADHD_Coaching_Survey"],"relationships":{"supports":["Disclosure Constraint"]},"comments":"Practitioner-reported pattern. Products must work without requiring the user to explain or justify their ADHD to colleagues.\\n"}},{"id":"C027","type":"claim","label":"Users want tools that \\"intervene before we get stuck, not...","yamlKey":"C027","data":{"statement":"Users want tools that \\"intervene before we get stuck, not assistants waiting for us to remember to ask.\\"\\n","type":"observation","sources":["P2A_Community_Reports"],"relationships":{"supports":[]},"comments":"Direct user quote. Explicit demand for product-initiated intervention over user-initiated tools.\\n"}},{"id":"C028","type":"claim","label":"Passive Capture and Structured Delivery has zero habit- f...","yamlKey":"C028","data":{"statement":"Passive Capture and Structured Delivery has zero habit- formation burden and the strongest retention profile because the user changes nothing about how they work. Value compounds over time as the knowledge graph grows.\\n","type":"interpretation","sources":["P2A_Community_Reports","Fuermaier_2013"],"relationships":{"supports":[]},"comments":"Community reports provide the evidence base (tool abandonment patterns, habit-formation as failure point); Fuermaier 2013 establishes why prospective memory burden predicts failure. The retention and compounding claims are hypothesised from these structural characteristics, not observed in longitudinal data.\\n"}},{"id":"C029","type":"claim","label":"Structured Check-In / Guided Routine is the model most re...","yamlKey":"C029","data":{"statement":"Structured Check-In / Guided Routine is the model most recommended by practitioners and most abandoned by users. It has the worst meta-challenge vulnerability profile of any engagement model.\\n","type":"interpretation","sources":["ADHD_Coaching_Survey","P2A_Community_Reports"],"relationships":{"challenged_by":["C030"]},"comments":"Practitioner recommendation from coaching survey; abandonment from community data. The paradox is explained by practitioners providing external accountability that software cannot replicate.\\n"}},{"id":"C030","type":"claim","label":"Psychosocial interventions (particularly CBT) show signif...","yamlKey":"C030","data":{"statement":"Psychosocial interventions (particularly CBT) show significantly larger effects (d=0.56) on work-relevant outcomes than pharmacological interventions (d=0.19) in a 2024 meta-analysis of adult ADHD workplace outcomes.\\n","type":"observation","sources":["Lauder_2024"],"relationships":{"supports":[]},"comments":"Tier 1 meta-analysis. Partially qualifies C029  structured interventions DO work, but the evidence is for human- delivered structured interventions, not software-delivered.\\n"}},{"id":"C031","type":"claim","label":"ADHD coaching/OT interventions incorporating external str...","yamlKey":"C031","data":{"statement":"ADHD coaching/OT interventions incorporating external structure, accountability, and client-selected goals show 15-19% improvement in executive function scores from abnormal to normal range, sustained at 3-month follow-up.\\n","type":"observation","sources":["WorkMAP_RCT"],"relationships":{"supports":[]},"comments":"Randomised controlled trial (Tier 1). 11 weekly telehealth sessions. External structure is clinically effective. The question is whether software can deliver \\"external structure\\" without the human.\\n"}},{"id":"C032","type":"claim","label":"No single engagement model addresses all problem clusters...","yamlKey":"C032","data":{"statement":"No single engagement model addresses all problem clusters at the \\"strongly compatible\\" level. Any product addressing the full problem space requires combining multiple engagement models.\\n","type":"interpretation","sources":["Fuermaier_2021","P2A_Community_Reports","ADHD_Coaching_Survey","Lauder_2024"],"relationships":{"supports":[]},"comments":"Derived from our compatibility analysis, which synthesizes across clinical evidence (Fuermaier  problem breadth), community data (tool failure patterns), practitioner reports (intervention modalities), and the Lauder meta- analysis (intervention effect sizes by type). The conclusion that no single model covers all clusters is structural, not directly measured.\\n"}},{"id":"C033","type":"claim","label":"ADHD is heterogeneous. The same engagement model may work...","yamlKey":"C033","data":{"statement":"ADHD is heterogeneous. The same engagement model may work well for one profile (primarily inattentive) and poorly for another (primarily hyperactive/impulsive, combined). The research does not differentiate engagement patterns by ADHD subtype.\\n","type":"caveat","sources":["Fuermaier_2021","Norwegian_Employment_Study"],"relationships":{},"comments":"Both studies note sample composition and the inattentive- predominant finding (C006), but neither differentiates engagement or intervention response by subtype. ADHD heterogeneity is universally acknowledged in the clinical literature.\\n"}},{"id":"C034","type":"claim","label":"Engagement model retention profiles are hypothesised base...","yamlKey":"C034","data":{"statement":"Engagement model retention profiles are hypothesised based on structural characteristics, not observed in longitudinal data. The \\"app graveyard\\" evidence provides negative data on Structured Check-In but limited positive data on other models.\\n","type":"caveat","sources":["P2A_Community_Reports"],"relationships":{"challenged_by":[]},"comments":"The positive evidence for tool abandonment is strong (community data on the failure case). The absence of longitudinal retention data for alternative models is the caveat  our retention predictions are structural inferences, not measurements.\\n"}},{"id":"C035","type":"claim","label":"Most ADHD coaching workforce (72.7%) self-identifies as h...","yamlKey":"C035","data":{"statement":"Most ADHD coaching workforce (72.7%) self-identifies as having or suspecting ADHD, with 98.9% using lived experience to inform services. This creates both credibility (lived experience) and potential methodological bias.\\n","type":"observation","sources":["ADHD_Coaching_Survey"],"relationships":{},"comments":"Affects interpretation of all practitioner evidence. Coaches may recommend strategies that work for their own neurotype. The population they serve may not be representative.\\n"}},{"id":"Fuermaier_2021","type":"source","label":"Fuermaier et al., 2021  ADHD at the Workplace (WFIRS)","yamlKey":"Fuermaier_2021","data":{"name":"Fuermaier et al., 2021  ADHD at the Workplace (WFIRS)","description":"German outpatient study using Weiss Functional Impairment Rating Scale. n=134 ADHD adults vs matched controls and general community sample. Primary source for WFIRS work item prevalence data.\\n","type":"clinical_study","evidence_tier":"Tier 1","url":"https://pmc.ncbi.nlm.nih.gov/articles/PMC8295111/","cited_in":["P1A","P1C"],"limitations":"Clinical outpatient sample  may over-represent impairment vs community ADHD population. German sample  cultural context may affect workplace norms.\\n"}},{"id":"deGraaf_2008","type":"source","label":"de Graaf et al., 2008  WHO World Mental Health Survey","yamlKey":"deGraaf_2008","data":{"name":"de Graaf et al., 2008  WHO World Mental Health Survey","description":"WHO survey of 7,075 workers across 10 countries measuring productivity loss (presenteeism and absenteeism) in workers with ADHD. Source of the 22.1 extra lost days figure.\\n","type":"population_cohort","evidence_tier":"Tier 1","url":"https://pmc.ncbi.nlm.nih.gov/articles/PMC2665789/","cited_in":["P1A"],"limitations":"Self-report measure of role performance. \\"Lost days\\" are estimated equivalents, not direct observation.\\n"}},{"id":"Swedish_Population_2021","type":"source","label":"Swedish population cohort, 2021  Employment outcomes","yamlKey":"Swedish_Population_2021","data":{"name":"Swedish population cohort, 2021  Employment outcomes","description":"Population register study. N=~64,000 including 9,718 ADHD, 48,590 controls, 5,582 siblings. Source of 10.2x disability pension risk, 2.7x long-term sickness absence risk.\\n","type":"population_cohort","evidence_tier":"Tier 1","url":"https://pmc.ncbi.nlm.nih.gov/articles/PMC10009402/","cited_in":["P1A","P1C"],"limitations":"Register-based diagnoses  captures treated ADHD, may miss undiagnosed individuals. Swedish welfare system context.\\n"}},{"id":"Barkley_Murphy_2010","type":"source","label":"Barkley & Murphy, 2010  Occupational functioning in ADHD","yamlKey":"Barkley_Murphy_2010","data":{"name":"Barkley & Murphy, 2010  Occupational functioning in ADHD","description":"Structured occupational history interviews. Documented higher rates of jobs quit, formal discipline, interpersonal trouble, and impaired employer ratings in ADHD adults. Cited by 751+ papers.\\n","type":"clinical_study","evidence_tier":"Tier 1","url":"https://academic.oup.com/acn/article/25/3/157/3840","cited_in":["P1A","P1C"],"limitations":"Retrospective occupational history  subject to recall bias.\\n"}},{"id":"Adamou_2013","type":"source","label":"Adamou et al., 2013  Occupational health consensus","yamlKey":"Adamou_2013","data":{"name":"Adamou et al., 2013  Occupational health consensus","description":"International occupational health consensus concluding ADHD causes impairment \\"in all aspects related to employment.\\" Safety risk documentation.\\n","type":"consensus_statement","evidence_tier":"Tier 1","url":"https://pmc.ncbi.nlm.nih.gov/articles/PMC3599848/","cited_in":["P1A"],"limitations":"Consensus statement  reflects expert opinion at time of publication.\\n"}},{"id":"Norwegian_Employment_Study","type":"source","label":"Norwegian study  Inattention and employment status","yamlKey":"Norwegian_Employment_Study","data":{"name":"Norwegian study  Inattention and employment status","description":"N=149. Found inattention significantly predicted employment status while hyperactivity/impulsivity, comorbidities, and demographics did not. Inattention correlations r=0.40-0.60 with work problems.\\n","type":"clinical_study","evidence_tier":"Tier 1-2","url":"https://pmc.ncbi.nlm.nih.gov/articles/PMC12128943/","cited_in":["P1C"],"limitations":"Smaller sample (n=149). Single-country context.\\n"}},{"id":"Burnout_Mediation_2024","type":"source","label":"Job burnout mediation study, 2024  EF deficit pathways","yamlKey":"Burnout_Mediation_2024","data":{"name":"Job burnout mediation study, 2024  EF deficit pathways","description":"Field study of 171 employees. Identified self-management to time as the most significant executive function deficit mediating the ADHD  burnout relationship.\\n","type":"clinical_study","evidence_tier":"Tier 1","url":"https://pmc.ncbi.nlm.nih.gov/articles/PMC11007411/","cited_in":["P1C","P2C"],"limitations":"Mediation analysis  identifies pathways but the specific mediators tested may not be exhaustive. Emotional regulation was not included as a mediator variable.\\n"}},{"id":"Alderson_2020","type":"source","label":"Alderson et al., 2020  Working memory bifactor model","yamlKey":"Alderson_2020","data":{"name":"Alderson et al., 2020  Working memory bifactor model","description":"Bifactor modelling of working memory deficits in ADHD. Effect sizes d=1.63-2.03, with 75-81% of ADHD individuals showing measurable impairment in central executive WM.\\n","type":"meta_analysis","evidence_tier":"Tier 1","url":"https://pmc.ncbi.nlm.nih.gov/articles/PMC7483636/","cited_in":["P3B"],"limitations":"Meta-analytic  aggregates across studies with varying methods and populations.\\n"}},{"id":"Missonnier_2013","type":"source","label":"Missonnier et al., 2013  Encoding deficit neural evidence","yamlKey":"Missonnier_2013","data":{"name":"Missonnier et al., 2013  Encoding deficit neural evidence","description":"First neural evidence of impaired encoding in adult ADHD. Lower P3 amplitude during working memory encoding stage, indicating ineffective attentional resource allocation. Published in Clinical Neurophysiology.\\n","type":"clinical_study","evidence_tier":"Tier 1","url":"https://www.sciencedirect.com/science/article/abs/pii/S1388245713013485","cited_in":["P3B"],"limitations":"Neural study  sample size not noted in our documents. Measures neural correlates, not directly workplace behaviour.\\n"}},{"id":"Bonilla_2020","type":"source","label":"Bonilla et al., 2020  WM encoding/retrieval in ADHD","yamlKey":"Bonilla_2020","data":{"name":"Bonilla et al., 2020  WM encoding/retrieval in ADHD","description":"Confirmed that while binding processes are intact, attention- related encoding and retrieval processes are compromised in ADHD. Published in Scientific Reports.\\n","type":"clinical_study","evidence_tier":"Tier 1","url":"https://www.nature.com/articles/s41598-020-64678-x","cited_in":["P3B"],"limitations":"Laboratory task  ecological validity for workplace meetings is inferred, not directly measured.\\n"}},{"id":"Fuermaier_2013","type":"source","label":"Fuermaier et al., 2013  Prospective memory in ADHD","yamlKey":"Fuermaier_2013","data":{"name":"Fuermaier et al., 2013  Prospective memory in ADHD","description":"Large-scale impairment in task planning abilities. 45 ADHD adults vs 45 matched controls. Published in PLOS ONE.\\n","type":"clinical_study","evidence_tier":"Tier 1","url":"https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0058338","cited_in":["P3B"],"limitations":"Relatively small sample (n=90 total).\\n"}},{"id":"Fuermaier_2016","type":"source","label":"Fuermaier et al., 2016  Methylphenidate effects on memory","yamlKey":"Fuermaier_2016","data":{"name":"Fuermaier et al., 2016  Methylphenidate effects on memory","description":"Found medication improves memory but leaves considerable impairments vs normal functioning. Large deficits persist in story recall and prospective memory even when treated.\\n","type":"clinical_study","evidence_tier":"Tier 1","url":"https://www.tandfonline.com/doi/full/10.1080/23279095.2015.1124108","cited_in":["P3B","S10"],"limitations":"Single medication (methylphenidate). Other medications may show different effects.\\n"}},{"id":"Lauder_2024","type":"source","label":"Lauder et al., 2024  Meta-analysis of workplace interventions","yamlKey":"Lauder_2024","data":{"name":"Lauder et al., 2024  Meta-analysis of workplace interventions","description":"Meta-analysis comparing pharmacological (d=0.19) and psychosocial (d=0.56) interventions on work-relevant outcomes for adults with ADHD. Psychosocial interventions showed significantly larger effects.\\n","type":"meta_analysis","evidence_tier":"Tier 1","url":"https://journals.sagepub.com/doi/10.1177/27546330241292984","cited_in":["P2C"],"limitations":"Meta-analytic  pooled effect sizes may mask heterogeneity. Work-relevant outcomes defined broadly.\\n"}},{"id":"WorkMAP_RCT","type":"source","label":"Grinblat & Rosenblum, 2023  Work-MAP telehealth RCT","yamlKey":"WorkMAP_RCT","data":{"name":"Grinblat & Rosenblum, 2023  Work-MAP telehealth RCT","description":"Randomised controlled trial of telehealth metacognitive intervention for adults with ADHD. 11 weekly sessions. 15-19% of participants improved EF scores from abnormal to normal range, sustained at 3-month follow-up.\\n","type":"clinical_study","evidence_tier":"Tier 1","url":"https://pmc.ncbi.nlm.nih.gov/articles/PMC10336612/","cited_in":["P2C"],"limitations":"Structured therapeutic programme with clinician  not directly comparable to software-delivered intervention.\\n"}},{"id":"Medication_Adherence_2024","type":"source","label":"Medication adherence observational study (n=4,011)","yamlKey":"Medication_Adherence_2024","data":{"name":"Medication adherence observational study (n=4,011)","description":"Found average medication adherence of 56%, with only 27.5% meeting the 80% coverage threshold for therapeutic benefit.\\n","type":"clinical_study","evidence_tier":"Tier 1","url":"Pubmed: 40357727","cited_in":["Meta_Challenges"],"limitations":"Single observational study. Adherence patterns may vary by medication type and healthcare system.\\n"}},{"id":"Medication_Discontinuation_2024","type":"source","label":"Karolinska Institutet, 2024  Multinational discontinuation","yamlKey":"Medication_Discontinuation_2024","data":{"name":"Karolinska Institutet, 2024  Multinational discontinuation","description":"Multinational study of 1.2M patients across 9 countries. Found 50-70% of adolescents and adults discontinue ADHD medication within the first year.\\n","type":"population_cohort","evidence_tier":"Tier 1","url":"Karolinska Institutet, 2024","cited_in":["Meta_Challenges"],"limitations":"Register-based data. Reasons for discontinuation not captured.\\n"}},{"id":"Digital_Intervention_Dropout","type":"source","label":"Pettersson et al., 2017 / Nordby et al., 2022  Digital intervention dropout","yamlKey":"Digital_Intervention_Dropout","data":{"name":"Pettersson et al., 2017 / Nordby et al., 2022  Digital intervention dropout","description":"77% of ADHD adults did not complete self-guided digital interventions. In broader self-guided interventions, >90% drop out after 2 modules in open-distribution versions. Cited in Frontiers in Digital Health.\\n","type":"meta_analysis","evidence_tier":"Tier 1-2","url":"Nordby et al. 2022, Frontiers in Digital Health","cited_in":["Meta_Challenges"],"limitations":"Self-guided only  coached digital interventions may have better completion. The >90% figure is for depression interventions, not ADHD-specific.\\n"}},{"id":"P2A_Community_Reports","type":"source","label":"ADHD community self-reports (Reddit, ADDitude, forums)","yamlKey":"P2A_Community_Reports","data":{"name":"ADHD community self-reports (Reddit, ADDitude, forums)","description":"User-reported workplace struggles from r/ADHD, r/ADHD_ Programmers, ADDitude Magazine surveys, and ADHD community forums. Source of qualitative descriptions like \\"invisible barrier,\\" \\"app graveyard,\\" and \\"out of sight, out of mind.\\"\\n","type":"user_evidence","evidence_tier":"Tier 3","url":"Multiple community sources","cited_in":["P2A","P2B"],"limitations":"Self-selected. No diagnosis verification. Recall bias. Frustration likely over-represented. Not generalisable to the ADHD population as a whole.\\n"}},{"id":"ADDitude_Poll","type":"source","label":"ADDitude Magazine workplace challenges poll (n=~1,000)","yamlKey":"ADDitude_Poll","data":{"name":"ADDitude Magazine workplace challenges poll (n=~1,000)","description":"Survey of ~1,000 ADHD adults on biggest work challenges. 29.27% cited focusing consistently as #1, 21.86% cited prioritisation.\\n","type":"user_evidence","evidence_tier":"Tier 3","url":"ADDitude Magazine","cited_in":["P2A"],"limitations":"Self-selected readership. Likely skews toward diagnosed, treatment-seeking adults.\\n"}},{"id":"ADHD_Coaching_Survey","type":"source","label":"ADHD coaching workforce survey","yamlKey":"ADHD_Coaching_Survey","data":{"name":"ADHD coaching workforce survey","description":"Found 72.7% of ADHD coaches self-identify as having or suspecting ADHD. 60.9% began practicing during/after COVID. 98.9% use lived experience to inform services.\\n","type":"practitioner_study","evidence_tier":"Tier 2","url":"Cited in P2C","cited_in":["P2C"],"limitations":"Self-report from practitioners. Coach qualifications and methodologies vary widely.\\n"}},{"id":"Our_S3","type":"source","label":"Project 1  Problem Layer Scoring (S3)","yamlKey":"Our_S3","data":{"name":"Project 1  Problem Layer Scoring (S3)","description":"Our scoring of 13 functional problems on frequency, differentiation, and connectedness. The scoring framework is our analytical construction.\\n","type":"analytical_output","evidence_tier":"Derived","limitations":"Scores are our interpretation, not validated instrument.\\n"}},{"id":"Our_S4","type":"source","label":"Project 1  Problem Clusters (S4)","yamlKey":"Our_S4","data":{"name":"Project 1  Problem Clusters (S4)","description":"Our cluster analysis grouping problems by co-occurrence. Interpretive groupings, not statistically derived.\\n","type":"analytical_output","evidence_tier":"Derived","limitations":"Clusters are inferred from shared mechanisms and practitioner reports, not longitudinal data.\\n"}},{"id":"Our_L2","type":"source","label":"Project 2  Engagement Models (L2)","yamlKey":"Our_L2","data":{"name":"Project 2  Engagement Models (L2)","description":"Our eight engagement model taxonomy characterised across four dimensions. Extracted from proposed solutions, not observed products.\\n","type":"analytical_output","evidence_tier":"Derived","limitations":"Retention profiles hypothesised. Models extracted from designs, not shipped products.\\n"}},{"id":"Our_Meta_Challenges","type":"source","label":"Project 2  Meta-Challenges","yamlKey":"Our_Meta_Challenges","data":{"name":"Project 2  Meta-Challenges","description":"Our five structural challenges framework (MC1-MC5). The grouping is our construction; individual challenges are well-evidenced.\\n","type":"analytical_output","evidence_tier":"Derived","limitations":"The five challenges are our categorisation. Other structural challenges may exist that we haven't identified.\\n"}},{"id":"Our_Cross_Layer","type":"source","label":"Project 2  Cross-Layer Mapping","yamlKey":"Our_Cross_Layer","data":{"name":"Project 2  Cross-Layer Mapping","description":"Our compatibility matrix (S/P/X ratings) mapping problems to engagement models with meta-challenge overlays.\\n","type":"analytical_output","evidence_tier":"Derived","limitations":"Ratings are interpretive. Build/Buy recommendations in the source document contain technology assertions that we have excluded.\\n"}}]`),Hpe=JSON.parse('[{"id":"e_problem_mechanism_0","source":"FP03","target":"MECH01","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_claim_1","source":"FP03","target":"C008","edgeType":"problem_claim","data":{}},{"id":"e_problem_claim_2","source":"FP03","target":"C009","edgeType":"problem_claim","data":{}},{"id":"e_problem_claim_3","source":"FP03","target":"C010","edgeType":"problem_claim","data":{}},{"id":"e_problem_cluster_4","source":"FP03","target":"CL_A","edgeType":"problem_cluster","data":{}},{"id":"e_problem_mechanism_5","source":"FP04","target":"MECH01","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_mechanism_6","source":"FP04","target":"MECH05","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_claim_7","source":"FP04","target":"C002","edgeType":"problem_claim","data":{}},{"id":"e_problem_claim_8","source":"FP04","target":"C003","edgeType":"problem_claim","data":{}},{"id":"e_problem_cluster_9","source":"FP04","target":"CL_A","edgeType":"problem_cluster","data":{}},{"id":"e_problem_cluster_10","source":"FP04","target":"CL_C","edgeType":"problem_cluster","data":{}},{"id":"e_problem_mechanism_11","source":"FP12","target":"MECH01","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_claim_12","source":"FP12","target":"C008","edgeType":"problem_claim","data":{}},{"id":"e_problem_cluster_13","source":"FP12","target":"CL_A","edgeType":"problem_cluster","data":{}},{"id":"e_problem_mechanism_14","source":"FP01","target":"MECH02","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_claim_15","source":"FP01","target":"C011","edgeType":"problem_claim","data":{}},{"id":"e_problem_claim_16","source":"FP01","target":"C012","edgeType":"problem_claim","data":{}},{"id":"e_problem_cluster_17","source":"FP01","target":"CL_B","edgeType":"problem_cluster","data":{}},{"id":"e_problem_mechanism_18","source":"FP11","target":"MECH02","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_claim_19","source":"FP11","target":"C011","edgeType":"problem_claim","data":{}},{"id":"e_problem_cluster_20","source":"FP11","target":"CL_B","edgeType":"problem_cluster","data":{}},{"id":"e_problem_mechanism_21","source":"FP02","target":"MECH05","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_mechanism_22","source":"FP02","target":"MECH02","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_claim_23","source":"FP02","target":"C001","edgeType":"problem_claim","data":{}},{"id":"e_problem_claim_24","source":"FP02","target":"C002","edgeType":"problem_claim","data":{}},{"id":"e_problem_claim_25","source":"FP02","target":"C006","edgeType":"problem_claim","data":{}},{"id":"e_problem_claim_26","source":"FP02","target":"C007","edgeType":"problem_claim","data":{}},{"id":"e_problem_cluster_27","source":"FP02","target":"CL_C","edgeType":"problem_cluster","data":{}},{"id":"e_problem_mechanism_28","source":"FP06","target":"MECH05","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_claim_29","source":"FP06","target":"C006","edgeType":"problem_claim","data":{}},{"id":"e_problem_cluster_30","source":"FP06","target":"CL_C","edgeType":"problem_cluster","data":{}},{"id":"e_problem_mechanism_31","source":"FP05","target":"MECH02","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_mechanism_32","source":"FP05","target":"MECH05","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_claim_33","source":"FP05","target":"C012","edgeType":"problem_claim","data":{}},{"id":"e_problem_claim_34","source":"FP05","target":"C013","edgeType":"problem_claim","data":{}},{"id":"e_problem_mechanism_35","source":"FP08","target":"MECH02","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_mechanism_36","source":"FP08","target":"MECH01","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_claim_37","source":"FP08","target":"C013","edgeType":"problem_claim","data":{}},{"id":"e_problem_cluster_38","source":"FP08","target":"CL_A","edgeType":"problem_cluster","data":{}},{"id":"e_problem_cluster_39","source":"FP08","target":"CL_B","edgeType":"problem_cluster","data":{}},{"id":"e_problem_mechanism_40","source":"FP07","target":"MECH04","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_claim_41","source":"FP07","target":"C014","edgeType":"problem_claim","data":{}},{"id":"e_problem_claim_42","source":"FP07","target":"C015","edgeType":"problem_claim","data":{}},{"id":"e_problem_claim_43","source":"FP07","target":"C016","edgeType":"problem_claim","data":{}},{"id":"e_problem_mechanism_44","source":"FP09","target":"MECH03","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_mechanism_45","source":"FP09","target":"MECH06","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_claim_46","source":"FP09","target":"C017","edgeType":"problem_claim","data":{}},{"id":"e_problem_claim_47","source":"FP09","target":"C018","edgeType":"problem_claim","data":{}},{"id":"e_problem_claim_48","source":"FP09","target":"C019","edgeType":"problem_claim","data":{}},{"id":"e_problem_mechanism_49","source":"FP10","target":"MECH05","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_claim_50","source":"FP10","target":"C021","edgeType":"problem_claim","data":{}},{"id":"e_problem_mechanism_51","source":"FP18","target":"MECH05","edgeType":"problem_mechanism","data":{}},{"id":"e_problem_claim_52","source":"FP18","target":"C001","edgeType":"problem_claim","data":{}},{"id":"e_mechanism_problem_53","source":"MECH01","target":"FP03","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_problem_54","source":"MECH01","target":"FP04","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_problem_55","source":"MECH01","target":"FP12","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_model_favours_56","source":"MECH01","target":"M1","edgeType":"mechanism_model_favours","data":{"subType":"favours"}},{"id":"e_mechanism_model_favours_57","source":"MECH01","target":"M5","edgeType":"mechanism_model_favours","data":{"subType":"favours"}},{"id":"e_mechanism_model_disfavours_58","source":"MECH01","target":"M8","edgeType":"mechanism_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_mechanism_model_disfavours_59","source":"MECH01","target":"M3","edgeType":"mechanism_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_mechanism_meta_challenge_60","source":"MECH01","target":"MC5","edgeType":"mechanism_meta_challenge","data":{}},{"id":"e_mechanism_problem_61","source":"MECH02","target":"FP01","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_problem_62","source":"MECH02","target":"FP08","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_problem_63","source":"MECH02","target":"FP11","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_problem_64","source":"MECH02","target":"FP05","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_model_favours_65","source":"MECH02","target":"M1","edgeType":"mechanism_model_favours","data":{"subType":"favours"}},{"id":"e_mechanism_model_favours_66","source":"MECH02","target":"M4","edgeType":"mechanism_model_favours","data":{"subType":"favours"}},{"id":"e_mechanism_model_favours_67","source":"MECH02","target":"M6","edgeType":"mechanism_model_favours","data":{"subType":"favours"}},{"id":"e_mechanism_model_disfavours_68","source":"MECH02","target":"M7","edgeType":"mechanism_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_mechanism_model_disfavours_69","source":"MECH02","target":"M8","edgeType":"mechanism_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_mechanism_meta_challenge_70","source":"MECH02","target":"MC1","edgeType":"mechanism_meta_challenge","data":{}},{"id":"e_mechanism_meta_challenge_71","source":"MECH02","target":"MC5","edgeType":"mechanism_meta_challenge","data":{}},{"id":"e_mechanism_problem_72","source":"MECH03","target":"FP07","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_problem_73","source":"MECH03","target":"FP09","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_problem_74","source":"MECH03","target":"FP08","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_model_favours_75","source":"MECH03","target":"M2","edgeType":"mechanism_model_favours","data":{"subType":"favours"}},{"id":"e_mechanism_model_favours_76","source":"MECH03","target":"M6","edgeType":"mechanism_model_favours","data":{"subType":"favours"}},{"id":"e_mechanism_model_disfavours_77","source":"MECH03","target":"M7","edgeType":"mechanism_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_mechanism_model_disfavours_78","source":"MECH03","target":"M8","edgeType":"mechanism_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_mechanism_model_disfavours_79","source":"MECH03","target":"M5","edgeType":"mechanism_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_mechanism_meta_challenge_80","source":"MECH03","target":"MC2","edgeType":"mechanism_meta_challenge","data":{}},{"id":"e_mechanism_problem_81","source":"MECH04","target":"FP07","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_problem_82","source":"MECH04","target":"FP06","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_model_favours_83","source":"MECH04","target":"M2","edgeType":"mechanism_model_favours","data":{"subType":"favours"}},{"id":"e_mechanism_problem_84","source":"MECH05","target":"FP02","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_problem_85","source":"MECH05","target":"FP06","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_problem_86","source":"MECH05","target":"FP10","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_model_favours_87","source":"MECH05","target":"M1","edgeType":"mechanism_model_favours","data":{"subType":"favours"}},{"id":"e_mechanism_model_favours_88","source":"MECH05","target":"M4","edgeType":"mechanism_model_favours","data":{"subType":"favours"}},{"id":"e_mechanism_model_disfavours_89","source":"MECH05","target":"M3","edgeType":"mechanism_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_mechanism_model_disfavours_90","source":"MECH05","target":"M6","edgeType":"mechanism_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_mechanism_meta_challenge_91","source":"MECH05","target":"MC1","edgeType":"mechanism_meta_challenge","data":{}},{"id":"e_mechanism_meta_challenge_92","source":"MECH05","target":"MC5","edgeType":"mechanism_meta_challenge","data":{}},{"id":"e_mechanism_problem_93","source":"MECH06","target":"FP01","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_problem_94","source":"MECH06","target":"FP11","edgeType":"mechanism_problem","data":{}},{"id":"e_mechanism_model_favours_95","source":"MECH06","target":"M2","edgeType":"mechanism_model_favours","data":{"subType":"favours"}},{"id":"e_mechanism_model_favours_96","source":"MECH06","target":"M1","edgeType":"mechanism_model_favours","data":{"subType":"favours"}},{"id":"e_mechanism_model_disfavours_97","source":"MECH06","target":"M7","edgeType":"mechanism_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_mechanism_model_disfavours_98","source":"MECH06","target":"M5","edgeType":"mechanism_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_mechanism_meta_challenge_99","source":"MECH06","target":"MC3","edgeType":"mechanism_meta_challenge","data":{}},{"id":"e_mechanism_meta_challenge_100","source":"MECH06","target":"MC4","edgeType":"mechanism_meta_challenge","data":{}},{"id":"e_cluster_problem_101","source":"CL_A","target":"FP03","edgeType":"cluster_problem","data":{}},{"id":"e_cluster_problem_102","source":"CL_A","target":"FP04","edgeType":"cluster_problem","data":{}},{"id":"e_cluster_problem_103","source":"CL_A","target":"FP12","edgeType":"cluster_problem","data":{}},{"id":"e_cluster_problem_104","source":"CL_A","target":"FP08","edgeType":"cluster_problem","data":{}},{"id":"e_cluster_mechanism_105","source":"CL_A","target":"MECH01","edgeType":"cluster_mechanism","data":{}},{"id":"e_cluster_claim_106","source":"CL_A","target":"C008","edgeType":"cluster_claim","data":{}},{"id":"e_cluster_claim_107","source":"CL_A","target":"C009","edgeType":"cluster_claim","data":{}},{"id":"e_cluster_claim_108","source":"CL_A","target":"C010","edgeType":"cluster_claim","data":{}},{"id":"e_cluster_problem_109","source":"CL_B","target":"FP01","edgeType":"cluster_problem","data":{}},{"id":"e_cluster_problem_110","source":"CL_B","target":"FP08","edgeType":"cluster_problem","data":{}},{"id":"e_cluster_problem_111","source":"CL_B","target":"FP11","edgeType":"cluster_problem","data":{}},{"id":"e_cluster_mechanism_112","source":"CL_B","target":"MECH02","edgeType":"cluster_mechanism","data":{}},{"id":"e_cluster_claim_113","source":"CL_B","target":"C011","edgeType":"cluster_claim","data":{}},{"id":"e_cluster_claim_114","source":"CL_B","target":"C012","edgeType":"cluster_claim","data":{}},{"id":"e_cluster_problem_115","source":"CL_C","target":"FP02","edgeType":"cluster_problem","data":{}},{"id":"e_cluster_problem_116","source":"CL_C","target":"FP06","edgeType":"cluster_problem","data":{}},{"id":"e_cluster_problem_117","source":"CL_C","target":"FP04","edgeType":"cluster_problem","data":{}},{"id":"e_cluster_mechanism_118","source":"CL_C","target":"MECH05","edgeType":"cluster_mechanism","data":{}},{"id":"e_cluster_claim_119","source":"CL_C","target":"C001","edgeType":"cluster_claim","data":{}},{"id":"e_cluster_claim_120","source":"CL_C","target":"C002","edgeType":"cluster_claim","data":{}},{"id":"e_cluster_claim_121","source":"CL_C","target":"C006","edgeType":"cluster_claim","data":{}},{"id":"e_problem_claim_122","source":"FP05","target":"C012","edgeType":"problem_claim","data":{}},{"id":"e_problem_claim_123","source":"FP05","target":"C013","edgeType":"problem_claim","data":{}},{"id":"e_problem_amplifies_cluster_124","source":"FP05","target":"CL_A","edgeType":"problem_amplifies_cluster","data":{}},{"id":"e_problem_amplifies_cluster_125","source":"FP05","target":"CL_B","edgeType":"problem_amplifies_cluster","data":{}},{"id":"e_problem_amplifies_cluster_126","source":"FP05","target":"CL_C","edgeType":"problem_amplifies_cluster","data":{}},{"id":"e_cluster_feeds_problem_127","source":"CL_A","target":"FP04","edgeType":"cluster_feeds_problem","data":{}},{"id":"e_cluster_feeds_problem_128","source":"CL_C","target":"FP04","edgeType":"cluster_feeds_problem","data":{}},{"id":"e_cluster_feeds_problem_129","source":"CL_A","target":"FP08","edgeType":"cluster_feeds_problem","data":{}},{"id":"e_cluster_feeds_problem_130","source":"CL_B","target":"FP08","edgeType":"cluster_feeds_problem","data":{}},{"id":"e_meta_challenge_cluster_131","source":"MC1","target":"CL_A","edgeType":"meta_challenge_cluster","data":{}},{"id":"e_meta_challenge_cluster_132","source":"MC1","target":"CL_B","edgeType":"meta_challenge_cluster","data":{}},{"id":"e_meta_challenge_cluster_133","source":"MC1","target":"CL_C","edgeType":"meta_challenge_cluster","data":{}},{"id":"e_meta_challenge_model_favours_134","source":"MC1","target":"M2","edgeType":"meta_challenge_model_favours","data":{"subType":"favours"}},{"id":"e_meta_challenge_model_favours_135","source":"MC1","target":"M1","edgeType":"meta_challenge_model_favours","data":{"subType":"favours"}},{"id":"e_meta_challenge_model_favours_136","source":"MC1","target":"M6","edgeType":"meta_challenge_model_favours","data":{"subType":"favours"}},{"id":"e_meta_challenge_model_disfavours_137","source":"MC1","target":"M7","edgeType":"meta_challenge_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_meta_challenge_model_disfavours_138","source":"MC1","target":"M8","edgeType":"meta_challenge_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_meta_challenge_claim_139","source":"MC1","target":"C022","edgeType":"meta_challenge_claim","data":{}},{"id":"e_meta_challenge_claim_140","source":"MC1","target":"C024","edgeType":"meta_challenge_claim","data":{}},{"id":"e_meta_challenge_claim_141","source":"MC1","target":"C025","edgeType":"meta_challenge_claim","data":{}},{"id":"e_meta_challenge_amplifies_142","source":"MC1","target":"MC2","edgeType":"meta_challenge_amplifies","data":{}},{"id":"e_meta_challenge_amplifies_143","source":"MC1","target":"MC3","edgeType":"meta_challenge_amplifies","data":{}},{"id":"e_meta_challenge_amplifies_144","source":"MC1","target":"MC5","edgeType":"meta_challenge_amplifies","data":{}},{"id":"e_meta_challenge_cluster_145","source":"MC2","target":"CL_A","edgeType":"meta_challenge_cluster","data":{}},{"id":"e_meta_challenge_cluster_146","source":"MC2","target":"CL_B","edgeType":"meta_challenge_cluster","data":{}},{"id":"e_meta_challenge_cluster_147","source":"MC2","target":"CL_C","edgeType":"meta_challenge_cluster","data":{}},{"id":"e_meta_challenge_model_favours_148","source":"MC2","target":"M2","edgeType":"meta_challenge_model_favours","data":{"subType":"favours"}},{"id":"e_meta_challenge_model_favours_149","source":"MC2","target":"M1","edgeType":"meta_challenge_model_favours","data":{"subType":"favours"}},{"id":"e_meta_challenge_model_favours_150","source":"MC2","target":"M6","edgeType":"meta_challenge_model_favours","data":{"subType":"favours"}},{"id":"e_meta_challenge_model_disfavours_151","source":"MC2","target":"M7","edgeType":"meta_challenge_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_meta_challenge_model_disfavours_152","source":"MC2","target":"M8","edgeType":"meta_challenge_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_meta_challenge_model_disfavours_153","source":"MC2","target":"M5","edgeType":"meta_challenge_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_meta_challenge_claim_154","source":"MC2","target":"C019","edgeType":"meta_challenge_claim","data":{}},{"id":"e_meta_challenge_claim_155","source":"MC2","target":"C025","edgeType":"meta_challenge_claim","data":{}},{"id":"e_meta_challenge_amplifies_156","source":"MC2","target":"MC3","edgeType":"meta_challenge_amplifies","data":{}},{"id":"e_meta_challenge_cluster_157","source":"MC3","target":"CL_A","edgeType":"meta_challenge_cluster","data":{}},{"id":"e_meta_challenge_cluster_158","source":"MC3","target":"CL_B","edgeType":"meta_challenge_cluster","data":{}},{"id":"e_meta_challenge_cluster_159","source":"MC3","target":"CL_C","edgeType":"meta_challenge_cluster","data":{}},{"id":"e_meta_challenge_model_favours_160","source":"MC3","target":"M2","edgeType":"meta_challenge_model_favours","data":{"subType":"favours"}},{"id":"e_meta_challenge_model_favours_161","source":"MC3","target":"M1","edgeType":"meta_challenge_model_favours","data":{"subType":"favours"}},{"id":"e_meta_challenge_model_disfavours_162","source":"MC3","target":"M7","edgeType":"meta_challenge_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_meta_challenge_model_disfavours_163","source":"MC3","target":"M5","edgeType":"meta_challenge_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_meta_challenge_claim_164","source":"MC3","target":"C020","edgeType":"meta_challenge_claim","data":{}},{"id":"e_meta_challenge_claim_165","source":"MC3","target":"C021","edgeType":"meta_challenge_claim","data":{}},{"id":"e_meta_challenge_claim_166","source":"MC3","target":"C022","edgeType":"meta_challenge_claim","data":{}},{"id":"e_meta_challenge_cluster_167","source":"MC4","target":"CL_A","edgeType":"meta_challenge_cluster","data":{}},{"id":"e_meta_challenge_cluster_168","source":"MC4","target":"CL_B","edgeType":"meta_challenge_cluster","data":{}},{"id":"e_meta_challenge_cluster_169","source":"MC4","target":"CL_C","edgeType":"meta_challenge_cluster","data":{}},{"id":"e_meta_challenge_model_favours_170","source":"MC4","target":"M2","edgeType":"meta_challenge_model_favours","data":{"subType":"favours"}},{"id":"e_meta_challenge_model_favours_171","source":"MC4","target":"M1","edgeType":"meta_challenge_model_favours","data":{"subType":"favours"}},{"id":"e_meta_challenge_model_favours_172","source":"MC4","target":"M6","edgeType":"meta_challenge_model_favours","data":{"subType":"favours"}},{"id":"e_meta_challenge_model_disfavours_173","source":"MC4","target":"M7","edgeType":"meta_challenge_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_meta_challenge_claim_174","source":"MC4","target":"C026","edgeType":"meta_challenge_claim","data":{}},{"id":"e_meta_challenge_amplifies_175","source":"MC4","target":"MC3","edgeType":"meta_challenge_amplifies","data":{}},{"id":"e_meta_challenge_cluster_176","source":"MC5","target":"CL_A","edgeType":"meta_challenge_cluster","data":{}},{"id":"e_meta_challenge_cluster_177","source":"MC5","target":"CL_B","edgeType":"meta_challenge_cluster","data":{}},{"id":"e_meta_challenge_model_favours_178","source":"MC5","target":"M2","edgeType":"meta_challenge_model_favours","data":{"subType":"favours"}},{"id":"e_meta_challenge_model_favours_179","source":"MC5","target":"M1","edgeType":"meta_challenge_model_favours","data":{"subType":"favours"}},{"id":"e_meta_challenge_model_disfavours_180","source":"MC5","target":"M7","edgeType":"meta_challenge_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_meta_challenge_model_disfavours_181","source":"MC5","target":"M5","edgeType":"meta_challenge_model_disfavours","data":{"subType":"disfavours"}},{"id":"e_meta_challenge_claim_182","source":"MC5","target":"C022","edgeType":"meta_challenge_claim","data":{}},{"id":"e_meta_challenge_claim_183","source":"MC5","target":"C021","edgeType":"meta_challenge_claim","data":{}},{"id":"e_meta_challenge_amplifies_184","source":"MC5","target":"MC2","edgeType":"meta_challenge_amplifies","data":{}},{"id":"e_model_claim_185","source":"M1","target":"C011","edgeType":"model_claim","data":{}},{"id":"e_model_claim_186","source":"M1","target":"C027","edgeType":"model_claim","data":{}},{"id":"e_model_problem_primary_187","source":"M1","target":"FP01","edgeType":"model_problem_primary","data":{"subType":"primary"}},{"id":"e_model_problem_secondary_188","source":"M1","target":"FP02","edgeType":"model_problem_secondary","data":{"subType":"secondary"}},{"id":"e_model_problem_secondary_189","source":"M1","target":"FP03","edgeType":"model_problem_secondary","data":{"subType":"secondary"}},{"id":"e_model_meta_vulnerability_190","source":"M1","target":"MC1","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_191","source":"M1","target":"MC2","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_192","source":"M1","target":"MC3","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_193","source":"M1","target":"MC4","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_194","source":"M1","target":"MC5","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_claim_195","source":"M2","target":"C014","edgeType":"model_claim","data":{}},{"id":"e_model_claim_196","source":"M2","target":"C015","edgeType":"model_claim","data":{}},{"id":"e_model_claim_197","source":"M2","target":"C017","edgeType":"model_claim","data":{}},{"id":"e_model_claim_198","source":"M2","target":"C018","edgeType":"model_claim","data":{}},{"id":"e_model_claim_199","source":"M2","target":"C028","edgeType":"model_claim","data":{}},{"id":"e_model_problem_primary_200","source":"M2","target":"FP07","edgeType":"model_problem_primary","data":{"subType":"primary"}},{"id":"e_model_problem_primary_201","source":"M2","target":"FP09","edgeType":"model_problem_primary","data":{"subType":"primary"}},{"id":"e_model_meta_vulnerability_202","source":"M2","target":"MC1","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_203","source":"M2","target":"MC2","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_204","source":"M2","target":"MC3","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_205","source":"M2","target":"MC4","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_206","source":"M2","target":"MC5","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_problem_primary_207","source":"M3","target":"FP11","edgeType":"model_problem_primary","data":{"subType":"primary"}},{"id":"e_model_meta_vulnerability_208","source":"M3","target":"MC1","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_209","source":"M3","target":"MC2","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_210","source":"M3","target":"MC3","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_211","source":"M3","target":"MC4","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_212","source":"M3","target":"MC5","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_claim_213","source":"M4","target":"C012","edgeType":"model_claim","data":{}},{"id":"e_model_claim_214","source":"M4","target":"C013","edgeType":"model_claim","data":{}},{"id":"e_model_problem_primary_215","source":"M4","target":"FP05","edgeType":"model_problem_primary","data":{"subType":"primary"}},{"id":"e_model_problem_secondary_216","source":"M4","target":"FP01","edgeType":"model_problem_secondary","data":{"subType":"secondary"}},{"id":"e_model_meta_vulnerability_217","source":"M4","target":"MC1","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_218","source":"M4","target":"MC2","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_219","source":"M4","target":"MC3","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_220","source":"M4","target":"MC4","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_221","source":"M4","target":"MC5","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_claim_222","source":"M5","target":"C008","edgeType":"model_claim","data":{}},{"id":"e_model_claim_223","source":"M5","target":"C009","edgeType":"model_claim","data":{}},{"id":"e_model_problem_primary_224","source":"M5","target":"FP03","edgeType":"model_problem_primary","data":{"subType":"primary"}},{"id":"e_model_meta_vulnerability_225","source":"M5","target":"MC1","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_226","source":"M5","target":"MC2","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_227","source":"M5","target":"MC3","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_228","source":"M5","target":"MC4","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_229","source":"M5","target":"MC5","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_claim_230","source":"M6","target":"C013","edgeType":"model_claim","data":{}},{"id":"e_model_problem_primary_231","source":"M6","target":"FP08","edgeType":"model_problem_primary","data":{"subType":"primary"}},{"id":"e_model_meta_vulnerability_232","source":"M6","target":"MC1","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_233","source":"M6","target":"MC2","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_234","source":"M6","target":"MC3","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_235","source":"M6","target":"MC4","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_236","source":"M6","target":"MC5","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_claim_237","source":"M7","target":"C029","edgeType":"model_claim","data":{}},{"id":"e_model_claim_238","source":"M7","target":"C030","edgeType":"model_claim","data":{}},{"id":"e_model_claim_239","source":"M7","target":"C031","edgeType":"model_claim","data":{}},{"id":"e_model_problem_primary_240","source":"M7","target":"FP01","edgeType":"model_problem_primary","data":{"subType":"primary"}},{"id":"e_model_problem_primary_241","source":"M7","target":"FP03","edgeType":"model_problem_primary","data":{"subType":"primary"}},{"id":"e_model_problem_primary_242","source":"M7","target":"FP05","edgeType":"model_problem_primary","data":{"subType":"primary"}},{"id":"e_model_meta_vulnerability_243","source":"M7","target":"MC1","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_244","source":"M7","target":"MC2","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_245","source":"M7","target":"MC3","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_246","source":"M7","target":"MC4","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_247","source":"M7","target":"MC5","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_claim_248","source":"M8","target":"C011","edgeType":"model_claim","data":{}},{"id":"e_model_problem_primary_249","source":"M8","target":"FP01","edgeType":"model_problem_primary","data":{"subType":"primary"}},{"id":"e_model_problem_primary_250","source":"M8","target":"FP11","edgeType":"model_problem_primary","data":{"subType":"primary"}},{"id":"e_model_meta_vulnerability_251","source":"M8","target":"MC1","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_252","source":"M8","target":"MC2","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_253","source":"M8","target":"MC3","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_254","source":"M8","target":"MC4","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_model_meta_vulnerability_255","source":"M8","target":"MC5","edgeType":"model_meta_vulnerability","data":{}},{"id":"e_foundation_model_required_256","source":"FDN01","target":"M1","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_257","source":"FDN01","target":"M2","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_258","source":"FDN01","target":"M4","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_259","source":"FDN01","target":"M5","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_260","source":"FDN01","target":"M6","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_261","source":"FDN01","target":"M7","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_optional_262","source":"FDN01","target":"M3","edgeType":"foundation_model_optional","data":{"subType":"optional"}},{"id":"e_foundation_model_optional_263","source":"FDN01","target":"M8","edgeType":"foundation_model_optional","data":{"subType":"optional"}},{"id":"e_foundation_technology_264","source":"FDN01","target":"TECH_01","edgeType":"foundation_technology","data":{}},{"id":"e_foundation_model_required_265","source":"FDN02","target":"M1","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_266","source":"FDN02","target":"M4","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_267","source":"FDN02","target":"M6","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_268","source":"FDN02","target":"M7","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_optional_269","source":"FDN02","target":"M2","edgeType":"foundation_model_optional","data":{"subType":"optional"}},{"id":"e_foundation_model_optional_270","source":"FDN02","target":"M8","edgeType":"foundation_model_optional","data":{"subType":"optional"}},{"id":"e_foundation_technology_271","source":"FDN02","target":"TECH_02","edgeType":"foundation_technology","data":{}},{"id":"e_foundation_model_required_272","source":"FDN03","target":"M1","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_273","source":"FDN03","target":"M2","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_274","source":"FDN03","target":"M3","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_275","source":"FDN03","target":"M4","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_276","source":"FDN03","target":"M5","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_277","source":"FDN03","target":"M6","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_278","source":"FDN03","target":"M7","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_279","source":"FDN03","target":"M8","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_280","source":"FDN04","target":"M1","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_281","source":"FDN04","target":"M2","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_282","source":"FDN04","target":"M4","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_283","source":"FDN04","target":"M5","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_284","source":"FDN04","target":"M6","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_285","source":"FDN04","target":"M7","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_technology_286","source":"FDN04","target":"TECH_09","edgeType":"foundation_technology","data":{}},{"id":"e_foundation_model_required_287","source":"FDN05","target":"M1","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_288","source":"FDN05","target":"M2","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_289","source":"FDN05","target":"M6","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_optional_290","source":"FDN05","target":"M3","edgeType":"foundation_model_optional","data":{"subType":"optional"}},{"id":"e_foundation_model_optional_291","source":"FDN05","target":"M4","edgeType":"foundation_model_optional","data":{"subType":"optional"}},{"id":"e_foundation_model_optional_292","source":"FDN05","target":"M5","edgeType":"foundation_model_optional","data":{"subType":"optional"}},{"id":"e_foundation_model_optional_293","source":"FDN05","target":"M7","edgeType":"foundation_model_optional","data":{"subType":"optional"}},{"id":"e_foundation_model_optional_294","source":"FDN05","target":"M8","edgeType":"foundation_model_optional","data":{"subType":"optional"}},{"id":"e_foundation_technology_295","source":"FDN05","target":"TECH_04","edgeType":"foundation_technology","data":{}},{"id":"e_foundation_model_required_296","source":"FDN06","target":"M1","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_297","source":"FDN06","target":"M2","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_298","source":"FDN06","target":"M4","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_299","source":"FDN06","target":"M6","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_optional_300","source":"FDN06","target":"M3","edgeType":"foundation_model_optional","data":{"subType":"optional"}},{"id":"e_foundation_model_optional_301","source":"FDN06","target":"M5","edgeType":"foundation_model_optional","data":{"subType":"optional"}},{"id":"e_foundation_model_optional_302","source":"FDN06","target":"M7","edgeType":"foundation_model_optional","data":{"subType":"optional"}},{"id":"e_foundation_model_optional_303","source":"FDN06","target":"M8","edgeType":"foundation_model_optional","data":{"subType":"optional"}},{"id":"e_foundation_technology_304","source":"FDN06","target":"TECH_03","edgeType":"foundation_technology","data":{}},{"id":"e_foundation_model_required_305","source":"FDN07","target":"M2","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_required_306","source":"FDN07","target":"M6","edgeType":"foundation_model_required","data":{"subType":"required"}},{"id":"e_foundation_model_optional_307","source":"FDN07","target":"M4","edgeType":"foundation_model_optional","data":{"subType":"optional"}},{"id":"e_foundation_model_optional_308","source":"FDN07","target":"M5","edgeType":"foundation_model_optional","data":{"subType":"optional"}},{"id":"e_foundation_technology_309","source":"FDN07","target":"TECH_05","edgeType":"foundation_technology","data":{}},{"id":"e_technology_foundation_310","source":"TECH_01","target":"FDN01","edgeType":"technology_foundation","data":{}},{"id":"e_technology_model_required_311","source":"TECH_01","target":"M1","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_312","source":"TECH_01","target":"M2","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_313","source":"TECH_01","target":"M4","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_314","source":"TECH_01","target":"M5","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_315","source":"TECH_01","target":"M6","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_316","source":"TECH_01","target":"M7","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_optional_317","source":"TECH_01","target":"M3","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_model_optional_318","source":"TECH_01","target":"M8","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_foundation_319","source":"TECH_02","target":"FDN02","edgeType":"technology_foundation","data":{}},{"id":"e_technology_model_required_320","source":"TECH_02","target":"M1","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_321","source":"TECH_02","target":"M4","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_322","source":"TECH_02","target":"M6","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_323","source":"TECH_02","target":"M7","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_optional_324","source":"TECH_02","target":"M2","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_model_optional_325","source":"TECH_02","target":"M8","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_claim_326","source":"TECH_02","target":"C012","edgeType":"technology_claim","data":{}},{"id":"e_technology_claim_327","source":"TECH_02","target":"C013","edgeType":"technology_claim","data":{}},{"id":"e_technology_foundation_328","source":"TECH_03","target":"FDN06","edgeType":"technology_foundation","data":{}},{"id":"e_technology_model_required_329","source":"TECH_03","target":"M1","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_330","source":"TECH_03","target":"M2","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_331","source":"TECH_03","target":"M4","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_332","source":"TECH_03","target":"M6","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_optional_333","source":"TECH_03","target":"M3","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_model_optional_334","source":"TECH_03","target":"M5","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_model_optional_335","source":"TECH_03","target":"M7","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_model_optional_336","source":"TECH_03","target":"M8","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_foundation_337","source":"TECH_04","target":"FDN05","edgeType":"technology_foundation","data":{}},{"id":"e_technology_model_required_338","source":"TECH_04","target":"M1","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_339","source":"TECH_04","target":"M2","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_340","source":"TECH_04","target":"M6","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_optional_341","source":"TECH_04","target":"M3","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_model_optional_342","source":"TECH_04","target":"M4","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_model_optional_343","source":"TECH_04","target":"M5","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_model_optional_344","source":"TECH_04","target":"M7","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_model_optional_345","source":"TECH_04","target":"M8","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_foundation_346","source":"TECH_05","target":"FDN07","edgeType":"technology_foundation","data":{}},{"id":"e_technology_model_required_347","source":"TECH_05","target":"M2","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_348","source":"TECH_05","target":"M6","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_optional_349","source":"TECH_05","target":"M4","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_model_optional_350","source":"TECH_05","target":"M5","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_claim_351","source":"TECH_05","target":"C014","edgeType":"technology_claim","data":{}},{"id":"e_technology_claim_352","source":"TECH_05","target":"C015","edgeType":"technology_claim","data":{}},{"id":"e_technology_claim_353","source":"TECH_05","target":"C017","edgeType":"technology_claim","data":{}},{"id":"e_technology_claim_354","source":"TECH_05","target":"C018","edgeType":"technology_claim","data":{}},{"id":"e_technology_claim_355","source":"TECH_05","target":"C028","edgeType":"technology_claim","data":{}},{"id":"e_technology_model_required_356","source":"TECH_06","target":"M1","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_optional_357","source":"TECH_06","target":"M4","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_model_optional_358","source":"TECH_06","target":"M5","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_claim_359","source":"TECH_06","target":"C011","edgeType":"technology_claim","data":{}},{"id":"e_technology_claim_360","source":"TECH_06","target":"C027","edgeType":"technology_claim","data":{}},{"id":"e_technology_model_required_361","source":"TECH_07","target":"M5","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_optional_362","source":"TECH_07","target":"M1","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_model_optional_363","source":"TECH_07","target":"M4","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_claim_364","source":"TECH_07","target":"C008","edgeType":"technology_claim","data":{}},{"id":"e_technology_claim_365","source":"TECH_07","target":"C009","edgeType":"technology_claim","data":{}},{"id":"e_technology_model_required_366","source":"TECH_08","target":"M6","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_367","source":"TECH_08","target":"M8","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_optional_368","source":"TECH_08","target":"M4","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_technology_claim_369","source":"TECH_08","target":"C011","edgeType":"technology_claim","data":{}},{"id":"e_technology_claim_370","source":"TECH_08","target":"C013","edgeType":"technology_claim","data":{}},{"id":"e_technology_foundation_371","source":"TECH_09","target":"FDN04","edgeType":"technology_foundation","data":{}},{"id":"e_technology_model_required_372","source":"TECH_09","target":"M1","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_373","source":"TECH_09","target":"M2","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_374","source":"TECH_09","target":"M4","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_375","source":"TECH_09","target":"M5","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_376","source":"TECH_09","target":"M6","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_required_377","source":"TECH_09","target":"M7","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_claim_378","source":"TECH_09","target":"C022","edgeType":"technology_claim","data":{}},{"id":"e_technology_claim_379","source":"TECH_09","target":"C024","edgeType":"technology_claim","data":{}},{"id":"e_technology_claim_380","source":"TECH_09","target":"C025","edgeType":"technology_claim","data":{}},{"id":"e_technology_model_required_381","source":"TECH_10","target":"M3","edgeType":"technology_model_required","data":{"subType":"required"}},{"id":"e_technology_model_optional_382","source":"TECH_10","target":"M2","edgeType":"technology_model_optional","data":{"subType":"optional"}},{"id":"e_claim_source_383","source":"C001","target":"Fuermaier_2021","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_384","source":"C001","target":"FP01","edgeType":"claim_supports","data":{}},{"id":"e_claim_supports_385","source":"C001","target":"FP02","edgeType":"claim_supports","data":{}},{"id":"e_claim_supports_386","source":"C001","target":"FP03","edgeType":"claim_supports","data":{}},{"id":"e_claim_supports_387","source":"C001","target":"FP05","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_388","source":"C002","target":"deGraaf_2008","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_389","source":"C002","target":"FP02","edgeType":"claim_supports","data":{}},{"id":"e_claim_supports_390","source":"C002","target":"FP03","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_391","source":"C003","target":"Swedish_Population_2021","edgeType":"claim_source","data":{}},{"id":"e_claim_source_392","source":"C003","target":"Norwegian_Employment_Study","edgeType":"claim_source","data":{}},{"id":"e_claim_challenged_by_393","source":"C003","target":"C004","edgeType":"claim_challenged_by","data":{}},{"id":"e_claim_source_394","source":"C004","target":"Fuermaier_2021","edgeType":"claim_source","data":{}},{"id":"e_claim_source_395","source":"C004","target":"Barkley_Murphy_2010","edgeType":"claim_source","data":{}},{"id":"e_claim_challenged_by_396","source":"C004","target":"C005","edgeType":"claim_challenged_by","data":{}},{"id":"e_claim_source_397","source":"C005","target":"Barkley_Murphy_2010","edgeType":"claim_source","data":{}},{"id":"e_claim_source_398","source":"C006","target":"Norwegian_Employment_Study","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_399","source":"C006","target":"MECH05","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_400","source":"C007","target":"Barkley_Murphy_2010","edgeType":"claim_source","data":{}},{"id":"e_claim_source_401","source":"C008","target":"Burnout_Mediation_2024","edgeType":"claim_source","data":{}},{"id":"e_claim_source_402","source":"C008","target":"Fuermaier_2021","edgeType":"claim_source","data":{}},{"id":"e_claim_source_403","source":"C008","target":"P2A_Community_Reports","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_404","source":"C008","target":"MECH01","edgeType":"claim_supports","data":{}},{"id":"e_claim_depends_on_405","source":"C008","target":"C009","edgeType":"claim_depends_on","data":{}},{"id":"e_claim_source_406","source":"C009","target":"Burnout_Mediation_2024","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_407","source":"C009","target":"MECH01","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_408","source":"C010","target":"ADHD_Coaching_Survey","edgeType":"claim_source","data":{}},{"id":"e_claim_source_409","source":"C010","target":"Burnout_Mediation_2024","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_410","source":"C010","target":"MECH01","edgeType":"claim_supports","data":{}},{"id":"e_claim_depends_on_411","source":"C010","target":"C009","edgeType":"claim_depends_on","data":{}},{"id":"e_claim_source_412","source":"C011","target":"P2A_Community_Reports","edgeType":"claim_source","data":{}},{"id":"e_claim_source_413","source":"C011","target":"ADDitude_Poll","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_414","source":"C011","target":"MECH02","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_415","source":"C012","target":"P2A_Community_Reports","edgeType":"claim_source","data":{}},{"id":"e_claim_source_416","source":"C012","target":"ADHD_Coaching_Survey","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_417","source":"C012","target":"MECH02","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_418","source":"C013","target":"P2A_Community_Reports","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_419","source":"C013","target":"MECH02","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_420","source":"C014","target":"Alderson_2020","edgeType":"claim_source","data":{}},{"id":"e_claim_source_421","source":"C014","target":"Missonnier_2013","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_422","source":"C014","target":"MECH04","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_423","source":"C015","target":"Missonnier_2013","edgeType":"claim_source","data":{}},{"id":"e_claim_source_424","source":"C015","target":"Bonilla_2020","edgeType":"claim_source","data":{}},{"id":"e_claim_source_425","source":"C015","target":"P2A_Community_Reports","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_426","source":"C015","target":"MECH04","edgeType":"claim_supports","data":{}},{"id":"e_claim_depends_on_427","source":"C015","target":"C014","edgeType":"claim_depends_on","data":{}},{"id":"e_claim_source_428","source":"C016","target":"Fuermaier_2016","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_429","source":"C016","target":"MECH04","edgeType":"claim_supports","data":{}},{"id":"e_claim_supports_430","source":"C016","target":"MECH03","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_431","source":"C017","target":"Fuermaier_2013","edgeType":"claim_source","data":{}},{"id":"e_claim_source_432","source":"C017","target":"P2A_Community_Reports","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_433","source":"C017","target":"MECH03","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_434","source":"C018","target":"Fuermaier_2013","edgeType":"claim_source","data":{}},{"id":"e_claim_source_435","source":"C018","target":"P2A_Community_Reports","edgeType":"claim_source","data":{}},{"id":"e_claim_source_436","source":"C019","target":"P2A_Community_Reports","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_437","source":"C019","target":"MECH03","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_438","source":"C020","target":"ADHD_Coaching_Survey","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_439","source":"C020","target":"MECH06","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_440","source":"C021","target":"P2A_Community_Reports","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_441","source":"C021","target":"MECH06","edgeType":"claim_supports","data":{}},{"id":"e_claim_supports_442","source":"C021","target":"MECH02","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_443","source":"C022","target":"P2A_Community_Reports","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_444","source":"C022","target":"MC1","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_445","source":"C023","target":"P2A_Community_Reports","edgeType":"claim_source","data":{}},{"id":"e_claim_source_446","source":"C023","target":"ADHD_Coaching_Survey","edgeType":"claim_source","data":{}},{"id":"e_claim_source_447","source":"C023","target":"Medication_Adherence_2024","edgeType":"claim_source","data":{}},{"id":"e_claim_source_448","source":"C023","target":"Medication_Discontinuation_2024","edgeType":"claim_source","data":{}},{"id":"e_claim_source_449","source":"C023","target":"Digital_Intervention_Dropout","edgeType":"claim_source","data":{}},{"id":"e_claim_source_450","source":"C024","target":"Medication_Adherence_2024","edgeType":"claim_source","data":{}},{"id":"e_claim_source_451","source":"C024","target":"Medication_Discontinuation_2024","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_452","source":"C024","target":"MC1","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_453","source":"C025","target":"Digital_Intervention_Dropout","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_454","source":"C025","target":"MC1","edgeType":"claim_supports","data":{}},{"id":"e_claim_supports_455","source":"C025","target":"MC2","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_456","source":"C026","target":"ADHD_Coaching_Survey","edgeType":"claim_source","data":{}},{"id":"e_claim_supports_457","source":"C026","target":"MC4","edgeType":"claim_supports","data":{}},{"id":"e_claim_source_458","source":"C027","target":"P2A_Community_Reports","edgeType":"claim_source","data":{}},{"id":"e_claim_source_459","source":"C028","target":"P2A_Community_Reports","edgeType":"claim_source","data":{}},{"id":"e_claim_source_460","source":"C028","target":"Fuermaier_2013","edgeType":"claim_source","data":{}},{"id":"e_claim_source_461","source":"C029","target":"ADHD_Coaching_Survey","edgeType":"claim_source","data":{}},{"id":"e_claim_source_462","source":"C029","target":"P2A_Community_Reports","edgeType":"claim_source","data":{}},{"id":"e_claim_challenged_by_463","source":"C029","target":"C030","edgeType":"claim_challenged_by","data":{}},{"id":"e_claim_source_464","source":"C030","target":"Lauder_2024","edgeType":"claim_source","data":{}},{"id":"e_claim_source_465","source":"C031","target":"WorkMAP_RCT","edgeType":"claim_source","data":{}},{"id":"e_claim_source_466","source":"C032","target":"Fuermaier_2021","edgeType":"claim_source","data":{}},{"id":"e_claim_source_467","source":"C032","target":"P2A_Community_Reports","edgeType":"claim_source","data":{}},{"id":"e_claim_source_468","source":"C032","target":"ADHD_Coaching_Survey","edgeType":"claim_source","data":{}},{"id":"e_claim_source_469","source":"C032","target":"Lauder_2024","edgeType":"claim_source","data":{}},{"id":"e_claim_source_470","source":"C033","target":"Fuermaier_2021","edgeType":"claim_source","data":{}},{"id":"e_claim_source_471","source":"C033","target":"Norwegian_Employment_Study","edgeType":"claim_source","data":{}},{"id":"e_claim_source_472","source":"C034","target":"P2A_Community_Reports","edgeType":"claim_source","data":{}},{"id":"e_claim_source_473","source":"C035","target":"ADHD_Coaching_Survey","edgeType":"claim_source","data":{}},{"id":"e_implication_claim_474","source":"IMP01","target":"C032","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_475","source":"IMP02","target":"C019","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_476","source":"IMP02","target":"C022","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_477","source":"IMP02","target":"C025","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_478","source":"IMP02","target":"C027","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_479","source":"IMP03","target":"C022","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_480","source":"IMP03","target":"C024","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_481","source":"IMP03","target":"C028","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_482","source":"IMP04","target":"C020","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_483","source":"IMP04","target":"C022","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_484","source":"IMP04","target":"C026","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_485","source":"IMP05","target":"C019","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_486","source":"IMP05","target":"C025","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_487","source":"IMP06","target":"C029","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_488","source":"IMP06","target":"C030","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_489","source":"IMP06","target":"C031","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_490","source":"IMP07","target":"C014","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_491","source":"IMP07","target":"C015","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_492","source":"IMP07","target":"C017","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_493","source":"IMP07","target":"C028","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_494","source":"IMP08","target":"C024","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_495","source":"IMP08","target":"C025","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_496","source":"IMP10","target":"C014","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_497","source":"IMP10","target":"C015","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_498","source":"IMP10","target":"C017","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_499","source":"IMP10","target":"C018","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_500","source":"IMP10","target":"C028","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_501","source":"IMP11","target":"C011","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_502","source":"IMP11","target":"C012","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_503","source":"IMP11","target":"C027","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_504","source":"IMP12","target":"C033","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_505","source":"IMP12","target":"C035","edgeType":"implication_claim","data":{}},{"id":"e_implication_claim_506","source":"IMP13","target":"C034","edgeType":"implication_claim","data":{}},{"id":"compat_0","source":"CL_A","target":"M1","edgeType":"compatibility_rating","data":{"rating":"S","label":"S compatibility"}},{"id":"compat_1","source":"CL_A","target":"M2","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_2","source":"CL_A","target":"M3","edgeType":"compatibility_rating","data":{"rating":"X","label":"X compatibility"}},{"id":"compat_3","source":"CL_A","target":"M4","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_4","source":"CL_A","target":"M5","edgeType":"compatibility_rating","data":{"rating":"S","label":"S compatibility"}},{"id":"compat_5","source":"CL_A","target":"M6","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_6","source":"CL_A","target":"M7","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_7","source":"CL_A","target":"M8","edgeType":"compatibility_rating","data":{"rating":"X","label":"X compatibility"}},{"id":"compat_8","source":"CL_B","target":"M1","edgeType":"compatibility_rating","data":{"rating":"S","label":"S compatibility"}},{"id":"compat_9","source":"CL_B","target":"M2","edgeType":"compatibility_rating","data":{"rating":"X","label":"X compatibility"}},{"id":"compat_10","source":"CL_B","target":"M3","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_11","source":"CL_B","target":"M4","edgeType":"compatibility_rating","data":{"rating":"S","label":"S compatibility"}},{"id":"compat_12","source":"CL_B","target":"M5","edgeType":"compatibility_rating","data":{"rating":"X","label":"X compatibility"}},{"id":"compat_13","source":"CL_B","target":"M6","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_14","source":"CL_B","target":"M7","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_15","source":"CL_B","target":"M8","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_16","source":"CL_C","target":"M1","edgeType":"compatibility_rating","data":{"rating":"S","label":"S compatibility"}},{"id":"compat_17","source":"CL_C","target":"M2","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_18","source":"CL_C","target":"M3","edgeType":"compatibility_rating","data":{"rating":"X","label":"X compatibility"}},{"id":"compat_19","source":"CL_C","target":"M4","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_20","source":"CL_C","target":"M5","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_21","source":"CL_C","target":"M6","edgeType":"compatibility_rating","data":{"rating":"X","label":"X compatibility"}},{"id":"compat_22","source":"CL_C","target":"M7","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_23","source":"CL_C","target":"M8","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_24","source":"FP05","target":"M1","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_25","source":"FP05","target":"M2","edgeType":"compatibility_rating","data":{"rating":"X","label":"X compatibility"}},{"id":"compat_26","source":"FP05","target":"M3","edgeType":"compatibility_rating","data":{"rating":"X","label":"X compatibility"}},{"id":"compat_27","source":"FP05","target":"M4","edgeType":"compatibility_rating","data":{"rating":"S","label":"S compatibility"}},{"id":"compat_28","source":"FP05","target":"M5","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_29","source":"FP05","target":"M6","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_30","source":"FP05","target":"M7","edgeType":"compatibility_rating","data":{"rating":"S","label":"S compatibility"}},{"id":"compat_31","source":"FP05","target":"M8","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_32","source":"FP07","target":"M1","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_33","source":"FP07","target":"M2","edgeType":"compatibility_rating","data":{"rating":"S","label":"S compatibility"}},{"id":"compat_34","source":"FP07","target":"M3","edgeType":"compatibility_rating","data":{"rating":"X","label":"X compatibility"}},{"id":"compat_35","source":"FP07","target":"M4","edgeType":"compatibility_rating","data":{"rating":"X","label":"X compatibility"}},{"id":"compat_36","source":"FP07","target":"M5","edgeType":"compatibility_rating","data":{"rating":"X","label":"X compatibility"}},{"id":"compat_37","source":"FP07","target":"M6","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_38","source":"FP07","target":"M7","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_39","source":"FP07","target":"M8","edgeType":"compatibility_rating","data":{"rating":"X","label":"X compatibility"}},{"id":"compat_40","source":"FP09","target":"M1","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_41","source":"FP09","target":"M2","edgeType":"compatibility_rating","data":{"rating":"S","label":"S compatibility"}},{"id":"compat_42","source":"FP09","target":"M3","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_43","source":"FP09","target":"M4","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_44","source":"FP09","target":"M5","edgeType":"compatibility_rating","data":{"rating":"X","label":"X compatibility"}},{"id":"compat_45","source":"FP09","target":"M6","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_46","source":"FP09","target":"M7","edgeType":"compatibility_rating","data":{"rating":"P","label":"P compatibility"}},{"id":"compat_47","source":"FP09","target":"M8","edgeType":"compatibility_rating","data":{"rating":"X","label":"X compatibility"}},{"id":"compat_vuln_48","source":"M1","target":"MC1","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_49","source":"M1","target":"MC2","edgeType":"vulnerability_rating","data":{"rating":"L","label":"L vulnerability"}},{"id":"compat_vuln_50","source":"M1","target":"MC3","edgeType":"vulnerability_rating","data":{"rating":"L","label":"L vulnerability"}},{"id":"compat_vuln_51","source":"M1","target":"MC4","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_52","source":"M1","target":"MC5","edgeType":"vulnerability_rating","data":{"rating":"H","label":"H vulnerability"}},{"id":"compat_vuln_53","source":"M2","target":"MC1","edgeType":"vulnerability_rating","data":{"rating":"L","label":"L vulnerability"}},{"id":"compat_vuln_54","source":"M2","target":"MC2","edgeType":"vulnerability_rating","data":{"rating":"L","label":"L vulnerability"}},{"id":"compat_vuln_55","source":"M2","target":"MC3","edgeType":"vulnerability_rating","data":{"rating":"L","label":"L vulnerability"}},{"id":"compat_vuln_56","source":"M2","target":"MC4","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_57","source":"M2","target":"MC5","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_58","source":"M3","target":"MC1","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_59","source":"M3","target":"MC2","edgeType":"vulnerability_rating","data":{"rating":"H","label":"H vulnerability"}},{"id":"compat_vuln_60","source":"M3","target":"MC3","edgeType":"vulnerability_rating","data":{"rating":"L","label":"L vulnerability"}},{"id":"compat_vuln_61","source":"M3","target":"MC4","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_62","source":"M3","target":"MC5","edgeType":"vulnerability_rating","data":{"rating":"L","label":"L vulnerability"}},{"id":"compat_vuln_63","source":"M4","target":"MC1","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_64","source":"M4","target":"MC2","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_65","source":"M4","target":"MC3","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_66","source":"M4","target":"MC4","edgeType":"vulnerability_rating","data":{"rating":"L","label":"L vulnerability"}},{"id":"compat_vuln_67","source":"M4","target":"MC5","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_68","source":"M5","target":"MC1","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_69","source":"M5","target":"MC2","edgeType":"vulnerability_rating","data":{"rating":"H","label":"H vulnerability"}},{"id":"compat_vuln_70","source":"M5","target":"MC3","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_71","source":"M5","target":"MC4","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_72","source":"M5","target":"MC5","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_73","source":"M6","target":"MC1","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_74","source":"M6","target":"MC2","edgeType":"vulnerability_rating","data":{"rating":"L","label":"L vulnerability"}},{"id":"compat_vuln_75","source":"M6","target":"MC3","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_76","source":"M6","target":"MC4","edgeType":"vulnerability_rating","data":{"rating":"L","label":"L vulnerability"}},{"id":"compat_vuln_77","source":"M6","target":"MC5","edgeType":"vulnerability_rating","data":{"rating":"L","label":"L vulnerability"}},{"id":"compat_vuln_78","source":"M7","target":"MC1","edgeType":"vulnerability_rating","data":{"rating":"H","label":"H vulnerability"}},{"id":"compat_vuln_79","source":"M7","target":"MC2","edgeType":"vulnerability_rating","data":{"rating":"H","label":"H vulnerability"}},{"id":"compat_vuln_80","source":"M7","target":"MC3","edgeType":"vulnerability_rating","data":{"rating":"H","label":"H vulnerability"}},{"id":"compat_vuln_81","source":"M7","target":"MC4","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_82","source":"M7","target":"MC5","edgeType":"vulnerability_rating","data":{"rating":"M","label":"M vulnerability"}},{"id":"compat_vuln_83","source":"M8","target":"MC1","edgeType":"vulnerability_rating","data":{"rating":"L","label":"L vulnerability"}},{"id":"compat_vuln_84","source":"M8","target":"MC2","edgeType":"vulnerability_rating","data":{"rating":"H","label":"H vulnerability"}},{"id":"compat_vuln_85","source":"M8","target":"MC3","edgeType":"vulnerability_rating","data":{"rating":"L","label":"L vulnerability"}},{"id":"compat_vuln_86","source":"M8","target":"MC4","edgeType":"vulnerability_rating","data":{"rating":"L","label":"L vulnerability"}},{"id":"compat_vuln_87","source":"M8","target":"MC5","edgeType":"vulnerability_rating","data":{"rating":"L","label":"L vulnerability"}}]'),zpe=[{id:"CL_A",label:"Cluster A  Time-Perception Cascade",data:{id:"CL_A",hub:"Time Estimation and Time Blindness (FP03)",members:[{problem:"Time Estimation and Time Blindness",role:"hub",evidence:`Q3 connectedness 5/5. Addressing time blindness directly reduces FP04, FP12, and partially FP08.
`},{problem:"Deadline Misses",role:"receiver",evidence:`Misjudged duration leads to insufficient time allocated. Also receives from Cluster C (focus failures).
`},{problem:"Chronic Lateness",role:"receiver",evidence:`Misjudged preparation/travel time. Direct manifestation of time-perception deficit.
`},{problem:"Long-Term Project Neglect",role:"partial receiver",evidence:`Delay discounting is a time-perception failure  distant deadlines create zero urgency because time horizon is compressed. Also receives from Cluster B (initiation).
`}],primary_mechanism:"Time Perception Distortion",causal_direction:`Single hub radiating outward. FP03 causes FP04, FP12, and partially FP08. No bidirectional causation within the cluster.
`,claims:["C008","C009","C010"],derived_from:"Our_S4"}},{id:"CL_B",label:"Cluster B  Initiation-Execution Bottleneck",data:{id:"CL_B",hub:"Task Initiation Failure (FP01)",members:[{problem:"Task Initiation Failure",role:"hub",evidence:`Q3 connectedness 4/5. Initiation barrier applied to different task types produces the two downstream problems.
`},{problem:"Long-Term Project Neglect",role:"receiver",evidence:`Initiation barrier is highest for low-urgency, low- stimulation strategic work. Also receives from Cluster A.
`},{problem:"Documentation and Administrative Paralysis",role:"receiver",evidence:`Documentation is maximally aversive to initiate  low stimulation plus high effort plus no immediate reward.
`}],primary_mechanism:"Reward and Activation Processing",causal_direction:`Single hub radiating outward. FP01 causes FP08 and FP11 through the same mechanism (activation energy exceeds capacity) applied to task types with decreasing stimulation.
`,claims:["C011","C012"],derived_from:"Our_S4"}},{id:"CL_C",label:"Cluster C  Attention-Quality Chain",data:{id:"CL_C",hub:"Inconsistent Focus (FP02)",members:[{problem:"Inconsistent Focus",role:"hub",evidence:`Q3 connectedness 4/5. Focus lapses produce both errors (FP06) and insufficient output (FP04).
`},{problem:"Attention-to-Detail Errors",role:"receiver",evidence:`Focus lapses during task execution produce errors of oversight that survive self-checking.
`},{problem:"Deadline Misses",role:"shared receiver",evidence:`Low-productivity days accumulate into insufficient output by deadline. Also receives from Cluster A.
`}],primary_mechanism:"Attention Allocation Dysfunction",causal_direction:`Single hub radiating outward. FP02 causes FP06 directly and FP04 through accumulated productivity loss. FP04 is a convergence point receiving from both Cluster A and C.
`,claims:["C001","C002","C006"],derived_from:"Our_S4"}}],jpe={canvasNodes:Qpe,offCanvasEntities:Upe,edges:Hpe,combos:zpe},oQ=r=>{let e;const t=new Set,n=(l,c)=>{const u=typeof l=="function"?l(e):l;if(!Object.is(u,e)){const h=e;e=c??(typeof u!="object"||u===null)?u:Object.assign({},e,u),t.forEach(g=>g(e,h))}},i=()=>e,o={setState:n,getState:i,getInitialState:()=>A,subscribe:l=>(t.add(l),()=>t.delete(l))},A=e=r(n,i,o);return o},Kpe=(r=>r?oQ(r):oQ),Gpe=r=>r;function Vpe(r,e=Gpe){const t=Pf.useSyncExternalStore(r.subscribe,Pf.useCallback(()=>e(r.getState()),[r,e]),Pf.useCallback(()=>e(r.getInitialState()),[r,e]));return Pf.useDebugValue(t),t}const AQ=r=>{const e=Kpe(r),t=n=>Vpe(e,n);return Object.assign(t,e),t},qpe=(r=>r?AQ(r):AQ),br=qpe((r,e)=>({graphData:null,selectedNodeId:null,hoveredNodeId:null,visibleEntityTypes:new Set(["problem","mechanism","engagement_model","meta_challenge","foundation","technology","implication"]),visibleClusters:new Set(["CL_A","CL_B","CL_C"]),activePreset:"default",setGraphData:t=>r({graphData:t}),setSelectedNode:t=>r({selectedNodeId:t}),setHoveredNode:t=>r({hoveredNodeId:t}),toggleEntityType:t=>r(n=>{const i=new Set(n.visibleEntityTypes);return i.has(t)?i.delete(t):i.add(t),{visibleEntityTypes:i}}),toggleCluster:t=>r(n=>{const i=new Set(n.visibleClusters);return i.has(t)?i.delete(t):i.add(t),{visibleClusters:i}}),setActivePreset:t=>r({activePreset:t}),getNodeById:t=>{const n=e().graphData;if(!n)return;const i=n.canvasNodes.find(a=>a.id===t);return i||n.offCanvasEntities.find(a=>a.id===t)},getEdgesForNode:t=>{const n=e().graphData;return n?n.edges.filter(i=>i.source===t||i.target===t):[]},getConnectedNodes:t=>e().graphData?e().getEdgesForNode(t).map(s=>s.source===t?s.target:s.source).map(s=>e().getNodeById(s)).filter(s=>s!==void 0):[]})),Lc={problem:"#6929C4",mechanism:"#1192E8",engagement_model:"#005D5D",meta_challenge:"#9F1853",foundation:"#FA4D56",technology:"#570408",implication:"#198038"},OS={problem:"Problem",mechanism:"Mechanism",engagement_model:"Engagement Model",meta_challenge:"Meta Challenge",foundation:"Foundation",technology:"Technology",implication:"Implication"},np={strong:"#001D6C",weak:"#BAE6FF",noData:"#E0E0E0"},I8={S:"#24A148",P:"#F1C21B",X:"#DA1E28",H:"#DA1E28",M:"#F1C21B",L:"#24A148"},Wpe="#C6C6C6",Fl=.1,$pe={problem:40,mechanism:50,engagement_model:[50,35],meta_challenge:45,foundation:40,technology:35,implication:[40,30]},Ype={problem:"circle",mechanism:"diamond",engagement_model:"rect",meta_challenge:"hexagon",foundation:"triangle",technology:"star",implication:"ellipse"},Xpe=400,Zpe=80;function Jpe(r,e=25){return r.length<=e?r:r.slice(0,e-1)+""}const eve={type:r=>{const e=r.data,t=e==null?void 0:e.entityType;return t?Ype[t]:"circle"},style:{size:r=>{const e=r.data,t=e==null?void 0:e.entityType;return t?$pe[t]:30},fill:r=>{const e=r.data,t=e==null?void 0:e.entityType;return t?Lc[t]:"#8d8d8d"},stroke:r=>{const e=r.data,t=e==null?void 0:e.isConvergencePoint,n=e==null?void 0:e.entityType;return t&&n?Lc[n]:"#ffffff"},lineWidth:r=>{const e=r.data;return(e==null?void 0:e.isConvergencePoint)?4:2},shadowColor:r=>{const e=r.data;if(e==null?void 0:e.isConvergencePoint){const n=e==null?void 0:e.entityType;return n?Lc[n]:"transparent"}return"transparent"},shadowBlur:r=>{const e=r.data;return(e==null?void 0:e.isConvergencePoint)?8:0},labelText:r=>{const e=r.data,t=e==null?void 0:e.label;return Jpe(t??r.id)},labelPlacement:"bottom",labelFontSize:11,labelFill:"#393939",labelMaxWidth:120,cursor:"pointer"},state:{highlight:{lineWidth:3,shadowBlur:12,shadowColor:"rgba(15, 98, 254, 0.4)"},dim:{opacity:Fl},filtered:{opacity:0,pointerEvents:"none"},selected:{lineWidth:3,stroke:"#0f62fe",shadowBlur:10,shadowColor:"rgba(15, 98, 254, 0.5)"}}},tve={type:"quadratic",style:{stroke:Wpe,lineWidth:1,endArrow:!1,cursor:"default"},state:{highlight:{stroke:"#4589ff",lineWidth:2},dim:{opacity:Fl},filtered:{opacity:0,pointerEvents:"none"}}},nve={type:"rect",style:{fill:"#f0e6ff",fillOpacity:.08,stroke:"#6929C4",strokeOpacity:.4,lineWidth:1,lineDash:[4,4],radius:12,padding:30,labelText:r=>{const e=r.data;return(e==null?void 0:e.label)??r.id},labelPlacement:"top",labelFontSize:12,labelFill:"#6929C4",labelFontWeight:600,collapsedSize:60},state:{dim:{opacity:Fl},filtered:{opacity:0,pointerEvents:"none"}}},rve={type:"d3-force",alphaDecay:.006,alphaMin:.001,manyBody:{strength:-2e3},collide:{radius:Zpe,strength:1,iterations:3},link:{distance:Xpe,strength:.3},center:{strength:.02}};function ive(r){const e=new Set(r.canvasNodes.map(a=>a.id)),t=r.canvasNodes.map(a=>({id:a.id,data:{...a.data,entityType:a.type,label:a.label,isConvergencePoint:a.isConvergencePoint??!1,secondaryClusters:a.secondaryClusters??[]},...a.comboId?{combo:a.comboId}:{}})),n=r.edges.filter(a=>e.has(a.source)&&e.has(a.target)).map(a=>({id:a.id,source:a.source,target:a.target,data:{...a.data,edgeType:a.edgeType}})),i=r.combos.map(a=>({id:a.id,data:{...a.data,label:a.label}}));return{nodes:t,edges:n,combos:i}}function ave(r){return{data:r,node:eve,edge:tve,combo:nve,layout:rve,behaviors:["drag-canvas","zoom-canvas","drag-element"],autoFit:"view",animation:!0}}function sve(r,e){r.on("node:pointerenter",t=>{const n=t.target.id;e.onNodeHover(n),ove(r,n)}),r.on("node:pointerleave",()=>{e.onNodeHover(null),Ave(r)}),r.on("node:click",t=>{const n=t.target.id;e.onNodeClick(n)}),r.on("canvas:click",()=>{e.onCanvasClick()})}function Pd(r,e){try{const t=r.getElementState(e);return Array.isArray(t)&&t.includes("filtered")}catch{return!1}}function ove(r,e){if(Pd(r,e))return;const t=r.getNeighborNodesData(e).map(l=>l.id),n=r.getRelatedEdgesData(e).map(l=>l.id),i=new Set([e,...t]),a=new Set(n),s={},o=r.getNodeData();for(const l of o){const c=l.id;Pd(r,c)?s[c]=["filtered"]:s[c]=i.has(c)?["highlight"]:["dim"]}const A=r.getEdgeData();for(const l of A){const c=l.id;Pd(r,c)?s[c]=["filtered"]:s[c]=a.has(c)?["highlight"]:["dim"]}r.setElementState(s)}function Ave(r){const e={},t=r.getNodeData();for(const i of t){const a=i.id;e[a]=Pd(r,a)?["filtered"]:[]}const n=r.getEdgeData();for(const i of n){const a=i.id;e[a]=Pd(r,a)?["filtered"]:[]}r.setElementState(e)}function lve(r){return{nodeStyles:new Map,edgeStyles:new Map,description:"What's the structure?"}}function cve(r){const e=new Map;for(const t of r.canvasNodes){const n=t.data.evidence_tier;if(n==null){e.set(t.id,{fill:np.noData});continue}const i=typeof n=="number"?n:parseFloat(n);if(isNaN(i)){e.set(t.id,{fill:np.noData});continue}const a=(i-1)/(3.3-1),s=uve(np.strong,np.weak,Math.max(0,Math.min(1,a)));e.set(t.id,{fill:s})}return{nodeStyles:e,edgeStyles:new Map,description:"What's well-evidenced?"}}function uve(r,e,t){const n=parseInt(r.slice(1,3),16),i=parseInt(r.slice(3,5),16),a=parseInt(r.slice(5,7),16),s=parseInt(e.slice(1,3),16),o=parseInt(e.slice(3,5),16),A=parseInt(e.slice(5,7),16),l=Math.round(n+(s-n)*t),c=Math.round(i+(o-i)*t),u=Math.round(a+(A-a)*t);return`#${l.toString(16).padStart(2,"0")}${c.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}`}function dve(r){const e=new Map,t={Critical:60,High:50,"Moderate-High":45,Moderate:40};for(const n of r.canvasNodes)if(n.type==="problem"){const i=n.data.scores,a=i==null?void 0:i.total;if(a!==void 0&&typeof a=="number"){const s=25+(a-8)/6*35;e.set(n.id,{size:Math.max(25,Math.min(60,s))})}}else if(n.type==="meta_challenge"){const i=n.data.severity;i&&t[i]&&e.set(n.id,{size:t[i]})}return{nodeStyles:e,edgeStyles:new Map,description:"What's high-impact?"}}function hve(r){const e=new Map,t=new Map,n=30;for(const a of r.canvasNodes)a.type==="mechanism"?e.set(a.id,{size:n*1.5,opacity:1}):e.set(a.id,{opacity:.4});const i=["problem_mechanism","mechanism_problem","mechanism_model_favours","mechanism_model_disfavours","mechanism_meta_challenge","cluster_mechanism"];for(const a of r.edges)i.some(s=>a.edgeType.includes(s))?t.set(a.id,{opacity:1}):t.set(a.id,{opacity:Fl});return{nodeStyles:e,edgeStyles:t,description:"What shares mechanisms?"}}function fve(r){const e=new Map;for(const t of r.edges)if(t.edgeType==="compatibility_rating"){const n=t.data.rating;n&&(n==="S"||n==="P"||n==="X")?e.set(t.id,{stroke:I8[n],lineWidth:2,opacity:1}):e.set(t.id,{lineWidth:2,opacity:1})}else e.set(t.id,{opacity:Fl});return{nodeStyles:new Map,edgeStyles:e,description:"What works where?"}}function gve(r){const e=new Map,t=new Map,n=30;for(const a of r.canvasNodes)a.type==="foundation"||a.type==="technology"?e.set(a.id,{opacity:1,size:n*1.2}):e.set(a.id,{opacity:.4});const i=["foundation_model_required","foundation_model_optional","foundation_technology","technology_foundation","technology_model_required","technology_model_optional"];for(const a of r.edges)if(i.some(s=>a.edgeType.includes(s))){const s=a.edgeType.includes("required")||a.data.subType==="required",o=a.edgeType.includes("optional")||a.data.subType==="optional";s?t.set(a.id,{lineWidth:2,opacity:1}):o?t.set(a.id,{lineWidth:2,opacity:1,lineDash:[6,4]}):t.set(a.id,{lineWidth:2,opacity:1})}else t.set(a.id,{opacity:Fl});return{nodeStyles:e,edgeStyles:t,description:"What do we need to build?"}}function pve(r){const e=new Map,t=new Map,n={Critical:60,High:50,"Moderate-High":45,Moderate:40};for(const i of r.canvasNodes)if(i.type==="meta_challenge"){const a=i.data.severity;a&&n[a]?e.set(i.id,{size:n[a],opacity:1}):e.set(i.id,{opacity:1})}else e.set(i.id,{opacity:.4});for(const i of r.edges)if(i.edgeType==="vulnerability_rating"||i.edgeType==="model_meta_vulnerability"){const a=i.data.rating;a&&(a==="H"||a==="M"||a==="L")?t.set(i.id,{stroke:I8[a],lineWidth:2,opacity:1}):t.set(i.id,{lineWidth:2,opacity:1})}else t.set(i.id,{opacity:Fl});return{nodeStyles:e,edgeStyles:t,description:"Where are the risks?"}}const vve={default:lve,evidence:cve,impact:dve,mechanisms:hve,compatibility:fve,foundations:gve,vulnerability:pve};function mve(r,e,t){const n=vve[t],i=n(e);i.nodeStyles.forEach((a,s)=>{r.updateNodeData([{id:s,style:a}])}),i.edgeStyles.forEach((a,s)=>{r.updateEdgeData([{id:s,style:a}])}),r.draw()}function yve(){const r=Ar.useRef(null),e=Ar.useRef(null),t=Ar.useRef(null),n=Ar.useRef(!1),[i]=Ar.useState(null),[a,s]=Ar.useState(!1),o=br(_=>_.setGraphData),A=br(_=>_.setSelectedNode),l=br(_=>_.setHoveredNode),c=br(_=>_.selectedNodeId),u=Ar.useRef(c);u.current=c;const h=Ar.useCallback(_=>{u.current===_?A(null):A(_)},[A]),g=Ar.useCallback(_=>{l(_)},[l]),p=Ar.useCallback(()=>{A(null)},[A]);Ar.useEffect(()=>{if(n.current||!r.current)return;n.current=!0;const _=r.current,C=jpe;o(C),t.current=C;const M=ive(C),F=ave(M);async function k(){let P=null;try{P=new Zm({container:_,width:_.clientWidth||window.innerWidth,height:_.clientHeight||window.innerHeight,...F}),sve(P,{onNodeClick:h,onNodeHover:g,onCanvasClick:p});try{await P.render()}catch(N){console.warn("[G6] Non-fatal render error (graph may still work):",N)}}catch(N){console.warn("[G6] Error during init (graph may still work):",N)}if(P&&_.querySelector("canvas")){e.current=P,s(!0);const N=()=>{try{P.fitView()}catch{}};P.once("afterlayout",N),setTimeout(N,3e3),setTimeout(N,8e3),setTimeout(N,15e3)}}return k(),()=>{e.current&&(e.current.destroy(),e.current=null),n.current=!1}},[o,h,g,p]);const v=br(_=>_.activePreset);Ar.useEffect(()=>{if(!a)return;const _=e.current,C=t.current;!_||!C||mve(_,C,v)},[v,a]),Ar.useEffect(()=>{const _=C=>{C.key==="Escape"&&A(null)};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[A]);const m=br(_=>_.visibleEntityTypes),w=br(_=>_.visibleClusters);Ar.useEffect(()=>{var C;if(!a)return;const _=e.current;if(_)try{const M={},F=new Set,k=_.getNodeData();for(const D of k){const Q=D.id,H=(C=D.data)==null?void 0:C.entityType;H&&(m.has(H)?(F.add(Q),M[Q]=[]):M[Q]=["filtered"])}const P=_.getEdgeData();for(const D of P){const Q=D.id,H=F.has(D.source),j=F.has(D.target);M[Q]=H&&j?[]:["filtered"]}const N=_.getComboData();for(const D of N){const Q=D.id;M[Q]=w.has(Q)?[]:["filtered"]}_.setElementState(M)}catch{}},[m,w,a]),Ar.useEffect(()=>{const _=r.current;if(!_)return;const C=new ResizeObserver(M=>{const F=e.current;if(F)for(const k of M){const{width:P,height:N}=k.contentRect;P>0&&N>0&&F.resize(P,N)}});return C.observe(_),()=>C.disconnect()},[]);const b=Ar.useCallback(()=>{const _=e.current;_&&_.fitView()},[]);return i?ie.jsxs("div",{style:{padding:"40px",fontFamily:"monospace",color:"#da1e28"},children:[ie.jsx("h2",{children:"Graph failed to render"}),ie.jsx("pre",{style:{whiteSpace:"pre-wrap",marginTop:"12px",background:"#f4f4f4",padding:"16px",borderRadius:"4px"},children:i})]}):ie.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[ie.jsx("div",{ref:r,style:{width:"100%",height:"100%"}}),!a&&ie.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:"#525252",fontSize:"14px",fontFamily:"system-ui, sans-serif",pointerEvents:"none"},children:"Laying out graph"}),ie.jsx("button",{onClick:b,title:"Fit to screen",style:{position:"absolute",bottom:"16px",right:"16px",width:"40px",height:"40px",borderRadius:"8px",border:"1px solid #e0e0e0",background:"#ffffff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",color:"#525252",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",zIndex:5},onMouseEnter:_=>{_.currentTarget.style.background="#f4f4f4"},onMouseLeave:_=>{_.currentTarget.style.background="#ffffff"},children:""})]})}const lQ=["problem","mechanism","engagement_model","meta_challenge","foundation","technology","implication"],cQ={CL_A:"Cluster A",CL_B:"Cluster B",CL_C:"Cluster C"};function wve(){const[r,e]=Ar.useState(!0),t=br(o=>o.visibleEntityTypes),n=br(o=>o.toggleEntityType),i=br(o=>o.visibleClusters),a=br(o=>o.toggleCluster),s=(o,A)=>{o==="types"?lQ.forEach(l=>{const c=t.has(l);A&&!c&&n(l),!A&&c&&n(l)}):Object.keys(cQ).forEach(l=>{const c=i.has(l);A&&!c&&a(l),!A&&c&&a(l)})};return ie.jsxs("div",{style:{background:"#ffffff",border:"1px solid #e0e0e0",borderRadius:"4px",overflow:"hidden",fontFamily:"system-ui, -apple-system, sans-serif"},children:[ie.jsxs("button",{onClick:()=>e(!r),style:{width:"100%",padding:"12px 16px",background:"#f4f4f4",border:"none",textAlign:"left",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"13px",fontWeight:600,color:"#161616"},children:[ie.jsx("span",{children:"Filters"}),ie.jsx("span",{style:{color:"#525252",fontSize:"11px"},children:r?"":""})]}),r&&ie.jsxs("div",{style:{padding:"16px"},children:[ie.jsxs("div",{style:{marginBottom:"20px"},children:[ie.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[ie.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"#525252"},children:"Entity Types"}),ie.jsxs("div",{style:{display:"flex",gap:"8px"},children:[ie.jsx("button",{onClick:()=>s("types",!0),style:{padding:"2px 8px",fontSize:"11px",background:"none",border:"1px solid #c6c6c6",borderRadius:"3px",cursor:"pointer",color:"#525252"},onMouseEnter:o=>{o.currentTarget.style.background="#e0e0e0"},onMouseLeave:o=>{o.currentTarget.style.background="none"},children:"All"}),ie.jsx("button",{onClick:()=>s("types",!1),style:{padding:"2px 8px",fontSize:"11px",background:"none",border:"1px solid #c6c6c6",borderRadius:"3px",cursor:"pointer",color:"#525252"},onMouseEnter:o=>{o.currentTarget.style.background="#e0e0e0"},onMouseLeave:o=>{o.currentTarget.style.background="none"},children:"None"})]})]}),ie.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:lQ.map(o=>ie.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px"},children:[ie.jsx("input",{type:"checkbox",checked:t.has(o),onChange:()=>n(o),style:{cursor:"pointer"}}),ie.jsx("span",{style:{width:"10px",height:"10px",borderRadius:"50%",background:Lc[o],flexShrink:0}}),ie.jsx("span",{style:{color:"#161616"},children:OS[o]})]},o))})]}),ie.jsxs("div",{children:[ie.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[ie.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"#525252"},children:"Clusters"}),ie.jsxs("div",{style:{display:"flex",gap:"8px"},children:[ie.jsx("button",{onClick:()=>s("clusters",!0),style:{padding:"2px 8px",fontSize:"11px",background:"none",border:"1px solid #c6c6c6",borderRadius:"3px",cursor:"pointer",color:"#525252"},onMouseEnter:o=>{o.currentTarget.style.background="#e0e0e0"},onMouseLeave:o=>{o.currentTarget.style.background="none"},children:"All"}),ie.jsx("button",{onClick:()=>s("clusters",!1),style:{padding:"2px 8px",fontSize:"11px",background:"none",border:"1px solid #c6c6c6",borderRadius:"3px",cursor:"pointer",color:"#525252"},onMouseEnter:o=>{o.currentTarget.style.background="#e0e0e0"},onMouseLeave:o=>{o.currentTarget.style.background="none"},children:"None"})]})]}),ie.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Object.entries(cQ).map(([o,A])=>ie.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px"},children:[ie.jsx("input",{type:"checkbox",checked:i.has(o),onChange:()=>a(o),style:{cursor:"pointer"}}),ie.jsx("span",{style:{color:"#161616"},children:A})]},o))})]})]})]})}const bve=[{id:"default",label:"Default",description:"Standard view with type-based colors"},{id:"evidence",label:"Evidence Strength",description:"Color nodes by evidence tier (darker = stronger evidence)"},{id:"impact",label:"Impact",description:"Size nodes by problem severity and total score"},{id:"mechanisms",label:"Mechanisms",description:"Highlight shared mechanisms and their connections"},{id:"compatibility",label:"Compatibility",description:"Color edges by compatibility ratings (S/P/X)"},{id:"foundations",label:"Foundations",description:"Emphasize foundation-technology relationships"},{id:"vulnerability",label:"Vulnerability",description:"Show vulnerability ratings (H/M/L)"}];function _ve(){const[r,e]=Ar.useState(!0),t=br(i=>i.activePreset),n=br(i=>i.setActivePreset);return ie.jsxs("div",{style:{background:"#ffffff",border:"1px solid #e0e0e0",borderRadius:"4px",overflow:"hidden",fontFamily:"system-ui, -apple-system, sans-serif"},children:[ie.jsxs("button",{onClick:()=>e(!r),style:{width:"100%",padding:"12px 16px",background:"#f4f4f4",border:"none",textAlign:"left",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"13px",fontWeight:600,color:"#161616"},children:[ie.jsx("span",{children:"Visual Encoding"}),ie.jsx("span",{style:{color:"#525252",fontSize:"11px"},children:r?"":""})]}),r&&ie.jsx("div",{style:{padding:"16px"},children:ie.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:bve.map(i=>ie.jsxs("label",{style:{display:"flex",gap:"10px",cursor:"pointer",padding:"10px",borderRadius:"4px",background:t===i.id?"#f4f4f4":"transparent",border:t===i.id?"1px solid #0f62fe":"1px solid transparent",transition:"all 0.15s ease"},onMouseEnter:a=>{t!==i.id&&(a.currentTarget.style.background="#f4f4f4")},onMouseLeave:a=>{t!==i.id&&(a.currentTarget.style.background="transparent")},title:i.description,children:[ie.jsx("input",{type:"radio",name:"preset",value:i.id,checked:t===i.id,onChange:()=>n(i.id),style:{cursor:"pointer",marginTop:"2px",flexShrink:0}}),ie.jsxs("div",{style:{flex:1},children:[ie.jsx("div",{style:{fontSize:"13px",fontWeight:500,color:"#161616",marginBottom:"2px"},children:i.label}),ie.jsx("div",{style:{fontSize:"11px",color:"#525252",lineHeight:"1.4"},children:i.description})]})]},i.id))})})]})}function Eve(){return ie.jsxs("div",{style:{position:"absolute",top:"16px",left:"16px",zIndex:10,display:"flex",flexDirection:"column",gap:"12px",width:"280px",maxHeight:"calc(100vh - 32px)",overflowY:"auto",fontFamily:"system-ui, -apple-system, sans-serif"},children:[ie.jsx(wve,{}),ie.jsx(_ve,{})]})}function Cve({entityId:r,entityName:e,entityType:t}){const n=br(o=>o.setSelectedNode),i=()=>{n(r)},a=Lc[t],s=OS[t];return ie.jsxs("button",{onClick:i,style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",borderRadius:"12px",border:"1px solid #e0e0e0",background:"#f4f4f4",cursor:"pointer",fontSize:"13px",fontFamily:"system-ui, -apple-system, sans-serif",transition:"all 0.15s ease"},onMouseEnter:o=>{o.currentTarget.style.background="#e0e0e0",o.currentTarget.style.borderColor=a},onMouseLeave:o=>{o.currentTarget.style.background="#f4f4f4",o.currentTarget.style.borderColor="#e0e0e0"},title:s,children:[ie.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:a,flexShrink:0}}),ie.jsx("span",{style:{color:"#161616"},children:e})]})}function Bve({data:r}){const e=r.plain_language,t=r.scores,n=r.evidence_tier,i=r.cluster,a=r.role;return ie.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Description"}),ie.jsx("div",{style:{fontSize:"14px",lineHeight:"1.5",color:"#161616"},children:e})]}),t&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Scores"}),ie.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"13px"},children:[t.frequency!==void 0&&ie.jsxs("div",{children:["Frequency: ",ie.jsx("strong",{children:t.frequency})]}),t.differentiation!==void 0&&ie.jsxs("div",{children:["Differentiation: ",ie.jsx("strong",{children:t.differentiation})]}),t.connectedness!==void 0&&ie.jsxs("div",{children:["Connectedness: ",ie.jsx("strong",{children:t.connectedness})]}),t.total!==void 0&&ie.jsxs("div",{style:{gridColumn:"1 / -1",fontWeight:600,marginTop:"4px"},children:["Total: ",ie.jsx("strong",{children:t.total})]})]})]}),ie.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"13px"},children:[n!==void 0&&ie.jsxs("div",{children:[ie.jsx("span",{style:{color:"#525252"},children:"Evidence Tier: "}),ie.jsx("strong",{children:n})]}),i&&ie.jsxs("div",{children:[ie.jsx("span",{style:{color:"#525252"},children:"Cluster: "}),ie.jsx("strong",{children:i})]})]}),a&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Role"}),ie.jsx("div",{style:{fontSize:"13px",color:"#161616"},children:a})]})]})}function xve({data:r}){const e=r.plain_language,t=r.variability,n=r.does_not_explain;return ie.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Description"}),ie.jsx("div",{style:{fontSize:"14px",lineHeight:"1.5",color:"#161616"},children:e})]}),t&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Variability"}),ie.jsx("div",{style:{fontSize:"13px",color:"#161616"},children:t})]}),n&&n.length>0&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Does Not Explain"}),ie.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"13px",color:"#161616"},children:n.map((i,a)=>ie.jsx("li",{children:i},a))})]})]})}function Sve({data:r}){const e=r.plain_language,t=r.dimensions,n=r.retention_risk,i=r.habit_burden;return ie.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Description"}),ie.jsx("div",{style:{fontSize:"14px",lineHeight:"1.5",color:"#161616"},children:e})]}),t&&Object.keys(t).length>0&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Dimensions"}),ie.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"13px"},children:[t.initiation&&ie.jsxs("div",{children:[ie.jsx("span",{style:{color:"#525252"},children:"Initiation: "}),ie.jsx("span",{children:t.initiation})]}),t.effort&&ie.jsxs("div",{children:[ie.jsx("span",{style:{color:"#525252"},children:"Effort: "}),ie.jsx("span",{children:t.effort})]}),t.timing&&ie.jsxs("div",{children:[ie.jsx("span",{style:{color:"#525252"},children:"Timing: "}),ie.jsx("span",{children:t.timing})]}),t.continuity&&ie.jsxs("div",{children:[ie.jsx("span",{style:{color:"#525252"},children:"Continuity: "}),ie.jsx("span",{children:t.continuity})]})]})]}),ie.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"13px"},children:[n&&ie.jsxs("div",{children:[ie.jsx("span",{style:{color:"#525252"},children:"Retention Risk: "}),ie.jsx("strong",{children:n})]}),i&&ie.jsxs("div",{children:[ie.jsx("span",{style:{color:"#525252"},children:"Habit Burden: "}),ie.jsx("strong",{children:i})]})]})]})}function Tve({data:r}){const e=r.plain_language,t=r.severity,n=r.evidence_tier,i=r.key_evidence;return ie.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Description"}),ie.jsx("div",{style:{fontSize:"14px",lineHeight:"1.5",color:"#161616"},children:e})]}),ie.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"13px"},children:[t&&ie.jsxs("div",{children:[ie.jsx("span",{style:{color:"#525252"},children:"Severity: "}),ie.jsx("strong",{children:t})]}),n!==void 0&&ie.jsxs("div",{children:[ie.jsx("span",{style:{color:"#525252"},children:"Evidence Tier: "}),ie.jsx("strong",{children:n})]})]}),i&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Key Evidence"}),ie.jsx("div",{style:{fontSize:"13px",lineHeight:"1.5",color:"#161616"},children:i})]})]})}function Mve({data:r}){const e=r.purpose,t=r.technology_ref;return ie.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Purpose"}),ie.jsx("div",{style:{fontSize:"14px",lineHeight:"1.5",color:"#161616"},children:e})]}),t&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Technology Reference"}),ie.jsx("div",{style:{fontSize:"13px",color:"#161616"},children:t})]})]})}function Fve({data:r}){const e=r.name,t=r.serves_capability,n=r.architectural_scope,i=r.integration_surface,a=r.technology_stake,s=r.remaining_uncertainty,o=r.approaches,[A,l]=Ar.useState(null),c=u=>{l(A===u?null:u)};return ie.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Name"}),ie.jsx("div",{style:{fontSize:"14px",color:"#161616"},children:e})]}),t&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Serves Capability"}),ie.jsx("div",{style:{fontSize:"13px",color:"#161616"},children:t})]}),ie.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"13px"},children:[n&&ie.jsxs("div",{children:[ie.jsx("span",{style:{color:"#525252"},children:"Architectural Scope: "}),ie.jsx("span",{children:n})]}),i&&ie.jsxs("div",{children:[ie.jsx("span",{style:{color:"#525252"},children:"Integration Surface: "}),ie.jsx("span",{children:i})]}),a&&ie.jsxs("div",{children:[ie.jsx("span",{style:{color:"#525252"},children:"Technology Stake: "}),ie.jsx("span",{children:a})]})]}),s&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Remaining Uncertainty"}),ie.jsx("div",{style:{fontSize:"13px",color:"#161616"},children:s})]}),o&&o.length>0&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"8px"},children:"Approaches"}),ie.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:o.map((u,h)=>ie.jsxs("div",{style:{border:"1px solid #e0e0e0",borderRadius:"4px",overflow:"hidden"},children:[ie.jsxs("button",{onClick:()=>c(h),style:{width:"100%",padding:"10px 12px",background:A===h?"#f4f4f4":"#ffffff",border:"none",textAlign:"left",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"13px",fontWeight:500,color:"#161616"},children:[ie.jsx("span",{children:u.name}),ie.jsx("span",{style:{color:"#525252",fontSize:"11px"},children:A===h?"":""})]}),A===h&&ie.jsxs("div",{style:{padding:"12px",background:"#f4f4f4",fontSize:"12px"},children:[u.known_requirements&&u.known_requirements.length>0&&ie.jsxs("div",{style:{marginBottom:"12px"},children:[ie.jsx("div",{style:{fontWeight:600,marginBottom:"4px",color:"#525252"},children:"Known Requirements"}),ie.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:u.known_requirements.map((g,p)=>ie.jsx("li",{children:g},p))})]}),u.known_challenges&&u.known_challenges.length>0&&ie.jsxs("div",{style:{marginBottom:"12px"},children:[ie.jsx("div",{style:{fontWeight:600,marginBottom:"4px",color:"#525252"},children:"Known Challenges"}),ie.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:u.known_challenges.map((g,p)=>ie.jsx("li",{children:g},p))})]}),u.accelerators&&u.accelerators.length>0&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,marginBottom:"4px",color:"#525252"},children:"Accelerators"}),ie.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:u.accelerators.map((g,p)=>ie.jsx("li",{children:g},p))})]})]})]},h))})]})]})}function kve({data:r}){const e=r.statement,t=r.type;return ie.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Statement"}),ie.jsx("div",{style:{fontSize:"14px",lineHeight:"1.5",color:"#161616"},children:e})]}),t&&ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"6px"},children:"Type"}),ie.jsx("div",{style:{fontSize:"13px",color:"#161616"},children:t})]})]})}function Ive({data:r}){const e=t=>t==null?"N/A":typeof t=="object"?JSON.stringify(t,null,2):String(t);return ie.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:Object.entries(r).map(([t,n])=>ie.jsxs("div",{children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"12px",color:"#525252",marginBottom:"4px"},children:t.replace(/_/g," ").replace(/\b\w/g,i=>i.toUpperCase())}),ie.jsx("div",{style:{fontSize:"13px",color:"#161616",whiteSpace:"pre-wrap"},children:e(n)})]},t))})}function Pve(){const r=br(p=>p.selectedNodeId),e=br(p=>p.setSelectedNode),t=br(p=>p.getNodeById),n=br(p=>p.getEdgesForNode),i=br(p=>p.getConnectedNodes);if(!r)return null;const a=t(r);if(!a)return null;const s=n(r),o=i(r),A={};s.forEach(p=>{const v=p.source===r?p.target:p.source,m=o.find(w=>w.id===v);m&&(A[p.edgeType]||(A[p.edgeType]=[]),A[p.edgeType].push(m))});const l=()=>{e(null)},c=p=>{p.target===p.currentTarget&&l()},u=()=>{switch(a.type){case"problem":return ie.jsx(Bve,{data:a.data});case"mechanism":return ie.jsx(xve,{data:a.data});case"engagement_model":return ie.jsx(Sve,{data:a.data});case"meta_challenge":return ie.jsx(Tve,{data:a.data});case"foundation":return ie.jsx(Mve,{data:a.data});case"technology":return ie.jsx(Fve,{data:a.data});case"implication":return ie.jsx(kve,{data:a.data});default:return ie.jsx(Ive,{data:a.data})}},h=Lc[a.type]||"#525252",g=OS[a.type]||a.type;return ie.jsx("div",{onClick:c,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.3)",zIndex:1e3,transition:"background 0.2s ease"},children:ie.jsxs("div",{style:{position:"absolute",top:0,right:0,bottom:0,width:"400px",background:"#ffffff",boxShadow:"-2px 0 8px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",animation:"slideIn 0.2s ease-out"},children:[ie.jsx("style",{children:`
          @keyframes slideIn {
            from {
              transform: translateX(100%);
            }
            to {
              transform: translateX(0);
            }
          }
        `}),ie.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"12px"},children:[ie.jsxs("div",{style:{flex:1},children:[ie.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:600,color:"#161616",lineHeight:"1.3"},children:a.label}),ie.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",borderRadius:"12px",background:"#f4f4f4",fontSize:"12px",fontWeight:500},children:[ie.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:h}}),ie.jsx("span",{style:{color:"#525252"},children:g})]})]}),ie.jsx("button",{onClick:l,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#525252",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},onMouseEnter:p=>{p.currentTarget.style.background="#e0e0e0"},onMouseLeave:p=>{p.currentTarget.style.background="none"},title:"Close",children:""})]}),ie.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px",fontSize:"14px",fontFamily:"system-ui, -apple-system, sans-serif"},children:[u(),Object.keys(A).length>0&&ie.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid #e0e0e0"},children:[ie.jsx("div",{style:{fontWeight:600,fontSize:"14px",marginBottom:"12px",color:"#161616"},children:"Connected Entities"}),ie.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:Object.entries(A).map(([p,v])=>ie.jsxs("div",{children:[ie.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"#525252",marginBottom:"8px"},children:p.replace(/_/g," ").replace(/\b\w/g,m=>m.toUpperCase())}),ie.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:v.map(m=>ie.jsx(Cve,{entityId:m.id,entityName:m.label,entityType:m.type},m.id))})]},p))})]})]})]})})}function Ove(){return ie.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[ie.jsx(yve,{}),ie.jsx(Eve,{}),ie.jsx(Pve,{})]})}_j.createRoot(document.getElementById("root")).render(ie.jsx(Ove,{}));
